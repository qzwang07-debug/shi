[33mcommit 3c943a9b8346301cd6d48c1f1e15f13d61125369[m[33m ([m[1;36mHEAD -> [m[1;32mmaster[m[33m)[m
Author: unknown <1179630166@qq.com>
Date:   Sat Nov 29 13:33:51 2025 +0800

    æ·»åŠ ç”µæºåç«¯

[1mdiff --git a/src/App.vue b/src/App.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..31839f20[m
[1m--- /dev/null[m
[1m+++ b/src/App.vue[m
[36m@@ -0,0 +1,15 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <router-view />[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport useSettingsStore from '@/store/modules/settings'[m
[32m+[m[32mimport { handleThemeStyle } from '@/utils/theme'[m
[32m+[m
[32m+[m[32monMounted(() => {[m
[32m+[m[32m  nextTick(() => {[m
[32m+[m[32m    // åˆå§‹åŒ–ä¸»é¢˜æ ·å¼[m
[32m+[m[32m    handleThemeStyle(useSettingsStore().theme)[m
[32m+[m[32m  })[m
[32m+[m[32m})[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/api/appLogin.js b/src/api/appLogin.js[m
[1mnew file mode 100644[m
[1mindex 00000000..7a744b3a[m
[1m--- /dev/null[m
[1m+++ b/src/api/appLogin.js[m
[36m@@ -0,0 +1,40 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// Cç«¯ç”¨æˆ·ç™»å½•æ–¹æ³•[m
[32m+[m[32mexport function appLogin(username, password, code, uuid) {[m
[32m+[m[32m  const data = {[m
[32m+[m[32m    username,[m
[32m+[m[32m    password,[m
[32m+[m[32m    code,[m
[32m+[m[32m    uuid[m
[32m+[m[32m  }[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/app/login',[m
[32m+[m[32m    headers: {[m
[32m+[m[32m      isToken: false,[m
[32m+[m[32m      repeatSubmit: false[m
[32m+[m[32m    },[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// Cç«¯ç”¨æˆ·æ³¨å†Œæ–¹æ³•[m
[32m+[m[32mexport function appRegister(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/app/register',[m
[32m+[m[32m    headers: {[m
[32m+[m[32m      isToken: false[m
[32m+[m[32m    },[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// è·å–Cç«¯ç”¨æˆ·è¯¦ç»†ä¿¡æ¯[m
[32m+[m[32mexport function getAppUserInfo() {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/app/user/info',[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/src/api/front/comment.js b/src/api/front/comment.js[m
[1mnew file mode 100644[m
[1mindex 00000000..6c6e2f6b[m
[1m--- /dev/null[m
[1m+++ b/src/api/front/comment.js[m
[36m@@ -0,0 +1,10 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢å•†å“è¯„ä»·åˆ—è¡¨[m
[32m+[m[32mexport function listFrontComment(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/app/comment/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/src/api/front/hardware.js b/src/api/front/hardware.js[m
[1mnew file mode 100644[m
[1mindex 00000000..9caa9885[m
[1m--- /dev/null[m
[1m+++ b/src/api/front/hardware.js[m
[36m@@ -0,0 +1,28 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢CPUåˆ—è¡¨ï¼ˆå‰å°ä¸“ç”¨ï¼‰[m
[32m+[m[32mexport function listFrontCpu(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/front/hardware/cpu/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢GPUåˆ—è¡¨ï¼ˆå‰å°ä¸“ç”¨ï¼‰[m
[32m+[m[32mexport function listFrontGpu(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/front/hardware/gpu/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢å†…å­˜åˆ—è¡¨ï¼ˆå‰å°ä¸“ç”¨ï¼‰[m
[32m+[m[32mexport function listFrontMemory(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/front/hardware/memory/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/src/api/front/product.js b/src/api/front/product.js[m
[1mnew file mode 100644[m
[1mindex 00000000..f3d7db10[m
[1m--- /dev/null[m
[1m+++ b/src/api/front/product.js[m
[36m@@ -0,0 +1,18 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢å•†å“åˆ—è¡¨ï¼ˆå‰å°ä¸“ç”¨ï¼Œä¸åº”ç”¨æƒé™æ§åˆ¶ï¼‰[m
[32m+[m[32mexport function listFrontProduct(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/front/product/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢å•†å“è¯¦ç»†ï¼ˆå‰å°ä¸“ç”¨ï¼‰[m
[32m+[m[32mexport function getFrontProduct(id) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/front/product/' + id,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/src/api/login.js b/src/api/login.js[m
[1mnew file mode 100644[m
[1mindex 00000000..7b7388fd[m
[1m--- /dev/null[m
[1m+++ b/src/api/login.js[m
[36m@@ -0,0 +1,60 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// ç™»å½•æ–¹æ³•[m
[32m+[m[32mexport function login(username, password, code, uuid) {[m
[32m+[m[32m  const data = {[m
[32m+[m[32m    username,[m
[32m+[m[32m    password,[m
[32m+[m[32m    code,[m
[32m+[m[32m    uuid[m
[32m+[m[32m  }[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/login',[m
[32m+[m[32m    headers: {[m
[32m+[m[32m      isToken: false,[m
[32m+[m[32m      repeatSubmit: false[m
[32m+[m[32m    },[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ³¨å†Œæ–¹æ³•[m
[32m+[m[32mexport function register(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/register',[m
[32m+[m[32m    headers: {[m
[32m+[m[32m      isToken: false[m
[32m+[m[32m    },[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// è·å–ç”¨æˆ·è¯¦ç»†ä¿¡æ¯[m
[32m+[m[32mexport function getInfo() {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/getInfo',[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// é€€å‡ºæ–¹æ³•[m
[32m+[m[32mexport function logout() {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/logout',[m
[32m+[m[32m    method: 'post'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// è·å–éªŒè¯ç [m
[32m+[m[32mexport function getCodeImg() {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/captchaImage',[m
[32m+[m[32m    headers: {[m
[32m+[m[32m      isToken: false[m
[32m+[m[32m    },[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    timeout: 20000[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/src/api/menu.js b/src/api/menu.js[m
[1mnew file mode 100644[m
[1mindex 00000000..faef101c[m
[1m--- /dev/null[m
[1m+++ b/src/api/menu.js[m
[36m@@ -0,0 +1,9 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// è·å–è·¯ç”±[m
[32m+[m[32mexport const getRouters = () => {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/getRouters',[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/src/api/monitor/cache.js b/src/api/monitor/cache.js[m
[1mnew file mode 100644[m
[1mindex 00000000..72c5f6a3[m
[1m--- /dev/null[m
[1m+++ b/src/api/monitor/cache.js[m
[36m@@ -0,0 +1,57 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢ç¼“å­˜è¯¦ç»†[m
[32m+[m[32mexport function getCache() {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/monitor/cache',[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢ç¼“å­˜åç§°åˆ—è¡¨[m
[32m+[m[32mexport function listCacheName() {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/monitor/cache/getNames',[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢ç¼“å­˜é”®ååˆ—è¡¨[m
[32m+[m[32mexport function listCacheKey(cacheName) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/monitor/cache/getKeys/' + cacheName,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢ç¼“å­˜å†…å®¹[m
[32m+[m[32mexport function getCacheValue(cacheName, cacheKey) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/monitor/cache/getValue/' + cacheName + '/' + cacheKey,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ¸…ç†æŒ‡å®šåç§°ç¼“å­˜[m
[32m+[m[32mexport function clearCacheName(cacheName) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/monitor/cache/clearCacheName/' + cacheName,[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ¸…ç†æŒ‡å®šé”®åç¼“å­˜[m
[32m+[m[32mexport function clearCacheKey(cacheKey) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/monitor/cache/clearCacheKey/' + cacheKey,[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ¸…ç†å…¨éƒ¨ç¼“å­˜[m
[32m+[m[32mexport function clearCacheAll() {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/monitor/cache/clearCacheAll',[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[1mdiff --git a/src/api/monitor/job.js b/src/api/monitor/job.js[m
[1mnew file mode 100644[m
[1mindex 00000000..38155693[m
[1m--- /dev/null[m
[1m+++ b/src/api/monitor/job.js[m
[36m@@ -0,0 +1,71 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢å®šæ—¶ä»»åŠ¡è°ƒåº¦åˆ—è¡¨[m
[32m+[m[32mexport function listJob(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/monitor/job/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢å®šæ—¶ä»»åŠ¡è°ƒåº¦è¯¦ç»†[m
[32m+[m[32mexport function getJob(jobId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/monitor/job/' + jobId,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ–°å¢å®šæ—¶ä»»åŠ¡è°ƒåº¦[m
[32m+[m[32mexport function addJob(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/monitor/job',[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¿®æ”¹å®šæ—¶ä»»åŠ¡è°ƒåº¦[m
[32m+[m[32mexport function updateJob(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/monitor/job',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ é™¤å®šæ—¶ä»»åŠ¡è°ƒåº¦[m
[32m+[m[32mexport function delJob(jobId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/monitor/job/' + jobId,[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä»»åŠ¡çŠ¶æ€ä¿®æ”¹[m
[32m+[m[32mexport function changeJobStatus(jobId, status) {[m
[32m+[m[32m  const data = {[m
[32m+[m[32m    jobId,[m
[32m+[m[32m    status[m
[32m+[m[32m  }[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/monitor/job/changeStatus',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m
[32m+[m[32m// å®šæ—¶ä»»åŠ¡ç«‹å³æ‰§è¡Œä¸€æ¬¡[m
[32m+[m[32mexport function runJob(jobId, jobGroup) {[m
[32m+[m[32m  const data = {[m
[32m+[m[32m    jobId,[m
[32m+[m[32m    jobGroup[m
[32m+[m[32m  }[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/monitor/job/run',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/src/api/monitor/jobLog.js b/src/api/monitor/jobLog.js[m
[1mnew file mode 100644[m
[1mindex 00000000..6e0be616[m
[1m--- /dev/null[m
[1m+++ b/src/api/monitor/jobLog.js[m
[36m@@ -0,0 +1,26 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢è°ƒåº¦æ—¥å¿—åˆ—è¡¨[m
[32m+[m[32mexport function listJobLog(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/monitor/jobLog/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ é™¤è°ƒåº¦æ—¥å¿—[m
[32m+[m[32mexport function delJobLog(jobLogId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/monitor/jobLog/' + jobLogId,[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ¸…ç©ºè°ƒåº¦æ—¥å¿—[m
[32m+[m[32mexport function cleanJobLog() {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/monitor/jobLog/clean',[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[1mdiff --git a/src/api/monitor/logininfor.js b/src/api/monitor/logininfor.js[m
[1mnew file mode 100644[m
[1mindex 00000000..4d112b78[m
[1m--- /dev/null[m
[1m+++ b/src/api/monitor/logininfor.js[m
[36m@@ -0,0 +1,34 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢ç™»å½•æ—¥å¿—åˆ—è¡¨[m
[32m+[m[32mexport function list(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/monitor/logininfor/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ é™¤ç™»å½•æ—¥å¿—[m
[32m+[m[32mexport function delLogininfor(infoId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/monitor/logininfor/' + infoId,[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// è§£é”ç”¨æˆ·ç™»å½•çŠ¶æ€[m
[32m+[m[32mexport function unlockLogininfor(userName) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/monitor/logininfor/unlock/' + userName,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ¸…ç©ºç™»å½•æ—¥å¿—[m
[32m+[m[32mexport function cleanLogininfor() {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/monitor/logininfor/clean',[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[1mdiff --git a/src/api/monitor/online.js b/src/api/monitor/online.js[m
[1mnew file mode 100644[m
[1mindex 00000000..bd221378[m
[1m--- /dev/null[m
[1m+++ b/src/api/monitor/online.js[m
[36m@@ -0,0 +1,18 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢åœ¨çº¿ç”¨æˆ·åˆ—è¡¨[m
[32m+[m[32mexport function list(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/monitor/online/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å¼ºé€€ç”¨æˆ·[m
[32m+[m[32mexport function forceLogout(tokenId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/monitor/online/' + tokenId,[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[1mdiff --git a/src/api/monitor/operlog.js b/src/api/monitor/operlog.js[m
[1mnew file mode 100644[m
[1mindex 00000000..a04bca84[m
[1m--- /dev/null[m
[1m+++ b/src/api/monitor/operlog.js[m
[36m@@ -0,0 +1,26 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢æ“ä½œæ—¥å¿—åˆ—è¡¨[m
[32m+[m[32mexport function list(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/monitor/operlog/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ é™¤æ“ä½œæ—¥å¿—[m
[32m+[m[32mexport function delOperlog(operId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/monitor/operlog/' + operId,[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ¸…ç©ºæ“ä½œæ—¥å¿—[m
[32m+[m[32mexport function cleanOperlog() {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/monitor/operlog/clean',[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[1mdiff --git a/src/api/monitor/server.js b/src/api/monitor/server.js[m
[1mnew file mode 100644[m
[1mindex 00000000..e1f9ca21[m
[1m--- /dev/null[m
[1m+++ b/src/api/monitor/server.js[m
[36m@@ -0,0 +1,9 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// è·å–æœåŠ¡ä¿¡æ¯[m
[32m+[m[32mexport function getServer() {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/monitor/server',[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/src/api/portal/address.js b/src/api/portal/address.js[m
[1mnew file mode 100644[m
[1mindex 00000000..309a6147[m
[1m--- /dev/null[m
[1m+++ b/src/api/portal/address.js[m
[36m@@ -0,0 +1,48 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢æˆ‘çš„æ”¶è´§åœ°å€åˆ—è¡¨[m
[32m+[m[32mexport function listAddress() {[m
[32m+[m[32m  console.log("è°ƒç”¨listAddressï¼Œrequesté…ç½®:", {[m
[32m+[m[32m    url: '/app/address/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    headers: request.defaults.headers[m
[32m+[m[32m  });[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/app/address/list',[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ–°å¢æ”¶è´§åœ°å€[m
[32m+[m[32mexport function addAddress(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/app/address/add',[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¿®æ”¹æ”¶è´§åœ°å€[m
[32m+[m[32mexport function updateAddress(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/app/address/edit',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ é™¤æ”¶è´§åœ°å€[m
[32m+[m[32mexport function delAddress(addressId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/app/address/del/' + addressId,[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// è·å–åœ°å€è¯¦æƒ…[m
[32m+[m[32mexport function getAddress(addressId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/app/address/' + addressId,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/src/api/portal/order.js b/src/api/portal/order.js[m
[1mnew file mode 100644[m
[1mindex 00000000..f14dd63d[m
[1m--- /dev/null[m
[1m+++ b/src/api/portal/order.js[m
[36m@@ -0,0 +1,11 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// åˆ›å»ºè®¢å•[m
[32m+[m[32m// dataç»“æ„: { addressId, remark, items: [{cartId, productId, quantity, businessType, startDate, endDate}] }[m
[32m+[m[32mexport function createOrder(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/app/order/create',[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/src/api/portal/user.js b/src/api/portal/user.js[m
[1mnew file mode 100644[m
[1mindex 00000000..8f7e9220[m
[1m--- /dev/null[m
[1m+++ b/src/api/portal/user.js[m
[36m@@ -0,0 +1,36 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// è·å–ç”¨æˆ·ä¿¡æ¯[m
[32m+[m[32mexport function getInfo() {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/app/user/info',[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¿®æ”¹ä¸ªäººä¿¡æ¯[m
[32m+[m[32mexport function updateProfile(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/app/user/profile',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¿®æ”¹å¯†ç [m
[32m+[m[32mexport function updatePassword(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/app/user/pwd',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å¤´åƒä¸Šä¼ [m
[32m+[m[32mexport function uploadAvatar(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/app/user/avatar',[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/src/api/shop/cart.js b/src/api/shop/cart.js[m
[1mnew file mode 100644[m
[1mindex 00000000..1ed83139[m
[1m--- /dev/null[m
[1m+++ b/src/api/shop/cart.js[m
[36m@@ -0,0 +1,35 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢è´­ç‰©è½¦åˆ—è¡¨[m
[32m+[m[32mexport function listCart() {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/app/cart/list',[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ·»åŠ è´­ç‰©è½¦ (å·²åœ¨è¯¦æƒ…é¡µä½¿ç”¨ï¼Œè¿™é‡Œä¿ç•™ä»¥å¤‡ä¸æ—¶ä¹‹éœ€)[m
[32m+[m[32mexport function addToCart(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/app/cart',[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¿®æ”¹è´­ç‰©è½¦ (æ•°é‡ã€é€‰ä¸­çŠ¶æ€)[m
[32m+[m[32mexport function updateCart(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/app/cart',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ é™¤è´­ç‰©è½¦ (æ”¯æŒæ‰¹é‡: 101,102)[m
[32m+[m[32mexport function delCart(cartIds) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/app/cart/' + cartIds,[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/src/api/system/AppAddress.js b/src/api/system/AppAddress.js[m
[1mnew file mode 100644[m
[1mindex 00000000..50d376a2[m
[1m--- /dev/null[m
[1m+++ b/src/api/system/AppAddress.js[m
[36m@@ -0,0 +1,44 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢æ”¶è´§åœ°å€åˆ—è¡¨[m
[32m+[m[32mexport function listAppAddress(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/AppAddress/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢æ”¶è´§åœ°å€è¯¦ç»†[m
[32m+[m[32mexport function getAppAddress(addressId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/AppAddress/' + addressId,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ–°å¢æ”¶è´§åœ°å€[m
[32m+[m[32mexport function addAppAddress(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/AppAddress',[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¿®æ”¹æ”¶è´§åœ°å€[m
[32m+[m[32mexport function updateAppAddress(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/AppAddress',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ é™¤æ”¶è´§åœ°å€[m
[32m+[m[32mexport function delAppAddress(addressId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/AppAddress/' + addressId,[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[1mdiff --git a/src/api/system/ShopOrder.js b/src/api/system/ShopOrder.js[m
[1mnew file mode 100644[m
[1mindex 00000000..6924f8bc[m
[1m--- /dev/null[m
[1m+++ b/src/api/system/ShopOrder.js[m
[36m@@ -0,0 +1,44 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢è®¢å•ä¸»åˆ—è¡¨[m
[32m+[m[32mexport function listShopOrder(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/ShopOrder/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢è®¢å•ä¸»è¯¦ç»†[m
[32m+[m[32mexport function getShopOrder(orderId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/ShopOrder/' + orderId,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ–°å¢è®¢å•ä¸»[m
[32m+[m[32mexport function addShopOrder(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/ShopOrder',[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¿®æ”¹è®¢å•ä¸»[m
[32m+[m[32mexport function updateShopOrder(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/ShopOrder',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ é™¤è®¢å•ä¸»[m
[32m+[m[32mexport function delShopOrder(orderId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/ShopOrder/' + orderId,[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[1mdiff --git a/src/api/system/computer.js b/src/api/system/computer.js[m
[1mnew file mode 100644[m
[1mindex 00000000..274a1373[m
[1m--- /dev/null[m
[1m+++ b/src/api/system/computer.js[m
[36m@@ -0,0 +1,54 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢ç”µè„‘å•†å“åˆ—è¡¨[m
[32m+[m[32mexport function listComputer(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/computer/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// è·å–ç”µè„‘å•†å“è¯¦ç»†ä¿¡æ¯[m
[32m+[m[32mexport function getInfo(id) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: `/system/computer/${id}`,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ–°å¢ç”µè„‘å•†å“[m
[32m+[m[32mexport function addComputer(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/computer',[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¿®æ”¹ç”µè„‘å•†å“[m
[32m+[m[32mexport function updateComputer(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/computer',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ é™¤ç”µè„‘å•†å“[m
[32m+[m[32mexport function delComputer(ids) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: `/system/computer/${ids}`,[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å¯¼å‡ºç”µè„‘å•†å“[m
[32m+[m[32mexport function exportComputer(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/computer/export',[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    data: query,[m
[32m+[m[32m    responseType: 'blob'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/src/api/system/config.js b/src/api/system/config.js[m
[1mnew file mode 100644[m
[1mindex 00000000..a404d825[m
[1m--- /dev/null[m
[1m+++ b/src/api/system/config.js[m
[36m@@ -0,0 +1,60 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢å‚æ•°åˆ—è¡¨[m
[32m+[m[32mexport function listConfig(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/config/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢å‚æ•°è¯¦ç»†[m
[32m+[m[32mexport function getConfig(configId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/config/' + configId,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ ¹æ®å‚æ•°é”®åæŸ¥è¯¢å‚æ•°å€¼[m
[32m+[m[32mexport function getConfigKey(configKey) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/config/configKey/' + configKey,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ–°å¢å‚æ•°é…ç½®[m
[32m+[m[32mexport function addConfig(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/config',[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¿®æ”¹å‚æ•°é…ç½®[m
[32m+[m[32mexport function updateConfig(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/config',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ é™¤å‚æ•°é…ç½®[m
[32m+[m[32mexport function delConfig(configId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/config/' + configId,[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ·æ–°å‚æ•°ç¼“å­˜[m
[32m+[m[32mexport function refreshCache() {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/config/refreshCache',[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[1mdiff --git a/src/api/system/cpu.js b/src/api/system/cpu.js[m
[1mnew file mode 100644[m
[1mindex 00000000..7f418f5e[m
[1m--- /dev/null[m
[1m+++ b/src/api/system/cpu.js[m
[36m@@ -0,0 +1,44 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢CPUç¡¬ä»¶åˆ—è¡¨[m
[32m+[m[32mexport function listCpu(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/cpu/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢CPUç¡¬ä»¶è¯¦ç»†[m
[32m+[m[32mexport function getCpu(id) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/cpu/' + id,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ–°å¢CPUç¡¬ä»¶[m
[32m+[m[32mexport function addCpu(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/cpu',[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¿®æ”¹CPUç¡¬ä»¶[m
[32m+[m[32mexport function updateCpu(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/cpu',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ é™¤CPUç¡¬ä»¶[m
[32m+[m[32mexport function delCpu(id) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/cpu/' + id,[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[1mdiff --git a/src/api/system/dept.js b/src/api/system/dept.js[m
[1mnew file mode 100644[m
[1mindex 00000000..fc943cd4[m
[1m--- /dev/null[m
[1m+++ b/src/api/system/dept.js[m
[36m@@ -0,0 +1,52 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢éƒ¨é—¨åˆ—è¡¨[m
[32m+[m[32mexport function listDept(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/dept/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢éƒ¨é—¨åˆ—è¡¨ï¼ˆæ’é™¤èŠ‚ç‚¹ï¼‰[m
[32m+[m[32mexport function listDeptExcludeChild(deptId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/dept/list/exclude/' + deptId,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢éƒ¨é—¨è¯¦ç»†[m
[32m+[m[32mexport function getDept(deptId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/dept/' + deptId,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ–°å¢éƒ¨é—¨[m
[32m+[m[32mexport function addDept(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/dept',[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¿®æ”¹éƒ¨é—¨[m
[32m+[m[32mexport function updateDept(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/dept',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ é™¤éƒ¨é—¨[m
[32m+[m[32mexport function delDept(deptId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/dept/' + deptId,[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/src/api/system/dict/data.js b/src/api/system/dict/data.js[m
[1mnew file mode 100644[m
[1mindex 00000000..6c9eb79b[m
[1m--- /dev/null[m
[1m+++ b/src/api/system/dict/data.js[m
[36m@@ -0,0 +1,52 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢å­—å…¸æ•°æ®åˆ—è¡¨[m
[32m+[m[32mexport function listData(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/dict/data/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢å­—å…¸æ•°æ®è¯¦ç»†[m
[32m+[m[32mexport function getData(dictCode) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/dict/data/' + dictCode,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ ¹æ®å­—å…¸ç±»å‹æŸ¥è¯¢å­—å…¸æ•°æ®ä¿¡æ¯[m
[32m+[m[32mexport function getDicts(dictType) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/dict/data/type/' + dictType,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ–°å¢å­—å…¸æ•°æ®[m
[32m+[m[32mexport function addData(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/dict/data',[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¿®æ”¹å­—å…¸æ•°æ®[m
[32m+[m[32mexport function updateData(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/dict/data',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ é™¤å­—å…¸æ•°æ®[m
[32m+[m[32mexport function delData(dictCode) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/dict/data/' + dictCode,[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[1mdiff --git a/src/api/system/dict/type.js b/src/api/system/dict/type.js[m
[1mnew file mode 100644[m
[1mindex 00000000..a0254baa[m
[1m--- /dev/null[m
[1m+++ b/src/api/system/dict/type.js[m
[36m@@ -0,0 +1,60 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢å­—å…¸ç±»å‹åˆ—è¡¨[m
[32m+[m[32mexport function listType(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/dict/type/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢å­—å…¸ç±»å‹è¯¦ç»†[m
[32m+[m[32mexport function getType(dictId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/dict/type/' + dictId,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ–°å¢å­—å…¸ç±»å‹[m
[32m+[m[32mexport function addType(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/dict/type',[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¿®æ”¹å­—å…¸ç±»å‹[m
[32m+[m[32mexport function updateType(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/dict/type',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ é™¤å­—å…¸ç±»å‹[m
[32m+[m[32mexport function delType(dictId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/dict/type/' + dictId,[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ·æ–°å­—å…¸ç¼“å­˜[m
[32m+[m[32mexport function refreshCache() {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/dict/type/refreshCache',[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// è·å–å­—å…¸é€‰æ‹©æ¡†åˆ—è¡¨[m
[32m+[m[32mexport function optionselect() {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/dict/type/optionselect',[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[1mdiff --git a/src/api/system/gpu.js b/src/api/system/gpu.js[m
[1mnew file mode 100644[m
[1mindex 00000000..af47b2f3[m
[1m--- /dev/null[m
[1m+++ b/src/api/system/gpu.js[m
[36m@@ -0,0 +1,44 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢æ˜¾å¡ç¡¬ä»¶åˆ—è¡¨[m
[32m+[m[32mexport function listGpu(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/gpu/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢æ˜¾å¡ç¡¬ä»¶è¯¦ç»†[m
[32m+[m[32mexport function getGpu(id) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/gpu/' + id,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ–°å¢æ˜¾å¡ç¡¬ä»¶[m
[32m+[m[32mexport function addGpu(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/gpu',[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¿®æ”¹æ˜¾å¡ç¡¬ä»¶[m
[32m+[m[32mexport function updateGpu(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/gpu',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ é™¤æ˜¾å¡ç¡¬ä»¶[m
[32m+[m[32mexport function delGpu(id) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/gpu/' + id,[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[1mdiff --git a/src/api/system/memory.js b/src/api/system/memory.js[m
[1mnew file mode 100644[m
[1mindex 00000000..4fe9b1d1[m
[1m--- /dev/null[m
[1m+++ b/src/api/system/memory.js[m
[36m@@ -0,0 +1,44 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢å†…å­˜è§„æ ¼åˆ—è¡¨[m
[32m+[m[32mexport function listMemory(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/memory/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢å†…å­˜è§„æ ¼è¯¦ç»†[m
[32m+[m[32mexport function getMemory(id) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/memory/' + id,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ–°å¢å†…å­˜è§„æ ¼[m
[32m+[m[32mexport function addMemory(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/memory',[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¿®æ”¹å†…å­˜è§„æ ¼[m
[32m+[m[32mexport function updateMemory(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/memory',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ é™¤å†…å­˜è§„æ ¼[m
[32m+[m[32mexport function delMemory(id) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/memory/' + id,[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[1mdiff --git a/src/api/system/menu.js b/src/api/system/menu.js[m
[1mnew file mode 100644[m
[1mindex 00000000..f6415c65[m
[1m--- /dev/null[m
[1m+++ b/src/api/system/menu.js[m
[36m@@ -0,0 +1,60 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢èœå•åˆ—è¡¨[m
[32m+[m[32mexport function listMenu(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/menu/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢èœå•è¯¦ç»†[m
[32m+[m[32mexport function getMenu(menuId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/menu/' + menuId,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢èœå•ä¸‹æ‹‰æ ‘ç»“æ„[m
[32m+[m[32mexport function treeselect() {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/menu/treeselect',[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ ¹æ®è§’è‰²IDæŸ¥è¯¢èœå•ä¸‹æ‹‰æ ‘ç»“æ„[m
[32m+[m[32mexport function roleMenuTreeselect(roleId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/menu/roleMenuTreeselect/' + roleId,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ–°å¢èœå•[m
[32m+[m[32mexport function addMenu(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/menu',[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¿®æ”¹èœå•[m
[32m+[m[32mexport function updateMenu(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/menu',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ é™¤èœå•[m
[32m+[m[32mexport function delMenu(menuId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/menu/' + menuId,[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/src/api/system/motherboard.js b/src/api/system/motherboard.js[m
[1mnew file mode 100644[m
[1mindex 00000000..b7a32981[m
[1m--- /dev/null[m
[1m+++ b/src/api/system/motherboard.js[m
[36m@@ -0,0 +1,44 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢ä¸»æ¿è§„æ ¼åˆ—è¡¨[m
[32m+[m[32mexport function listMotherboard(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/motherboard/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢ä¸»æ¿è§„æ ¼è¯¦ç»†[m
[32m+[m[32mexport function getMotherboard(id) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/motherboard/' + id,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ–°å¢ä¸»æ¿è§„æ ¼[m
[32m+[m[32mexport function addMotherboard(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/motherboard',[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¿®æ”¹ä¸»æ¿è§„æ ¼[m
[32m+[m[32mexport function updateMotherboard(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/motherboard',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ é™¤ä¸»æ¿è§„æ ¼[m
[32m+[m[32mexport function delMotherboard(id) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/motherboard/' + id,[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[1mdiff --git a/src/api/system/notice.js b/src/api/system/notice.js[m
[1mnew file mode 100644[m
[1mindex 00000000..c274ea5b[m
[1m--- /dev/null[m
[1m+++ b/src/api/system/notice.js[m
[36m@@ -0,0 +1,44 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢å…¬å‘Šåˆ—è¡¨[m
[32m+[m[32mexport function listNotice(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/notice/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢å…¬å‘Šè¯¦ç»†[m
[32m+[m[32mexport function getNotice(noticeId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/notice/' + noticeId,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ–°å¢å…¬å‘Š[m
[32m+[m[32mexport function addNotice(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/notice',[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¿®æ”¹å…¬å‘Š[m
[32m+[m[32mexport function updateNotice(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/notice',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ é™¤å…¬å‘Š[m
[32m+[m[32mexport function delNotice(noticeId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/notice/' + noticeId,[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/src/api/system/performance.js b/src/api/system/performance.js[m
[1mnew file mode 100644[m
[1mindex 00000000..0f1aabcf[m
[1m--- /dev/null[m
[1m+++ b/src/api/system/performance.js[m
[36m@@ -0,0 +1,14 @@[m
[32m+[m[32mimport request from '@/utils/request';[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * è·å–å•†å“æ€§èƒ½è¯„åˆ†[m
[32m+[m[32m * @param {Number} productId å•†å“ID[m
[32m+[m[32m * @returns æ€§èƒ½è¯„åˆ†æ•°æ®[m
[32m+[m[32m */[m
[32m+[m[32mexport function getProductPerformanceScore(productId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: `/system/product/performance/${productId}`,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[1mdiff --git a/src/api/system/post.js b/src/api/system/post.js[m
[1mnew file mode 100644[m
[1mindex 00000000..1a8e9ca0[m
[1m--- /dev/null[m
[1m+++ b/src/api/system/post.js[m
[36m@@ -0,0 +1,44 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢å²—ä½åˆ—è¡¨[m
[32m+[m[32mexport function listPost(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/post/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢å²—ä½è¯¦ç»†[m
[32m+[m[32mexport function getPost(postId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/post/' + postId,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ–°å¢å²—ä½[m
[32m+[m[32mexport function addPost(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/post',[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¿®æ”¹å²—ä½[m
[32m+[m[32mexport function updatePost(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/post',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ é™¤å²—ä½[m
[32m+[m[32mexport function delPost(postId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/post/' + postId,[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[1mdiff --git a/src/api/system/product.js b/src/api/system/product.js[m
[1mnew file mode 100644[m
[1mindex 00000000..c61ac9b5[m
[1m--- /dev/null[m
[1m+++ b/src/api/system/product.js[m
[36m@@ -0,0 +1,75 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢å•†å“åˆ—è¡¨[m
[32m+[m[32mexport function listProduct(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/product/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢å•†å“è¯¦ç»†[m
[32m+[m[32mexport function getProduct(id) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/product/' + id,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ–°å¢å•†å“[m
[32m+[m[32mexport function addProduct(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/product',[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¿®æ”¹å•†å“[m
[32m+[m[32mexport function updateProduct(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/product',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ é™¤å•†å“[m
[32m+[m[32mexport function delProduct(id) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/product/' + id,[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport function getPerformanceScore(id) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: `/system/computer/performance/${id}`,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m// è·å–CPUåˆ—è¡¨[m
[32m+[m[32mexport function listCpu(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/front/hardware/cpu/list',  // ä¿®æ­£ä¸ºå‰å°ç¡¬ä»¶æ¥å£è·¯å¾„[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport function listGpu(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/front/hardware/gpu/list',  // ä¿®æ­£ä¸ºå‰å°ç¡¬ä»¶æ¥å£è·¯å¾„[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport function listMemory(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/front/hardware/memory/list',  // ä¿®æ­£ä¸ºå‰å°ç¡¬ä»¶æ¥å£è·¯å¾„[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[1mdiff --git a/src/api/system/role.js b/src/api/system/role.js[m
[1mnew file mode 100644[m
[1mindex 00000000..f13e6f40[m
[1m--- /dev/null[m
[1m+++ b/src/api/system/role.js[m
[36m@@ -0,0 +1,119 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢è§’è‰²åˆ—è¡¨[m
[32m+[m[32mexport function listRole(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/role/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢è§’è‰²è¯¦ç»†[m
[32m+[m[32mexport function getRole(roleId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/role/' + roleId,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ–°å¢è§’è‰²[m
[32m+[m[32mexport function addRole(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/role',[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¿®æ”¹è§’è‰²[m
[32m+[m[32mexport function updateRole(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/role',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// è§’è‰²æ•°æ®æƒé™[m
[32m+[m[32mexport function dataScope(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/role/dataScope',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// è§’è‰²çŠ¶æ€ä¿®æ”¹[m
[32m+[m[32mexport function changeRoleStatus(roleId, status) {[m
[32m+[m[32m  const data = {[m
[32m+[m[32m    roleId,[m
[32m+[m[32m    status[m
[32m+[m[32m  }[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/role/changeStatus',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ é™¤è§’è‰²[m
[32m+[m[32mexport function delRole(roleId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/role/' + roleId,[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢è§’è‰²å·²æˆæƒç”¨æˆ·åˆ—è¡¨[m
[32m+[m[32mexport function allocatedUserList(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/role/authUser/allocatedList',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢è§’è‰²æœªæˆæƒç”¨æˆ·åˆ—è¡¨[m
[32m+[m[32mexport function unallocatedUserList(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/role/authUser/unallocatedList',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å–æ¶ˆç”¨æˆ·æˆæƒè§’è‰²[m
[32m+[m[32mexport function authUserCancel(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/role/authUser/cancel',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ‰¹é‡å–æ¶ˆç”¨æˆ·æˆæƒè§’è‰²[m
[32m+[m[32mexport function authUserCancelAll(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/role/authUser/cancelAll',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    params: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æˆæƒç”¨æˆ·é€‰æ‹©[m
[32m+[m[32mexport function authUserSelectAll(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/role/authUser/selectAll',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    params: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ ¹æ®è§’è‰²IDæŸ¥è¯¢éƒ¨é—¨æ ‘ç»“æ„[m
[32m+[m[32mexport function deptTreeSelect(roleId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/role/deptTree/' + roleId,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[1mdiff --git a/src/api/system/user.js b/src/api/system/user.js[m
[1mnew file mode 100644[m
[1mindex 00000000..f2f76ef9[m
[1m--- /dev/null[m
[1m+++ b/src/api/system/user.js[m
[36m@@ -0,0 +1,135 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m[32mimport { parseStrEmpty } from "@/utils/ruoyi";[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨[m
[32m+[m[32mexport function listUser(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/user/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢ç”¨æˆ·è¯¦ç»†[m
[32m+[m[32mexport function getUser(userId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/user/' + parseStrEmpty(userId),[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ–°å¢ç”¨æˆ·[m
[32m+[m[32mexport function addUser(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/user',[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¿®æ”¹ç”¨æˆ·[m
[32m+[m[32mexport function updateUser(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/user',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ é™¤ç”¨æˆ·[m
[32m+[m[32mexport function delUser(userId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/user/' + userId,[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ç”¨æˆ·å¯†ç é‡ç½®[m
[32m+[m[32mexport function resetUserPwd(userId, password) {[m
[32m+[m[32m  const data = {[m
[32m+[m[32m    userId,[m
[32m+[m[32m    password[m
[32m+[m[32m  }[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/user/resetPwd',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ç”¨æˆ·çŠ¶æ€ä¿®æ”¹[m
[32m+[m[32mexport function changeUserStatus(userId, status) {[m
[32m+[m[32m  const data = {[m
[32m+[m[32m    userId,[m
[32m+[m[32m    status[m
[32m+[m[32m  }[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/user/changeStatus',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢ç”¨æˆ·ä¸ªäººä¿¡æ¯[m
[32m+[m[32mexport function getUserProfile() {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/user/profile',[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¿®æ”¹ç”¨æˆ·ä¸ªäººä¿¡æ¯[m
[32m+[m[32mexport function updateUserProfile(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/user/profile',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ç”¨æˆ·å¯†ç é‡ç½®[m
[32m+[m[32mexport function updateUserPwd(oldPassword, newPassword) {[m
[32m+[m[32m  const data = {[m
[32m+[m[32m    oldPassword,[m
[32m+[m[32m    newPassword[m
[32m+[m[32m  }[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/user/profile/updatePwd',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    params: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ç”¨æˆ·å¤´åƒä¸Šä¼ [m
[32m+[m[32mexport function uploadAvatar(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/user/profile/avatar',[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢æˆæƒè§’è‰²[m
[32m+[m[32mexport function getAuthRole(userId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/user/authRole/' + userId,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¿å­˜æˆæƒè§’è‰²[m
[32m+[m[32mexport function updateAuthRole(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/user/authRole',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    params: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢éƒ¨é—¨ä¸‹æ‹‰æ ‘ç»“æ„[m
[32m+[m[32mexport function deptTreeSelect() {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/system/user/deptTree',[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[1mdiff --git a/src/api/tool/gen.js b/src/api/tool/gen.js[m
[1mnew file mode 100644[m
[1mindex 00000000..45069278[m
[1m--- /dev/null[m
[1m+++ b/src/api/tool/gen.js[m
[36m@@ -0,0 +1,76 @@[m
[32m+[m[32mimport request from '@/utils/request'[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢ç”Ÿæˆè¡¨æ•°æ®[m
[32m+[m[32mexport function listTable(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/tool/gen/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m[32m// æŸ¥è¯¢dbæ•°æ®åº“åˆ—è¡¨[m
[32m+[m[32mexport function listDbTable(query) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/tool/gen/db/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: query[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢è¡¨è¯¦ç»†ä¿¡æ¯[m
[32m+[m[32mexport function getGenTable(tableId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/tool/gen/' + tableId,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¿®æ”¹ä»£ç ç”Ÿæˆä¿¡æ¯[m
[32m+[m[32mexport function updateGenTable(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/tool/gen',[m
[32m+[m[32m    method: 'put',[m
[32m+[m[32m    data: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å¯¼å…¥è¡¨[m
[32m+[m[32mexport function importTable(data) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/tool/gen/importTable',[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    params: data[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// é¢„è§ˆç”Ÿæˆä»£ç [m
[32m+[m[32mexport function previewTable(tableId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/tool/gen/preview/' + tableId,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ é™¤è¡¨æ•°æ®[m
[32m+[m[32mexport function delTable(tableId) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/tool/gen/' + tableId,[m
[32m+[m[32m    method: 'delete'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ç”Ÿæˆä»£ç ï¼ˆè‡ªå®šä¹‰è·¯å¾„ï¼‰[m
[32m+[m[32mexport function genCode(tableName) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/tool/gen/genCode/' + tableName,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åŒæ­¥æ•°æ®åº“[m
[32m+[m[32mexport function synchDb(tableName) {[m
[32m+[m[32m  return request({[m
[32m+[m[32m    url: '/tool/gen/synchDb/' + tableName,[m
[32m+[m[32m    method: 'get'[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[1mdiff --git a/src/assets/401_images/401.gif b/src/assets/401_images/401.gif[m
[1mnew file mode 100644[m
[1mindex 00000000..cd6e0d94[m
Binary files /dev/null and b/src/assets/401_images/401.gif differ
[1mdiff --git a/src/assets/404_images/404.png b/src/assets/404_images/404.png[m
[1mnew file mode 100644[m
[1mindex 00000000..3d8e2305[m
Binary files /dev/null and b/src/assets/404_images/404.png differ
[1mdiff --git a/src/assets/404_images/404_cloud.png b/src/assets/404_images/404_cloud.png[m
[1mnew file mode 100644[m
[1mindex 00000000..c6281d09[m
Binary files /dev/null and b/src/assets/404_images/404_cloud.png differ
[1mdiff --git a/src/assets/icons/svg/404.svg b/src/assets/icons/svg/404.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..6df50190[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/404.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M121.718 73.272v9.953c3.957-7.584 6.199-16.05 6.199-24.995C127.917 26.079 99.273 0 63.958 0 28.644 0 0 26.079 0 58.23c0 .403.028.806.028 1.21l22.97-25.953h13.34l-19.76 27.187h6.42V53.77l13.728-19.477v49.361H22.998V73.272H2.158c5.951 20.284 23.608 36.208 45.998 41.399-1.44 3.3-5.618 11.263-12.565 12.674-8.607 1.764 23.358.428 46.163-13.178 17.519-4.611 31.938-15.849 39.77-30.513h-13.506V73.272H85.02V59.464l22.998-25.977h13.008l-19.429 27.187h6.421v-7.433l13.727-19.402v39.433h-.027zm-78.24 2.822a10.516 10.516 0 0 1-.996-4.535V44.548c0-1.613.332-3.124.996-4.535a11.66 11.66 0 0 1 2.713-3.68c1.134-1.032 2.49-1.864 4.04-2.468 1.55-.605 3.21-.908 4.982-.908h11.292c1.77 0 3.431.303 4.981.908 1.522.604 2.85 1.41 3.986 2.418l-12.26 16.303v-2.898a1.96 1.96 0 0 0-.665-1.512c-.443-.403-.996-.604-1.66-.604-.665 0-1.218.201-1.661.604a1.96 1.96 0 0 0-.664 1.512v9.071L44.364 77.606a10.556 10.556 0 0 1-.886-1.512zm35.73-4.535c0 1.613-.332 3.124-.997 4.535a11.66 11.66 0 0 1-2.712 3.68c-1.134 1.032-2.49 1.864-4.04 2.469-1.55.604-3.21.907-4.982.907H55.185c-1.77 0-3.431-.303-4.981-.907-1.55-.605-2.906-1.437-4.041-2.47a12.49 12.49 0 0 1-1.384-1.512l13.727-18.217v6.375c0 .605.222 1.109.665 1.512.442.403.996.604 1.66.604.664 0 1.218-.201 1.66-.604a1.96 1.96 0 0 0 .665-1.512V53.87L75.97 36.838c.913.932 1.66 1.99 2.214 3.175.664 1.41.996 2.922.996 4.535v27.011h.028z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/bug.svg b/src/assets/icons/svg/bug.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..05a150dc[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/bug.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M127.88 73.143c0 1.412-.506 2.635-1.518 3.669-1.011 1.033-2.209 1.55-3.592 1.55h-17.887c0 9.296-1.783 17.178-5.35 23.645l16.609 17.044c1.011 1.034 1.517 2.257 1.517 3.67 0 1.412-.506 2.635-1.517 3.668-.958 1.033-2.155 1.55-3.593 1.55-1.438 0-2.635-.517-3.593-1.55l-15.811-16.063a15.49 15.49 0 0 1-1.196 1.06c-.532.434-1.65 1.208-3.353 2.322a50.104 50.104 0 0 1-5.192 2.974c-1.758.87-3.94 1.658-6.546 2.364-2.607.706-5.189 1.06-7.748 1.06V47.044H58.89v73.062c-2.716 0-5.417-.367-8.106-1.102-2.688-.734-5.003-1.631-6.945-2.692a66.769 66.769 0 0 1-5.268-3.179c-1.571-1.057-2.73-1.94-3.476-2.65L33.9 109.34l-14.611 16.877c-1.066 1.14-2.344 1.711-3.833 1.711-1.277 0-2.422-.434-3.434-1.304-1.012-.978-1.557-2.187-1.635-3.627-.079-1.44.333-2.705 1.236-3.794l16.129-18.51c-3.087-6.197-4.63-13.644-4.63-22.342H5.235c-1.383 0-2.58-.517-3.592-1.55S.125 74.545.125 73.132c0-1.412.506-2.635 1.518-3.668 1.012-1.034 2.21-1.55 3.592-1.55h17.887V43.939L9.308 29.833c-1.012-1.033-1.517-2.256-1.517-3.669 0-1.412.505-2.635 1.517-3.668 1.012-1.034 2.21-1.55 3.593-1.55s2.58.516 3.593 1.55l13.813 14.106h67.396l13.814-14.106c1.012-1.034 2.21-1.55 3.592-1.55 1.384 0 2.581.516 3.593 1.55 1.012 1.033 1.518 2.256 1.518 3.668 0 1.413-.506 2.636-1.518 3.67l-13.814 14.105v23.975h17.887c1.383 0 2.58.516 3.593 1.55 1.011 1.033 1.517 2.256 1.517 3.668l-.005.01zM89.552 26.175H38.448c0-7.23 2.489-13.386 7.466-18.469C50.892 2.623 56.92.082 64 .082c7.08 0 13.108 2.541 18.086 7.624 4.977 5.083 7.466 11.24 7.466 18.469z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/build.svg b/src/assets/icons/svg/build.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..97c46886[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/build.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1568899741379" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2054" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M960 591.424V368.96c0-0.288 0.16-0.512 0.16-0.768S960 367.68 960 367.424V192a32 32 0 0 0-32-32H96a32 32 0 0 0-32 32v175.424c0 0.288-0.16 0.512-0.16 0.768s0.16 0.48 0.16 0.768v222.464c0 0.288-0.16 0.512-0.16 0.768s0.16 0.48 0.16 0.768V864a32 32 0 0 0 32 32h832a32 32 0 0 0 32-32v-271.04c0-0.288 0.16-0.512 0.16-0.768S960 591.68 960 591.424z m-560-31.232v-160H608v160h-208z m208 64V832h-208v-207.808H608z m-480-224h208v160H128v-160z m544 0h224v160h-224v-160zM896 224v112.192H128V224h768zM128 624.192h208V832H128v-207.808zM672 832v-207.808h224V832h-224z" p-id="2055"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/button.svg b/src/assets/icons/svg/button.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..904fddc8[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/button.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1588670460195" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1314" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M230.4 307.712c13.824 0 25.088-11.264 25.088-25.088 0-100.352 81.92-182.272 182.272-182.272s182.272 81.408 182.272 182.272c0 13.824 11.264 25.088 25.088 25.088s25.088-11.264 24.576-25.088c0-127.488-103.936-231.936-231.936-231.936S205.824 154.624 205.824 282.624c-0.512 14.336 10.752 25.088 24.576 25.088z m564.736 234.496c-11.264 0-21.504 2.048-31.232 6.144 0-44.544-40.448-81.92-88.064-81.92-14.848 0-28.16 3.584-39.936 10.24-13.824-28.16-44.544-48.128-78.848-48.128-12.288 0-24.576 2.56-35.328 7.68V284.16c0-45.568-37.888-81.92-84.48-81.92s-84.48 36.864-84.48 81.92v348.672l-69.12-112.64c-18.432-28.16-58.368-36.864-91.136-19.968-26.624 14.336-46.592 47.104-30.208 88.064 3.072 8.192 76.8 205.312 171.52 311.296 0 0 28.16 24.576 43.008 58.88 4.096 9.728 13.312 15.36 22.528 15.36 3.072 0 6.656-0.512 9.728-2.048 12.288-5.12 18.432-19.968 12.8-32.256-19.456-44.544-53.76-74.752-53.76-74.752C281.6 768 209.408 573.44 208.384 570.88c-5.12-12.8-2.56-20.992 7.168-26.112 9.216-4.608 21.504-4.608 26.112 2.56l113.152 184.32c4.096 8.704 12.8 14.336 22.528 14.336 13.824 0 25.088-10.752 25.088-25.088V284.16c0-17.92 15.36-32.256 34.816-32.256s34.816 14.336 34.816 32.256v284.16c0 13.824 10.24 25.088 24.576 25.088 13.824 0 25.088-11.264 25.088-25.088v-57.344c0-17.92 15.36-32.768 34.816-32.768 19.968 0 37.376 15.36 37.376 32.768v95.232c0 7.168 3.072 13.312 7.68 17.92 4.608 4.608 10.752 7.168 17.92 7.168 13.824 0 24.576-11.264 24.576-25.088V547.84c0-18.432 13.824-32.256 32.256-32.256 20.48 0 38.912 15.36 38.912 32.256v95.232c0 13.824 11.264 25.088 25.088 25.088s24.576-11.264 25.088-25.088v-18.944c0-18.944 12.8-32.256 30.72-32.256 18.432 0 22.528 18.944 22.528 31.744 0 1.024-11.776 99.84-50.688 173.056-30.72 58.368-45.056 112.128-51.2 146.944-2.56 13.312 6.656 26.112 19.968 28.672 1.536 0 3.072 0.512 4.608 0.512 11.776 0 22.016-8.192 24.064-20.48 5.632-31.232 18.432-79.36 46.08-132.608 43.52-81.92 55.808-186.88 56.32-193.536-0.512-50.688-29.696-83.968-72.704-83.968z"></path></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/cascader.svg b/src/assets/icons/svg/cascader.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..e256024f[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/cascader.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1576153230908" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="971" xmlns:xlink="http://www.w3.org/1999/xlink" width="81" height="81"><defs><style type="text/css"></style></defs><path d="M772.87036133 734.06115723c-43.34106445 0-80.00793458 27.93273926-93.76831055 66.57714843H475.90991211c-56.60705567 0-102.66723633-46.06018067-102.66723633-102.66723633V600.82446289h305.859375c13.76037598 38.64440918 50.42724609 66.57714844 93.76831055 66.57714844 55.12390137 0 99.94812012-44.82421875 99.94812012-99.94812012S827.9942627 467.50537109 772.87036133 467.50537109c-43.34106445 0-80.00793458 27.93273926-93.76831055 66.57714844H373.24267578V401.01062011h321.92687989c55.12390137 0 99.94812012-44.82421875 99.94812011-99.94812011V190.07312011C795.11767578 134.94921875 750.29345703 90.125 695.16955567 90.125H251.12963867C196.0057373 90.125 151.18151855 134.94921875 151.18151855 190.07312011V301.0625c0 55.12390137 44.82421875 99.94812012 99.94812012 99.94812012h55.53588867v296.96044921c0 93.35632325 75.97045898 169.32678223 169.32678224 169.32678223h203.19213866c13.76037598 38.64440918 50.42724609 66.57714844 93.76831055 66.57714844 55.12390137 0 99.94812012-44.82421875 99.94812012-99.94812012s-44.90661622-99.86572266-100.03051758-99.86572265z m0-199.89624024c18.37463379 0 33.28857422 14.91394043 33.28857422 33.28857423s-14.91394043 33.28857422-33.28857422 33.28857421-33.28857422-14.91394043-33.28857422-33.28857421 14.91394043-33.28857422 33.28857422-33.28857422zM217.75866699 301.0625V190.07312011c0-18.37463379 14.91394043-33.28857422 33.28857423-33.28857421h444.03991698c18.37463379 0 33.28857422 14.91394043 33.28857422 33.28857422V301.0625c0 18.37463379-14.91394043 33.28857422-33.28857422 33.28857422H251.12963867c-18.37463379 0-33.37097168-14.91394043-33.37097168-33.28857422z m555.11169434 566.23535156c-18.37463379 0-33.28857422-14.91394043-33.28857422-33.28857422 0-18.37463379 14.91394043-33.28857422 33.28857422-33.28857422s33.28857422 14.91394043 33.28857422 33.28857422c0.08239747 18.29223633-14.91394043 33.28857422-33.28857422 33.28857422z" p-id="972"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/chart.svg b/src/assets/icons/svg/chart.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..27728fb0[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/chart.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M0 54.857h36.571V128H0V54.857zM91.429 27.43H128V128H91.429V27.429zM45.714 0h36.572v128H45.714V0z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/checkbox.svg b/src/assets/icons/svg/checkbox.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..013fd3a2[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/checkbox.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1575982282951" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="902" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M828.40625 90.125H195.59375C137.375 90.125 90.125 137.375 90.125 195.59375v632.8125c0 58.21875 47.25 105.46875 105.46875 105.46875h632.8125c58.21875 0 105.46875-47.25 105.46875-105.46875V195.59375c0-58.21875-47.25-105.46875-105.46875-105.46875z m52.734375 738.28125c0 29.16-23.57015625 52.734375-52.734375 52.734375H195.59375c-29.109375 0-52.734375-23.574375-52.734375-52.734375V195.59375c0-29.109375 23.625-52.734375 52.734375-52.734375h632.8125c29.16 0 52.734375 23.625 52.734375 52.734375v632.8125z" p-id="903"></path><path d="M421.52890625 709.55984375a36.28125 36.28125 0 0 1-27.55265625-12.66890625L205.17453125 476.613125a36.28546875 36.28546875 0 0 1 55.10109375-47.22890625l164.986875 192.4846875 342.16171875-298.48078125a36.2896875 36.2896875 0 0 1 47.70984375 54.68765625L445.3859375 700.6203125a36.3234375 36.3234375 0 0 1-23.85703125 8.93953125z" p-id="904"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/clipboard.svg b/src/assets/icons/svg/clipboard.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..90923ff6[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/clipboard.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M54.857 118.857h64V73.143H89.143c-1.902 0-3.52-.668-4.855-2.002-1.335-1.335-2.002-2.954-2.002-4.855V36.57H54.857v82.286zM73.143 16v-4.571a2.2 2.2 0 0 0-.677-1.61 2.198 2.198 0 0 0-1.609-.676H20.571c-.621 0-1.158.225-1.609.676a2.198 2.198 0 0 0-.676 1.61V16a2.2 2.2 0 0 0 .676 1.61c.451.45.988.676 1.61.676h50.285c.622 0 1.158-.226 1.61-.677.45-.45.676-.987.676-1.609zm18.286 48h21.357L91.43 42.642V64zM128 73.143v48c0 1.902-.667 3.52-2.002 4.855-1.335 1.335-2.953 2.002-4.855 2.002H52.57c-1.901 0-3.52-.667-4.854-2.002-1.335-1.335-2.003-2.953-2.003-4.855v-11.429H6.857c-1.902 0-3.52-.667-4.855-2.002C.667 106.377 0 104.759 0 102.857v-96c0-1.902.667-3.52 2.002-4.855C3.337.667 4.955 0 6.857 0h77.714c1.902 0 3.52.667 4.855 2.002 1.335 1.335 2.003 2.953 2.003 4.855V30.29c1 .622 1.856 1.29 2.569 2.003l29.147 29.147c1.335 1.335 2.478 3.145 3.429 5.43.95 2.287 1.426 4.383 1.426 6.291v-.018z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/code.svg b/src/assets/icons/svg/code.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..5f9c5abd[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/code.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1546567861908" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2422" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M318.577778 819.2L17.066667 512l301.511111-307.2 45.511111 45.511111L96.711111 512l267.377778 261.688889zM705.422222 819.2l-45.511111-45.511111L927.288889 512l-267.377778-261.688889 45.511111-45.511111L1006.933333 512zM540.785778 221.866667l55.751111 11.150222L483.157333 802.133333l-55.751111-11.093333z" p-id="2423"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/color.svg b/src/assets/icons/svg/color.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..44a81aab[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/color.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1577252187056" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2508" xmlns:xlink="http://www.w3.org/1999/xlink" width="81" height="81"><defs><style type="text/css"></style></defs><path d="M747.59340925 691.12859384c11.51396329 0.25305413 22.43746719-0.21087818 40.74171707-1.51832482 29.35428085-2.10878421 35.84933734-2.36183835 46.47761114-0.8856895 24.71495444 3.37405491 41.12129828 21.76265671 32.47528161 47.95376084-85.57447632 258.19957947-442.00123984 249.76444099-628.67084683 50.73735554-153.47733892-159.33976008-153.09775772-414.41833795 0.92786545-573.42069196 159.71934128-162.67163983 424.03439521-166.59397897 565.78689185 0.63263534 80.38686649 94.81095318 108.34934958 169.16669549 89.11723508 230.57450162-15.01454608 47.99593598-50.61082928 77.68762207-119.77896259 114.63352789-4.89237973 2.65706845-29.35428085 15.52065436-35.84933652 19.02123633-46.94154346 25.30541465-63.51659033 41.20565021-62.20914449 58.45550757 2.95229856 39.13904114 24.16667102 52.7196135 70.98168823 53.81618115z m44.41100207 50.10472101c-19.82257471 1.43397372-32.05352527 1.940082-45.63409763 1.6448519-70.34905207-1.60267593-115.98314969-30.91478165-121.38163769-101.64341492-3.45840683-46.05585397 24.7571304-73.13264758 89.24376132-107.96976837 6.7902866-3.66928501 31.37871396-16.57504688 36.06021551-19.06341229 57.69634516-30.83042972 85.15271997-53.73183005 94.76877722-84.47790866 12.77923398-40.78389304-9.10994898-98.94417051-79.24812286-181.6507002-121.17075953-142.97559219-350.14258521-139.60153647-489.2380134 2.06660824-134.49827774 138.84237405-134.79350784 362.12048163-0.42175717 501.637667 158.53842169 168.99799328 451.9968783 181.18676788 534.57688175-11.80919339-4.68150156 0.2952301-10.71262573 0.67481131-18.72600705 1.26527069z" p-id="2509"></path><path d="M346.03865637 637.18588562a78.82636652 78.82636652 0 0 0 78.32025825-79.29029883c0-43.69401562-35.005823-79.29029883-78.32025825-79.29029882a78.82636652 78.82636652 0 0 0-78.36243338 79.29029882c0 43.69401562 35.005823 79.29029883 78.36243338 79.29029883z m0-51.7495729a27.07679361 27.07679361 0 0 1-26.5706845-27.54072593c0-15.30977536 11.97789643-27.54072593 26.5706845-27.54072592 14.55061295 0 26.57068533 12.23095057 26.57068533 27.54072592a27.07679361 27.07679361 0 0 1-26.57068533 27.54072593zM475.7289063 807.11174353a78.82636652 78.82636652 0 0 0 78.3624334-79.29029882c0-43.69401562-34.96364785-79.29029883-78.32025825-79.29029883a78.82636652 78.82636652 0 0 0-78.32025742 79.29029883c0 43.69401562 34.96364785 79.29029883 78.32025742 79.29029882z m0-51.74957208a27.07679361 27.07679361 0 0 1-26.57068532-27.54072674c0-15.30977536 12.06224753-27.54072593 26.57068532-27.54072593 14.59278892 0 26.57068533 12.23095057 26.57068453 27.54072593a27.07679361 27.07679361 0 0 1-26.57068453 27.54072674zM601.24376214 377.21492718a78.82636652 78.82636652 0 0 0 78.32025742-79.29029883c0-43.69401562-34.96364785-79.29029883-78.32025742-79.29029882a78.82636652 78.82636652 0 0 0-78.32025823 79.29029883c0 43.69401562 34.96364785 79.29029883 78.32025824 79.29029883z m1e-8-51.74957208a27.07679361 27.07679361 0 0 1-26.57068534-27.54072675c0-15.30977536 11.97789643-27.54072593 26.57068534-27.54072591 14.55061295 0 26.57068533 12.23095057 26.57068451 27.54072592a27.07679361 27.07679361 0 0 1-26.57068451 27.54072674zM378.80916809 433.85687983a78.82636652 78.82636652 0 0 0 78.32025824-79.29029883c0-43.69401562-34.96364785-79.29029883-78.32025824-79.29029802a78.82636652 78.82636652 0 0 0-78.32025742 79.29029802c0 43.69401562 34.96364785 79.29029883 78.32025742 79.29029883z m0-51.74957209a27.07679361 27.07679361 0 0 1-26.57068451-27.54072674c0-15.30977536 11.97789643-27.54072593 26.57068451-27.54072593 14.55061295 0 26.57068533 12.23095057 26.57068533 27.54072593a27.07679361 27.07679361 0 0 1-26.57068533 27.54072674z" p-id="2510"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/component.svg b/src/assets/icons/svg/component.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..29c34580[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/component.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1575804206892" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3145" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M826.56 470.016c-32.896 0-64.384 12.288-89.984 35.52l0-104.96c0-62.208-50.496-112.832-112.64-113.088L623.936 287.04 519.552 287.104C541.824 262.72 554.56 230.72 554.56 197.12c0-73.536-59.904-133.44-133.504-133.44-73.472 0-133.376 59.904-133.376 133.44 0 32.896 12.224 64.256 35.52 89.984L175.232 287.104l0 0.576C113.728 288.704 64 338.88 64 400.576l0.32 0 0.32 116.48C60.864 544.896 70.592 577.728 100.8 588.48c12.736 4.608 37.632 7.488 60.864-25.28 12.992-18.368 34.24-29.248 56.64-29.248 38.336 0 69.504 31.104 69.504 69.312 0 38.4-31.168 69.504-69.504 69.504-22.656 0-44.032-11.264-57.344-30.4C138.688 610.112 112.576 615.36 102.464 619.136c-29.824 10.752-39.104 43.776-38.144 67.392l0 160.384L64 846.912C64 909.248 114.752 960 177.216 960l446.272 0c62.4 0 113.152-50.752 113.152-113.152l0-145.024c24.384 22.272 56.384 35.008 89.984 35.008 73.536 0 133.44-59.904 133.44-133.504C960 529.92 900.096 470.016 826.56 470.016zM826.56 672.896c-22.72 0-44.032-11.264-57.344-30.4-22.272-32.384-48.448-27.136-58.56-23.36-29.824 10.752-39.04 43.776-38.08 67.392l0 160.384c0 27.136-22.016 49.152-49.152 49.152L177.216 896.064C150.08 896 128 873.984 128 846.848l0.32 0 0-145.024c24.384 22.272 56.384 35.008 89.984 35.008 73.6 0 133.504-59.904 133.504-133.504 0-73.472-59.904-133.376-133.504-133.376-32.896 0-64.32 12.288-89.984 35.52l0-104.96L128 400.512c0-27.072 22.08-49.152 49.216-49.152L177.216 351.04 334.656 350.72c3.776 0.512 7.616 0.832 11.52 0.832 24.896 0 50.752-10.816 60.032-37.056 4.544-12.736 7.424-37.568-25.344-60.736C362.624 240.768 351.68 219.52 351.68 197.12c0-38.272 31.104-69.44 69.376-69.44 38.336 0 69.504 31.168 69.504 69.44 0 22.72-11.264 44.032-30.528 57.472C427.968 276.736 433.088 302.784 436.8 313.024c10.752 29.888 43.072 39.232 67.392 38.08l119.232 0 0 0.384c27.136 0 49.152 22.08 49.152 49.152l0.256 116.48c-3.776 27.84 6.016 60.736 36.224 71.488 12.736 4.608 37.632 7.488 60.8-25.28 13.056-18.368 34.24-29.248 56.704-29.248C864.832 534.016 896 565.12 896 603.392 896 641.728 864.832 672.896 826.56 672.896z" p-id="3146"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/dashboard.svg b/src/assets/icons/svg/dashboard.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..5317d370[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/dashboard.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="100" xmlns="http://www.w3.org/2000/svg"><path d="M27.429 63.638c0-2.508-.893-4.65-2.679-6.424-1.786-1.775-3.94-2.662-6.464-2.662-2.524 0-4.679.887-6.465 2.662-1.785 1.774-2.678 3.916-2.678 6.424 0 2.508.893 4.65 2.678 6.424 1.786 1.775 3.94 2.662 6.465 2.662 2.524 0 4.678-.887 6.464-2.662 1.786-1.775 2.679-3.916 2.679-6.424zm13.714-31.801c0-2.508-.893-4.65-2.679-6.424-1.785-1.775-3.94-2.662-6.464-2.662-2.524 0-4.679.887-6.464 2.662-1.786 1.774-2.679 3.916-2.679 6.424 0 2.508.893 4.65 2.679 6.424 1.785 1.774 3.94 2.662 6.464 2.662 2.524 0 4.679-.888 6.464-2.662 1.786-1.775 2.679-3.916 2.679-6.424zM71.714 65.98l7.215-27.116c.285-1.23.107-2.378-.536-3.443-.643-1.064-1.56-1.762-2.75-2.094-1.19-.33-2.333-.177-3.429.462-1.095.639-1.81 1.573-2.143 2.804l-7.214 27.116c-2.857.237-5.405 1.266-7.643 3.088-2.238 1.822-3.738 4.152-4.5 6.992-.952 3.644-.476 7.098 1.429 10.364 1.905 3.265 4.69 5.37 8.357 6.317 3.667.947 7.143.474 10.429-1.42 3.285-1.892 5.404-4.66 6.357-8.305.762-2.84.619-5.607-.429-8.305-1.047-2.697-2.762-4.85-5.143-6.46zm47.143-2.342c0-2.508-.893-4.65-2.678-6.424-1.786-1.775-3.94-2.662-6.465-2.662-2.524 0-4.678.887-6.464 2.662-1.786 1.774-2.679 3.916-2.679 6.424 0 2.508.893 4.65 2.679 6.424 1.786 1.775 3.94 2.662 6.464 2.662 2.524 0 4.679-.887 6.465-2.662 1.785-1.775 2.678-3.916 2.678-6.424zm-45.714-45.43c0-2.509-.893-4.65-2.679-6.425C68.68 10.01 66.524 9.122 64 9.122c-2.524 0-4.679.887-6.464 2.661-1.786 1.775-2.679 3.916-2.679 6.425 0 2.508.893 4.65 2.679 6.424 1.785 1.774 3.94 2.662 6.464 2.662 2.524 0 4.679-.888 6.464-2.662 1.786-1.775 2.679-3.916 2.679-6.424zm32 13.629c0-2.508-.893-4.65-2.679-6.424-1.785-1.775-3.94-2.662-6.464-2.662-2.524 0-4.679.887-6.464 2.662-1.786 1.774-2.679 3.916-2.679 6.424 0 2.508.893 4.65 2.679 6.424 1.785 1.774 3.94 2.662 6.464 2.662 2.524 0 4.679-.888 6.464-2.662 1.786-1.775 2.679-3.916 2.679-6.424zM128 63.638c0 12.351-3.357 23.78-10.071 34.286-.905 1.372-2.19 2.058-3.858 2.058H13.93c-1.667 0-2.953-.686-3.858-2.058C3.357 87.465 0 76.037 0 63.638c0-8.613 1.69-16.847 5.071-24.703C8.452 31.08 13 24.312 18.714 18.634c5.715-5.68 12.524-10.199 20.429-13.559C47.048 1.715 55.333.035 64 .035c8.667 0 16.952 1.68 24.857 5.04 7.905 3.36 14.714 7.88 20.429 13.559 5.714 5.678 10.262 12.446 13.643 20.301 3.38 7.856 5.071 16.09 5.071 24.703z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/date-range.svg b/src/assets/icons/svg/date-range.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..fda571e7[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/date-range.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1579774833889" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1376" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M887.466667 192.853333h-100.693334V119.466667c0-10.24-6.826667-17.066667-17.066666-17.066667s-17.066667 6.826667-17.066667 17.066667v73.386666H303.786667V119.466667c0-10.24-6.826667-17.066667-17.066667-17.066667s-17.066667 6.826667-17.066667 17.066667v73.386666H168.96c-46.08 0-85.333333 37.546667-85.333333 85.333334V836.266667c0 46.08 37.546667 85.333333 85.333333 85.333333H887.466667c46.08 0 85.333333-37.546667 85.333333-85.333333V278.186667c0-47.786667-37.546667-85.333333-85.333333-85.333334z m-718.506667 34.133334h100.693333v66.56c0 10.24 6.826667 17.066667 17.066667 17.066666s17.066667-6.826667 17.066667-17.066666v-66.56h450.56v66.56c0 10.24 6.826667 17.066667 17.066666 17.066666s17.066667-6.826667 17.066667-17.066666v-66.56H887.466667c27.306667 0 51.2 22.186667 51.2 51.2v88.746666H117.76v-88.746666c0-29.013333 22.186667-51.2 51.2-51.2zM887.466667 887.466667H168.96c-27.306667 0-51.2-22.186667-51.2-51.2V401.066667H938.666667V836.266667c0 27.306667-22.186667 51.2-51.2 51.2z" p-id="1377"></path><path d="M858.453333 493.226667H327.68c-10.24 0-17.066667 6.826667-17.066667 17.066666v114.346667h-116.053333c-10.24 0-17.066667 6.826667-17.066667 17.066667v133.12c0 10.24 6.826667 17.066667 17.066667 17.066666H460.8c10.24 0 17.066667-6.826667 17.066667-17.066666v-114.346667h380.586666c10.24 0 17.066667-6.826667 17.066667-17.066667v-133.12c0-10.24-6.826667-17.066667-17.066667-17.066666z m-413.013333 34.133333v97.28h-98.986667v-97.28h98.986667z m-230.4 131.413333h98.986667v98.986667h-98.986667v-98.986667z m131.413333 97.28v-97.28h98.986667v97.28h-98.986667z m133.12-228.693333h97.28v98.986667h-97.28v-98.986667z m131.413334 0h98.986666v98.986667h-98.986666v-98.986667z m230.4 97.28h-98.986667v-98.986667h98.986667v98.986667z" p-id="1378"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/date.svg b/src/assets/icons/svg/date.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..52dc73ee[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/date.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1577186573535" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1068" xmlns:xlink="http://www.w3.org/1999/xlink" width="81" height="81"><defs><style type="text/css"></style></defs><path d="M479.85714249 608.42857168h64.28571502c19.28571417 0 32.14285751-12.85714249 32.14285664-32.14285751s-12.85714249-32.14285751-32.14285664-32.14285664h-64.28571504c-19.28571417 0-32.14285751 12.85714249-32.14285664 32.14285662s12.85714249 32.14285751 32.14285664 32.14285753z m-2e-8 122.14285665h64.28571504c19.28571417 0 32.14285751-12.85714249 32.14285664-32.14285665s-12.85714249-32.14285751-32.14285664-32.14285751h-64.28571504c-19.28571417 0-32.14285751 12.85714249-32.14285664 32.14285751s12.85714249 32.14285751 32.14285664 32.14285664z m353.57142921-559.28571416h-128.57142921v-32.14285664c0-19.28571417-12.85714249-32.14285751-32.14285664-32.14285753s-32.14285751 12.85714249-32.14285751 32.14285753v32.14285664h-257.14285665v-32.14285664c0-19.28571417-12.85714249-32.14285751-32.14285752-32.14285753s-32.14285751 12.85714249-32.14285664 32.14285753v32.14285664h-128.57142919c-70.71428585 0-128.57142832 57.85714249-128.57142832 122.14285751v501.42857081c0 70.71428585 57.85714249 128.57142832 128.57142832 122.14285751h642.85714335c70.71428585 0 128.57142832-57.85714249 128.57142833-122.14285751v-501.42857081c0-70.71428585-57.85714249-122.14285753-128.57142833-122.14285751z m64.28571415 623.57142832c0 32.14285751-32.14285751 64.28571415-64.28571416 64.28571504h-642.85714335c-32.14285751 0-64.28571415-25.71428583-64.28571417-64.28571504v-372.85714249h771.42857168v372.85714249z m0-437.14285664h-771.42857168v-64.28571417c0-32.14285751 32.14285751-64.28571415 64.28571417-64.28571415h128.57142919v32.14285664c0 19.28571417 12.85714249 32.14285751 32.14285664 32.14285751s32.14285751-12.85714249 32.14285753-32.14285751v-32.14285664h257.14285665v32.14285664c0 19.28571417 12.85714249 32.14285751 32.1428575 32.14285751s32.14285751-12.85714249 32.14285664-32.14285751v-32.14285664h128.57142921c32.14285751 0 64.28571415 25.71428583 64.28571415 64.28571415v64.28571417z m-610.71428583 372.85714247h64.28571415c19.28571417 0 32.14285751-12.85714249 32.14285753-32.14285664s-12.85714249-32.14285751-32.14285753-32.14285751h-64.28571415c-19.28571417 0-32.14285751 12.85714249-32.14285751 32.14285751s12.85714249 32.14285751 32.14285751 32.14285665z m385.71428583-122.14285664h64.28571417c19.28571417 0 32.14285751-12.85714249 32.14285751-32.14285751s-12.85714249-32.14285751-32.14285751-32.14285664h-64.28571415c-19.28571417 0-32.14285751 12.85714249-32.14285753 32.14285664s12.85714249 32.14285751 32.14285753 32.14285751z m-385.71428583 0h64.28571415c19.28571417 0 32.14285751-12.85714249 32.14285753-32.14285751s-12.85714249-32.14285751-32.14285753-32.14285664h-64.28571415c-19.28571417 0-32.14285751 12.85714249-32.14285751 32.14285664s12.85714249 32.14285751 32.14285751 32.14285751z m385.71428583 122.14285665h64.28571417c19.28571417 0 32.14285751-12.85714249 32.14285751-32.14285665s-12.85714249-32.14285751-32.14285751-32.14285751h-64.28571415c-19.28571417 0-32.14285751 12.85714249-32.14285753 32.14285751s12.85714249 32.14285751 32.14285753 32.14285665z" p-id="1069"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/dict.svg b/src/assets/icons/svg/dict.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..48493773[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/dict.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1566035680909" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3601" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M1002.0848 744.672l-33.568 10.368c0.96 7.264 2.144 14.304 2.144 21.76 0 7.328-1.184 14.432-2.368 21.568l33.792 10.56c7.936 2.24 14.496 7.616 18.336 14.752 3.84 7.328 4.672 15.808 1.952 23.552-5.376 16-23.168 24.672-39.936 19.68l-34.176-10.624c-7.136 12.8-15.776 24.672-26.208 35.2l20.8 27.488a28.96 28.96 0 0 1 5.824 22.816 29.696 29.696 0 0 1-12.704 19.616 32.544 32.544 0 0 1-44.416-6.752l-20.8-27.552c-13.696 6.56-28.192 11.2-43.008 13.888v33.632c0 16.736-14.112 30.432-31.648 30.432-17.6 0-31.872-13.696-31.872-30.432v-33.632a167.616 167.616 0 0 1-42.88-13.888l-20.928 27.552c-10.72 13.76-30.08 16.64-44.288 6.752a29.632 29.632 0 0 1-12.704-19.616 29.28 29.28 0 0 1 5.696-22.816l20.896-27.808a166.72 166.72 0 0 1-27.008-34.688l-33.376 10.432c-16.8 5.184-34.56-3.552-39.936-19.616a29.824 29.824 0 0 1 20.224-38.24l33.472-10.432c-0.8-7.264-2.016-14.304-2.016-21.824 0-7.36 1.184-14.496 2.304-21.632l-33.792-10.368c-16.672-5.376-25.632-22.496-20.224-38.432 5.376-16 23.136-24.672 39.936-19.68l34.016 10.752c7.328-12.672 15.84-24.8 26.336-35.328l-20.8-27.552a29.44 29.44 0 0 1 6.944-42.432 32.704 32.704 0 0 1 44.384 6.752l20.832 27.616c13.696-6.432 28.224-11.2 43.104-13.952v-33.568c0-16.736 14.048-30.432 31.648-30.432 17.536 0 31.808 13.568 31.808 30.432v33.504c15.072 2.688 29.344 7.808 42.848 14.016l20.992-27.616a32.48 32.48 0 0 1 44.224-6.752 29.568 29.568 0 0 1 7.136 42.432l-21.024 27.808c10.432 10.432 19.872 21.888 27.04 34.752l33.376-10.432c16.768-5.12 34.56 3.68 39.936 19.68 5.536 15.936-3.712 33.056-20.32 38.304z m-206.016-74.432c-61.344 0-111.136 47.808-111.136 106.56 0 58.88 49.792 106.496 111.136 106.496 61.312 0 111.104-47.616 111.104-106.496 0-58.752-49.792-106.56-111.104-106.56z" p-id="3602"></path><path d="M802.7888 57.152h-76.448c0-22.08-21.024-38.24-42.848-38.24H39.3968a39.68 39.68 0 0 0-39.36 40.032v795.616s41.888 120.192 110.752 120.192H673.2848a227.488 227.488 0 0 1-107.04-97.44H117.6368s-40.608-13.696-40.608-41.248l470.304-0.256 1.664 3.36a227.68 227.68 0 0 1-12.64-73.632c0-60.576 24-118.624 66.88-161.44a228.352 228.352 0 0 1 123.552-63.392l-3.2 0.288 2.144-424.672h38.208l0.576 421.024c27.04 0 52.672 4.8 76.64 13.344V101.536c0.032 0-6.304-44.384-38.368-44.384zM149.7648 514.336H72.3888v-77.408H149.7648v77.408z m0-144.32H72.3888v-77.44H149.7648v77.44z m0-137.248H72.3888v-77.44H149.7648v77.44z m501.856 281.568H206.0848v-77.408h445.536v77.408z m0-144.32H206.0848v-77.44h445.536v77.44z m0-137.248H206.0848v-77.44h445.536v77.44z" p-id="3603"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/documentation.svg b/src/assets/icons/svg/documentation.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..70431228[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/documentation.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M71.984 44.815H115.9L71.984 9.642v35.173zM16.094.05h63.875l47.906 38.37v76.74c0 3.392-1.682 6.645-4.677 9.044-2.995 2.399-7.056 3.746-11.292 3.746H16.094c-4.236 0-8.297-1.347-11.292-3.746-2.995-2.399-4.677-5.652-4.677-9.044V12.84C.125 5.742 7.23.05 16.094.05zm71.86 102.32V89.58h-71.86v12.79h71.86zm23.952-25.58V64H16.094v12.79h95.812z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/download.svg b/src/assets/icons/svg/download.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..c8969513[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/download.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1569915748289" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3062" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M768.35456 416a256 256 0 1 0-512 0 192 192 0 1 0 0 384v64a256 256 0 0 1-58.88-505.216 320.128 320.128 0 0 1 629.76 0A256.128 256.128 0 0 1 768.35456 864v-64a192 192 0 0 0 0-384z m-512 384h64v64H256.35456v-64z m448 0h64v64h-64v-64z" fill="#333333" p-id="3063"></path><path d="M539.04256 845.248V512.192a32.448 32.448 0 0 0-32-32.192c-17.664 0-32 14.912-32 32.192v333.056l-36.096-36.096a32.192 32.192 0 0 0-45.056 0.192 31.616 31.616 0 0 0-0.192 45.056l90.88 90.944a31.36 31.36 0 0 0 22.528 9.088 30.08 30.08 0 0 0 22.4-9.088l90.88-90.88a32.192 32.192 0 0 0-0.192-45.12 31.616 31.616 0 0 0-45.056-0.192l-36.096 36.096z" fill="#333333" p-id="3064"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/drag.svg b/src/assets/icons/svg/drag.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..4185d3ce[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/drag.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M73.137 29.08h-9.209 29.7L63.886.093 34.373 29.08h20.49v27.035H27.238v17.948h27.625v27.133h18.274V74.063h27.41V56.115h-27.41V29.08zm-9.245 98.827l27.518-26.711H36.59l27.302 26.71zM.042 64.982l27.196 27.029V38.167L.042 64.982zm100.505-26.815V92.01l27.41-27.029-27.41-26.815z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/druid.svg b/src/assets/icons/svg/druid.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..a2b4b4ed[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/druid.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1566036347051" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5853" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M832 128H192a64.19 64.19 0 0 0-64 64v640a64.19 64.19 0 0 0 64 64h640a64.19 64.19 0 0 0 64-64V192a64.19 64.19 0 0 0-64-64z m0 703.89l-0.11 0.11H192.11l-0.11-0.11V768h640zM832 544H720L605.6 696.54 442.18 435.07 333.25 544H192v-64h114.75l147.07-147.07L610.4 583.46 688 480h144z m0-288H192v-63.89l0.11-0.11h639.78l0.11 0.11z" p-id="5854"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/edit.svg b/src/assets/icons/svg/edit.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..d26101f2[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/edit.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M106.133 67.2a4.797 4.797 0 0 0-4.8 4.8c0 .187.014.36.027.533h-.027V118.4H9.6V26.667h50.133c2.654 0 4.8-2.147 4.8-4.8 0-2.654-2.146-4.8-4.8-4.8H9.6a9.594 9.594 0 0 0-9.6 9.6V118.4c0 5.307 4.293 9.6 9.6 9.6h91.733c5.307 0 9.6-4.293 9.6-9.6V72.533h-.026c.013-.173.026-.346.026-.533 0-2.653-2.146-4.8-4.8-4.8z"/><path d="M125.16 13.373L114.587 2.8c-3.747-3.747-9.854-3.72-13.6.027l-52.96 52.96a4.264 4.264 0 0 0-.907 1.36L33.813 88.533c-.746 1.76-.226 3.534.907 4.68 1.133 1.147 2.92 1.667 4.693.92l31.4-13.293c.507-.213.96-.52 1.36-.907l52.96-52.96c3.747-3.746 3.774-9.853.027-13.6zM66.107 72.4l-18.32 7.76 7.76-18.32L92.72 24.667l10.56 10.56L66.107 72.4zm52.226-52.227l-8.266 8.267-10.56-10.56 8.266-8.267.027-.026 10.56 10.56-.027.026z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/education.svg b/src/assets/icons/svg/education.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..7bfb01d1[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/education.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M88.883 119.565c-7.284 0-19.434 2.495-21.333 8.25v.127c-4.232.13-5.222 0-7.108 0-1.895-5.76-14.045-8.256-21.333-8.256H0V0h42.523c9.179 0 17.109 5.47 21.47 13.551C68.352 5.475 76.295 0 85.478 0H128v119.57l-39.113-.005h-.004zM60.442 24.763c0-9.651-8.978-16.507-17.777-16.507H7.108V111.43H39.11c7.054-.14 18.177.082 21.333 6.12v-4.628c-.134-5.722-.004-13.522 0-13.832V27.413l.004-2.655-.004.005zm60.442-16.517h-35.55c-8.802 0-17.78 6.856-17.78 16.493v74.259c.004.32.138 8.115 0 13.813v4.627c3.155-6.022 14.279-6.26 21.333-6.114h32V8.25l-.003-.005z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/email.svg b/src/assets/icons/svg/email.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..74d25e21[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/email.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="96" xmlns="http://www.w3.org/2000/svg"><path d="M64.125 56.975L120.188.912A12.476 12.476 0 0 0 115.5 0h-103c-1.588 0-3.113.3-4.513.838l56.138 56.137z"/><path d="M64.125 68.287l-62.3-62.3A12.42 12.42 0 0 0 0 12.5v71C0 90.4 5.6 96 12.5 96h103c6.9 0 12.5-5.6 12.5-12.5v-71a12.47 12.47 0 0 0-1.737-6.35L64.125 68.287z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/example.svg b/src/assets/icons/svg/example.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..46f42b53[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/example.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M96.258 57.462h31.421C124.794 27.323 100.426 2.956 70.287.07v31.422a32.856 32.856 0 0 1 25.971 25.97zm-38.796-25.97V.07C27.323 2.956 2.956 27.323.07 57.462h31.422a32.856 32.856 0 0 1 25.97-25.97zm12.825 64.766v31.421c30.46-2.885 54.507-27.253 57.713-57.712H96.579c-2.886 13.466-13.146 23.726-26.292 26.291zM31.492 70.287H.07c2.886 30.46 27.253 54.507 57.713 57.713V96.579c-13.466-2.886-23.726-13.146-26.291-26.292z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/excel.svg b/src/assets/icons/svg/excel.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..74d97b80[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/excel.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M78.208 16.576v8.384h38.72v5.376h-38.72v8.704h38.72v5.376h-38.72v8.576h38.72v5.376h-38.72v8.576h38.72v5.376h-38.72v8.576h38.72v5.376h-38.72v8.512h38.72v5.376h-38.72v11.136H128v-94.72H78.208zM0 114.368L72.128 128V0L0 13.632v100.736z"/><path d="M28.672 82.56h-11.2l14.784-23.488-14.08-22.592h11.52l8.192 14.976 8.448-14.976h11.136l-14.08 22.208L58.368 82.56H46.656l-8.768-15.68z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/exit-fullscreen.svg b/src/assets/icons/svg/exit-fullscreen.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..485c128b[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/exit-fullscreen.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M49.217 41.329l-.136-35.24c-.06-2.715-2.302-4.345-5.022-4.405h-3.65c-2.712-.06-4.866 2.303-4.806 5.016l.152 19.164-24.151-23.79a6.698 6.698 0 0 0-9.499 0 6.76 6.76 0 0 0 0 9.526l23.93 23.713-18.345.074c-2.712-.069-5.228 1.813-5.64 5.02v3.462c.069 2.721 2.31 4.97 5.022 5.03l35.028-.207c.052.005.087.025.133.025l2.457.054a4.626 4.626 0 0 0 3.436-1.38c.88-.874 1.205-2.096 1.169-3.462l-.262-2.465c0-.048.182-.081.182-.136h.002zm52.523 51.212l18.32-.073c2.713.06 5.224-1.609 5.64-4.815v-3.462c-.068-2.722-2.317-4.97-5.021-5.04l-34.58.21c-.053 0-.086-.021-.138-.021l-2.451-.06a4.64 4.64 0 0 0-3.445 1.381c-.885.868-1.201 2.094-1.174 3.46l.27 2.46c.005.06-.177.095-.177.141l.141 34.697c.069 2.713 2.31 4.338 5.022 4.397l3.45.006c2.705.062 4.867-2.31 4.8-5.026l-.153-18.752 24.151 23.946a6.69 6.69 0 0 0 9.494 0 6.747 6.747 0 0 0 0-9.523L101.74 92.54v.001zM48.125 80.662a4.636 4.636 0 0 0-3.437-1.382l-2.457.06c-.05 0-.082.022-.137.022l-35.025-.21c-2.712.07-4.957 2.318-5.022 5.04v3.462c.409 3.206 2.925 4.874 5.633 4.814l18.554.06-24.132 23.928c-2.62 2.626-2.62 6.89 0 9.524a6.694 6.694 0 0 0 9.496 0l24.155-23.79-.155 18.866c-.06 2.722 2.094 5.093 4.801 5.025h3.65c2.72-.069 4.962-1.685 5.022-4.406l.141-34.956c0-.05-.182-.082-.182-.136l.262-2.46c.03-1.366-.286-2.592-1.166-3.46h-.001zM80.08 47.397a4.62 4.62 0 0 0 3.443 1.374l2.45-.054c.055 0 .088-.02.143-.028l35.08.21c2.712-.062 4.953-2.312 5.021-5.033l.009-3.463c-.417-3.211-2.937-5.084-5.64-5.025l-18.615-.073 23.917-23.715c2.63-2.623 2.63-6.879.008-9.513a6.691 6.691 0 0 0-9.494 0L92.251 26.016l.155-19.312c.065-2.713-2.097-5.085-4.802-5.025h-3.45c-2.713.069-4.954 1.693-5.022 4.406l-.139 35.247c0 .054.18.088.18.136l-.267 2.465c-.028 1.366.288 2.588 1.174 3.463v.001z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/eye-open.svg b/src/assets/icons/svg/eye-open.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..88dcc98e[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/eye-open.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="128" height="128"><defs><style/></defs><path d="M512 128q69.675 0 135.51 21.163t115.498 54.997 93.483 74.837 73.685 82.006 51.67 74.837 32.17 54.827L1024 512q-2.347 4.992-6.315 13.483T998.87 560.17t-31.658 51.669-44.331 59.99-56.832 64.34-69.504 60.16-82.347 51.5-94.848 34.687T512 896q-69.675 0-135.51-21.163t-115.498-54.826-93.483-74.326-73.685-81.493-51.67-74.496-32.17-54.997L0 513.707q2.347-4.992 6.315-13.483t18.816-34.816 31.658-51.84 44.331-60.33 56.832-64.683 69.504-60.331 82.347-51.84 94.848-34.816T512 128.085zm0 85.333q-46.677 0-91.648 12.331t-81.152 31.83-70.656 47.146-59.648 54.485-48.853 57.686-37.675 52.821-26.325 43.99q12.33 21.674 26.325 43.52t37.675 52.351 48.853 57.003 59.648 53.845T339.2 767.02t81.152 31.488T512 810.667t91.648-12.331 81.152-31.659 70.656-46.848 59.648-54.186 48.853-57.344 37.675-52.651T927.957 512q-12.33-21.675-26.325-43.648t-37.675-52.65-48.853-57.345-59.648-54.186-70.656-46.848-81.152-31.659T512 213.334zm0 128q70.656 0 120.661 50.006T682.667 512 632.66 632.661 512 682.667 391.339 632.66 341.333 512t50.006-120.661T512 341.333zm0 85.334q-35.328 0-60.33 25.002T426.666 512t25.002 60.33T512 597.334t60.33-25.002T597.334 512t-25.002-60.33T512 426.666z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/eye.svg b/src/assets/icons/svg/eye.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..16ed2d87[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/eye.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="64" xmlns="http://www.w3.org/2000/svg"><path d="M127.072 7.994c1.37-2.208.914-5.152-.914-6.87-2.056-1.717-4.797-1.226-6.396.982-.229.245-25.586 32.382-55.74 32.382-29.24 0-55.74-32.382-55.968-32.627-1.6-1.963-4.57-2.208-6.397-.49C-.17 3.086-.399 6.275 1.2 8.238c.457.736 5.94 7.36 14.62 14.72L4.17 35.96c-1.828 1.963-1.6 5.152.228 6.87.457.98 1.6 1.471 2.742 1.471s2.284-.49 3.198-1.472l12.564-13.983c5.94 4.416 13.021 8.587 20.788 11.53l-4.797 17.418c-.685 2.699.686 5.397 3.198 6.133h1.37c2.057 0 3.884-1.472 4.341-3.68L52.6 42.83c3.655.736 7.538 1.227 11.422 1.227 3.883 0 7.767-.49 11.422-1.227l4.797 17.173c.457 2.208 2.513 3.68 4.34 3.68.457 0 .914 0 1.143-.246 2.513-.736 3.883-3.434 3.198-6.133l-4.797-17.172c7.767-2.944 14.848-7.114 20.788-11.53l12.336 13.738c.913.981 2.056 1.472 3.198 1.472s2.284-.49 3.198-1.472c1.828-1.963 1.828-4.906.228-6.87l-11.65-13.001c9.366-7.36 14.849-14.474 14.849-14.474z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/form.svg b/src/assets/icons/svg/form.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..dcbaa185[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/form.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M84.068 23.784c-1.02 0-1.877-.32-2.572-.96a8.588 8.588 0 0 1-1.738-2.237 11.524 11.524 0 0 1-1.042-2.621c-.232-.895-.348-1.641-.348-2.238V0h.278c.834 0 1.622.085 2.363.256.742.17 1.645.575 2.711 1.214 1.066.64 2.363 1.535 3.892 2.686 1.53 1.15 3.453 2.664 5.77 4.54 2.502 2.045 4.494 3.771 5.977 5.178 1.483 1.406 2.618 2.6 3.406 3.58.787.98 1.274 1.812 1.46 2.494.185.682.277 1.278.277 1.79v2.046H84.068zM127.3 84.01c.278.682.464 1.535.556 2.558.093 1.023-.37 2.003-1.39 2.94-.463.427-.88.832-1.25 1.215-.372.384-.696.704-.974.96a6.69 6.69 0 0 1-.973.767l-11.816-10.741a44.331 44.331 0 0 0 1.877-1.535 31.028 31.028 0 0 1 1.737-1.406c1.112-.938 2.317-1.343 3.615-1.215 1.297.128 2.363.405 3.197.83.927.427 1.923 1.173 2.989 2.239 1.065 1.065 1.876 2.195 2.432 3.388zM78.23 95.902c2.038 0 3.752-.511 5.143-1.534l-26.969 25.83H18.037c-1.761 0-3.684-.47-5.77-1.407a24.549 24.549 0 0 1-5.838-3.709 21.373 21.373 0 0 1-4.518-5.306c-1.204-2.003-1.807-4.07-1.807-6.202V16.495c0-1.79.44-3.665 1.32-5.626A18.41 18.41 0 0 1 5.04 5.562a21.798 21.798 0 0 1 5.213-3.964C12.198.533 14.237 0 16.37 0h53.24v15.984c0 1.62.278 3.367.834 5.242a16.704 16.704 0 0 0 2.572 5.179c1.159 1.577 2.665 2.898 4.518 3.964 1.853 1.066 4.078 1.598 6.673 1.598h20.295v42.325L85.458 92.45c1.02-1.364 1.529-2.856 1.529-4.476 0-2.216-.857-4.113-2.572-5.69-1.714-1.577-3.776-2.366-6.186-2.366H26.1c-2.409 0-4.448.789-6.116 2.366-1.668 1.577-2.502 3.474-2.502 5.69 0 2.217.834 4.092 2.502 5.626 1.668 1.535 3.707 2.302 6.117 2.302h52.13zM26.1 47.951c-2.41 0-4.449.789-6.117 2.366-1.668 1.577-2.502 3.473-2.502 5.69 0 2.216.834 4.092 2.502 5.626 1.668 1.534 3.707 2.302 6.117 2.302h52.13c2.409 0 4.47-.768 6.185-2.302 1.715-1.534 2.572-3.41 2.572-5.626 0-2.217-.857-4.113-2.572-5.69-1.714-1.577-3.776-2.366-6.186-2.366H26.1zm52.407 64.063l1.807-1.663 3.476-3.196a479.75 479.75 0 0 0 4.587-4.284 500.757 500.757 0 0 1 5.004-4.667c3.985-3.666 8.48-7.758 13.485-12.276l11.677 10.741-13.485 12.404-5.004 4.603-4.587 4.22a179.46 179.46 0 0 0-3.267 3.068c-.88.853-1.367 1.322-1.46 1.407-.463.341-.973.703-1.529 1.087-.556.383-1.112.703-1.668.959-.556.256-1.413.575-2.572.959a83.5 83.5 0 0 1-3.545 1.087 72.2 72.2 0 0 1-3.475.895c-1.112.256-1.946.426-2.502.511-1.112.17-1.854.043-2.224-.383-.371-.426-.464-1.151-.278-2.174.092-.511.278-1.279.556-2.302.278-1.023.602-2.067.973-3.132l1.042-3.005c.325-.938.58-1.577.765-1.918a10.157 10.157 0 0 1 2.224-2.941z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/fullscreen.svg b/src/assets/icons/svg/fullscreen.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..0e86b6fa[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/fullscreen.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M38.47 52L52 38.462l-23.648-23.67L43.209 0H.035L0 43.137l14.757-14.865L38.47 52zm74.773 47.726L89.526 76 76 89.536l23.648 23.672L84.795 128h43.174L128 84.863l-14.757 14.863zM89.538 52l23.668-23.648L128 43.207V.038L84.866 0 99.73 14.76 76 38.472 89.538 52zM38.46 76L14.792 99.651 0 84.794v43.173l43.137.033-14.865-14.757L52 89.53 38.46 76z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/github.svg b/src/assets/icons/svg/github.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..db0a0d43[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/github.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1581238998885" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4187" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M511.542857 14.057143C228.914286 13.942857 0 242.742857 0 525.142857 0 748.457143 143.2 938.285714 342.628571 1008c26.857143 6.742857 22.742857-12.342857 22.742858-25.371429v-88.571428c-155.085714 18.171429-161.371429-84.457143-171.771429-101.6C172.571429 756.571429 122.857143 747.428571 137.714286 730.285714c35.314286-18.171429 71.314286 4.571429 113.028571 66.171429 30.171429 44.685714 89.028571 37.142857 118.857143 29.714286 6.514286-26.857143 20.457143-50.857143 39.657143-69.485715-160.685714-28.8-227.657143-126.857143-227.657143-243.428571 0-56.571429 18.628571-108.571429 55.2-150.514286-23.314286-69.142857 2.171429-128.342857 5.6-137.142857 66.4-5.942857 135.428571 47.542857 140.8 51.771429 37.714286-10.171429 80.8-15.542857 129.028571-15.542858 48.457143 0 91.657143 5.6 129.714286 15.885715 12.914286-9.828571 76.914286-55.771429 138.628572-50.171429 3.314286 8.8 28.228571 66.628571 6.285714 134.857143 37.028571 42.057143 55.885714 94.514286 55.885714 151.2 0 116.8-67.428571 214.971429-228.571428 243.314286a145.714286 145.714286 0 0 1 43.542857 104v128.571428c0.914286 10.285714 0 20.457143 17.142857 20.457143 202.4-68.228571 348.114286-259.428571 348.114286-484.685714 0-282.514286-229.028571-511.2-511.428572-511.2z" p-id="4188"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/guide.svg b/src/assets/icons/svg/guide.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..b2710017[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/guide.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M1.482 70.131l36.204 16.18 69.932-65.485-61.38 70.594 46.435 18.735c1.119.425 2.397-.17 2.797-1.363v-.085L127.998.047 1.322 65.874c-1.12.597-1.519 1.959-1.04 3.151.32.511.72.937 1.2 1.107zm44.676 57.821L64.22 107.26l-18.062-7.834v28.527z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/icon.svg b/src/assets/icons/svg/icon.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..82be8eee[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/icon.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M115.147.062a13 13 0 0 1 4.94.945c1.55.63 2.907 1.526 4.069 2.688a13.148 13.148 0 0 1 2.761 4.069c.678 1.55 1.017 3.245 1.017 5.086v102.3c0 3.681-1.187 6.733-3.56 9.155-2.373 2.422-5.352 3.633-8.937 3.633H12.992c-3.875 0-7-1.26-9.373-3.779-2.373-2.518-3.56-5.667-3.56-9.445V12.704c0-3.39 1.163-6.345 3.488-8.863C5.872 1.32 8.972.062 12.847.062h102.3zM81.434 109.047c1.744 0 3.003-.412 3.778-1.235.775-.824 1.163-1.914 1.163-3.27 0-1.26-.388-2.325-1.163-3.197-.775-.872-2.034-1.307-3.778-1.307H72.57c.097-.194.145-.485.145-.872V27.09h9.01c1.743 0 2.954-.436 3.633-1.308.678-.872 1.017-1.938 1.017-3.197 0-1.26-.34-2.325-1.017-3.197-.679-.872-1.89-1.308-3.633-1.308H46.268c-1.743 0-2.954.436-3.632 1.308-.678.872-1.018 1.938-1.018 3.197 0 1.26.34 2.325 1.018 3.197.678.872 1.889 1.308 3.632 1.308h8.138v72.075c0 .193.024.339.073.436.048.096.072.242.072.436H46.56c-1.744 0-3.003.435-3.778 1.307-.775.872-1.163 1.938-1.163 3.197 0 1.356.388 2.446 1.163 3.27.775.823 2.034 1.235 3.778 1.235h34.875z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/input.svg b/src/assets/icons/svg/input.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..ab91381e[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/input.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1575802859706" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3102" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M896 224H128c-35.2 0-64 28.8-64 64v448c0 35.2 28.8 64 64 64h768c35.2 0 64-28.8 64-64V288c0-35.2-28.8-64-64-64z m0 480c0 19.2-12.8 32-32 32H160c-19.2 0-32-12.8-32-32V320c0-19.2 12.8-32 32-32h704c19.2 0 32 12.8 32 32v384z" p-id="3103"></path><path d="M224 352c-19.2 0-32 12.8-32 32v256c0 16 12.8 32 32 32s32-12.8 32-32V384c0-16-12.8-32-32-32z" p-id="3104"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/international.svg b/src/assets/icons/svg/international.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..e9b56eee[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/international.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M83.287 103.01c-1.57-3.84-6.778-10.414-15.447-19.548-2.327-2.444-2.182-4.306-1.338-9.862v-.64c.553-3.81 1.513-6.05 14.313-8.087 6.516-1.018 8.203 1.57 10.589 5.178l.785 1.193a12.625 12.625 0 0 0 6.43 5.207c1.134.524 2.53 1.164 4.421 2.24 4.596 2.53 4.596 5.41 4.596 11.753v.727a26.91 26.91 0 0 1-5.178 17.454 59.055 59.055 0 0 1-19.025 11.026c3.49-6.546.814-14.313 0-16.553l-.146-.087zM64 5.12a58.502 58.502 0 0 1 25.484 5.818 54.313 54.313 0 0 0-12.859 10.327c-.93 1.28-1.716 2.473-2.472 3.579-2.444 3.694-3.637 5.352-5.818 5.614a25.105 25.105 0 0 1-4.219 0c-4.276-.29-10.094-.64-11.956 4.422-1.193 3.23-1.396 11.956 2.444 16.495.66 1.077.778 2.4.32 3.578a7.01 7.01 0 0 1-2.066 3.229 18.938 18.938 0 0 1-2.909-2.91 18.91 18.91 0 0 0-8.32-6.603c-1.25-.349-2.647-.64-3.985-.93-3.782-.786-8.03-1.688-9.019-3.812a14.895 14.895 0 0 1-.727-5.818 21.935 21.935 0 0 0-1.396-9.25 8.873 8.873 0 0 0-5.557-4.946A58.705 58.705 0 0 1 64 5.12zM0 64c0 35.346 28.654 64 64 64 35.346 0 64-28.654 64-64 0-35.346-28.654-64-64-64C28.654 0 0 28.654 0 64z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/job.svg b/src/assets/icons/svg/job.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..2a93a251[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/job.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1566036191400" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5472" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M934.912 1016.832H192c-14.336 0-25.6-11.264-25.6-25.6v-189.44c0-14.336 11.264-25.6 25.6-25.6s25.6 11.264 25.6 25.6v163.84h691.712V64H217.6v148.48c0 14.336-11.264 25.6-25.6 25.6s-25.6-11.264-25.6-25.6v-174.08c0-14.336 11.264-25.6 25.6-25.6h742.912c14.336 0 25.6 11.264 25.6 25.6v952.832c0 14.336-11.264 25.6-25.6 25.6z" p-id="5473"></path><path d="M232.96 371.2h-117.76c-14.336 0-25.6-11.264-25.6-25.6s11.264-25.6 25.6-25.6h117.76c14.336 0 25.6 11.264 25.6 25.6s-11.264 25.6-25.6 25.6zM232.96 540.16h-117.76c-14.336 0-25.6-11.264-25.6-25.6s11.264-25.6 25.6-25.6h117.76c14.336 0 25.6 11.264 25.6 25.6s-11.264 25.6-25.6 25.6zM232.96 698.88h-117.76c-14.336 0-25.6-11.264-25.6-25.6s11.264-25.6 25.6-25.6h117.76c14.336 0 25.6 11.264 25.6 25.6s-11.264 25.6-25.6 25.6zM574.464 762.88c-134.144 0-243.2-109.056-243.2-243.2S440.32 276.48 574.464 276.48s243.2 109.056 243.2 243.2-109.056 243.2-243.2 243.2z m0-435.2c-105.984 0-192 86.016-192 192S468.48 711.68 574.464 711.68s192-86.016 192-192S680.448 327.68 574.464 327.68z" p-id="5474"></path><path d="M663.04 545.28h-87.04c-14.336 0-25.6-11.264-25.6-25.6s11.264-25.6 25.6-25.6h87.04c14.336 0 25.6 11.264 25.6 25.6s-11.264 25.6-25.6 25.6z" p-id="5475"></path><path d="M576 545.28c-14.336 0-25.6-11.264-25.6-25.6v-87.04c0-14.336 11.264-25.6 25.6-25.6s25.6 11.264 25.6 25.6v87.04c0 14.336-11.264 25.6-25.6 25.6z" p-id="5476"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/language.svg b/src/assets/icons/svg/language.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..0082b577[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/language.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M84.742 36.8c2.398 7.2 5.595 12.8 11.19 18.4 4.795-4.8 7.992-11.2 10.39-18.4h-21.58zm-52.748 40h20.78l-10.39-28-10.39 28z"/><path d="M111.916 0H16.009C7.218 0 .025 7.2.025 16v96c0 8.8 7.193 16 15.984 16h95.907c8.791 0 15.984-7.2 15.984-16V16c0-8.8-6.394-16-15.984-16zM72.754 103.2c-1.598 1.6-3.197 1.6-4.795 1.6-.8 0-2.398 0-3.197-.8-.8-.8-1.599 0-1.599-.8s-.799-1.6-1.598-3.2c-.8-1.6-.8-2.4-1.599-4l-3.196-8.8H28.797L25.6 96c-1.598 3.2-2.398 5.6-3.197 7.2-.8 1.6-2.398 1.6-4.795 1.6-1.599 0-3.197-.8-4.796-1.6-1.598-1.6-2.397-2.4-2.397-4 0-.8 0-1.6.799-3.2.8-1.6.8-2.4 1.598-4l17.583-44.8c.8-1.6.8-3.2 1.599-4.8.799-1.6 1.598-3.2 2.397-4 .8-.8 1.599-2.4 3.197-3.2 1.599-.8 3.197-.8 4.796-.8 1.598 0 3.196 0 4.795.8 1.598.8 2.398 1.6 3.197 3.2.799.8 1.598 2.4 2.397 4 .8 1.6 1.599 3.2 2.398 5.6l17.583 44c1.598 3.2 2.398 5.6 2.398 7.2-.8.8-1.599 2.4-2.398 4zM116.711 72c-8.791-3.2-15.185-7.2-20.78-12-5.594 5.6-12.787 9.6-21.579 12l-2.397-4c8.791-2.4 15.984-5.6 21.579-11.2C87.939 51.2 83.144 44 81.545 36h-7.992v-3.2h21.58c-1.6-2.4-3.198-5.6-4.796-8l2.397-.8c1.599 2.4 3.997 5.6 5.595 8.8h19.98v4h-7.992c-2.397 8-6.393 15.2-11.189 20 5.595 4.8 11.988 8.8 20.78 11.2l-3.197 4z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/link.svg b/src/assets/icons/svg/link.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..48197ba4[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/link.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M115.625 127.937H.063V12.375h57.781v12.374H12.438v90.813h90.813V70.156h12.374z"/><path d="M116.426 2.821l8.753 8.753-56.734 56.734-8.753-8.745z"/><path d="M127.893 37.982h-12.375V12.375H88.706V0h39.187z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/list.svg b/src/assets/icons/svg/list.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..20259edd[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/list.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M1.585 12.087c0 6.616 3.974 11.98 8.877 11.98 4.902 0 8.877-5.364 8.877-11.98 0-6.616-3.975-11.98-8.877-11.98-4.903 0-8.877 5.364-8.877 11.98zM125.86.107H35.613c-1.268 0-2.114 1.426-2.114 2.852v18.255c0 1.712 1.057 2.853 2.114 2.853h90.247c1.268 0 2.114-1.426 2.114-2.853V2.96c0-1.711-1.057-2.852-2.114-2.852zM.106 62.86c0 6.615 3.974 11.979 8.876 11.979 4.903 0 8.877-5.364 8.877-11.98 0-6.616-3.974-11.98-8.877-11.98-4.902 0-8.876 5.364-8.876 11.98zM124.17 50.88H33.921c-1.268 0-2.114 1.425-2.114 2.851v18.256c0 1.711 1.057 2.852 2.114 2.852h90.247c1.268 0 2.114-1.426 2.114-2.852V53.73c0-1.426-.846-2.852-2.114-2.852zM.106 115.913c0 6.616 3.974 11.98 8.876 11.98 4.903 0 8.877-5.364 8.877-11.98 0-6.616-3.974-11.98-8.877-11.98-4.902 0-8.876 5.364-8.876 11.98zm124.064-11.98H33.921c-1.268 0-2.114 1.426-2.114 2.853v18.255c0 1.711 1.057 2.852 2.114 2.852h90.247c1.268 0 2.114-1.426 2.114-2.852v-18.255c0-1.427-.846-2.853-2.114-2.853z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/lock.svg b/src/assets/icons/svg/lock.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..74fee543[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/lock.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M119.88 49.674h-7.987V39.52C111.893 17.738 90.45.08 63.996.08 37.543.08 16.1 17.738 16.1 39.52v10.154H8.113c-4.408 0-7.987 2.94-7.987 6.577v65.13c0 3.637 3.57 6.577 7.987 6.577H119.88c4.407 0 7.987-2.94 7.987-6.577v-65.13c-.008-3.636-3.58-6.577-7.987-6.577zm-23.953 0H32.065V39.52c0-14.524 14.301-26.295 31.931-26.295 17.63 0 31.932 11.777 31.932 26.295v10.153z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/log.svg b/src/assets/icons/svg/log.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..d879d33b[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/log.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1566035943711" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4805" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M208.736 566.336H64.384v59.328h144.352v-59.328z m0-336.096H165.44V74.592c0-7.968 4.896-14.848 10.464-14.848h502.016V0.448H175.936c-38.72 1.248-69.248 34.368-68.192 74.144v155.648H64.384V289.6h144.352V230.24z m0 168.096H64.384v59.328h144.352v-59.328z m714.656 76.576h-57.76v474.496c0 7.936-4.896 14.848-10.464 14.848H175.936c-5.568 0-10.464-6.912-10.464-14.848v-155.68h43.296v-59.296H64.384v59.296h43.328v155.68c-1.024 39.776 29.472 72.896 68.192 74.144h679.232c38.72-1.184 69.248-34.368 68.256-74.144V474.912z m14.944-290.336l-83.072-85.312a71.264 71.264 0 0 0-52.544-21.728 71.52 71.52 0 0 0-51.616 23.872L386.528 507.264a30.496 30.496 0 0 0-6.176 10.72L308.16 740.512a30.016 30.016 0 0 0 6.976 30.24c7.712 7.968 19.2 10.752 29.568 7.2l216.544-74.112a28.736 28.736 0 0 0 12.128-7.936L940.448 287.456a75.552 75.552 0 0 0-2.112-102.88z m-557.12 518.272l39.104-120.64 78.336 80.416-117.44 40.224z m170.048-70.016l-103.552-106.016 200.16-222.4 103.52 106.304-200.128 222.112zM897.952 247.072l-0.256 0.224-107.136 119.168-103.52-106.528 106.432-118.624a14.144 14.144 0 0 1 10.304-4.736 13.44 13.44 0 0 1 10.464 4.288l83.264 85.696c5.472 5.6 5.664 14.72 0.448 20.512z" p-id="4806"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/logininfor.svg b/src/assets/icons/svg/logininfor.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..267f8447[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/logininfor.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1566036016814" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5261" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M896 128h-85.333333a42.666667 42.666667 0 0 0 0 85.333333h42.666666v640H170.666667V213.333333h42.666666a42.666667 42.666667 0 0 0 0-85.333333H128a42.666667 42.666667 0 0 0-42.666667 42.666667v725.333333a42.666667 42.666667 0 0 0 42.666667 42.666667h768a42.666667 42.666667 0 0 0 42.666667-42.666667V170.666667a42.666667 42.666667 0 0 0-42.666667-42.666667z" p-id="5262"></path><path d="M341.333333 298.666667a42.666667 42.666667 0 0 0 42.666667-42.666667V128a42.666667 42.666667 0 0 0-85.333333 0v128a42.666667 42.666667 0 0 0 42.666666 42.666667zM512 298.666667a42.666667 42.666667 0 0 0 42.666667-42.666667V128a42.666667 42.666667 0 0 0-85.333334 0v128a42.666667 42.666667 0 0 0 42.666667 42.666667zM682.666667 298.666667a42.666667 42.666667 0 0 0 42.666666-42.666667V128a42.666667 42.666667 0 0 0-85.333333 0v128a42.666667 42.666667 0 0 0 42.666667 42.666667zM341.333333 768a42.666667 42.666667 0 0 0 42.666667-42.666667 128 128 0 0 1 256 0 42.666667 42.666667 0 0 0 85.333333 0 213.333333 213.333333 0 0 0-107.52-184.32A128 128 0 0 0 640 469.333333a128 128 0 0 0-256 0 128 128 0 0 0 22.186667 71.68A213.333333 213.333333 0 0 0 298.666667 725.333333a42.666667 42.666667 0 0 0 42.666666 42.666667z m128-298.666667a42.666667 42.666667 0 1 1 42.666667 42.666667 42.666667 42.666667 0 0 1-42.666667-42.666667z" p-id="5263"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/message.svg b/src/assets/icons/svg/message.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..14ca8172[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/message.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M0 20.967v59.59c0 11.59 8.537 20.966 19.075 20.966h28.613l1 26.477L76.8 101.523h32.125c10.538 0 19.075-9.377 19.075-20.966v-59.59C128 9.377 119.463 0 108.925 0h-89.85C8.538 0 0 9.377 0 20.967zm82.325 33.1c0-5.524 4.013-9.935 9.037-9.935 5.026 0 9.038 4.41 9.038 9.934 0 5.524-4.025 9.934-9.038 9.934-5.024 0-9.037-4.41-9.037-9.934zm-27.613 0c0-5.524 4.013-9.935 9.038-9.935s9.037 4.41 9.037 9.934c0 5.524-4.025 9.934-9.037 9.934-5.025 0-9.038-4.41-9.038-9.934zm-27.1 0c0-5.524 4.013-9.935 9.038-9.935s9.038 4.41 9.038 9.934c0 5.524-4.026 9.934-9.05 9.934-5.013 0-9.025-4.41-9.025-9.934z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/money.svg b/src/assets/icons/svg/money.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..c1580de1[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/money.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M54.122 127.892v-28.68H7.513V87.274h46.609v-12.4H7.513v-12.86h38.003L.099 0h22.6l32.556 45.07c3.617 5.144 6.44 9.611 8.487 13.385 1.788-3.05 4.89-7.779 9.301-14.186L103.93 0h24.01L82.385 62.013h38.34v12.862h-46.41v12.4h46.41v11.937h-46.41v28.68H54.123z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/monitor.svg b/src/assets/icons/svg/monitor.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..bc308cb0[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/monitor.svg[m
[36m@@ -0,0 +1,2 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1543827393750" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4695" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css">@font-face { font-family: rbicon; src: url("chrome-extension://dipiagiiohfljcicegpgffpbnjmgjcnf/fonts/rbicon.woff2") format("woff2"); font-weight: normal; font-style: normal; }[m
[32m+[m[32m</style></defs><path d="M64 64V640H896V64H64zM0 0h960v704H0V0z" p-id="4696"></path><path d="M192 896H768v64H192zM448 640H512v256h-64z" p-id="4697"></path><path d="M479.232 561.604267l309.9904-348.330667-47.803733-42.5472-259.566934 291.669333L303.957333 240.008533 163.208533 438.6048l52.224 37.009067 91.6224-129.28z" p-id="4698"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/nested.svg b/src/assets/icons/svg/nested.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..06713a86[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/nested.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M.002 9.2c0 5.044 3.58 9.133 7.998 9.133 4.417 0 7.997-4.089 7.997-9.133 0-5.043-3.58-9.132-7.997-9.132S.002 4.157.002 9.2zM31.997.066h95.981V18.33H31.997V.066zm0 45.669c0 5.044 3.58 9.132 7.998 9.132 4.417 0 7.997-4.088 7.997-9.132 0-3.263-1.524-6.278-3.998-7.91-2.475-1.63-5.524-1.63-7.998 0-2.475 1.632-4 4.647-4 7.91zM63.992 36.6h63.986v18.265H63.992V36.6zm-31.995 82.2c0 5.043 3.58 9.132 7.998 9.132 4.417 0 7.997-4.089 7.997-9.132 0-5.044-3.58-9.133-7.997-9.133s-7.998 4.089-7.998 9.133zm31.995-9.131h63.986v18.265H63.992V109.67zm0-27.404c0 5.044 3.58 9.133 7.998 9.133 4.417 0 7.997-4.089 7.997-9.133 0-3.263-1.524-6.277-3.998-7.909-2.475-1.631-5.524-1.631-7.998 0-2.475 1.632-4 4.646-4 7.91zm31.995-9.13h31.991V91.4H95.987V73.135z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/number.svg b/src/assets/icons/svg/number.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..ad5ce9af[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/number.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1575802851180" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2867" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M279.272727 791.272727h512a46.545455 46.545455 0 0 1 0 93.090909H279.272727a46.545455 46.545455 0 0 1 0-93.090909z m33.838546-617.984V651.636364H193.722182V395.170909c0-37.003636-0.884364-59.298909-2.653091-66.746182a24.948364 24.948364 0 0 0-14.615273-16.989091c-8.005818-3.863273-25.786182-5.771636-53.341091-5.771636h-11.822545v-55.854545c57.716364-12.381091 101.562182-37.888 131.490909-76.520728h70.283636z m303.709091 396.8V651.636364H354.164364v-68.235637c77.777455-127.255273 124.043636-206.010182 138.705454-236.218182 14.661818-30.254545 22.016-53.853091 22.016-70.74909 0-13.032727-2.234182-22.714182-6.656-29.137455-4.421818-6.376727-11.170909-9.588364-20.247273-9.588364a22.248727 22.248727 0 0 0-20.200727 10.612364c-4.468364 7.121455-6.656 21.178182-6.656 42.263273v45.521454H354.164364v-17.454545c0-26.763636 1.396364-47.941818 4.142545-63.348364 2.746182-15.499636 9.541818-30.72 20.386909-45.661091 10.798545-14.987636 24.901818-26.298182 42.216727-33.978182 17.361455-7.68 38.167273-11.543273 62.37091-11.543272 47.476364 0 83.316364 11.776 107.706181 35.328 24.296727 23.552 36.445091 53.341091 36.445091 89.367272 0 27.368727-6.842182 56.32-20.48 86.853819-13.730909 30.533818-54.039273 95.325091-121.018182 194.420363h130.885819z m270.615272-189.393454c18.152727 6.097455 31.650909 16.104727 40.494546 29.975272 8.843636 13.917091 13.312 46.452364 13.312 97.652364 0 38.027636-4.328727 67.490909-13.032727 88.529455-8.657455 20.945455-23.598545 36.910545-44.869819 47.848727-21.271273 10.938182-48.593455 16.384-81.873454 16.384-37.794909 0-67.490909-6.330182-89.088-19.083636-21.550545-12.660364-35.746909-28.253091-42.542546-46.638546-6.795636-18.432-10.193455-50.362182-10.193454-95.883636v-37.841455h119.389091v77.730909c0 20.666182 1.210182 33.838545 3.723636 39.424 2.420364 5.585455 7.912727 8.424727 16.337455 8.424728 9.309091 0 15.36-3.537455 18.338909-10.612364 2.932364-7.121455 4.421818-25.6 4.421818-55.575273v-33.047273c0-18.338909-2.048-31.744-6.190546-40.215272a30.72 30.72 0 0 0-18.338909-16.709818c-8.052364-2.653091-23.738182-4.189091-46.964363-4.561455V357.050182c28.392727 0 45.893818-1.070545 52.596363-3.258182a22.946909 22.946909 0 0 0 14.475637-14.149818c2.932364-7.307636 4.421818-18.711273 4.421818-34.257455v-26.624c0-16.756364-1.722182-27.741091-5.12-33.047272-3.490909-5.352727-8.843636-8.005818-16.151273-8.005819-8.285091 0-13.963636 2.792727-16.989091 8.378182-3.025455 5.632-4.561455 17.640727-4.561454 35.933091v39.284364h-119.389091v-40.773818c0-45.661091 10.472727-76.567273 31.325091-92.625455 20.898909-16.058182 54.085818-24.064 99.607272-24.064 56.878545 0 95.511273 11.170909 115.805091 33.373091 20.293818 22.248727 30.394182 53.201455 30.394182 92.765091 0 26.810182-3.630545 46.173091-10.891636 58.088727-7.307636 11.915636-20.107636 22.807273-38.446546 32.628364z" p-id="2868"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/online.svg b/src/assets/icons/svg/online.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..330a2029[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/online.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1568899557259" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="535" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M356.246145 681.56286c-68.156286-41.949414-107.246583-103.84102-107.246583-169.805384 0-65.966411 39.090297-127.860063 107.246583-169.809477 12.046361-7.414877 15.800871-23.190165 8.385994-35.236526-7.413853-12.046361-23.191188-15.801894-35.236526-8.387018-39.640836 24.399713-72.539106 56.044434-95.137801 91.515297-23.86657 37.461193-36.481889 79.620385-36.481889 121.917724 0 42.297338 12.615319 84.454484 36.481889 121.914654 22.598694 35.469839 55.496965 67.11456 95.137801 91.51325 4.185322 2.576685 8.821923 3.804652 13.400195 3.804652 8.598842 0 16.998139-4.329609 21.836331-12.190647C372.047016 704.752002 368.291482 688.976714 356.246145 681.56286zM263.943926 754.580874c-92.603071-61.111846-145.713686-149.623739-145.713686-242.840794 0-93.195565 53.094242-181.682899 145.667637-242.774279 11.805884-7.79043 15.061021-23.677259 7.269567-35.483142-7.79043-11.805884-23.677259-15.062044-35.483142-7.269567C128.487861 296.954249 67.006602 401.024489 67.006602 511.74008c0 110.73708 61.496609 214.830857 168.721703 285.593504 4.343935 2.867304 9.240455 4.238534 14.08274 4.238534 8.317433 0 16.476253-4.046153 21.400403-11.507078C279.003923 778.258133 275.748786 762.372328 263.943926 754.580874zM788.660552 226.213092c-11.80486-7.791453-27.692712-4.536316-35.483142 7.269567-7.79043 11.805884-4.536316 27.692712 7.269567 35.483142 92.575442 61.092403 145.670707 149.579737 145.670707 242.774279 0 93.216032-53.111638 181.727924-145.715733 242.840794-11.805884 7.79043-15.059997 23.678282-7.269567 35.484166 4.925173 7.461949 13.081946 11.507078 21.400403 11.507078 4.841262 0 9.739828-1.37123 14.083763-4.238534 107.22714-70.761624 168.724773-174.857447 168.724773-285.593504C957.341323 401.025513 895.860063 296.955272 788.660552 226.213092zM790.090111 633.67213c23.865547-37.459147 36.480866-79.617315 36.480866-121.914654 0-42.298362-12.615319-84.45653-36.480866-121.917724-22.598694-35.470863-55.496965-67.115584-95.139847-91.515297-12.047384-7.413853-27.821649-3.659343-35.236526 8.387018-7.414877 12.045337-3.659343 27.821649 8.385994 35.236526 68.156286 41.949414 107.247606 103.842043 107.247606 169.809477 0 65.964364-39.090297 127.85597-107.247606 169.804361-12.045337 7.414877-15.800871 23.190165-8.385994 35.237549 4.838192 7.861038 13.236466 12.190647 21.835308 12.190647 4.579295 0 9.215896-1.227967 13.400195-3.804652C734.591099 700.786691 767.490394 669.142993 790.090111 633.67213zM567.129086 518.274914c24.12342-17.150612 39.887452-45.305859 39.887452-77.07133 0-52.128241-42.452881-94.538143-94.634334-94.538143-52.18043 0-94.633311 42.408879-94.633311 94.538143 0 31.695886 15.696494 59.797921 39.730886 76.958766-49.875944 21.128203-84.917018 70.234621-84.917018 127.301338 0 2.366907 0.061398 4.762467 0.182149 7.119141l1.249457 24.296359 276.373515 0 1.238201-24.308639c0.119727-2.358721 0.181125-4.750187 0.181125-7.106862C651.786185 588.497255 616.865861 539.465538 567.129086 518.274914zM512.381182 397.889079c23.937179 0 43.411719 19.430538 43.411719 43.314505 0 23.882943-19.47454 43.313481-43.411719 43.313481-23.936155 0-43.409672-19.430538-43.409672-43.313481C468.971509 417.320641 488.445026 397.889079 512.381182 397.889079zM426.08884 625.656573c9.119705-38.542828 44.254923-67.337641 86.085634-67.337641s76.966952 28.794813 86.085634 67.337641L426.08884 625.656573z" p-id="536"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/password.svg b/src/assets/icons/svg/password.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..6c64defe[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/password.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1575802846045" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2750" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M868.593046 403.832442c-30.081109-28.844955-70.037123-44.753273-112.624057-44.753273L265.949606 359.079168c-42.554188 0-82.510202 15.908318-112.469538 44.690852-30.236652 28.782533-46.857191 67.222007-46.857191 108.198258l0 294.079782c0 40.977273 16.619516 79.414701 46.702672 108.136859 29.959336 28.844955 70.069869 44.814672 112.624057 44.814672l490.019383 0c42.585911 0 82.696444-15.969717 112.624057-44.814672 30.082132-28.844955 46.579875-67.222007 46.579875-108.136859L915.172921 511.968278C915.171897 471.053426 898.675178 432.677397 868.593046 403.832442zM841.821309 806.049083c0 22.098297-8.882298 42.772152-25.099654 58.306964-16.154935 15.661701-37.81935 24.203238-60.752666 24.203238L265.949606 888.559285c-22.934339 0-44.567032-8.54256-60.877509-24.264637-16.186657-15.474436-25.067932-36.148291-25.067932-58.246589L180.004165 511.968278c0-22.035876 8.881274-42.772152 25.192775-58.307987 16.186657-15.536858 37.81935-24.139793 60.753689-24.139793l490.019383 0c22.933315 0 44.597731 8.602935 60.752666 24.139793 16.21838 15.535835 25.099654 36.272112 25.099654 58.307987L841.822332 806.049083zM510.974136 135.440715c114.914216 0 208.318536 89.75214 208.318536 200.055338l73.350588 0c0-149.113109-126.366036-270.496667-281.669124-270.496667-155.333788 0-281.699824 121.383558-281.699824 270.496667l73.350588 0C302.623877 225.193879 396.059919 135.440715 510.974136 135.440715zM474.299865 747.244792l73.350588 0L547.650453 629.576859l-73.350588 0L474.299865 747.244792z" p-id="2751"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/pdf.svg b/src/assets/icons/svg/pdf.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..957aa0cc[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/pdf.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="128" height="128"><path d="M869.073 277.307H657.111V65.344l211.962 211.963zm-238.232 26.27V65.344l-476.498-.054v416.957h714.73v-178.67H630.841zm-335.836 360.57c-5.07-3.064-10.944-5.133-17.61-6.201-6.67-1.064-13.603-1.6-20.81-1.6h-48.821v85.641h48.822c7.206 0 14.14-.532 20.81-1.6 6.665-1.065 12.54-3.133 17.609-6.202 5.064-3.063 9.134-7.406 12.208-13.007 3.065-5.602 4.6-12.937 4.6-22.011 0-9.07-1.535-16.408-4.6-22.01-3.074-5.603-7.144-9.94-12.208-13.01zM35.82 541.805v416.904h952.358V541.805H35.821zm331.421 191.179c-3.6 11.071-9.343 20.879-17.209 29.413-7.874 8.542-18.078 15.408-30.617 20.61-12.544 5.206-27.747 7.807-45.621 7.807h-66.036v102.45h-62.831V607.517h128.867c17.874 0 33.077 2.6 45.62 7.802 12.541 5.207 22.745 12.076 30.618 20.615 7.866 8.538 13.604 18.277 17.21 29.212 3.6 10.943 5.401 22.278 5.401 34.018 0 11.477-1.8 22.752-5.402 33.819zM644.9 806.417c-5.343 17.61-13.408 32.818-24.212 45.627-10.807 12.803-24.283 22.879-40.423 30.213-16.146 7.343-35.155 11.007-57.03 11.007h-123.26V607.518h123.26c18.41 0 35.552 2.941 51.428 8.808 15.873 5.869 29.618 14.671 41.22 26.412 11.608 11.744 20.674 26.411 27.217 44.02 6.535 17.61 9.803 38.288 9.803 62.035 0 20.81-2.67 40.02-8.003 57.624zm245.362-146.07h-138.07v66.03h119.66v48.829h-119.66v118.058h-62.83V607.518h200.9v52.829h-.001zm-318.2 25.611c-6.402-8.266-14.877-14.604-25.412-19.01-10.544-4.402-23.551-6.602-39.019-6.602h-44.825v180.088h56.029c9.07 0 17.872-1.463 26.415-4.401 8.535-2.932 16.14-7.802 22.812-14.609 6.665-6.8 12.007-15.667 16.007-26.61 4.003-10.94 6.003-24.275 6.003-40.021 0-14.408-1.4-27.416-4.202-39.019-2.8-11.607-7.406-21.542-13.808-29.816zm0 0"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/people.svg b/src/assets/icons/svg/people.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..2bd54aeb[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/people.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M104.185 95.254c8.161 7.574 13.145 17.441 13.145 28.28 0 1.508-.098 2.998-.285 4.466h-10.784c.238-1.465.403-2.948.403-4.465 0-8.983-4.36-17.115-11.419-23.216C86 104.66 75.355 107.162 64 107.162c-11.344 0-21.98-2.495-31.22-6.83-7.064 6.099-11.444 14.218-11.444 23.203 0 1.517.165 3 .403 4.465H10.955a35.444 35.444 0 0 1-.285-4.465c0-10.838 4.974-20.713 13.127-28.291C9.294 85.42.003 70.417.003 53.58.003 23.99 28.656.001 64 .001s63.997 23.988 63.997 53.58c0 16.842-9.299 31.85-23.812 41.673zM64 36.867c-29.454 0-53.33-10.077-53.33 15.342 0 25.418 23.876 46.023 53.33 46.023 29.454 0 53.33-20.605 53.33-46.023 0-25.419-23.876-15.342-53.33-15.342zm24.888 25.644c-3.927 0-7.111-2.665-7.111-5.953 0-3.288 3.184-5.954 7.11-5.954 3.928 0 7.111 2.666 7.111 5.954s-3.183 5.953-7.11 5.953zm-3.556 16.372c0 4.11-9.55 7.442-21.332 7.442-11.781 0-21.332-3.332-21.332-7.442 0-1.06.656-2.064 1.8-2.976 3.295 2.626 10.79 4.465 19.532 4.465 8.743 0 16.237-1.84 19.531-4.465 1.145.912 1.801 1.916 1.801 2.976zm-46.22-16.372c-3.927 0-7.11-2.665-7.11-5.953 0-3.288 3.183-5.954 7.11-5.954 3.927 0 7.111 2.666 7.111 5.954s-3.184 5.953-7.11 5.953z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/peoples.svg b/src/assets/icons/svg/peoples.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..aab852e5[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/peoples.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M95.648 118.762c0 5.035-3.563 9.121-7.979 9.121H7.98c-4.416 0-7.979-4.086-7.979-9.121C0 100.519 15.408 83.47 31.152 76.75c-9.099-6.43-15.216-17.863-15.216-30.987v-9.128c0-20.16 14.293-36.518 31.893-36.518s31.894 16.358 31.894 36.518v9.122c0 13.137-6.123 24.556-15.216 30.993 15.738 6.726 31.141 23.769 31.141 42.012z"/><path d="M106.032 118.252h15.867c3.376 0 6.101-3.125 6.101-6.972 0-13.957-11.787-26.984-23.819-32.123 6.955-4.919 11.638-13.66 11.638-23.704v-6.985c0-15.416-10.928-27.926-24.39-27.926-1.674 0-3.306.193-4.89.561 1.936 4.713 3.018 9.974 3.018 15.526v9.121c0 13.137-3.056 23.111-11.066 30.993 14.842 4.41 27.312 23.42 27.541 41.509z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/phone.svg b/src/assets/icons/svg/phone.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..ab8e8c4e[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/phone.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1567417214476" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2266" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M761.503029 2.90619 242.121921 2.90619c-32.405037 0-58.932204 26.060539-58.932204 58.527998l0 902.302287c0 32.156374 26.217105 58.216913 58.932204 58.216913l519.381108 0c32.344662 0 58.591443-26.060539 58.591443-58.216913L820.094472 61.123103C820.094472 28.966729 793.847691 2.90619 761.503029 2.90619M452.878996 61.123103l98.147344 0c6.780427 0 12.31549 5.536087 12.31549 12.253068 0 6.748704-5.535063 12.253068-12.31549 12.253068l-98.147344 0c-6.779404 0-12.345166-5.504364-12.345166-12.253068C440.532807 66.659189 446.099592 61.123103 452.878996 61.123103M501.641583 980.593398c-29.636994 0-53.987588-23.946388-53.987588-53.677527 0-29.356608 24.039509-53.614082 53.987588-53.614082 29.91738 0 53.987588 23.883967 53.987588 53.614082C555.629171 956.647009 531.559986 980.593398 501.641583 980.593398M766.35657 803.142893c0 16.23373-13.186324 29.107945-29.233811 29.107945l-470.618521 0c-16.35755 0-29.325909-13.186324-29.325909-29.107945L237.178329 163.500794c0-16.232706 13.279445-29.138644 29.325909-29.138644l470.246037 0c16.420995 0 29.357632 13.1853 29.357632 29.138644l0 639.642099L766.35657 803.142893zM766.35657 803.142893" p-id="2267"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/post.svg b/src/assets/icons/svg/post.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..2922c613[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/post.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1566035724641" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3998" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M136.4 434.3h77.7c21.5 0 38.9-17.4 38.9-38.9s-17.4-38.9-38.9-38.9h-77.7c-21.5 0-38.9 17.4-38.9 38.9s17.4 38.9 38.9 38.9zM252.9 628.6c0-21.5-17.4-38.9-38.9-38.9h-77.7c-21.5 0-38.9 17.4-38.9 38.9s17.4 38.9 38.9 38.9H214c21.5-0.1 38.9-17.5 38.9-38.9z" p-id="3999"></path><path d="M874.7 97.5H227c-28.6 0-51.8 23.2-51.8 51.8v194.3h38.9c28.6 0 51.8 23.2 51.8 51.8 0 28.6-23.2 51.8-51.8 51.8h-38.9v129.5h38.9c28.6 0 51.8 23.2 51.8 51.8 0 28.6-23.2 51.8-51.8 51.8h-38.9v194.3c0 28.6 23.2 51.8 51.8 51.8h647.7c28.6 0 51.8-23.2 51.8-51.8V149.3c0-28.6-23.2-51.8-51.8-51.8z m-311.3 723c-15.6 0-146.7-71.6-146.7-91 0-19.4 102-368.6 102-368.6l-83.6-104s-12.3-23.1 24.6-23.1h208.9c36.9 0 18.4 23.1 18.4 23.1l-79 104s102 351.3 102 368.6c0.1 17.3-131 91-146.6 91z m169.2-253.6l-27.9 40.2-74.5-240 103.4 171.7c4.6 7.9 4.2 20.6-1 28.1z" p-id="4000"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/qq.svg b/src/assets/icons/svg/qq.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..ee13d4ec[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/qq.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M18.448 57.545l-.244-.744-.198-.968-.132-.53v-2.181l.236-.859.24-.908.317-.953.428-1.06.561-1.103.794-1.104v-.773l.077-.724.123-.984.34-1.106.313-1.194.25-.548.289-.511.371-.569.405-.423v-2.73l.234-1.407.236-1.633.42-1.955.577-2.035.43-1.118.426-1.217.468-1.135.559-1.216.57-1.332.655-1.247.737-1.331.929-1.33.43-.762.457-.624.995-1.406 1.025-1.403 1.163-1.444 1.246-1.405 1.352-1.384 1.41-1.423 1.708-1.536 1.083-.934 1.322-1.008 1.34-.89 1.448-.855 1.392-.76 1.57-.63 1.667-.775 1.657-.532 1.653-.552 1.787-.548 1.785-.417 1.876-.347L59.128.68l1.879-.245 1.876-.252 2.002-.106h5.912l1.97.243 1.981.231 2.019.207 1.874.441 1.979.413 1.857.475 2.035.53 1.862.646 1.782.738 1.904.78 1.736.853 1.689.95 1.655 1.044 1.425.971.662.548.693.401 1.323 1.1 1.115 1.064 1.112 1.1 1.083 1.214.894 1.178 1.064 1.217.74 1.306.752 1.162.798 1.352.661 1.175 1.113 2.489.546 1.286.428 1.192.428 1.294.384 1.217.267 1.047.347 1.231.607 2.198.388 1.924.253 1.861.217 1.497.342 2.28.077.362.274.41.737 1.18.473.8.42.832.534.892.472 1.07.307 1.093.334 1.2.252 1.232.115.605.106.746v.648l-.106.643v.8l-.192.774-.35 1.5-.403.76-.299.852v.213l.142.264.4.623 1.746 2.53 1.377 1.9.66 1.267.889 1.389.774 1.52.893 1.627.894 1.828 1.006 2.069.567 1.268.518 1.239.447 1.307.44 1.175.336 1.235.342 1.16.432 2.261.343 2.31.235 2.05v2.891l-.158 1.025-.226 1.768-.308 1.59-.48 1.44-.18.588-.336.707-.28.493-.375.607-.33.383-.42.494-.375.4-.401.34-.48.207-.432.207-.355.114h-.543l-.346-.114-.66-.32-.302-.212-.317-.223-.347-.304-.35-.342-.579-.63-.684-.89-.539-.917-.538-.734-.526-.855-.741-1.517-.833-1.579-.098-.055h-.138l-.338.247-.196.415-.326.516-.567 1.533-.856 2.182-1.096 2.626-.824 1.308-.864 1.366-1.027 1.536-1.09 1.503-.557.68-.676.743-1.555 1.497.136.135.21.214.777.446 3.235 1.524 1.41.779 1.347.756 1.332.953 1.187.982.574.443.432.511.445.593.367.643.198.533.242.64.105.554.115.647-.115.433v.44l-.105.454-.242.415-.092.325-.22.394-.587.784-.543.627-.42.47-.35.348-.893.638-1.01.556-1.077.532-1.155.511-1.287.495-.693.207-.608.167-1.496.342-1.545.325-1.552.323-1.689.27-1.74.072-1.785.21h-5.539l-1.998-.114-1.86-.168-2.005-.27-1.99-.209-2.095-.286-2.03-.495-1.981-.374-1.968-.552-2.019-.707-1.98-.585-1.044-.342-.927-.323-.586-.223-.582-.12h-1.647l-1.904-.131-.962-.096-1.24-.135-.795.705-1.085.665-1.471.701-1.628.875-.99.475-1.033.376-2.281.914-1.24.305-1.3.343-1.803.344-1.13.086-1.193.1-1.246.135-1.45.053h-5.926l-3.346-.053-3.25-.321-1.644-.23-1.589-.23-1.546-.227-1.547-.305-1.442-.456-1.434-.325-1.294-.51-1.223-.474-1.142-.533-.99-.583-.984-.71-.336-.343-.44-.415-.334-.362-.3-.417-.278-.415-.215-.42-.311-.89-.109-.46-.138-.51v-.473l.138-.533v-.53l.109-.53v-1.069l.052-.564.259-.647.215-.646.39-.779.286-.3.236-.348.615-.738.49-.38.464-.266.428-.338.676-.21.543-.324.676-.341.77-.227.775-.231.897-.192.85-.11 1.008-.13 1.093-.081.284-.092h.063l.137-.115v-.13l-.2-.266-.58-.27-1.45-1.231-.975-.761-1.127-.967-1.136-1.082-1.181-1.382-1.36-1.558-.508-.843-.672-.87-.58-1.007-.522-1.1-.704-1.047-.459-1.194-.547-1.192-.546-1.33-.397-1.273-.378-1.575-.112-.057h-.115l-.059-.113h-.14l-.23.113-.114.057-.158.264-.057.321-.119.286-.206.477-.664 1.157-.345.701-.546.612-.58.736-.641.816-.677.724-.795.701-.734.658-.814.524-.89.546-.855.325-1.008.247-.99.095h-.233l-.228-.095-.18-.384-.29-.188-.38-.912-.237-.493-.255-.707-.21-.734-.113-.724-.313-1.648-.12-.972v-3.185l.12-2.379.196-1.214.23-1.252.21-1.347.374-1.254.42-1.443.431-1.407.578-1.448.545-1.38.754-1.4.699-1.52.855-1.425 1.006-1.538 1.023-1.382 1.069-1.538.891-1.071 1.142-1.227 1.202-1.237.56-.59.678-.662.985-.836 1.012-.853 1.647-1.446 1.242-.889z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/question.svg b/src/assets/icons/svg/question.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..cf75bd4b[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/question.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1581238842264" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1409" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M512 0C229.233778 0 0 229.233778 0 512s229.233778 512 512 512 512-229.233778 512-512A512 512 0 0 0 512 0z m0 938.666667C276.366222 938.666667 85.333333 747.633778 85.333333 512 85.333333 276.366222 276.366222 85.333333 512 85.333333c235.633778 0 426.666667 191.032889 426.666667 426.666667a426.666667 426.666667 0 0 1-426.666667 426.666667z m0-717.653334a170.666667 170.666667 0 0 0-170.666667 170.666667 42.666667 42.666667 0 0 0 85.333334 0 85.333333 85.333333 0 1 1 85.333333 85.333333 42.666667 42.666667 0 0 0-42.666667 42.666667v111.36a42.666667 42.666667 0 0 0 85.333334 0v-74.24A170.666667 170.666667 0 0 0 512 221.013333z m-42.666667 542.293334a42.666667 42.666667 0 1 0 85.333334 0 42.666667 42.666667 0 0 0-85.333334 0z" p-id="1410"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/radio.svg b/src/assets/icons/svg/radio.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..0cde3452[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/radio.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1575966775973" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="879" xmlns:xlink="http://www.w3.org/1999/xlink" width="81" height="81"><defs><style type="text/css"></style></defs><path d="M507.39346659 71.84873358c241.53533667 0 437.39770766 195.85422109 437.39770767 437.37442191 0 241.53766571-195.86237099 437.38955776-437.39770767 437.38955776-241.50040803 0-437.34997219-195.85189205-437.34997219-437.38955776C70.0434944 267.70295467 265.89189347 71.84873358 507.39346659 71.84873358L507.39346659 71.84873358zM507.39346659 282.81899805c-125.00686734 0-226.37039389 101.38914133-226.37039388 226.41813048 0 125.01268821 101.36352768 226.39717262 226.37039388 226.39717262 125.04295993 0 226.42395136-101.38448441 226.42395136-226.39717262C733.81625401 384.20813938 632.43642653 282.81899805 507.39346659 282.81899805L507.39346659 282.81899805zM507.39346659 120.78172615c-214.46664192 0-388.42047261 173.95150279-388.4204726 388.44026539 0 214.51204949 173.95499463 388.46122325 388.4204726 388.46122325 214.52369237 0 388.46005817-173.94800981 388.46005818-388.46122325C895.85236082 294.73322894 721.91715897 120.78172615 507.39346659 120.78172615z" p-id="880"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/rate.svg b/src/assets/icons/svg/rate.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..aa3b14d7[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/rate.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1577246781606" class="icon" viewBox="0 0 1069 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1098" xmlns:xlink="http://www.w3.org/1999/xlink" width="84.5595703125" height="81"><defs><style type="text/css"></style></defs><path d="M633.72929961 378.02038203l9.49872568 18.68789795 20.78025469 2.79745225 206.61592412 27.33248408a11.46496817 11.46496817 0 0 1 6.6095543 19.47324902l-147.2675168 147.35350284-14.89299345 14.89299345 3.8006376 20.68280244 37.84585956 204.89044571a11.46496817 11.46496817 0 0 1-16.4808914 12.2961788L554.68980898 751.84713388l-18.68789794-9.49299345-18.48726123 9.99171915-183.23885392 99.34968163a11.46496817 11.46496817 0 0 1-16.78471347-11.8662416l32.5433127-205.79617881 3.29617793-20.78598692-15.19108243-14.49172002-151.03375839-143.48407587a11.46496817 11.46496817 0 0 1 6.09936328-19.63949062l205.79617881-32.63503185 20.78598691-3.2961788L428.87898125 380.72038203 518.59235674 192.64331182a11.46496817 11.46496817 0 0 1 20.56815264-0.26369385l94.56879023 185.63503183zM496.64840732 85.52038203l-121.75796162 254.98089229L95.76433145 384.76178369A34.3949045 34.3949045 0 0 0 77.46050938 443.66879023l204.87324901 194.66369385-44.16879023 279.1146498a34.3949045 34.3949045 0 0 0 50.36560489 35.61592325l248.4-134.67898038 251.84522285 128.27579591a34.3949045 34.3949045 0 0 0 49.43694287-36.89426777l-51.30573223-277.85350284 199.73120977-199.90891758a34.3949045 34.3949045 0 0 0-19.82866201-58.40827998l-280.11783428-37.03184736L558.32993633 84.71210205a34.3949045 34.3949045 0 0 0-61.68152901 0.80254775z" p-id="1099"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/redis-list.svg b/src/assets/icons/svg/redis-list.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..98a15b2a[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/redis-list.svg[m
[36m@@ -0,0 +1,2 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1656035183065" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3395" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css">@font-face { font-family: feedback-iconfont; src: url("//at.alicdn.com/t/font_1031158_u69w8yhxdu.woff2?t=1630033759944") format("woff2"), url("//at.alicdn.com/t/font_1031158_u69w8yhxdu.woff?t=1630033759944") format("woff"), url("//at.alicdn.com/t/font_1031158_u69w8yhxdu.ttf?t=1630033759944") format("truetype"); }[m
[32m+[m[32m</style></defs><path d="M958.88 730.06H65.12c-18.28 0-33.12-14.82-33.12-33.12V68.91c0-18.29 14.83-33.12 33.12-33.12h893.77c18.28 0 33.12 14.82 33.12 33.12v628.03c-0.01 18.3-14.84 33.12-33.13 33.12zM98.23 663.83h827.53v-561.8H98.23v561.8z" p-id="3396"></path><path d="M512 954.55c-18.28 0-33.12-14.82-33.12-33.12V733.92c0-18.29 14.83-33.12 33.12-33.12s33.12 14.82 33.12 33.12v187.51c0 18.3-14.84 33.12-33.12 33.12z" p-id="3397"></path><path d="M762.01 988.21H261.99c-18.28 0-33.12-14.82-33.12-33.12 0-18.29 14.83-33.12 33.12-33.12h500.03c18.28 0 33.12 14.82 33.12 33.12-0.01 18.29-14.84 33.12-33.13 33.12zM514.74 578.55c-21.63 0-43.31-3.87-64.21-11.65-45.95-17.13-82.49-51.13-102.86-95.74-5.07-11.08-0.19-24.19 10.89-29.26 11.08-5.09 24.19-0.18 29.26 10.91 15.5 33.88 43.25 59.7 78.14 72.71 34.93 12.99 72.79 11.64 106.66-3.85 33.22-15.17 58.8-42.26 72.03-76.3 4.42-11.37 17.21-17.01 28.57-12.58 11.36 4.42 16.99 17.22 12.57 28.58-17.42 44.82-51.1 80.5-94.82 100.47-24.34 11.12-50.25 16.71-76.23 16.71z" p-id="3398"></path><path d="M325.27 528.78c-1.66 0-3.34-0.18-5.02-0.57-11.88-2.77-19.28-14.63-16.49-26.51l18.84-81c1.34-5.82 5-10.84 10.13-13.92 5.09-3.09 11.3-3.96 17.03-2.41l80.51 21.43c11.79 3.14 18.8 15.23 15.67 27.02-3.15 11.79-15.42 18.75-27.02 15.65l-58.49-15.57-13.69 58.81c-2.37 10.2-11.45 17.07-21.47 17.07zM360.8 351.01c-2.65 0-5.37-0.49-8-1.51-11.36-4.41-16.99-17.21-12.59-28.57 17.4-44.79 51.06-80.47 94.8-100.48 92.15-42.06 201.25-1.39 243.31 90.68 5.07 11.08 0.19 24.19-10.89 29.26-11.13 5.07-24.19 0.17-29.26-10.91-31.97-69.91-114.9-100.82-184.79-68.86-33.22 15.19-58.8 42.28-71.99 76.29-3.41 8.74-11.75 14.1-20.59 14.1z" p-id="3399"></path><path d="M684.68 376.74c-1.47 0-2.95-0.15-4.42-0.44l-81.61-16.68c-11.94-2.45-19.64-14.11-17.21-26.06 2.44-11.96 14.1-19.64 26.04-17.22l59.29 12.12 10.23-59.5c2.05-12 13.52-20.19 25.48-18.01 12.03 2.06 20.09 13.48 18.02 25.5l-14.08 81.96a22.089 22.089 0 0 1-9.29 14.49c-3.7 2.51-8.03 3.84-12.45 3.84z" p-id="3400"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/redis.svg b/src/assets/icons/svg/redis.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..2f1d62df[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/redis.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1605865043777" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="856" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M1023.786667 611.84c-0.426667 9.770667-13.354667 20.693333-39.893334 34.56-54.613333 28.458667-337.749333 144.896-397.994666 176.298667-60.288 31.402667-93.738667 31.104-141.354667 8.32-47.616-22.741333-348.842667-144.469333-403.114667-170.368-27.093333-12.970667-40.917333-23.893333-41.386666-34.218667v103.509333c0 10.325333 14.250667 21.290667 41.386666 34.261334 54.272 25.941333 355.541333 147.626667 403.114667 170.368 47.616 22.784 81.066667 23.082667 141.354667-8.362667 60.245333-31.402667 343.338667-147.797333 397.994666-176.298667 27.776-14.464 40.106667-25.728 40.106667-35.925333v-102.058667l-0.213333-0.085333z m0-168.746667c-0.512 9.770667-13.397333 20.650667-39.893334 34.517334-54.613333 28.458667-337.749333 144.896-397.994666 176.298666-60.288 31.402667-93.738667 31.104-141.354667 8.362667-47.616-22.741333-348.842667-144.469333-403.114667-170.410667-27.093333-12.928-40.917333-23.893333-41.386666-34.176v103.509334c0 10.325333 14.250667 21.248 41.386666 34.218666 54.272 25.941333 355.498667 147.626667 403.114667 170.368 47.616 22.784 81.066667 23.082667 141.354667-8.32 60.245333-31.402667 343.338667-147.84 397.994666-176.298666 27.776-14.506667 40.106667-25.770667 40.106667-35.968v-102.058667l-0.256-0.042667z m0-175.018666c0.469333-10.410667-13.141333-19.541333-40.533334-29.610667-53.248-19.498667-334.634667-131.498667-388.522666-151.253333-53.888-19.712-75.818667-18.901333-139.093334 3.84C392.234667 113.706667 92.629333 231.253333 39.338667 252.074667c-26.666667 10.496-39.68 20.181333-39.253334 30.506666V386.133333c0 10.325333 14.250667 21.248 41.386667 34.218667 54.272 25.941333 355.498667 147.669333 403.114667 170.410667 47.616 22.741333 81.066667 23.04 141.354666-8.362667 60.245333-31.402667 343.338667-147.84 397.994667-176.298667 27.776-14.506667 40.106667-25.770667 40.106667-35.968V268.074667h-0.341334zM366.677333 366.08l237.269334-36.437333-71.68 105.088-165.546667-68.650667z m524.8-94.634667l-140.330666 55.466667-15.232 5.973333-140.245334-55.466666 155.392-61.44 140.373334 55.466666z m-411.989333-101.674666l-22.954667-42.325334 71.594667 27.989334 67.498667-22.101334-18.261334 43.733334 68.778667 25.770666-88.704 9.216-19.882667 47.786667-32.085333-53.290667-102.4-9.216 76.416-27.562666z m-176.768 59.733333c70.058667 0 126.805333 21.973333 126.805333 49.109333s-56.746667 49.152-126.805333 49.152-126.848-22.058667-126.848-49.152c0-27.136 56.789333-49.152 126.848-49.152z" p-id="857"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/row.svg b/src/assets/icons/svg/row.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..07809922[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/row.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1579339929870" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1182" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M152 854.856875h325.7146875V237.715625H134.856875v600q0 6.99375 5.0746875 12.0684375T152 854.856875z m737.143125-17.1421875v-600H546.284375v617.1421875H872q6.99375 0 12.0684375-5.07375t5.0746875-12.0684375z m68.5715625-651.429375V837.715625q0 35.3821875-25.16625 60.5484375T872 923.4284375H152q-35.383125 0-60.5484375-25.1653125T66.284375 837.7146875V186.284375q0-35.3821875 25.16625-60.5484375T152 100.5715625h720q35.383125 0 60.5484375 25.1653125t25.16625 60.5484375z" p-id="1183"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/search.svg b/src/assets/icons/svg/search.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..84233dda[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/search.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M124.884 109.812L94.256 79.166c-.357-.357-.757-.629-1.129-.914a50.366 50.366 0 0 0 8.186-27.59C101.327 22.689 78.656 0 50.67 0 22.685 0 0 22.688 0 50.663c0 27.989 22.685 50.663 50.656 50.663 10.186 0 19.643-3.03 27.6-8.201.286.385.557.771.9 1.114l30.628 30.632a10.633 10.633 0 0 0 7.543 3.129c2.728 0 5.457-1.043 7.543-3.115 4.171-4.157 4.171-10.915.014-15.073M50.671 85.338C31.557 85.338 16 69.78 16 50.663c0-19.102 15.557-34.661 34.67-34.661 19.115 0 34.657 15.559 34.657 34.675 0 19.102-15.557 34.661-34.656 34.661"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/select.svg b/src/assets/icons/svg/select.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..d6283828[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/select.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1575803481213" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="804" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M62 511.97954521C62 263.86590869 263.90681826 62 511.97954521 62s449.97954521 201.825 449.97954521 449.97954521c0 248.19545479-201.90681826 449.97954521-449.97954521 449.97954521C263.90681826 962 62 760.175 62 511.97954521M901.98636348 511.97954521c0-215.24318174-175.00909131-390.41590869-390.00681827-390.41590869-215.03863652 0-389.96590869 175.17272695-389.96590868 390.41590869 0 215.28409131 175.00909131 390.45681826 389.96590868 390.45681826C727.01818174 902.47727305 901.98636348 727.30454521 901.98636348 511.97954521M264.17272695 430.28409131c0-5.76818174 2.12727305-11.51590869 6.64772696-15.87272696 8.71363652-8.75454521 22.88863652-8.75454521 31.725 0l209.4340913 208.22727305L721.45454521 414.53409131c8.75454521-8.71363652 22.97045479-8.71363652 31.90909132 0 8.71363652 8.75454521 8.71363652 22.88863652 0 31.60227304L511.97954521 685.74090869 270.71818174 446.01363653C266.27954521 441.77954521 264.17272695 436.05227305 264.17272695 430.28409131" p-id="805"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/server.svg b/src/assets/icons/svg/server.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..eb287e36[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/server.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1547360688278" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6717" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M890 120H134a70 70 0 0 0-70 70v500a70 70 0 0 0 70 70h756a70 70 0 0 0 70-70V190a70 70 0 0 0-70-70z m-10 520a40 40 0 0 1-40 40H712V448a40 40 0 0 0-80 0v232h-80V368a40 40 0 0 0-80 0v312h-80V512a40 40 0 0 0-80 0v168H184a40 40 0 0 1-40-40V240a40 40 0 0 1 40-40h656a40 40 0 0 1 40 40zM696 824H328a40 40 0 0 0 0 80h368a40 40 0 0 0 0-80z" p-id="6718"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/shopping.svg b/src/assets/icons/svg/shopping.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..87513e7c[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/shopping.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M42.913 101.36c1.642 0 3.198.332 4.667.996a12.28 12.28 0 0 1 3.89 2.772c1.123 1.184 1.987 2.582 2.592 4.193.605 1.612.908 3.318.908 5.118 0 1.8-.303 3.507-.908 5.118-.605 1.611-1.469 3.01-2.593 4.194a13.3 13.3 0 0 1-3.889 2.843 10.582 10.582 0 0 1-4.667 1.066c-1.729 0-3.306-.355-4.732-1.066a13.604 13.604 0 0 1-3.825-2.843c-1.123-1.185-1.988-2.583-2.593-4.194a14.437 14.437 0 0 1-.907-5.118c0-1.8.302-3.506.907-5.118.605-1.61 1.47-3.009 2.593-4.193a12.515 12.515 0 0 1 3.825-2.772c1.426-.664 3.003-.996 4.732-.996zm53.932.285c1.643 0 3.22.331 4.733.995a11.386 11.386 0 0 1 3.889 2.772c1.08 1.185 1.945 2.583 2.593 4.194.648 1.61.972 3.317.972 5.118 0 1.8-.324 3.506-.972 5.117-.648 1.611-1.513 3.01-2.593 4.194a12.253 12.253 0 0 1-3.89 2.843 11 11 0 0 1-4.732 1.066 10.58 10.58 0 0 1-4.667-1.066 12.478 12.478 0 0 1-3.824-2.843c-1.08-1.185-1.945-2.583-2.593-4.194a13.581 13.581 0 0 1-.973-5.117c0-1.801.325-3.507.973-5.118.648-1.611 1.512-3.01 2.593-4.194a11.559 11.559 0 0 1 3.824-2.772 11.212 11.212 0 0 1 4.667-.995zm21.781-80.747c2.42 0 4.3.355 5.64 1.066 1.34.71 2.29 1.587 2.852 2.63a6.427 6.427 0 0 1 .778 3.34c-.044 1.185-.195 2.204-.454 3.057-.26.853-.8 2.606-1.62 5.26a589.268 589.268 0 0 1-2.788 8.743 1236.373 1236.373 0 0 0-3.047 9.453c-.994 3.128-1.75 5.592-2.269 7.393-1.123 3.79-2.55 6.42-4.278 7.89-1.728 1.469-3.846 2.203-6.352 2.203H39.023l1.945 12.795h65.342c4.148 0 6.223 1.943 6.223 5.828 0 1.896-.41 3.53-1.232 4.905-.821 1.374-2.442 2.061-4.862 2.061H38.505c-1.729 0-3.176-.426-4.343-1.28-1.167-.852-2.14-1.966-2.917-3.34a21.277 21.277 0 0 1-1.88-4.478 44.128 44.128 0 0 1-1.102-4.55c-.087-.568-.324-1.942-.713-4.122-.39-2.18-.865-4.904-1.426-8.174l-1.88-10.947c-.692-4.027-1.383-8.079-2.075-12.154-1.642-9.572-3.5-20.234-5.574-31.986H6.87c-1.296 0-2.377-.356-3.24-1.067a9.024 9.024 0 0 1-2.14-2.558 10.416 10.416 0 0 1-1.167-3.2C.108 8.53 0 7.488 0 6.54c0-1.896.583-3.46 1.75-4.69C2.917.615 4.494 0 6.482 0h13.095c1.728 0 3.111.284 4.148.853 1.037.569 1.858 1.28 2.463 2.132a8.548 8.548 0 0 1 1.297 2.701c.26.948.475 1.754.648 2.417.173.758.346 1.825.519 3.199.173 1.374.345 2.772.518 4.193.26 1.706.519 3.507.778 5.403h88.678z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/size.svg b/src/assets/icons/svg/size.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..ddb25b8d[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/size.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M0 54.857h54.796v18.286H36.531V128H18.265V73.143H0V54.857zm127.857-36.571H91.935V128H72.456V18.286H36.534V0h91.326l-.003 18.286z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/skill.svg b/src/assets/icons/svg/skill.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..a3b73121[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/skill.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M31.652 93.206h33.401c1.44 2.418 3.077 4.663 4.93 6.692h-38.33v-6.692zm0-10.586h28.914a44.8 44.8 0 0 1-1.264-6.688h-27.65v6.688zm0-17.27H59.39c.288-2.286.714-4.532 1.34-6.687H31.65v6.687h.003zm53.913 44.84v5.85c0 2.798-2.095 5.075-4.667 5.075h-70.07c-2.576 0-4.663-2.277-4.663-5.075V31.26l23.22-20.96v22.25H17.16v6.688h18.39V6.688h45.348c2.576 0 4.667 2.277 4.667 5.066v20.009c1.987-.675 4.053-1.128 6.17-1.445v-18.56C91.738 5.28 86.874 0 80.902 0H31.15L0 28.118v87.917c0 6.48 4.859 11.759 10.832 11.759h70.07c5.974 0 10.837-5.27 10.837-11.759v-4.41c-2.117-.312-4.183-.765-6.17-1.435h-.004zM23.279 58.667h-7.96v6.688h7.96v-6.688zm-7.956 41.23h7.96v-6.691h-7.96v6.692zm7.956-23.96h-7.96v6.687h7.96v-6.688zm89.718-15.042l-4.896-4.07-12.447 17.613-11.19-9.305-3.762 5.311 16.091 13.38 16.204-22.929zM128 70.978c0-18.632-13.97-33.782-31.147-33.782-17.168 0-31.135 15.155-31.135 33.782 0 18.628 13.97 33.783 31.135 33.783 17.172 0 31.143-15.15 31.143-33.783H128zm-6.17 0c0 14.933-11.203 27.1-24.981 27.1-13.77 0-24.987-12.158-24.987-27.1 0-14.941 11.195-27.099 24.987-27.099 13.778 0 24.982 12.158 24.982 27.1z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/slider.svg b/src/assets/icons/svg/slider.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..fbe4f39f[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/slider.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1577185310368" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1238" xmlns:xlink="http://www.w3.org/1999/xlink" width="81" height="81"><defs><style type="text/css"></style></defs><path d="M951.453125 476.84375H523.671875a131.8359375 131.8359375 0 0 0-254.1796875 0H72.546875v70.3125h196.9453125a131.8359375 131.8359375 0 0 0 254.1796875 0H951.453125z" p-id="1239"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/star.svg b/src/assets/icons/svg/star.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..6cf86e66[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/star.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M70.66 4.328l14.01 29.693c1.088 2.29 3.177 3.882 5.603 4.25l31.347 4.76c6.087.926 8.528 8.756 4.117 13.247L103.05 79.395c-1.75 1.78-2.544 4.352-2.132 6.867l5.352 32.641c1.043 6.337-5.33 11.182-10.778 8.19l-28.039-15.409a7.13 7.13 0 0 0-6.91 0l-28.039 15.41c-5.448 2.99-11.821-1.854-10.777-8.19l5.352-32.642c.415-2.515-.387-5.088-2.136-6.867L2.264 56.278C-2.146 51.787.286 43.957 6.38 43.031l31.343-4.76c2.419-.368 4.51-1.96 5.595-4.25L57.334 4.328c2.728-5.77 10.605-5.77 13.325 0z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/swagger.svg b/src/assets/icons/svg/swagger.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..05d4e7bc[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/swagger.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1566036776944" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6463" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M64 223.995345h168.001164v47.997673c0 26.428509 18.878836 47.997673 41.984 47.997673h140.036654c23.095855 0 41.984-21.569164 41.984-47.997673v-47.997673h504.003491a32.004655 32.004655 0 0 0 0-64.009309H455.996509V111.988364c0-26.428509-18.878836-47.997673-41.984-47.997673H273.985164c-23.095855 0-41.984 21.569164-41.984 47.997673v47.997672H64a32.004655 32.004655 0 0 0 0 64.009309zM288.004655 128h111.997672V256H288.004655V128zM960 479.995345H791.998836v-47.997672c0-26.372655-18.878836-47.997673-41.984-47.997673H609.978182c-23.095855 0-41.984 21.634327-41.984 47.997673v47.997672H64a32.004655 32.004655 0 0 0 0 64.00931h504.003491v47.997672c0 26.363345 18.878836 47.997673 41.984 47.997673h140.036654c23.095855 0 41.984-21.634327 41.984-47.997673v-47.997672h168.001164a32.004655 32.004655 0 1 0-0.009309-64.00931zM735.995345 576H623.997673v-128h111.997672v128zM960 800.293236v-0.288581H455.996509v-47.997673c0-26.363345-18.878836-47.997673-41.984-47.997673H274.050327c-23.105164 0-41.984 21.634327-41.984 47.997673v47.997673H64v0.288581a32.004655 32.004655 0 0 0 0 64.009309c0.986764 0 1.917673-0.195491 2.885818-0.288581h165.115346v47.997672c0 26.363345 18.878836 47.997673 41.984 47.997673h140.036654c23.095855 0 41.984-21.634327 41.984-47.997673v-47.997672h501.108364c0.968145 0.093091 1.899055 0.288582 2.895127 0.288581a32.004655 32.004655 0 1 0-0.009309-64.009309zM400.002327 896H288.004655V768h111.997672v128z" fill="" p-id="6464"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/switch.svg b/src/assets/icons/svg/switch.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..0ba61e38[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/switch.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1576042673958" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1110" xmlns:xlink="http://www.w3.org/1999/xlink" width="81" height="81"><defs><style type="text/css"></style></defs><path d="M692 792H332c-150 0-270-120-270-270s120-270 270-270h360c150 0 270 120 270 270 0 147-120 270-270 270zM332 312c-117 0-210 93-210 210s93 210 210 210h360c117 0 210-93 210-210s-93-210-210-210H332z" p-id="1111"></path><path d="M341 522m-150 0a150 150 0 1 0 300 0 150 150 0 1 0-300 0Z" p-id="1112"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/system.svg b/src/assets/icons/svg/system.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..5992593e[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/system.svg[m
[36m@@ -0,0 +1,2 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1543827724451" class="icon" style="" viewBox="0 0 1084 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10233" xmlns:xlink="http://www.w3.org/1999/xlink" width="211.71875" height="200"><defs><style type="text/css">@font-face { font-family: rbicon; src: url("chrome-extension://dipiagiiohfljcicegpgffpbnjmgjcnf/fonts/rbicon.woff2") format("woff2"); font-weight: normal; font-style: normal; }[m
[32m+[m[32m</style></defs><path d="M1080.09609 434.500756c-4.216302-23.731757-26.9241-47.945376-50.595623-53.185637l-17.648235-4.095836a175.940257 175.940257 0 0 1-101.612877-80.832531 177.807476 177.807476 0 0 1-18.732427-129.801867l5.541425-16.684509c7.10748-23.129428-2.108151-54.992624-20.599646-70.833873 0 0-16.624276-14.094495-63.244529-41.199293-46.800951-26.984332-66.858502-34.513443-66.858502-34.513443-22.76803-8.372371-54.631227-0.361397-71.255503 17.407304l-12.287509 13.251234a173.470708 173.470708 0 0 1-120.465769 48.065842A174.13327 174.13327 0 0 1 421.329029 33.590675L409.583617 20.761071C393.140039 2.99237 361.096144-4.898138 338.267881 3.353767c0 0-20.358715 7.529111-67.099434 34.513443-46.800951 27.34573-63.244529 41.440225-63.244529 41.440225-18.431263 15.66055-27.646894 47.222582-20.539413 70.592941l5.059562 16.865207a178.048407 178.048407 0 0 1-18.672194 129.621169 174.916297 174.916297 0 0 1-102.275439 81.073463l-17.045906 3.854904c-23.310126 5.42096-46.258856 29.333415-50.595623 53.185637 0 0-3.854905 21.382674-3.854905 75.712737 0 54.330062 3.854905 75.712736 3.854905 75.712736 4.216302 23.972688 26.9241 47.945376 50.595623 53.185637l16.624276 3.854905a174.253736 174.253736 0 0 1 102.395904 81.314394c23.310126 40.837896 28.911785 87.337683 18.732427 129.801867l-4.81863 16.443578c-7.10748 23.129428 2.108151 54.992624 20.599646 70.833872 0 0 16.624276 14.094495 63.244529 41.199293 46.800951 27.104798 66.918735 34.513443 66.918735 34.513443 22.707798 8.372371 54.631227 0.361397 71.255503-17.407303l11.624947-12.588673a175.096996 175.096996 0 0 1 242.256662 0.120465l11.624947 12.648906c16.383345 17.708468 48.427239 25.598976 71.255503 17.347071 0 0 20.358715-7.529111 67.159666-34.513443 46.740719-27.104798 63.124063-41.199293 63.124064-41.199293 18.491496-15.600317 27.707127-47.463513 20.599646-70.833873l-5.059562-17.106139a176.723284 176.723284 0 0 1 18.672194-129.139305 176.060722 176.060722 0 0 1 102.395904-81.314394l16.68451-3.854905c23.310126-5.42096 46.258856-29.333415 50.595623-53.185637 0 0 3.854905-21.382674 3.854904-75.712737-0.240932-54.330062-4.095836-75.833202-4.095836-75.833202z m-537.819428 293.334149c-119.261112 0-216.175824-97.336342-216.175824-217.621412a216.657687 216.657687 0 0 1 216.236057-217.320249c119.200879 0 216.115591 97.276109 216.11559 217.56118-0.240932 120.044139-96.974945 217.320248-216.175823 217.320249z" p-id="10234"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/tab.svg b/src/assets/icons/svg/tab.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..b4b48e48[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/tab.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M78.921.052H49.08c-1.865 0-3.198 1.599-3.198 3.464v6.661c0 1.865 1.6 3.464 3.198 3.464h29.84c1.865 0 3.198-1.599 3.198-3.464V3.516C82.385 1.65 80.786.052 78.92.052zm45.563 0H94.642c-1.865 0-3.464 1.599-3.464 3.464v6.661c0 1.865 1.599 3.464 3.464 3.464h29.842c1.865-.266 3.464-1.599 3.464-3.464V3.516c0-1.865-1.599-3.464-3.464-3.464zm0 22.382H40.02c-1.866 0-3.464-1.599-3.464-3.464V3.516c0-1.865-1.599-3.464-3.464-3.464H3.516C1.65.052.052 1.651.052 3.516V124.75c0 1.598 1.599 3.197 3.464 3.197h120.968c1.865 0 3.464-1.599 3.464-3.464V25.898c0-1.865-1.599-3.464-3.464-3.464z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/table.svg b/src/assets/icons/svg/table.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..0e3dc9de[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/table.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M.006.064h127.988v31.104H.006V.064zm0 38.016h38.396v41.472H.006V38.08zm0 48.384h38.396v41.472H.006V86.464zM44.802 38.08h38.396v41.472H44.802V38.08zm0 48.384h38.396v41.472H44.802V86.464zM89.598 38.08h38.396v41.472H89.598zm0 48.384h38.396v41.472H89.598z"/><path d="M.006.064h127.988v31.104H.006V.064zm0 38.016h38.396v41.472H.006V38.08zm0 48.384h38.396v41.472H.006V86.464zM44.802 38.08h38.396v41.472H44.802V38.08zm0 48.384h38.396v41.472H44.802V86.464zM89.598 38.08h38.396v41.472H89.598zm0 48.384h38.396v41.472H89.598z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/textarea.svg b/src/assets/icons/svg/textarea.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..2709f292[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/textarea.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1575802855098" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2984" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M896 160H128c-35.2 0-64 28.8-64 64v576c0 35.2 28.8 64 64 64h768c35.2 0 64-28.8 64-64V224c0-35.2-28.8-64-64-64z m0 608c0 16-12.8 32-32 32H160c-19.2 0-32-12.8-32-32V256c0-16 12.8-32 32-32h704c19.2 0 32 12.8 32 32v512z" p-id="2985"></path><path d="M224 288c-19.2 0-32 12.8-32 32v256c0 16 12.8 32 32 32s32-12.8 32-32V320c0-16-12.8-32-32-32z m608 480c19.2 0 32-12.8 32-32V608L704 768h128z" p-id="2986"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/theme.svg b/src/assets/icons/svg/theme.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..5982a2f7[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/theme.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M125.5 36.984L95.336 2.83C93.735 1.018 91.565 0 89.3 0c-2.263 0-4.433 1.018-6.033 2.83l-3.786 4.286c-1.6 1.812-3.77 2.83-6.032 2.831H54.553c-2.263 0-4.434-1.018-6.033-2.83L44.734 2.83C43.134 1.018 40.964 0 38.701 0c-2.263 0-4.434 1.018-6.034 2.83L2.5 36.984C.9 38.796 0 41.254 0 43.815c0 2.562.899 5.02 2.5 6.831L14.565 64.31c2.178 2.468 5.367 3.403 8.33 2.444 1.35-.435 2.709.592 2.709 2.18v49.407c0 5.313 3.84 9.66 8.532 9.66h59.726c4.693 0 8.532-4.347 8.532-9.66V68.934c0-1.59 1.36-2.616 2.71-2.181 2.962.96 6.15.024 8.329-2.444L125.5 50.646c1.6-1.811 2.499-4.269 2.499-6.83 0-2.563-.899-5.02-2.5-6.832z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/time-range.svg b/src/assets/icons/svg/time-range.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..13c1202b[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/time-range.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1579774825624" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1248" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M498.595712 482.290351 345.420077 482.290351l0 57.307194 210.477712 0L555.897789 274.196942l-57.301054 0L498.596735 482.290351zM498.595712 482.290351" p-id="1249"></path><path d="M577.685002 644.98478l379.879913 0 0 57.302077L577.685002 702.286858 577.685002 644.98478 577.685002 644.98478zM577.685002 644.98478" p-id="1250"></path><path d="M577.685002 773.764795l379.879913 0 0 57.307194L577.685002 831.071989 577.685002 773.764795 577.685002 773.764795zM577.685002 773.764795" p-id="1251"></path><path d="M577.685002 902.549927l379.879913 0 0 57.307194L577.685002 959.857121 577.685002 902.549927 577.685002 902.549927zM577.685002 902.549927" p-id="1252"></path><path d="M102.523001 382.290823c4.450359 2.615571 9.470699 3.954055 14.530948 3.954055 2.969635 0 5.952572-0.461511 8.836249-1.394766l190.809767-61.886489c15.052834-4.882194 23.297612-21.040199 18.415418-36.08894-4.882194-15.052834-21.040199-23.297612-36.093033-18.415418L175.676092 308.458257c15.994276-26.115797 35.170011-50.537 57.370639-72.743768 73.767074-73.767074 171.845857-114.388237 276.16783-114.388237 104.32095 0 202.39564 40.622186 276.16169 114.388237s114.393353 171.845857 114.393353 276.16783c0 26.427906-2.615571 52.449559-7.709589 77.780481l58.302871 0c4.464685-25.499767 6.708795-51.470255 6.708795-77.780481 0-60.449767-11.845793-119.102608-35.204803-174.336584-22.559808-53.334719-54.850236-101.226472-95.968725-142.349055-41.122583-41.122583-89.017406-73.408917-142.348032-95.968725C628.317169 75.866898 569.659211 64.021106 509.215584 64.021106c-60.448744 0-119.106702 11.845793-174.336584 35.207873-53.334719 22.559808-101.230566 54.846142-142.349055 95.968725-23.980157 23.980157-44.934398 50.278103-62.727647 78.601172l-20.738323-105.655342c-3.043313-15.527648-18.105357-25.642007-33.631982-22.599717-15.527648 3.048429-25.64303 18.105357-22.599717 33.637098l36.102243 183.932126C90.51348 371.153158 95.460142 378.13313 102.523001 382.290823L102.523001 382.290823zM102.523001 382.290823" p-id="1253"></path><path d="M126.020158 587.9416 67.768453 587.9416c5.759167 33.679054 15.368012 66.544579 28.789697 98.278327 22.559808 53.333696 54.850236 101.225449 95.971795 142.348032 41.122583 41.122583 89.014336 73.408917 142.349055 95.968725 54.112432 22.88829 111.517863 34.71157 170.668031 35.18229L505.547031 902.395408c-102.94972-0.941442-199.594851-41.445948-272.499277-114.349351C177.545672 732.543975 140.810003 663.275355 126.020158 587.9416L126.020158 587.9416zM126.020158 587.9416" p-id="1254"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/time.svg b/src/assets/icons/svg/time.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..b376e32a[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/time.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1577099827399" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1008" xmlns:xlink="http://www.w3.org/1999/xlink" width="81" height="81"><defs><style type="text/css"></style></defs><path d="M520 559h204c17.673 0 32 14.327 32 32 0 17.673-14.327 32-32 32H488c-17.673 0-32-14.327-32-32 0-0.167 0.001-0.334 0.004-0.5a32.65 32.65 0 0 1-0.004-0.5V277c0-17.673 14.327-32 32-32 17.673 0 32 14.327 32 32v282z m-8 401C264.576 960 64 759.424 64 512S264.576 64 512 64s448 200.576 448 448-200.576 448-448 448z m0-64c212.077 0 384-171.923 384-384S724.077 128 512 128 128 299.923 128 512s171.923 384 384 384z" p-id="1009"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/tool.svg b/src/assets/icons/svg/tool.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..48e0e357[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/tool.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1553828490559" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1684" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M898.831744 900.517641 103.816972 900.517641c-36.002982 0-65.363683-29.286-65.363683-65.313541l0-554.949184c0-36.041868 29.361725-65.326844 65.363683-65.326844l795.015795 0c36.002982 0 65.198931 29.284977 65.198931 65.326844l0 554.949184C964.030675 871.231641 934.834726 900.517641 898.831744 900.517641L898.831744 900.517641zM103.816972 255.593236c-13.576203 0-24.711821 11.085476-24.711821 24.662703l0 554.949184c0 13.576203 11.136641 24.662703 24.711821 24.662703l795.015795 0c13.577227 0 24.547069-11.086499 24.547069-24.662703l0-554.949184c0-13.577227-10.970866-24.662703-24.547069-24.662703L103.816972 255.593236 103.816972 255.593236zM664.346245 251.774257c-11.161201 0-20.332071-9.080819-20.332071-20.332071l0-101.278661c0-13.576203-11.047614-24.623817-24.699542-24.623817L383.181611 105.539708c-13.576203 0-24.712845 11.04659-24.712845 24.623817l0 101.278661c0 11.252275-9.041934 20.332071-20.332071 20.332071-11.20111 0-20.319791-9.080819-20.319791-20.332071l0-101.278661c0-35.989679 29.323862-65.275679 65.364707-65.275679l236.133022 0c36.06745 0 65.402569 29.284977 65.402569 65.275679l0 101.278661C684.717202 242.694461 675.636383 251.774257 664.346245 251.774257L664.346245 251.774257zM413.233044 521.725502 75.694471 521.725502c-11.163247 0-20.333094-9.117658-20.333094-20.35663 0-11.252275 9.169847-20.332071 20.333094-20.332071l337.538573 0c11.277858 0 20.319791 9.080819 20.319791 20.332071C433.552835 512.607844 424.510902 521.725502 413.233044 521.725502L413.233044 521.725502zM912.894018 521.725502 575.367725 521.725502c-11.213389 0-20.332071-9.117658-20.332071-20.35663 0-11.252275 9.118682-20.332071 20.332071-20.332071l337.526293 0c11.290137 0 20.332071 9.080819 20.332071 20.332071C933.226089 512.607844 924.184155 521.725502 912.894018 521.725502L912.894018 521.725502zM557.56322 634.217552 445.085496 634.217552c-11.213389 0-20.332071-9.079796-20.332071-20.331048l0-168.763658c0-11.251252 9.118682-20.332071 20.332071-20.332071l112.478747 0c11.290137 0 20.370956 9.080819 20.370956 20.332071l0 168.763658C577.934177 625.137757 568.853357 634.217552 557.56322 634.217552L557.56322 634.217552zM465.417567 593.514525l71.827909 0L537.245476 465.454918l-71.827909 0L465.417567 593.514525 465.417567 593.514525z" p-id="1685"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/tree-table.svg b/src/assets/icons/svg/tree-table.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..8aafdb82[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/tree-table.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M44.8 0h79.543C126.78 0 128 1.422 128 4.267v23.466c0 2.845-1.219 4.267-3.657 4.267H44.8c-2.438 0-3.657-1.422-3.657-4.267V4.267C41.143 1.422 42.362 0 44.8 0zm22.857 48h56.686c2.438 0 3.657 1.422 3.657 4.267v23.466c0 2.845-1.219 4.267-3.657 4.267H67.657C65.22 80 64 78.578 64 75.733V52.267C64 49.422 65.219 48 67.657 48zm0 48h56.686c2.438 0 3.657 1.422 3.657 4.267v23.466c0 2.845-1.219 4.267-3.657 4.267H67.657C65.22 128 64 126.578 64 123.733v-23.466C64 97.422 65.219 96 67.657 96zM50.286 68.267c2.02 0 3.657-1.91 3.657-4.267 0-2.356-1.638-4.267-3.657-4.267H17.37V32h6.4c2.02 0 3.658-1.91 3.658-4.267V4.267C27.429 1.91 25.79 0 23.77 0H3.657C1.637 0 0 1.91 0 4.267v23.466C0 30.09 1.637 32 3.657 32h6.4v80c0 2.356 1.638 4.267 3.657 4.267h36.572c2.02 0 3.657-1.91 3.657-4.267 0-2.356-1.638-4.267-3.657-4.267H17.37V68.267h32.915z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/tree.svg b/src/assets/icons/svg/tree.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..dd4b7dd2[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/tree.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M126.713 90.023c.858.985 1.287 2.134 1.287 3.447v29.553c0 1.423-.429 2.6-1.287 3.53-.858.93-1.907 1.395-3.146 1.395H97.824c-1.145 0-2.146-.465-3.004-1.395-.858-.93-1.287-2.107-1.287-3.53V93.47c0-.875.19-1.696.572-2.462.382-.766.906-1.368 1.573-1.806a3.84 3.84 0 0 1 2.146-.657h9.725V69.007a3.84 3.84 0 0 0-.43-1.806 3.569 3.569 0 0 0-1.143-1.313 2.714 2.714 0 0 0-1.573-.492h-36.47v23.149h9.725c1.144 0 2.145.492 3.004 1.478.858.985 1.287 2.134 1.287 3.447v29.553c0 .876-.191 1.696-.573 2.463-.38.766-.905 1.368-1.573 1.806a3.84 3.84 0 0 1-2.145.656H51.915a3.84 3.84 0 0 1-2.145-.656c-.668-.438-1.216-1.04-1.645-1.806a4.96 4.96 0 0 1-.644-2.463V93.47c0-1.313.43-2.462 1.288-3.447.858-.986 1.907-1.478 3.146-1.478h9.582v-23.15h-37.9c-.953 0-1.74.356-2.359 1.068-.62.711-.93 1.56-.93 2.544v19.538h9.726c1.239 0 2.264.492 3.074 1.478.81.985 1.216 2.134 1.216 3.447v29.553c0 1.423-.405 2.6-1.216 3.53-.81.93-1.835 1.395-3.074 1.395H4.29c-.476 0-.93-.082-1.358-.246a4.1 4.1 0 0 1-1.144-.657 4.658 4.658 0 0 1-.93-1.067 5.186 5.186 0 0 1-.643-1.395 5.566 5.566 0 0 1-.215-1.56V93.47c0-.437.048-.875.143-1.313a3.95 3.95 0 0 1 .429-1.15c.19-.328.429-.656.715-.984.286-.329.572-.602.858-.821.286-.22.62-.383 1.001-.493.382-.11.763-.164 1.144-.164h9.726V61.619c0-.985.31-1.833.93-2.544.619-.712 1.358-1.068 2.216-1.068h44.335V39.62h-9.582c-1.24 0-2.288-.492-3.146-1.477a5.09 5.09 0 0 1-1.287-3.448V5.14c0-1.423.429-2.627 1.287-3.612.858-.985 1.907-1.477 3.146-1.477h25.743c.763 0 1.478.246 2.145.739a5.17 5.17 0 0 1 1.573 1.888c.382.766.573 1.587.573 2.462v29.553c0 1.313-.43 2.463-1.287 3.448-.859.985-1.86 1.477-3.004 1.477h-9.725v18.389h42.762c.954 0 1.74.355 2.36 1.067.62.711.93 1.56.93 2.545v26.925h9.582c1.239 0 2.288.492 3.146 1.478z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/upload.svg b/src/assets/icons/svg/upload.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..bae49c0a[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/upload.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1577540289643" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7922" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M530.944 458.24l4.8 3.456 122.176 106.816a32 32 0 0 1-37.44 51.584l-4.672-3.392L546.56 556.16v280.704a32 32 0 0 1-26.24 31.488l-5.76 0.512a32 32 0 0 1-31.424-26.24l-0.512-5.76-0.064-280.704-69.12 60.48a32 32 0 0 1-40.96 0.896l-4.16-3.968a32 32 0 0 1-0.96-40.96l4.032-4.16 122.176-106.816a32 32 0 0 1 37.312-3.456zM497.92 128c128.128 0 239.168 82.304 275.52 199.04 123.968 11.264 221.312 113.088 221.312 237.44 0 128.128-103.68 232.96-234.88 238.272h-5.888l-35.52 0.192a32 32 0 0 1-0.192-64l35.264-0.128 4.672-0.064c96.384-3.84 172.544-80.896 172.544-174.272 0-96.128-80.512-174.464-179.584-174.464h-1.984a32 32 0 0 1-32-25.28C695.872 264.96 604.736 192 497.92 192 381.824 192 285.44 277.76 274.816 388.48a32 32 0 0 1-28.352 28.8c-83.968 9.152-147.84 78.208-147.84 159.552l0.192 7.936c3.84 85.76 77.056 154.112 166.592 154.112h45.632a32 32 0 0 1 0 64h-45.632C142.016 802.944 40.32 708.032 34.88 586.88l-0.192-9.28c0-106.88 76.352-197.184 179.968-219.904C239.488 226.112 357.76 128 497.856 128z" p-id="7923"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/user.svg b/src/assets/icons/svg/user.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..0ba0716a[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/user.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="130" height="130" xmlns="http://www.w3.org/2000/svg"><path d="M63.444 64.996c20.633 0 37.359-14.308 37.359-31.953 0-17.649-16.726-31.952-37.359-31.952-20.631 0-37.36 14.303-37.358 31.952 0 17.645 16.727 31.953 37.359 31.953zM80.57 75.65H49.434c-26.652 0-48.26 18.477-48.26 41.27v2.664c0 9.316 21.608 9.325 48.26 9.325H80.57c26.649 0 48.256-.344 48.256-9.325v-2.663c0-22.794-21.605-41.271-48.256-41.271z" stroke="#979797"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/validCode.svg b/src/assets/icons/svg/validCode.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..cfb10214[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/validCode.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<?xml version="1.0" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg t="1569580729849" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1939" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M513.3 958.5c-142.2 0-397.9-222.1-401.6-440.5V268c1.7-39.6 31.7-72.3 71.1-77.3 49-4.6 97.1-16.5 142.7-35.3 47.8-14 91.9-38.3 129.4-71.1 30.3-24.4 72.9-26.3 105.3-4.6 39.9 30.7 83.8 55.9 130.5 74.6 48.6 14.7 98.2 25.9 148.4 33.7 38.5 7.6 67.1 40.3 69.5 79.5 3.3 84.9 2.5 169.9-2.6 254.7-33.7 281.6-253.7 436.4-392.7 436.3z m-0.1-813.7c-7.2-0.2-14.3 2-20 6.4-39.7 35.2-86.8 61.1-137.7 75.7-46.8 19.2-96.2 31-146.6 35.2-11 3.2-18.8 13-19.5 24.4v230.1c3.5 180.3 223.3 361 323.9 361s287.3-120.2 317.6-360.5c7.3-142.7 0-228.6 0-229.6-1.3-13.3-11-24.3-24-27.3-49.6-7.7-98.6-19-146.5-33.7-46.3-19.5-89.7-45.3-129-76.7-5.8-3.8-12.7-5.5-19.5-4.9l1.3-0.1z" fill="#C6CCDA" p-id="1940"></path><path d="M750.1 428L490.7 673.2c-11.7 11.1-29.5 12.9-43.1 4.2l-6.8-5.8-141.2-149.4c-9.3-9.3-12.7-22.9-9-35.5 3.8-12.6 14.1-22.1 27-24.8 12.9-2.7 26.1 1.9 34.6 11.9L469 597.5l233.7-221c14.6-12.8 36.8-11.6 49.9 2.7 13.2 14.2 11.5 35.3-2.5 48.8" fill="#C6CCDA" p-id="1941"></path></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/wechat.svg b/src/assets/icons/svg/wechat.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..c586e551[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/wechat.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="110" xmlns="http://www.w3.org/2000/svg"><path d="M86.635 33.334c1.467 0 2.917.113 4.358.283C87.078 14.392 67.58.111 45.321.111 20.44.111.055 17.987.055 40.687c0 13.104 6.781 23.863 18.115 32.209l-4.527 14.352 15.82-8.364c5.666 1.182 10.207 2.395 15.858 2.395 1.42 0 2.829-.073 4.227-.189-.886-3.19-1.398-6.53-1.398-9.996 0-20.845 16.98-37.76 38.485-37.76zm-24.34-12.936c3.407 0 5.665 2.363 5.665 5.954 0 3.576-2.258 5.97-5.666 5.97-3.392 0-6.795-2.395-6.795-5.97 0-3.591 3.403-5.954 6.795-5.954zM30.616 32.323c-3.393 0-6.818-2.395-6.818-5.971 0-3.591 3.425-5.954 6.818-5.954 3.392 0 5.65 2.363 5.65 5.954 0 3.576-2.258 5.97-5.65 5.97z"/><path d="M127.945 70.52c0-19.075-18.108-34.623-38.448-34.623-21.537 0-38.5 15.548-38.5 34.623 0 19.108 16.963 34.622 38.5 34.622 4.508 0 9.058-1.2 13.584-2.395l12.414 7.167-3.404-11.923c9.087-7.184 15.854-16.712 15.854-27.471zm-50.928-5.97c-2.254 0-4.53-2.362-4.53-4.773 0-2.378 2.276-4.771 4.53-4.771 3.422 0 5.665 2.393 5.665 4.771 0 2.41-2.243 4.773-5.665 4.773zm24.897 0c-2.24 0-4.498-2.362-4.498-4.773 0-2.378 2.258-4.771 4.498-4.771 3.392 0 5.665 2.393 5.665 4.771 0 2.41-2.273 4.773-5.665 4.773z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/icons/svg/zip.svg b/src/assets/icons/svg/zip.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..f806fc48[m
[1m--- /dev/null[m
[1m+++ b/src/assets/icons/svg/zip.svg[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m<svg width="128" height="128" xmlns="http://www.w3.org/2000/svg"><path d="M78.527 116.793c.178.008.348.024.527.024h40.233c4.711-.005 8.53-3.677 8.534-8.21V18.895c-.004-4.532-3.823-8.204-8.534-8.209H79.054c-.179 0-.353.016-.527.024V0L0 10.082v107.406l78.527 10.342v-11.037zm0-101.362c.174-.024.348-.052.527-.052h40.233c2.018 0 3.659 1.578 3.659 3.52v89.713c-.003 1.942-1.64 3.517-3.659 3.519H79.054c-.179 0-.353-.028-.527-.052V15.431zM30.262 75.757l-18.721-.46V72.37l11.3-16.673v-.148l-10.266.164v-4.51l17.504-.44v3.264L18.696 70.76v.144l11.566.176v4.678zm9.419.231l-5.823-.144V50.671l5.823-.144v25.461zm22.255-11.632c-2.168 1.922-5.353 2.76-9.02 2.736-.702.004-1.402-.04-2.097-.131v9.303l-5.997-.148V50.743c1.852-.352 4.473-.647 8.218-.743 3.838-.096 6.608.539 8.48 1.913 1.807 1.306 3.032 3.5 3.032 6.112s-.926 4.833-2.612 6.331h-.004zM53.36 54.45c-.856-.01-1.71.083-2.541.275v7.682c.523.116 1.167.152 2.06.152 3.301-.004 5.36-1.614 5.36-4.314 0-2.425-1.772-3.843-4.875-3.791l-.004-.004zm39.847-37.066h9.564v3.795h-9.564v-3.795zm-9.568 5.68h9.564v3.8h-9.564v-3.8zm9.568 6.216h9.564v3.799h-9.564V29.28zm0 12h9.564v3.794h-9.564V41.28zm-9.568-6.096h9.564v3.795h-9.564v-3.795zm9.472 47.064c2.512 0 4.921-.96 6.697-2.67 1.776-1.708 2.773-4.026 2.772-6.442l-1.748-15.263c0-5.033-2.492-9.112-7.725-9.112-5.232 0-7.72 4.079-7.72 9.112l-1.752 15.263c-.001 2.417.996 4.735 2.773 6.444 1.777 1.71 4.187 2.669 6.7 2.668h.003zm-3.135-16.75h6.27v12.743h-6.27V65.5z"/></svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/images/1.jpg b/src/assets/images/1.jpg[m
[1mnew file mode 100644[m
[1mindex 00000000..38e61e27[m
Binary files /dev/null and b/src/assets/images/1.jpg differ
[1mdiff --git a/src/assets/images/2.jpg b/src/assets/images/2.jpg[m
[1mnew file mode 100644[m
[1mindex 00000000..4f42b948[m
Binary files /dev/null and b/src/assets/images/2.jpg differ
[1mdiff --git a/src/assets/images/3.jpg b/src/assets/images/3.jpg[m
[1mnew file mode 100644[m
[1mindex 00000000..01ee1427[m
Binary files /dev/null and b/src/assets/images/3.jpg differ
[1mdiff --git a/src/assets/images/dark.svg b/src/assets/images/dark.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..f646bd7e[m
[1m--- /dev/null[m
[1m+++ b/src/assets/images/dark.svg[m
[36m@@ -0,0 +1,39 @@[m
[32m+[m[32m<?xml version="1.0" encoding="UTF-8"?>[m
[32m+[m[32m<svg width="52px" height="45px" viewBox="0 0 52 45" version="1.1"[m[41m [m
[32m+[m[32m    xmlns="http://www.w3.org/2000/svg"[m[41m [m
[32m+[m[32m    xmlns:xlink="http://www.w3.org/1999/xlink">[m
[32m+[m[32m    <defs>[m
[32m+[m[32m        <filter x="-9.4%" y="-6.2%" width="118.8%" height="122.5%" filterUnits="objectBoundingBox" id="filter-1">[m
[32m+[m[32m            <feOffset dx="0" dy="1" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>[m
[32m+[m[32m            <feGaussianBlur stdDeviation="1" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>[m
[32m+[m[32m            <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.15 0" type="matrix" in="shadowBlurOuter1" result="shadowMatrixOuter1"></feColorMatrix>[m
[32m+[m[32m            <feMerge>[m
[32m+[m[32m                <feMergeNode in="shadowMatrixOuter1"></feMergeNode>[m
[32m+[m[32m                <feMergeNode in="SourceGraphic"></feMergeNode>[m
[32m+[m[32m            </feMerge>[m
[32m+[m[32m        </filter>[m
[32m+[m[32m        <rect id="path-2" x="0" y="0" width="48" height="40" rx="4"></rect>[m
[32m+[m[32m        <filter x="-4.2%" y="-2.5%" width="108.3%" height="110.0%" filterUnits="objectBoundingBox" id="filter-4">[m
[32m+[m[32m            <feOffset dx="0" dy="1" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>[m
[32m+[m[32m            <feGaussianBlur stdDeviation="0.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>[m
[32m+[m[32m            <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.1 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>[m
[32m+[m[32m        </filter>[m
[32m+[m[32m    </defs>[m
[32m+[m[32m    <g id="é…ç½®é¢æ¿" width="48" height="40" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">[m
[32m+[m[32m        <g id="setting-copy-2" width="48" height="40" transform="translate(-1190.000000, -136.000000)">[m
[32m+[m[32m            <g id="Group-8" width="48" height="40" transform="translate(1167.000000, 0.000000)">[m
[32m+[m[32m                <g id="Group-5-Copy-5" filter="url(#filter-1)" transform="translate(25.000000, 137.000000)">[m
[32m+[m[32m                    <mask id="mask-3" fill="white">[m
[32m+[m[32m                        <use xlink:href="#path-2"></use>[m
[32m+[m[32m                    </mask>[m
[32m+[m[32m                    <g id="Rectangle-18">[m
[32m+[m[32m                        <use fill="black" fill-opacity="1" filter="url(#filter-4)" xlink:href="#path-2"></use>[m
[32m+[m[32m                        <use fill="#F0F2F5" fill-rule="evenodd" xlink:href="#path-2"></use>[m
[32m+[m[32m                    </g>[m
[32m+[m[32m                    <rect id="Rectangle-11" fill="#FFFFFF" mask="url(#mask-3)" x="0" y="0" width="48" height="10"></rect>[m
[32m+[m[32m                    <rect id="Rectangle-18" fill="#303648" mask="url(#mask-3)" x="0" y="0" width="16" height="40"></rect>[m
[32m+[m[32m                </g>[m
[32m+[m[32m            </g>[m
[32m+[m[32m        </g>[m
[32m+[m[32m    </g>[m
[32m+[m[32m</svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/images/light.svg b/src/assets/images/light.svg[m
[1mnew file mode 100644[m
[1mindex 00000000..ab7cc088[m
[1m--- /dev/null[m
[1m+++ b/src/assets/images/light.svg[m
[36m@@ -0,0 +1,39 @@[m
[32m+[m[32m<?xml version="1.0" encoding="UTF-8"?>[m
[32m+[m[32m<svg width="52px" height="45px" viewBox="0 0 52 45" version="1.1"[m[41m [m
[32m+[m[32m    xmlns="http://www.w3.org/2000/svg"[m[41m [m
[32m+[m[32m    xmlns:xlink="http://www.w3.org/1999/xlink">[m
[32m+[m[32m    <defs>[m
[32m+[m[32m        <filter x="-9.4%" y="-6.2%" width="118.8%" height="122.5%" filterUnits="objectBoundingBox" id="filter-1">[m
[32m+[m[32m            <feOffset dx="0" dy="1" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>[m
[32m+[m[32m            <feGaussianBlur stdDeviation="1" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>[m
[32m+[m[32m            <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.15 0" type="matrix" in="shadowBlurOuter1" result="shadowMatrixOuter1"></feColorMatrix>[m
[32m+[m[32m            <feMerge>[m
[32m+[m[32m                <feMergeNode in="shadowMatrixOuter1"></feMergeNode>[m
[32m+[m[32m                <feMergeNode in="SourceGraphic"></feMergeNode>[m
[32m+[m[32m            </feMerge>[m
[32m+[m[32m        </filter>[m
[32m+[m[32m        <rect id="path-2" x="0" y="0" width="48" height="40" rx="4"></rect>[m
[32m+[m[32m        <filter x="-4.2%" y="-2.5%" width="108.3%" height="110.0%" filterUnits="objectBoundingBox" id="filter-4">[m
[32m+[m[32m            <feOffset dx="0" dy="1" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset>[m
[32m+[m[32m            <feGaussianBlur stdDeviation="0.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur>[m
[32m+[m[32m            <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.1 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix>[m
[32m+[m[32m        </filter>[m
[32m+[m[32m    </defs>[m
[32m+[m[32m    <g id="é…ç½®é¢æ¿" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">[m
[32m+[m[32m        <g id="setting-copy-2" transform="translate(-1254.000000, -136.000000)">[m
[32m+[m[32m            <g id="Group-8" transform="translate(1167.000000, 0.000000)">[m
[32m+[m[32m                <g id="Group-5" filter="url(#filter-1)" transform="translate(89.000000, 137.000000)">[m
[32m+[m[32m                    <mask id="mask-3" fill="white">[m
[32m+[m[32m                        <use xlink:href="#path-2"></use>[m
[32m+[m[32m                    </mask>[m
[32m+[m[32m                    <g id="Rectangle-18">[m
[32m+[m[32m                        <use fill="black" fill-opacity="1" filter="url(#filter-4)" xlink:href="#path-2"></use>[m
[32m+[m[32m                        <use fill="#F0F2F5" fill-rule="evenodd" xlink:href="#path-2"></use>[m
[32m+[m[32m                    </g>[m
[32m+[m[32m                    <rect id="Rectangle-18" fill="#FFFFFF" mask="url(#mask-3)" x="0" y="0" width="16" height="40"></rect>[m
[32m+[m[32m                    <rect id="Rectangle-11" fill="#FFFFFF" mask="url(#mask-3)" x="0" y="0" width="48" height="10"></rect>[m
[32m+[m[32m                </g>[m
[32m+[m[32m            </g>[m
[32m+[m[32m        </g>[m
[32m+[m[32m    </g>[m
[32m+[m[32m</svg>[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/images/login-background.jpg b/src/assets/images/login-background.jpg[m
[1mnew file mode 100644[m
[1mindex 00000000..8a89eb82[m
Binary files /dev/null and b/src/assets/images/login-background.jpg differ
[1mdiff --git a/src/assets/images/login-background1.jpg b/src/assets/images/login-background1.jpg[m
[1mnew file mode 100644[m
[1mindex 00000000..75f659d6[m
Binary files /dev/null and b/src/assets/images/login-background1.jpg differ
[1mdiff --git a/src/assets/images/pay.png b/src/assets/images/pay.png[m
[1mnew file mode 100644[m
[1mindex 00000000..bb8b9672[m
Binary files /dev/null and b/src/assets/images/pay.png differ
[1mdiff --git a/src/assets/images/profile.jpg b/src/assets/images/profile.jpg[m
[1mnew file mode 100644[m
[1mindex 00000000..b3a940b2[m
Binary files /dev/null and b/src/assets/images/profile.jpg differ
[1mdiff --git a/src/assets/logo/logo.png b/src/assets/logo/logo.png[m
[1mnew file mode 100644[m
[1mindex 00000000..025d7dcd[m
Binary files /dev/null and b/src/assets/logo/logo.png differ
[1mdiff --git a/src/assets/logo/logo.pngbak b/src/assets/logo/logo.pngbak[m
[1mnew file mode 100644[m
[1mindex 00000000..e2637602[m
Binary files /dev/null and b/src/assets/logo/logo.pngbak differ
[1mdiff --git a/src/assets/styles/btn.scss b/src/assets/styles/btn.scss[m
[1mnew file mode 100644[m
[1mindex 00000000..3590d8d2[m
[1m--- /dev/null[m
[1m+++ b/src/assets/styles/btn.scss[m
[36m@@ -0,0 +1,99 @@[m
[32m+[m[32m@import './variables.module.scss';[m
[32m+[m
[32m+[m[32m@mixin colorBtn($color) {[m
[32m+[m[32m  background: $color;[m
[32m+[m
[32m+[m[32m  &:hover {[m
[32m+[m[32m    color: $color;[m
[32m+[m
[32m+[m[32m    &:before,[m
[32m+[m[32m    &:after {[m
[32m+[m[32m      background: $color;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.blue-btn {[m
[32m+[m[32m  @include colorBtn($blue)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.light-blue-btn {[m
[32m+[m[32m  @include colorBtn($light-blue)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.red-btn {[m
[32m+[m[32m  @include colorBtn($red)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.pink-btn {[m
[32m+[m[32m  @include colorBtn($pink)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.green-btn {[m
[32m+[m[32m  @include colorBtn($green)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.tiffany-btn {[m
[32m+[m[32m  @include colorBtn($tiffany)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.yellow-btn {[m
[32m+[m[32m  @include colorBtn($yellow)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.pan-btn {[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m  color: #fff;[m
[32m+[m[32m  padding: 14px 36px;[m
[32m+[m[32m  border-radius: 8px;[m
[32m+[m[32m  border: none;[m
[32m+[m[32m  outline: none;[m
[32m+[m[32m  transition: 600ms ease all;[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m  display: inline-block;[m
[32m+[m
[32m+[m[32m  &:hover {[m
[32m+[m[32m    background: #fff;[m
[32m+[m
[32m+[m[32m    &:before,[m
[32m+[m[32m    &:after {[m
[32m+[m[32m      width: 100%;[m
[32m+[m[32m      transition: 600ms ease all;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  &:before,[m
[32m+[m[32m  &:after {[m
[32m+[m[32m    content: '';[m
[32m+[m[32m    position: absolute;[m
[32m+[m[32m    top: 0;[m
[32m+[m[32m    right: 0;[m
[32m+[m[32m    height: 2px;[m
[32m+[m[32m    width: 0;[m
[32m+[m[32m    transition: 400ms ease all;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  &::after {[m
[32m+[m[32m    right: inherit;[m
[32m+[m[32m    top: inherit;[m
[32m+[m[32m    left: 0;[m
[32m+[m[32m    bottom: 0;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.custom-button {[m
[32m+[m[32m  display: inline-block;[m
[32m+[m[32m  line-height: 1;[m
[32m+[m[32m  white-space: nowrap;[m
[32m+[m[32m  cursor: pointer;[m
[32m+[m[32m  background: #fff;[m
[32m+[m[32m  color: #fff;[m
[32m+[m[32m  -webkit-appearance: none;[m
[32m+[m[32m  text-align: center;[m
[32m+[m[32m  box-sizing: border-box;[m
[32m+[m[32m  outline: 0;[m
[32m+[m[32m  margin: 0;[m
[32m+[m[32m  padding: 10px 15px;[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m  border-radius: 4px;[m
[32m+[m[32m}[m
[1mdiff --git a/src/assets/styles/element-ui.scss b/src/assets/styles/element-ui.scss[m
[1mnew file mode 100644[m
[1mindex 00000000..0f175f25[m
[1m--- /dev/null[m
[1m+++ b/src/assets/styles/element-ui.scss[m
[36m@@ -0,0 +1,96 @@[m
[32m+[m[32m// cover some element-ui styles[m
[32m+[m
[32m+[m[32m.el-breadcrumb__inner,[m
[32m+[m[32m.el-breadcrumb__inner a {[m
[32m+[m[32m  font-weight: 400 !important;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.el-upload {[m
[32m+[m[32m  input[type="file"] {[m
[32m+[m[32m    display: none !important;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.el-upload__input {[m
[32m+[m[32m  display: none;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.cell {[m
[32m+[m[32m  .el-tag {[m
[32m+[m[32m    margin-right: 0px;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.small-padding {[m
[32m+[m[32m  .cell {[m
[32m+[m[32m    padding-left: 5px;[m
[32m+[m[32m    padding-right: 5px;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.fixed-width {[m
[32m+[m[32m  .el-button--mini {[m
[32m+[m[32m    padding: 7px 10px;[m
[32m+[m[32m    width: 60px;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.status-col {[m
[32m+[m[32m  .cell {[m
[32m+[m[32m    padding: 0 10px;[m
[32m+[m[32m    text-align: center;[m
[32m+[m
[32m+[m[32m    .el-tag {[m
[32m+[m[32m      margin-right: 0px;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// to fixed https://github.com/ElemeFE/element/issues/2461[m
[32m+[m[32m.el-dialog {[m
[32m+[m[32m  transform: none;[m
[32m+[m[32m  left: 0;[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m  margin: 0 auto;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// refine element ui upload[m
[32m+[m[32m.upload-container {[m
[32m+[m[32m  .el-upload {[m
[32m+[m[32m    width: 100%;[m
[32m+[m
[32m+[m[32m    .el-upload-dragger {[m
[32m+[m[32m      width: 100%;[m
[32m+[m[32m      height: 200px;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// dropdown[m
[32m+[m[32m.el-dropdown-menu {[m
[32m+[m[32m  a {[m
[32m+[m[32m    display: block[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// fix date-picker ui bug in filter-item[m
[32m+[m[32m.el-range-editor.el-input__inner {[m
[32m+[m[32m  display: inline-flex !important;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// to fix el-date-picker css style[m
[32m+[m[32m.el-range-separator {[m
[32m+[m[32m  box-sizing: content-box;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.el-menu--collapse[m
[32m+[m[32m  > div[m
[32m+[m[32m  > .el-submenu[m
[32m+[m[32m  > .el-submenu__title[m
[32m+[m[32m  .el-submenu__icon-arrow {[m
[32m+[m[32m  display: none;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.el-dropdown .el-dropdown-link{[m
[32m+[m[32m  color: var(--el-color-primary) !important;[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/src/assets/styles/index.scss b/src/assets/styles/index.scss[m
[1mnew file mode 100644[m
[1mindex 00000000..2b8dca52[m
[1m--- /dev/null[m
[1m+++ b/src/assets/styles/index.scss[m
[36m@@ -0,0 +1,184 @@[m
[32m+[m[32m@import './variables.module.scss';[m
[32m+[m[32m@import './mixin.scss';[m
[32m+[m[32m@import './transition.scss';[m
[32m+[m[32m@import './element-ui.scss';[m
[32m+[m[32m@import './sidebar.scss';[m
[32m+[m[32m@import './btn.scss';[m
[32m+[m[32m@import './ruoyi.scss';[m
[32m+[m
[32m+[m[32mbody {[m
[32m+[m[32m  height: 100%;[m
[32m+[m[32m  margin: 0;[m
[32m+[m[32m  -moz-osx-font-smoothing: grayscale;[m
[32m+[m[32m  -webkit-font-smoothing: antialiased;[m
[32m+[m[32m  text-rendering: optimizeLegibility;[m
[32m+[m[32m  font-family: Helvetica Neue, Helvetica, PingFang SC, Hiragino Sans GB, Microsoft YaHei, Arial, sans-serif;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mlabel {[m
[32m+[m[32m  font-weight: 700;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mhtml {[m
[32m+[m[32m  height: 100%;[m
[32m+[m[32m  box-sizing: border-box;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m#app {[m
[32m+[m[32m  height: 100%;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m*,[m
[32m+[m[32m*:before,[m
[32m+[m[32m*:after {[m
[32m+[m[32m  box-sizing: inherit;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.no-padding {[m
[32m+[m[32m  padding: 0px !important;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.padding-content {[m
[32m+[m[32m  padding: 4px 0;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32ma:focus,[m
[32m+[m[32ma:active {[m
[32m+[m[32m  outline: none;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32ma,[m
[32m+[m[32ma:focus,[m
[32m+[m[32ma:hover {[m
[32m+[m[32m  cursor: pointer;[m
[32m+[m[32m  color: inherit;[m
[32m+[m[32m  text-decoration: none;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mdiv:focus {[m
[32m+[m[32m  outline: none;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.fr {[m
[32m+[m[32m  float: right;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.fl {[m
[32m+[m[32m  float: left;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.pr-5 {[m
[32m+[m[32m  padding-right: 5px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.pl-5 {[m
[32m+[m[32m  padding-left: 5px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.block {[m
[32m+[m[32m  display: block;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.pointer {[m
[32m+[m[32m  cursor: pointer;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.inlineBlock {[m
[32m+[m[32m  display: block;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.clearfix {[m
[32m+[m[32m  &:after {[m
[32m+[m[32m    visibility: hidden;[m
[32m+[m[32m    display: block;[m
[32m+[m[32m    font-size: 0;[m
[32m+[m[32m    content: " ";[m
[32m+[m[32m    clear: both;[m
[32m+[m[32m    height: 0;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32maside {[m
[32m+[m[32m  background: #eef1f6;[m
[32m+[m[32m  padding: 8px 24px;[m
[32m+[m[32m  margin-bottom: 20px;[m
[32m+[m[32m  border-radius: 2px;[m
[32m+[m[32m  display: block;[m
[32m+[m[32m  line-height: 32px;[m
[32m+[m[32m  font-size: 16px;[m
[32m+[m[32m  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif;[m
[32m+[m[32m  color: #2c3e50;[m
[32m+[m[32m  -webkit-font-smoothing: antialiased;[m
[32m+[m[32m  -moz-osx-font-smoothing: grayscale;[m
[32m+[m
[32m+[m[32m  a {[m
[32m+[m[32m    color: #337ab7;[m
[32m+[m[32m    cursor: pointer;[m
[32m+[m
[32m+[m[32m    &:hover {[m
[32m+[m[32m      color: rgb(32, 160, 255);[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m//main-containerå…¨å±€æ ·å¼[m
[32m+[m[32m.app-container {[m
[32m+[m[32m  padding: 20px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.components-container {[m
[32m+[m[32m  margin: 30px 50px;[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.pagination-container {[m
[32m+[m[32m  margin-top: 30px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.text-center {[m
[32m+[m[32m  text-align: center[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.sub-navbar {[m
[32m+[m[32m  height: 50px;[m
[32m+[m[32m  line-height: 50px;[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m  text-align: right;[m
[32m+[m[32m  padding-right: 20px;[m
[32m+[m[32m  transition: 600ms ease position;[m
[32m+[m[32m  background: linear-gradient(90deg, rgba(32, 182, 249, 1) 0%, rgba(32, 182, 249, 1) 0%, rgba(33, 120, 241, 1) 100%, rgba(33, 120, 241, 1) 100%);[m
[32m+[m
[32m+[m[32m  .subtitle {[m
[32m+[m[32m    font-size: 20px;[m
[32m+[m[32m    color: #fff;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  &.draft {[m
[32m+[m[32m    background: #d0d0d0;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  &.deleted {[m
[32m+[m[32m    background: #d0d0d0;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.link-type,[m
[32m+[m[32m.link-type:focus {[m
[32m+[m[32m  color: #337ab7;[m
[32m+[m[32m  cursor: pointer;[m
[32m+[m
[32m+[m[32m  &:hover {[m
[32m+[m[32m    color: rgb(32, 160, 255);[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.filter-container {[m
[32m+[m[32m  padding-bottom: 10px;[m
[32m+[m
[32m+[m[32m  .filter-item {[m
[32m+[m[32m    display: inline-block;[m
[32m+[m[32m    vertical-align: middle;[m
[32m+[m[32m    margin-bottom: 10px;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[1mdiff --git a/src/assets/styles/mixin.scss b/src/assets/styles/mixin.scss[m
[1mnew file mode 100644[m
[1mindex 00000000..06fa0612[m
[1m--- /dev/null[m
[1m+++ b/src/assets/styles/mixin.scss[m
[36m@@ -0,0 +1,66 @@[m
[32m+[m[32m@mixin clearfix {[m
[32m+[m[32m  &:after {[m
[32m+[m[32m    content: "";[m
[32m+[m[32m    display: table;[m
[32m+[m[32m    clear: both;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m@mixin scrollBar {[m
[32m+[m[32m  &::-webkit-scrollbar-track-piece {[m
[32m+[m[32m    background: #d3dce6;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  &::-webkit-scrollbar {[m
[32m+[m[32m    width: 6px;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  &::-webkit-scrollbar-thumb {[m
[32m+[m[32m    background: #99a9bf;[m
[32m+[m[32m    border-radius: 20px;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m@mixin relative {[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m  height: 100%;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m@mixin pct($pct) {[m
[32m+[m[32m  width: #{$pct};[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m  margin: 0 auto;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m@mixin triangle($width, $height, $color, $direction) {[m
[32m+[m[32m  $width: $width/2;[m
[32m+[m[32m  $color-border-style: $height solid $color;[m
[32m+[m[32m  $transparent-border-style: $width solid transparent;[m
[32m+[m[32m  height: 0;[m
[32m+[m[32m  width: 0;[m
[32m+[m
[32m+[m[32m  @if $direction==up {[m
[32m+[m[32m    border-bottom: $color-border-style;[m
[32m+[m[32m    border-left: $transparent-border-style;[m
[32m+[m[32m    border-right: $transparent-border-style;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  @else if $direction==right {[m
[32m+[m[32m    border-left: $color-border-style;[m
[32m+[m[32m    border-top: $transparent-border-style;[m
[32m+[m[32m    border-bottom: $transparent-border-style;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  @else if $direction==down {[m
[32m+[m[32m    border-top: $color-border-style;[m
[32m+[m[32m    border-left: $transparent-border-style;[m
[32m+[m[32m    border-right: $transparent-border-style;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  @else if $direction==left {[m
[32m+[m[32m    border-right: $color-border-style;[m
[32m+[m[32m    border-top: $transparent-border-style;[m
[32m+[m[32m    border-bottom: $transparent-border-style;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[1mdiff --git a/src/assets/styles/ruoyi.scss b/src/assets/styles/ruoyi.scss[m
[1mnew file mode 100644[m
[1mindex 00000000..155fdb75[m
[1m--- /dev/null[m
[1m+++ b/src/assets/styles/ruoyi.scss[m
[36m@@ -0,0 +1,281 @@[m
[32m+[m[32m /**[m
[32m+[m[32m * é€šç”¨cssæ ·å¼å¸ƒå±€å¤„ç†[m
[32m+[m[32m * Copyright (c) 2019 ruoyi[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m /** åŸºç¡€é€šç”¨ **/[m
[32m+[m[32m.pt5 {[m
[32m+[m	[32mpadding-top: 5px;[m
[32m+[m[32m}[m
[32m+[m[32m.pr5 {[m
[32m+[m	[32mpadding-right: 5px;[m
[32m+[m[32m}[m
[32m+[m[32m.pb5 {[m
[32m+[m	[32mpadding-bottom: 5px;[m
[32m+[m[32m}[m
[32m+[m[32m.mt5 {[m
[32m+[m	[32mmargin-top: 5px;[m
[32m+[m[32m}[m
[32m+[m[32m.mr5 {[m
[32m+[m	[32mmargin-right: 5px;[m
[32m+[m[32m}[m
[32m+[m[32m.mb5 {[m
[32m+[m	[32mmargin-bottom: 5px;[m
[32m+[m[32m}[m
[32m+[m[32m.mb8 {[m
[32m+[m	[32mmargin-bottom: 8px;[m
[32m+[m[32m}[m
[32m+[m[32m.ml5 {[m
[32m+[m	[32mmargin-left: 5px;[m
[32m+[m[32m}[m
[32m+[m[32m.mt10 {[m
[32m+[m	[32mmargin-top: 10px;[m
[32m+[m[32m}[m
[32m+[m[32m.mr10 {[m
[32m+[m	[32mmargin-right: 10px;[m
[32m+[m[32m}[m
[32m+[m[32m.mb10 {[m
[32m+[m	[32mmargin-bottom: 10px;[m
[32m+[m[32m}[m
[32m+[m[32m.ml10 {[m
[32m+[m	[32mmargin-left: 10px;[m
[32m+[m[32m}[m
[32m+[m[32m.mt20 {[m
[32m+[m	[32mmargin-top: 20px;[m
[32m+[m[32m}[m
[32m+[m[32m.mr20 {[m
[32m+[m	[32mmargin-right: 20px;[m
[32m+[m[32m}[m
[32m+[m[32m.mb20 {[m
[32m+[m	[32mmargin-bottom: 20px;[m
[32m+[m[32m}[m
[32m+[m[32m.ml20 {[m
[32m+[m	[32mmargin-left: 20px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.h1, .h2, .h3, .h4, .h5, .h6, h1, h2, h3, h4, h5, h6 {[m
[32m+[m	[32mfont-family: inherit;[m
[32m+[m	[32mfont-weight: 500;[m
[32m+[m	[32mline-height: 1.1;[m
[32m+[m	[32mcolor: inherit;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.el-form .el-form-item__label {[m
[32m+[m	[32mfont-weight: 700;[m
[32m+[m[32m}[m
[32m+[m[32m.el-dialog:not(.is-fullscreen) {[m
[32m+[m	[32mmargin-top: 6vh !important;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.el-dialog.scrollbar .el-dialog__body {[m
[32m+[m	[32moverflow: auto;[m
[32m+[m	[32moverflow-x: hidden;[m
[32m+[m	[32mmax-height: 70vh;[m
[32m+[m	[32mpadding: 10px 20px 0;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.el-table {[m
[32m+[m	[32m.el-table__header-wrapper, .el-table__fixed-header-wrapper {[m
[32m+[m		[32mth {[m
[32m+[m			[32mword-break: break-word;[m
[32m+[m			[32mbackground-color: #f8f8f9 !important;[m
[32m+[m			[32mcolor: #515a6e;[m
[32m+[m			[32mheight: 40px !important;[m
[32m+[m			[32mfont-size: 13px;[m
[32m+[m		[32m}[m
[32m+[m	[32m}[m
[32m+[m	[32m.el-table__body-wrapper {[m
[32m+[m		[32m.el-button [class*="el-icon-"] + span {[m
[32m+[m			[32mmargin-left: 1px;[m
[32m+[m		[32m}[m
[32m+[m	[32m}[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** è¡¨å•å¸ƒå±€ **/[m
[32m+[m[32m.form-header {[m
[32m+[m[32m    font-size:15px;[m
[32m+[m	[32mcolor:#6379bb;[m
[32m+[m	[32mborder-bottom:1px solid #ddd;[m
[32m+[m	[32mmargin:8px 10px 25px 10px;[m
[32m+[m	[32mpadding-bottom:5px[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** è¡¨æ ¼å¸ƒå±€ **/[m
[32m+[m[32m.pagination-container {[m
[32m+[m[32m    position: relative;[m
[32m+[m[32m    height: 25px;[m
[32m+[m[32m    margin-bottom: 10px;[m
[32m+[m[32m    margin-top: 15px;[m
[32m+[m[32m    padding: 10px 20px !important;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.el-dialog .pagination-container {[m
[32m+[m[32m    position: static !important;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* tree border */[m
[32m+[m[32m.tree-border {[m
[32m+[m[32m    margin-top: 5px;[m
[32m+[m[32m    border: 1px solid #e5e6e7;[m
[32m+[m[32m    background: #FFFFFF none;[m
[32m+[m[32m    border-radius:4px;[m
[32m+[m[32m    width: 100%;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.pagination-container .el-pagination {[m
[32m+[m	[32mright: 0;[m
[32m+[m	[32mposition: absolute;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m@media ( max-width : 768px) {[m
[32m+[m[32m  .pagination-container .el-pagination > .el-pagination__jump {[m
[32m+[m[32m    display: none !important;[m
[32m+[m[32m  }[m
[32m+[m[32m  .pagination-container .el-pagination > .el-pagination__sizes {[m
[32m+[m[32m    display: none !important;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.el-table .fixed-width .el-button--small {[m
[32m+[m	[32mpadding-left: 0;[m
[32m+[m	[32mpadding-right: 0;[m
[32m+[m	[32mwidth: inherit;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** è¡¨æ ¼æ›´å¤šæ“ä½œä¸‹æ‹‰æ ·å¼ */[m
[32m+[m[32m.el-table .el-dropdown-link {[m
[32m+[m	[32mcursor: pointer;[m
[32m+[m	[32mcolor: #409EFF;[m
[32m+[m	[32mmargin-left: 10px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.el-table .el-dropdown, .el-icon-arrow-down {[m
[32m+[m	[32mfont-size: 12px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.el-tree-node__content > .el-checkbox {[m
[32m+[m	[32mmargin-right: 8px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.list-group-striped > .list-group-item {[m
[32m+[m	[32mborder-left: 0;[m
[32m+[m	[32mborder-right: 0;[m
[32m+[m	[32mborder-radius: 0;[m
[32m+[m	[32mpadding-left: 0;[m
[32m+[m	[32mpadding-right: 0;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.list-group {[m
[32m+[m	[32mpadding-left: 0px;[m
[32m+[m	[32mlist-style: none;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.list-group-item {[m
[32m+[m	[32mborder-bottom: 1px solid #e7eaec;[m
[32m+[m	[32mborder-top: 1px solid #e7eaec;[m
[32m+[m	[32mmargin-bottom: -1px;[m
[32m+[m	[32mpadding: 11px 0px;[m
[32m+[m	[32mfont-size: 13px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.pull-right {[m
[32m+[m	[32mfloat: right !important;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.el-card__header {[m
[32m+[m	[32mpadding: 14px 15px 7px !important;[m
[32m+[m	[32mmin-height: 40px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.el-card__body {[m
[32m+[m	[32mpadding: 15px 20px 20px 20px !important;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.card-box {[m
[32m+[m	[32mpadding-right: 15px;[m
[32m+[m	[32mpadding-left: 15px;[m
[32m+[m	[32mmargin-bottom: 10px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* button color */[m
[32m+[m[32m.el-button--cyan.is-active,[m
[32m+[m[32m.el-button--cyan:active {[m
[32m+[m[32m  background: #20B2AA;[m
[32m+[m[32m  border-color: #20B2AA;[m
[32m+[m[32m  color: #FFFFFF;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.el-button--cyan:focus,[m
[32m+[m[32m.el-button--cyan:hover {[m
[32m+[m[32m  background: #48D1CC;[m
[32m+[m[32m  border-color: #48D1CC;[m
[32m+[m[32m  color: #FFFFFF;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.el-button--cyan {[m
[32m+[m[32m  background-color: #20B2AA;[m
[32m+[m[32m  border-color: #20B2AA;[m
[32m+[m[32m  color: #FFFFFF;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* text color */[m
[32m+[m[32m.text-navy {[m
[32m+[m	[32mcolor: #1ab394;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.text-primary {[m
[32m+[m	[32mcolor: inherit;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.text-success {[m
[32m+[m	[32mcolor: #1c84c6;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.text-info {[m
[32m+[m	[32mcolor: #23c6c8;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.text-warning {[m
[32m+[m	[32mcolor: #f8ac59;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.text-danger {[m
[32m+[m	[32mcolor: #ed5565;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.text-muted {[m
[32m+[m	[32mcolor: #888888;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* image */[m
[32m+[m[32m.img-circle {[m
[32m+[m	[32mborder-radius: 50%;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.img-lg {[m
[32m+[m	[32mwidth: 120px;[m
[32m+[m	[32mheight: 120px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.avatar-upload-preview {[m
[32m+[m	[32mposition: absolute;[m
[32m+[m	[32mtop: 50%;[m
[32m+[m	[32mtransform: translate(50%, -50%);[m
[32m+[m	[32mwidth: 200px;[m
[32m+[m	[32mheight: 200px;[m
[32m+[m	[32mborder-radius: 50%;[m
[32m+[m	[32mbox-shadow: 0 0 4px #ccc;[m
[32m+[m	[32moverflow: hidden;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* æ‹–æ‹½åˆ—æ ·å¼ */[m
[32m+[m[32m.sortable-ghost{[m
[32m+[m	[32mopacity: .8;[m
[32m+[m	[32mcolor: #fff!important;[m
[32m+[m	[32mbackground: #42b983!important;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* è¡¨æ ¼å³ä¾§å·¥å…·æ æ ·å¼ */[m
[32m+[m[32m.top-right-btn {[m
[32m+[m	[32mmargin-left: auto;[m
[32m+[m[32m}[m
[1mdiff --git a/src/assets/styles/sidebar.scss b/src/assets/styles/sidebar.scss[m
[1mnew file mode 100644[m
[1mindex 00000000..8b3c472d[m
[1m--- /dev/null[m
[1m+++ b/src/assets/styles/sidebar.scss[m
[36m@@ -0,0 +1,238 @@[m
[32m+[m[32m#app {[m
[32m+[m
[32m+[m[32m  .main-container {[m
[32m+[m[32m    height: 100%;[m
[32m+[m[32m    transition: margin-left .28s;[m
[32m+[m[32m    margin-left: $base-sidebar-width;[m
[32m+[m[32m    position: relative;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  .sidebarHide {[m
[32m+[m[32m    margin-left: 0!important;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  .sidebar-container {[m
[32m+[m[32m    -webkit-transition: width .28s;[m
[32m+[m[32m    transition: width 0.28s;[m
[32m+[m[32m    width: $base-sidebar-width !important;[m
[32m+[m[32m    background-color: $base-menu-background;[m
[32m+[m[32m    height: 100%;[m
[32m+[m[32m    position: fixed;[m
[32m+[m[32m    font-size: 0px;[m
[32m+[m[32m    top: 0;[m
[32m+[m[32m    bottom: 0;[m
[32m+[m[32m    left: 0;[m
[32m+[m[32m    z-index: 1001;[m
[32m+[m[32m    overflow: hidden;[m
[32m+[m[32m    -webkit-box-shadow: 2px 0 6px rgba(0,21,41,.35);[m
[32m+[m[32m    box-shadow: 2px 0 6px rgba(0,21,41,.35);[m
[32m+[m
[32m+[m[32m    // reset element-ui css[m
[32m+[m[32m    .horizontal-collapse-transition {[m
[32m+[m[32m      transition: 0s width ease-in-out, 0s padding-left ease-in-out, 0s padding-right ease-in-out;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    .scrollbar-wrapper {[m
[32m+[m[32m      overflow-x: hidden !important;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    .el-scrollbar__bar.is-vertical {[m
[32m+[m[32m      right: 0px;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    .el-scrollbar {[m
[32m+[m[32m      height: 100%;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    &.has-logo {[m
[32m+[m[32m      .el-scrollbar {[m
[32m+[m[32m        height: calc(100% - 50px);[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    .is-horizontal {[m
[32m+[m[32m      display: none;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    a {[m
[32m+[m[32m      display: inline-block;[m
[32m+[m[32m      width: 100%;[m
[32m+[m[32m      overflow: hidden;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    .svg-icon {[m
[32m+[m[32m      margin-right: 16px;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    .el-menu {[m
[32m+[m[32m      border: none;[m
[32m+[m[32m      height: 100%;[m
[32m+[m[32m      width: 100% !important;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    .el-menu-item, .menu-title {[m
[32m+[m[32m      overflow: hidden !important;[m
[32m+[m[32m      text-overflow: ellipsis !important;[m
[32m+[m[32m      white-space: nowrap !important;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    .el-menu-item .el-menu-tooltip__trigger {[m
[32m+[m[32m      display: inline-block !important;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    // menu hover[m
[32m+[m[32m    .sub-menu-title-noDropdown,[m
[32m+[m[32m    .el-sub-menu__title {[m
[32m+[m[32m      &:hover {[m
[32m+[m[32m        background-color: rgba(0, 0, 0, 0.06) !important;[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    & .theme-dark .is-active > .el-sub-menu__title {[m
[32m+[m[32m      color: $base-menu-color-active !important;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    & .nest-menu .el-sub-menu>.el-sub-menu__title,[m
[32m+[m[32m    & .el-sub-menu .el-menu-item {[m
[32m+[m[32m      min-width: $base-sidebar-width !important;[m
[32m+[m
[32m+[m[32m      &:hover {[m
[32m+[m[32m        background-color: rgba(0, 0, 0, 0.06) !important;[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    & .theme-dark .nest-menu .el-sub-menu>.el-sub-menu__title,[m
[32m+[m[32m    & .theme-dark .el-sub-menu .el-menu-item {[m
[32m+[m[32m      background-color: $base-sub-menu-background !important;[m
[32m+[m
[32m+[m[32m      &:hover {[m
[32m+[m[32m        background-color: $base-sub-menu-hover !important;[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  .hideSidebar {[m
[32m+[m[32m    .sidebar-container {[m
[32m+[m[32m      width: 54px !important;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    .main-container {[m
[32m+[m[32m      margin-left: 54px;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    .sub-menu-title-noDropdown {[m
[32m+[m[32m      padding: 0 !important;[m
[32m+[m[32m      position: relative;[m
[32m+[m
[32m+[m[32m      .el-tooltip {[m
[32m+[m[32m        padding: 0 !important;[m
[32m+[m
[32m+[m[32m        .svg-icon {[m
[32m+[m[32m          margin-left: 20px;[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    .el-sub-menu {[m
[32m+[m[32m      overflow: hidden;[m
[32m+[m
[32m+[m[32m      &>.el-sub-menu__title {[m
[32m+[m[32m        padding: 0 !important;[m
[32m+[m
[32m+[m[32m        .svg-icon {[m
[32m+[m[32m          margin-left: 20px;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    .el-menu--collapse {[m
[32m+[m[32m      .el-sub-menu {[m
[32m+[m[32m        &>.el-sub-menu__title {[m
[32m+[m[32m          &>span {[m
[32m+[m[32m            height: 0;[m
[32m+[m[32m            width: 0;[m
[32m+[m[32m            overflow: hidden;[m
[32m+[m[32m            visibility: hidden;[m
[32m+[m[32m            display: inline-block;[m
[32m+[m[32m          }[m
[32m+[m[32m          &>i {[m
[32m+[m[32m            height: 0;[m
[32m+[m[32m            width: 0;[m
[32m+[m[32m            overflow: hidden;[m
[32m+[m[32m            visibility: hidden;[m
[32m+[m[32m            display: inline-block;[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  .el-menu--collapse .el-menu .el-sub-menu {[m
[32m+[m[32m    min-width: $base-sidebar-width !important;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // mobile responsive[m
[32m+[m[32m  .mobile {[m
[32m+[m[32m    .main-container {[m
[32m+[m[32m      margin-left: 0px;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    .sidebar-container {[m
[32m+[m[32m      transition: transform .28s;[m
[32m+[m[32m      width: $base-sidebar-width !important;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    &.hideSidebar {[m
[32m+[m[32m      .sidebar-container {[m
[32m+[m[32m        pointer-events: none;[m
[32m+[m[32m        transition-duration: 0.3s;[m
[32m+[m[32m        transform: translate3d(-$base-sidebar-width, 0, 0);[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  .withoutAnimation {[m
[32m+[m
[32m+[m[32m    .main-container,[m
[32m+[m[32m    .sidebar-container {[m
[32m+[m[32m      transition: none;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// when menu collapsed[m
[32m+[m[32m.el-menu--vertical {[m
[32m+[m[32m  &>.el-menu {[m
[32m+[m[32m    .svg-icon {[m
[32m+[m[32m      margin-right: 16px;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  .nest-menu .el-sub-menu>.el-sub-menu__title,[m
[32m+[m[32m  .el-menu-item {[m
[32m+[m[32m    &:hover {[m
[32m+[m[32m      // you can use $sub-menuHover[m
[32m+[m[32m      background-color: rgba(0, 0, 0, 0.06) !important;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // the scroll bar appears when the sub-menu is too long[m
[32m+[m[32m  >.el-menu--popup {[m
[32m+[m[32m    max-height: 100vh;[m
[32m+[m[32m    overflow-y: auto;[m
[32m+[m
[32m+[m[32m    &::-webkit-scrollbar-track-piece {[m
[32m+[m[32m      background: #d3dce6;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    &::-webkit-scrollbar {[m
[32m+[m[32m      width: 6px;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    &::-webkit-scrollbar-thumb {[m
[32m+[m[32m      background: #99a9bf;[m
[32m+[m[32m      border-radius: 20px;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[1mdiff --git a/src/assets/styles/transition.scss b/src/assets/styles/transition.scss[m
[1mnew file mode 100644[m
[1mindex 00000000..073f8c6c[m
[1m--- /dev/null[m
[1m+++ b/src/assets/styles/transition.scss[m
[36m@@ -0,0 +1,49 @@[m
[32m+[m[32m// global transition css[m
[32m+[m
[32m+[m[32m/* fade */[m
[32m+[m[32m.fade-enter-active,[m
[32m+[m[32m.fade-leave-active {[m
[32m+[m[32m  transition: opacity 0.28s;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.fade-enter,[m
[32m+[m[32m.fade-leave-active {[m
[32m+[m[32m  opacity: 0;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* fade-transform */[m
[32m+[m[32m.fade-transform--move,[m
[32m+[m[32m.fade-transform-leave-active,[m
[32m+[m[32m.fade-transform-enter-active {[m
[32m+[m[32m  transition: all .5s;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.fade-transform-enter {[m
[32m+[m[32m  opacity: 0;[m
[32m+[m[32m  transform: translateX(-30px);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.fade-transform-leave-to {[m
[32m+[m[32m  opacity: 0;[m
[32m+[m[32m  transform: translateX(30px);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* breadcrumb transition */[m
[32m+[m[32m.breadcrumb-enter-active,[m
[32m+[m[32m.breadcrumb-leave-active {[m
[32m+[m[32m  transition: all .5s;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.breadcrumb-enter,[m
[32m+[m[32m.breadcrumb-leave-active {[m
[32m+[m[32m  opacity: 0;[m
[32m+[m[32m  transform: translateX(20px);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.breadcrumb-move {[m
[32m+[m[32m  transition: all .5s;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.breadcrumb-leave-active {[m
[32m+[m[32m  position: absolute;[m
[32m+[m[32m}[m
[1mdiff --git a/src/assets/styles/variables.module.scss b/src/assets/styles/variables.module.scss[m
[1mnew file mode 100644[m
[1mindex 00000000..3dbfaa7c[m
[1m--- /dev/null[m
[1m+++ b/src/assets/styles/variables.module.scss[m
[36m@@ -0,0 +1,65 @@[m
[32m+[m[32m// base color[m
[32m+[m[32m$blue: #324157;[m
[32m+[m[32m$light-blue: #3A71A8;[m
[32m+[m[32m$red: #C03639;[m
[32m+[m[32m$pink: #E65D6E;[m
[32m+[m[32m$green: #30B08F;[m
[32m+[m[32m$tiffany: #4AB7BD;[m
[32m+[m[32m$yellow: #FEC171;[m
[32m+[m[32m$panGreen: #30B08F;[m
[32m+[m
[32m+[m[32m// é»˜è®¤èœå•ä¸»é¢˜é£æ ¼[m
[32m+[m[32m$base-menu-color: #bfcbd9;[m
[32m+[m[32m$base-menu-color-active: #f4f4f5;[m
[32m+[m[32m$base-menu-background: #304156;[m
[32m+[m[32m$base-logo-title-color: #ffffff;[m
[32m+[m
[32m+[m[32m$base-menu-light-color: rgba(0, 0, 0, 0.7);[m
[32m+[m[32m$base-menu-light-background: #ffffff;[m
[32m+[m[32m$base-logo-light-title-color: #001529;[m
[32m+[m
[32m+[m[32m$base-sub-menu-background: #1f2d3d;[m
[32m+[m[32m$base-sub-menu-hover: #001528;[m
[32m+[m
[32m+[m[32m// è‡ªå®šä¹‰æš—è‰²èœå•é£æ ¼[m
[32m+[m[32m/**[m
[32m+[m[32m$base-menu-color:hsla(0,0%,100%,.65);[m
[32m+[m[32m$base-menu-color-active:#fff;[m
[32m+[m[32m$base-menu-background:#001529;[m
[32m+[m[32m$base-logo-title-color: #ffffff;[m
[32m+[m
[32m+[m[32m$base-menu-light-color:rgba(0,0,0,.70);[m
[32m+[m[32m$base-menu-light-background:#ffffff;[m
[32m+[m[32m$base-logo-light-title-color: #001529;[m
[32m+[m
[32m+[m[32m$base-sub-menu-background:#000c17;[m
[32m+[m[32m$base-sub-menu-hover:#001528;[m
[32m+[m[32m*/[m
[32m+[m
[32m+[m[32m$--color-primary: #409EFF;[m
[32m+[m[32m$--color-success: #67C23A;[m
[32m+[m[32m$--color-warning: #E6A23C;[m
[32m+[m[32m$--color-danger: #F56C6C;[m
[32m+[m[32m$--color-info: #909399;[m
[32m+[m
[32m+[m[32m$base-sidebar-width: 200px;[m
[32m+[m
[32m+[m[32m// the :export directive is the magic sauce for webpack[m
[32m+[m[32m// https://www.bluematador.com/blog/how-to-share-variables-between-js-and-sass[m
[32m+[m[32m:export {[m
[32m+[m[32m  menuColor: $base-menu-color;[m
[32m+[m[32m  menuLightColor: $base-menu-light-color;[m
[32m+[m[32m  menuColorActive: $base-menu-color-active;[m
[32m+[m[32m  menuBackground: $base-menu-background;[m
[32m+[m[32m  menuLightBackground: $base-menu-light-background;[m
[32m+[m[32m  subMenuBackground: $base-sub-menu-background;[m
[32m+[m[32m  subMenuHover: $base-sub-menu-hover;[m
[32m+[m[32m  sideBarWidth: $base-sidebar-width;[m
[32m+[m[32m  logoTitleColor: $base-logo-title-color;[m
[32m+[m[32m  logoLightTitleColor: $base-logo-light-title-color;[m
[32m+[m[32m  primaryColor: $--color-primary;[m
[32m+[m[32m  successColor: $--color-success;[m
[32m+[m[32m  dangerColor: $--color-danger;[m
[32m+[m[32m  infoColor: $--color-info;[m
[32m+[m[32m  warningColor: $--color-warning;[m
[32m+[m[32m}[m
[1mdiff --git a/src/components/Breadcrumb/index.vue b/src/components/Breadcrumb/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..489cba15[m
[1m--- /dev/null[m
[1m+++ b/src/components/Breadcrumb/index.vue[m
[36m@@ -0,0 +1,66 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <el-breadcrumb class="app-breadcrumb" separator="/">[m
[32m+[m[32m    <transition-group name="breadcrumb">[m
[32m+[m[32m      <el-breadcrumb-item v-for="(item,index) in levelList" :key="item.path">[m
[32m+[m[32m        <span v-if="item.redirect === 'noRedirect' || index == levelList.length - 1" class="no-redirect">{{ item.meta.title }}</span>[m
[32m+[m[32m        <a v-else @click.prevent="handleLink(item)">{{ item.meta.title }}</a>[m
[32m+[m[32m      </el-breadcrumb-item>[m
[32m+[m[32m    </transition-group>[m
[32m+[m[32m  </el-breadcrumb>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mconst route = useRoute();[m
[32m+[m[32mconst router = useRouter();[m
[32m+[m[32mconst levelList = ref([])[m
[32m+[m
[32m+[m[32mfunction getBreadcrumb() {[m
[32m+[m[32m  // only show routes with meta.title[m
[32m+[m[32m  let matched = route.matched.filter(item => item.meta && item.meta.title);[m
[32m+[m[32m  const first = matched[0][m
[32m+[m[32m  // åˆ¤æ–­æ˜¯å¦ä¸ºé¦–é¡µ[m
[32m+[m[32m  if (!isDashboard(first)) {[m
[32m+[m[32m    matched = [{ path: '/index', meta: { title: 'é¦–é¡µ' } }].concat(matched)[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  levelList.value = matched.filter(item => item.meta && item.meta.title && item.meta.breadcrumb !== false)[m
[32m+[m[32m}[m
[32m+[m[32mfunction isDashboard(route) {[m
[32m+[m[32m  const name = route && route.name[m
[32m+[m[32m  if (!name) {[m
[32m+[m[32m    return false[m
[32m+[m[32m  }[m
[32m+[m[32m  return name.trim() === 'Index'[m
[32m+[m[32m}[m
[32m+[m[32mfunction handleLink(item) {[m
[32m+[m[32m  const { redirect, path } = item[m
[32m+[m[32m  if (redirect) {[m
[32m+[m[32m    router.push(redirect)[m
[32m+[m[32m    return[m
[32m+[m[32m  }[m
[32m+[m[32m  router.push(path)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mwatchEffect(() => {[m
[32m+[m[32m  // if you go to the redirect page, do not update the breadcrumbs[m
[32m+[m[32m  if (route.path.startsWith('/redirect/')) {[m
[32m+[m[32m    return[m
[32m+[m[32m  }[m
[32m+[m[32m  getBreadcrumb()[m
[32m+[m[32m})[m
[32m+[m[32mgetBreadcrumb();[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang='scss' scoped>[m
[32m+[m[32m.app-breadcrumb.el-breadcrumb {[m
[32m+[m[32m  display: inline-block;[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m  line-height: 50px;[m
[32m+[m[32m  margin-left: 8px;[m
[32m+[m
[32m+[m[32m  .no-redirect {[m
[32m+[m[32m    color: #97a8be;[m
[32m+[m[32m    cursor: text;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/components/Crontab/day.vue b/src/components/Crontab/day.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..25c4f790[m
[1m--- /dev/null[m
[1m+++ b/src/components/Crontab/day.vue[m
[36m@@ -0,0 +1,174 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m    <el-form>[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio v-model='radioValue' :label="1">[m
[32m+[m[32m                æ—¥ï¼Œå…è®¸çš„é€šé…ç¬¦[, - * ? / L W][m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio v-model='radioValue' :label="2">[m
[32m+[m[32m                ä¸æŒ‡å®š[m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio v-model='radioValue' :label="3">[m
[32m+[m[32m                å‘¨æœŸä»[m
[32m+[m[32m                <el-input-number v-model='cycle01' :min="1" :max="30" /> -[m
[32m+[m[32m                <el-input-number v-model='cycle02' :min="cycle01 + 1" :max="31" /> æ—¥[m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio v-model='radioValue' :label="4">[m
[32m+[m[32m                ä»[m
[32m+[m[32m                <el-input-number v-model='average01' :min="1" :max="30" /> å·å¼€å§‹ï¼Œæ¯[m
[32m+[m[32m                <el-input-number v-model='average02' :min="1" :max="31 - average01" /> æ—¥æ‰§è¡Œä¸€æ¬¡[m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio v-model='radioValue' :label="5">[m
[32m+[m[32m                æ¯æœˆ[m
[32m+[m[32m                <el-input-number v-model='workday' :min="1" :max="31" /> å·æœ€è¿‘çš„é‚£ä¸ªå·¥ä½œæ—¥[m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio v-model='radioValue' :label="6">[m
[32m+[m[32m                æœ¬æœˆæœ€åä¸€å¤©[m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio v-model='radioValue' :label="7">[m
[32m+[m[32m                æŒ‡å®š[m
[32m+[m[32m                <el-select clearable v-model="checkboxList" placeholder="å¯å¤šé€‰" multiple :multiple-limit="10">[m
[32m+[m[32m                    <el-option v-for="item in 31" :key="item" :label="item" :value="item" />[m
[32m+[m[32m                </el-select>[m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m    </el-form>[m
[32m+[m[32m</template>[m
[32m+[m[32m<script setup>[m
[32m+[m[32mconst emit = defineEmits(['update'])[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m    cron: {[m
[32m+[m[32m        type: Object,[m
[32m+[m[32m        default: {[m
[32m+[m[32m            second: "*",[m
[32m+[m[32m            min: "*",[m
[32m+[m[32m            hour: "*",[m
[32m+[m[32m            day: "*",[m
[32m+[m[32m            month: "*",[m
[32m+[m[32m            week: "?",[m
[32m+[m[32m            year: "",[m
[32m+[m[32m        }[m
[32m+[m[32m    },[m
[32m+[m[32m    check: {[m
[32m+[m[32m        type: Function,[m
[32m+[m[32m        default: () => {[m
[32m+[m[32m        }[m
[32m+[m[32m    }[m
[32m+[m[32m})[m
[32m+[m[32mconst radioValue = ref(1)[m
[32m+[m[32mconst cycle01 = ref(1)[m
[32m+[m[32mconst cycle02 = ref(2)[m
[32m+[m[32mconst average01 = ref(1)[m
[32m+[m[32mconst average02 = ref(1)[m
[32m+[m[32mconst workday = ref(1)[m
[32m+[m[32mconst checkboxList = ref([])[m
[32m+[m[32mconst checkCopy = ref([1])[m
[32m+[m[32mconst cycleTotal = computed(() => {[m
[32m+[m[32m    cycle01.value = props.check(cycle01.value, 1, 30)[m
[32m+[m[32m    cycle02.value = props.check(cycle02.value, cycle01.value + 1, 31)[m
[32m+[m[32m    return cycle01.value + '-' + cycle02.value[m
[32m+[m[32m})[m
[32m+[m[32mconst averageTotal = computed(() => {[m
[32m+[m[32m    average01.value = props.check(average01.value, 1, 30)[m
[32m+[m[32m    average02.value = props.check(average02.value, 1, 31 - average01.value)[m
[32m+[m[32m    return average01.value + '/' + average02.value[m
[32m+[m[32m})[m
[32m+[m[32mconst workdayTotal = computed(() => {[m
[32m+[m[32m    workday.value = props.check(workday.value, 1, 31)[m
[32m+[m[32m    return workday.value + 'W'[m
[32m+[m[32m})[m
[32m+[m[32mconst checkboxString = computed(() => {[m
[32m+[m[32m    return checkboxList.value.join(',')[m
[32m+[m[32m})[m
[32m+[m[32mwatch(() => props.cron.day, value => changeRadioValue(value))[m
[32m+[m[32mwatch([radioValue, cycleTotal, averageTotal, workdayTotal, checkboxString], () => onRadioChange())[m
[32m+[m[32mfunction changeRadioValue(value) {[m
[32m+[m[32m    if (value === "*") {[m
[32m+[m[32m        radioValue.value = 1[m
[32m+[m[32m    } else if (value === "?") {[m
[32m+[m[32m        radioValue.value = 2[m
[32m+[m[32m    } else if (value.indexOf("-") > -1) {[m
[32m+[m[32m        const indexArr = value.split('-')[m
[32m+[m[32m        cycle01.value = Number(indexArr[0])[m
[32m+[m[32m        cycle02.value = Number(indexArr[1])[m
[32m+[m[32m        radioValue.value = 3[m
[32m+[m[32m    } else if (value.indexOf("/") > -1) {[m
[32m+[m[32m        const indexArr = value.split('/')[m
[32m+[m[32m        average01.value = Number(indexArr[0])[m
[32m+[m[32m        average02.value = Number(indexArr[1])[m
[32m+[m[32m        radioValue.value = 4[m
[32m+[m[32m    } else if (value.indexOf("W") > -1) {[m
[32m+[m[32m        const indexArr = value.split("W")[m
[32m+[m[32m        workday.value = Number(indexArr[0])[m
[32m+[m[32m        radioValue.value = 5[m
[32m+[m[32m    } else if (value === "L") {[m
[32m+[m[32m        radioValue.value = 6[m
[32m+[m[32m    } else {[m
[32m+[m[32m        checkboxList.value = [...new Set(value.split(',').map(item => Number(item)))][m
[32m+[m[32m        radioValue.value = 7[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m[32m// å•é€‰æŒ‰é’®å€¼å˜åŒ–æ—¶[m
[32m+[m[32mfunction onRadioChange() {[m
[32m+[m[32m    if (radioValue.value === 2 && props.cron.week === '?') {[m
[32m+[m[32m        emit('update', 'week', '*', 'day')[m
[32m+[m[32m    }[m
[32m+[m[32m    if (radioValue.value !== 2 && props.cron.week !== '?') {[m
[32m+[m[32m        emit('update', 'week', '?', 'day')[m
[32m+[m[32m    }[m
[32m+[m[32m    switch (radioValue.value) {[m
[32m+[m[32m        case 1:[m
[32m+[m[32m            emit('update', 'day', '*', 'day')[m
[32m+[m[32m            break[m
[32m+[m[32m        case 2:[m
[32m+[m[32m            emit('update', 'day', '?', 'day')[m
[32m+[m[32m            break[m
[32m+[m[32m        case 3:[m
[32m+[m[32m            emit('update', 'day', cycleTotal.value, 'day')[m
[32m+[m[32m            break[m
[32m+[m[32m        case 4:[m
[32m+[m[32m            emit('update', 'day', averageTotal.value, 'day')[m
[32m+[m[32m            break[m
[32m+[m[32m        case 5:[m
[32m+[m[32m            emit('update', 'day', workdayTotal.value, 'day')[m
[32m+[m[32m            break[m
[32m+[m[32m        case 6:[m
[32m+[m[32m            emit('update', 'day', 'L', 'day')[m
[32m+[m[32m            break[m
[32m+[m[32m        case 7:[m
[32m+[m[32m            if (checkboxList.value.length === 0) {[m
[32m+[m[32m                checkboxList.value.push(checkCopy.value[0])[m
[32m+[m[32m            } else {[m
[32m+[m[32m                checkCopy.value = checkboxList.value[m
[32m+[m[32m            }[m
[32m+[m[32m            emit('update', 'day', checkboxString.value, 'day')[m
[32m+[m[32m            break[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang="scss" scoped>[m
[32m+[m[32m.el-input-number--small, .el-select, .el-select--small {[m
[32m+[m[32m    margin: 0 0.2rem;[m
[32m+[m[32m}[m
[32m+[m[32m.el-select, .el-select--small {[m
[32m+[m[32m    width: 18.8rem;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/components/Crontab/hour.vue b/src/components/Crontab/hour.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..9f052ad7[m
[1m--- /dev/null[m
[1m+++ b/src/components/Crontab/hour.vue[m
[36m@@ -0,0 +1,127 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m    <el-form>[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio v-model='radioValue' :label="1">[m
[32m+[m[32m                å°æ—¶ï¼Œå…è®¸çš„é€šé…ç¬¦[, - * /][m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio v-model='radioValue' :label="2">[m
[32m+[m[32m                å‘¨æœŸä»[m
[32m+[m[32m                <el-input-number v-model='cycle01' :min="0" :max="22" /> -[m
[32m+[m[32m                <el-input-number v-model='cycle02' :min="cycle01 + 1" :max="23" /> æ—¶[m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio v-model='radioValue' :label="3">[m
[32m+[m[32m                ä»[m
[32m+[m[32m                <el-input-number v-model='average01' :min="0" :max="22" /> æ—¶å¼€å§‹ï¼Œæ¯[m
[32m+[m[32m                <el-input-number v-model='average02' :min="1" :max="23 - average01" /> å°æ—¶æ‰§è¡Œä¸€æ¬¡[m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio v-model='radioValue' :label="4">[m
[32m+[m[32m                æŒ‡å®š[m
[32m+[m[32m                <el-select clearable v-model="checkboxList" placeholder="å¯å¤šé€‰" multiple :multiple-limit="10">[m
[32m+[m[32m                    <el-option v-for="item in 24" :key="item" :label="item - 1" :value="item - 1" />[m
[32m+[m[32m                </el-select>[m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m    </el-form>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mconst emit = defineEmits(['update'])[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m    cron: {[m
[32m+[m[32m        type: Object,[m
[32m+[m[32m        default: {[m
[32m+[m[32m            second: "*",[m
[32m+[m[32m            min: "*",[m
[32m+[m[32m            hour: "*",[m
[32m+[m[32m            day: "*",[m
[32m+[m[32m            month: "*",[m
[32m+[m[32m            week: "?",[m
[32m+[m[32m            year: "",[m
[32m+[m[32m        }[m
[32m+[m[32m    },[m
[32m+[m[32m    check: {[m
[32m+[m[32m        type: Function,[m
[32m+[m[32m        default: () => {[m
[32m+[m[32m        }[m
[32m+[m[32m    }[m
[32m+[m[32m})[m
[32m+[m[32mconst radioValue = ref(1)[m
[32m+[m[32mconst cycle01 = ref(0)[m
[32m+[m[32mconst cycle02 = ref(1)[m
[32m+[m[32mconst average01 = ref(0)[m
[32m+[m[32mconst average02 = ref(1)[m
[32m+[m[32mconst checkboxList = ref([])[m
[32m+[m[32mconst checkCopy = ref([0])[m
[32m+[m[32mconst cycleTotal = computed(() => {[m
[32m+[m[32m    cycle01.value = props.check(cycle01.value, 0, 22)[m
[32m+[m[32m    cycle02.value = props.check(cycle02.value, cycle01.value + 1, 23)[m
[32m+[m[32m    return cycle01.value + '-' + cycle02.value[m
[32m+[m[32m})[m
[32m+[m[32mconst averageTotal = computed(() => {[m
[32m+[m[32m    average01.value = props.check(average01.value, 0, 22)[m
[32m+[m[32m    average02.value = props.check(average02.value, 1, 23 - average01.value)[m
[32m+[m[32m    return average01.value + '/' + average02.value[m
[32m+[m[32m})[m
[32m+[m[32mconst checkboxString = computed(() => {[m
[32m+[m[32m    return checkboxList.value.join(',')[m
[32m+[m[32m})[m
[32m+[m[32mwatch(() => props.cron.hour, value => changeRadioValue(value))[m
[32m+[m[32mwatch([radioValue, cycleTotal, averageTotal, checkboxString], () => onRadioChange())[m
[32m+[m[32mfunction changeRadioValue(value) {[m
[32m+[m[32m    if (value === '*') {[m
[32m+[m[32m        radioValue.value = 1[m
[32m+[m[32m    } else if (value.indexOf('-') > -1) {[m
[32m+[m[32m        const indexArr = value.split('-')[m
[32m+[m[32m        cycle01.value = Number(indexArr[0])[m
[32m+[m[32m        cycle02.value = Number(indexArr[1])[m
[32m+[m[32m        radioValue.value = 2[m
[32m+[m[32m    } else if (value.indexOf('/') > -1) {[m
[32m+[m[32m        const indexArr = value.split('/')[m
[32m+[m[32m        average01.value = Number(indexArr[0])[m
[32m+[m[32m        average02.value = Number(indexArr[1])[m
[32m+[m[32m        radioValue.value = 3[m
[32m+[m[32m    } else {[m
[32m+[m[32m        checkboxList.value = [...new Set(value.split(',').map(item => Number(item)))][m
[32m+[m[32m        radioValue.value = 4[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m[32mfunction onRadioChange() {[m
[32m+[m[32m    switch (radioValue.value) {[m
[32m+[m[32m        case 1:[m
[32m+[m[32m            emit('update', 'hour', '*', 'hour')[m
[32m+[m[32m            break[m
[32m+[m[32m        case 2:[m
[32m+[m[32m            emit('update', 'hour', cycleTotal.value, 'hour')[m
[32m+[m[32m            break[m
[32m+[m[32m        case 3:[m
[32m+[m[32m            emit('update', 'hour', averageTotal.value, 'hour')[m
[32m+[m[32m            break[m
[32m+[m[32m        case 4:[m
[32m+[m[32m            if (checkboxList.value.length === 0) {[m
[32m+[m[32m                checkboxList.value.push(checkCopy.value[0])[m
[32m+[m[32m            } else {[m
[32m+[m[32m                checkCopy.value = checkboxList.value[m
[32m+[m[32m            }[m
[32m+[m[32m            emit('update', 'hour', checkboxString.value, 'hour')[m
[32m+[m[32m            break[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang="scss" scoped>[m
[32m+[m[32m.el-input-number--small, .el-select, .el-select--small {[m
[32m+[m[32m    margin: 0 0.2rem;[m
[32m+[m[32m}[m
[32m+[m[32m.el-select, .el-select--small {[m
[32m+[m[32m    width: 18.8rem;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/components/Crontab/index.vue b/src/components/Crontab/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..910c9b3c[m
[1m--- /dev/null[m
[1m+++ b/src/components/Crontab/index.vue[m
[36m@@ -0,0 +1,310 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m    <div>[m
[32m+[m[32m        <el-tabs type="border-card">[m
[32m+[m[32m            <el-tab-pane label="ç§’" v-if="shouldHide('second')">[m
[32m+[m[32m                <CrontabSecond[m
[32m+[m[32m                    @update="updateCrontabValue"[m
[32m+[m[32m                    :check="checkNumber"[m
[32m+[m[32m                    :cron="crontabValueObj"[m
[32m+[m[32m                    ref="cronsecond"[m
[32m+[m[32m                />[m
[32m+[m[32m            </el-tab-pane>[m
[32m+[m
[32m+[m[32m            <el-tab-pane label="åˆ†é’Ÿ" v-if="shouldHide('min')">[m
[32m+[m[32m                <CrontabMin[m
[32m+[m[32m                    @update="updateCrontabValue"[m
[32m+[m[32m                    :check="checkNumber"[m
[32m+[m[32m                    :cron="crontabValueObj"[m
[32m+[m[32m                    ref="cronmin"[m
[32m+[m[32m                />[m
[32m+[m[32m            </el-tab-pane>[m
[32m+[m
[32m+[m[32m            <el-tab-pane label="å°æ—¶" v-if="shouldHide('hour')">[m
[32m+[m[32m                <CrontabHour[m
[32m+[m[32m                    @update="updateCrontabValue"[m
[32m+[m[32m                    :check="checkNumber"[m
[32m+[m[32m                    :cron="crontabValueObj"[m
[32m+[m[32m                    ref="cronhour"[m
[32m+[m[32m                />[m
[32m+[m[32m            </el-tab-pane>[m
[32m+[m
[32m+[m[32m            <el-tab-pane label="æ—¥" v-if="shouldHide('day')">[m
[32m+[m[32m                <CrontabDay[m
[32m+[m[32m                    @update="updateCrontabValue"[m
[32m+[m[32m                    :check="checkNumber"[m
[32m+[m[32m                    :cron="crontabValueObj"[m
[32m+[m[32m                    ref="cronday"[m
[32m+[m[32m                />[m
[32m+[m[32m            </el-tab-pane>[m
[32m+[m
[32m+[m[32m            <el-tab-pane label="æœˆ" v-if="shouldHide('month')">[m
[32m+[m[32m                <CrontabMonth[m
[32m+[m[32m                    @update="updateCrontabValue"[m
[32m+[m[32m                    :check="checkNumber"[m
[32m+[m[32m                    :cron="crontabValueObj"[m
[32m+[m[32m                    ref="cronmonth"[m
[32m+[m[32m                />[m
[32m+[m[32m            </el-tab-pane>[m
[32m+[m
[32m+[m[32m            <el-tab-pane label="å‘¨" v-if="shouldHide('week')">[m
[32m+[m[32m                <CrontabWeek[m
[32m+[m[32m                    @update="updateCrontabValue"[m
[32m+[m[32m                    :check="checkNumber"[m
[32m+[m[32m                    :cron="crontabValueObj"[m
[32m+[m[32m                    ref="cronweek"[m
[32m+[m[32m                />[m
[32m+[m[32m            </el-tab-pane>[m
[32m+[m
[32m+[m[32m            <el-tab-pane label="å¹´" v-if="shouldHide('year')">[m
[32m+[m[32m                <CrontabYear[m
[32m+[m[32m                    @update="updateCrontabValue"[m
[32m+[m[32m                    :check="checkNumber"[m
[32m+[m[32m                    :cron="crontabValueObj"[m
[32m+[m[32m                    ref="cronyear"[m
[32m+[m[32m                />[m
[32m+[m[32m            </el-tab-pane>[m
[32m+[m[32m        </el-tabs>[m
[32m+[m
[32m+[m[32m        <div class="popup-main">[m
[32m+[m[32m            <div class="popup-result">[m
[32m+[m[32m                <p class="title">æ—¶é—´è¡¨è¾¾å¼</p>[m
[32m+[m[32m                <table>[m
[32m+[m[32m                    <thead>[m
[32m+[m[32m                        <th v-for="item of tabTitles" :key="item">{{item}}</th>[m
[32m+[m[32m                        <th>Cron è¡¨è¾¾å¼</th>[m
[32m+[m[32m                    </thead>[m
[32m+[m[32m                    <tbody>[m
[32m+[m[32m                        <td>[m
[32m+[m[32m                            <span v-if="crontabValueObj.second.length < 10">{{crontabValueObj.second}}</span>[m
[32m+[m[32m                            <el-tooltip v-else :content="crontabValueObj.second" placement="top"><span>{{crontabValueObj.second}}</span></el-tooltip>[m
[32m+[m[32m                        </td>[m
[32m+[m[32m                        <td>[m
[32m+[m[32m                            <span v-if="crontabValueObj.min.length < 10">{{crontabValueObj.min}}</span>[m
[32m+[m[32m                            <el-tooltip v-else :content="crontabValueObj.min" placement="top"><span>{{crontabValueObj.min}}</span></el-tooltip>[m
[32m+[m[32m                        </td>[m
[32m+[m[32m                        <td>[m
[32m+[m[32m                            <span v-if="crontabValueObj.hour.length < 10">{{crontabValueObj.hour}}</span>[m
[32m+[m[32m                            <el-tooltip v-else :content="crontabValueObj.hour" placement="top"><span>{{crontabValueObj.hour}}</span></el-tooltip>[m
[32m+[m[32m                        </td>[m
[32m+[m[32m                        <td>[m
[32m+[m[32m                            <span v-if="crontabValueObj.day.length < 10">{{crontabValueObj.day}}</span>[m
[32m+[m[32m                            <el-tooltip v-else :content="crontabValueObj.day" placement="top"><span>{{crontabValueObj.day}}</span></el-tooltip>[m
[32m+[m[32m                        </td>[m
[32m+[m[32m                        <td>[m
[32m+[m[32m                            <span v-if="crontabValueObj.month.length < 10">{{crontabValueObj.month}}</span>[m
[32m+[m[32m                            <el-tooltip v-else :content="crontabValueObj.month" placement="top"><span>{{crontabValueObj.month}}</span></el-tooltip>[m
[32m+[m[32m                        </td>[m
[32m+[m[32m                        <td>[m
[32m+[m[32m                            <span v-if="crontabValueObj.week.length < 10">{{crontabValueObj.week}}</span>[m
[32m+[m[32m                            <el-tooltip v-else :content="crontabValueObj.week" placement="top"><span>{{crontabValueObj.week}}</span></el-tooltip>[m
[32m+[m[32m                        </td>[m
[32m+[m[32m                        <td>[m
[32m+[m[32m                            <span v-if="crontabValueObj.year.length < 10">{{crontabValueObj.year}}</span>[m
[32m+[m[32m                            <el-tooltip v-else :content="crontabValueObj.year" placement="top"><span>{{crontabValueObj.year}}</span></el-tooltip>[m
[32m+[m[32m                        </td>[m
[32m+[m[32m                        <td class="result">[m
[32m+[m[32m                            <span v-if="crontabValueString.length < 90">{{crontabValueString}}</span>[m
[32m+[m[32m                            <el-tooltip v-else :content="crontabValueString" placement="top"><span>{{crontabValueString}}</span></el-tooltip>[m
[32m+[m[32m                        </td>[m
[32m+[m[32m                    </tbody>[m
[32m+[m[32m                </table>[m
[32m+[m[32m            </div>[m
[32m+[m[32m            <CrontabResult :ex="crontabValueString"></CrontabResult>[m
[32m+[m
[32m+[m[32m            <div class="pop_btn">[m
[32m+[m[32m                <el-button type="primary" @click="submitFill">ç¡®å®š</el-button>[m
[32m+[m[32m                <el-button type="warning" @click="clearCron">é‡ç½®</el-button>[m
[32m+[m[32m                <el-button @click="hidePopup">å–æ¶ˆ</el-button>[m
[32m+[m[32m            </div>[m
[32m+[m[32m        </div>[m
[32m+[m[32m    </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport CrontabSecond from "./second.vue"[m
[32m+[m[32mimport CrontabMin from "./min.vue"[m
[32m+[m[32mimport CrontabHour from "./hour.vue"[m
[32m+[m[32mimport CrontabDay from "./day.vue"[m
[32m+[m[32mimport CrontabMonth from "./month.vue"[m
[32m+[m[32mimport CrontabWeek from "./week.vue"[m
[32m+[m[32mimport CrontabYear from "./year.vue"[m
[32m+[m[32mimport CrontabResult from "./result.vue"[m
[32m+[m[32mconst { proxy } = getCurrentInstance()[m
[32m+[m[32mconst emit = defineEmits(['hide', 'fill'])[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m    hideComponent: {[m
[32m+[m[32m        type: Array,[m
[32m+[m[32m        default: () => [],[m
[32m+[m[32m    },[m
[32m+[m[32m    expression: {[m
[32m+[m[32m        type: String,[m
[32m+[m[32m        default: ""[m
[32m+[m[32m    }[m
[32m+[m[32m})[m
[32m+[m[32mconst tabTitles = ref(["ç§’", "åˆ†é’Ÿ", "å°æ—¶", "æ—¥", "æœˆ", "å‘¨", "å¹´"])[m
[32m+[m[32mconst tabActive = ref(0)[m
[32m+[m[32mconst hideComponent = ref([])[m
[32m+[m[32mconst expression = ref('')[m
[32m+[m[32mconst crontabValueObj = ref({[m
[32m+[m[32m    second: "*",[m
[32m+[m[32m    min: "*",[m
[32m+[m[32m    hour: "*",[m
[32m+[m[32m    day: "*",[m
[32m+[m[32m    month: "*",[m
[32m+[m[32m    week: "?",[m
[32m+[m[32m    year: "",[m
[32m+[m[32m})[m
[32m+[m[32mconst crontabValueString = computed(() => {[m
[32m+[m[32m    const obj = crontabValueObj.value[m
[32m+[m[32m    return obj.second[m
[32m+[m[32m        + " "[m
[32m+[m[32m        + obj.min[m
[32m+[m[32m        + " "[m
[32m+[m[32m        + obj.hour[m
[32m+[m[32m        + " "[m
[32m+[m[32m        + obj.day[m
[32m+[m[32m        + " "[m
[32m+[m[32m        + obj.month[m
[32m+[m[32m        + " "[m
[32m+[m[32m        + obj.week[m
[32m+[m[32m        + (obj.year === "" ? "" : " " + obj.year)[m
[32m+[m[32m})[m
[32m+[m[32mwatch(expression, () => resolveExp())[m
[32m+[m[32mfunction shouldHide(key) {[m
[32m+[m[32m    return !(hideComponent.value && hideComponent.value.includes(key))[m
[32m+[m[32m}[m
[32m+[m[32mfunction resolveExp() {[m
[32m+[m[32m    // åè§£æ è¡¨è¾¾å¼[m
[32m+[m[32m    if (expression.value) {[m
[32m+[m[32m        const arr = expression.value.split(/\s+/)[m
[32m+[m[32m        if (arr.length >= 6) {[m
[32m+[m[32m            //6 ä½ä»¥ä¸Šæ˜¯åˆæ³•è¡¨è¾¾å¼[m
[32m+[m[32m            let obj = {[m
[32m+[m[32m                second: arr[0],[m
[32m+[m[32m                min: arr[1],[m
[32m+[m[32m                hour: arr[2],[m
[32m+[m[32m                day: arr[3],[m
[32m+[m[32m                month: arr[4],[m
[32m+[m[32m                week: arr[5],[m
[32m+[m[32m                year: arr[6] ? arr[6] : ""[m
[32m+[m[32m            }[m
[32m+[m[32m            crontabValueObj.value = {[m
[32m+[m[32m                ...obj,[m
[32m+[m[32m            }[m
[32m+[m[32m        }[m
[32m+[m[32m    } else {[m
[32m+[m[32m        // æ²¡æœ‰ä¼ å…¥çš„è¡¨è¾¾å¼ åˆ™è¿˜åŸ[m
[32m+[m[32m        clearCron()[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m[32m// tabåˆ‡æ¢å€¼[m
[32m+[m[32mfunction tabCheck(index) {[m
[32m+[m[32m    tabActive.value = index[m
[32m+[m[32m}[m
[32m+[m[32m// ç”±å­ç»„ä»¶è§¦å‘ï¼Œæ›´æ”¹è¡¨è¾¾å¼ç»„æˆçš„å­—æ®µå€¼[m
[32m+[m[32mfunction updateCrontabValue(name, value, from) {[m
[32m+[m[32m    crontabValueObj.value[name] = value[m
[32m+[m[32m}[m
[32m+[m[32m// è¡¨å•é€‰é¡¹çš„å­ç»„ä»¶æ ¡éªŒæ•°å­—æ ¼å¼ï¼ˆé€šè¿‡-propsä¼ é€’ï¼‰[m
[32m+[m[32mfunction checkNumber(value, minLimit, maxLimit) {[m
[32m+[m[32m    // æ£€æŸ¥å¿…é¡»ä¸ºæ•´æ•°[m
[32m+[m[32m    value = Math.floor(value)[m
[32m+[m[32m    if (value < minLimit) {[m
[32m+[m[32m        value = minLimit[m
[32m+[m[32m    } else if (value > maxLimit) {[m
[32m+[m[32m        value = maxLimit[m
[32m+[m[32m    }[m
[32m+[m[32m    return value[m
[32m+[m[32m}[m
[32m+[m[32m// éšè—å¼¹çª—[m
[32m+[m[32mfunction hidePopup() {[m
[32m+[m[32m    emit("hide")[m
[32m+[m[32m}[m
[32m+[m[32m// å¡«å……è¡¨è¾¾å¼[m
[32m+[m[32mfunction submitFill() {[m
[32m+[m[32m    emit("fill", crontabValueString.value)[m
[32m+[m[32m    hidePopup()[m
[32m+[m[32m}[m
[32m+[m[32mfunction clearCron() {[m
[32m+[m[32m    // è¿˜åŸé€‰æ‹©é¡¹[m
[32m+[m[32m    crontabValueObj.value = {[m
[32m+[m[32m        second: "*",[m
[32m+[m[32m        min: "*",[m
[32m+[m[32m        hour: "*",[m
[32m+[m[32m        day: "*",[m
[32m+[m[32m        month: "*",[m
[32m+[m[32m        week: "?",[m
[32m+[m[32m        year: "",[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m[32monMounted(() => {[m
[32m+[m[32m    expression.value = props.expression[m
[32m+[m[32m    hideComponent.value = props.hideComponent[m
[32m+[m[32m})[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang="scss" scoped>[m
[32m+[m[32m.pop_btn {[m
[32m+[m[32m    text-align: center;[m
[32m+[m[32m    margin-top: 20px;[m
[32m+[m[32m}[m
[32m+[m[32m.popup-main {[m
[32m+[m[32m    position: relative;[m
[32m+[m[32m    margin: 10px auto;[m
[32m+[m[32m    background: #fff;[m
[32m+[m[32m    border-radius: 5px;[m
[32m+[m[32m    font-size: 12px;[m
[32m+[m[32m    overflow: hidden;[m
[32m+[m[32m}[m
[32m+[m[32m.popup-title {[m
[32m+[m[32m    overflow: hidden;[m
[32m+[m[32m    line-height: 34px;[m
[32m+[m[32m    padding-top: 6px;[m
[32m+[m[32m    background: #f2f2f2;[m
[32m+[m[32m}[m
[32m+[m[32m.popup-result {[m
[32m+[m[32m    box-sizing: border-box;[m
[32m+[m[32m    line-height: 24px;[m
[32m+[m[32m    margin: 25px auto;[m
[32m+[m[32m    padding: 15px 10px 10px;[m
[32m+[m[32m    border: 1px solid #ccc;[m
[32m+[m[32m    position: relative;[m
[32m+[m[32m}[m
[32m+[m[32m.popup-result .title {[m
[32m+[m[32m    position: absolute;[m
[32m+[m[32m    top: -28px;[m
[32m+[m[32m    left: 50%;[m
[32m+[m[32m    width: 140px;[m
[32m+[m[32m    font-size: 14px;[m
[32m+[m[32m    margin-left: -70px;[m
[32m+[m[32m    text-align: center;[m
[32m+[m[32m    line-height: 30px;[m
[32m+[m[32m    background: #fff;[m
[32m+[m[32m}[m
[32m+[m[32m.popup-result table {[m
[32m+[m[32m    text-align: center;[m
[32m+[m[32m    width: 100%;[m
[32m+[m[32m    margin: 0 auto;[m
[32m+[m[32m}[m
[32m+[m[32m.popup-result table td:not(.result) {[m
[32m+[m[32m    width: 3.5rem;[m
[32m+[m[32m    min-width: 3.5rem;[m
[32m+[m[32m    max-width: 3.5rem;[m
[32m+[m[32m}[m
[32m+[m[32m.popup-result table span {[m
[32m+[m[32m    display: block;[m
[32m+[m[32m    width: 100%;[m
[32m+[m[32m    font-family: arial;[m
[32m+[m[32m    line-height: 30px;[m
[32m+[m[32m    height: 30px;[m
[32m+[m[32m    white-space: nowrap;[m
[32m+[m[32m    overflow: hidden;[m
[32m+[m[32m    border: 1px solid #e8e8e8;[m
[32m+[m[32m}[m
[32m+[m[32m.popup-result-scroll {[m
[32m+[m[32m    font-size: 12px;[m
[32m+[m[32m    line-height: 24px;[m
[32m+[m[32m    height: 10em;[m
[32m+[m[32m    overflow-y: auto;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/components/Crontab/min.vue b/src/components/Crontab/min.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..5d80cd27[m
[1m--- /dev/null[m
[1m+++ b/src/components/Crontab/min.vue[m
[36m@@ -0,0 +1,126 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m    <el-form>[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio v-model='radioValue' :label="1">[m
[32m+[m[32m                åˆ†é’Ÿï¼Œå…è®¸çš„é€šé…ç¬¦[, - * /][m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio v-model='radioValue' :label="2">[m
[32m+[m[32m                å‘¨æœŸä»[m
[32m+[m[32m                <el-input-number v-model='cycle01' :min="0" :max="58" /> -[m
[32m+[m[32m                <el-input-number v-model='cycle02' :min="cycle01 + 1" :max="59" /> åˆ†é’Ÿ[m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio v-model='radioValue' :label="3">[m
[32m+[m[32m                ä»[m
[32m+[m[32m                <el-input-number v-model='average01' :min="0" :max="58" /> åˆ†é’Ÿå¼€å§‹ï¼Œ æ¯[m
[32m+[m[32m                <el-input-number v-model='average02' :min="1" :max="59 - average01" /> åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡[m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio v-model='radioValue' :label="4">[m
[32m+[m[32m                æŒ‡å®š[m
[32m+[m[32m                <el-select clearable v-model="checkboxList" placeholder="å¯å¤šé€‰" multiple :multiple-limit="10">[m
[32m+[m[32m                    <el-option v-for="item in 60" :key="item" :label="item - 1" :value="item - 1" />[m
[32m+[m[32m                </el-select>[m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m    </el-form>[m
[32m+[m[32m</template>[m
[32m+[m[32m<script setup>[m
[32m+[m[32mconst emit = defineEmits(['update'])[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m    cron: {[m
[32m+[m[32m        type: Object,[m
[32m+[m[32m        default: {[m
[32m+[m[32m            second: "*",[m
[32m+[m[32m            min: "*",[m
[32m+[m[32m            hour: "*",[m
[32m+[m[32m            day: "*",[m
[32m+[m[32m            month: "*",[m
[32m+[m[32m            week: "?",[m
[32m+[m[32m            year: "",[m
[32m+[m[32m        }[m
[32m+[m[32m    },[m
[32m+[m[32m    check: {[m
[32m+[m[32m        type: Function,[m
[32m+[m[32m        default: () => {[m
[32m+[m[32m        }[m
[32m+[m[32m    }[m
[32m+[m[32m})[m
[32m+[m[32mconst radioValue = ref(1)[m
[32m+[m[32mconst cycle01 = ref(0)[m
[32m+[m[32mconst cycle02 = ref(1)[m
[32m+[m[32mconst average01 = ref(0)[m
[32m+[m[32mconst average02 = ref(1)[m
[32m+[m[32mconst checkboxList = ref([])[m
[32m+[m[32mconst checkCopy = ref([0])[m
[32m+[m[32mconst cycleTotal = computed(() => {[m
[32m+[m[32m    cycle01.value = props.check(cycle01.value, 0, 58)[m
[32m+[m[32m    cycle02.value = props.check(cycle02.value, cycle01.value + 1, 59)[m
[32m+[m[32m    return cycle01.value + '-' + cycle02.value[m
[32m+[m[32m})[m
[32m+[m[32mconst averageTotal = computed(() => {[m
[32m+[m[32m    average01.value = props.check(average01.value, 0, 58)[m
[32m+[m[32m    average02.value = props.check(average02.value, 1, 59 - average01.value)[m
[32m+[m[32m    return average01.value + '/' + average02.value[m
[32m+[m[32m})[m
[32m+[m[32mconst checkboxString = computed(() => {[m
[32m+[m[32m    return checkboxList.value.join(',')[m
[32m+[m[32m})[m
[32m+[m[32mwatch(() => props.cron.min, value => changeRadioValue(value))[m
[32m+[m[32mwatch([radioValue, cycleTotal, averageTotal, checkboxString], () => onRadioChange())[m
[32m+[m[32mfunction changeRadioValue(value) {[m
[32m+[m[32m    if (value === '*') {[m
[32m+[m[32m        radioValue.value = 1[m
[32m+[m[32m    } else if (value.indexOf('-') > -1) {[m
[32m+[m[32m        const indexArr = value.split('-')[m
[32m+[m[32m        cycle01.value = Number(indexArr[0])[m
[32m+[m[32m        cycle02.value = Number(indexArr[1])[m
[32m+[m[32m        radioValue.value = 2[m
[32m+[m[32m    } else if (value.indexOf('/') > -1) {[m
[32m+[m[32m        const indexArr = value.split('/')[m
[32m+[m[32m        average01.value = Number(indexArr[0])[m
[32m+[m[32m        average02.value = Number(indexArr[1])[m
[32m+[m[32m        radioValue.value = 3[m
[32m+[m[32m    } else {[m
[32m+[m[32m        checkboxList.value = [...new Set(value.split(',').map(item => Number(item)))][m
[32m+[m[32m        radioValue.value = 4[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m[32mfunction onRadioChange() {[m
[32m+[m[32m    switch (radioValue.value) {[m
[32m+[m[32m        case 1:[m
[32m+[m[32m            emit('update', 'min', '*', 'min')[m
[32m+[m[32m            break[m
[32m+[m[32m        case 2:[m
[32m+[m[32m            emit('update', 'min', cycleTotal.value, 'min')[m
[32m+[m[32m            break[m
[32m+[m[32m        case 3:[m
[32m+[m[32m            emit('update', 'min', averageTotal.value, 'min')[m
[32m+[m[32m            break[m
[32m+[m[32m        case 4:[m
[32m+[m[32m            if (checkboxList.value.length === 0) {[m
[32m+[m[32m                checkboxList.value.push(checkCopy.value[0])[m
[32m+[m[32m            } else {[m
[32m+[m[32m                checkCopy.value = checkboxList.value[m
[32m+[m[32m            }[m
[32m+[m[32m            emit('update', 'min', checkboxString.value, 'min')[m
[32m+[m[32m            break[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang="scss" scoped>[m
[32m+[m[32m.el-input-number--small, .el-select, .el-select--small {[m
[32m+[m[32m    margin: 0 0.2rem;[m
[32m+[m[32m}[m
[32m+[m[32m.el-select, .el-select--small {[m
[32m+[m[32m    width: 19.8rem;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/components/Crontab/month.vue b/src/components/Crontab/month.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..657d3f22[m
[1m--- /dev/null[m
[1m+++ b/src/components/Crontab/month.vue[m
[36m@@ -0,0 +1,141 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m    <el-form>[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio v-model='radioValue' :label="1">[m
[32m+[m[32m                æœˆï¼Œå…è®¸çš„é€šé…ç¬¦[, - * /][m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio v-model='radioValue' :label="2">[m
[32m+[m[32m                å‘¨æœŸä»[m
[32m+[m[32m                <el-input-number v-model='cycle01' :min="1" :max="11" /> -[m
[32m+[m[32m                <el-input-number v-model='cycle02' :min="cycle01 + 1" :max="12" /> æœˆ[m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio v-model='radioValue' :label="3">[m
[32m+[m[32m                ä»[m
[32m+[m[32m                <el-input-number v-model='average01' :min="1" :max="11" /> æœˆå¼€å§‹ï¼Œæ¯[m
[32m+[m[32m                <el-input-number v-model='average02' :min="1" :max="12 - average01" /> æœˆæœˆæ‰§è¡Œä¸€æ¬¡[m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio v-model='radioValue' :label="4">[m
[32m+[m[32m                æŒ‡å®š[m
[32m+[m[32m                <el-select clearable v-model="checkboxList" placeholder="å¯å¤šé€‰" multiple :multiple-limit="8">[m
[32m+[m[32m                    <el-option v-for="item in monthList" :key="item.key" :label="item.value" :value="item.key" />[m
[32m+[m[32m                </el-select>[m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m    </el-form>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mconst emit = defineEmits(['update'])[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m    cron: {[m
[32m+[m[32m        type: Object,[m
[32m+[m[32m        default: {[m
[32m+[m[32m            second: "*",[m
[32m+[m[32m            min: "*",[m
[32m+[m[32m            hour: "*",[m
[32m+[m[32m            day: "*",[m
[32m+[m[32m            month: "*",[m
[32m+[m[32m            week: "?",[m
[32m+[m[32m            year: "",[m
[32m+[m[32m        }[m
[32m+[m[32m    },[m
[32m+[m[32m    check: {[m
[32m+[m[32m        type: Function,[m
[32m+[m[32m        default: () => {[m
[32m+[m[32m        }[m
[32m+[m[32m    }[m
[32m+[m[32m})[m
[32m+[m[32mconst radioValue = ref(1)[m
[32m+[m[32mconst cycle01 = ref(1)[m
[32m+[m[32mconst cycle02 = ref(2)[m
[32m+[m[32mconst average01 = ref(1)[m
[32m+[m[32mconst average02 = ref(1)[m
[32m+[m[32mconst checkboxList = ref([])[m
[32m+[m[32mconst checkCopy = ref([1])[m
[32m+[m[32mconst monthList = ref([[m
[32m+[m[32m    {key: 1, value: 'ä¸€æœˆ'},[m
[32m+[m[32m    {key: 2, value: 'äºŒæœˆ'},[m
[32m+[m[32m    {key: 3, value: 'ä¸‰æœˆ'},[m
[32m+[m[32m    {key: 4, value: 'å››æœˆ'},[m
[32m+[m[32m    {key: 5, value: 'äº”æœˆ'},[m
[32m+[m[32m    {key: 6, value: 'å…­æœˆ'},[m
[32m+[m[32m    {key: 7, value: 'ä¸ƒæœˆ'},[m
[32m+[m[32m    {key: 8, value: 'å…«æœˆ'},[m
[32m+[m[32m    {key: 9, value: 'ä¹æœˆ'},[m
[32m+[m[32m    {key: 10, value: 'åæœˆ'},[m
[32m+[m[32m    {key: 11, value: 'åä¸€æœˆ'},[m
[32m+[m[32m    {key: 12, value: 'åäºŒæœˆ'}[m
[32m+[m[32m])[m
[32m+[m[32mconst cycleTotal = computed(() => {[m
[32m+[m[32m    cycle01.value = props.check(cycle01.value, 1, 11)[m
[32m+[m[32m    cycle02.value = props.check(cycle02.value, cycle01.value + 1, 12)[m
[32m+[m[32m    return cycle01.value + '-' + cycle02.value[m
[32m+[m[32m})[m
[32m+[m[32mconst averageTotal = computed(() => {[m
[32m+[m[32m    average01.value = props.check(average01.value, 1, 11)[m
[32m+[m[32m    average02.value = props.check(average02.value, 1, 12 - average01.value)[m
[32m+[m[32m    return average01.value + '/' + average02.value[m
[32m+[m[32m})[m
[32m+[m[32mconst checkboxString = computed(() => {[m
[32m+[m[32m    return checkboxList.value.join(',')[m
[32m+[m[32m})[m
[32m+[m[32mwatch(() => props.cron.month, value => changeRadioValue(value))[m
[32m+[m[32mwatch([radioValue, cycleTotal, averageTotal, checkboxString], () => onRadioChange())[m
[32m+[m[32mfunction changeRadioValue(value) {[m
[32m+[m[32m    if (value === '*') {[m
[32m+[m[32m        radioValue.value = 1[m
[32m+[m[32m    } else if (value.indexOf('-') > -1) {[m
[32m+[m[32m        const indexArr = value.split('-')[m
[32m+[m[32m        cycle01.value = Number(indexArr[0])[m
[32m+[m[32m        cycle02.value = Number(indexArr[1])[m
[32m+[m[32m        radioValue.value = 2[m
[32m+[m[32m    } else if (value.indexOf('/') > -1) {[m
[32m+[m[32m        const indexArr = value.split('/')[m
[32m+[m[32m        average01.value = Number(indexArr[0])[m
[32m+[m[32m        average02.value = Number(indexArr[1])[m
[32m+[m[32m        radioValue.value = 3[m
[32m+[m[32m    } else {[m
[32m+[m[32m        checkboxList.value = [...new Set(value.split(',').map(item => Number(item)))][m
[32m+[m[32m        radioValue.value = 4[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m[32mfunction onRadioChange() {[m
[32m+[m[32m    switch (radioValue.value) {[m
[32m+[m[32m        case 1:[m
[32m+[m[32m            emit('update', 'month', '*', 'month')[m
[32m+[m[32m            break[m
[32m+[m[32m        case 2:[m
[32m+[m[32m            emit('update', 'month', cycleTotal.value, 'month')[m
[32m+[m[32m            break[m
[32m+[m[32m        case 3:[m
[32m+[m[32m            emit('update', 'month', averageTotal.value, 'month')[m
[32m+[m[32m            break[m
[32m+[m[32m        case 4:[m
[32m+[m[32m            if (checkboxList.value.length === 0) {[m
[32m+[m[32m                checkboxList.value.push(checkCopy.value[0])[m
[32m+[m[32m            } else {[m
[32m+[m[32m                checkCopy.value = checkboxList.value[m
[32m+[m[32m            }[m
[32m+[m[32m            emit('update', 'month', checkboxString.value, 'month')[m
[32m+[m[32m            break[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang="scss" scoped>[m
[32m+[m[32m.el-input-number--small, .el-select, .el-select--small {[m
[32m+[m[32m    margin: 0 0.2rem;[m
[32m+[m[32m}[m
[32m+[m[32m.el-select, .el-select--small {[m
[32m+[m[32m    width: 18.8rem;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/components/Crontab/result.vue b/src/components/Crontab/result.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..5a812eef[m
[1m--- /dev/null[m
[1m+++ b/src/components/Crontab/result.vue[m
[36m@@ -0,0 +1,540 @@[m
[32m+[m[32m<template>[m
[32m+[m	[32m<div class="popup-result">[m
[32m+[m		[32m<p class="title">æœ€è¿‘5æ¬¡è¿è¡Œæ—¶é—´</p>[m
[32m+[m		[32m<ul class="popup-result-scroll">[m
[32m+[m			[32m<template v-if='isShow'>[m
[32m+[m				[32m<li v-for='item in resultList' :key="item">{{item}}</li>[m
[32m+[m			[32m</template>[m
[32m+[m			[32m<li v-else>è®¡ç®—ç»“æœä¸­...</li>[m
[32m+[m		[32m</ul>[m
[32m+[m	[32m</div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m    ex: {[m
[32m+[m[32m        type: String,[m
[32m+[m[32m        default: ''[m
[32m+[m[32m    }[m
[32m+[m[32m})[m
[32m+[m[32mconst dayRule = ref('')[m
[32m+[m[32mconst dayRuleSup = ref('')[m
[32m+[m[32mconst dateArr = ref([])[m
[32m+[m[32mconst resultList = ref([])[m
[32m+[m[32mconst isShow = ref(false)[m
[32m+[m[32mwatch(() => props.ex, () => expressionChange())[m
[32m+[m[32m// è¡¨è¾¾å¼å€¼å˜åŒ–æ—¶ï¼Œå¼€å§‹å»è®¡ç®—ç»“æœ[m
[32m+[m[32mfunction expressionChange() {[m
[32m+[m[32m    // è®¡ç®—å¼€å§‹-éšè—ç»“æœ[m
[32m+[m[32m    isShow.value = false;[m
[32m+[m[32m    // è·å–è§„åˆ™æ•°ç»„[0ç§’ã€1åˆ†ã€2æ—¶ã€3æ—¥ã€4æœˆã€5æ˜ŸæœŸã€6å¹´][m
[32m+[m[32m    let ruleArr = props.ex.split(' ');[m
[32m+[m[32m    // ç”¨äºè®°å½•è¿›å…¥å¾ªç¯çš„æ¬¡æ•°[m
[32m+[m[32m    let nums = 0;[m
[32m+[m[32m    // ç”¨äºæš‚æ—¶å­˜ç¬¦å·æ—¶é—´è§„åˆ™ç»“æœçš„æ•°ç»„[m
[32m+[m[32m    let resultArr = [];[m
[32m+[m[32m    // è·å–å½“å‰æ—¶é—´ç²¾ç¡®è‡³[å¹´ã€æœˆã€æ—¥ã€æ—¶ã€åˆ†ã€ç§’][m
[32m+[m[32m    let nTime = new Date();[m
[32m+[m[32m    let nYear = nTime.getFullYear();[m
[32m+[m[32m    let nMonth = nTime.getMonth() + 1;[m
[32m+[m[32m    let nDay = nTime.getDate();[m
[32m+[m[32m    let nHour = nTime.getHours();[m
[32m+[m[32m    let nMin = nTime.getMinutes();[m
[32m+[m[32m    let nSecond = nTime.getSeconds();[m
[32m+[m[32m    // æ ¹æ®è§„åˆ™è·å–åˆ°è¿‘100å¹´å¯èƒ½å¹´æ•°ç»„ã€æœˆæ•°ç»„ç­‰ç­‰[m
[32m+[m[32m    getSecondArr(ruleArr[0]);[m
[32m+[m[32m    getMinArr(ruleArr[1]);[m
[32m+[m[32m    getHourArr(ruleArr[2]);[m
[32m+[m[32m    getDayArr(ruleArr[3]);[m
[32m+[m[32m    getMonthArr(ruleArr[4]);[m
[32m+[m[32m    getWeekArr(ruleArr[5]);[m
[32m+[m[32m    getYearArr(ruleArr[6], nYear);[m
[32m+[m[32m    // å°†è·å–åˆ°çš„æ•°ç»„èµ‹å€¼-æ–¹ä¾¿ä½¿ç”¨[m
[32m+[m[32m    let sDate = dateArr.value[0];[m
[32m+[m[32m    let mDate = dateArr.value[1];[m
[32m+[m[32m    let hDate = dateArr.value[2];[m
[32m+[m[32m    let DDate = dateArr.value[3];[m
[32m+[m[32m    let MDate = dateArr.value[4];[m
[32m+[m[32m    let YDate = dateArr.value[5];[m
[32m+[m[32m    // è·å–å½“å‰æ—¶é—´åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•[m
[32m+[m[32m    let sIdx = getIndex(sDate, nSecond);[m
[32m+[m[32m    let mIdx = getIndex(mDate, nMin);[m
[32m+[m[32m    let hIdx = getIndex(hDate, nHour);[m
[32m+[m[32m    let DIdx = getIndex(DDate, nDay);[m
[32m+[m[32m    let MIdx = getIndex(MDate, nMonth);[m
[32m+[m[32m    let YIdx = getIndex(YDate, nYear);[m
[32m+[m[32m    // é‡ç½®æœˆæ—¥æ—¶åˆ†ç§’çš„å‡½æ•°(åé¢ç”¨çš„æ¯”è¾ƒå¤š)[m
[32m+[m[32m    const resetSecond = function () {[m
[32m+[m[32m        sIdx = 0;[m
[32m+[m[32m        nSecond = sDate[sIdx][m
[32m+[m[32m    }[m
[32m+[m[32m    const resetMin = function () {[m
[32m+[m[32m        mIdx = 0;[m
[32m+[m[32m        nMin = mDate[mIdx][m
[32m+[m[32m        resetSecond();[m
[32m+[m[32m    }[m
[32m+[m[32m    const resetHour = function () {[m
[32m+[m[32m        hIdx = 0;[m
[32m+[m[32m        nHour = hDate[hIdx][m
[32m+[m[32m        resetMin();[m
[32m+[m[32m    }[m
[32m+[m[32m    const resetDay = function () {[m
[32m+[m[32m        DIdx = 0;[m
[32m+[m[32m        nDay = DDate[DIdx][m
[32m+[m[32m        resetHour();[m
[32m+[m[32m    }[m
[32m+[m[32m    const resetMonth = function () {[m
[32m+[m[32m        MIdx = 0;[m
[32m+[m[32m        nMonth = MDate[MIdx][m
[32m+[m[32m        resetDay();[m
[32m+[m[32m    }[m
[32m+[m[32m    // å¦‚æœå½“å‰å¹´ä»½ä¸ä¸ºæ•°ç»„ä¸­å½“å‰å€¼[m
[32m+[m[32m    if (nYear !== YDate[YIdx]) {[m
[32m+[m[32m        resetMonth();[m
[32m+[m[32m    }[m
[32m+[m[32m    // å¦‚æœå½“å‰æœˆä»½ä¸ä¸ºæ•°ç»„ä¸­å½“å‰å€¼[m
[32m+[m[32m    if (nMonth !== MDate[MIdx]) {[m
[32m+[m[32m        resetDay();[m
[32m+[m[32m    }[m
[32m+[m[32m    // å¦‚æœå½“å‰â€œæ—¥â€ä¸ä¸ºæ•°ç»„ä¸­å½“å‰å€¼[m
[32m+[m[32m    if (nDay !== DDate[DIdx]) {[m
[32m+[m[32m        resetHour();[m
[32m+[m[32m    }[m
[32m+[m[32m    // å¦‚æœå½“å‰â€œæ—¶â€ä¸ä¸ºæ•°ç»„ä¸­å½“å‰å€¼[m
[32m+[m[32m    if (nHour !== hDate[hIdx]) {[m
[32m+[m[32m        resetMin();[m
[32m+[m[32m    }[m
[32m+[m[32m    // å¦‚æœå½“å‰â€œåˆ†â€ä¸ä¸ºæ•°ç»„ä¸­å½“å‰å€¼[m
[32m+[m[32m    if (nMin !== mDate[mIdx]) {[m
[32m+[m[32m        resetSecond();[m
[32m+[m[32m    }[m
[32m+[m[32m    // å¾ªç¯å¹´ä»½æ•°ç»„[m
[32m+[m[32m    goYear: for (let Yi = YIdx; Yi < YDate.length; Yi++) {[m
[32m+[m[32m        let YY = YDate[Yi];[m
[32m+[m[32m        // å¦‚æœåˆ°è¾¾æœ€å¤§å€¼æ—¶[m
[32m+[m[32m        if (nMonth > MDate[MDate.length - 1]) {[m
[32m+[m[32m            resetMonth();[m
[32m+[m[32m            continue;[m
[32m+[m[32m        }[m
[32m+[m[32m        // å¾ªç¯æœˆä»½æ•°ç»„[m
[32m+[m[32m        goMonth: for (let Mi = MIdx; Mi < MDate.length; Mi++) {[m
[32m+[m[32m            // èµ‹å€¼ã€æ–¹ä¾¿åé¢è¿ç®—[m
[32m+[m[32m            let MM = MDate[Mi];[m
[32m+[m[32m            MM = MM < 10 ? '0' + MM : MM;[m
[32m+[m[32m            // å¦‚æœåˆ°è¾¾æœ€å¤§å€¼æ—¶[m
[32m+[m[32m            if (nDay > DDate[DDate.length - 1]) {[m
[32m+[m[32m                resetDay();[m
[32m+[m[32m                if (Mi === MDate.length - 1) {[m
[32m+[m[32m                    resetMonth();[m
[32m+[m[32m                    continue goYear;[m
[32m+[m[32m                }[m
[32m+[m[32m                continue;[m
[32m+[m[32m            }[m
[32m+[m[32m            // å¾ªç¯æ—¥æœŸæ•°ç»„[m
[32m+[m[32m            goDay: for (let Di = DIdx; Di < DDate.length; Di++) {[m
[32m+[m[32m                // èµ‹å€¼ã€æ–¹ä¾¿åé¢è¿ç®—[m
[32m+[m[32m                let DD = DDate[Di];[m
[32m+[m[32m                let thisDD = DD < 10 ? '0' + DD : DD;[m
[32m+[m[32m                // å¦‚æœåˆ°è¾¾æœ€å¤§å€¼æ—¶[m
[32m+[m[32m                if (nHour > hDate[hDate.length - 1]) {[m
[32m+[m[32m                    resetHour();[m
[32m+[m[32m                    if (Di === DDate.length - 1) {[m
[32m+[m[32m                        resetDay();[m
[32m+[m[32m                        if (Mi === MDate.length - 1) {[m
[32m+[m[32m                            resetMonth();[m
[32m+[m[32m                            continue goYear;[m
[32m+[m[32m                        }[m
[32m+[m[32m                        continue goMonth;[m
[32m+[m[32m                    }[m
[32m+[m[32m                    continue;[m
[32m+[m[32m                }[m
[32m+[m[32m                // åˆ¤æ–­æ—¥æœŸçš„åˆæ³•æ€§ï¼Œä¸åˆæ³•çš„è¯ä¹Ÿæ˜¯è·³å‡ºå½“å‰å¾ªç¯[m
[32m+[m[32m                if (checkDate(YY + '-' + MM + '-' + thisDD + ' 00:00:00') !== true && dayRule.value !== 'workDay' && dayRule.value !== 'lastWeek' && dayRule.value !== 'lastDay') {[m
[32m+[m[32m                    resetDay();[m
[32m+[m[32m                    continue goMonth;[m
[32m+[m[32m                }[m
[32m+[m[32m                // å¦‚æœæ—¥æœŸè§„åˆ™ä¸­æœ‰å€¼æ—¶[m
[32m+[m[32m                if (dayRule.value === 'lastDay') {[m
[32m+[m[32m                    // å¦‚æœä¸æ˜¯åˆæ³•æ—¥æœŸåˆ™éœ€è¦å°†å‰å°†æ—¥æœŸè°ƒåˆ°åˆæ³•æ—¥æœŸå³æœˆæœ«æœ€åä¸€å¤©[m
[32m+[m[32m                    if (checkDate(YY + '-' + MM + '-' + thisDD + ' 00:00:00') !== true) {[m
[32m+[m[32m                        while (DD > 0 && checkDate(YY + '-' + MM + '-' + thisDD + ' 00:00:00') !== true) {[m
[32m+[m[32m                            DD--;[m
[32m+[m[32m                            thisDD = DD < 10 ? '0' + DD : DD;[m
[32m+[m[32m                        }[m
[32m+[m[32m                    }[m
[32m+[m[32m                } else if (dayRule.value === 'workDay') {[m
[32m+[m[32m                    // æ ¡éªŒå¹¶è°ƒæ•´å¦‚æœæ˜¯2æœˆ30å·è¿™ç§æ—¥æœŸä¼ è¿›æ¥æ—¶éœ€è°ƒæ•´è‡³æ­£å¸¸æœˆåº•[m
[32m+[m[32m                    if (checkDate(YY + '-' + MM + '-' + thisDD + ' 00:00:00') !== true) {[m
[32m+[m[32m                        while (DD > 0 && checkDate(YY + '-' + MM + '-' + thisDD + ' 00:00:00') !== true) {[m
[32m+[m[32m                            DD--;[m
[32m+[m[32m                            thisDD = DD < 10 ? '0' + DD : DD;[m
[32m+[m[32m                        }[m
[32m+[m[32m                    }[m
[32m+[m[32m                    // è·å–è¾¾åˆ°æ¡ä»¶çš„æ—¥æœŸæ˜¯æ˜ŸæœŸX[m
[32m+[m[32m                    let thisWeek = formatDate(new Date(YY + '-' + MM + '-' + thisDD + ' 00:00:00'), 'week');[m
[32m+[m[32m                    // å½“æ˜ŸæœŸæ—¥æ—¶[m
[32m+[m[32m                    if (thisWeek === 1) {[m
[32m+[m[32m                        // å…ˆæ‰¾ä¸‹ä¸€ä¸ªæ—¥ï¼Œå¹¶åˆ¤æ–­æ˜¯å¦ä¸ºæœˆåº•[m
[32m+[m[32m                        DD++;[m
[32m+[m[32m                        thisDD = DD < 10 ? '0' + DD : DD;[m
[32m+[m[32m                        // åˆ¤æ–­ä¸‹ä¸€æ—¥å·²ç»ä¸æ˜¯åˆæ³•æ—¥æœŸ[m
[32m+[m[32m                        if (checkDate(YY + '-' + MM + '-' + thisDD + ' 00:00:00') !== true) {[m
[32m+[m[32m                            DD -= 3;[m
[32m+[m[32m                        }[m
[32m+[m[32m                    } else if (thisWeek === 7) {[m
[32m+[m[32m                        // å½“æ˜ŸæœŸ6æ—¶åªéœ€åˆ¤æ–­ä¸æ˜¯1å·å°±å¯è¿›è¡Œæ“ä½œ[m
[32m+[m[32m                        if (dayRuleSup.value !== 1) {[m
[32m+[m[32m                            DD--;[m
[32m+[m[32m                        } else {[m
[32m+[m[32m                            DD += 2;[m
[32m+[m[32m                        }[m
[32m+[m[32m                    }[m
[32m+[m[32m                } else if (dayRule.value === 'weekDay') {[m
[32m+[m[32m                    // å¦‚æœæŒ‡å®šäº†æ˜¯æ˜ŸæœŸå‡ [m
[32m+[m[32m                    // è·å–å½“å‰æ—¥æœŸæ˜¯å±äºæ˜ŸæœŸå‡ [m
[32m+[m[32m                    let thisWeek = formatDate(new Date(YY + '-' + MM + '-' + DD + ' 00:00:00'), 'week');[m
[32m+[m[32m                    // æ ¡éªŒå½“å‰æ˜ŸæœŸæ˜¯å¦åœ¨æ˜ŸæœŸæ± ï¼ˆdayRuleSupï¼‰ä¸­[m
[32m+[m[32m                    if (dayRuleSup.value.indexOf(thisWeek) < 0) {[m
[32m+[m[32m                        // å¦‚æœåˆ°è¾¾æœ€å¤§å€¼æ—¶[m
[32m+[m[32m                        if (Di === DDate.length - 1) {[m
[32m+[m[32m                            resetDay();[m
[32m+[m[32m                            if (Mi === MDate.length - 1) {[m
[32m+[m[32m                                resetMonth();[m
[32m+[m[32m                                continue goYear;[m
[32m+[m[32m                            }[m
[32m+[m[32m                            continue goMonth;[m
[32m+[m[32m                        }[m
[32m+[m[32m                        continue;[m
[32m+[m[32m                    }[m
[32m+[m[32m                } else if (dayRule.value === 'assWeek') {[m
[32m+[m[32m                    // å¦‚æœæŒ‡å®šäº†æ˜¯ç¬¬å‡ å‘¨çš„æ˜ŸæœŸå‡ [m
[32m+[m[32m                    // è·å–æ¯æœˆ1å·æ˜¯å±äºæ˜ŸæœŸå‡ [m
[32m+[m[32m                    let thisWeek = formatDate(new Date(YY + '-' + MM + '-' + DD + ' 00:00:00'), 'week');[m
[32m+[m[32m                    if (dayRuleSup.value[1] >= thisWeek) {[m
[32m+[m[32m                        DD = (dayRuleSup.value[0] - 1) * 7 + dayRuleSup.value[1] - thisWeek + 1;[m
[32m+[m[32m                    } else {[m
[32m+[m[32m                        DD = dayRuleSup.value[0] * 7 + dayRuleSup.value[1] - thisWeek + 1;[m
[32m+[m[32m                    }[m
[32m+[m[32m                } else if (dayRule.value === 'lastWeek') {[m
[32m+[m[32m                    // å¦‚æœæŒ‡å®šäº†æ¯æœˆæœ€åä¸€ä¸ªæ˜ŸæœŸå‡ [m
[32m+[m[32m                    // æ ¡éªŒå¹¶è°ƒæ•´å¦‚æœæ˜¯2æœˆ30å·è¿™ç§æ—¥æœŸä¼ è¿›æ¥æ—¶éœ€è°ƒæ•´è‡³æ­£å¸¸æœˆåº•[m
[32m+[m[32m                    if (checkDate(YY + '-' + MM + '-' + thisDD + ' 00:00:00') !== true) {[m
[32m+[m[32m                        while (DD > 0 && checkDate(YY + '-' + MM + '-' + thisDD + ' 00:00:00') !== true) {[m
[32m+[m[32m                            DD--;[m
[32m+[m[32m                            thisDD = DD < 10 ? '0' + DD : DD;[m
[32m+[m[32m                        }[m
[32m+[m[32m                    }[m
[32m+[m[32m                    // è·å–æœˆæœ«æœ€åä¸€å¤©æ˜¯æ˜ŸæœŸå‡ [m
[32m+[m[32m                    let thisWeek = formatDate(new Date(YY + '-' + MM + '-' + thisDD + ' 00:00:00'), 'week');[m
[32m+[m[32m                    // æ‰¾åˆ°è¦æ±‚ä¸­æœ€è¿‘çš„é‚£ä¸ªæ˜ŸæœŸå‡ [m
[32m+[m[32m                    if (dayRuleSup.value < thisWeek) {[m
[32m+[m[32m                        DD -= thisWeek - dayRuleSup.value;[m
[32m+[m[32m                    } else if (dayRuleSup.value > thisWeek) {[m
[32m+[m[32m                        DD -= 7 - (dayRuleSup.value - thisWeek)[m
[32m+[m[32m                    }[m
[32m+[m[32m                }[m
[32m+[m[32m                // åˆ¤æ–­æ—¶é—´å€¼æ˜¯å¦å°äº10ç½®æ¢æˆâ€œ05â€è¿™ç§æ ¼å¼[m
[32m+[m[32m                DD = DD < 10 ? '0' + DD : DD;[m
[32m+[m[32m                // å¾ªç¯â€œæ—¶â€æ•°ç»„[m
[32m+[m[32m                goHour: for (let hi = hIdx; hi < hDate.length; hi++) {[m
[32m+[m[32m                    let hh = hDate[hi] < 10 ? '0' + hDate[hi] : hDate[hi][m
[32m+[m[32m                    // å¦‚æœåˆ°è¾¾æœ€å¤§å€¼æ—¶[m
[32m+[m[32m                    if (nMin > mDate[mDate.length - 1]) {[m
[32m+[m[32m                        resetMin();[m
[32m+[m[32m                        if (hi === hDate.length - 1) {[m
[32m+[m[32m                            resetHour();[m
[32m+[m[32m                            if (Di === DDate.length - 1) {[m
[32m+[m[32m                                resetDay();[m
[32m+[m[32m                                if (Mi === MDate.length - 1) {[m
[32m+[m[32m                                    resetMonth();[m
[32m+[m[32m                                    continue goYear;[m
[32m+[m[32m                                }[m
[32m+[m[32m                                continue goMonth;[m
[32m+[m[32m                            }[m
[32m+[m[32m                            continue goDay;[m
[32m+[m[32m                        }[m
[32m+[m[32m                        continue;[m
[32m+[m[32m                    }[m
[32m+[m[32m                    // å¾ªç¯"åˆ†"æ•°ç»„[m
[32m+[m[32m                    goMin: for (let mi = mIdx; mi < mDate.length; mi++) {[m
[32m+[m[32m                        let mm = mDate[mi] < 10 ? '0' + mDate[mi] : mDate[mi];[m
[32m+[m[32m                        // å¦‚æœåˆ°è¾¾æœ€å¤§å€¼æ—¶[m
[32m+[m[32m                        if (nSecond > sDate[sDate.length - 1]) {[m
[32m+[m[32m                            resetSecond();[m
[32m+[m[32m                            if (mi === mDate.length - 1) {[m
[32m+[m[32m                                resetMin();[m
[32m+[m[32m                                if (hi === hDate.length - 1) {[m
[32m+[m[32m                                    resetHour();[m
[32m+[m[32m                                    if (Di === DDate.length - 1) {[m
[32m+[m[32m                                        resetDay();[m
[32m+[m[32m                                        if (Mi === MDate.length - 1) {[m
[32m+[m[32m                                            resetMonth();[m
[32m+[m[32m                                            continue goYear;[m
[32m+[m[32m                                        }[m
[32m+[m[32m                                        continue goMonth;[m
[32m+[m[32m                                    }[m
[32m+[m[32m                                    continue goDay;[m
[32m+[m[32m                                }[m
[32m+[m[32m                                continue goHour;[m
[32m+[m[32m                            }[m
[32m+[m[32m                            continue;[m
[32m+[m[32m                        }[m
[32m+[m[32m                        // å¾ªç¯"ç§’"æ•°ç»„[m
[32m+[m[32m                        goSecond: for (let si = sIdx; si <= sDate.length - 1; si++) {[m
[32m+[m[32m                            let ss = sDate[si] < 10 ? '0' + sDate[si] : sDate[si];[m
[32m+[m[32m                            // æ·»åŠ å½“å‰æ—¶é—´ï¼ˆæ—¶é—´åˆæ³•æ€§åœ¨æ—¥æœŸå¾ªç¯æ—¶å·²ç»åˆ¤æ–­ï¼‰[m
[32m+[m[32m                            if (MM !== '00' && DD !== '00') {[m
[32m+[m[32m                                resultArr.push(YY + '-' + MM + '-' + DD + ' ' + hh + ':' + mm + ':' + ss)[m
[32m+[m[32m                                nums++;[m
[32m+[m[32m                            }[m
[32m+[m[32m                            // å¦‚æœæ¡æ•°æ»¡äº†å°±é€€å‡ºå¾ªç¯[m
[32m+[m[32m                            if (nums === 5) break goYear;[m
[32m+[m[32m                            // å¦‚æœåˆ°è¾¾æœ€å¤§å€¼æ—¶[m
[32m+[m[32m                            if (si === sDate.length - 1) {[m
[32m+[m[32m                                resetSecond();[m
[32m+[m[32m                                if (mi === mDate.length - 1) {[m
[32m+[m[32m                                    resetMin();[m
[32m+[m[32m                                    if (hi === hDate.length - 1) {[m
[32m+[m[32m                                        resetHour();[m
[32m+[m[32m                                        if (Di === DDate.length - 1) {[m
[32m+[m[32m                                            resetDay();[m
[32m+[m[32m                                            if (Mi === MDate.length - 1) {[m
[32m+[m[32m                                                resetMonth();[m
[32m+[m[32m                                                continue goYear;[m
[32m+[m[32m                                            }[m
[32m+[m[32m                                            continue goMonth;[m
[32m+[m[32m                                        }[m
[32m+[m[32m                                        continue goDay;[m
[32m+[m[32m                                    }[m
[32m+[m[32m                                    continue goHour;[m
[32m+[m[32m                                }[m
[32m+[m[32m                                continue goMin;[m
[32m+[m[32m                            }[m
[32m+[m[32m                        } //goSecond[m
[32m+[m[32m                    } //goMin[m
[32m+[m[32m                }//goHour[m
[32m+[m[32m            }//goDay[m
[32m+[m[32m        }//goMonth[m
[32m+[m[32m    }[m
[32m+[m[32m    // åˆ¤æ–­100å¹´å†…çš„ç»“æœæ¡æ•°[m
[32m+[m[32m    if (resultArr.length === 0) {[m
[32m+[m[32m        resultList.value = ['æ²¡æœ‰è¾¾åˆ°æ¡ä»¶çš„ç»“æœï¼'];[m
[32m+[m[32m    } else {[m
[32m+[m[32m        resultList.value = resultArr;[m
[32m+[m[32m        if (resultArr.length !== 5) {[m
[32m+[m[32m            resultList.value.push('æœ€è¿‘100å¹´å†…åªæœ‰ä¸Šé¢' + resultArr.length + 'æ¡ç»“æœï¼')[m
[32m+[m[32m        }[m
[32m+[m[32m    }[m
[32m+[m[32m    // è®¡ç®—å®Œæˆ-æ˜¾ç¤ºç»“æœ[m
[32m+[m[32m    isShow.value = true;[m
[32m+[m[32m}[m
[32m+[m[32m// ç”¨äºè®¡ç®—æŸä½æ•°å­—åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•[m
[32m+[m[32mfunction getIndex(arr, value) {[m
[32m+[m[32m    if (value <= arr[0] || value > arr[arr.length - 1]) {[m
[32m+[m[32m        return 0;[m
[32m+[m[32m    } else {[m
[32m+[m[32m        for (let i = 0; i < arr.length - 1; i++) {[m
[32m+[m[32m            if (value > arr[i] && value <= arr[i + 1]) {[m
[32m+[m[32m                return i + 1;[m
[32m+[m[32m            }[m
[32m+[m[32m        }[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m[32m// è·å–"å¹´"æ•°ç»„[m
[32m+[m[32mfunction getYearArr(rule, year) {[m
[32m+[m[32m    dateArr.value[5] = getOrderArr(year, year + 100);[m
[32m+[m[32m    if (rule !== undefined) {[m
[32m+[m[32m        if (rule.indexOf('-') >= 0) {[m
[32m+[m[32m            dateArr.value[5] = getCycleArr(rule, year + 100, false)[m
[32m+[m[32m        } else if (rule.indexOf('/') >= 0) {[m
[32m+[m[32m            dateArr.value[5] = getAverageArr(rule, year + 100)[m
[32m+[m[32m        } else if (rule !== '*') {[m
[32m+[m[32m            dateArr.value[5] = getAssignArr(rule)[m
[32m+[m[32m        }[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m[32m// è·å–"æœˆ"æ•°ç»„[m
[32m+[m[32mfunction getMonthArr(rule) {[m
[32m+[m[32m    dateArr.value[4] = getOrderArr(1, 12);[m
[32m+[m[32m    if (rule.indexOf('-') >= 0) {[m
[32m+[m[32m        dateArr.value[4] = getCycleArr(rule, 12, false)[m
[32m+[m[32m    } else if (rule.indexOf('/') >= 0) {[m
[32m+[m[32m        dateArr.value[4] = getAverageArr(rule, 12)[m
[32m+[m[32m    } else if (rule !== '*') {[m
[32m+[m[32m        dateArr.value[4] = getAssignArr(rule)[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m[32m// è·å–"æ—¥"æ•°ç»„-ä¸»è¦ä¸ºæ—¥æœŸè§„åˆ™[m
[32m+[m[32mfunction getWeekArr(rule) {[m
[32m+[m[32m    // åªæœ‰å½“æ—¥æœŸè§„åˆ™çš„ä¸¤ä¸ªå€¼å‡ä¸ºâ€œâ€æ—¶åˆ™è¡¨è¾¾æ—¥æœŸæ˜¯æœ‰é€‰é¡¹çš„[m
[32m+[m[32m    if (dayRule.value === '' && dayRuleSup.value === '') {[m
[32m+[m[32m        if (rule.indexOf('-') >= 0) {[m
[32m+[m[32m            dayRule.value = 'weekDay';[m
[32m+[m[32m            dayRuleSup.value = getCycleArr(rule, 7, false)[m
[32m+[m[32m        } else if (rule.indexOf('#') >= 0) {[m
[32m+[m[32m            dayRule.value = 'assWeek';[m
[32m+[m[32m            let matchRule = rule.match(/[0-9]{1}/g);[m
[32m+[m[32m            dayRuleSup.value = [Number(matchRule[1]), Number(matchRule[0])];[m
[32m+[m[32m            dateArr.value[3] = [1];[m
[32m+[m[32m            if (dayRuleSup.value[1] === 7) {[m
[32m+[m[32m                dayRuleSup.value[1] = 0;[m
[32m+[m[32m            }[m
[32m+[m[32m        } else if (rule.indexOf('L') >= 0) {[m
[32m+[m[32m            dayRule.value = 'lastWeek';[m
[32m+[m[32m            dayRuleSup.value = Number(rule.match(/[0-9]{1,2}/g)[0]);[m
[32m+[m[32m            dateArr.value[3] = [31];[m
[32m+[m[32m            if (dayRuleSup.value === 7) {[m
[32m+[m[32m                dayRuleSup.value = 0;[m
[32m+[m[32m            }[m
[32m+[m[32m        } else if (rule !== '*' && rule !== '?') {[m
[32m+[m[32m            dayRule.value = 'weekDay';[m
[32m+[m[32m            dayRuleSup.value = getAssignArr(rule)[m
[32m+[m[32m        }[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m[32m// è·å–"æ—¥"æ•°ç»„-å°‘é‡ä¸ºæ—¥æœŸè§„åˆ™[m
[32m+[m[32mfunction getDayArr(rule) {[m
[32m+[m[32m    dateArr.value[3] = getOrderArr(1, 31);[m
[32m+[m[32m    dayRule.value = '';[m
[32m+[m[32m    dayRuleSup.value = '';[m
[32m+[m[32m    if (rule.indexOf('-') >= 0) {[m
[32m+[m[32m        dateArr.value[3] = getCycleArr(rule, 31, false)[m
[32m+[m[32m        dayRuleSup.value = 'null';[m
[32m+[m[32m    } else if (rule.indexOf('/') >= 0) {[m
[32m+[m[32m        dateArr.value[3] = getAverageArr(rule, 31)[m
[32m+[m[32m        dayRuleSup.value = 'null';[m
[32m+[m[32m    } else if (rule.indexOf('W') >= 0) {[m
[32m+[m[32m        dayRule.value = 'workDay';[m
[32m+[m[32m        dayRuleSup.value = Number(rule.match(/[0-9]{1,2}/g)[0]);[m
[32m+[m[32m        dateArr.value[3] = [dayRuleSup.value];[m
[32m+[m[32m    } else if (rule.indexOf('L') >= 0) {[m
[32m+[m[32m        dayRule.value = 'lastDay';[m
[32m+[m[32m        dayRuleSup.value = 'null';[m
[32m+[m[32m        dateArr.value[3] = [31];[m
[32m+[m[32m    } else if (rule !== '*' && rule !== '?') {[m
[32m+[m[32m        dateArr.value[3] = getAssignArr(rule)[m
[32m+[m[32m        dayRuleSup.value = 'null';[m
[32m+[m[32m    } else if (rule === '*') {[m
[32m+[m[32m        dayRuleSup.value = 'null';[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m[32m// è·å–"æ—¶"æ•°ç»„[m
[32m+[m[32mfunction getHourArr(rule) {[m
[32m+[m[32m    dateArr.value[2] = getOrderArr(0, 23);[m
[32m+[m[32m    if (rule.indexOf('-') >= 0) {[m
[32m+[m[32m        dateArr.value[2] = getCycleArr(rule, 24, true)[m
[32m+[m[32m    } else if (rule.indexOf('/') >= 0) {[m
[32m+[m[32m        dateArr.value[2] = getAverageArr(rule, 23)[m
[32m+[m[32m    } else if (rule !== '*') {[m
[32m+[m[32m        dateArr.value[2] = getAssignArr(rule)[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m[32m// è·å–"åˆ†"æ•°ç»„[m
[32m+[m[32mfunction getMinArr(rule) {[m
[32m+[m[32m    dateArr.value[1] = getOrderArr(0, 59);[m
[32m+[m[32m    if (rule.indexOf('-') >= 0) {[m
[32m+[m[32m        dateArr.value[1] = getCycleArr(rule, 60, true)[m
[32m+[m[32m    } else if (rule.indexOf('/') >= 0) {[m
[32m+[m[32m        dateArr.value[1] = getAverageArr(rule, 59)[m
[32m+[m[32m    } else if (rule !== '*') {[m
[32m+[m[32m        dateArr.value[1] = getAssignArr(rule)[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m[32m// è·å–"ç§’"æ•°ç»„[m
[32m+[m[32mfunction getSecondArr(rule) {[m
[32m+[m[32m    dateArr.value[0] = getOrderArr(0, 59);[m
[32m+[m[32m    if (rule.indexOf('-') >= 0) {[m
[32m+[m[32m        dateArr.value[0] = getCycleArr(rule, 60, true)[m
[32m+[m[32m    } else if (rule.indexOf('/') >= 0) {[m
[32m+[m[32m        dateArr.value[0] = getAverageArr(rule, 59)[m
[32m+[m[32m    } else if (rule !== '*') {[m
[32m+[m[32m        dateArr.value[0] = getAssignArr(rule)[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m[32m// æ ¹æ®ä¼ è¿›æ¥çš„min-maxè¿”å›ä¸€ä¸ªé¡ºåºçš„æ•°ç»„[m
[32m+[m[32mfunction getOrderArr(min, max) {[m
[32m+[m[32m    let arr = [];[m
[32m+[m[32m    for (let i = min; i <= max; i++) {[m
[32m+[m[32m        arr.push(i);[m
[32m+[m[32m    }[m
[32m+[m[32m    return arr;[m
[32m+[m[32m}[m
[32m+[m[32m// æ ¹æ®è§„åˆ™ä¸­æŒ‡å®šçš„é›¶æ•£å€¼è¿”å›ä¸€ä¸ªæ•°ç»„[m
[32m+[m[32mfunction getAssignArr(rule) {[m
[32m+[m[32m    let arr = [];[m
[32m+[m[32m    let assiginArr = rule.split(',');[m
[32m+[m[32m    for (let i = 0; i < assiginArr.length; i++) {[m
[32m+[m[32m        arr[i] = Number(assiginArr[i])[m
[32m+[m[32m    }[m
[32m+[m[32m    arr.sort(compare)[m
[32m+[m[32m    return arr;[m
[32m+[m[32m}[m
[32m+[m[32m// æ ¹æ®ä¸€å®šç®—æœ¯è§„åˆ™è®¡ç®—è¿”å›ä¸€ä¸ªæ•°ç»„[m
[32m+[m[32mfunction getAverageArr(rule, limit) {[m
[32m+[m[32m    let arr = [];[m
[32m+[m[32m    let agArr = rule.split('/');[m
[32m+[m[32m    let min = Number(agArr[0]);[m
[32m+[m[32m    let step = Number(agArr[1]);[m
[32m+[m[32m    while (min <= limit) {[m
[32m+[m[32m        arr.push(min);[m
[32m+[m[32m        min += step;[m
[32m+[m[32m    }[m
[32m+[m[32m    return arr;[m
[32m+[m[32m}[m
[32m+[m[32m// æ ¹æ®è§„åˆ™è¿”å›ä¸€ä¸ªå…·æœ‰å‘¨æœŸæ€§çš„æ•°ç»„[m
[32m+[m[32mfunction getCycleArr(rule, limit, status) {[m
[32m+[m[32m    // status--è¡¨ç¤ºæ˜¯å¦ä»0å¼€å§‹ï¼ˆåˆ™ä»1å¼€å§‹ï¼‰[m
[32m+[m[32m    let arr = [];[m
[32m+[m[32m    let cycleArr = rule.split('-');[m
[32m+[m[32m    let min = Number(cycleArr[0]);[m
[32m+[m[32m    let max = Number(cycleArr[1]);[m
[32m+[m[32m    if (min > max) {[m
[32m+[m[32m        max += limit;[m
[32m+[m[32m    }[m
[32m+[m[32m    for (let i = min; i <= max; i++) {[m
[32m+[m[32m        let add = 0;[m
[32m+[m[32m        if (status === false && i % limit === 0) {[m
[32m+[m[32m            add = limit;[m
[32m+[m[32m        }[m
[32m+[m[32m        arr.push(Math.round(i % limit + add))[m
[32m+[m[32m    }[m
[32m+[m[32m    arr.sort(compare)[m
[32m+[m[32m    return arr;[m
[32m+[m[32m}[m
[32m+[m[32m// æ¯”è¾ƒæ•°å­—å¤§å°ï¼ˆç”¨äºArray.sortï¼‰[m
[32m+[m[32mfunction compare(value1, value2) {[m
[32m+[m[32m    if (value2 - value1 > 0) {[m
[32m+[m[32m        return -1;[m
[32m+[m[32m    } else {[m
[32m+[m[32m        return 1;[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m[32m// æ ¼å¼åŒ–æ—¥æœŸæ ¼å¼å¦‚ï¼š2017-9-19 18:04:33[m
[32m+[m[32mfunction formatDate(value, type) {[m
[32m+[m[32m    // è®¡ç®—æ—¥æœŸç›¸å…³å€¼[m
[32m+[m[32m    let time = typeof value == 'number' ? new Date(value) : value;[m
[32m+[m[32m    let Y = time.getFullYear();[m
[32m+[m[32m    let M = time.getMonth() + 1;[m
[32m+[m[32m    let D = time.getDate();[m
[32m+[m[32m    let h = time.getHours();[m
[32m+[m[32m    let m = time.getMinutes();[m
[32m+[m[32m    let s = time.getSeconds();[m
[32m+[m[32m    let week = time.getDay();[m
[32m+[m[32m    // å¦‚æœä¼ é€’äº†typeçš„è¯[m
[32m+[m[32m    if (type === undefined) {[m
[32m+[m[32m        return Y + '-' + (M < 10 ? '0' + M : M) + '-' + (D < 10 ? '0' + D : D) + ' ' + (h < 10 ? '0' + h : h) + ':' + (m < 10 ? '0' + m : m) + ':' + (s < 10 ? '0' + s : s);[m
[32m+[m[32m    } else if (type === 'week') {[m
[32m+[m[32m        // åœ¨quartzä¸­ 1ä¸ºæ˜ŸæœŸæ—¥[m
[32m+[m[32m        return week + 1;[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m[32m// æ£€æŸ¥æ—¥æœŸæ˜¯å¦å­˜åœ¨[m
[32m+[m[32mfunction checkDate(value) {[m
[32m+[m[32m    let time = new Date(value);[m
[32m+[m[32m    let format = formatDate(time)[m
[32m+[m[32m    return value === format;[m
[32m+[m[32m}[m
[32m+[m[32monMounted(() => {[m
[32m+[m[32m    expressionChange()[m
[32m+[m[32m})[m
[32m+[m[32m</script>[m
\ No newline at end of file[m
[1mdiff --git a/src/components/Crontab/second.vue b/src/components/Crontab/second.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..a7e57982[m
[1m--- /dev/null[m
[1m+++ b/src/components/Crontab/second.vue[m
[36m@@ -0,0 +1,128 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m    <el-form>[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio v-model='radioValue' :label="1">[m
[32m+[m[32m                ç§’ï¼Œå…è®¸çš„é€šé…ç¬¦[, - * /][m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio v-model='radioValue' :label="2">[m
[32m+[m[32m                å‘¨æœŸä»[m
[32m+[m[32m                <el-input-number v-model='cycle01' :min="0" :max="58" /> -[m
[32m+[m[32m                <el-input-number v-model='cycle02' :min="cycle01 + 1" :max="59" /> ç§’[m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio v-model='radioValue' :label="3">[m
[32m+[m[32m                ä»[m
[32m+[m[32m                <el-input-number v-model='average01' :min="0" :max="58" /> ç§’å¼€å§‹ï¼Œæ¯[m
[32m+[m[32m                <el-input-number v-model='average02' :min="1" :max="59 - average01" /> ç§’æ‰§è¡Œä¸€æ¬¡[m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio v-model='radioValue' :label="4">[m
[32m+[m[32m                æŒ‡å®š[m
[32m+[m[32m                <el-select clearable v-model="checkboxList" placeholder="å¯å¤šé€‰" multiple :multiple-limit="10">[m
[32m+[m[32m                    <el-option v-for="item in 60" :key="item" :label="item - 1" :value="item - 1" />[m
[32m+[m[32m                </el-select>[m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m    </el-form>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mconst emit = defineEmits(['update'])[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m    cron: {[m
[32m+[m[32m        type: Object,[m
[32m+[m[32m        default: {[m
[32m+[m[32m            second: "*",[m
[32m+[m[32m            min: "*",[m
[32m+[m[32m            hour: "*",[m
[32m+[m[32m            day: "*",[m
[32m+[m[32m            month: "*",[m
[32m+[m[32m            week: "?",[m
[32m+[m[32m            year: "",[m
[32m+[m[32m        }[m
[32m+[m[32m    },[m
[32m+[m[32m    check: {[m
[32m+[m[32m        type: Function,[m
[32m+[m[32m        default: () => {[m
[32m+[m[32m        }[m
[32m+[m[32m    }[m
[32m+[m[32m})[m
[32m+[m[32mconst radioValue = ref(1)[m
[32m+[m[32mconst cycle01 = ref(0)[m
[32m+[m[32mconst cycle02 = ref(1)[m
[32m+[m[32mconst average01 = ref(0)[m
[32m+[m[32mconst average02 = ref(1)[m
[32m+[m[32mconst checkboxList = ref([])[m
[32m+[m[32mconst checkCopy = ref([0])[m
[32m+[m[32mconst cycleTotal = computed(() => {[m
[32m+[m[32m    cycle01.value = props.check(cycle01.value, 0, 58)[m
[32m+[m[32m    cycle02.value = props.check(cycle02.value, cycle01.value + 1, 59)[m
[32m+[m[32m    return cycle01.value + '-' + cycle02.value[m
[32m+[m[32m})[m
[32m+[m[32mconst averageTotal = computed(() => {[m
[32m+[m[32m    average01.value = props.check(average01.value, 0, 58)[m
[32m+[m[32m    average02.value = props.check(average02.value, 1, 59 - average01.value)[m
[32m+[m[32m    return average01.value + '/' + average02.value[m
[32m+[m[32m})[m
[32m+[m[32mconst checkboxString = computed(() => {[m
[32m+[m[32m    return checkboxList.value.join(',')[m
[32m+[m[32m})[m
[32m+[m[32mwatch(() => props.cron.second, value => changeRadioValue(value))[m
[32m+[m[32mwatch([radioValue, cycleTotal, averageTotal, checkboxString], () => onRadioChange())[m
[32m+[m[32mfunction changeRadioValue(value) {[m
[32m+[m[32m    if (value === '*') {[m
[32m+[m[32m        radioValue.value = 1[m
[32m+[m[32m    } else if (value.indexOf('-') > -1) {[m
[32m+[m[32m        const indexArr = value.split('-')[m
[32m+[m[32m        cycle01.value = Number(indexArr[0])[m
[32m+[m[32m        cycle02.value = Number(indexArr[1])[m
[32m+[m[32m        radioValue.value = 2[m
[32m+[m[32m    } else if (value.indexOf('/') > -1) {[m
[32m+[m[32m        const indexArr = value.split('/')[m
[32m+[m[32m        average01.value = Number(indexArr[0])[m
[32m+[m[32m        average02.value = Number(indexArr[1])[m
[32m+[m[32m        radioValue.value = 3[m
[32m+[m[32m    } else {[m
[32m+[m[32m        checkboxList.value = [...new Set(value.split(',').map(item => Number(item)))][m
[32m+[m[32m        radioValue.value = 4[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m[32m// å•é€‰æŒ‰é’®å€¼å˜åŒ–æ—¶[m
[32m+[m[32mfunction onRadioChange() {[m
[32m+[m[32m    switch (radioValue.value) {[m
[32m+[m[32m        case 1:[m
[32m+[m[32m            emit('update', 'second', '*', 'second')[m
[32m+[m[32m            break[m
[32m+[m[32m        case 2:[m
[32m+[m[32m            emit('update', 'second', cycleTotal.value, 'second')[m
[32m+[m[32m            break[m
[32m+[m[32m        case 3:[m
[32m+[m[32m            emit('update', 'second', averageTotal.value, 'second')[m
[32m+[m[32m            break[m
[32m+[m[32m        case 4:[m
[32m+[m[32m            if (checkboxList.value.length === 0) {[m
[32m+[m[32m                checkboxList.value.push(checkCopy.value[0])[m
[32m+[m[32m            } else {[m
[32m+[m[32m                checkCopy.value = checkboxList.value[m
[32m+[m[32m            }[m
[32m+[m[32m            emit('update', 'second', checkboxString.value, 'second')[m
[32m+[m[32m            break[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang="scss" scoped>[m
[32m+[m[32m.el-input-number--small, .el-select, .el-select--small {[m
[32m+[m[32m    margin: 0 0.2rem;[m
[32m+[m[32m}[m
[32m+[m[32m.el-select, .el-select--small {[m
[32m+[m[32m    width: 18.8rem;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/components/Crontab/week.vue b/src/components/Crontab/week.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..105a3be2[m
[1m--- /dev/null[m
[1m+++ b/src/components/Crontab/week.vue[m
[36m@@ -0,0 +1,197 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m    <el-form>[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio v-model='radioValue' :label="1">[m
[32m+[m[32m                å‘¨ï¼Œå…è®¸çš„é€šé…ç¬¦[, - * ? / L #][m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio v-model='radioValue' :label="2">[m
[32m+[m[32m                ä¸æŒ‡å®š[m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio v-model='radioValue' :label="3">[m
[32m+[m[32m                å‘¨æœŸä»[m
[32m+[m[32m                <el-select clearable v-model="cycle01">[m
[32m+[m[32m                    <el-option[m
[32m+[m[32m                        v-for="(item,index) of weekList"[m
[32m+[m[32m                        :key="index"[m
[32m+[m[32m                        :label="item.value"[m
[32m+[m[32m                        :value="item.key"[m
[32m+[m[32m                        :disabled="item.key === 7"[m
[32m+[m[32m                    >{{item.value}}</el-option>[m
[32m+[m[32m                </el-select>[m
[32m+[m[32m                -[m
[32m+[m[32m                <el-select clearable v-model="cycle02">[m
[32m+[m[32m                    <el-option[m
[32m+[m[32m                        v-for="(item,index) of weekList"[m
[32m+[m[32m                        :key="index"[m
[32m+[m[32m                        :label="item.value"[m
[32m+[m[32m                        :value="item.key"[m
[32m+[m[32m                        :disabled="item.key <= cycle01"[m
[32m+[m[32m                    >{{item.value}}</el-option>[m
[32m+[m[32m                </el-select>[m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio v-model='radioValue' :label="4">[m
[32m+[m[32m                ç¬¬[m
[32m+[m[32m                <el-input-number v-model='average01' :min="1" :max="4" /> å‘¨çš„[m
[32m+[m[32m                <el-select clearable v-model="average02">[m
[32m+[m[32m                    <el-option v-for="item in weekList" :key="item.key" :label="item.value" :value="item.key" />[m
[32m+[m[32m                </el-select>[m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio v-model='radioValue' :label="5">[m
[32m+[m[32m                æœ¬æœˆæœ€åä¸€ä¸ª[m
[32m+[m[32m                <el-select clearable v-model="weekday">[m
[32m+[m[32m                    <el-option v-for="item in weekList" :key="item.key" :label="item.value" :value="item.key" />[m
[32m+[m[32m                </el-select>[m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio v-model='radioValue' :label="6">[m
[32m+[m[32m                æŒ‡å®š[m
[32m+[m[32m                <el-select class="multiselect" clearable v-model="checkboxList" placeholder="å¯å¤šé€‰" multiple :multiple-limit="6">[m
[32m+[m[32m                    <el-option v-for="item in weekList" :key="item.key" :label="item.value" :value="item.key" />[m
[32m+[m[32m                </el-select>[m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m
[32m+[m[32m    </el-form>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mconst emit = defineEmits(['update'])[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m    cron: {[m
[32m+[m[32m        type: Object,[m
[32m+[m[32m        default: {[m
[32m+[m[32m            second: "*",[m
[32m+[m[32m            min: "*",[m
[32m+[m[32m            hour: "*",[m
[32m+[m[32m            day: "*",[m
[32m+[m[32m            month: "*",[m
[32m+[m[32m            week: "?",[m
[32m+[m[32m            year: ""[m
[32m+[m[32m        }[m
[32m+[m[32m    },[m
[32m+[m[32m    check: {[m
[32m+[m[32m        type: Function,[m
[32m+[m[32m        default: () => {[m
[32m+[m[32m        }[m
[32m+[m[32m    }[m
[32m+[m[32m})[m
[32m+[m[32mconst radioValue = ref(2)[m
[32m+[m[32mconst cycle01 = ref(2)[m
[32m+[m[32mconst cycle02 = ref(3)[m
[32m+[m[32mconst average01 = ref(1)[m
[32m+[m[32mconst average02 = ref(2)[m
[32m+[m[32mconst weekday = ref(2)[m
[32m+[m[32mconst checkboxList = ref([])[m
[32m+[m[32mconst checkCopy = ref([2])[m
[32m+[m[32mconst weekList = ref([[m
[32m+[m[32m    {key: 1, value: 'æ˜ŸæœŸæ—¥'},[m
[32m+[m[32m    {key: 2, value: 'æ˜ŸæœŸä¸€'},[m
[32m+[m[32m    {key: 3, value: 'æ˜ŸæœŸäºŒ'},[m
[32m+[m[32m    {key: 4, value: 'æ˜ŸæœŸä¸‰'},[m
[32m+[m[32m    {key: 5, value: 'æ˜ŸæœŸå››'},[m
[32m+[m[32m    {key: 6, value: 'æ˜ŸæœŸäº”'},[m
[32m+[m[32m    {key: 7, value: 'æ˜ŸæœŸå…­'}[m
[32m+[m[32m])[m
[32m+[m[32mconst cycleTotal = computed(() => {[m
[32m+[m[32m    cycle01.value = props.check(cycle01.value, 1, 6)[m
[32m+[m[32m    cycle02.value = props.check(cycle02.value, cycle01.value + 1, 7)[m
[32m+[m[32m    return cycle01.value + '-' + cycle02.value[m
[32m+[m[32m})[m
[32m+[m[32mconst averageTotal = computed(() => {[m
[32m+[m[32m    average01.value = props.check(average01.value, 1, 4)[m
[32m+[m[32m    average02.value = props.check(average02.value, 1, 7)[m
[32m+[m[32m    return average02.value + '#' + average01.value[m
[32m+[m[32m})[m
[32m+[m[32mconst weekdayTotal = computed(() => {[m
[32m+[m[32m    weekday.value = props.check(weekday.value, 1, 7)[m
[32m+[m[32m    return weekday.value + 'L'[m
[32m+[m[32m})[m
[32m+[m[32mconst checkboxString = computed(() => {[m
[32m+[m[32m    return checkboxList.value.join(',')[m
[32m+[m[32m})[m
[32m+[m[32mwatch(() => props.cron.week, value => changeRadioValue(value))[m
[32m+[m[32mwatch([radioValue, cycleTotal, averageTotal, weekdayTotal, checkboxString], () => onRadioChange())[m
[32m+[m[32mfunction changeRadioValue(value) {[m
[32m+[m[32m    if (value === "*") {[m
[32m+[m[32m        radioValue.value = 1[m
[32m+[m[32m    } else if (value === "?") {[m
[32m+[m[32m        radioValue.value = 2[m
[32m+[m[32m    } else if (value.indexOf("-") > -1) {[m
[32m+[m[32m        const indexArr = value.split('-')[m
[32m+[m[32m        cycle01.value = Number(indexArr[0])[m
[32m+[m[32m        cycle02.value = Number(indexArr[1])[m
[32m+[m[32m        radioValue.value = 3[m
[32m+[m[32m    } else if (value.indexOf("#") > -1) {[m
[32m+[m[32m        const indexArr = value.split('#')[m
[32m+[m[32m        average01.value = Number(indexArr[1])[m
[32m+[m[32m        average02.value = Number(indexArr[0])[m
[32m+[m[32m        radioValue.value = 4[m
[32m+[m[32m    } else if (value.indexOf("L") > -1) {[m
[32m+[m[32m        const indexArr = value.split("L")[m
[32m+[m[32m        weekday.value = Number(indexArr[0])[m
[32m+[m[32m        radioValue.value = 5[m
[32m+[m[32m    } else {[m
[32m+[m[32m        checkboxList.value = [...new Set(value.split(',').map(item => Number(item)))][m
[32m+[m[32m        radioValue.value = 6[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m[32mfunction onRadioChange() {[m
[32m+[m[32m    if (radioValue.value === 2 && props.cron.day === '?') {[m
[32m+[m[32m        emit('update', 'day', '*', 'week')[m
[32m+[m[32m    }[m
[32m+[m[32m    if (radioValue.value !== 2 && props.cron.day !== '?') {[m
[32m+[m[32m        emit('update', 'day', '?', 'week')[m
[32m+[m[32m    }[m
[32m+[m[32m    switch (radioValue.value) {[m
[32m+[m[32m        case 1:[m
[32m+[m[32m            emit('update', 'week', '*', 'week')[m
[32m+[m[32m            break[m
[32m+[m[32m        case 2:[m
[32m+[m[32m            emit('update', 'week', '?', 'week')[m
[32m+[m[32m            break[m
[32m+[m[32m        case 3:[m
[32m+[m[32m            emit('update', 'week', cycleTotal.value, 'week')[m
[32m+[m[32m            break[m
[32m+[m[32m        case 4:[m
[32m+[m[32m            emit('update', 'week', averageTotal.value, 'week')[m
[32m+[m[32m            break[m
[32m+[m[32m        case 5:[m
[32m+[m[32m            emit('update', 'week', weekdayTotal.value, 'week')[m
[32m+[m[32m            break[m
[32m+[m[32m        case 6:[m
[32m+[m[32m            if (checkboxList.value.length === 0) {[m
[32m+[m[32m                checkboxList.value.push(checkCopy.value[0])[m
[32m+[m[32m            } else {[m
[32m+[m[32m                checkCopy.value = checkboxList.value[m
[32m+[m[32m            }[m
[32m+[m[32m            emit('update', 'week', checkboxString.value, 'week')[m
[32m+[m[32m            break[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang="scss" scoped>[m
[32m+[m[32m.el-input-number--small, .el-select, .el-select--small {[m
[32m+[m[32m    margin: 0 0.5rem;[m
[32m+[m[32m}[m
[32m+[m[32m.el-select, .el-select--small {[m
[32m+[m[32m    width: 8rem;[m
[32m+[m[32m}[m
[32m+[m[32m.el-select.multiselect, .el-select--small.multiselect {[m
[32m+[m[32m    width: 17.8rem;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/components/Crontab/year.vue b/src/components/Crontab/year.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..b26bdae8[m
[1m--- /dev/null[m
[1m+++ b/src/components/Crontab/year.vue[m
[36m@@ -0,0 +1,149 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m    <el-form>[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio :label="1" v-model='radioValue'>[m
[32m+[m[32m                ä¸å¡«ï¼Œå…è®¸çš„é€šé…ç¬¦[, - * /][m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio :label="2" v-model='radioValue'>[m
[32m+[m[32m                æ¯å¹´[m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio :label="3" v-model='radioValue'>[m
[32m+[m[32m                å‘¨æœŸä»[m
[32m+[m[32m                <el-input-number v-model='cycle01' :min='fullYear' :max="2098"/> -[m
[32m+[m[32m                <el-input-number v-model='cycle02' :min="cycle01 ? cycle01 + 1 : fullYear + 1" :max="2099"/>[m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio :label="4" v-model='radioValue'>[m
[32m+[m[32m                ä»[m
[32m+[m[32m                <el-input-number v-model='average01' :min='fullYear' :max="2098"/> å¹´å¼€å§‹ï¼Œæ¯[m
[32m+[m[32m                <el-input-number v-model='average02' :min="1" :max="2099 - average01 || fullYear"/> å¹´æ‰§è¡Œä¸€æ¬¡[m
[32m+[m[32m            </el-radio>[m
[32m+[m
[32m+[m[32m        </el-form-item>[m
[32m+[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m            <el-radio :label="5" v-model='radioValue'>[m
[32m+[m[32m                æŒ‡å®š[m
[32m+[m[32m                <el-select clearable v-model="checkboxList" placeholder="å¯å¤šé€‰" multiple :multiple-limit="8">[m
[32m+[m[32m                    <el-option v-for="item in 9" :key="item" :value="item - 1 + fullYear" :label="item -1 + fullYear" />[m
[32m+[m[32m                </el-select>[m
[32m+[m[32m            </el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m    </el-form>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mconst emit = defineEmits(['update'])[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m    cron: {[m
[32m+[m[32m        type: Object,[m
[32m+[m[32m        default: {[m
[32m+[m[32m            second: "*",[m
[32m+[m[32m            min: "*",[m
[32m+[m[32m            hour: "*",[m
[32m+[m[32m            day: "*",[m
[32m+[m[32m            month: "*",[m
[32m+[m[32m            week: "?",[m
[32m+[m[32m            year: ""[m
[32m+[m[32m        }[m
[32m+[m[32m    },[m
[32m+[m[32m    check: {[m
[32m+[m[32m        type: Function,[m
[32m+[m[32m        default: () => {[m
[32m+[m[32m        }[m
[32m+[m[32m    }[m
[32m+[m[32m})[m
[32m+[m[32mconst fullYear = ref(0)[m
[32m+[m[32mconst maxFullYear = ref(0)[m
[32m+[m[32mconst radioValue = ref(1)[m
[32m+[m[32mconst cycle01 = ref(0)[m
[32m+[m[32mconst cycle02 = ref(0)[m
[32m+[m[32mconst average01 = ref(0)[m
[32m+[m[32mconst average02 = ref(1)[m
[32m+[m[32mconst checkboxList = ref([])[m
[32m+[m[32mconst checkCopy = ref([])[m
[32m+[m[32mconst cycleTotal = computed(() => {[m
[32m+[m[32m    cycle01.value = props.check(cycle01.value, fullYear.value, maxFullYear.value - 1)[m
[32m+[m[32m    cycle02.value = props.check(cycle02.value, cycle01.value + 1, maxFullYear.value)[m
[32m+[m[32m    return cycle01.value + '-' + cycle02.value[m
[32m+[m[32m})[m
[32m+[m[32mconst averageTotal = computed(() => {[m
[32m+[m[32m    average01.value = props.check(average01.value, fullYear.value, maxFullYear.value - 1)[m
[32m+[m[32m    average02.value = props.check(average02.value, 1, 10)[m
[32m+[m[32m    return average01.value + '/' + average02.value[m
[32m+[m[32m})[m
[32m+[m[32mconst checkboxString = computed(() => {[m
[32m+[m[32m    return checkboxList.value.join(',')[m
[32m+[m[32m})[m
[32m+[m[32mwatch(() => props.cron.year, value => changeRadioValue(value))[m
[32m+[m[32mwatch([radioValue, cycleTotal, averageTotal, checkboxString], () => onRadioChange())[m
[32m+[m[32mfunction changeRadioValue(value) {[m
[32m+[m[32m    if (value === '') {[m
[32m+[m[32m        radioValue.value = 1[m
[32m+[m[32m    } else if (value === "*") {[m
[32m+[m[32m        radioValue.value = 2[m
[32m+[m[32m    } else if (value.indexOf("-") > -1) {[m
[32m+[m[32m        const indexArr = value.split('-')[m
[32m+[m[32m        cycle01.value = Number(indexArr[0])[m
[32m+[m[32m        cycle02.value = Number(indexArr[1])[m
[32m+[m[32m        radioValue.value = 3[m
[32m+[m[32m    } else if (value.indexOf("/") > -1) {[m
[32m+[m[32m        const indexArr = value.split('/')[m
[32m+[m[32m        average01.value = Number(indexArr[1])[m
[32m+[m[32m        average02.value = Number(indexArr[0])[m
[32m+[m[32m        radioValue.value = 4[m
[32m+[m[32m    } else {[m
[32m+[m[32m        checkboxList.value = [...new Set(value.split(',').map(item => Number(item)))][m
[32m+[m[32m        radioValue.value = 5[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m[32mfunction onRadioChange() {[m
[32m+[m[32m    switch (radioValue.value) {[m
[32m+[m[32m        case 1:[m
[32m+[m[32m            emit('update', 'year', '', 'year')[m
[32m+[m[32m            break[m
[32m+[m[32m        case 2:[m
[32m+[m[32m            emit('update', 'year', '*', 'year')[m
[32m+[m[32m            break[m
[32m+[m[32m        case 3:[m
[32m+[m[32m            emit('update', 'year', cycleTotal.value, 'year')[m
[32m+[m[32m            break[m
[32m+[m[32m        case 4:[m
[32m+[m[32m            emit('update', 'year', averageTotal.value, 'year')[m
[32m+[m[32m            break[m
[32m+[m[32m        case 5:[m
[32m+[m[32m            if (checkboxList.value.length === 0) {[m
[32m+[m[32m                checkboxList.value.push(checkCopy.value[0])[m
[32m+[m[32m            } else {[m
[32m+[m[32m                checkCopy.value = checkboxList.value[m
[32m+[m[32m            }[m
[32m+[m[32m            emit('update', 'year', checkboxString.value, 'year')[m
[32m+[m[32m            break[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[32m+[m[32monMounted(() => {[m
[32m+[m[32m    fullYear.value = Number(new Date().getFullYear())[m
[32m+[m[32m    maxFullYear.value = fullYear.value + 10[m
[32m+[m[32m    cycle01.value = fullYear.value[m
[32m+[m[32m    cycle02.value = cycle01.value + 1[m
[32m+[m[32m    average01.value = fullYear.value[m
[32m+[m[32m    checkCopy.value = [fullYear.value][m
[32m+[m[32m})[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang="scss" scoped>[m
[32m+[m[32m.el-input-number--small, .el-select, .el-select--small {[m
[32m+[m[32m    margin: 0 0.2rem;[m
[32m+[m[32m}[m
[32m+[m[32m.el-select, .el-select--small {[m
[32m+[m[32m    width: 18.8rem;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/components/DictTag/index.vue b/src/components/DictTag/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..7d0888cf[m
[1m--- /dev/null[m
[1m+++ b/src/components/DictTag/index.vue[m
[36m@@ -0,0 +1,82 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div>[m
[32m+[m[32m    <template v-for="(item, index) in options">[m
[32m+[m[32m      <template v-if="values.includes(item.value)">[m
[32m+[m[32m        <span[m
[32m+[m[32m          v-if="(item.elTagType == 'default' || item.elTagType == '') && (item.elTagClass == '' || item.elTagClass == null)"[m
[32m+[m[32m          :key="item.value"[m
[32m+[m[32m          :index="index"[m
[32m+[m[32m          :class="item.elTagClass"[m
[32m+[m[32m        >{{ item.label + " " }}</span>[m
[32m+[m[32m        <el-tag[m
[32m+[m[32m          v-else[m
[32m+[m[32m          :disable-transitions="true"[m
[32m+[m[32m          :key="item.value + ''"[m
[32m+[m[32m          :index="index"[m
[32m+[m[32m          :type="item.elTagType === 'primary' ? '' : item.elTagType"[m
[32m+[m[32m          :class="item.elTagClass"[m
[32m+[m[32m        >{{ item.label + " " }}</el-tag>[m
[32m+[m[32m      </template>[m
[32m+[m[32m    </template>[m
[32m+[m[32m    <template v-if="unmatch && showValue">[m
[32m+[m[32m      {{ unmatchArray | handleArray }}[m
[32m+[m[32m    </template>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32m// è®°å½•æœªåŒ¹é…çš„é¡¹[m
[32m+[m[32mconst unmatchArray = ref([]);[m
[32m+[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m  // æ•°æ®[m
[32m+[m[32m  options: {[m
[32m+[m[32m    type: Array,[m
[32m+[m[32m    default: null,[m
[32m+[m[32m  },[m
[32m+[m[32m  // å½“å‰çš„å€¼[m
[32m+[m[32m  value: [Number, String, Array],[m
[32m+[m[32m  // å½“æœªæ‰¾åˆ°åŒ¹é…çš„æ•°æ®æ—¶ï¼Œæ˜¾ç¤ºvalue[m
[32m+[m[32m  showValue: {[m
[32m+[m[32m    type: Boolean,[m
[32m+[m[32m    default: true,[m
[32m+[m[32m  },[m
[32m+[m[32m  separator: {[m
[32m+[m[32m    type: String,[m
[32m+[m[32m    default: ",",[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst values = computed(() => {[m
[32m+[m[32m  if (props.value === null || typeof props.value === 'undefined' || props.value === '') return [];[m
[32m+[m[32m  return Array.isArray(props.value) ? props.value.map(item => '' + item) : String(props.value).split(props.separator);[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst unmatch = computed(() => {[m
[32m+[m[32m  unmatchArray.value = [];[m
[32m+[m[32m  // æ²¡æœ‰valueä¸æ˜¾ç¤º[m
[32m+[m[32m  if (props.value === null || typeof props.value === 'undefined' || props.value === '' || props.options.length === 0) return false[m
[32m+[m[32m  // ä¼ å…¥å€¼ä¸ºæ•°ç»„[m
[32m+[m[32m  let unmatch = false // æ·»åŠ ä¸€ä¸ªæ ‡å¿—æ¥åˆ¤æ–­æ˜¯å¦æœ‰æœªåŒ¹é…é¡¹[m
[32m+[m[32m  values.value.forEach(item => {[m
[32m+[m[32m    if (!props.options.some(v => v.value === item)) {[m
[32m+[m[32m      unmatchArray.value.push(item)[m
[32m+[m[32m      unmatch = true // å¦‚æœæœ‰æœªåŒ¹é…é¡¹ï¼Œå°†æ ‡å¿—è®¾ç½®ä¸ºtrue[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m[32m  return unmatch // è¿”å›æ ‡å¿—çš„å€¼[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mfunction handleArray(array) {[m
[32m+[m[32m  if (array.length === 0) return "";[m
[32m+[m[32m  return array.reduce((pre, cur) => {[m
[32m+[m[32m    return pre + " " + cur;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style scoped>[m
[32m+[m[32m.el-tag + .el-tag {[m
[32m+[m[32m  margin-left: 10px;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
[1mdiff --git a/src/components/Editor/index.vue b/src/components/Editor/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..0a696f22[m
[1m--- /dev/null[m
[1m+++ b/src/components/Editor/index.vue[m
[36m@@ -0,0 +1,251 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div>[m
[32m+[m[32m    <el-upload[m
[32m+[m[32m      :action="uploadUrl"[m
[32m+[m[32m      :before-upload="handleBeforeUpload"[m
[32m+[m[32m      :on-success="handleUploadSuccess"[m
[32m+[m[32m      :on-error="handleUploadError"[m
[32m+[m[32m      name="file"[m
[32m+[m[32m      :show-file-list="false"[m
[32m+[m[32m      :headers="headers"[m
[32m+[m[32m      class="editor-img-uploader"[m
[32m+[m[32m      v-if="type == 'url'"[m
[32m+[m[32m    >[m
[32m+[m[32m      <i ref="uploadRef" class="editor-img-uploader"></i>[m
[32m+[m[32m    </el-upload>[m
[32m+[m[32m  </div>[m
[32m+[m[32m  <div class="editor">[m
[32m+[m[32m    <quill-editor[m
[32m+[m[32m      ref="quillEditorRef"[m
[32m+[m[32m      v-model:content="content"[m
[32m+[m[32m      contentType="html"[m
[32m+[m[32m      @textChange="(e) => $emit('update:modelValue', content)"[m
[32m+[m[32m      :options="options"[m
[32m+[m[32m      :style="styles"[m
[32m+[m[32m    />[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { QuillEditor } from "@vueup/vue-quill";[m
[32m+[m[32mimport "@vueup/vue-quill/dist/vue-quill.snow.css";[m
[32m+[m[32mimport { getToken } from "@/utils/auth";[m
[32m+[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m
[32m+[m[32mconst quillEditorRef = ref();[m
[32m+[m[32mconst uploadUrl = ref(import.meta.env.VITE_APP_BASE_API + "/common/upload"); // ä¸Šä¼ çš„å›¾ç‰‡æœåŠ¡å™¨åœ°å€[m
[32m+[m[32mconst headers = ref({[m
[32m+[m[32m  Authorization: "Bearer " + getToken()[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m  /* ç¼–è¾‘å™¨çš„å†…å®¹ */[m
[32m+[m[32m  modelValue: {[m
[32m+[m[32m    type: String,[m
[32m+[m[32m  },[m
[32m+[m[32m  /* é«˜åº¦ */[m
[32m+[m[32m  height: {[m
[32m+[m[32m    type: Number,[m
[32m+[m[32m    default: null,[m
[32m+[m[32m  },[m
[32m+[m[32m  /* æœ€å°é«˜åº¦ */[m
[32m+[m[32m  minHeight: {[m
[32m+[m[32m    type: Number,[m
[32m+[m[32m    default: null,[m
[32m+[m[32m  },[m
[32m+[m[32m  /* åªè¯» */[m
[32m+[m[32m  readOnly: {[m
[32m+[m[32m    type: Boolean,[m
[32m+[m[32m    default: false,[m
[32m+[m[32m  },[m
[32m+[m[32m  /* ä¸Šä¼ æ–‡ä»¶å¤§å°é™åˆ¶(MB) */[m
[32m+[m[32m  fileSize: {[m
[32m+[m[32m    type: Number,[m
[32m+[m[32m    default: 5,[m
[32m+[m[32m  },[m
[32m+[m[32m  /* ç±»å‹ï¼ˆbase64æ ¼å¼ã€urlæ ¼å¼ï¼‰ */[m
[32m+[m[32m  type: {[m
[32m+[m[32m    type: String,[m
[32m+[m[32m    default: "url",[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst options = ref({[m
[32m+[m[32m  theme: "snow",[m
[32m+[m[32m  bounds: document.body,[m
[32m+[m[32m  debug: "warn",[m
[32m+[m[32m  modules: {[m
[32m+[m[32m    // å·¥å…·æ é…ç½®[m
[32m+[m[32m    toolbar: [[m
[32m+[m[32m      ["bold", "italic", "underline", "strike"],      // åŠ ç²— æ–œä½“ ä¸‹åˆ’çº¿ åˆ é™¤çº¿[m
[32m+[m[32m      ["blockquote", "code-block"],                   // å¼•ç”¨  ä»£ç å—[m
[32m+[m[32m      [{ list: "ordered" }, { list: "bullet" }],      // æœ‰åºã€æ— åºåˆ—è¡¨[m
[32m+[m[32m      [{ indent: "-1" }, { indent: "+1" }],           // ç¼©è¿›[m
[32m+[m[32m      [{ size: ["small", false, "large", "huge"] }],  // å­—ä½“å¤§å°[m
[32m+[m[32m      [{ header: [1, 2, 3, 4, 5, 6, false] }],        // æ ‡é¢˜[m
[32m+[m[32m      [{ color: [] }, { background: [] }],            // å­—ä½“é¢œè‰²ã€å­—ä½“èƒŒæ™¯é¢œè‰²[m
[32m+[m[32m      [{ align: [] }],                                // å¯¹é½æ–¹å¼[m
[32m+[m[32m      ["clean"],                                      // æ¸…é™¤æ–‡æœ¬æ ¼å¼[m
[32m+[m[32m      ["link", "image", "video"]                      // é“¾æ¥ã€å›¾ç‰‡ã€è§†é¢‘[m
[32m+[m[32m    ],[m
[32m+[m[32m  },[m
[32m+[m[32m  placeholder: "è¯·è¾“å…¥å†…å®¹",[m
[32m+[m[32m  readOnly: props.readOnly[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst styles = computed(() => {[m
[32m+[m[32m  let style = {};[m
[32m+[m[32m  if (props.minHeight) {[m
[32m+[m[32m    style.minHeight = `${props.minHeight}px`;[m
[32m+[m[32m  }[m
[32m+[m[32m  if (props.height) {[m
[32m+[m[32m    style.height = `${props.height}px`;[m
[32m+[m[32m  }[m
[32m+[m[32m  return style;[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst content = ref("");[m
[32m+[m[32mwatch(() => props.modelValue, (v) => {[m
[32m+[m[32m  if (v !== content.value) {[m
[32m+[m[32m    content.value = v === undefined ? "<p></p>" : v;[m
[32m+[m[32m  }[m
[32m+[m[32m}, { immediate: true });[m
[32m+[m
[32m+[m[32m// å¦‚æœè®¾ç½®äº†ä¸Šä¼ åœ°å€åˆ™è‡ªå®šä¹‰å›¾ç‰‡ä¸Šä¼ äº‹ä»¶[m
[32m+[m[32monMounted(() => {[m
[32m+[m[32m  if (props.type == 'url') {[m
[32m+[m[32m    let quill = quillEditorRef.value.getQuill();[m
[32m+[m[32m    let toolbar = quill.getModule("toolbar");[m
[32m+[m[32m    toolbar.addHandler("image", (value) => {[m
[32m+[m[32m      if (value) {[m
[32m+[m[32m        proxy.$refs.uploadRef.click();[m
[32m+[m[32m      } else {[m
[32m+[m[32m        quill.format("image", false);[m
[32m+[m[32m      }[m
[32m+[m[32m    });[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m// ä¸Šä¼ å‰æ ¡æ£€æ ¼å¼å’Œå¤§å°[m
[32m+[m[32mfunction handleBeforeUpload(file) {[m
[32m+[m[32m  const type = ["image/jpeg", "image/jpg", "image/png", "image/svg"];[m
[32m+[m[32m  const isJPG = type.includes(file.type);[m
[32m+[m[32m  //æ£€éªŒæ–‡ä»¶æ ¼å¼[m
[32m+[m[32m  if (!isJPG) {[m
[32m+[m[32m    proxy.$modal.msgError(`å›¾ç‰‡æ ¼å¼é”™è¯¯!`);[m
[32m+[m[32m    return false;[m
[32m+[m[32m  }[m
[32m+[m[32m  // æ ¡æ£€æ–‡ä»¶å¤§å°[m
[32m+[m[32m  if (props.fileSize) {[m
[32m+[m[32m    const isLt = file.size / 1024 / 1024 < props.fileSize;[m
[32m+[m[32m    if (!isLt) {[m
[32m+[m[32m      proxy.$modal.msgError(`ä¸Šä¼ æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡ ${props.fileSize} MB!`);[m
[32m+[m[32m      return false;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  return true;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¸Šä¼ æˆåŠŸå¤„ç†[m
[32m+[m[32mfunction handleUploadSuccess(res, file) {[m
[32m+[m[32m  // å¦‚æœä¸Šä¼ æˆåŠŸ[m
[32m+[m[32m  if (res.code == 200) {[m
[32m+[m[32m    // è·å–å¯Œæ–‡æœ¬å®ä¾‹[m
[32m+[m[32m    let quill = toRaw(quillEditorRef.value).getQuill();[m
[32m+[m[32m    // è·å–å…‰æ ‡ä½ç½®[m
[32m+[m[32m    let length = quill.selection.savedRange.index;[m
[32m+[m[32m    // æ’å…¥å›¾ç‰‡ï¼Œres.urlä¸ºæœåŠ¡å™¨è¿”å›çš„å›¾ç‰‡é“¾æ¥åœ°å€[m
[32m+[m[32m    quill.insertEmbed(length, "image", import.meta.env.VITE_APP_BASE_API + res.fileName);[m
[32m+[m[32m    // è°ƒæ•´å…‰æ ‡åˆ°æœ€å[m
[32m+[m[32m    quill.setSelection(length + 1);[m
[32m+[m[32m  } else {[m
[32m+[m[32m    proxy.$modal.msgError("å›¾ç‰‡æ’å…¥å¤±è´¥");[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¸Šä¼ å¤±è´¥å¤„ç†[m
[32m+[m[32mfunction handleUploadError() {[m
[32m+[m[32m  proxy.$modal.msgError("å›¾ç‰‡æ’å…¥å¤±è´¥");[m
[32m+[m[32m}[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style>[m
[32m+[m[32m.editor-img-uploader {[m
[32m+[m[32m  display: none;[m
[32m+[m[32m}[m
[32m+[m[32m.editor, .ql-toolbar {[m
[32m+[m[32m  white-space: pre-wrap !important;[m
[32m+[m[32m  line-height: normal !important;[m
[32m+[m[32m}[m
[32m+[m[32m.quill-img {[m
[32m+[m[32m  display: none;[m
[32m+[m[32m}[m
[32m+[m[32m.ql-snow .ql-tooltip[data-mode="link"]::before {[m
[32m+[m[32m  content: "è¯·è¾“å…¥é“¾æ¥åœ°å€:";[m
[32m+[m[32m}[m
[32m+[m[32m.ql-snow .ql-tooltip.ql-editing a.ql-action::after {[m
[32m+[m[32m  border-right: 0px;[m
[32m+[m[32m  content: "ä¿å­˜";[m
[32m+[m[32m  padding-right: 0px;[m
[32m+[m[32m}[m
[32m+[m[32m.ql-snow .ql-tooltip[data-mode="video"]::before {[m
[32m+[m[32m  content: "è¯·è¾“å…¥è§†é¢‘åœ°å€:";[m
[32m+[m[32m}[m
[32m+[m[32m.ql-snow .ql-picker.ql-size .ql-picker-label::before,[m
[32m+[m[32m.ql-snow .ql-picker.ql-size .ql-picker-item::before {[m
[32m+[m[32m  content: "14px";[m
[32m+[m[32m}[m
[32m+[m[32m.ql-snow .ql-picker.ql-size .ql-picker-label[data-value="small"]::before,[m
[32m+[m[32m.ql-snow .ql-picker.ql-size .ql-picker-item[data-value="small"]::before {[m
[32m+[m[32m  content: "10px";[m
[32m+[m[32m}[m
[32m+[m[32m.ql-snow .ql-picker.ql-size .ql-picker-label[data-value="large"]::before,[m
[32m+[m[32m.ql-snow .ql-picker.ql-size .ql-picker-item[data-value="large"]::before {[m
[32m+[m[32m  content: "18px";[m
[32m+[m[32m}[m
[32m+[m[32m.ql-snow .ql-picker.ql-size .ql-picker-label[data-value="huge"]::before,[m
[32m+[m[32m.ql-snow .ql-picker.ql-size .ql-picker-item[data-value="huge"]::before {[m
[32m+[m[32m  content: "32px";[m
[32m+[m[32m}[m
[32m+[m[32m.ql-snow .ql-picker.ql-header .ql-picker-label::before,[m
[32m+[m[32m.ql-snow .ql-picker.ql-header .ql-picker-item::before {[m
[32m+[m[32m  content: "æ–‡æœ¬";[m
[32m+[m[32m}[m
[32m+[m[32m.ql-snow .ql-picker.ql-header .ql-picker-label[data-value="1"]::before,[m
[32m+[m[32m.ql-snow .ql-picker.ql-header .ql-picker-item[data-value="1"]::before {[m
[32m+[m[32m  content: "æ ‡é¢˜1";[m
[32m+[m[32m}[m
[32m+[m[32m.ql-snow .ql-picker.ql-header .ql-picker-label[data-value="2"]::before,[m
[32m+[m[32m.ql-snow .ql-picker.ql-header .ql-picker-item[data-value="2"]::before {[m
[32m+[m[32m  content: "æ ‡é¢˜2";[m
[32m+[m[32m}[m
[32m+[m[32m.ql-snow .ql-picker.ql-header .ql-picker-label[data-value="3"]::before,[m
[32m+[m[32m.ql-snow .ql-picker.ql-header .ql-picker-item[data-value="3"]::before {[m
[32m+[m[32m  content: "æ ‡é¢˜3";[m
[32m+[m[32m}[m
[32m+[m[32m.ql-snow .ql-picker.ql-header .ql-picker-label[data-value="4"]::before,[m
[32m+[m[32m.ql-snow .ql-picker.ql-header .ql-picker-item[data-value="4"]::before {[m
[32m+[m[32m  content: "æ ‡é¢˜4";[m
[32m+[m[32m}[m
[32m+[m[32m.ql-snow .ql-picker.ql-header .ql-picker-label[data-value="5"]::before,[m
[32m+[m[32m.ql-snow .ql-picker.ql-header .ql-picker-item[data-value="5"]::before {[m
[32m+[m[32m  content: "æ ‡é¢˜5";[m
[32m+[m[32m}[m
[32m+[m[32m.ql-snow .ql-picker.ql-header .ql-picker-label[data-value="6"]::before,[m
[32m+[m[32m.ql-snow .ql-picker.ql-header .ql-picker-item[data-value="6"]::before {[m
[32m+[m[32m  content: "æ ‡é¢˜6";[m
[32m+[m[32m}[m
[32m+[m[32m.ql-snow .ql-picker.ql-font .ql-picker-label::before,[m
[32m+[m[32m.ql-snow .ql-picker.ql-font .ql-picker-item::before {[m
[32m+[m[32m  content: "æ ‡å‡†å­—ä½“";[m
[32m+[m[32m}[m
[32m+[m[32m.ql-snow .ql-picker.ql-font .ql-picker-label[data-value="serif"]::before,[m
[32m+[m[32m.ql-snow .ql-picker.ql-font .ql-picker-item[data-value="serif"]::before {[m
[32m+[m[32m  content: "è¡¬çº¿å­—ä½“";[m
[32m+[m[32m}[m
[32m+[m[32m.ql-snow .ql-picker.ql-font .ql-picker-label[data-value="monospace"]::before,[m
[32m+[m[32m.ql-snow .ql-picker.ql-font .ql-picker-item[data-value="monospace"]::before {[m
[32m+[m[32m  content: "ç­‰å®½å­—ä½“";[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
[1mdiff --git a/src/components/FileUpload/index.vue b/src/components/FileUpload/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..2af9672e[m
[1m--- /dev/null[m
[1m+++ b/src/components/FileUpload/index.vue[m
[36m@@ -0,0 +1,207 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="upload-file">[m
[32m+[m[32m    <el-upload[m
[32m+[m[32m      multiple[m
[32m+[m[32m      :action="uploadFileUrl"[m
[32m+[m[32m      :before-upload="handleBeforeUpload"[m
[32m+[m[32m      :file-list="fileList"[m
[32m+[m[32m      :limit="limit"[m
[32m+[m[32m      :on-error="handleUploadError"[m
[32m+[m[32m      :on-exceed="handleExceed"[m
[32m+[m[32m      :on-success="handleUploadSuccess"[m
[32m+[m[32m      :show-file-list="false"[m
[32m+[m[32m      :headers="headers"[m
[32m+[m[32m      class="upload-file-uploader"[m
[32m+[m[32m      ref="fileUpload"[m
[32m+[m[32m    >[m
[32m+[m[32m      <!-- ä¸Šä¼ æŒ‰é’® -->[m
[32m+[m[32m      <el-button type="primary">é€‰å–æ–‡ä»¶</el-button>[m
[32m+[m[32m    </el-upload>[m
[32m+[m[32m    <!-- ä¸Šä¼ æç¤º -->[m
[32m+[m[32m    <div class="el-upload__tip" v-if="showTip">[m
[32m+[m[32m      è¯·ä¸Šä¼ [m
[32m+[m[32m      <template v-if="fileSize"> å¤§å°ä¸è¶…è¿‡ <b style="color: #f56c6c">{{ fileSize }}MB</b> </template>[m
[32m+[m[32m      <template v-if="fileType"> æ ¼å¼ä¸º <b style="color: #f56c6c">{{ fileType.join("/") }}</b> </template>[m
[32m+[m[32m      çš„æ–‡ä»¶[m
[32m+[m[32m    </div>[m
[32m+[m[32m    <!-- æ–‡ä»¶åˆ—è¡¨ -->[m
[32m+[m[32m    <transition-group class="upload-file-list el-upload-list el-upload-list--text" name="el-fade-in-linear" tag="ul">[m
[32m+[m[32m      <li :key="file.uid" class="el-upload-list__item ele-upload-list__item-content" v-for="(file, index) in fileList">[m
[32m+[m[32m        <el-link :href="`${baseUrl}${file.url}`" :underline="false" target="_blank">[m
[32m+[m[32m          <span class="el-icon-document"> {{ getFileName(file.name) }} </span>[m
[32m+[m[32m        </el-link>[m
[32m+[m[32m        <div class="ele-upload-list__item-content-action">[m
[32m+[m[32m          <el-link :underline="false" @click="handleDelete(index)" type="danger">åˆ é™¤</el-link>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </li>[m
[32m+[m[32m    </transition-group>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { getToken } from "@/utils/auth";[m
[32m+[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m  modelValue: [String, Object, Array],[m
[32m+[m[32m  // æ•°é‡é™åˆ¶[m
[32m+[m[32m  limit: {[m
[32m+[m[32m    type: Number,[m
[32m+[m[32m    default: 5,[m
[32m+[m[32m  },[m
[32m+[m[32m  // å¤§å°é™åˆ¶(MB)[m
[32m+[m[32m  fileSize: {[m
[32m+[m[32m    type: Number,[m
[32m+[m[32m    default: 5,[m
[32m+[m[32m  },[m
[32m+[m[32m  // æ–‡ä»¶ç±»å‹, ä¾‹å¦‚['png', 'jpg', 'jpeg'][m
[32m+[m[32m  fileType: {[m
[32m+[m[32m    type: Array,[m
[32m+[m[32m    default: () => ["doc", "xls", "ppt", "txt", "pdf"],[m
[32m+[m[32m  },[m
[32m+[m[32m  // æ˜¯å¦æ˜¾ç¤ºæç¤º[m
[32m+[m[32m  isShowTip: {[m
[32m+[m[32m    type: Boolean,[m
[32m+[m[32m    default: true[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m[32mconst emit = defineEmits();[m
[32m+[m[32mconst number = ref(0);[m
[32m+[m[32mconst uploadList = ref([]);[m
[32m+[m[32mconst baseUrl = import.meta.env.VITE_APP_BASE_API;[m
[32m+[m[32mconst uploadFileUrl = ref(import.meta.env.VITE_APP_BASE_API + "/common/upload"); // ä¸Šä¼ æ–‡ä»¶æœåŠ¡å™¨åœ°å€[m
[32m+[m[32mconst headers = ref({ Authorization: "Bearer " + getToken() });[m
[32m+[m[32mconst fileList = ref([]);[m
[32m+[m[32mconst showTip = computed([m
[32m+[m[32m  () => props.isShowTip && (props.fileType || props.fileSize)[m
[32m+[m[32m);[m
[32m+[m
[32m+[m[32mwatch(() => props.modelValue, val => {[m
[32m+[m[32m  if (val) {[m
[32m+[m[32m    let temp = 1;[m
[32m+[m[32m    // é¦–å…ˆå°†å€¼è½¬ä¸ºæ•°ç»„[m
[32m+[m[32m    const list = Array.isArray(val) ? val : props.modelValue.split(',');[m
[32m+[m[32m    // ç„¶åå°†æ•°ç»„è½¬ä¸ºå¯¹è±¡æ•°ç»„[m
[32m+[m[32m    fileList.value = list.map(item => {[m
[32m+[m[32m      if (typeof item === "string") {[m
[32m+[m[32m        item = { name: item, url: item };[m
[32m+[m[32m      }[m
[32m+[m[32m      item.uid = item.uid || new Date().getTime() + temp++;[m
[32m+[m[32m      return item;[m
[32m+[m[32m    });[m
[32m+[m[32m  } else {[m
[32m+[m[32m    fileList.value = [];[m
[32m+[m[32m    return [];[m
[32m+[m[32m  }[m
[32m+[m[32m},{ deep: true, immediate: true });[m
[32m+[m
[32m+[m[32m// ä¸Šä¼ å‰æ ¡æ£€æ ¼å¼å’Œå¤§å°[m
[32m+[m[32mfunction handleBeforeUpload(file) {[m
[32m+[m[32m  // æ ¡æ£€æ–‡ä»¶ç±»å‹[m
[32m+[m[32m  if (props.fileType.length) {[m
[32m+[m[32m    const fileName = file.name.split('.');[m
[32m+[m[32m    const fileExt = fileName[fileName.length - 1];[m
[32m+[m[32m    const isTypeOk = props.fileType.indexOf(fileExt) >= 0;[m
[32m+[m[32m    if (!isTypeOk) {[m
[32m+[m[32m      proxy.$modal.msgError(`æ–‡ä»¶æ ¼å¼ä¸æ­£ç¡®, è¯·ä¸Šä¼ ${props.fileType.join("/")}æ ¼å¼æ–‡ä»¶!`);[m
[32m+[m[32m      return false;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  // æ ¡æ£€æ–‡ä»¶å¤§å°[m
[32m+[m[32m  if (props.fileSize) {[m
[32m+[m[32m    const isLt = file.size / 1024 / 1024 < props.fileSize;[m
[32m+[m[32m    if (!isLt) {[m
[32m+[m[32m      proxy.$modal.msgError(`ä¸Šä¼ æ–‡ä»¶å¤§å°ä¸èƒ½è¶…è¿‡ ${props.fileSize} MB!`);[m
[32m+[m[32m      return false;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  proxy.$modal.loading("æ­£åœ¨ä¸Šä¼ æ–‡ä»¶ï¼Œè¯·ç¨å€™...");[m
[32m+[m[32m  number.value++;[m
[32m+[m[32m  return true;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ–‡ä»¶ä¸ªæ•°è¶…å‡º[m
[32m+[m[32mfunction handleExceed() {[m
[32m+[m[32m  proxy.$modal.msgError(`ä¸Šä¼ æ–‡ä»¶æ•°é‡ä¸èƒ½è¶…è¿‡ ${props.limit} ä¸ª!`);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¸Šä¼ å¤±è´¥[m
[32m+[m[32mfunction handleUploadError(err) {[m
[32m+[m[32m  proxy.$modal.msgError("ä¸Šä¼ æ–‡ä»¶å¤±è´¥");[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¸Šä¼ æˆåŠŸå›è°ƒ[m
[32m+[m[32mfunction handleUploadSuccess(res, file) {[m
[32m+[m[32m  if (res.code === 200) {[m
[32m+[m[32m    uploadList.value.push({ name: res.fileName, url: res.fileName });[m
[32m+[m[32m    uploadedSuccessfully();[m
[32m+[m[32m  } else {[m
[32m+[m[32m    number.value--;[m
[32m+[m[32m    proxy.$modal.closeLoading();[m
[32m+[m[32m    proxy.$modal.msgError(res.msg);[m
[32m+[m[32m    proxy.$refs.fileUpload.handleRemove(file);[m
[32m+[m[32m    uploadedSuccessfully();[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ é™¤æ–‡ä»¶[m
[32m+[m[32mfunction handleDelete(index) {[m
[32m+[m[32m  fileList.value.splice(index, 1);[m
[32m+[m[32m  emit("update:modelValue", listToString(fileList.value));[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¸Šä¼ ç»“æŸå¤„ç†[m
[32m+[m[32mfunction uploadedSuccessfully() {[m
[32m+[m[32m  if (number.value > 0 && uploadList.value.length === number.value) {[m
[32m+[m[32m    fileList.value = fileList.value.filter(f => f.url !== undefined).concat(uploadList.value);[m
[32m+[m[32m    uploadList.value = [];[m
[32m+[m[32m    number.value = 0;[m
[32m+[m[32m    emit("update:modelValue", listToString(fileList.value));[m
[32m+[m[32m    proxy.$modal.closeLoading();[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// è·å–æ–‡ä»¶åç§°[m
[32m+[m[32mfunction getFileName(name) {[m
[32m+[m[32m  // å¦‚æœæ˜¯urlé‚£ä¹ˆå–æœ€åçš„åå­— å¦‚æœä¸æ˜¯ç›´æ¥è¿”å›[m
[32m+[m[32m  if (name.lastIndexOf("/") > -1) {[m
[32m+[m[32m    return name.slice(name.lastIndexOf("/") + 1);[m
[32m+[m[32m  } else {[m
[32m+[m[32m    return name;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å¯¹è±¡è½¬æˆæŒ‡å®šå­—ç¬¦ä¸²åˆ†éš”[m
[32m+[m[32mfunction listToString(list, separator) {[m
[32m+[m[32m  let strs = "";[m
[32m+[m[32m  separator = separator || ",";[m
[32m+[m[32m  for (let i in list) {[m
[32m+[m[32m    if (list[i].url) {[m
[32m+[m[32m      strs += list[i].url + separator;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  return strs != '' ? strs.substr(0, strs.length - 1) : '';[m
[32m+[m[32m}[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style scoped lang="scss">[m
[32m+[m[32m.upload-file-uploader {[m
[32m+[m[32m  margin-bottom: 5px;[m
[32m+[m[32m}[m
[32m+[m[32m.upload-file-list .el-upload-list__item {[m
[32m+[m[32m  border: 1px solid #e4e7ed;[m
[32m+[m[32m  line-height: 2;[m
[32m+[m[32m  margin-bottom: 10px;[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m}[m
[32m+[m[32m.upload-file-list .ele-upload-list__item-content {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  justify-content: space-between;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  color: inherit;[m
[32m+[m[32m}[m
[32m+[m[32m.ele-upload-list__item-content-action .el-link {[m
[32m+[m[32m  margin-right: 10px;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
[1mdiff --git a/src/components/Hamburger/index.vue b/src/components/Hamburger/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..18c201e6[m
[1m--- /dev/null[m
[1m+++ b/src/components/Hamburger/index.vue[m
[36m@@ -0,0 +1,41 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div style="padding: 0 15px;" @click="toggleClick">[m
[32m+[m[32m    <svg[m
[32m+[m[32m      :class="{'is-active':isActive}"[m
[32m+[m[32m      class="hamburger"[m
[32m+[m[32m      viewBox="0 0 1024 1024"[m
[32m+[m[32m      xmlns="http://www.w3.org/2000/svg"[m
[32m+[m[32m      width="64"[m
[32m+[m[32m      height="64"[m
[32m+[m[32m    >[m
[32m+[m[32m      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM142.4 642.1L298.7 519a8.84 8.84 0 0 0 0-13.9L142.4 381.9c-5.8-4.6-14.4-.5-14.4 6.9v246.3a8.9 8.9 0 0 0 14.4 7z" />[m
[32m+[m[32m    </svg>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mdefineProps({[m
[32m+[m[32m  isActive: {[m
[32m+[m[32m    type: Boolean,[m
[32m+[m[32m    default: false[m
[32m+[m[32m  }[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32mconst emit = defineEmits()[m
[32m+[m[32mconst toggleClick = () => {[m
[32m+[m[32m  emit('toggleClick');[m
[32m+[m[32m}[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style scoped>[m
[32m+[m[32m.hamburger {[m
[32m+[m[32m  display: inline-block;[m
[32m+[m[32m  vertical-align: middle;[m
[32m+[m[32m  width: 20px;[m
[32m+[m[32m  height: 20px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.hamburger.is-active {[m
[32m+[m[32m  transform: rotate(180deg);[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
[1mdiff --git a/src/components/HeaderSearch/index.vue b/src/components/HeaderSearch/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..6ef6d2c4[m
[1m--- /dev/null[m
[1m+++ b/src/components/HeaderSearch/index.vue[m
[36m@@ -0,0 +1,187 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div :class="{ 'show': show }" class="header-search">[m
[32m+[m[32m    <svg-icon class-name="search-icon" icon-class="search" @click.stop="click" />[m
[32m+[m[32m    <el-select[m
[32m+[m[32m      ref="headerSearchSelectRef"[m
[32m+[m[32m      v-model="search"[m
[32m+[m[32m      :remote-method="querySearch"[m
[32m+[m[32m      filterable[m
[32m+[m[32m      default-first-option[m
[32m+[m[32m      remote[m
[32m+[m[32m      placeholder="Search"[m
[32m+[m[32m      class="header-search-select"[m
[32m+[m[32m      @change="change"[m
[32m+[m[32m    >[m
[32m+[m[32m      <el-option v-for="option in options" :key="option.item.path" :value="option.item" :label="option.item.title.join(' > ')" />[m
[32m+[m[32m    </el-select>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport Fuse from 'fuse.js'[m
[32m+[m[32mimport { getNormalPath } from '@/utils/ruoyi'[m
[32m+[m[32mimport { isHttp } from '@/utils/validate'[m
[32m+[m[32mimport usePermissionStore from '@/store/modules/permission'[m
[32m+[m
[32m+[m[32mconst search = ref('');[m
[32m+[m[32mconst options = ref([]);[m
[32m+[m[32mconst searchPool = ref([]);[m
[32m+[m[32mconst show = ref(false);[m
[32m+[m[32mconst fuse = ref(undefined);[m
[32m+[m[32mconst headerSearchSelectRef = ref(null);[m
[32m+[m[32mconst router = useRouter();[m
[32m+[m[32mconst routes = computed(() => usePermissionStore().routes);[m
[32m+[m
[32m+[m[32mfunction click() {[m
[32m+[m[32m  show.value = !show.value[m
[32m+[m[32m  if (show.value) {[m
[32m+[m[32m    headerSearchSelectRef.value && headerSearchSelectRef.value.focus()[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m[32mfunction close() {[m
[32m+[m[32m  headerSearchSelectRef.value && headerSearchSelectRef.value.blur()[m
[32m+[m[32m  options.value = [][m
[32m+[m[32m  show.value = false[m
[32m+[m[32m}[m
[32m+[m[32mfunction change(val) {[m
[32m+[m[32m  const path = val.path;[m
[32m+[m[32m  const query = val.query;[m
[32m+[m[32m  if (isHttp(path)) {[m
[32m+[m[32m    // http(s):// è·¯å¾„æ–°çª—å£æ‰“å¼€[m
[32m+[m[32m    const pindex = path.indexOf("http");[m
[32m+[m[32m    window.open(path.substr(pindex, path.length), "_blank");[m
[32m+[m[32m  } else {[m
[32m+[m[32m    if (query) {[m
[32m+[m[32m      router.push({ path: path, query: JSON.parse(query) });[m
[32m+[m[32m    } else {[m
[32m+[m[32m      router.push(path)[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  search.value = ''[m
[32m+[m[32m  options.value = [][m
[32m+[m[32m  nextTick(() => {[m
[32m+[m[32m    show.value = false[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m[32mfunction initFuse(list) {[m
[32m+[m[32m  fuse.value = new Fuse(list, {[m
[32m+[m[32m    shouldSort: true,[m
[32m+[m[32m    threshold: 0.4,[m
[32m+[m[32m    location: 0,[m
[32m+[m[32m    distance: 100,[m
[32m+[m[32m    minMatchCharLength: 1,[m
[32m+[m[32m    keys: [{[m
[32m+[m[32m      name: 'title',[m
[32m+[m[32m      weight: 0.7[m
[32m+[m[32m    }, {[m
[32m+[m[32m      name: 'path',[m
[32m+[m[32m      weight: 0.3[m
[32m+[m[32m    }][m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m[32m// Filter out the routes that can be displayed in the sidebar[m
[32m+[m[32m// And generate the internationalized title[m
[32m+[m[32mfunction generateRoutes(routes, basePath = '', prefixTitle = []) {[m
[32m+[m[32m  let res = [][m
[32m+[m
[32m+[m[32m  for (const r of routes) {[m
[32m+[m[32m    // skip hidden router[m
[32m+[m[32m    if (r.hidden) { continue }[m
[32m+[m[32m    const p = r.path.length > 0 && r.path[0] === '/' ? r.path : '/' + r.path;[m
[32m+[m[32m    const data = {[m
[32m+[m[32m      path: !isHttp(r.path) ? getNormalPath(basePath + p) : r.path,[m
[32m+[m[32m      title: [...prefixTitle][m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    if (r.meta && r.meta.title) {[m
[32m+[m[32m      data.title = [...data.title, r.meta.title][m
[32m+[m
[32m+[m[32m      if (r.redirect !== 'noRedirect') {[m
[32m+[m[32m        // only push the routes with title[m
[32m+[m[32m        // special case: need to exclude parent router without redirect[m
[32m+[m[32m        res.push(data)[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m    if (r.query) {[m
[32m+[m[32m      data.query = r.query[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    // recursive child routes[m
[32m+[m[32m    if (r.children) {[m
[32m+[m[32m      const tempRoutes = generateRoutes(r.children, data.path, data.title)[m
[32m+[m[32m      if (tempRoutes.length >= 1) {[m
[32m+[m[32m        res = [...res, ...tempRoutes][m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  return res[m
[32m+[m[32m}[m
[32m+[m[32mfunction querySearch(query) {[m
[32m+[m[32m  if (query !== '') {[m
[32m+[m[32m    options.value = fuse.value.search(query)[m
[32m+[m[32m  } else {[m
[32m+[m[32m    options.value = [][m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32monMounted(() => {[m
[32m+[m[32m  searchPool.value = generateRoutes(routes.value);[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32mwatchEffect(() => {[m
[32m+[m[32m  searchPool.value = generateRoutes(routes.value)[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32mwatch(show, (value) => {[m
[32m+[m[32m  if (value) {[m
[32m+[m[32m    document.body.addEventListener('click', close)[m
[32m+[m[32m  } else {[m
[32m+[m[32m    document.body.removeEventListener('click', close)[m
[32m+[m[32m  }[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32mwatch(searchPool, (list) => {[m
[32m+[m[32m  initFuse(list)[m
[32m+[m[32m})[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang='scss' scoped>[m
[32m+[m[32m.header-search {[m
[32m+[m[32m  font-size: 0 !important;[m
[32m+[m
[32m+[m[32m  .search-icon {[m
[32m+[m[32m    cursor: pointer;[m
[32m+[m[32m    font-size: 18px;[m
[32m+[m[32m    vertical-align: middle;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  .header-search-select {[m
[32m+[m[32m    font-size: 18px;[m
[32m+[m[32m    transition: width 0.2s;[m
[32m+[m[32m    width: 0;[m
[32m+[m[32m    overflow: hidden;[m
[32m+[m[32m    background: transparent;[m
[32m+[m[32m    border-radius: 0;[m
[32m+[m[32m    display: inline-block;[m
[32m+[m[32m    vertical-align: middle;[m
[32m+[m
[32m+[m[32m    :deep(.el-input__inner) {[m
[32m+[m[32m      border-radius: 0;[m
[32m+[m[32m      border: 0;[m
[32m+[m[32m      padding-left: 0;[m
[32m+[m[32m      padding-right: 0;[m
[32m+[m[32m      box-shadow: none !important;[m
[32m+[m[32m      border-bottom: 1px solid #d9d9d9;[m
[32m+[m[32m      vertical-align: middle;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  &.show {[m
[32m+[m[32m    .header-search-select {[m
[32m+[m[32m      width: 210px;[m
[32m+[m[32m      margin-left: 10px;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/components/IconSelect/index.vue b/src/components/IconSelect/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..517a4afc[m
[1m--- /dev/null[m
[1m+++ b/src/components/IconSelect/index.vue[m
[36m@@ -0,0 +1,111 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="icon-body">[m
[32m+[m[32m    <el-input[m
[32m+[m[32m      v-model="iconName"[m
[32m+[m[32m      class="icon-search"[m
[32m+[m[32m      clearable[m
[32m+[m[32m      placeholder="è¯·è¾“å…¥å›¾æ ‡åç§°"[m
[32m+[m[32m      @clear="filterIcons"[m
[32m+[m[32m      @input="filterIcons"[m
[32m+[m[32m    >[m
[32m+[m[32m      <template #suffix><i class="el-icon-search el-input__icon" /></template>[m
[32m+[m[32m    </el-input>[m
[32m+[m[32m    <div class="icon-list">[m
[32m+[m[32m      <div class="list-container">[m
[32m+[m[32m        <div v-for="(item, index) in iconList" class="icon-item-wrapper" :key="index" @click="selectedIcon(item)">[m
[32m+[m[32m          <div :class="['icon-item', { active: activeIcon === item }]">[m
[32m+[m[32m            <svg-icon :icon-class="item" class-name="icon" style="height: 25px;width: 16px;"/>[m
[32m+[m[32m            <span>{{ item }}</span>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </div>[m
[32m+[m[32m    </div>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport icons from './requireIcons'[m
[32m+[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m  activeIcon: {[m
[32m+[m[32m    type: String[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst iconName = ref('');[m
[32m+[m[32mconst iconList = ref(icons);[m
[32m+[m[32mconst emit = defineEmits(['selected']);[m
[32m+[m
[32m+[m[32mfunction filterIcons() {[m
[32m+[m[32m  iconList.value = icons[m
[32m+[m[32m  if (iconName.value) {[m
[32m+[m[32m    iconList.value = icons.filter(item => item.indexOf(iconName.value) !== -1)[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction selectedIcon(name) {[m
[32m+[m[32m  emit('selected', name)[m
[32m+[m[32m  document.body.click()[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction reset() {[m
[32m+[m[32m  iconName.value = ''[m
[32m+[m[32m  iconList.value = icons[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mdefineExpose({[m
[32m+[m[32m  reset[m
[32m+[m[32m})[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang='scss' scoped>[m
[32m+[m[32m   .icon-body {[m
[32m+[m[32m    width: 100%;[m
[32m+[m[32m    padding: 10px;[m
[32m+[m[32m    .icon-search {[m
[32m+[m[32m      position: relative;[m
[32m+[m[32m      margin-bottom: 5px;[m
[32m+[m[32m    }[m
[32m+[m[32m    .icon-list {[m
[32m+[m[32m      height: 200px;[m
[32m+[m[32m      overflow: auto;[m
[32m+[m[32m      .list-container {[m
[32m+[m[32m        display: flex;[m
[32m+[m[32m        flex-wrap: wrap;[m
[32m+[m[32m        .icon-item-wrapper {[m
[32m+[m[32m          width: calc(100% / 3);[m
[32m+[m[32m          height: 25px;[m
[32m+[m[32m          line-height: 25px;[m
[32m+[m[32m          cursor: pointer;[m
[32m+[m[32m          display: flex;[m
[32m+[m[32m          .icon-item {[m
[32m+[m[32m            display: flex;[m
[32m+[m[32m            max-width: 100%;[m
[32m+[m[32m            height: 100%;[m
[32m+[m[32m            padding: 0 5px;[m
[32m+[m[32m            &:hover {[m
[32m+[m[32m              background: #ececec;[m
[32m+[m[32m              border-radius: 5px;[m
[32m+[m[32m            }[m
[32m+[m[32m            .icon {[m
[32m+[m[32m              flex-shrink: 0;[m
[32m+[m[32m            }[m
[32m+[m[32m            span {[m
[32m+[m[32m              display: inline-block;[m
[32m+[m[32m              vertical-align: -0.15em;[m
[32m+[m[32m              fill: currentColor;[m
[32m+[m[32m              padding-left: 2px;[m
[32m+[m[32m              overflow: hidden;[m
[32m+[m[32m              text-overflow: ellipsis;[m
[32m+[m[32m              white-space: nowrap;[m
[32m+[m[32m            }[m
[32m+[m[32m          }[m
[32m+[m[32m          .icon-item.active {[m
[32m+[m[32m            background: #ececec;[m
[32m+[m[32m            border-radius: 5px;[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/components/IconSelect/requireIcons.js b/src/components/IconSelect/requireIcons.js[m
[1mnew file mode 100644[m
[1mindex 00000000..ac22fd78[m
[1m--- /dev/null[m
[1m+++ b/src/components/IconSelect/requireIcons.js[m
[36m@@ -0,0 +1,8 @@[m
[32m+[m[32mlet icons = [][m
[32m+[m[32mconst modules = import.meta.glob('./../../assets/icons/svg/*.svg');[m
[32m+[m[32mfor (const path in modules) {[m
[32m+[m[32m  const p = path.split('assets/icons/svg/')[1].split('.svg')[0];[m
[32m+[m[32m  icons.push(p);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport default icons[m
\ No newline at end of file[m
[1mdiff --git a/src/components/ImagePreview/index.vue b/src/components/ImagePreview/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..7e3d2b61[m
[1m--- /dev/null[m
[1m+++ b/src/components/ImagePreview/index.vue[m
[36m@@ -0,0 +1,92 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <el-image[m
[32m+[m[32m    :src="`${realSrc}`"[m
[32m+[m[32m    fit="cover"[m
[32m+[m[32m    :style="`width:${realWidth};height:${realHeight};`"[m
[32m+[m[32m    :preview-src-list="realSrcList"[m
[32m+[m[32m    preview-teleported[m
[32m+[m[32m  >[m
[32m+[m[32m    <template #error>[m
[32m+[m[32m      <div class="image-slot">[m
[32m+[m[32m        <el-icon><picture-filled /></el-icon>[m
[32m+[m[32m      </div>[m
[32m+[m[32m    </template>[m
[32m+[m[32m  </el-image>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { isExternal } from "@/utils/validate";[m
[32m+[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m  src: {[m
[32m+[m[32m    type: String,[m
[32m+[m[32m    default: ""[m
[32m+[m[32m  },[m
[32m+[m[32m  width: {[m
[32m+[m[32m    type: [Number, String],[m
[32m+[m[32m    default: ""[m
[32m+[m[32m  },[m
[32m+[m[32m  height: {[m
[32m+[m[32m    type: [Number, String],[m
[32m+[m[32m    default: ""[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst realSrc = computed(() => {[m
[32m+[m[32m  if (!props.src) {[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m[32m  let real_src = props.src.split(",")[0];[m
[32m+[m[32m  if (isExternal(real_src)) {[m
[32m+[m[32m    return real_src;[m
[32m+[m[32m  }[m
[32m+[m[32m  return import.meta.env.VITE_APP_BASE_API + real_src;[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst realSrcList = computed(() => {[m
[32m+[m[32m  if (!props.src) {[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m[32m  let real_src_list = props.src.split(",");[m
[32m+[m[32m  let srcList = [];[m
[32m+[m[32m  real_src_list.forEach(item => {[m
[32m+[m[32m    if (isExternal(item)) {[m
[32m+[m[32m      return srcList.push(item);[m
[32m+[m[32m    }[m
[32m+[m[32m    return srcList.push(import.meta.env.VITE_APP_BASE_API + item);[m
[32m+[m[32m  });[m
[32m+[m[32m  return srcList;[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst realWidth = computed(() =>[m
[32m+[m[32m  typeof props.width == "string" ? props.width : `${props.width}px`[m
[32m+[m[32m);[m
[32m+[m
[32m+[m[32mconst realHeight = computed(() =>[m
[32m+[m[32m  typeof props.height == "string" ? props.height : `${props.height}px`[m
[32m+[m[32m);[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang="scss" scoped>[m
[32m+[m[32m.el-image {[m
[32m+[m[32m  border-radius: 5px;[m
[32m+[m[32m  background-color: #ebeef5;[m
[32m+[m[32m  box-shadow: 0 0 5px 1px #ccc;[m
[32m+[m[32m  :deep(.el-image__inner) {[m
[32m+[m[32m    transition: all 0.3s;[m
[32m+[m[32m    cursor: pointer;[m
[32m+[m[32m    &:hover {[m
[32m+[m[32m      transform: scale(1.2);[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  :deep(.image-slot) {[m
[32m+[m[32m    display: flex;[m
[32m+[m[32m    justify-content: center;[m
[32m+[m[32m    align-items: center;[m
[32m+[m[32m    width: 100%;[m
[32m+[m[32m    height: 100%;[m
[32m+[m[32m    color: #909399;[m
[32m+[m[32m    font-size: 30px;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
[1mdiff --git a/src/components/ImageUpload/index.vue b/src/components/ImageUpload/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..55dafb84[m
[1m--- /dev/null[m
[1m+++ b/src/components/ImageUpload/index.vue[m
[36m@@ -0,0 +1,213 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="component-upload-image">[m
[32m+[m[32m    <el-upload[m
[32m+[m[32m      multiple[m
[32m+[m[32m      :action="uploadImgUrl"[m
[32m+[m[32m      list-type="picture-card"[m
[32m+[m[32m      :on-success="handleUploadSuccess"[m
[32m+[m[32m      :before-upload="handleBeforeUpload"[m
[32m+[m[32m      :limit="limit"[m
[32m+[m[32m      :on-error="handleUploadError"[m
[32m+[m[32m      :on-exceed="handleExceed"[m
[32m+[m[32m      ref="imageUpload"[m
[32m+[m[32m      :before-remove="handleDelete"[m
[32m+[m[32m      :show-file-list="true"[m
[32m+[m[32m      :headers="headers"[m
[32m+[m[32m      :file-list="fileList"[m
[32m+[m[32m      :on-preview="handlePictureCardPreview"[m
[32m+[m[32m      :class="{ hide: fileList.length >= limit }"[m
[32m+[m[32m    >[m
[32m+[m[32m      <el-icon class="avatar-uploader-icon"><plus /></el-icon>[m
[32m+[m[32m    </el-upload>[m
[32m+[m[32m    <!-- ä¸Šä¼ æç¤º -->[m
[32m+[m[32m    <div class="el-upload__tip" v-if="showTip">[m
[32m+[m[32m      è¯·ä¸Šä¼ [m
[32m+[m[32m      <template v-if="fileSize">[m
[32m+[m[32m        å¤§å°ä¸è¶…è¿‡ <b style="color: #f56c6c">{{ fileSize }}MB</b>[m
[32m+[m[32m      </template>[m
[32m+[m[32m      <template v-if="fileType">[m
[32m+[m[32m        æ ¼å¼ä¸º <b style="color: #f56c6c">{{ fileType.join("/") }}</b>[m
[32m+[m[32m      </template>[m
[32m+[m[32m      çš„æ–‡ä»¶[m
[32m+[m[32m    </div>[m
[32m+[m
[32m+[m[32m    <el-dialog[m
[32m+[m[32m      v-model="dialogVisible"[m
[32m+[m[32m      title="é¢„è§ˆ"[m
[32m+[m[32m      width="800px"[m
[32m+[m[32m      append-to-body[m
[32m+[m[32m    >[m
[32m+[m[32m      <img[m
[32m+[m[32m        :src="dialogImageUrl"[m
[32m+[m[32m        style="display: block; max-width: 100%; margin: 0 auto"[m
[32m+[m[32m      />[m
[32m+[m[32m    </el-dialog>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { getToken } from "@/utils/auth";[m
[32m+[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m  modelValue: [String, Object, Array],[m
[32m+[m[32m  // å›¾ç‰‡æ•°é‡é™åˆ¶[m
[32m+[m[32m  limit: {[m
[32m+[m[32m    type: Number,[m
[32m+[m[32m    default: 5,[m
[32m+[m[32m  },[m
[32m+[m[32m  // å¤§å°é™åˆ¶(MB)[m
[32m+[m[32m  fileSize: {[m
[32m+[m[32m    type: Number,[m
[32m+[m[32m    default: 5,[m
[32m+[m[32m  },[m
[32m+[m[32m  // æ–‡ä»¶ç±»å‹, ä¾‹å¦‚['png', 'jpg', 'jpeg'][m
[32m+[m[32m  fileType: {[m
[32m+[m[32m    type: Array,[m
[32m+[m[32m    default: () => ["png", "jpg", "jpeg"],[m
[32m+[m[32m  },[m
[32m+[m[32m  // æ˜¯å¦æ˜¾ç¤ºæç¤º[m
[32m+[m[32m  isShowTip: {[m
[32m+[m[32m    type: Boolean,[m
[32m+[m[32m    default: true[m
[32m+[m[32m  },[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m[32mconst emit = defineEmits();[m
[32m+[m[32mconst number = ref(0);[m
[32m+[m[32mconst uploadList = ref([]);[m
[32m+[m[32mconst dialogImageUrl = ref("");[m
[32m+[m[32mconst dialogVisible = ref(false);[m
[32m+[m[32mconst baseUrl = import.meta.env.VITE_APP_BASE_API;[m
[32m+[m[32mconst uploadImgUrl = ref(import.meta.env.VITE_APP_BASE_API + "/common/upload"); // ä¸Šä¼ çš„å›¾ç‰‡æœåŠ¡å™¨åœ°å€[m
[32m+[m[32mconst headers = ref({ Authorization: "Bearer " + getToken() });[m
[32m+[m[32mconst fileList = ref([]);[m
[32m+[m[32mconst showTip = computed([m
[32m+[m[32m  () => props.isShowTip && (props.fileType || props.fileSize)[m
[32m+[m[32m);[m
[32m+[m
[32m+[m[32mwatch(() => props.modelValue, val => {[m
[32m+[m[32m  if (val) {[m
[32m+[m[32m    // é¦–å…ˆå°†å€¼è½¬ä¸ºæ•°ç»„[m
[32m+[m[32m    const list = Array.isArray(val) ? val : props.modelValue.split(",");[m
[32m+[m[32m    // ç„¶åå°†æ•°ç»„è½¬ä¸ºå¯¹è±¡æ•°ç»„[m
[32m+[m[32m    fileList.value = list.map(item => {[m
[32m+[m[32m      if (typeof item === "string") {[m
[32m+[m[32m        if (item.indexOf(baseUrl) === -1) {[m
[32m+[m[32m          item = { name: baseUrl + item, url: baseUrl + item };[m
[32m+[m[32m        } else {[m
[32m+[m[32m          item = { name: item, url: item };[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m[32m      return item;[m
[32m+[m[32m    });[m
[32m+[m[32m  } else {[m
[32m+[m[32m    fileList.value = [];[m
[32m+[m[32m    return [];[m
[32m+[m[32m  }[m
[32m+[m[32m},{ deep: true, immediate: true });[m
[32m+[m
[32m+[m[32m// ä¸Šä¼ å‰loadingåŠ è½½[m
[32m+[m[32mfunction handleBeforeUpload(file) {[m
[32m+[m[32m  let isImg = false;[m
[32m+[m[32m  if (props.fileType.length) {[m
[32m+[m[32m    let fileExtension = "";[m
[32m+[m[32m    if (file.name.lastIndexOf(".") > -1) {[m
[32m+[m[32m      fileExtension = file.name.slice(file.name.lastIndexOf(".") + 1);[m
[32m+[m[32m    }[m
[32m+[m[32m    isImg = props.fileType.some(type => {[m
[32m+[m[32m      if (file.type.indexOf(type) > -1) return true;[m
[32m+[m[32m      if (fileExtension && fileExtension.indexOf(type) > -1) return true;[m
[32m+[m[32m      return false;[m
[32m+[m[32m    });[m
[32m+[m[32m  } else {[m
[32m+[m[32m    isImg = file.type.indexOf("image") > -1;[m
[32m+[m[32m  }[m
[32m+[m[32m  if (!isImg) {[m
[32m+[m[32m    proxy.$modal.msgError([m
[32m+[m[32m      `æ–‡ä»¶æ ¼å¼ä¸æ­£ç¡®, è¯·ä¸Šä¼ ${props.fileType.join("/")}å›¾ç‰‡æ ¼å¼æ–‡ä»¶!`[m
[32m+[m[32m    );[m
[32m+[m[32m    return false;[m
[32m+[m[32m  }[m
[32m+[m[32m  if (props.fileSize) {[m
[32m+[m[32m    const isLt = file.size / 1024 / 1024 < props.fileSize;[m
[32m+[m[32m    if (!isLt) {[m
[32m+[m[32m      proxy.$modal.msgError(`ä¸Šä¼ å¤´åƒå›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡ ${props.fileSize} MB!`);[m
[32m+[m[32m      return false;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  proxy.$modal.loading("æ­£åœ¨ä¸Šä¼ å›¾ç‰‡ï¼Œè¯·ç¨å€™...");[m
[32m+[m[32m  number.value++;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ–‡ä»¶ä¸ªæ•°è¶…å‡º[m
[32m+[m[32mfunction handleExceed() {[m
[32m+[m[32m  proxy.$modal.msgError(`ä¸Šä¼ æ–‡ä»¶æ•°é‡ä¸èƒ½è¶…è¿‡ ${props.limit} ä¸ª!`);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¸Šä¼ æˆåŠŸå›è°ƒ[m
[32m+[m[32mfunction handleUploadSuccess(res, file) {[m
[32m+[m[32m  if (res.code === 200) {[m
[32m+[m[32m    uploadList.value.push({ name: res.fileName, url: res.fileName });[m
[32m+[m[32m    uploadedSuccessfully();[m
[32m+[m[32m  } else {[m
[32m+[m[32m    number.value--;[m
[32m+[m[32m    proxy.$modal.closeLoading();[m
[32m+[m[32m    proxy.$modal.msgError(res.msg);[m
[32m+[m[32m    proxy.$refs.imageUpload.handleRemove(file);[m
[32m+[m[32m    uploadedSuccessfully();[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ é™¤å›¾ç‰‡[m
[32m+[m[32mfunction handleDelete(file) {[m
[32m+[m[32m  const findex = fileList.value.map(f => f.name).indexOf(file.name);[m
[32m+[m[32m  if (findex > -1 && uploadList.value.length === number.value) {[m
[32m+[m[32m    fileList.value.splice(findex, 1);[m
[32m+[m[32m    emit("update:modelValue", listToString(fileList.value));[m
[32m+[m[32m    return false;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¸Šä¼ ç»“æŸå¤„ç†[m
[32m+[m[32mfunction uploadedSuccessfully() {[m
[32m+[m[32m  if (number.value > 0 && uploadList.value.length === number.value) {[m
[32m+[m[32m    fileList.value = fileList.value.filter(f => f.url !== undefined).concat(uploadList.value);[m
[32m+[m[32m    uploadList.value = [];[m
[32m+[m[32m    number.value = 0;[m
[32m+[m[32m    emit("update:modelValue", listToString(fileList.value));[m
[32m+[m[32m    proxy.$modal.closeLoading();[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¸Šä¼ å¤±è´¥[m
[32m+[m[32mfunction handleUploadError() {[m
[32m+[m[32m  proxy.$modal.msgError("ä¸Šä¼ å›¾ç‰‡å¤±è´¥");[m
[32m+[m[32m  proxy.$modal.closeLoading();[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// é¢„è§ˆ[m
[32m+[m[32mfunction handlePictureCardPreview(file) {[m
[32m+[m[32m  dialogImageUrl.value = file.url;[m
[32m+[m[32m  dialogVisible.value = true;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å¯¹è±¡è½¬æˆæŒ‡å®šå­—ç¬¦ä¸²åˆ†éš”[m
[32m+[m[32mfunction listToString(list, separator) {[m
[32m+[m[32m  let strs = "";[m
[32m+[m[32m  separator = separator || ",";[m
[32m+[m[32m  for (let i in list) {[m
[32m+[m[32m    if (undefined !== list[i].url && list[i].url.indexOf("blob:") !== 0) {[m
[32m+[m[32m      strs += list[i].url.replace(baseUrl, "") + separator;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  return strs != "" ? strs.substr(0, strs.length - 1) : "";[m
[32m+[m[32m}[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style scoped lang="scss">[m
[32m+[m[32m// .el-upload--picture-card æ§åˆ¶åŠ å·éƒ¨åˆ†[m
[32m+[m[32m:deep(.hide .el-upload--picture-card) {[m
[32m+[m[32m    display: none;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/components/LoginStatus.vue b/src/components/LoginStatus.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..f88c7e1d[m
[1m--- /dev/null[m
[1m+++ b/src/components/LoginStatus.vue[m
[36m@@ -0,0 +1,217 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="login-status">[m
[32m+[m[32m    <!-- æœªç™»å½•çŠ¶æ€ -->[m
[32m+[m[32m    <transition name="fade">[m
[32m+[m[32m      <div v-if="!isLoggedIn" key="login">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="primary"[m
[32m+[m[32m          size="small"[m
[32m+[m[32m          @click="handleLoginClick"[m
[32m+[m[32m          class="login-btn"[m
[32m+[m[32m        >[m
[32m+[m[32m          ç™»å½•[m
[32m+[m[32m        </el-button>[m
[32m+[m[32m      </div>[m
[32m+[m[32m    </transition>[m
[32m+[m
[32m+[m[32m    <!-- å·²ç™»å½•çŠ¶æ€ -->[m
[32m+[m[32m    <transition name="fade">[m
[32m+[m[32m      <div v-if="isLoggedIn" key="user" class="user-info" @click="handleUserClick">[m
[32m+[m[32m        <div class="user-avatar">[m
[32m+[m[32m          <img[m[41m [m
[32m+[m[32m            :src="userAvatar"[m[41m [m
[32m+[m[32m            :alt="finalUserInfo?.nickname || finalUserInfo?.username"[m
[32m+[m[32m            @error="handleAvatarError"[m
[32m+[m[32m            class="avatar-img"[m
[32m+[m[32m          />[m
[32m+[m[32m        </div>[m
[32m+[m[32m        <span class="user-nickname">{{ finalUserInfo?.nickname || finalUserInfo?.username }}</span>[m
[32m+[m[32m        <el-icon class="arrow-icon"><ArrowDown /></el-icon>[m
[32m+[m[32m      </div>[m
[32m+[m[32m    </transition>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { ref, computed, onMounted, watch } from 'vue'[m
[32m+[m[32mimport { useRouter } from 'vue-router'[m
[32m+[m[32mimport { ArrowDown } from '@element-plus/icons-vue'[m
[32m+[m[32mimport { ElMessage } from 'element-plus'[m
[32m+[m[32mimport { getAppUserInfo } from '@/api/appLogin'[m
[32m+[m
[32m+[m[32mconst router = useRouter()[m
[32m+[m
[32m+[m[32m// å®šä¹‰props[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m  // å¯ä»¥ä»çˆ¶ç»„ä»¶ä¼ å…¥ç”¨æˆ·ä¿¡æ¯ï¼Œä¼˜å…ˆçº§é«˜äºæœ¬åœ°å­˜å‚¨[m
[32m+[m[32m  userInfo: {[m
[32m+[m[32m    type: Object,[m
[32m+[m[32m    default: null[m
[32m+[m[32m  }[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32m// å®šä¹‰äº‹ä»¶[m
[32m+[m[32mconst emit = defineEmits(['login', 'logout', 'profile'])[m
[32m+[m
[32m+[m[32m// æœ¬åœ°ç”¨æˆ·ä¿¡æ¯[m
[32m+[m[32mconst localUserInfo = ref(null)[m
[32m+[m[32m// é»˜è®¤å¤´åƒ[m
[32m+[m[32mconst defaultAvatar = '/img/profile.jpg'[m
[32m+[m
[32m+[m[32m// è®¡ç®—ç™»å½•çŠ¶æ€[m
[32m+[m[32mconst isLoggedIn = computed(() => {[m
[32m+[m[32m  return !!(localStorage.getItem('app_token') || props.userInfo || localUserInfo.value)[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32m// è®¡ç®—æœ€ç»ˆç”¨æˆ·ä¿¡æ¯[m
[32m+[m[32mconst finalUserInfo = computed(() => {[m
[32m+[m[32m  return props.userInfo || localUserInfo.value[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32m// è®¡ç®—ç”¨æˆ·å¤´åƒ[m
[32m+[m[32mconst userAvatar = computed(() => {[m
[32m+[m[32m  if (finalUserInfo.value && finalUserInfo.value.avatar) {[m
[32m+[m[32m    return finalUserInfo.value.avatar[m
[32m+[m[32m  }[m
[32m+[m[32m  return defaultAvatar[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32m// è·å–ç”¨æˆ·ä¿¡æ¯[m
[32m+[m[32mconst fetchUserInfo = async () => {[m
[32m+[m[32m  try {[m
[32m+[m[32m    const token = localStorage.getItem('app_token')[m
[32m+[m[32m    if (token) {[m
[32m+[m[32m      const res = await getAppUserInfo()[m
[32m+[m[32m      localUserInfo.value = res.user[m
[32m+[m[32m    }[m
[32m+[m[32m  } catch (err) {[m
[32m+[m[32m    console.error('è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:', err)[m
[32m+[m[32m    localStorage.removeItem('app_token')[m
[32m+[m[32m    localUserInfo.value = null[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å¤„ç†ç™»å½•æŒ‰é’®ç‚¹å‡»[m
[32m+[m[32mconst handleLoginClick = () => {[m
[32m+[m[32m  emit('login')[m
[32m+[m[32m  router.push('/portal/login')[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å¤„ç†ç”¨æˆ·ä¿¡æ¯ç‚¹å‡»[m
[32m+[m[32mconst handleUserClick = () => {[m
[32m+[m[32m  emit('profile')[m
[32m+[m[32m  router.push('/portal/user/profile')[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å¤„ç†å¤´åƒåŠ è½½å¤±è´¥[m
[32m+[m[32mconst handleAvatarError = (event) => {[m
[32m+[m[32m  event.target.src = defaultAvatar[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ç›‘å¬ç™»å½•çŠ¶æ€å˜åŒ–[m
[32m+[m[32mwatch([m
[32m+[m[32m  () => props.userInfo,[m
[32m+[m[32m  (newVal) => {[m
[32m+[m[32m    if (newVal) {[m
[32m+[m[32m      localUserInfo.value = newVal[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m)[m
[32m+[m
[32m+[m[32m// ç»„ä»¶æŒ‚è½½æ—¶è·å–ç”¨æˆ·ä¿¡æ¯[m
[32m+[m[32monMounted(() => {[m
[32m+[m[32m  if (!props.userInfo) {[m
[32m+[m[32m    fetchUserInfo()[m
[32m+[m[32m  }[m
[32m+[m[32m})[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style scoped>[m
[32m+[m[32m.login-status {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  cursor: pointer;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* ç™»å½•æŒ‰é’®æ ·å¼ */[m
[32m+[m[32m.login-btn {[m
[32m+[m[32m  border-radius: 20px;[m
[32m+[m[32m  padding: 6px 16px;[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m  transition: all 0.3s ease;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.login-btn:hover {[m
[32m+[m[32m  transform: translateY(-2px);[m
[32m+[m[32m  box-shadow: 0 4px 12px rgba(64, 158, 255, 0.15);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* ç”¨æˆ·ä¿¡æ¯æ ·å¼ */[m
[32m+[m[32m.user-info {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  gap: 8px;[m
[32m+[m[32m  padding: 6px 12px;[m
[32m+[m[32m  border-radius: 20px;[m
[32m+[m[32m  background-color: #f5f7fa;[m
[32m+[m[32m  transition: all 0.3s ease;[m
[32m+[m[32m  cursor: pointer;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.user-info:hover {[m
[32m+[m[32m  background-color: #ecf5ff;[m
[32m+[m[32m  transform: translateY(-2px);[m
[32m+[m[32m  box-shadow: 0 4px 12px rgba(64, 158, 255, 0.15);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* ç”¨æˆ·å¤´åƒæ ·å¼ */[m
[32m+[m[32m.user-avatar {[m
[32m+[m[32m  width: 32px;[m
[32m+[m[32m  height: 32px;[m
[32m+[m[32m  border-radius: 50%;[m
[32m+[m[32m  overflow: hidden;[m
[32m+[m[32m  border: 2px solid #fff;[m
[32m+[m[32m  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.avatar-img {[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m  height: 100%;[m
[32m+[m[32m  object-fit: cover;[m
[32m+[m[32m  transition: all 0.3s ease;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* ç”¨æˆ·æ˜µç§°æ ·å¼ */[m
[32m+[m[32m.user-nickname {[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m  color: #303133;[m
[32m+[m[32m  font-weight: 500;[m
[32m+[m[32m  max-width: 100px;[m
[32m+[m[32m  overflow: hidden;[m
[32m+[m[32m  text-overflow: ellipsis;[m
[32m+[m[32m  white-space: nowrap;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* ç®­å¤´å›¾æ ‡æ ·å¼ */[m
[32m+[m[32m.arrow-icon {[m
[32m+[m[32m  font-size: 12px;[m
[32m+[m[32m  color: #909399;[m
[32m+[m[32m  transition: transform 0.3s ease;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.user-info:hover .arrow-icon {[m
[32m+[m[32m  transform: rotate(180deg);[m
[32m+[m[32m  color: #409eff;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* è¿‡æ¸¡åŠ¨ç”» */[m
[32m+[m[32m.fade-enter-active,[m
[32m+[m[32m.fade-leave-active {[m
[32m+[m[32m  transition: opacity 0.3s ease;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.fade-enter-from,[m
[32m+[m[32m.fade-leave-to {[m
[32m+[m[32m  opacity: 0;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/components/Pagination/index.vue b/src/components/Pagination/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..38de953f[m
[1m--- /dev/null[m
[1m+++ b/src/components/Pagination/index.vue[m
[36m@@ -0,0 +1,105 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div :class="{ 'hidden': hidden }" class="pagination-container">[m
[32m+[m[32m    <el-pagination[m
[32m+[m[32m      :background="background"[m
[32m+[m[32m      v-model:current-page="currentPage"[m
[32m+[m[32m      v-model:page-size="pageSize"[m
[32m+[m[32m      :layout="layout"[m
[32m+[m[32m      :page-sizes="pageSizes"[m
[32m+[m[32m      :pager-count="pagerCount"[m
[32m+[m[32m      :total="total"[m
[32m+[m[32m      @size-change="handleSizeChange"[m
[32m+[m[32m      @current-change="handleCurrentChange"[m
[32m+[m[32m    />[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { scrollTo } from '@/utils/scroll-to'[m
[32m+[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m  total: {[m
[32m+[m[32m    required: true,[m
[32m+[m[32m    type: Number[m
[32m+[m[32m  },[m
[32m+[m[32m  page: {[m
[32m+[m[32m    type: Number,[m
[32m+[m[32m    default: 1[m
[32m+[m[32m  },[m
[32m+[m[32m  limit: {[m
[32m+[m[32m    type: Number,[m
[32m+[m[32m    default: 20[m
[32m+[m[32m  },[m
[32m+[m[32m  pageSizes: {[m
[32m+[m[32m    type: Array,[m
[32m+[m[32m    default() {[m
[32m+[m[32m      return [10, 20, 30, 50][m
[32m+[m[32m    }[m
[32m+[m[32m  },[m
[32m+[m[32m  // ç§»åŠ¨ç«¯é¡µç æŒ‰é’®çš„æ•°é‡ç«¯é»˜è®¤å€¼5[m
[32m+[m[32m  pagerCount: {[m
[32m+[m[32m    type: Number,[m
[32m+[m[32m    default: document.body.clientWidth < 992 ? 5 : 7[m
[32m+[m[32m  },[m
[32m+[m[32m  layout: {[m
[32m+[m[32m    type: String,[m
[32m+[m[32m    default: 'total, sizes, prev, pager, next, jumper'[m
[32m+[m[32m  },[m
[32m+[m[32m  background: {[m
[32m+[m[32m    type: Boolean,[m
[32m+[m[32m    default: true[m
[32m+[m[32m  },[m
[32m+[m[32m  autoScroll: {[m
[32m+[m[32m    type: Boolean,[m
[32m+[m[32m    default: true[m
[32m+[m[32m  },[m
[32m+[m[32m  hidden: {[m
[32m+[m[32m    type: Boolean,[m
[32m+[m[32m    default: false[m
[32m+[m[32m  }[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32mconst emit = defineEmits();[m
[32m+[m[32mconst currentPage = computed({[m
[32m+[m[32m  get() {[m
[32m+[m[32m    return props.page[m
[32m+[m[32m  },[m
[32m+[m[32m  set(val) {[m
[32m+[m[32m    emit('update:page', val)[m
[32m+[m[32m  }[m
[32m+[m[32m})[m
[32m+[m[32mconst pageSize = computed({[m
[32m+[m[32m  get() {[m
[32m+[m[32m    return props.limit[m
[32m+[m[32m  },[m
[32m+[m[32m  set(val){[m
[32m+[m[32m    emit('update:limit', val)[m
[32m+[m[32m  }[m
[32m+[m[32m})[m
[32m+[m[32mfunction handleSizeChange(val) {[m
[32m+[m[32m  if (currentPage.value * val > props.total) {[m
[32m+[m[32m    currentPage.value = 1[m
[32m+[m[32m  }[m
[32m+[m[32m  emit('pagination', { page: currentPage.value, limit: val })[m
[32m+[m[32m  if (props.autoScroll) {[m
[32m+[m[32m    scrollTo(0, 800)[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32mfunction handleCurrentChange(val) {[m
[32m+[m[32m  emit('pagination', { page: val, limit: pageSize.value })[m
[32m+[m[32m  if (props.autoScroll) {[m
[32m+[m[32m    scrollTo(0, 800)[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style scoped>[m
[32m+[m[32m.pagination-container {[m
[32m+[m[32m  background: #fff;[m
[32m+[m[32m  padding: 32px 16px;[m
[32m+[m[32m}[m
[32m+[m[32m.pagination-container.hidden {[m
[32m+[m[32m  display: none;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/components/ParentView/index.vue b/src/components/ParentView/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..7bf61489[m
[1m--- /dev/null[m
[1m+++ b/src/components/ParentView/index.vue[m
[36m@@ -0,0 +1,3 @@[m
[32m+[m[32m<template >[m
[32m+[m[32m  <router-view />[m
[32m+[m[32m</template>[m
[1mdiff --git a/src/components/RightToolbar/index.vue b/src/components/RightToolbar/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..5a53dd49[m
[1m--- /dev/null[m
[1m+++ b/src/components/RightToolbar/index.vue[m
[36m@@ -0,0 +1,134 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="top-right-btn" :style="style">[m
[32m+[m[32m    <el-row>[m
[32m+[m[32m      <el-tooltip class="item" effect="dark" :content="showSearch ? 'éšè—æœç´¢' : 'æ˜¾ç¤ºæœç´¢'" placement="top" v-if="search">[m
[32m+[m[32m        <el-button circle icon="Search" @click="toggleSearch()" />[m
[32m+[m[32m      </el-tooltip>[m
[32m+[m[32m      <el-tooltip class="item" effect="dark" content="åˆ·æ–°" placement="top">[m
[32m+[m[32m        <el-button circle icon="Refresh" @click="refresh()" />[m
[32m+[m[32m      </el-tooltip>[m
[32m+[m[32m      <el-tooltip class="item" effect="dark" content="æ˜¾éšåˆ—" placement="top" v-if="columns">[m
[32m+[m[32m        <el-button circle icon="Menu" @click="showColumn()" v-if="showColumnsType == 'transfer'"/>[m
[32m+[m[32m        <el-dropdown trigger="click" :hide-on-click="false" style="padding-left: 12px" v-if="showColumnsType == 'checkbox'">[m
[32m+[m[32m          <el-button circle icon="Menu" />[m
[32m+[m[32m          <template #dropdown>[m
[32m+[m[32m            <el-dropdown-menu>[m
[32m+[m[32m              <template v-for="item in columns" :key="item.key">[m
[32m+[m[32m                <el-dropdown-item>[m
[32m+[m[32m                  <el-checkbox :checked="item.visible" @change="checkboxChange($event, item.label)" :label="item.label" />[m
[32m+[m[32m                </el-dropdown-item>[m
[32m+[m[32m              </template>[m
[32m+[m[32m            </el-dropdown-menu>[m
[32m+[m[32m          </template>[m
[32m+[m[32m        </el-dropdown>[m
[32m+[m[32m      </el-tooltip>[m
[32m+[m[32m    </el-row>[m
[32m+[m[32m    <el-dialog :title="title" v-model="open" append-to-body>[m
[32m+[m[32m      <el-transfer[m
[32m+[m[32m        :titles="['æ˜¾ç¤º', 'éšè—']"[m
[32m+[m[32m        v-model="value"[m
[32m+[m[32m        :data="columns"[m
[32m+[m[32m        @change="dataChange"[m
[32m+[m[32m      ></el-transfer>[m
[32m+[m[32m    </el-dialog>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m  /* æ˜¯å¦æ˜¾ç¤ºæ£€ç´¢æ¡ä»¶ */[m
[32m+[m[32m  showSearch: {[m
[32m+[m[32m    type: Boolean,[m
[32m+[m[32m    default: true,[m
[32m+[m[32m  },[m
[32m+[m[32m  /* æ˜¾éšåˆ—ä¿¡æ¯ */[m
[32m+[m[32m  columns: {[m
[32m+[m[32m    type: Array,[m
[32m+[m[32m  },[m
[32m+[m[32m  /* æ˜¯å¦æ˜¾ç¤ºæ£€ç´¢å›¾æ ‡ */[m
[32m+[m[32m  search: {[m
[32m+[m[32m    type: Boolean,[m
[32m+[m[32m    default: true,[m
[32m+[m[32m  },[m
[32m+[m[32m  /* æ˜¾éšåˆ—ç±»å‹ï¼ˆtransferç©¿æ¢­æ¡†ã€checkboxå¤é€‰æ¡†ï¼‰ */[m
[32m+[m[32m  showColumnsType: {[m
[32m+[m[32m    type: String,[m
[32m+[m[32m    default: "checkbox",[m
[32m+[m[32m  },[m
[32m+[m[32m  /* å³å¤–è¾¹è· */[m
[32m+[m[32m  gutter: {[m
[32m+[m[32m    type: Number,[m
[32m+[m[32m    default: 10,[m
[32m+[m[32m  },[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32mconst emits = defineEmits(['update:showSearch', 'queryTable']);[m
[32m+[m
[32m+[m[32m// æ˜¾éšæ•°æ®[m
[32m+[m[32mconst value = ref([]);[m
[32m+[m[32m// å¼¹å‡ºå±‚æ ‡é¢˜[m
[32m+[m[32mconst title = ref("æ˜¾ç¤º/éšè—");[m
[32m+[m[32m// æ˜¯å¦æ˜¾ç¤ºå¼¹å‡ºå±‚[m
[32m+[m[32mconst open = ref(false);[m
[32m+[m
[32m+[m[32mconst style = computed(() => {[m
[32m+[m[32m  const ret = {};[m
[32m+[m[32m  if (props.gutter) {[m
[32m+[m[32m    ret.marginRight = `${props.gutter / 2}px`;[m
[32m+[m[32m  }[m
[32m+[m[32m  return ret;[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m// æœç´¢[m
[32m+[m[32mfunction toggleSearch() {[m
[32m+[m[32m  emits("update:showSearch", !props.showSearch);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ·æ–°[m
[32m+[m[32mfunction refresh() {[m
[32m+[m[32m  emits("queryTable");[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å³ä¾§åˆ—è¡¨å…ƒç´ å˜åŒ–[m
[32m+[m[32mfunction dataChange(data) {[m
[32m+[m[32m  for (let item in props.columns) {[m
[32m+[m[32m    const key = props.columns[item].key;[m
[32m+[m[32m    props.columns[item].visible = !data.includes(key);[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ‰“å¼€æ˜¾éšåˆ—dialog[m
[32m+[m[32mfunction showColumn() {[m
[32m+[m[32m  open.value = true;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mif (props.showColumnsType == 'transfer') {[m
[32m+[m[32m  // æ˜¾éšåˆ—åˆå§‹é»˜è®¤éšè—åˆ—[m
[32m+[m[32m  for (let item in props.columns) {[m
[32m+[m[32m    if (props.columns[item].visible === false) {[m
[32m+[m[32m      value.value.push(parseInt(item));[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å‹¾é€‰[m
[32m+[m[32mfunction checkboxChange(event, label) {[m
[32m+[m[32m  props.columns.filter(item => item.label == label)[0].visible = event;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang='scss' scoped>[m
[32m+[m[32m:deep(.el-transfer__button) {[m
[32m+[m[32m  border-radius: 50%;[m
[32m+[m[32m  display: block;[m
[32m+[m[32m  margin-left: 0px;[m
[32m+[m[32m}[m
[32m+[m[32m:deep(.el-transfer__button:first-child) {[m
[32m+[m[32m  margin-bottom: 10px;[m
[32m+[m[32m}[m
[32m+[m[32m:deep(.el-dropdown-menu__item) {[m
[32m+[m[32m  line-height: 30px;[m
[32m+[m[32m  padding: 0 17px;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
[1mdiff --git a/src/components/RuoYi/Doc/index.vue b/src/components/RuoYi/Doc/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..51f13cb6[m
[1m--- /dev/null[m
[1m+++ b/src/components/RuoYi/Doc/index.vue[m
[36m@@ -0,0 +1,13 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div>[m
[32m+[m[32m    <svg-icon icon-class="question" @click="goto" />[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mconst url = ref('http://doc.ruoyi.vip/ruoyi-vue');[m
[32m+[m
[32m+[m[32mfunction goto() {[m
[32m+[m[32m  window.open(url.value)[m
[32m+[m[32m}[m
[32m+[m[32m</script>[m
\ No newline at end of file[m
[1mdiff --git a/src/components/RuoYi/Git/index.vue b/src/components/RuoYi/Git/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..b4459f3f[m
[1m--- /dev/null[m
[1m+++ b/src/components/RuoYi/Git/index.vue[m
[36m@@ -0,0 +1,13 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div>[m
[32m+[m[32m    <svg-icon icon-class="github" @click="goto" />[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mconst url = ref('https://gitee.com/y_project/RuoYi-Vue');[m
[32m+[m
[32m+[m[32mfunction goto() {[m
[32m+[m[32m  window.open(url.value)[m
[32m+[m[32m}[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/components/Screenfull/index.vue b/src/components/Screenfull/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..7ad28ead[m
[1m--- /dev/null[m
[1m+++ b/src/components/Screenfull/index.vue[m
[36m@@ -0,0 +1,22 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div>[m
[32m+[m[32m    <svg-icon :icon-class="isFullscreen ? 'exit-fullscreen' : 'fullscreen'" @click="toggle" />[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { useFullscreen } from '@vueuse/core'[m
[32m+[m
[32m+[m[32mconst { isFullscreen, enter, exit, toggle } = useFullscreen();[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang='scss' scoped>[m
[32m+[m[32m.screenfull-svg {[m
[32m+[m[32m  display: inline-block;[m
[32m+[m[32m  cursor: pointer;[m
[32m+[m[32m  fill: #5a5e66;[m
[32m+[m[32m  width: 20px;[m
[32m+[m[32m  height: 20px;[m
[32m+[m[32m  vertical-align: 10px;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/components/SizeSelect/index.vue b/src/components/SizeSelect/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..4c2e7e95[m
[1m--- /dev/null[m
[1m+++ b/src/components/SizeSelect/index.vue[m
[36m@@ -0,0 +1,45 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div>[m
[32m+[m[32m    <el-dropdown trigger="click" @command="handleSetSize">[m
[32m+[m[32m      <div class="size-icon--style">[m
[32m+[m[32m        <svg-icon class-name="size-icon" icon-class="size" />[m
[32m+[m[32m      </div>[m
[32m+[m[32m      <template #dropdown>[m
[32m+[m[32m        <el-dropdown-menu>[m
[32m+[m[32m          <el-dropdown-item v-for="item of sizeOptions" :key="item.value" :disabled="size === item.value" :command="item.value">[m
[32m+[m[32m            {{ item.label }}[m
[32m+[m[32m          </el-dropdown-item>[m
[32m+[m[32m        </el-dropdown-menu>[m
[32m+[m[32m      </template>[m
[32m+[m[32m    </el-dropdown>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport useAppStore from "@/store/modules/app";[m
[32m+[m
[32m+[m[32mconst appStore = useAppStore();[m
[32m+[m[32mconst size = computed(() => appStore.size);[m
[32m+[m[32mconst route = useRoute();[m
[32m+[m[32mconst router = useRouter();[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m[32mconst sizeOptions = ref([[m
[32m+[m[32m  { label: "è¾ƒå¤§", value: "large" },[m
[32m+[m[32m  { label: "é»˜è®¤", value: "default" },[m
[32m+[m[32m  { label: "ç¨å°", value: "small" },[m
[32m+[m[32m]);[m
[32m+[m
[32m+[m[32mfunction handleSetSize(size) {[m
[32m+[m[32m  proxy.$modal.loading("æ­£åœ¨è®¾ç½®å¸ƒå±€å¤§å°ï¼Œè¯·ç¨å€™...");[m
[32m+[m[32m  appStore.setSize(size);[m
[32m+[m[32m  setTimeout("window.location.reload()", 1000);[m
[32m+[m[32m}[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang='scss' scoped>[m
[32m+[m[32m.size-icon--style {[m
[32m+[m[32m  font-size: 18px;[m
[32m+[m[32m  line-height: 50px;[m
[32m+[m[32m  padding-right: 7px;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/components/SvgIcon/index.vue b/src/components/SvgIcon/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..8c101f64[m
[1m--- /dev/null[m
[1m+++ b/src/components/SvgIcon/index.vue[m
[36m@@ -0,0 +1,53 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <svg :class="svgClass" aria-hidden="true">[m
[32m+[m[32m    <use :xlink:href="iconName" :fill="color" />[m
[32m+[m[32m  </svg>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script>[m
[32m+[m[32mexport default defineComponent({[m
[32m+[m[32m  props: {[m
[32m+[m[32m    iconClass: {[m
[32m+[m[32m      type: String,[m
[32m+[m[32m      required: true[m
[32m+[m[32m    },[m
[32m+[m[32m    className: {[m
[32m+[m[32m      type: String,[m
[32m+[m[32m      default: ''[m
[32m+[m[32m    },[m
[32m+[m[32m    color: {[m
[32m+[m[32m      type: String,[m
[32m+[m[32m      default: ''[m
[32m+[m[32m    },[m
[32m+[m[32m  },[m
[32m+[m[32m  setup(props) {[m
[32m+[m[32m    return {[m
[32m+[m[32m      iconName: computed(() => `#icon-${props.iconClass}`),[m
[32m+[m[32m      svgClass: computed(() => {[m
[32m+[m[32m        if (props.className) {[m
[32m+[m[32m          return `svg-icon ${props.className}`[m
[32m+[m[32m        }[m
[32m+[m[32m        return 'svg-icon'[m
[32m+[m[32m      })[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m})[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style scope lang="scss">[m
[32m+[m[32m.sub-el-icon,[m
[32m+[m[32m.nav-icon {[m
[32m+[m[32m  display: inline-block;[m
[32m+[m[32m  font-size: 15px;[m
[32m+[m[32m  margin-right: 12px;[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.svg-icon {[m
[32m+[m[32m  width: 1em;[m
[32m+[m[32m  height: 1em;[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m  fill: currentColor;[m
[32m+[m[32m  vertical-align: -2px;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
[1mdiff --git a/src/components/SvgIcon/svgicon.js b/src/components/SvgIcon/svgicon.js[m
[1mnew file mode 100644[m
[1mindex 00000000..4431719a[m
[1m--- /dev/null[m
[1m+++ b/src/components/SvgIcon/svgicon.js[m
[36m@@ -0,0 +1,10 @@[m
[32m+[m[32mimport * as components from '@element-plus/icons-vue'[m
[32m+[m
[32m+[m[32mexport default {[m
[32m+[m[32m    install: (app) => {[m
[32m+[m[32m        for (const key in components) {[m
[32m+[m[32m            const componentConfig = components[key];[m
[32m+[m[32m            app.component(componentConfig.name, componentConfig);[m
[32m+[m[32m        }[m
[32m+[m[32m    },[m
[32m+[m[32m};[m
[1mdiff --git a/src/components/TopNav/index.vue b/src/components/TopNav/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..52b40ea1[m
[1m--- /dev/null[m
[1m+++ b/src/components/TopNav/index.vue[m
[36m@@ -0,0 +1,214 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <el-menu[m
[32m+[m[32m    :default-active="activeMenu"[m
[32m+[m[32m    mode="horizontal"[m
[32m+[m[32m    @select="handleSelect"[m
[32m+[m[32m    :ellipsis="false"[m
[32m+[m[32m  >[m
[32m+[m[32m    <template v-for="(item, index) in topMenus">[m
[32m+[m[32m      <el-menu-item :style="{'--theme': theme}" :index="item.path" :key="index" v-if="index < visibleNumber">[m
[32m+[m[32m        <svg-icon[m
[32m+[m[32m        v-if="item.meta && item.meta.icon && item.meta.icon !== '#'"[m
[32m+[m[32m        :icon-class="item.meta.icon"/>[m
[32m+[m[32m        {{ item.meta.title }}[m
[32m+[m[32m      </el-menu-item>[m
[32m+[m[32m    </template>[m
[32m+[m
[32m+[m[32m    <!-- é¡¶éƒ¨èœå•è¶…å‡ºæ•°é‡æŠ˜å  -->[m
[32m+[m[32m    <el-sub-menu :style="{'--theme': theme}" index="more" v-if="topMenus.length > visibleNumber">[m
[32m+[m[32m      <template #title>æ›´å¤šèœå•</template>[m
[32m+[m[32m      <template v-for="(item, index) in topMenus">[m
[32m+[m[32m        <el-menu-item[m
[32m+[m[32m          :index="item.path"[m
[32m+[m[32m          :key="index"[m
[32m+[m[32m          v-if="index >= visibleNumber">[m
[32m+[m[32m        <svg-icon[m
[32m+[m[32m          v-if="item.meta && item.meta.icon && item.meta.icon !== '#'"[m
[32m+[m[32m          :icon-class="item.meta.icon"/>[m
[32m+[m[32m        {{ item.meta.title }}[m
[32m+[m[32m        </el-menu-item>[m
[32m+[m[32m      </template>[m
[32m+[m[32m    </el-sub-menu>[m
[32m+[m[32m  </el-menu>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { constantRoutes } from "@/router"[m
[32m+[m[32mimport { isHttp } from '@/utils/validate'[m
[32m+[m[32mimport useAppStore from '@/store/modules/app'[m
[32m+[m[32mimport useSettingsStore from '@/store/modules/settings'[m
[32m+[m[32mimport usePermissionStore from '@/store/modules/permission'[m
[32m+[m
[32m+[m[32m// é¡¶éƒ¨æ åˆå§‹æ•°[m
[32m+[m[32mconst visibleNumber = ref(null);[m
[32m+[m[32m// å½“å‰æ¿€æ´»èœå•çš„ index[m
[32m+[m[32mconst currentIndex = ref(null);[m
[32m+[m[32m// éšè—ä¾§è¾¹æ è·¯ç”±[m
[32m+[m[32mconst hideList = ['/index', '/user/profile'];[m
[32m+[m
[32m+[m[32mconst appStore = useAppStore()[m
[32m+[m[32mconst settingsStore = useSettingsStore()[m
[32m+[m[32mconst permissionStore = usePermissionStore()[m
[32m+[m[32mconst route = useRoute();[m
[32m+[m[32mconst router = useRouter();[m
[32m+[m
[32m+[m[32m// ä¸»é¢˜é¢œè‰²[m
[32m+[m[32mconst theme = computed(() => settingsStore.theme);[m
[32m+[m[32m// æ‰€æœ‰çš„è·¯ç”±ä¿¡æ¯[m
[32m+[m[32mconst routers = computed(() => permissionStore.topbarRouters);[m
[32m+[m
[32m+[m[32m// é¡¶éƒ¨æ˜¾ç¤ºèœå•[m
[32m+[m[32mconst topMenus = computed(() => {[m
[32m+[m[32m  let topMenus = [];[m
[32m+[m[32m  routers.value.map((menu) => {[m
[32m+[m[32m    if (menu.hidden !== true) {[m
[32m+[m[32m      // å…¼å®¹é¡¶éƒ¨æ ä¸€çº§èœå•å†…éƒ¨è·³è½¬[m
[32m+[m[32m      if (menu.path === "/") {[m
[32m+[m[32m          topMenus.push(menu.children[0]);[m
[32m+[m[32m      } else {[m
[32m+[m[32m          topMenus.push(menu);[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m[32m  return topMenus;[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32m// è®¾ç½®å­è·¯ç”±[m
[32m+[m[32mconst childrenMenus = computed(() => {[m
[32m+[m[32m  let childrenMenus = [];[m
[32m+[m[32m  routers.value.map((router) => {[m
[32m+[m[32m    for (let item in router.children) {[m
[32m+[m[32m      if (router.children[item].parentPath === undefined) {[m
[32m+[m[32m        if(router.path === "/") {[m
[32m+[m[32m          router.children[item].path = "/" + router.children[item].path;[m
[32m+[m[32m        } else {[m
[32m+[m[32m          if(!isHttp(router.children[item].path)) {[m
[32m+[m[32m            router.children[item].path = router.path + "/" + router.children[item].path;[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
[32m+[m[32m        router.children[item].parentPath = router.path;[m
[32m+[m[32m      }[m
[32m+[m[32m      childrenMenus.push(router.children[item]);[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m[32m  return constantRoutes.concat(childrenMenus);[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32m// é»˜è®¤æ¿€æ´»çš„èœå•[m
[32m+[m[32mconst activeMenu = computed(() => {[m
[32m+[m[32m  const path = route.path;[m
[32m+[m[32m  let activePath = path;[m
[32m+[m[32m  if (path !== undefined && path.lastIndexOf("/") > 0 && hideList.indexOf(path) === -1) {[m
[32m+[m[32m    const tmpPath = path.substring(1, path.length);[m
[32m+[m[32m    activePath = "/" + tmpPath.substring(0, tmpPath.indexOf("/"));[m
[32m+[m[32m    if (!route.meta.link) {[m
[32m+[m[32m        appStore.toggleSideBarHide(false);[m
[32m+[m[32m    }[m
[32m+[m[32m  } else if(!route.children) {[m
[32m+[m[32m    activePath = path;[m
[32m+[m[32m    appStore.toggleSideBarHide(true);[m
[32m+[m[32m  }[m
[32m+[m[32m  activeRoutes(activePath);[m
[32m+[m[32m  return activePath;[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32mfunction setVisibleNumber() {[m
[32m+[m[32m  const width = document.body.getBoundingClientRect().width / 3;[m
[32m+[m[32m  visibleNumber.value = parseInt(width / 85);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction handleSelect(key, keyPath) {[m
[32m+[m[32m  currentIndex.value = key;[m
[32m+[m[32m  const route = routers.value.find(item => item.path === key);[m
[32m+[m[32m  if (isHttp(key)) {[m
[32m+[m[32m    // http(s):// è·¯å¾„æ–°çª—å£æ‰“å¼€[m
[32m+[m[32m    window.open(key, "_blank");[m
[32m+[m[32m  } else if (!route || !route.children) {[m
[32m+[m[32m    // æ²¡æœ‰å­è·¯ç”±è·¯å¾„å†…éƒ¨æ‰“å¼€[m
[32m+[m[32m    const routeMenu = childrenMenus.value.find(item => item.path === key);[m
[32m+[m[32m    if (routeMenu && routeMenu.query) {[m
[32m+[m[32m      let query = JSON.parse(routeMenu.query);[m
[32m+[m[32m      router.push({ path: key, query: query });[m
[32m+[m[32m    } else {[m
[32m+[m[32m      router.push({ path: key });[m
[32m+[m[32m    }[m
[32m+[m[32m    appStore.toggleSideBarHide(true);[m
[32m+[m[32m  } else {[m
[32m+[m[32m    // æ˜¾ç¤ºå·¦ä¾§è”åŠ¨èœå•[m
[32m+[m[32m    activeRoutes(key);[m
[32m+[m[32m    appStore.toggleSideBarHide(false);[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction activeRoutes(key) {[m
[32m+[m[32m  let routes = [];[m
[32m+[m[32m  if (childrenMenus.value && childrenMenus.value.length > 0) {[m
[32m+[m[32m    childrenMenus.value.map((item) => {[m
[32m+[m[32m      if (key == item.parentPath || (key == "index" && "" == item.path)) {[m
[32m+[m[32m        routes.push(item);[m
[32m+[m[32m      }[m
[32m+[m[32m    });[m
[32m+[m[32m  }[m
[32m+[m[32m  if(routes.length > 0) {[m
[32m+[m[32m    permissionStore.setSidebarRouters(routes);[m
[32m+[m[32m  } else {[m
[32m+[m[32m    appStore.toggleSideBarHide(true);[m
[32m+[m[32m  }[m
[32m+[m[32m  return routes;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32monMounted(() => {[m
[32m+[m[32m  window.addEventListener('resize', setVisibleNumber)[m
[32m+[m[32m})[m
[32m+[m[32monBeforeUnmount(() => {[m
[32m+[m[32m  window.removeEventListener('resize', setVisibleNumber)[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32monMounted(() => {[m
[32m+[m[32m  setVisibleNumber()[m
[32m+[m[32m})[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang="scss">[m
[32m+[m[32m.topmenu-container.el-menu--horizontal > .el-menu-item {[m
[32m+[m[32m  float: left;[m
[32m+[m[32m  height: 50px !important;[m
[32m+[m[32m  line-height: 50px !important;[m
[32m+[m[32m  color: #999093 !important;[m
[32m+[m[32m  padding: 0 5px !important;[m
[32m+[m[32m  margin: 0 10px !important;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.topmenu-container.el-menu--horizontal > .el-menu-item.is-active, .el-menu--horizontal > .el-sub-menu.is-active .el-submenu__title {[m
[32m+[m[32m  border-bottom: 2px solid #{'var(--theme)'} !important;[m
[32m+[m[32m  color: #303133;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* sub-menu item */[m
[32m+[m[32m.topmenu-container.el-menu--horizontal > .el-sub-menu .el-sub-menu__title {[m
[32m+[m[32m  float: left;[m
[32m+[m[32m  height: 50px !important;[m
[32m+[m[32m  line-height: 50px !important;[m
[32m+[m[32m  color: #999093 !important;[m
[32m+[m[32m  padding: 0 5px !important;[m
[32m+[m[32m  margin: 0 10px !important;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* èƒŒæ™¯è‰²éšè— */[m
[32m+[m[32m.topmenu-container.el-menu--horizontal>.el-menu-item:not(.is-disabled):focus, .topmenu-container.el-menu--horizontal>.el-menu-item:not(.is-disabled):hover, .topmenu-container.el-menu--horizontal>.el-submenu .el-submenu__title:hover {[m
[32m+[m[32m  background-color: #ffffff !important;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* å›¾æ ‡å³é—´è· */[m
[32m+[m[32m.topmenu-container .svg-icon {[m
[32m+[m[32m  margin-right: 4px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* topmenu more arrow */[m
[32m+[m[32m.topmenu-container .el-sub-menu .el-sub-menu__icon-arrow {[m
[32m+[m[32m  position: static;[m
[32m+[m[32m  vertical-align: middle;[m
[32m+[m[32m  margin-left: 8px;[m
[32m+[m[32m  margin-top: 0px;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
[1mdiff --git a/src/components/TreeSelect/index.vue b/src/components/TreeSelect/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..4ff0e76d[m
[1m--- /dev/null[m
[1m+++ b/src/components/TreeSelect/index.vue[m
[36m@@ -0,0 +1,156 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="el-tree-select">[m
[32m+[m[32m    <el-select[m
[32m+[m[32m      style="width: 100%"[m
[32m+[m[32m      v-model="valueId"[m
[32m+[m[32m      ref="treeSelect"[m
[32m+[m[32m      :filterable="true"[m
[32m+[m[32m      :clearable="true"[m
[32m+[m[32m      @clear="clearHandle"[m
[32m+[m[32m      :filter-method="selectFilterData"[m
[32m+[m[32m      :placeholder="placeholder"[m
[32m+[m[32m    >[m
[32m+[m[32m      <el-option :value="valueId" :label="valueTitle">[m
[32m+[m[32m        <el-tree[m
[32m+[m[32m          id="tree-option"[m
[32m+[m[32m          ref="selectTree"[m
[32m+[m[32m          :accordion="accordion"[m
[32m+[m[32m          :data="options"[m
[32m+[m[32m          :props="objMap"[m
[32m+[m[32m          :node-key="objMap.value"[m
[32m+[m[32m          :expand-on-click-node="false"[m
[32m+[m[32m          :default-expanded-keys="defaultExpandedKey"[m
[32m+[m[32m          :filter-node-method="filterNode"[m
[32m+[m[32m          @node-click="handleNodeClick"[m
[32m+[m[32m        ></el-tree>[m
[32m+[m[32m      </el-option>[m
[32m+[m[32m    </el-select>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m  /* é…ç½®é¡¹ */[m
[32m+[m[32m  objMap: {[m
[32m+[m[32m    type: Object,[m
[32m+[m[32m    default: () => {[m
[32m+[m[32m      return {[m
[32m+[m[32m        value: 'id', // IDå­—æ®µå[m
[32m+[m[32m        label: 'label', // æ˜¾ç¤ºåç§°[m
[32m+[m[32m        children: 'children' // å­çº§å­—æ®µå[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  },[m
[32m+[m[32m  /* è‡ªåŠ¨æ”¶èµ· */[m
[32m+[m[32m  accordion: {[m
[32m+[m[32m    type: Boolean,[m
[32m+[m[32m    default: () => {[m
[32m+[m[32m      return false[m
[32m+[m[32m    }[m
[32m+[m[32m  },[m
[32m+[m[32m  /**å½“å‰åŒå‘æ•°æ®ç»‘å®šçš„å€¼ */[m
[32m+[m[32m  value: {[m
[32m+[m[32m    type: [String, Number],[m
[32m+[m[32m    default: ''[m
[32m+[m[32m  },[m
[32m+[m[32m  /**å½“å‰çš„æ•°æ® */[m
[32m+[m[32m  options: {[m
[32m+[m[32m    type: Array,[m
[32m+[m[32m    default: () => [][m
[32m+[m[32m  },[m
[32m+[m[32m  /**è¾“å…¥æ¡†å†…éƒ¨çš„æ–‡å­— */[m
[32m+[m[32m  placeholder: {[m
[32m+[m[32m    type: String,[m
[32m+[m[32m    default: ''[m
[32m+[m[32m  }[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32mconst emit = defineEmits(['update:value']);[m
[32m+[m
[32m+[m[32mconst valueId = computed({[m
[32m+[m[32m  get: () => props.value,[m
[32m+[m[32m  set: (val) => {[m
[32m+[m[32m    emit('update:value', val)[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m[32mconst valueTitle = ref('');[m
[32m+[m[32mconst defaultExpandedKey = ref([]);[m
[32m+[m
[32m+[m[32mfunction initHandle() {[m
[32m+[m[32m  nextTick(() => {[m
[32m+[m[32m    const selectedValue = valueId.value;[m
[32m+[m[32m    if(selectedValue !== null && typeof (selectedValue) !== 'undefined') {[m
[32m+[m[32m      const node = proxy.$refs.selectTree.getNode(selectedValue)[m
[32m+[m[32m      if (node) {[m
[32m+[m[32m        valueTitle.value = node.data[props.objMap.label][m
[32m+[m[32m        proxy.$refs.selectTree.setCurrentKey(selectedValue) // è®¾ç½®é»˜è®¤é€‰ä¸­[m
[32m+[m[32m        defaultExpandedKey.value = [selectedValue] // è®¾ç½®é»˜è®¤å±•å¼€[m
[32m+[m[32m      }[m
[32m+[m[32m    } else {[m
[32m+[m[32m      clearHandle()[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m[32mfunction handleNodeClick(node) {[m
[32m+[m[32m  valueTitle.value = node[props.objMap.label][m
[32m+[m[32m  valueId.value = node[props.objMap.value];[m
[32m+[m[32m  defaultExpandedKey.value = [];[m
[32m+[m[32m  proxy.$refs.treeSelect.blur()[m
[32m+[m[32m  selectFilterData('')[m
[32m+[m[32m}[m
[32m+[m[32mfunction selectFilterData(val) {[m
[32m+[m[32m  proxy.$refs.selectTree.filter(val)[m
[32m+[m[32m}[m
[32m+[m[32mfunction filterNode(value, data) {[m
[32m+[m[32m  if (!value) return true[m
[32m+[m[32m  return data[props.objMap['label']].indexOf(value) !== -1[m
[32m+[m[32m}[m
[32m+[m[32mfunction clearHandle() {[m
[32m+[m[32m  valueTitle.value = ''[m
[32m+[m[32m  valueId.value = ''[m
[32m+[m[32m  defaultExpandedKey.value = [];[m
[32m+[m[32m  clearSelected()[m
[32m+[m[32m}[m
[32m+[m[32mfunction clearSelected() {[m
[32m+[m[32m  const allNode = document.querySelectorAll('#tree-option .el-tree-node')[m
[32m+[m[32m  allNode.forEach((element) => element.classList.remove('is-current'))[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32monMounted(() => {[m
[32m+[m[32m  initHandle()[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32mwatch(valueId, () => {[m
[32m+[m[32m  initHandle();[m
[32m+[m[32m})[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang='scss' scoped>[m
[32m+[m[32m@import "@/assets/styles/variables.module.scss";[m
[32m+[m[32m.el-scrollbar .el-scrollbar__view .el-select-dropdown__item {[m
[32m+[m[32m  padding: 0;[m
[32m+[m[32m  background-color: #fff;[m
[32m+[m[32m  height: auto;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.el-select-dropdown__item.selected {[m
[32m+[m[32m  font-weight: normal;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mul li .el-tree .el-tree-node__content {[m
[32m+[m[32m  height: auto;[m
[32m+[m[32m  padding: 0 20px;[m
[32m+[m[32m  box-sizing: border-box;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m:deep(.el-tree-node__content:hover),[m
[32m+[m[32m:deep(.el-tree-node__content:active),[m
[32m+[m[32m:deep(.is-current > div:first-child),[m
[32m+[m[32m:deep(.el-tree-node__content:focus) {[m
[32m+[m[32m  background-color: mix(#fff, $--color-primary, 90%);[m
[32m+[m[32m  color: $--color-primary;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/components/iFrame/index.vue b/src/components/iFrame/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..091b1a24[m
[1m--- /dev/null[m
[1m+++ b/src/components/iFrame/index.vue[m
[36m@@ -0,0 +1,31 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div v-loading="loading" :style="'height:' + height">[m
[32m+[m[32m    <iframe[m[41m [m
[32m+[m[32m      :src="url"[m[41m [m
[32m+[m[32m      frameborder="no"[m[41m [m
[32m+[m[32m      style="width: 100%; height: 100%"[m[41m [m
[32m+[m[32m      scrolling="auto" />[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m  src: {[m
[32m+[m[32m    type: String,[m
[32m+[m[32m    required: true[m
[32m+[m[32m  }[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32mconst height = ref(document.documentElement.clientHeight - 94.5 + "px;")[m
[32m+[m[32mconst loading = ref(true)[m
[32m+[m[32mconst url = computed(() => props.src)[m
[32m+[m
[32m+[m[32monMounted(() => {[m
[32m+[m[32m  setTimeout(() => {[m
[32m+[m[32m    loading.value = false;[m
[32m+[m[32m  }, 300);[m
[32m+[m[32m  window.onresize = function temp() {[m
[32m+[m[32m    height.value = document.documentElement.clientHeight - 94.5 + "px;";[m
[32m+[m[32m  };[m
[32m+[m[32m})[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/directive/common/copyText.js b/src/directive/common/copyText.js[m
[1mnew file mode 100644[m
[1mindex 00000000..7063df8e[m
[1m--- /dev/null[m
[1m+++ b/src/directive/common/copyText.js[m
[36m@@ -0,0 +1,66 @@[m
[32m+[m[32m/**[m
[32m+[m[32m* v-copyText å¤åˆ¶æ–‡æœ¬å†…å®¹[m
[32m+[m[32m* Copyright (c) 2022 ruoyi[m
[32m+[m[32m*/[m
[32m+[m
[32m+[m[32mexport default {[m
[32m+[m[32m  beforeMount(el, { value, arg }) {[m
[32m+[m[32m    if (arg === "callback") {[m
[32m+[m[32m      el.$copyCallback = value;[m
[32m+[m[32m    } else {[m
[32m+[m[32m      el.$copyValue = value;[m
[32m+[m[32m      const handler = () => {[m
[32m+[m[32m        copyTextToClipboard(el.$copyValue);[m
[32m+[m[32m        if (el.$copyCallback) {[m
[32m+[m[32m          el.$copyCallback(el.$copyValue);[m
[32m+[m[32m        }[m
[32m+[m[32m      };[m
[32m+[m[32m      el.addEventListener("click", handler);[m
[32m+[m[32m      el.$destroyCopy = () => el.removeEventListener("click", handler);[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction copyTextToClipboard(input, { target = document.body } = {}) {[m
[32m+[m[32m  const element = document.createElement('textarea');[m
[32m+[m[32m  const previouslyFocusedElement = document.activeElement;[m
[32m+[m
[32m+[m[32m  element.value = input;[m
[32m+[m
[32m+[m[32m  // Prevent keyboard from showing on mobile[m
[32m+[m[32m  element.setAttribute('readonly', '');[m
[32m+[m
[32m+[m[32m  element.style.contain = 'strict';[m
[32m+[m[32m  element.style.position = 'absolute';[m
[32m+[m[32m  element.style.left = '-9999px';[m
[32m+[m[32m  element.style.fontSize = '12pt'; // Prevent zooming on iOS[m
[32m+[m
[32m+[m[32m  const selection = document.getSelection();[m
[32m+[m[32m  const originalRange = selection.rangeCount > 0 && selection.getRangeAt(0);[m
[32m+[m
[32m+[m[32m  target.append(element);[m
[32m+[m[32m  element.select();[m
[32m+[m
[32m+[m[32m  // Explicit selection workaround for iOS[m
[32m+[m[32m  element.selectionStart = 0;[m
[32m+[m[32m  element.selectionEnd = input.length;[m
[32m+[m
[32m+[m[32m  let isSuccess = false;[m
[32m+[m[32m  try {[m
[32m+[m[32m    isSuccess = document.execCommand('copy');[m
[32m+[m[32m  } catch { }[m
[32m+[m
[32m+[m[32m  element.remove();[m
[32m+[m
[32m+[m[32m  if (originalRange) {[m
[32m+[m[32m    selection.removeAllRanges();[m
[32m+[m[32m    selection.addRange(originalRange);[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // Get the focus back on the previously focused element, if any[m
[32m+[m[32m  if (previouslyFocusedElement) {[m
[32m+[m[32m    previouslyFocusedElement.focus();[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  return isSuccess;[m
[32m+[m[32m}[m
[1mdiff --git a/src/directive/index.js b/src/directive/index.js[m
[1mnew file mode 100644[m
[1mindex 00000000..86b8f88a[m
[1m--- /dev/null[m
[1m+++ b/src/directive/index.js[m
[36m@@ -0,0 +1,9 @@[m
[32m+[m[32mimport hasRole from './permission/hasRole'[m
[32m+[m[32mimport hasPermi from './permission/hasPermi'[m
[32m+[m[32mimport copyText from './common/copyText'[m
[32m+[m
[32m+[m[32mexport default function directive(app){[m
[32m+[m[32m  app.directive('hasRole', hasRole)[m
[32m+[m[32m  app.directive('hasPermi', hasPermi)[m
[32m+[m[32m  app.directive('copyText', copyText)[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/src/directive/permission/hasPermi.js b/src/directive/permission/hasPermi.js[m
[1mnew file mode 100644[m
[1mindex 00000000..44ef3f82[m
[1m--- /dev/null[m
[1m+++ b/src/directive/permission/hasPermi.js[m
[36m@@ -0,0 +1,28 @@[m
[32m+[m[32m /**[m
[32m+[m[32m * v-hasPermi æ“ä½œæƒé™å¤„ç†[m
[32m+[m[32m * Copyright (c) 2019 ruoyi[m
[32m+[m[32m */[m
[32m+[m[41m [m
[32m+[m[32mimport useUserStore from '@/store/modules/user'[m
[32m+[m
[32m+[m[32mexport default {[m
[32m+[m[32m  mounted(el, binding, vnode) {[m
[32m+[m[32m    const { value } = binding[m
[32m+[m[32m    const all_permission = "*:*:*";[m
[32m+[m[32m    const permissions = useUserStore().permissions[m
[32m+[m
[32m+[m[32m    if (value && value instanceof Array && value.length > 0) {[m
[32m+[m[32m      const permissionFlag = value[m
[32m+[m
[32m+[m[32m      const hasPermissions = permissions.some(permission => {[m
[32m+[m[32m        return all_permission === permission || permissionFlag.includes(permission)[m
[32m+[m[32m      })[m
[32m+[m
[32m+[m[32m      if (!hasPermissions) {[m
[32m+[m[32m        el.parentNode && el.parentNode.removeChild(el)[m
[32m+[m[32m      }[m
[32m+[m[32m    } else {[m
[32m+[m[32m      throw new Error(`è¯·è®¾ç½®æ“ä½œæƒé™æ ‡ç­¾å€¼`)[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[1mdiff --git a/src/directive/permission/hasRole.js b/src/directive/permission/hasRole.js[m
[1mnew file mode 100644[m
[1mindex 00000000..8774bddd[m
[1m--- /dev/null[m
[1m+++ b/src/directive/permission/hasRole.js[m
[36m@@ -0,0 +1,28 @@[m
[32m+[m[32m /**[m
[32m+[m[32m * v-hasRole è§’è‰²æƒé™å¤„ç†[m
[32m+[m[32m * Copyright (c) 2019 ruoyi[m
[32m+[m[32m */[m
[32m+[m[41m [m
[32m+[m[32mimport useUserStore from '@/store/modules/user'[m
[32m+[m
[32m+[m[32mexport default {[m
[32m+[m[32m  mounted(el, binding, vnode) {[m
[32m+[m[32m    const { value } = binding[m
[32m+[m[32m    const super_admin = "admin";[m
[32m+[m[32m    const roles = useUserStore().roles[m
[32m+[m
[32m+[m[32m    if (value && value instanceof Array && value.length > 0) {[m
[32m+[m[32m      const roleFlag = value[m
[32m+[m
[32m+[m[32m      const hasRole = roles.some(role => {[m
[32m+[m[32m        return super_admin === role || roleFlag.includes(role)[m
[32m+[m[32m      })[m
[32m+[m
[32m+[m[32m      if (!hasRole) {[m
[32m+[m[32m        el.parentNode && el.parentNode.removeChild(el)[m
[32m+[m[32m      }[m
[32m+[m[32m    } else {[m
[32m+[m[32m      throw new Error(`è¯·è®¾ç½®è§’è‰²æƒé™æ ‡ç­¾å€¼`)[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[1mdiff --git a/src/layout/FrontLayout.vue b/src/layout/FrontLayout.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..3e40319f[m
[1m--- /dev/null[m
[1m+++ b/src/layout/FrontLayout.vue[m
[36m@@ -0,0 +1,215 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="front-layout">[m
[32m+[m[32m    <!-- å…¨å±€å¯¼èˆªæ  -->[m
[32m+[m[32m    <header class="navbar">[m
[32m+[m[32m      <div class="navbar-container">[m
[32m+[m[32m        <!-- Logo -->[m
[32m+[m[32m        <div class="navbar-logo" @click="goToHome">[m
[32m+[m[32m          <h1 class="logo-text">ç”µè„‘ç§Ÿå”®å¹³å°</h1>[m
[32m+[m[32m        </div>[m
[32m+[m[41m        [m
[32m+[m[32m        <!-- å¯¼èˆªèœå• -->[m
[32m+[m[32m        <nav class="navbar-menu">[m
[32m+[m[32m          <router-link to="/computer-market" class="menu-item">é¦–é¡µ</router-link>[m
[32m+[m[32m          <router-link to="/computer-market/rental" class="menu-item">ç§Ÿèµ</router-link>[m
[32m+[m[32m          <router-link to="/computer-market/sale" class="menu-item">å‡ºå”®</router-link>[m
[32m+[m[32m          <router-link to="/computer-market/Build" class="menu-item">è£…æœº</router-link>[m
[32m+[m[32m        </nav>[m
[32m+[m[41m        [m
[32m+[m[32m        <!-- ç™»å½•çŠ¶æ€ -->[m
[32m+[m[32m        <div class="navbar-login">[m
[32m+[m[32m          <LoginStatus />[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </div>[m
[32m+[m[32m    </header>[m
[32m+[m[41m    [m
[32m+[m[32m    <!-- é¡µé¢å†…å®¹ -->[m
[32m+[m[32m    <main class="main-content">[m
[32m+[m[32m      <router-view />[m
[32m+[m[32m    </main>[m
[32m+[m[41m    [m
[32m+[m[32m    <!-- è·¯ç”±åŠ è½½çŠ¶æ€ -->[m
[32m+[m[32m    <transition name="fade">[m
[32m+[m[32m      <div v-if="isLoading" class="loading-overlay">[m
[32m+[m[32m        <el-spinner type="dots" size="60px" />[m
[32m+[m[32m        <p class="loading-text">åŠ è½½ä¸­...</p>[m
[32m+[m[32m      </div>[m
[32m+[m[32m    </transition>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { ref, onMounted, watch } from 'vue'[m
[32m+[m[32mimport { useRouter, useRoute } from 'vue-router'[m
[32m+[m[32mimport LoginStatus from '@/components/LoginStatus.vue'[m
[32m+[m
[32m+[m[32mconst router = useRouter()[m
[32m+[m[32mconst route = useRoute()[m
[32m+[m
[32m+[m[32m// è·¯ç”±åŠ è½½çŠ¶æ€[m
[32m+[m[32mconst isLoading = ref(false)[m
[32m+[m
[32m+[m[32m// è·³è½¬åˆ°é¦–é¡µ[m
[32m+[m[32mconst goToHome = () => {[m
[32m+[m[32m  router.push('/computer-market')[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ç›‘å¬è·¯ç”±å˜åŒ–ï¼Œæ˜¾ç¤ºåŠ è½½çŠ¶æ€[m
[32m+[m[32mwatch([m
[32m+[m[32m  () => route.path,[m
[32m+[m[32m  (newPath, oldPath) => {[m
[32m+[m[32m    if (newPath !== oldPath) {[m
[32m+[m[32m      isLoading.value = true[m
[32m+[m[32m      // æ¨¡æ‹ŸåŠ è½½å»¶è¿Ÿï¼Œå®é™…é¡¹ç›®ä¸­å¯ä»¥æ ¹æ®è·¯ç”±ç»„ä»¶çš„åŠ è½½çŠ¶æ€æ¥æ§åˆ¶[m
[32m+[m[32m      const timer = setTimeout(() => {[m
[32m+[m[32m        isLoading.value = false[m
[32m+[m[32m        clearTimeout(timer)[m
[32m+[m[32m      }, 300)[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m)[m
[32m+[m
[32m+[m[32m// ç»„ä»¶æŒ‚è½½æ—¶[m
[32m+[m[32monMounted(() => {[m
[32m+[m[32m  // åˆå§‹åŠ è½½æ—¶ä¸æ˜¾ç¤ºåŠ è½½çŠ¶æ€[m
[32m+[m[32m  isLoading.value = false[m
[32m+[m[32m})[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style scoped>[m
[32m+[m[32m.front-layout {[m
[32m+[m[32m  min-height: 100vh;[m
[32m+[m[32m  background-color: #f5f5f5;[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  flex-direction: column;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* å¯¼èˆªæ æ ·å¼ */[m
[32m+[m[32m.navbar {[m
[32m+[m[32m  background-color: #fff;[m
[32m+[m[32m  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);[m
[32m+[m[32m  position: sticky;[m
[32m+[m[32m  top: 0;[m
[32m+[m[32m  z-index: 1000;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.navbar-container {[m
[32m+[m[32m  max-width: 1200px;[m
[32m+[m[32m  margin: 0 auto;[m
[32m+[m[32m  padding: 0 20px;[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  justify-content: space-between;[m
[32m+[m[32m  height: 60px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* Logoæ ·å¼ */[m
[32m+[m[32m.navbar-logo {[m
[32m+[m[32m  cursor: pointer;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.logo-text {[m
[32m+[m[32m  margin: 0;[m
[32m+[m[32m  font-size: 20px;[m
[32m+[m[32m  font-weight: 600;[m
[32m+[m[32m  color: #409eff;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* å¯¼èˆªèœå•æ ·å¼ */[m
[32m+[m[32m.navbar-menu {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  gap: 30px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.menu-item {[m
[32m+[m[32m  text-decoration: none;[m
[32m+[m[32m  color: #303133;[m
[32m+[m[32m  font-size: 16px;[m
[32m+[m[32m  font-weight: 500;[m
[32m+[m[32m  padding: 8px 0;[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m  transition: color 0.3s ease;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.menu-item:hover {[m
[32m+[m[32m  color: #409eff;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.menu-item::after {[m
[32m+[m[32m  content: '';[m
[32m+[m[32m  position: absolute;[m
[32m+[m[32m  bottom: 0;[m
[32m+[m[32m  left: 0;[m
[32m+[m[32m  width: 0;[m
[32m+[m[32m  height: 2px;[m
[32m+[m[32m  background-color: #409eff;[m
[32m+[m[32m  transition: width 0.3s ease;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.menu-item:hover::after {[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* ç™»å½•çŠ¶æ€å®¹å™¨ */[m
[32m+[m[32m.navbar-login {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* ä¸»å†…å®¹åŒºåŸŸ */[m
[32m+[m[32m.main-content {[m
[32m+[m[32m  flex: 1;[m
[32m+[m[32m  padding: 20px 0;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* åŠ è½½çŠ¶æ€æ ·å¼ */[m
[32m+[m[32m.loading-overlay {[m
[32m+[m[32m  position: fixed;[m
[32m+[m[32m  top: 0;[m
[32m+[m[32m  left: 0;[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m  height: 100%;[m
[32m+[m[32m  background-color: rgba(255, 255, 255, 0.8);[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  flex-direction: column;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  justify-content: center;[m
[32m+[m[32m  z-index: 9999;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.loading-text {[m
[32m+[m[32m  margin-top: 20px;[m
[32m+[m[32m  font-size: 16px;[m
[32m+[m[32m  color: #606266;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* è¿‡æ¸¡åŠ¨ç”» */[m
[32m+[m[32m.fade-enter-active,[m
[32m+[m[32m.fade-leave-active {[m
[32m+[m[32m  transition: opacity 0.3s ease;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.fade-enter-from,[m
[32m+[m[32m.fade-leave-to {[m
[32m+[m[32m  opacity: 0;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* å“åº”å¼è®¾è®¡ */[m
[32m+[m[32m@media (max-width: 768px) {[m
[32m+[m[32m  .navbar-container {[m
[32m+[m[32m    padding: 0 10px;[m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  .navbar-menu {[m
[32m+[m[32m    gap: 15px;[m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  .menu-item {[m
[32m+[m[32m    font-size: 14px;[m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  .logo-text {[m
[32m+[m[32m    font-size: 18px;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/layout/components/AppMain.vue b/src/layout/components/AppMain.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..42fffdf7[m
[1m--- /dev/null[m
[1m+++ b/src/layout/components/AppMain.vue[m
[36m@@ -0,0 +1,68 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <section class="app-main">[m
[32m+[m[32m    <router-view v-slot="{ Component, route }">[m
[32m+[m[32m      <transition name="fade-transform" mode="out-in">[m
[32m+[m[32m        <keep-alive :include="tagsViewStore.cachedViews">[m
[32m+[m[32m          <component v-if="!route.meta.link" :is="Component" :key="route.path"/>[m
[32m+[m[32m        </keep-alive>[m
[32m+[m[32m      </transition>[m
[32m+[m[32m    </router-view>[m
[32m+[m[32m    <iframe-toggle />[m
[32m+[m[32m  </section>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport iframeToggle from "./IframeToggle/index"[m
[32m+[m[32mimport useTagsViewStore from '@/store/modules/tagsView'[m
[32m+[m
[32m+[m[32mconst tagsViewStore = useTagsViewStore()[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang="scss" scoped>[m
[32m+[m[32m.app-main {[m
[32m+[m[32m  /* 50= navbar  50  */[m
[32m+[m[32m  min-height: calc(100vh - 50px);[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m  overflow: hidden;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.fixed-header + .app-main {[m
[32m+[m[32m  padding-top: 50px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.hasTagsView {[m
[32m+[m[32m  .app-main {[m
[32m+[m[32m    /* 84 = navbar + tags-view = 50 + 34 */[m
[32m+[m[32m    min-height: calc(100vh - 84px);[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  .fixed-header + .app-main {[m
[32m+[m[32m    padding-top: 84px;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
[32m+[m
[32m+[m[32m<style lang="scss">[m
[32m+[m[32m// fix css style bug in open el-dialog[m
[32m+[m[32m.el-popup-parent--hidden {[m
[32m+[m[32m  .fixed-header {[m
[32m+[m[32m    padding-right: 6px;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m::-webkit-scrollbar {[m
[32m+[m[32m  width: 6px;[m
[32m+[m[32m  height: 6px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m::-webkit-scrollbar-track {[m
[32m+[m[32m  background-color: #f1f1f1;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m::-webkit-scrollbar-thumb {[m
[32m+[m[32m  background-color: #c0c0c0;[m
[32m+[m[32m  border-radius: 3px;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
[32m+[m
[1mdiff --git a/src/layout/components/IframeToggle/index.vue b/src/layout/components/IframeToggle/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..a407b74b[m
[1m--- /dev/null[m
[1m+++ b/src/layout/components/IframeToggle/index.vue[m
[36m@@ -0,0 +1,25 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <inner-link[m
[32m+[m[32m    v-for="(item, index) in tagsViewStore.iframeViews"[m
[32m+[m[32m    :key="item.path"[m
[32m+[m[32m    :iframeId="'iframe' + index"[m
[32m+[m[32m    v-show="route.path === item.path"[m
[32m+[m[32m    :src="iframeUrl(item.meta.link, item.query)"[m
[32m+[m[32m  ></inner-link>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport InnerLink from "../InnerLink/index";[m
[32m+[m[32mimport useTagsViewStore from "@/store/modules/tagsView";[m
[32m+[m
[32m+[m[32mconst route = useRoute();[m
[32m+[m[32mconst tagsViewStore = useTagsViewStore();[m
[32m+[m
[32m+[m[32mfunction iframeUrl(url, query) {[m
[32m+[m[32m  if (Object.keys(query).length > 0) {[m
[32m+[m[32m    let params = Object.keys(query).map((key) => key + "=" + query[key]).join("&");[m
[32m+[m[32m    return url + "?" + params;[m
[32m+[m[32m  }[m
[32m+[m[32m  return url;[m
[32m+[m[32m}[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/layout/components/InnerLink/index.vue b/src/layout/components/InnerLink/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..53a903c2[m
[1m--- /dev/null[m
[1m+++ b/src/layout/components/InnerLink/index.vue[m
[36m@@ -0,0 +1,24 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div :style="'height:' + height">[m
[32m+[m[32m    <iframe[m
[32m+[m[32m      :id="iframeId"[m
[32m+[m[32m      style="width: 100%; height: 100%"[m
[32m+[m[32m      :src="src"[m
[32m+[m[32m      frameborder="no"[m
[32m+[m[32m    ></iframe>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m  src: {[m
[32m+[m[32m    type: String,[m
[32m+[m[32m    default: "/"[m
[32m+[m[32m  },[m
[32m+[m[32m  iframeId: {[m
[32m+[m[32m    type: String[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst height = ref(document.documentElement.clientHeight - 94.5 + "px");[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/layout/components/Navbar.vue b/src/layout/components/Navbar.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..086cdba4[m
[1m--- /dev/null[m
[1m+++ b/src/layout/components/Navbar.vue[m
[36m@@ -0,0 +1,185 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="navbar">[m
[32m+[m[32m    <hamburger id="hamburger-container" :is-active="appStore.sidebar.opened" class="hamburger-container" @toggleClick="toggleSideBar" />[m
[32m+[m[32m    <breadcrumb id="breadcrumb-container" class="breadcrumb-container" v-if="!settingsStore.topNav" />[m
[32m+[m[32m    <top-nav id="topmenu-container" class="topmenu-container" v-if="settingsStore.topNav" />[m
[32m+[m
[32m+[m[32m    <div class="right-menu">[m
[32m+[m[32m      <template v-if="appStore.device !== 'mobile'">[m
[32m+[m[32m        <header-search id="header-search" class="right-menu-item" />[m
[32m+[m
[32m+[m[41m        [m
[32m+[m
[32m+[m[32m        <screenfull id="screenfull" class="right-menu-item hover-effect" />[m
[32m+[m
[32m+[m[32m        <el-tooltip content="å¸ƒå±€å¤§å°" effect="dark" placement="bottom">[m
[32m+[m[32m          <size-select id="size-select" class="right-menu-item hover-effect" />[m
[32m+[m[32m        </el-tooltip>[m
[32m+[m[32m      </template>[m
[32m+[m[32m      <div class="avatar-container">[m
[32m+[m[32m        <el-dropdown @command="handleCommand" class="right-menu-item hover-effect" trigger="click">[m
[32m+[m[32m          <div class="avatar-wrapper">[m
[32m+[m[32m            <img :src="userStore.avatar" class="user-avatar" />[m
[32m+[m[32m            <el-icon><caret-bottom /></el-icon>[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <template #dropdown>[m
[32m+[m[32m            <el-dropdown-menu>[m
[32m+[m[32m              <router-link to="/user/profile">[m
[32m+[m[32m                <el-dropdown-item>ä¸ªäººä¸­å¿ƒ</el-dropdown-item>[m
[32m+[m[32m              </router-link>[m
[32m+[m[32m              <el-dropdown-item command="setLayout" v-if="settingsStore.showSettings">[m
[32m+[m[32m                <span>å¸ƒå±€è®¾ç½®</span>[m
[32m+[m[32m              </el-dropdown-item>[m
[32m+[m[32m              <el-dropdown-item divided command="logout">[m
[32m+[m[32m                <span>é€€å‡ºç™»å½•</span>[m
[32m+[m[32m              </el-dropdown-item>[m
[32m+[m[32m            </el-dropdown-menu>[m
[32m+[m[32m          </template>[m
[32m+[m[32m        </el-dropdown>[m
[32m+[m[32m      </div>[m
[32m+[m[32m    </div>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { ElMessageBox } from 'element-plus'[m
[32m+[m[32mimport Breadcrumb from '@/components/Breadcrumb'[m
[32m+[m[32mimport TopNav from '@/components/TopNav'[m
[32m+[m[32mimport Hamburger from '@/components/Hamburger'[m
[32m+[m[32mimport Screenfull from '@/components/Screenfull'[m
[32m+[m[32mimport SizeSelect from '@/components/SizeSelect'[m
[32m+[m[32mimport HeaderSearch from '@/components/HeaderSearch'[m
[32m+[m[32mimport RuoYiGit from '@/components/RuoYi/Git'[m
[32m+[m[32mimport RuoYiDoc from '@/components/RuoYi/Doc'[m
[32m+[m[32mimport useAppStore from '@/store/modules/app'[m
[32m+[m[32mimport useUserStore from '@/store/modules/user'[m
[32m+[m[32mimport useSettingsStore from '@/store/modules/settings'[m
[32m+[m
[32m+[m[32mconst appStore = useAppStore()[m
[32m+[m[32mconst userStore = useUserStore()[m
[32m+[m[32mconst settingsStore = useSettingsStore()[m
[32m+[m
[32m+[m[32mfunction toggleSideBar() {[m
[32m+[m[32m  appStore.toggleSideBar()[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction handleCommand(command) {[m
[32m+[m[32m  switch (command) {[m
[32m+[m[32m    case "setLayout":[m
[32m+[m[32m      setLayout();[m
[32m+[m[32m      break;[m
[32m+[m[32m    case "logout":[m
[32m+[m[32m      logout();[m
[32m+[m[32m      break;[m
[32m+[m[32m    default:[m
[32m+[m[32m      break;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction logout() {[m
[32m+[m[32m  ElMessageBox.confirm('ç¡®å®šæ³¨é”€å¹¶é€€å‡ºç³»ç»Ÿå—ï¼Ÿ', 'æç¤º', {[m
[32m+[m[32m    confirmButtonText: 'ç¡®å®š',[m
[32m+[m[32m    cancelButtonText: 'å–æ¶ˆ',[m
[32m+[m[32m    type: 'warning'[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    userStore.logOut().then(() => {[m
[32m+[m[32m      location.href = '/index';[m
[32m+[m[32m    })[m
[32m+[m[32m  }).catch(() => { });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mconst emits = defineEmits(['setLayout'])[m
[32m+[m[32mfunction setLayout() {[m
[32m+[m[32m  emits('setLayout');[m
[32m+[m[32m}[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang='scss' scoped>[m
[32m+[m[32m.navbar {[m
[32m+[m[32m  height: 50px;[m
[32m+[m[32m  overflow: hidden;[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m  background: #fff;[m
[32m+[m[32m  box-shadow: 0 1px 4px rgba(0, 21, 41, 0.08);[m
[32m+[m
[32m+[m[32m  .hamburger-container {[m
[32m+[m[32m    line-height: 46px;[m
[32m+[m[32m    height: 100%;[m
[32m+[m[32m    float: left;[m
[32m+[m[32m    cursor: pointer;[m
[32m+[m[32m    transition: background 0.3s;[m
[32m+[m[32m    -webkit-tap-highlight-color: transparent;[m
[32m+[m
[32m+[m[32m    &:hover {[m
[32m+[m[32m      background: rgba(0, 0, 0, 0.025);[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  .breadcrumb-container {[m
[32m+[m[32m    float: left;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  .topmenu-container {[m
[32m+[m[32m    position: absolute;[m
[32m+[m[32m    left: 50px;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  .errLog-container {[m
[32m+[m[32m    display: inline-block;[m
[32m+[m[32m    vertical-align: top;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  .right-menu {[m
[32m+[m[32m    float: right;[m
[32m+[m[32m    height: 100%;[m
[32m+[m[32m    line-height: 50px;[m
[32m+[m[32m    display: flex;[m
[32m+[m
[32m+[m[32m    &:focus {[m
[32m+[m[32m      outline: none;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    .right-menu-item {[m
[32m+[m[32m      display: inline-block;[m
[32m+[m[32m      padding: 0 8px;[m
[32m+[m[32m      height: 100%;[m
[32m+[m[32m      font-size: 18px;[m
[32m+[m[32m      color: #5a5e66;[m
[32m+[m[32m      vertical-align: text-bottom;[m
[32m+[m
[32m+[m[32m      &.hover-effect {[m
[32m+[m[32m        cursor: pointer;[m
[32m+[m[32m        transition: background 0.3s;[m
[32m+[m
[32m+[m[32m        &:hover {[m
[32m+[m[32m          background: rgba(0, 0, 0, 0.025);[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    .avatar-container {[m
[32m+[m[32m      margin-right: 40px;[m
[32m+[m
[32m+[m[32m      .avatar-wrapper {[m
[32m+[m[32m        margin-top: 5px;[m
[32m+[m[32m        position: relative;[m
[32m+[m
[32m+[m[32m        .user-avatar {[m
[32m+[m[32m          cursor: pointer;[m
[32m+[m[32m          width: 40px;[m
[32m+[m[32m          height: 40px;[m
[32m+[m[32m          border-radius: 10px;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        i {[m
[32m+[m[32m          cursor: pointer;[m
[32m+[m[32m          position: absolute;[m
[32m+[m[32m          right: -20px;[m
[32m+[m[32m          top: 25px;[m
[32m+[m[32m          font-size: 12px;[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
[1mdiff --git a/src/layout/components/Settings/index.vue b/src/layout/components/Settings/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..d0a0e886[m
[1m--- /dev/null[m
[1m+++ b/src/layout/components/Settings/index.vue[m
[36m@@ -0,0 +1,205 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <el-drawer v-model="showSettings" :withHeader="false" direction="rtl" size="300px">[m
[32m+[m[32m    <div class="setting-drawer-title">[m
[32m+[m[32m      <h3 class="drawer-title">ä¸»é¢˜é£æ ¼è®¾ç½®</h3>[m
[32m+[m[32m    </div>[m
[32m+[m[32m    <div class="setting-drawer-block-checbox">[m
[32m+[m[32m      <div class="setting-drawer-block-checbox-item" @click="handleTheme('theme-dark')">[m
[32m+[m[32m        <img src="@/assets/images/dark.svg" alt="dark" />[m
[32m+[m[32m        <div v-if="sideTheme === 'theme-dark'" class="setting-drawer-block-checbox-selectIcon" style="display: block;">[m
[32m+[m[32m          <i aria-label="å›¾æ ‡: check" class="anticon anticon-check">[m
[32m+[m[32m            <svg viewBox="64 64 896 896" data-icon="check" width="1em" height="1em" :fill="theme" aria-hidden="true" focusable="false" class>[m
[32m+[m[32m              <path d="M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 0 0-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z" />[m
[32m+[m[32m            </svg>[m
[32m+[m[32m          </i>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </div>[m
[32m+[m[32m      <div class="setting-drawer-block-checbox-item" @click="handleTheme('theme-light')">[m
[32m+[m[32m        <img src="@/assets/images/light.svg" alt="light" />[m
[32m+[m[32m        <div v-if="sideTheme === 'theme-light'" class="setting-drawer-block-checbox-selectIcon" style="display: block;">[m
[32m+[m[32m          <i aria-label="å›¾æ ‡: check" class="anticon anticon-check">[m
[32m+[m[32m            <svg viewBox="64 64 896 896" data-icon="check" width="1em" height="1em" :fill="theme" aria-hidden="true" focusable="false" class>[m
[32m+[m[32m              <path d="M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 0 0-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z" />[m
[32m+[m[32m            </svg>[m
[32m+[m[32m          </i>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </div>[m
[32m+[m[32m    </div>[m
[32m+[m[32m    <div class="drawer-item">[m
[32m+[m[32m      <span>ä¸»é¢˜é¢œè‰²</span>[m
[32m+[m[32m      <span class="comp-style">[m
[32m+[m[32m        <el-color-picker v-model="theme" :predefine="predefineColors" @change="themeChange"/>[m
[32m+[m[32m      </span>[m
[32m+[m[32m    </div>[m
[32m+[m[32m    <el-divider />[m
[32m+[m
[32m+[m[32m    <h3 class="drawer-title">ç³»ç»Ÿå¸ƒå±€é…ç½®</h3>[m
[32m+[m
[32m+[m[32m    <div class="drawer-item">[m
[32m+[m[32m      <span>å¼€å¯ TopNav</span>[m
[32m+[m[32m      <span class="comp-style">[m
[32m+[m[32m        <el-switch v-model="settingsStore.topNav" @change="topNavChange" class="drawer-switch" />[m
[32m+[m[32m      </span>[m
[32m+[m[32m    </div>[m
[32m+[m
[32m+[m[32m    <div class="drawer-item">[m
[32m+[m[32m      <span>å¼€å¯ Tags-Views</span>[m
[32m+[m[32m      <span class="comp-style">[m
[32m+[m[32m        <el-switch v-model="settingsStore.tagsView" class="drawer-switch" />[m
[32m+[m[32m      </span>[m
[32m+[m[32m    </div>[m
[32m+[m
[32m+[m[32m    <div class="drawer-item">[m
[32m+[m[32m      <span>å›ºå®š Header</span>[m
[32m+[m[32m      <span class="comp-style">[m
[32m+[m[32m        <el-switch v-model="settingsStore.fixedHeader" class="drawer-switch" />[m
[32m+[m[32m      </span>[m
[32m+[m[32m    </div>[m
[32m+[m
[32m+[m[32m    <div class="drawer-item">[m
[32m+[m[32m      <span>æ˜¾ç¤º Logo</span>[m
[32m+[m[32m      <span class="comp-style">[m
[32m+[m[32m        <el-switch v-model="settingsStore.sidebarLogo" class="drawer-switch" />[m
[32m+[m[32m      </span>[m
[32m+[m[32m    </div>[m
[32m+[m
[32m+[m[32m    <div class="drawer-item">[m
[32m+[m[32m      <span>åŠ¨æ€æ ‡é¢˜</span>[m
[32m+[m[32m      <span class="comp-style">[m
[32m+[m[32m        <el-switch v-model="settingsStore.dynamicTitle" class="drawer-switch" />[m
[32m+[m[32m      </span>[m
[32m+[m[32m    </div>[m
[32m+[m
[32m+[m[32m    <el-divider />[m
[32m+[m
[32m+[m[32m    <el-button type="primary" plain icon="DocumentAdd" @click="saveSetting">ä¿å­˜é…ç½®</el-button>[m
[32m+[m[32m    <el-button plain icon="Refresh" @click="resetSetting">é‡ç½®é…ç½®</el-button>[m
[32m+[m[32m  </el-drawer>[m
[32m+[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport variables from '@/assets/styles/variables.module.scss'[m
[32m+[m[32mimport axios from 'axios'[m
[32m+[m[32mimport { ElLoading, ElMessage } from 'element-plus'[m
[32m+[m[32mimport { useDynamicTitle } from '@/utils/dynamicTitle'[m
[32m+[m[32mimport useAppStore from '@/store/modules/app'[m
[32m+[m[32mimport useSettingsStore from '@/store/modules/settings'[m
[32m+[m[32mimport usePermissionStore from '@/store/modules/permission'[m
[32m+[m[32mimport { handleThemeStyle } from '@/utils/theme'[m
[32m+[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m[32mconst appStore = useAppStore()[m
[32m+[m[32mconst settingsStore = useSettingsStore()[m
[32m+[m[32mconst permissionStore = usePermissionStore()[m
[32m+[m[32mconst showSettings = ref(false);[m
[32m+[m[32mconst theme = ref(settingsStore.theme);[m
[32m+[m[32mconst sideTheme = ref(settingsStore.sideTheme);[m
[32m+[m[32mconst storeSettings = computed(() => settingsStore);[m
[32m+[m[32mconst predefineColors = ref(["#409EFF", "#ff4500", "#ff8c00", "#ffd700", "#90ee90", "#00ced1", "#1e90ff", "#c71585"]);[m
[32m+[m
[32m+[m[32m/** æ˜¯å¦éœ€è¦topnav */[m
[32m+[m[32mfunction topNavChange(val) {[m
[32m+[m[32m  if (!val) {[m
[32m+[m[32m    appStore.toggleSideBarHide(false);[m
[32m+[m[32m    permissionStore.setSidebarRouters(permissionStore.defaultRoutes);[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction themeChange(val) {[m
[32m+[m[32m  settingsStore.theme = val;[m
[32m+[m[32m  handleThemeStyle(val);[m
[32m+[m[32m}[m
[32m+[m[32mfunction handleTheme(val) {[m
[32m+[m[32m  settingsStore.sideTheme = val;[m
[32m+[m[32m  sideTheme.value = val;[m
[32m+[m[32m}[m
[32m+[m[32mfunction saveSetting() {[m
[32m+[m[32m  proxy.$modal.loading("æ­£åœ¨ä¿å­˜åˆ°æœ¬åœ°ï¼Œè¯·ç¨å€™...");[m
[32m+[m[32m  let layoutSetting = {[m
[32m+[m[32m    "topNav": storeSettings.value.topNav,[m
[32m+[m[32m    "tagsView": storeSettings.value.tagsView,[m
[32m+[m[32m    "fixedHeader": storeSettings.value.fixedHeader,[m
[32m+[m[32m    "sidebarLogo": storeSettings.value.sidebarLogo,[m
[32m+[m[32m    "dynamicTitle": storeSettings.value.dynamicTitle,[m
[32m+[m[32m    "sideTheme": storeSettings.value.sideTheme,[m
[32m+[m[32m    "theme": storeSettings.value.theme[m
[32m+[m[32m  };[m
[32m+[m[32m  localStorage.setItem("layout-setting", JSON.stringify(layoutSetting));[m
[32m+[m[32m  setTimeout(proxy.$modal.closeLoading(), 1000)[m
[32m+[m[32m}[m
[32m+[m[32mfunction resetSetting() {[m
[32m+[m[32m  proxy.$modal.loading("æ­£åœ¨æ¸…é™¤è®¾ç½®ç¼“å­˜å¹¶åˆ·æ–°ï¼Œè¯·ç¨å€™...");[m
[32m+[m[32m  localStorage.removeItem("layout-setting")[m
[32m+[m[32m  setTimeout("window.location.reload()", 1000)[m
[32m+[m[32m}[m
[32m+[m[32mfunction openSetting() {[m
[32m+[m[32m  showSettings.value = true;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mdefineExpose({[m
[32m+[m[32m  openSetting,[m
[32m+[m[32m})[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang='scss' scoped>[m
[32m+[m[32m.setting-drawer-title {[m
[32m+[m[32m  margin-bottom: 12px;[m
[32m+[m[32m  color: rgba(0, 0, 0, 0.85);[m
[32m+[m[32m  line-height: 22px;[m
[32m+[m[32m  font-weight: bold;[m
[32m+[m[32m  .drawer-title {[m
[32m+[m[32m    font-size: 14px;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m.setting-drawer-block-checbox {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  justify-content: flex-start;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  margin-top: 10px;[m
[32m+[m[32m  margin-bottom: 20px;[m
[32m+[m
[32m+[m[32m  .setting-drawer-block-checbox-item {[m
[32m+[m[32m    position: relative;[m
[32m+[m[32m    margin-right: 16px;[m
[32m+[m[32m    border-radius: 2px;[m
[32m+[m[32m    cursor: pointer;[m
[32m+[m
[32m+[m[32m    img {[m
[32m+[m[32m      width: 48px;[m
[32m+[m[32m      height: 48px;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    .custom-img {[m
[32m+[m[32m      width: 48px;[m
[32m+[m[32m      height: 38px;[m
[32m+[m[32m      border-radius: 5px;[m
[32m+[m[32m      box-shadow: 1px 1px 2px #898484;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    .setting-drawer-block-checbox-selectIcon {[m
[32m+[m[32m      position: absolute;[m
[32m+[m[32m      top: 0;[m
[32m+[m[32m      right: 0;[m
[32m+[m[32m      width: 100%;[m
[32m+[m[32m      height: 100%;[m
[32m+[m[32m      padding-top: 15px;[m
[32m+[m[32m      padding-left: 24px;[m
[32m+[m[32m      color: #1890ff;[m
[32m+[m[32m      font-weight: 700;[m
[32m+[m[32m      font-size: 14px;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.drawer-item {[m
[32m+[m[32m  color: rgba(0, 0, 0, 0.65);[m
[32m+[m[32m  padding: 12px 0;[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m
[32m+[m[32m  .comp-style {[m
[32m+[m[32m    float: right;[m
[32m+[m[32m    margin: -3px 8px 0px 0px;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/layout/components/Sidebar/Link.vue b/src/layout/components/Sidebar/Link.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..80114316[m
[1m--- /dev/null[m
[1m+++ b/src/layout/components/Sidebar/Link.vue[m
[36m@@ -0,0 +1,40 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <component :is="type" v-bind="linkProps()">[m
[32m+[m[32m    <slot />[m
[32m+[m[32m  </component>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { isExternal } from '@/utils/validate'[m
[32m+[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m  to: {[m
[32m+[m[32m    type: [String, Object],[m
[32m+[m[32m    required: true[m
[32m+[m[32m  }[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32mconst isExt = computed(() => {[m
[32m+[m[32m  return isExternal(props.to)[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32mconst type = computed(() => {[m
[32m+[m[32m  if (isExt.value) {[m
[32m+[m[32m    return 'a'[m
[32m+[m[32m  }[m
[32m+[m[32m  return 'router-link'[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32mfunction linkProps() {[m
[32m+[m[32m  if (isExt.value) {[m
[32m+[m[32m    return {[m
[32m+[m[32m      href: props.to,[m
[32m+[m[32m      target: '_blank',[m
[32m+[m[32m      rel: 'noopener'[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  return {[m
[32m+[m[32m    to: props.to[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/layout/components/Sidebar/Logo.vue b/src/layout/components/Sidebar/Logo.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..67582d0d[m
[1m--- /dev/null[m
[1m+++ b/src/layout/components/Sidebar/Logo.vue[m
[36m@@ -0,0 +1,81 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="sidebar-logo-container" :class="{ 'collapse': collapse }" :style="{ backgroundColor: sideTheme === 'theme-dark' ? variables.menuBackground : variables.menuLightBackground }">[m
[32m+[m[32m    <transition name="sidebarLogoFade">[m
[32m+[m[32m      <router-link v-if="collapse" key="collapse" class="sidebar-logo-link" to="/">[m
[32m+[m[32m        <img v-if="logo" :src="logo" class="sidebar-logo" />[m
[32m+[m[32m        <h1 v-else class="sidebar-title" :style="{ color: sideTheme === 'theme-dark' ? variables.logoTitleColor : variables.logoLightTitleColor }">{{ title }}</h1>[m
[32m+[m[32m      </router-link>[m
[32m+[m[32m      <router-link v-else key="expand" class="sidebar-logo-link" to="/">[m
[32m+[m[32m        <img v-if="logo" :src="logo" class="sidebar-logo" />[m
[32m+[m[32m        <h1 class="sidebar-title" :style="{ color: sideTheme === 'theme-dark' ? variables.logoTitleColor : variables.logoLightTitleColor }">{{ title }}</h1>[m
[32m+[m[32m      </router-link>[m
[32m+[m[32m    </transition>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport variables from '@/assets/styles/variables.module.scss'[m
[32m+[m[32mimport logo from '@/assets/logo/logo.png'[m
[32m+[m[32mimport useSettingsStore from '@/store/modules/settings'[m
[32m+[m
[32m+[m[32mdefineProps({[m
[32m+[m[32m  collapse: {[m
[32m+[m[32m    type: Boolean,[m
[32m+[m[32m    required: true[m
[32m+[m[32m  }[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32mconst title = import.meta.env.VITE_APP_TITLE;[m
[32m+[m[32mconst settingsStore = useSettingsStore();[m
[32m+[m[32mconst sideTheme = computed(() => settingsStore.sideTheme);[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang="scss" scoped>[m
[32m+[m[32m.sidebarLogoFade-enter-active {[m
[32m+[m[32m  transition: opacity 1.5s;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.sidebarLogoFade-enter,[m
[32m+[m[32m.sidebarLogoFade-leave-to {[m
[32m+[m[32m  opacity: 0;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.sidebar-logo-container {[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m  height: 50px;[m
[32m+[m[32m  line-height: 50px;[m
[32m+[m[32m  background: #2b2f3a;[m
[32m+[m[32m  text-align: center;[m
[32m+[m[32m  overflow: hidden;[m
[32m+[m
[32m+[m[32m  & .sidebar-logo-link {[m
[32m+[m[32m    height: 100%;[m
[32m+[m[32m    width: 100%;[m
[32m+[m
[32m+[m[32m    & .sidebar-logo {[m
[32m+[m[32m      width: 32px;[m
[32m+[m[32m      height: 32px;[m
[32m+[m[32m      vertical-align: middle;[m
[32m+[m[32m      margin-right: 12px;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    & .sidebar-title {[m
[32m+[m[32m      display: inline-block;[m
[32m+[m[32m      margin: 0;[m
[32m+[m[32m      color: #fff;[m
[32m+[m[32m      font-weight: 600;[m
[32m+[m[32m      line-height: 50px;[m
[32m+[m[32m      font-size: 14px;[m
[32m+[m[32m      font-family: Avenir, Helvetica Neue, Arial, Helvetica, sans-serif;[m
[32m+[m[32m      vertical-align: middle;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  &.collapse {[m
[32m+[m[32m    .sidebar-logo {[m
[32m+[m[32m      margin-right: 0px;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/layout/components/Sidebar/SidebarItem.vue b/src/layout/components/Sidebar/SidebarItem.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..3a85e7e6[m
[1m--- /dev/null[m
[1m+++ b/src/layout/components/Sidebar/SidebarItem.vue[m
[36m@@ -0,0 +1,102 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div v-if="!item.hidden">[m
[32m+[m[32m    <template v-if="hasOneShowingChild(item.children, item) && (!onlyOneChild.children || onlyOneChild.noShowingChildren) && !item.alwaysShow">[m
[32m+[m[32m      <app-link v-if="onlyOneChild.meta" :to="resolvePath(onlyOneChild.path, onlyOneChild.query)">[m
[32m+[m[32m        <el-menu-item :index="resolvePath(onlyOneChild.path)" :class="{ 'submenu-title-noDropdown': !isNest }">[m
[32m+[m[32m          <svg-icon :icon-class="onlyOneChild.meta.icon || (item.meta && item.meta.icon)"/>[m
[32m+[m[32m          <template #title><span class="menu-title" :title="hasTitle(onlyOneChild.meta.title)">{{ onlyOneChild.meta.title }}</span></template>[m
[32m+[m[32m        </el-menu-item>[m
[32m+[m[32m      </app-link>[m
[32m+[m[32m    </template>[m
[32m+[m
[32m+[m[32m    <el-sub-menu v-else ref="subMenu" :index="resolvePath(item.path)" teleported>[m
[32m+[m[32m      <template v-if="item.meta" #title>[m
[32m+[m[32m        <svg-icon :icon-class="item.meta && item.meta.icon" />[m
[32m+[m[32m        <span class="menu-title" :title="hasTitle(item.meta.title)">{{ item.meta.title }}</span>[m
[32m+[m[32m      </template>[m
[32m+[m
[32m+[m[32m      <sidebar-item[m
[32m+[m[32m        v-for="(child, index) in item.children"[m
[32m+[m[32m        :key="child.path + index"[m
[32m+[m[32m        :is-nest="true"[m
[32m+[m[32m        :item="child"[m
[32m+[m[32m        :base-path="resolvePath(child.path)"[m
[32m+[m[32m        class="nest-menu"[m
[32m+[m[32m      />[m
[32m+[m[32m    </el-sub-menu>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { isExternal } from '@/utils/validate'[m
[32m+[m[32mimport AppLink from './Link'[m
[32m+[m[32mimport { getNormalPath } from '@/utils/ruoyi'[m
[32m+[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m  // route object[m
[32m+[m[32m  item: {[m
[32m+[m[32m    type: Object,[m
[32m+[m[32m    required: true[m
[32m+[m[32m  },[m
[32m+[m[32m  isNest: {[m
[32m+[m[32m    type: Boolean,[m
[32m+[m[32m    default: false[m
[32m+[m[32m  },[m
[32m+[m[32m  basePath: {[m
[32m+[m[32m    type: String,[m
[32m+[m[32m    default: ''[m
[32m+[m[32m  }[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32mconst onlyOneChild = ref({});[m
[32m+[m
[32m+[m[32mfunction hasOneShowingChild(children = [], parent) {[m
[32m+[m[32m  if (!children) {[m
[32m+[m[32m    children = [];[m
[32m+[m[32m  }[m
[32m+[m[32m  const showingChildren = children.filter(item => {[m
[32m+[m[32m    if (item.hidden) {[m
[32m+[m[32m      return false[m
[32m+[m[32m    } else {[m
[32m+[m[32m      // Temp set(will be used if only has one showing child)[m
[32m+[m[32m      onlyOneChild.value = item[m
[32m+[m[32m      return true[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m
[32m+[m[32m  // When there is only one child router, the child router is displayed by default[m
[32m+[m[32m  if (showingChildren.length === 1) {[m
[32m+[m[32m    return true[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // Show parent if there are no child router to display[m
[32m+[m[32m  if (showingChildren.length === 0) {[m
[32m+[m[32m    onlyOneChild.value = { ...parent, path: '', noShowingChildren: true }[m
[32m+[m[32m    return true[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  return false[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mfunction resolvePath(routePath, routeQuery) {[m
[32m+[m[32m  if (isExternal(routePath)) {[m
[32m+[m[32m    return routePath[m
[32m+[m[32m  }[m
[32m+[m[32m  if (isExternal(props.basePath)) {[m
[32m+[m[32m    return props.basePath[m
[32m+[m[32m  }[m
[32m+[m[32m  if (routeQuery) {[m
[32m+[m[32m    let query = JSON.parse(routeQuery);[m
[32m+[m[32m    return { path: getNormalPath(props.basePath + '/' + routePath), query: query }[m
[32m+[m[32m  }[m
[32m+[m[32m  return getNormalPath(props.basePath + '/' + routePath)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction hasTitle(title){[m
[32m+[m[32m  if (title.length > 5) {[m
[32m+[m[32m    return title;[m
[32m+[m[32m  } else {[m
[32m+[m[32m    return "";[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/layout/components/Sidebar/index.vue b/src/layout/components/Sidebar/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..9b14dfc0[m
[1m--- /dev/null[m
[1m+++ b/src/layout/components/Sidebar/index.vue[m
[36m@@ -0,0 +1,54 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div :class="{ 'has-logo': showLogo }" :style="{ backgroundColor: sideTheme === 'theme-dark' ? variables.menuBackground : variables.menuLightBackground }">[m
[32m+[m[32m    <logo v-if="showLogo" :collapse="isCollapse" />[m
[32m+[m[32m    <el-scrollbar :class="sideTheme" wrap-class="scrollbar-wrapper">[m
[32m+[m[32m      <el-menu[m
[32m+[m[32m        :default-active="activeMenu"[m
[32m+[m[32m        :collapse="isCollapse"[m
[32m+[m[32m        :background-color="sideTheme === 'theme-dark' ? variables.menuBackground : variables.menuLightBackground"[m
[32m+[m[32m        :text-color="sideTheme === 'theme-dark' ? variables.menuColor : variables.menuLightColor"[m
[32m+[m[32m        :unique-opened="true"[m
[32m+[m[32m        :active-text-color="theme"[m
[32m+[m[32m        :collapse-transition="false"[m
[32m+[m[32m        mode="vertical"[m
[32m+[m[32m      >[m
[32m+[m[32m        <sidebar-item[m
[32m+[m[32m          v-for="(route, index) in sidebarRouters"[m
[32m+[m[32m          :key="route.path + index"[m
[32m+[m[32m          :item="route"[m
[32m+[m[32m          :base-path="route.path"[m
[32m+[m[32m        />[m
[32m+[m[32m      </el-menu>[m
[32m+[m[32m    </el-scrollbar>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport Logo from './Logo'[m
[32m+[m[32mimport SidebarItem from './SidebarItem'[m
[32m+[m[32mimport variables from '@/assets/styles/variables.module.scss'[m
[32m+[m[32mimport useAppStore from '@/store/modules/app'[m
[32m+[m[32mimport useSettingsStore from '@/store/modules/settings'[m
[32m+[m[32mimport usePermissionStore from '@/store/modules/permission'[m
[32m+[m
[32m+[m[32mconst route = useRoute();[m
[32m+[m[32mconst appStore = useAppStore()[m
[32m+[m[32mconst settingsStore = useSettingsStore()[m
[32m+[m[32mconst permissionStore = usePermissionStore()[m
[32m+[m
[32m+[m[32mconst sidebarRouters =  computed(() => permissionStore.sidebarRouters);[m
[32m+[m[32mconst showLogo = computed(() => settingsStore.sidebarLogo);[m
[32m+[m[32mconst sideTheme = computed(() => settingsStore.sideTheme);[m
[32m+[m[32mconst theme = computed(() => settingsStore.theme);[m
[32m+[m[32mconst isCollapse = computed(() => !appStore.sidebar.opened);[m
[32m+[m
[32m+[m[32mconst activeMenu = computed(() => {[m
[32m+[m[32m  const { meta, path } = route;[m
[32m+[m[32m  // if set path, the sidebar will highlight the path you set[m
[32m+[m[32m  if (meta.activeMenu) {[m
[32m+[m[32m    return meta.activeMenu;[m
[32m+[m[32m  }[m
[32m+[m[32m  return path;[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/layout/components/TagsView/ScrollPane.vue b/src/layout/components/TagsView/ScrollPane.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..516b5d25[m
[1m--- /dev/null[m
[1m+++ b/src/layout/components/TagsView/ScrollPane.vue[m
[36m@@ -0,0 +1,105 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <el-scrollbar[m
[32m+[m[32m    ref="scrollContainer"[m
[32m+[m[32m    :vertical="false"[m
[32m+[m[32m    class="scroll-container"[m
[32m+[m[32m    @wheel.prevent="handleScroll"[m
[32m+[m[32m  >[m
[32m+[m[32m    <slot />[m
[32m+[m[32m  </el-scrollbar>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport useTagsViewStore from '@/store/modules/tagsView'[m
[32m+[m
[32m+[m[32mconst tagAndTagSpacing = ref(4);[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m
[32m+[m[32mconst scrollWrapper = computed(() => proxy.$refs.scrollContainer.$refs.wrapRef);[m
[32m+[m
[32m+[m[32monMounted(() => {[m
[32m+[m[32m  scrollWrapper.value.addEventListener('scroll', emitScroll, true)[m
[32m+[m[32m})[m
[32m+[m[32monBeforeUnmount(() => {[m
[32m+[m[32m  scrollWrapper.value.removeEventListener('scroll', emitScroll)[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32mfunction handleScroll(e) {[m
[32m+[m[32m  const eventDelta = e.wheelDelta || -e.deltaY * 40[m
[32m+[m[32m  const $scrollWrapper = scrollWrapper.value;[m
[32m+[m[32m  $scrollWrapper.scrollLeft = $scrollWrapper.scrollLeft + eventDelta / 4[m
[32m+[m[32m}[m
[32m+[m[32mconst emits = defineEmits()[m
[32m+[m[32mconst emitScroll = () => {[m
[32m+[m[32m  emits('scroll')[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mconst tagsViewStore = useTagsViewStore()[m
[32m+[m[32mconst visitedViews = computed(() => tagsViewStore.visitedViews);[m
[32m+[m
[32m+[m[32mfunction moveToTarget(currentTag) {[m
[32m+[m[32m  const $container = proxy.$refs.scrollContainer.$el[m
[32m+[m[32m  const $containerWidth = $container.offsetWidth[m
[32m+[m[32m  const $scrollWrapper = scrollWrapper.value;[m
[32m+[m
[32m+[m[32m  let firstTag = null[m
[32m+[m[32m  let lastTag = null[m
[32m+[m
[32m+[m[32m  // find first tag and last tag[m
[32m+[m[32m  if (visitedViews.value.length > 0) {[m
[32m+[m[32m    firstTag = visitedViews.value[0][m
[32m+[m[32m    lastTag = visitedViews.value[visitedViews.value.length - 1][m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  if (firstTag === currentTag) {[m
[32m+[m[32m    $scrollWrapper.scrollLeft = 0[m
[32m+[m[32m  } else if (lastTag === currentTag) {[m
[32m+[m[32m    $scrollWrapper.scrollLeft = $scrollWrapper.scrollWidth - $containerWidth[m
[32m+[m[32m  } else {[m
[32m+[m[32m    const tagListDom = document.getElementsByClassName('tags-view-item');[m
[32m+[m[32m    const currentIndex = visitedViews.value.findIndex(item => item === currentTag)[m
[32m+[m[32m    let prevTag = null[m
[32m+[m[32m    let nextTag = null[m
[32m+[m[32m    for (const k in tagListDom) {[m
[32m+[m[32m      if (k !== 'length' && Object.hasOwnProperty.call(tagListDom, k)) {[m
[32m+[m[32m        if (tagListDom[k].dataset.path === visitedViews.value[currentIndex - 1].path) {[m
[32m+[m[32m          prevTag = tagListDom[k];[m
[32m+[m[32m        }[m
[32m+[m[32m        if (tagListDom[k].dataset.path === visitedViews.value[currentIndex + 1].path) {[m
[32m+[m[32m          nextTag = tagListDom[k];[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    // the tag's offsetLeft after of nextTag[m
[32m+[m[32m    const afterNextTagOffsetLeft = nextTag.offsetLeft + nextTag.offsetWidth + tagAndTagSpacing.value[m
[32m+[m
[32m+[m[32m    // the tag's offsetLeft before of prevTag[m
[32m+[m[32m    const beforePrevTagOffsetLeft = prevTag.offsetLeft - tagAndTagSpacing.value[m
[32m+[m[32m    if (afterNextTagOffsetLeft > $scrollWrapper.scrollLeft + $containerWidth) {[m
[32m+[m[32m      $scrollWrapper.scrollLeft = afterNextTagOffsetLeft - $containerWidth[m
[32m+[m[32m    } else if (beforePrevTagOffsetLeft < $scrollWrapper.scrollLeft) {[m
[32m+[m[32m      $scrollWrapper.scrollLeft = beforePrevTagOffsetLeft[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mdefineExpose({[m
[32m+[m[32m  moveToTarget,[m
[32m+[m[32m})[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang='scss' scoped>[m
[32m+[m[32m.scroll-container {[m
[32m+[m[32m  white-space: nowrap;[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m  overflow: hidden;[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m  :deep(.el-scrollbar__bar) {[m
[32m+[m[32m    bottom: 0px;[m
[32m+[m[32m  }[m
[32m+[m[32m  :deep(.el-scrollbar__wrap) {[m
[32m+[m[32m    height: 39px;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/layout/components/TagsView/index.vue b/src/layout/components/TagsView/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..c1b7e3f3[m
[1m--- /dev/null[m
[1m+++ b/src/layout/components/TagsView/index.vue[m
[36m@@ -0,0 +1,338 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div id="tags-view-container" class="tags-view-container">[m
[32m+[m[32m    <scroll-pane ref="scrollPaneRef" class="tags-view-wrapper" @scroll="handleScroll">[m
[32m+[m[32m      <router-link[m
[32m+[m[32m        v-for="tag in visitedViews"[m
[32m+[m[32m        :key="tag.path"[m
[32m+[m[32m        :data-path="tag.path"[m
[32m+[m[32m        :class="isActive(tag) ? 'active' : ''"[m
[32m+[m[32m        :to="{ path: tag.path, query: tag.query, fullPath: tag.fullPath }"[m
[32m+[m[32m        class="tags-view-item"[m
[32m+[m[32m        :style="activeStyle(tag)"[m
[32m+[m[32m        @click.middle="!isAffix(tag) ? closeSelectedTag(tag) : ''"[m
[32m+[m[32m        @contextmenu.prevent="openMenu(tag, $event)"[m
[32m+[m[32m      >[m
[32m+[m[32m        {{ tag.title }}[m
[32m+[m[32m        <span v-if="!isAffix(tag)" @click.prevent.stop="closeSelectedTag(tag)">[m
[32m+[m[32m          <close class="el-icon-close" style="width: 1em; height: 1em;vertical-align: middle;" />[m
[32m+[m[32m        </span>[m
[32m+[m[32m      </router-link>[m
[32m+[m[32m    </scroll-pane>[m
[32m+[m[32m    <ul v-show="visible" :style="{ left: left + 'px', top: top + 'px' }" class="contextmenu">[m
[32m+[m[32m      <li @click="refreshSelectedTag(selectedTag)">[m
[32m+[m[32m        <refresh-right style="width: 1em; height: 1em;" /> åˆ·æ–°é¡µé¢[m
[32m+[m[32m      </li>[m
[32m+[m[32m      <li v-if="!isAffix(selectedTag)" @click="closeSelectedTag(selectedTag)">[m
[32m+[m[32m        <close style="width: 1em; height: 1em;" /> å…³é—­å½“å‰[m
[32m+[m[32m      </li>[m
[32m+[m[32m      <li @click="closeOthersTags">[m
[32m+[m[32m        <circle-close style="width: 1em; height: 1em;" /> å…³é—­å…¶ä»–[m
[32m+[m[32m      </li>[m
[32m+[m[32m      <li v-if="!isFirstView()" @click="closeLeftTags">[m
[32m+[m[32m        <back style="width: 1em; height: 1em;" /> å…³é—­å·¦ä¾§[m
[32m+[m[32m      </li>[m
[32m+[m[32m      <li v-if="!isLastView()" @click="closeRightTags">[m
[32m+[m[32m        <right style="width: 1em; height: 1em;" /> å…³é—­å³ä¾§[m
[32m+[m[32m      </li>[m
[32m+[m[32m      <li @click="closeAllTags(selectedTag)">[m
[32m+[m[32m        <circle-close style="width: 1em; height: 1em;" /> å…¨éƒ¨å…³é—­[m
[32m+[m[32m      </li>[m
[32m+[m[32m    </ul>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport ScrollPane from './ScrollPane'[m
[32m+[m[32mimport { getNormalPath } from '@/utils/ruoyi'[m
[32m+[m[32mimport useTagsViewStore from '@/store/modules/tagsView'[m
[32m+[m[32mimport useSettingsStore from '@/store/modules/settings'[m
[32m+[m[32mimport usePermissionStore from '@/store/modules/permission'[m
[32m+[m
[32m+[m[32mconst visible = ref(false);[m
[32m+[m[32mconst top = ref(0);[m
[32m+[m[32mconst left = ref(0);[m
[32m+[m[32mconst selectedTag = ref({});[m
[32m+[m[32mconst affixTags = ref([]);[m
[32m+[m[32mconst scrollPaneRef = ref(null);[m
[32m+[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m[32mconst route = useRoute();[m
[32m+[m[32mconst router = useRouter();[m
[32m+[m
[32m+[m[32mconst visitedViews = computed(() => useTagsViewStore().visitedViews);[m
[32m+[m[32mconst routes = computed(() => usePermissionStore().routes);[m
[32m+[m[32mconst theme = computed(() => useSettingsStore().theme);[m
[32m+[m
[32m+[m[32mwatch(route, () => {[m
[32m+[m[32m  addTags()[m
[32m+[m[32m  moveToCurrentTag()[m
[32m+[m[32m})[m
[32m+[m[32mwatch(visible, (value) => {[m
[32m+[m[32m  if (value) {[m
[32m+[m[32m    document.body.addEventListener('click', closeMenu)[m
[32m+[m[32m  } else {[m
[32m+[m[32m    document.body.removeEventListener('click', closeMenu)[m
[32m+[m[32m  }[m
[32m+[m[32m})[m
[32m+[m[32monMounted(() => {[m
[32m+[m[32m  initTags()[m
[32m+[m[32m  addTags()[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32mfunction isActive(r) {[m
[32m+[m[32m  return r.path === route.path[m
[32m+[m[32m}[m
[32m+[m[32mfunction activeStyle(tag) {[m
[32m+[m[32m  if (!isActive(tag)) return {};[m
[32m+[m[32m  return {[m
[32m+[m[32m    "background-color": theme.value,[m
[32m+[m[32m    "border-color": theme.value[m
[32m+[m[32m  };[m
[32m+[m[32m}[m
[32m+[m[32mfunction isAffix(tag) {[m
[32m+[m[32m  return tag.meta && tag.meta.affix[m
[32m+[m[32m}[m
[32m+[m[32mfunction isFirstView() {[m
[32m+[m[32m  try {[m
[32m+[m[32m    return selectedTag.value.fullPath === '/index' || selectedTag.value.fullPath === visitedViews.value[1].fullPath[m
[32m+[m[32m  } catch (err) {[m
[32m+[m[32m    return false[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32mfunction isLastView() {[m
[32m+[m[32m  try {[m
[32m+[m[32m    return selectedTag.value.fullPath === visitedViews.value[visitedViews.value.length - 1].fullPath[m
[32m+[m[32m  } catch (err) {[m
[32m+[m[32m    return false[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32mfunction filterAffixTags(routes, basePath = '') {[m
[32m+[m[32m  let tags = [][m
[32m+[m[32m  routes.forEach(route => {[m
[32m+[m[32m    if (route.meta && route.meta.affix) {[m
[32m+[m[32m      const tagPath = getNormalPath(basePath + '/' + route.path)[m
[32m+[m[32m      tags.push({[m
[32m+[m[32m        fullPath: tagPath,[m
[32m+[m[32m        path: tagPath,[m
[32m+[m[32m        name: route.name,[m
[32m+[m[32m        meta: { ...route.meta }[m
[32m+[m[32m      })[m
[32m+[m[32m    }[m
[32m+[m[32m    if (route.children) {[m
[32m+[m[32m      const tempTags = filterAffixTags(route.children, route.path)[m
[32m+[m[32m      if (tempTags.length >= 1) {[m
[32m+[m[32m        tags = [...tags, ...tempTags][m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m[32m  return tags[m
[32m+[m[32m}[m
[32m+[m[32mfunction initTags() {[m
[32m+[m[32m  const res = filterAffixTags(routes.value);[m
[32m+[m[32m  affixTags.value = res;[m
[32m+[m[32m  for (const tag of res) {[m
[32m+[m[32m    // Must have tag name[m
[32m+[m[32m    if (tag.name) {[m
[32m+[m[32m       useTagsViewStore().addVisitedView(tag)[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32mfunction addTags() {[m
[32m+[m[32m  const { name } = route[m
[32m+[m[32m  if (name) {[m
[32m+[m[32m    useTagsViewStore().addView(route)[m
[32m+[m[32m    if (route.meta.link) {[m
[32m+[m[32m      useTagsViewStore().addIframeView(route);[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  return false[m
[32m+[m[32m}[m
[32m+[m[32mfunction moveToCurrentTag() {[m
[32m+[m[32m  nextTick(() => {[m
[32m+[m[32m    for (const r of visitedViews.value) {[m
[32m+[m[32m      if (r.path === route.path) {[m
[32m+[m[32m        scrollPaneRef.value.moveToTarget(r);[m
[32m+[m[32m        // when query is different then update[m
[32m+[m[32m        if (r.fullPath !== route.fullPath) {[m
[32m+[m[32m          useTagsViewStore().updateVisitedView(route)[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m[32mfunction refreshSelectedTag(view) {[m
[32m+[m[32m  proxy.$tab.refreshPage(view);[m
[32m+[m[32m  if (route.meta.link) {[m
[32m+[m[32m    useTagsViewStore().delIframeView(route);[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32mfunction closeSelectedTag(view) {[m
[32m+[m[32m  proxy.$tab.closePage(view).then(({ visitedViews }) => {[m
[32m+[m[32m    if (isActive(view)) {[m
[32m+[m[32m      toLastView(visitedViews, view)[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m[32mfunction closeRightTags() {[m
[32m+[m[32m  proxy.$tab.closeRightPage(selectedTag.value).then(visitedViews => {[m
[32m+[m[32m    if (!visitedViews.find(i => i.fullPath === route.fullPath)) {[m
[32m+[m[32m      toLastView(visitedViews)[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m[32mfunction closeLeftTags() {[m
[32m+[m[32m  proxy.$tab.closeLeftPage(selectedTag.value).then(visitedViews => {[m
[32m+[m[32m    if (!visitedViews.find(i => i.fullPath === route.fullPath)) {[m
[32m+[m[32m      toLastView(visitedViews)[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m[32mfunction closeOthersTags() {[m
[32m+[m[32m  router.push(selectedTag.value).catch(() => { });[m
[32m+[m[32m  proxy.$tab.closeOtherPage(selectedTag.value).then(() => {[m
[32m+[m[32m    moveToCurrentTag()[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m[32mfunction closeAllTags(view) {[m
[32m+[m[32m  proxy.$tab.closeAllPage().then(({ visitedViews }) => {[m
[32m+[m[32m    if (affixTags.value.some(tag => tag.path === route.path)) {[m
[32m+[m[32m      return[m
[32m+[m[32m    }[m
[32m+[m[32m    toLastView(visitedViews, view)[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m[32mfunction toLastView(visitedViews, view) {[m
[32m+[m[32m  const latestView = visitedViews.slice(-1)[0][m
[32m+[m[32m  if (latestView) {[m
[32m+[m[32m    router.push(latestView.fullPath)[m
[32m+[m[32m  } else {[m
[32m+[m[32m    // now the default is to redirect to the home page if there is no tags-view,[m
[32m+[m[32m    // you can adjust it according to your needs.[m
[32m+[m[32m    if (view.name === 'Dashboard') {[m
[32m+[m[32m      // to reload home page[m
[32m+[m[32m      router.replace({ path: '/redirect' + view.fullPath })[m
[32m+[m[32m    } else {[m
[32m+[m[32m      router.push('/')[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32mfunction openMenu(tag, e) {[m
[32m+[m[32m  const menuMinWidth = 105[m
[32m+[m[32m  const offsetLeft = proxy.$el.getBoundingClientRect().left // container margin left[m
[32m+[m[32m  const offsetWidth = proxy.$el.offsetWidth // container width[m
[32m+[m[32m  const maxLeft = offsetWidth - menuMinWidth // left boundary[m
[32m+[m[32m  const l = e.clientX - offsetLeft + 15 // 15: margin right[m
[32m+[m
[32m+[m[32m  if (l > maxLeft) {[m
[32m+[m[32m    left.value = maxLeft[m
[32m+[m[32m  } else {[m
[32m+[m[32m    left.value = l[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  top.value = e.clientY[m
[32m+[m[32m  visible.value = true[m
[32m+[m[32m  selectedTag.value = tag[m
[32m+[m[32m}[m
[32m+[m[32mfunction closeMenu() {[m
[32m+[m[32m  visible.value = false[m
[32m+[m[32m}[m
[32m+[m[32mfunction handleScroll() {[m
[32m+[m[32m  closeMenu()[m
[32m+[m[32m}[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang='scss' scoped>[m
[32m+[m[32m.tags-view-container {[m
[32m+[m[32m  height: 34px;[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m  background: #fff;[m
[32m+[m[32m  border-bottom: 1px solid #d8dce5;[m
[32m+[m[32m  box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.12), 0 0 3px 0 rgba(0, 0, 0, 0.04);[m
[32m+[m[32m  .tags-view-wrapper {[m
[32m+[m[32m    .tags-view-item {[m
[32m+[m[32m      display: inline-block;[m
[32m+[m[32m      position: relative;[m
[32m+[m[32m      cursor: pointer;[m
[32m+[m[32m      height: 26px;[m
[32m+[m[32m      line-height: 26px;[m
[32m+[m[32m      border: 1px solid #d8dce5;[m
[32m+[m[32m      color: #495060;[m
[32m+[m[32m      background: #fff;[m
[32m+[m[32m      padding: 0 8px;[m
[32m+[m[32m      font-size: 12px;[m
[32m+[m[32m      margin-left: 5px;[m
[32m+[m[32m      margin-top: 4px;[m
[32m+[m[32m      &:first-of-type {[m
[32m+[m[32m        margin-left: 15px;[m
[32m+[m[32m      }[m
[32m+[m[32m      &:last-of-type {[m
[32m+[m[32m        margin-right: 15px;[m
[32m+[m[32m      }[m
[32m+[m[32m      &.active {[m
[32m+[m[32m        background-color: #42b983;[m
[32m+[m[32m        color: #fff;[m
[32m+[m[32m        border-color: #42b983;[m
[32m+[m[32m        &::before {[m
[32m+[m[32m          content: "";[m
[32m+[m[32m          background: #fff;[m
[32m+[m[32m          display: inline-block;[m
[32m+[m[32m          width: 8px;[m
[32m+[m[32m          height: 8px;[m
[32m+[m[32m          border-radius: 50%;[m
[32m+[m[32m          position: relative;[m
[32m+[m[32m          margin-right: 5px;[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  .contextmenu {[m
[32m+[m[32m    margin: 0;[m
[32m+[m[32m    background: #fff;[m
[32m+[m[32m    z-index: 3000;[m
[32m+[m[32m    position: absolute;[m
[32m+[m[32m    list-style-type: none;[m
[32m+[m[32m    padding: 5px 0;[m
[32m+[m[32m    border-radius: 4px;[m
[32m+[m[32m    font-size: 12px;[m
[32m+[m[32m    font-weight: 400;[m
[32m+[m[32m    color: #333;[m
[32m+[m[32m    box-shadow: 2px 2px 3px 0 rgba(0, 0, 0, 0.3);[m
[32m+[m[32m    li {[m
[32m+[m[32m      margin: 0;[m
[32m+[m[32m      padding: 7px 16px;[m
[32m+[m[32m      cursor: pointer;[m
[32m+[m[32m      &:hover {[m
[32m+[m[32m        background: #eee;[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
[32m+[m
[32m+[m[32m<style lang="scss">[m
[32m+[m[32m//reset element css of el-icon-close[m
[32m+[m[32m.tags-view-wrapper {[m
[32m+[m[32m  .tags-view-item {[m
[32m+[m[32m    .el-icon-close {[m
[32m+[m[32m      width: 16px;[m
[32m+[m[32m      height: 16px;[m
[32m+[m[32m      vertical-align: 2px;[m
[32m+[m[32m      border-radius: 50%;[m
[32m+[m[32m      text-align: center;[m
[32m+[m[32m      transition: all 0.3s cubic-bezier(0.645, 0.045, 0.355, 1);[m
[32m+[m[32m      transform-origin: 100% 50%;[m
[32m+[m[32m      &:before {[m
[32m+[m[32m        transform: scale(0.6);[m
[32m+[m[32m        display: inline-block;[m
[32m+[m[32m        vertical-align: -3px;[m
[32m+[m[32m      }[m
[32m+[m[32m      &:hover {[m
[32m+[m[32m        background-color: #b4bccc;[m
[32m+[m[32m        color: #fff;[m
[32m+[m[32m        width: 12px !important;[m
[32m+[m[32m        height: 12px !important;[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/layout/components/index.js b/src/layout/components/index.js[m
[1mnew file mode 100644[m
[1mindex 00000000..fd577313[m
[1m--- /dev/null[m
[1m+++ b/src/layout/components/index.js[m
[36m@@ -0,0 +1,4 @@[m
[32m+[m[32mexport { default as AppMain } from './AppMain'[m
[32m+[m[32mexport { default as Navbar } from './Navbar'[m
[32m+[m[32mexport { default as Settings } from './Settings'[m
[32m+[m[32mexport { default as TagsView } from './TagsView/index.vue'[m
[1mdiff --git a/src/layout/index.vue b/src/layout/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..3ddb1657[m
[1m--- /dev/null[m
[1m+++ b/src/layout/index.vue[m
[36m@@ -0,0 +1,111 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div :class="classObj" class="app-wrapper" :style="{ '--current-color': theme }">[m
[32m+[m[32m    <div v-if="device === 'mobile' && sidebar.opened" class="drawer-bg" @click="handleClickOutside"/>[m
[32m+[m[32m    <sidebar v-if="!sidebar.hide" class="sidebar-container" />[m
[32m+[m[32m    <div :class="{ hasTagsView: needTagsView, sidebarHide: sidebar.hide }" class="main-container">[m
[32m+[m[32m      <div :class="{ 'fixed-header': fixedHeader }">[m
[32m+[m[32m        <navbar @setLayout="setLayout" />[m
[32m+[m[32m        <tags-view v-if="needTagsView" />[m
[32m+[m[32m      </div>[m
[32m+[m[32m      <app-main />[m
[32m+[m[32m      <settings ref="settingRef" />[m
[32m+[m[32m    </div>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { useWindowSize } from '@vueuse/core'[m
[32m+[m[32mimport Sidebar from './components/Sidebar/index.vue'[m
[32m+[m[32mimport { AppMain, Navbar, Settings, TagsView } from './components'[m
[32m+[m[32mimport defaultSettings from '@/settings'[m
[32m+[m
[32m+[m[32mimport useAppStore from '@/store/modules/app'[m
[32m+[m[32mimport useSettingsStore from '@/store/modules/settings'[m
[32m+[m
[32m+[m[32mconst settingsStore = useSettingsStore()[m
[32m+[m[32mconst theme = computed(() => settingsStore.theme);[m
[32m+[m[32mconst sideTheme = computed(() => settingsStore.sideTheme);[m
[32m+[m[32mconst sidebar = computed(() => useAppStore().sidebar);[m
[32m+[m[32mconst device = computed(() => useAppStore().device);[m
[32m+[m[32mconst needTagsView = computed(() => settingsStore.tagsView);[m
[32m+[m[32mconst fixedHeader = computed(() => settingsStore.fixedHeader);[m
[32m+[m
[32m+[m[32mconst classObj = computed(() => ({[m
[32m+[m[32m  hideSidebar: !sidebar.value.opened,[m
[32m+[m[32m  openSidebar: sidebar.value.opened,[m
[32m+[m[32m  withoutAnimation: sidebar.value.withoutAnimation,[m
[32m+[m[32m  mobile: device.value === 'mobile'[m
[32m+[m[32m}))[m
[32m+[m
[32m+[m[32mconst { width, height } = useWindowSize();[m
[32m+[m[32mconst WIDTH = 992; // refer to Bootstrap's responsive design[m
[32m+[m
[32m+[m[32mwatchEffect(() => {[m
[32m+[m[32m  if (device.value === 'mobile' && sidebar.value.opened) {[m
[32m+[m[32m    useAppStore().closeSideBar({ withoutAnimation: false })[m
[32m+[m[32m  }[m
[32m+[m[32m  if (width.value - 1 < WIDTH) {[m
[32m+[m[32m    useAppStore().toggleDevice('mobile')[m
[32m+[m[32m    useAppStore().closeSideBar({ withoutAnimation: true })[m
[32m+[m[32m  } else {[m
[32m+[m[32m    useAppStore().toggleDevice('desktop')[m
[32m+[m[32m  }[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32mfunction handleClickOutside() {[m
[32m+[m[32m  useAppStore().closeSideBar({ withoutAnimation: false })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mconst settingRef = ref(null);[m
[32m+[m[32mfunction setLayout() {[m
[32m+[m[32m  settingRef.value.openSetting();[m
[32m+[m[32m}[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang="scss" scoped>[m
[32m+[m[32m  @import "@/assets/styles/mixin.scss";[m
[32m+[m[32m  @import "@/assets/styles/variables.module.scss";[m
[32m+[m
[32m+[m[32m.app-wrapper {[m
[32m+[m[32m  @include clearfix;[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m  height: 100%;[m
[32m+[m[32m  width: 100%;[m
[32m+[m
[32m+[m[32m  &.mobile.openSidebar {[m
[32m+[m[32m    position: fixed;[m
[32m+[m[32m    top: 0;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.drawer-bg {[m
[32m+[m[32m  background: #000;[m
[32m+[m[32m  opacity: 0.3;[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m  top: 0;[m
[32m+[m[32m  height: 100%;[m
[32m+[m[32m  position: absolute;[m
[32m+[m[32m  z-index: 999;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.fixed-header {[m
[32m+[m[32m  position: fixed;[m
[32m+[m[32m  top: 0;[m
[32m+[m[32m  right: 0;[m
[32m+[m[32m  z-index: 9;[m
[32m+[m[32m  width: calc(100% - #{$base-sidebar-width});[m
[32m+[m[32m  transition: width 0.28s;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.hideSidebar .fixed-header {[m
[32m+[m[32m  width: calc(100% - 54px);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.sidebarHide .fixed-header {[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.mobile .fixed-header {[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/main.js b/src/main.js[m
[1mnew file mode 100644[m
[1mindex 00000000..04b6801a[m
[1m--- /dev/null[m
[1m+++ b/src/main.js[m
[36m@@ -0,0 +1,84 @@[m
[32m+[m[32mimport { createApp } from 'vue'[m
[32m+[m
[32m+[m[32mimport Cookies from 'js-cookie'[m
[32m+[m
[32m+[m[32mimport ElementPlus from 'element-plus'[m
[32m+[m[32mimport 'element-plus/dist/index.css'[m
[32m+[m[32mimport locale from 'element-plus/es/locale/lang/zh-cn'[m
[32m+[m
[32m+[m[32mimport '@/assets/styles/index.scss' // global css[m
[32m+[m
[32m+[m[32mimport App from './App'[m
[32m+[m[32mimport store from './store'[m
[32m+[m[32mimport router from './router'[m
[32m+[m[32mimport directive from './directive' // directive[m
[32m+[m
[32m+[m[32m// æ³¨å†ŒæŒ‡ä»¤[m
[32m+[m[32mimport plugins from './plugins' // plugins[m
[32m+[m[32mimport { download } from '@/utils/request'[m
[32m+[m
[32m+[m[32m// svgå›¾æ ‡[m
[32m+[m[32mimport 'virtual:svg-icons-register'[m
[32m+[m[32mimport SvgIcon from '@/components/SvgIcon'[m
[32m+[m[32mimport elementIcons from '@/components/SvgIcon/svgicon'[m
[32m+[m
[32m+[m[32mimport './permission' // permission control[m
[32m+[m
[32m+[m[32mimport { useDict } from '@/utils/dict'[m
[32m+[m[32mimport { parseTime, resetForm, addDateRange, handleTree, selectDictLabel, selectDictLabels } from '@/utils/ruoyi'[m
[32m+[m
[32m+[m[32m// åˆ†é¡µç»„ä»¶[m
[32m+[m[32mimport Pagination from '@/components/Pagination'[m
[32m+[m[32m// è‡ªå®šä¹‰è¡¨æ ¼å·¥å…·ç»„ä»¶[m
[32m+[m[32mimport RightToolbar from '@/components/RightToolbar'[m
[32m+[m[32m// å¯Œæ–‡æœ¬ç»„ä»¶[m
[32m+[m[32mimport Editor from "@/components/Editor"[m
[32m+[m[32m// æ–‡ä»¶ä¸Šä¼ ç»„ä»¶[m
[32m+[m[32mimport FileUpload from "@/components/FileUpload"[m
[32m+[m[32m// å›¾ç‰‡ä¸Šä¼ ç»„ä»¶[m
[32m+[m[32mimport ImageUpload from "@/components/ImageUpload"[m
[32m+[m[32m// å›¾ç‰‡é¢„è§ˆç»„ä»¶[m
[32m+[m[32mimport ImagePreview from "@/components/ImagePreview"[m
[32m+[m[32m// è‡ªå®šä¹‰æ ‘é€‰æ‹©ç»„ä»¶[m
[32m+[m[32mimport TreeSelect from '@/components/TreeSelect'[m
[32m+[m[32m// å­—å…¸æ ‡ç­¾ç»„ä»¶[m
[32m+[m[32mimport DictTag from '@/components/DictTag'[m
[32m+[m
[32m+[m[32mconst app = createApp(App)[m
[32m+[m
[32m+[m[32m// å…¨å±€æ–¹æ³•æŒ‚è½½[m
[32m+[m[32mapp.config.globalProperties.useDict = useDict[m
[32m+[m[32mapp.config.globalProperties.download = download[m
[32m+[m[32mapp.config.globalProperties.parseTime = parseTime[m
[32m+[m[32mapp.config.globalProperties.resetForm = resetForm[m
[32m+[m[32mapp.config.globalProperties.handleTree = handleTree[m
[32m+[m[32mapp.config.globalProperties.addDateRange = addDateRange[m
[32m+[m[32mapp.config.globalProperties.selectDictLabel = selectDictLabel[m
[32m+[m[32mapp.config.globalProperties.selectDictLabels = selectDictLabels[m
[32m+[m
[32m+[m[32m// å…¨å±€ç»„ä»¶æŒ‚è½½[m
[32m+[m[32mapp.component('DictTag', DictTag)[m
[32m+[m[32mapp.component('Pagination', Pagination)[m
[32m+[m[32mapp.component('TreeSelect', TreeSelect)[m
[32m+[m[32mapp.component('FileUpload', FileUpload)[m
[32m+[m[32mapp.component('ImageUpload', ImageUpload)[m
[32m+[m[32mapp.component('ImagePreview', ImagePreview)[m
[32m+[m[32mapp.component('RightToolbar', RightToolbar)[m
[32m+[m[32mapp.component('Editor', Editor)[m
[32m+[m
[32m+[m[32mapp.use(router)[m
[32m+[m[32mapp.use(store)[m
[32m+[m[32mapp.use(plugins)[m
[32m+[m[32mapp.use(elementIcons)[m
[32m+[m[32mapp.component('svg-icon', SvgIcon)[m
[32m+[m
[32m+[m[32mdirective(app)[m
[32m+[m
[32m+[m[32m// ä½¿ç”¨element-plus å¹¶ä¸”è®¾ç½®å…¨å±€çš„å¤§å°[m
[32m+[m[32mapp.use(ElementPlus, {[m
[32m+[m[32m  locale: locale,[m
[32m+[m[32m  // æ”¯æŒ largeã€defaultã€small[m
[32m+[m[32m  size: Cookies.get('size') || 'default'[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32mapp.mount('#app')[m
[1mdiff --git a/src/permission.js b/src/permission.js[m
[1mnew file mode 100644[m
[1mindex 00000000..a1aaa88d[m
[1m--- /dev/null[m
[1m+++ b/src/permission.js[m
[36m@@ -0,0 +1,84 @@[m
[32m+[m[32mimport router from './router'[m
[32m+[m[32mimport { ElMessage } from 'element-plus'[m
[32m+[m[32mimport NProgress from 'nprogress'[m
[32m+[m[32mimport 'nprogress/nprogress.css'[m
[32m+[m[32mimport { getToken } from '@/utils/auth'[m
[32m+[m[32mimport { isHttp } from '@/utils/validate'[m
[32m+[m[32mimport { isRelogin } from '@/utils/request'[m
[32m+[m[32mimport useUserStore from '@/store/modules/user'[m
[32m+[m[32mimport useSettingsStore from '@/store/modules/settings'[m
[32m+[m[32mimport usePermissionStore from '@/store/modules/permission'[m
[32m+[m
[32m+[m[32mNProgress.configure({ showSpinner: false });[m
[32m+[m
[32m+[m[32mconst whiteList = ['/login', '/register', '/portal', '/portal/home', '/portal/login', '/portal/register'];[m
[32m+[m
[32m+[m[32mrouter.beforeEach((to, from, next) => {[m
[32m+[m[32m  NProgress.start()[m
[32m+[m[41m  [m
[32m+[m[32m  // å‰å°è·¯ç”±ï¼šç›´æ¥æ”¾è¡Œï¼Œä¸æ ¡éªŒæƒé™[m
[32m+[m[32m  if (to.path.startsWith('/computer-market')) {[m
[32m+[m[32m    next();[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  // Cç«¯portalè·¯ç”±ï¼šç›´æ¥æ”¾è¡Œï¼Œä¸æ ¡éªŒæƒé™[m
[32m+[m[32m  if (to.path.startsWith('/portal')) {[m
[32m+[m[32m    next();[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  // è·¯ç”±metaä¸­æ ‡è®°noAuth: trueçš„ï¼Œç›´æ¥æ”¾è¡Œ[m
[32m+[m[32m  if (to.meta && to.meta.noAuth === true) {[m
[32m+[m[32m    next();[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  if (getToken()) {[m
[32m+[m[32m    to.meta.title && useSettingsStore().setTitle(to.meta.title)[m
[32m+[m[32m    /* has token*/[m
[32m+[m[32m    if (to.path === '/login') {[m
[32m+[m[32m      next({ path: '/' })[m
[32m+[m[32m      NProgress.done()[m
[32m+[m[32m    } else if (whiteList.indexOf(to.path) !== -1) {[m
[32m+[m[32m      next()[m
[32m+[m[32m    } else {[m
[32m+[m[32m      if (useUserStore().roles.length === 0) {[m
[32m+[m[32m        isRelogin.show = true[m
[32m+[m[32m        // åˆ¤æ–­å½“å‰ç”¨æˆ·æ˜¯å¦å·²æ‹‰å–å®Œuser_infoä¿¡æ¯[m
[32m+[m[32m        useUserStore().getInfo().then(() => {[m
[32m+[m[32m          isRelogin.show = false[m
[32m+[m[32m          usePermissionStore().generateRoutes().then(accessRoutes => {[m
[32m+[m[32m            // æ ¹æ®rolesæƒé™ç”Ÿæˆå¯è®¿é—®çš„è·¯ç”±è¡¨[m
[32m+[m[32m            accessRoutes.forEach(route => {[m
[32m+[m[32m              if (!isHttp(route.path)) {[m
[32m+[m[32m                router.addRoute(route) // åŠ¨æ€æ·»åŠ å¯è®¿é—®è·¯ç”±è¡¨[m
[32m+[m[32m              }[m
[32m+[m[32m            })[m
[32m+[m[32m            next({ ...to, replace: true }) // hackæ–¹æ³• ç¡®ä¿addRouteså·²å®Œæˆ[m
[32m+[m[32m          })[m
[32m+[m[32m        }).catch(err => {[m
[32m+[m[32m          useUserStore().logOut().then(() => {[m
[32m+[m[32m            ElMessage.error(err)[m
[32m+[m[32m            next({ path: '/' })[m
[32m+[m[32m          })[m
[32m+[m[32m        })[m
[32m+[m[32m      } else {[m
[32m+[m[32m        next()[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  } else {[m
[32m+[m[32m    // æ²¡æœ‰token[m
[32m+[m[32m    if (whiteList.indexOf(to.path) !== -1) {[m
[32m+[m[32m      // åœ¨å…ç™»å½•ç™½åå•ï¼Œç›´æ¥è¿›å…¥[m
[32m+[m[32m      next()[m
[32m+[m[32m    } else {[m
[32m+[m[32m      next(`/login?redirect=${to.fullPath}`) // å¦åˆ™å…¨éƒ¨é‡å®šå‘åˆ°ç™»å½•é¡µ[m
[32m+[m[32m      NProgress.done()[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32mrouter.afterEach(() => {[m
[32m+[m[32m  NProgress.done()[m
[32m+[m[32m})[m
[1mdiff --git a/src/plugins/auth.js b/src/plugins/auth.js[m
[1mnew file mode 100644[m
[1mindex 00000000..5e8c28de[m
[1m--- /dev/null[m
[1m+++ b/src/plugins/auth.js[m
[36m@@ -0,0 +1,60 @@[m
[32m+[m[32mimport useUserStore from '@/store/modules/user'[m
[32m+[m
[32m+[m[32mfunction authPermission(permission) {[m
[32m+[m[32m  const all_permission = "*:*:*";[m
[32m+[m[32m  const permissions = useUserStore().permissions[m
[32m+[m[32m  if (permission && permission.length > 0) {[m
[32m+[m[32m    return permissions.some(v => {[m
[32m+[m[32m      return all_permission === v || v === permission[m
[32m+[m[32m    })[m
[32m+[m[32m  } else {[m
[32m+[m[32m    return false[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction authRole(role) {[m
[32m+[m[32m  const super_admin = "admin";[m
[32m+[m[32m  const roles = useUserStore().roles[m
[32m+[m[32m  if (role && role.length > 0) {[m
[32m+[m[32m    return roles.some(v => {[m
[32m+[m[32m      return super_admin === v || v === role[m
[32m+[m[32m    })[m
[32m+[m[32m  } else {[m
[32m+[m[32m    return false[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport default {[m
[32m+[m[32m  // éªŒè¯ç”¨æˆ·æ˜¯å¦å…·å¤‡æŸæƒé™[m
[32m+[m[32m  hasPermi(permission) {[m
[32m+[m[32m    return authPermission(permission);[m
[32m+[m[32m  },[m
[32m+[m[32m  // éªŒè¯ç”¨æˆ·æ˜¯å¦å«æœ‰æŒ‡å®šæƒé™ï¼Œåªéœ€åŒ…å«å…¶ä¸­ä¸€ä¸ª[m
[32m+[m[32m  hasPermiOr(permissions) {[m
[32m+[m[32m    return permissions.some(item => {[m
[32m+[m[32m      return authPermission(item)[m
[32m+[m[32m    })[m
[32m+[m[32m  },[m
[32m+[m[32m  // éªŒè¯ç”¨æˆ·æ˜¯å¦å«æœ‰æŒ‡å®šæƒé™ï¼Œå¿…é¡»å…¨éƒ¨æ‹¥æœ‰[m
[32m+[m[32m  hasPermiAnd(permissions) {[m
[32m+[m[32m    return permissions.every(item => {[m
[32m+[m[32m      return authPermission(item)[m
[32m+[m[32m    })[m
[32m+[m[32m  },[m
[32m+[m[32m  // éªŒè¯ç”¨æˆ·æ˜¯å¦å…·å¤‡æŸè§’è‰²[m
[32m+[m[32m  hasRole(role) {[m
[32m+[m[32m    return authRole(role);[m
[32m+[m[32m  },[m
[32m+[m[32m  // éªŒè¯ç”¨æˆ·æ˜¯å¦å«æœ‰æŒ‡å®šè§’è‰²ï¼Œåªéœ€åŒ…å«å…¶ä¸­ä¸€ä¸ª[m
[32m+[m[32m  hasRoleOr(roles) {[m
[32m+[m[32m    return roles.some(item => {[m
[32m+[m[32m      return authRole(item)[m
[32m+[m[32m    })[m
[32m+[m[32m  },[m
[32m+[m[32m  // éªŒè¯ç”¨æˆ·æ˜¯å¦å«æœ‰æŒ‡å®šè§’è‰²ï¼Œå¿…é¡»å…¨éƒ¨æ‹¥æœ‰[m
[32m+[m[32m  hasRoleAnd(roles) {[m
[32m+[m[32m    return roles.every(item => {[m
[32m+[m[32m      return authRole(item)[m
[32m+[m[32m    })[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[1mdiff --git a/src/plugins/cache.js b/src/plugins/cache.js[m
[1mnew file mode 100644[m
[1mindex 00000000..6b5c00b9[m
[1m--- /dev/null[m
[1m+++ b/src/plugins/cache.js[m
[36m@@ -0,0 +1,77 @@[m
[32m+[m[32mconst sessionCache = {[m
[32m+[m[32m  set (key, value) {[m
[32m+[m[32m    if (!sessionStorage) {[m
[32m+[m[32m      return[m
[32m+[m[32m    }[m
[32m+[m[32m    if (key != null && value != null) {[m
[32m+[m[32m      sessionStorage.setItem(key, value)[m
[32m+[m[32m    }[m
[32m+[m[32m  },[m
[32m+[m[32m  get (key) {[m
[32m+[m[32m    if (!sessionStorage) {[m
[32m+[m[32m      return null[m
[32m+[m[32m    }[m
[32m+[m[32m    if (key == null) {[m
[32m+[m[32m      return null[m
[32m+[m[32m    }[m
[32m+[m[32m    return sessionStorage.getItem(key)[m
[32m+[m[32m  },[m
[32m+[m[32m  setJSON (key, jsonValue) {[m
[32m+[m[32m    if (jsonValue != null) {[m
[32m+[m[32m      this.set(key, JSON.stringify(jsonValue))[m
[32m+[m[32m    }[m
[32m+[m[32m  },[m
[32m+[m[32m  getJSON (key) {[m
[32m+[m[32m    const value = this.get(key)[m
[32m+[m[32m    if (value != null) {[m
[32m+[m[32m      return JSON.parse(value)[m
[32m+[m[32m    }[m
[32m+[m[32m  },[m
[32m+[m[32m  remove (key) {[m
[32m+[m[32m    sessionStorage.removeItem(key);[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32mconst localCache = {[m
[32m+[m[32m  set (key, value) {[m
[32m+[m[32m    if (!localStorage) {[m
[32m+[m[32m      return[m
[32m+[m[32m    }[m
[32m+[m[32m    if (key != null && value != null) {[m
[32m+[m[32m      localStorage.setItem(key, value)[m
[32m+[m[32m    }[m
[32m+[m[32m  },[m
[32m+[m[32m  get (key) {[m
[32m+[m[32m    if (!localStorage) {[m
[32m+[m[32m      return null[m
[32m+[m[32m    }[m
[32m+[m[32m    if (key == null) {[m
[32m+[m[32m      return null[m
[32m+[m[32m    }[m
[32m+[m[32m    return localStorage.getItem(key)[m
[32m+[m[32m  },[m
[32m+[m[32m  setJSON (key, jsonValue) {[m
[32m+[m[32m    if (jsonValue != null) {[m
[32m+[m[32m      this.set(key, JSON.stringify(jsonValue))[m
[32m+[m[32m    }[m
[32m+[m[32m  },[m
[32m+[m[32m  getJSON (key) {[m
[32m+[m[32m    const value = this.get(key)[m
[32m+[m[32m    if (value != null) {[m
[32m+[m[32m      return JSON.parse(value)[m
[32m+[m[32m    }[m
[32m+[m[32m  },[m
[32m+[m[32m  remove (key) {[m
[32m+[m[32m    localStorage.removeItem(key);[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport default {[m
[32m+[m[32m  /**[m
[32m+[m[32m   * ä¼šè¯çº§ç¼“å­˜[m
[32m+[m[32m   */[m
[32m+[m[32m  session: sessionCache,[m
[32m+[m[32m  /**[m
[32m+[m[32m   * æœ¬åœ°ç¼“å­˜[m
[32m+[m[32m   */[m
[32m+[m[32m  local: localCache[m
[32m+[m[32m}[m
[1mdiff --git a/src/plugins/download.js b/src/plugins/download.js[m
[1mnew file mode 100644[m
[1mindex 00000000..1a89efd5[m
[1m--- /dev/null[m
[1m+++ b/src/plugins/download.js[m
[36m@@ -0,0 +1,79 @@[m
[32m+[m[32mï»¿import axios from 'axios'[m
[32m+[m[32mimport { ElLoading, ElMessage } from 'element-plus'[m
[32m+[m[32mimport { saveAs } from 'file-saver'[m
[32m+[m[32mimport { getToken } from '@/utils/auth'[m
[32m+[m[32mimport errorCode from '@/utils/errorCode'[m
[32m+[m[32mimport { blobValidate } from '@/utils/ruoyi'[m
[32m+[m
[32m+[m[32mconst baseURL = import.meta.env.VITE_APP_BASE_API[m
[32m+[m[32mlet downloadLoadingInstance;[m
[32m+[m
[32m+[m[32mexport default {[m
[32m+[m[32m  name(name, isDelete = true) {[m
[32m+[m[32m    var url = baseURL + "/common/download?fileName=" + encodeURIComponent(name) + "&delete=" + isDelete[m
[32m+[m[32m    axios({[m
[32m+[m[32m      method: 'get',[m
[32m+[m[32m      url: url,[m
[32m+[m[32m      responseType: 'blob',[m
[32m+[m[32m      headers: { 'Authorization': 'Bearer ' + getToken() }[m
[32m+[m[32m    }).then((res) => {[m
[32m+[m[32m      const isBlob = blobValidate(res.data);[m
[32m+[m[32m      if (isBlob) {[m
[32m+[m[32m        const blob = new Blob([res.data])[m
[32m+[m[32m        this.saveAs(blob, decodeURIComponent(res.headers['download-filename']))[m
[32m+[m[32m      } else {[m
[32m+[m[32m        this.printErrMsg(res.data);[m
[32m+[m[32m      }[m
[32m+[m[32m    })[m
[32m+[m[32m  },[m
[32m+[m[32m  resource(resource) {[m
[32m+[m[32m    var url = baseURL + "/common/download/resource?resource=" + encodeURIComponent(resource);[m
[32m+[m[32m    axios({[m
[32m+[m[32m      method: 'get',[m
[32m+[m[32m      url: url,[m
[32m+[m[32m      responseType: 'blob',[m
[32m+[m[32m      headers: { 'Authorization': 'Bearer ' + getToken() }[m
[32m+[m[32m    }).then((res) => {[m
[32m+[m[32m      const isBlob = blobValidate(res.data);[m
[32m+[m[32m      if (isBlob) {[m
[32m+[m[32m        const blob = new Blob([res.data])[m
[32m+[m[32m        this.saveAs(blob, decodeURIComponent(res.headers['download-filename']))[m
[32m+[m[32m      } else {[m
[32m+[m[32m        this.printErrMsg(res.data);[m
[32m+[m[32m      }[m
[32m+[m[32m    })[m
[32m+[m[32m  },[m
[32m+[m[32m  zip(url, name) {[m
[32m+[m[32m    var url = baseURL + url[m
[32m+[m[32m    downloadLoadingInstance = ElLoading.service({ text: "æ­£åœ¨ä¸‹è½½æ•°æ®ï¼Œè¯·ç¨å€™", background: "rgba(0, 0, 0, 0.7)", })[m
[32m+[m[32m    axios({[m
[32m+[m[32m      method: 'get',[m
[32m+[m[32m      url: url,[m
[32m+[m[32m      responseType: 'blob',[m
[32m+[m[32m      headers: { 'Authorization': 'Bearer ' + getToken() }[m
[32m+[m[32m    }).then((res) => {[m
[32m+[m[32m      const isBlob = blobValidate(res.data);[m
[32m+[m[32m      if (isBlob) {[m
[32m+[m[32m        const blob = new Blob([res.data], { type: 'application/zip' })[m
[32m+[m[32m        this.saveAs(blob, name)[m
[32m+[m[32m      } else {[m
[32m+[m[32m        this.printErrMsg(res.data);[m
[32m+[m[32m      }[m
[32m+[m[32m      downloadLoadingInstance.close();[m
[32m+[m[32m    }).catch((r) => {[m
[32m+[m[32m      console.error(r)[m
[32m+[m[32m      ElMessage.error('ä¸‹è½½æ–‡ä»¶å‡ºç°é”™è¯¯ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ï¼')[m
[32m+[m[32m      downloadLoadingInstance.close();[m
[32m+[m[32m    })[m
[32m+[m[32m  },[m
[32m+[m[32m  saveAs(text, name, opts) {[m
[32m+[m[32m    saveAs(text, name, opts);[m
[32m+[m[32m  },[m
[32m+[m[32m  async printErrMsg(data) {[m
[32m+[m[32m    const resText = await data.text();[m
[32m+[m[32m    const rspObj = JSON.parse(resText);[m
[32m+[m[32m    const errMsg = errorCode[rspObj.code] || rspObj.msg || errorCode['default'][m
[32m+[m[32m    ElMessage.error(errMsg);[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[1mdiff --git a/src/plugins/index.js b/src/plugins/index.js[m
[1mnew file mode 100644[m
[1mindex 00000000..47d1b41f[m
[1m--- /dev/null[m
[1m+++ b/src/plugins/index.js[m
[36m@@ -0,0 +1,18 @@[m
[32m+[m[32mimport tab from './tab'[m
[32m+[m[32mimport auth from './auth'[m
[32m+[m[32mimport cache from './cache'[m
[32m+[m[32mimport modal from './modal'[m
[32m+[m[32mimport download from './download'[m
[32m+[m
[32m+[m[32mexport default function installPlugins(app){[m
[32m+[m[32m  // é¡µç­¾æ“ä½œ[m
[32m+[m[32m  app.config.globalProperties.$tab = tab[m
[32m+[m[32m  // è®¤è¯å¯¹è±¡[m
[32m+[m[32m  app.config.globalProperties.$auth = auth[m
[32m+[m[32m  // ç¼“å­˜å¯¹è±¡[m
[32m+[m[32m  app.config.globalProperties.$cache = cache[m
[32m+[m[32m  // æ¨¡æ€æ¡†å¯¹è±¡[m
[32m+[m[32m  app.config.globalProperties.$modal = modal[m
[32m+[m[32m  // ä¸‹è½½æ–‡ä»¶[m
[32m+[m[32m  app.config.globalProperties.$download = download[m
[32m+[m[32m}[m
[1mdiff --git a/src/plugins/modal.js b/src/plugins/modal.js[m
[1mnew file mode 100644[m
[1mindex 00000000..b59e14d6[m
[1m--- /dev/null[m
[1m+++ b/src/plugins/modal.js[m
[36m@@ -0,0 +1,82 @@[m
[32m+[m[32mimport { ElMessage, ElMessageBox, ElNotification, ElLoading } from 'element-plus'[m
[32m+[m
[32m+[m[32mlet loadingInstance;[m
[32m+[m
[32m+[m[32mexport default {[m
[32m+[m[32m  // æ¶ˆæ¯æç¤º[m
[32m+[m[32m  msg(content) {[m
[32m+[m[32m    ElMessage.info(content)[m
[32m+[m[32m  },[m
[32m+[m[32m  // é”™è¯¯æ¶ˆæ¯[m
[32m+[m[32m  msgError(content) {[m
[32m+[m[32m    ElMessage.error(content)[m
[32m+[m[32m  },[m
[32m+[m[32m  // æˆåŠŸæ¶ˆæ¯[m
[32m+[m[32m  msgSuccess(content) {[m
[32m+[m[32m    ElMessage.success(content)[m
[32m+[m[32m  },[m
[32m+[m[32m  // è­¦å‘Šæ¶ˆæ¯[m
[32m+[m[32m  msgWarning(content) {[m
[32m+[m[32m    ElMessage.warning(content)[m
[32m+[m[32m  },[m
[32m+[m[32m  // å¼¹å‡ºæç¤º[m
[32m+[m[32m  alert(content) {[m
[32m+[m[32m    ElMessageBox.alert(content, "ç³»ç»Ÿæç¤º")[m
[32m+[m[32m  },[m
[32m+[m[32m  // é”™è¯¯æç¤º[m
[32m+[m[32m  alertError(content) {[m
[32m+[m[32m    ElMessageBox.alert(content, "ç³»ç»Ÿæç¤º", { type: 'error' })[m
[32m+[m[32m  },[m
[32m+[m[32m  // æˆåŠŸæç¤º[m
[32m+[m[32m  alertSuccess(content) {[m
[32m+[m[32m    ElMessageBox.alert(content, "ç³»ç»Ÿæç¤º", { type: 'success' })[m
[32m+[m[32m  },[m
[32m+[m[32m  // è­¦å‘Šæç¤º[m
[32m+[m[32m  alertWarning(content) {[m
[32m+[m[32m    ElMessageBox.alert(content, "ç³»ç»Ÿæç¤º", { type: 'warning' })[m
[32m+[m[32m  },[m
[32m+[m[32m  // é€šçŸ¥æç¤º[m
[32m+[m[32m  notify(content) {[m
[32m+[m[32m    ElNotification.info(content)[m
[32m+[m[32m  },[m
[32m+[m[32m  // é”™è¯¯é€šçŸ¥[m
[32m+[m[32m  notifyError(content) {[m
[32m+[m[32m    ElNotification.error(content);[m
[32m+[m[32m  },[m
[32m+[m[32m  // æˆåŠŸé€šçŸ¥[m
[32m+[m[32m  notifySuccess(content) {[m
[32m+[m[32m    ElNotification.success(content)[m
[32m+[m[32m  },[m
[32m+[m[32m  // è­¦å‘Šé€šçŸ¥[m
[32m+[m[32m  notifyWarning(content) {[m
[32m+[m[32m    ElNotification.warning(content)[m
[32m+[m[32m  },[m
[32m+[m[32m  // ç¡®è®¤çª—ä½“[m
[32m+[m[32m  confirm(content) {[m
[32m+[m[32m    return ElMessageBox.confirm(content, "ç³»ç»Ÿæç¤º", {[m
[32m+[m[32m      confirmButtonText: 'ç¡®å®š',[m
[32m+[m[32m      cancelButtonText: 'å–æ¶ˆ',[m
[32m+[m[32m      type: "warning",[m
[32m+[m[32m    })[m
[32m+[m[32m  },[m
[32m+[m[32m  // æäº¤å†…å®¹[m
[32m+[m[32m  prompt(content) {[m
[32m+[m[32m    return ElMessageBox.prompt(content, "ç³»ç»Ÿæç¤º", {[m
[32m+[m[32m      confirmButtonText: 'ç¡®å®š',[m
[32m+[m[32m      cancelButtonText: 'å–æ¶ˆ',[m
[32m+[m[32m      type: "warning",[m
[32m+[m[32m    })[m
[32m+[m[32m  },[m
[32m+[m[32m  // æ‰“å¼€é®ç½©å±‚[m
[32m+[m[32m  loading(content) {[m
[32m+[m[32m    loadingInstance = ElLoading.service({[m
[32m+[m[32m      lock: true,[m
[32m+[m[32m      text: content,[m
[32m+[m[32m      background: "rgba(0, 0, 0, 0.7)",[m
[32m+[m[32m    })[m
[32m+[m[32m  },[m
[32m+[m[32m  // å…³é—­é®ç½©å±‚[m
[32m+[m[32m  closeLoading() {[m
[32m+[m[32m    loadingInstance.close();[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[1mdiff --git a/src/plugins/tab.js b/src/plugins/tab.js[m
[1mnew file mode 100644[m
[1mindex 00000000..7b51cf59[m
[1m--- /dev/null[m
[1m+++ b/src/plugins/tab.js[m
[36m@@ -0,0 +1,69 @@[m
[32m+[m[32mimport useTagsViewStore from '@/store/modules/tagsView'[m
[32m+[m[32mimport router from '@/router'[m
[32m+[m
[32m+[m[32mexport default {[m
[32m+[m[32m  // åˆ·æ–°å½“å‰tabé¡µç­¾[m
[32m+[m[32m  refreshPage(obj) {[m
[32m+[m[32m    const { path, query, matched } = router.currentRoute.value;[m
[32m+[m[32m    if (obj === undefined) {[m
[32m+[m[32m      matched.forEach((m) => {[m
[32m+[m[32m        if (m.components && m.components.default && m.components.default.name) {[m
[32m+[m[32m          if (!['Layout', 'ParentView'].includes(m.components.default.name)) {[m
[32m+[m[32m            obj = { name: m.components.default.name, path: path, query: query };[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
[32m+[m[32m      });[m
[32m+[m[32m    }[m
[32m+[m[32m    return useTagsViewStore().delCachedView(obj).then(() => {[m
[32m+[m[32m      const { path, query } = obj[m
[32m+[m[32m      router.replace({[m
[32m+[m[32m        path: '/redirect' + path,[m
[32m+[m[32m        query: query[m
[32m+[m[32m      })[m
[32m+[m[32m    })[m
[32m+[m[32m  },[m
[32m+[m[32m  // å…³é—­å½“å‰tabé¡µç­¾ï¼Œæ‰“å¼€æ–°é¡µç­¾[m
[32m+[m[32m  closeOpenPage(obj) {[m
[32m+[m[32m    useTagsViewStore().delView(router.currentRoute.value);[m
[32m+[m[32m    if (obj !== undefined) {[m
[32m+[m[32m      return router.push(obj);[m
[32m+[m[32m    }[m
[32m+[m[32m  },[m
[32m+[m[32m  // å…³é—­æŒ‡å®štabé¡µç­¾[m
[32m+[m[32m  closePage(obj) {[m
[32m+[m[32m    if (obj === undefined) {[m
[32m+[m[32m      return useTagsViewStore().delView(router.currentRoute.value).then(({ visitedViews }) => {[m
[32m+[m[32m        const latestView = visitedViews.slice(-1)[0][m
[32m+[m[32m        if (latestView) {[m
[32m+[m[32m          return router.push(latestView.fullPath)[m
[32m+[m[32m        }[m
[32m+[m[32m        return router.push('/');[m
[32m+[m[32m      });[m
[32m+[m[32m    }[m
[32m+[m[32m    return useTagsViewStore().delView(obj);[m
[32m+[m[32m  },[m
[32m+[m[32m  // å…³é—­æ‰€æœ‰tabé¡µç­¾[m
[32m+[m[32m  closeAllPage() {[m
[32m+[m[32m    return useTagsViewStore().delAllViews();[m
[32m+[m[32m  },[m
[32m+[m[32m  // å…³é—­å·¦ä¾§tabé¡µç­¾[m
[32m+[m[32m  closeLeftPage(obj) {[m
[32m+[m[32m    return useTagsViewStore().delLeftTags(obj || router.currentRoute.value);[m
[32m+[m[32m  },[m
[32m+[m[32m  // å…³é—­å³ä¾§tabé¡µç­¾[m
[32m+[m[32m  closeRightPage(obj) {[m
[32m+[m[32m    return useTagsViewStore().delRightTags(obj || router.currentRoute.value);[m
[32m+[m[32m  },[m
[32m+[m[32m  // å…³é—­å…¶ä»–tabé¡µç­¾[m
[32m+[m[32m  closeOtherPage(obj) {[m
[32m+[m[32m    return useTagsViewStore().delOthersViews(obj || router.currentRoute.value);[m
[32m+[m[32m  },[m
[32m+[m[32m  // æ‰“å¼€tabé¡µç­¾[m
[32m+[m[32m  openPage(url) {[m
[32m+[m[32m    return router.push(url);[m
[32m+[m[32m  },[m
[32m+[m[32m  // ä¿®æ”¹tabé¡µç­¾[m
[32m+[m[32m  updatePage(obj) {[m
[32m+[m[32m    return useTagsViewStore().updateVisitedView(obj);[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[1mdiff --git a/src/router/index.js b/src/router/index.js[m
[1mnew file mode 100644[m
[1mindex 00000000..c25994a2[m
[1m--- /dev/null[m
[1m+++ b/src/router/index.js[m
[36m@@ -0,0 +1,316 @@[m
[32m+[m[32mimport { createWebHistory, createRouter } from 'vue-router'[m
[32m+[m[32m/* Layout */[m
[32m+[m[32mimport Layout from '@/layout'[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Note: è·¯ç”±é…ç½®é¡¹[m
[32m+[m[32m *[m
[32m+[m[32m * hidden: true                     // å½“è®¾ç½® true çš„æ—¶å€™è¯¥è·¯ç”±ä¸ä¼šå†ä¾§è¾¹æ å‡ºç°[m
[32m+[m[32m * alwaysShow: true                 // å¼ºåˆ¶æ˜¾ç¤ºæ ¹è·¯ç”±[m
[32m+[m[32m * redirect: noRedirect             // é¢åŒ…å±‘ä¸å¯ç‚¹å‡»[m
[32m+[m[32m * name:'router-name'               // è·¯ç”±åç§°ï¼ˆå¿…é¡»å¡«å†™ï¼‰[m
[32m+[m[32m * meta : {[m
[32m+[m[32m    noCache: true                   // ä¸ç¼“å­˜[m
[32m+[m[32m    title: 'title'                  // ä¾§è¾¹æ å’Œé¢åŒ…å±‘åç§°[m
[32m+[m[32m    icon: 'svg-name'                // å›¾æ ‡è·¯å¾„[m
[32m+[m[32m    breadcrumb: false               // ä¸åœ¨é¢åŒ…å±‘æ˜¾ç¤º[m
[32m+[m[32m    activeMenu: '/system/user'      // é«˜äº®å¯¹åº”ä¾§è¾¹æ [m
[32m+[m[32m  }[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m// å…¬å…±è·¯ç”±[m
[32m+[m[32mexport const constantRoutes = [[m
[32m+[m[32m  {[m
[32m+[m[32m    path: '/redirect',[m
[32m+[m[32m    component: Layout,[m
[32m+[m[32m    hidden: true,[m
[32m+[m[32m    children: [[m
[32m+[m[32m      {[m
[32m+[m[32m        path: '/redirect/:path(.*)',[m
[32m+[m[32m        component: () => import('@/views/redirect/index.vue')[m
[32m+[m[32m      }[m
[32m+[m[32m    ][m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    path: '/login',[m
[32m+[m[32m    component: () => import('@/views/login'),[m
[32m+[m[32m    hidden: true[m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    path: '/register',[m
[32m+[m[32m    component: () => import('@/views/register'),[m
[32m+[m[32m    hidden: true[m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    path: '/401',[m
[32m+[m[32m    component: () => import('@/views/error/401'),[m
[32m+[m[32m    hidden: true[m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    path: '',[m
[32m+[m[32m    component: Layout,[m
[32m+[m[32m    redirect: '/index',[m
[32m+[m[32m    children: [[m
[32m+[m[32m      {[m
[32m+[m[32m        path: '/index',[m
[32m+[m[32m        component: () => import('@/views/index'),[m
[32m+[m[32m        name: 'Index',[m
[32m+[m[32m        meta: {[m
[32m+[m[32m          title: 'é¦–é¡µ',[m
[32m+[m[32m          icon: 'dashboard',[m
[32m+[m[32m          affix: true[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m[32m    ][m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    path: '/computer-market', // è®¿é—®è·¯å¾„[m
[32m+[m[32m    name: 'ComputerMarket',[m
[32m+[m[32m    component: () => import('@/views/computerMarket/mallHome.vue'), // ç›´æ¥æŒ‡å‘å½“å‰ç»„ä»¶[m
[32m+[m[32m    hidden: true, // ä¸åœ¨è‹¥ä¾ä¾§è¾¹æ æ˜¾ç¤º[m
[32m+[m[32m    meta: {[m
[32m+[m[32m      title: 'ç”µè„‘ç§Ÿå”®ä¸ç¡¬ä»¶æ€§èƒ½æ™ºèƒ½è¯„ä¼°å¹³å°', // æµè§ˆå™¨æ ‡ç­¾é¡µæ ‡é¢˜[m
[32m+[m[32m      noCache: true[m
[32m+[m[32m    }[m
[32m+[m[32m  },[m
[32m+[m[32m  // ä¿®æ”¹è´­ç‰©è½¦è·¯ç”±é…ç½®[m
[32m+[m[32m{[m
[32m+[m[32m  path: '/computer-market/shopping-cart',[m
[32m+[m[32m  name: 'ShoppingCart',[m
[32m+[m[32mcomponent: () => import('@/views/computerMarket/cart/index.vue'),[m[41m [m
[32m+[m[32m  hidden: true,[m
[32m+[m[32m  meta: {[m
[32m+[m[32m    title: 'è´­ç‰©è½¦',[m
[32m+[m[32m    noCache: true[m
[32m+[m[32m  }[m
[32m+[m[32m},[m
[32m+[m[32m // æ–°å¢ï¼šç§Ÿèµé¡µé¢è·¯ç”±ï¼ˆrental.vueï¼‰[m
[32m+[m[32m  {[m
[32m+[m[32m    path: '/computer-market/rental',[m
[32m+[m[32m    name: 'ComputerRental',[m
[32m+[m[32m    component: () => import('@/views/computerMarket/shop/rental.vue'), // æ³¨æ„åŒ¹é…rental.vueçš„å®é™…è·¯å¾„[m
[32m+[m[32m    hidden: true,[m
[32m+[m[32m    meta: {[m
[32m+[m[32m      title: 'ç”µè„‘ç§ŸèµæœåŠ¡',[m
[32m+[m[32m      noCache: true[m
[32m+[m[32m    }[m
[32m+[m[32m  },[m
[32m+[m[32m// æ‰¾åˆ°å‡ºå”®é¡µé¢çš„è·¯ç”±é…ç½®ï¼Œä¿®æ”¹ component è·¯å¾„[m
[32m+[m[32m{[m
[32m+[m[32m  path: '/computer-market/sale',[m
[32m+[m[32m  name: 'ComputerSale',[m
[32m+[m[32m  // ä¿®æ­£è·¯å¾„ï¼šæ·»åŠ  shop/ å±‚çº§ï¼ŒåŒ¹é…å®é™…æ–‡ä»¶ä½ç½®[m
[32m+[m[32m  component: () => import('@/views/computerMarket/shop/sale.vue'),[m[41m [m
[32m+[m[32m  hidden: true,[m
[32m+[m[32m  meta: {[m
[32m+[m[32m    title: 'ç”µè„‘å‡ºå”®æœåŠ¡',[m
[32m+[m[32m    noCache: true[m
[32m+[m[32m  }[m
[32m+[m[32m},[m
[32m+[m[32m {[m
[32m+[m[32m  path: '/computer-market/Build',[m
[32m+[m[32m  name: 'ComputerBuild',[m
[32m+[m[32m  // ä¿®æ­£è·¯å¾„ï¼šæ·»åŠ  shop/ å±‚çº§ï¼ŒåŒ¹é…å®é™…æ–‡ä»¶ä½ç½®[m
[32m+[m[32m  component: () => import('@/views/computerMarket/shop/Build.vue'),[m[41m [m
[32m+[m[32m  hidden: true,[m
[32m+[m[32m  meta: {[m
[32m+[m[32m    title: 'ç”µè„‘è£…æœºæœåŠ¡',[m
[32m+[m[32m    noCache: true[m
[32m+[m[32m  }[m
[32m+[m[32m},[m
[32m+[m[32m{[m
[32m+[m[32m  path: '/user',[m
[32m+[m[32m  component: Layout,[m
[32m+[m[32m  hidden: true,[m
[32m+[m[32m  redirect: 'noredirect',[m
[32m+[m[32m  children: [[m
[32m+[m[32m    {[m
[32m+[m[32m      path: 'profile',[m
[32m+[m[32m      component: () => import('@/views/system/user/profile/index'),[m
[32m+[m[32m      name: 'Profile',[m
[32m+[m[32m      meta: { title: 'ä¸ªäººä¸­å¿ƒ', icon: 'user' }[m
[32m+[m[32m    }[m
[32m+[m[32m  ][m
[32m+[m[32m},[m
[32m+[m[32m// Cç«¯portalè·¯ç”±é…ç½®[m
[32m+[m[32m{[m
[32m+[m[32m  path: '/portal/login',[m
[32m+[m[32m  component: () => import('@/views/portal/login.vue'),[m
[32m+[m[32m  name: 'PortalLogin',[m
[32m+[m[32m  hidden: true,[m
[32m+[m[32m  meta: {[m
[32m+[m[32m    title: 'Cç«¯ç™»å½•',[m
[32m+[m[32m    noAuth: true,[m
[32m+[m[32m    noCache: true[m
[32m+[m[32m  }[m
[32m+[m[32m},[m
[32m+[m[32m{[m
[32m+[m[32m  path: '/portal/register',[m
[32m+[m[32m  component: () => import('@/views/portal/register.vue'),[m
[32m+[m[32m  name: 'PortalRegister',[m
[32m+[m[32m  hidden: true,[m
[32m+[m[32m  meta: {[m
[32m+[m[32m    title: 'Cç«¯æ³¨å†Œ',[m
[32m+[m[32m    noAuth: true,[m
[32m+[m[32m    noCache: true[m
[32m+[m[32m  }[m
[32m+[m[32m},[m
[32m+[m[32m{[m
[32m+[m[32m  path: '/portal/user/profile',[m
[32m+[m[32m  component: () => import('@/views/portal/user/profile.vue'),[m
[32m+[m[32m  name: 'PortalProfile',[m
[32m+[m[32m  hidden: true,[m
[32m+[m[32m  meta: {[m
[32m+[m[32m    title: 'ä¸ªäººä¸­å¿ƒ',[m
[32m+[m[32m    noCache: true[m
[32m+[m[32m  }[m
[32m+[m[32m},[m
[32m+[m[32m// åœ°å€ç®¡ç†é¡µé¢è·¯ç”±[m
[32m+[m[32m{[m
[32m+[m[32m  path: '/portal/user/address',[m
[32m+[m[32m  name: 'UserAddress',[m
[32m+[m[32m  component: () => import('@/views/portal/user/address.vue'),[m
[32m+[m[32m  hidden: true,[m
[32m+[m[32m  meta: {[m
[32m+[m[32m    title: 'åœ°å€ç®¡ç†',[m
[32m+[m[32m    noCache: true[m
[32m+[m[32m  }[m
[32m+[m[32m},[m
[32m+[m[32m{[m
[32m+[m[32m  path: '/computer-market/product-detail/:id',[m
[32m+[m[32m  name: 'ProductDetail',[m
[32m+[m[32m  component: () => import('@/views/computerMarket/shop/detail.vue'),[m
[32m+[m[32m  hidden: true,[m
[32m+[m[32m  meta: {[m
[32m+[m[32m    title: 'å•†å“è¯¦æƒ…',[m
[32m+[m[32m    noCache: true[m
[32m+[m[32m  }[m
[32m+[m[32m},[m
[32m+[m[32m// è®¢å•ç»“ç®—é¡µé¢è·¯ç”±[m
[32m+[m[32m{[m
[32m+[m[32m  path: '/computer-market/checkout',[m
[32m+[m[32m  name: 'Checkout',[m
[32m+[m[32m  component: () => import('@/views/portal/trade/checkout.vue'),[m
[32m+[m[32m  hidden: true,[m
[32m+[m[32m  meta: {[m
[32m+[m[32m    title: 'è®¢å•ç»“ç®—',[m
[32m+[m[32m    noCache: true[m
[32m+[m[32m  }[m
[32m+[m[32m},[m
[32m+[m[32m// æ”¯ä»˜é¡µé¢è·¯ç”±[m
[32m+[m[32m{[m
[32m+[m[32m  path: '/portal/trade/pay',[m
[32m+[m[32m  name: 'Pay',[m
[32m+[m[32m  component: () => import('@/views/portal/trade/pay.vue'),[m
[32m+[m[32m  hidden: true,[m
[32m+[m[32m  meta: {[m
[32m+[m[32m    title: 'è®¢å•æ”¯ä»˜',[m
[32m+[m[32m    noCache: true[m
[32m+[m[32m  }[m
[32m+[m[32m},[m
[32m+[m[32m// è®¢å•åˆ—è¡¨é¡µé¢è·¯ç”±[m
[32m+[m[32m{[m
[32m+[m[32m  path: '/portal/user/order',[m
[32m+[m[32m  name: 'UserOrder',[m
[32m+[m[32m  component: () => import('@/views/portal/user/order.vue'),[m
[32m+[m[32m  hidden: true,[m
[32m+[m[32m  meta: {[m
[32m+[m[32m    title: 'æˆ‘çš„è®¢å•',[m
[32m+[m[32m    noCache: true[m
[32m+[m[32m  }[m
[32m+[m[32m},[m
[32m+[m[32m  // 404é¡µé¢å¿…é¡»æ”¾åœ¨æœ€å[m
[32m+[m[32m  {[m
[32m+[m[32m    path: "/:pathMatch(.*)*",[m
[32m+[m[32m    component: () => import('@/views/error/404'),[m
[32m+[m[32m    hidden: true[m
[32m+[m[32m  }[m
[32m+[m[32m][m
[32m+[m
[32m+[m[32m// åŠ¨æ€è·¯ç”±ï¼ˆåŸºäºæƒé™åŠ è½½ï¼‰[m
[32m+[m[32mexport const dynamicRoutes = [[m
[32m+[m[32m  {[m
[32m+[m[32m    path: '/system/user-auth',[m
[32m+[m[32m    component: Layout,[m
[32m+[m[32m    hidden: true,[m
[32m+[m[32m    permissions: ['system:user:edit'],[m
[32m+[m[32m    children: [[m
[32m+[m[32m      {[m
[32m+[m[32m        path: 'role/:userId(\\d+)',[m
[32m+[m[32m        component: () => import('@/views/system/user/authRole'),[m
[32m+[m[32m        name: 'AuthRole',[m
[32m+[m[32m        meta: { title: 'åˆ†é…è§’è‰²', activeMenu: '/system/user' }[m
[32m+[m[32m      }[m
[32m+[m[32m    ][m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    path: '/system/role-auth',[m
[32m+[m[32m    component: Layout,[m
[32m+[m[32m    hidden: true,[m
[32m+[m[32m    permissions: ['system:role:edit'],[m
[32m+[m[32m    children: [[m
[32m+[m[32m      {[m
[32m+[m[32m        path: 'user/:roleId(\\d+)',[m
[32m+[m[32m        component: () => import('@/views/system/role/authUser'),[m
[32m+[m[32m        name: 'AuthUser',[m
[32m+[m[32m        meta: { title: 'åˆ†é…ç”¨æˆ·', activeMenu: '/system/role' }[m
[32m+[m[32m      }[m
[32m+[m[32m    ][m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    path: '/system/dict-data',[m
[32m+[m[32m    component: Layout,[m
[32m+[m[32m    hidden: true,[m
[32m+[m[32m    permissions: ['system:dict:list'],[m
[32m+[m[32m    children: [[m
[32m+[m[32m      {[m
[32m+[m[32m        path: 'index/:dictId(\\d+)',[m
[32m+[m[32m        component: () => import('@/views/system/dict/data'),[m
[32m+[m[32m        name: 'Data',[m
[32m+[m[32m        meta: { title: 'å­—å…¸æ•°æ®', activeMenu: '/system/dict' }[m
[32m+[m[32m      }[m
[32m+[m[32m    ][m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    path: '/monitor/job-log',[m
[32m+[m[32m    component: Layout,[m
[32m+[m[32m    hidden: true,[m
[32m+[m[32m    permissions: ['monitor:job:list'],[m
[32m+[m[32m    children: [[m
[32m+[m[32m      {[m
[32m+[m[32m        path: 'index/:jobId(\\d+)',[m
[32m+[m[32m        component: () => import('@/views/monitor/job/log'),[m
[32m+[m[32m        name: 'JobLog',[m
[32m+[m[32m        meta: { title: 'è°ƒåº¦æ—¥å¿—', activeMenu: '/monitor/job' }[m
[32m+[m[32m      }[m
[32m+[m[32m    ][m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    path: '/tool/gen-edit',[m
[32m+[m[32m    component: Layout,[m
[32m+[m[32m    hidden: true,[m
[32m+[m[32m    permissions: ['tool:gen:edit'],[m
[32m+[m[32m    children: [[m
[32m+[m[32m      {[m
[32m+[m[32m        path: 'index/:tableId(\\d+)',[m
[32m+[m[32m        component: () => import('@/views/tool/gen/editTable'),[m
[32m+[m[32m        name: 'GenEdit',[m
[32m+[m[32m        meta: { title: 'ä¿®æ”¹ç”Ÿæˆé…ç½®', activeMenu: '/tool/gen' }[m
[32m+[m[32m      }[m
[32m+[m[32m    ][m
[32m+[m[32m  }[m
[32m+[m[32m][m
[32m+[m
[32m+[m[32mconst router = createRouter({[m
[32m+[m[32m  history: createWebHistory(),[m
[32m+[m[32m  routes: constantRoutes,[m
[32m+[m[32m  scrollBehavior(to, from, savedPosition) {[m
[32m+[m[32m    if (savedPosition) {[m
[32m+[m[32m      return savedPosition[m
[32m+[m[32m    } else {[m
[32m+[m[32m      return { top: 0 }[m
[32m+[m[32m    }[m
[32m+[m[32m  },[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mexport default router;[m
\ No newline at end of file[m
[1mdiff --git a/src/settings.js b/src/settings.js[m
[1mnew file mode 100644[m
[1mindex 00000000..08a01082[m
[1m--- /dev/null[m
[1m+++ b/src/settings.js[m
[36m@@ -0,0 +1,47 @@[m
[32m+[m[32mexport default {[m
[32m+[m[32m  /**[m
[32m+[m[32m   * ç½‘é¡µæ ‡é¢˜[m
[32m+[m[32m   */[m
[32m+[m[32m  title: import.meta.env.VITE_APP_TITLE,[m
[32m+[m[32m  /**[m
[32m+[m[32m   * ä¾§è¾¹æ ä¸»é¢˜ æ·±è‰²ä¸»é¢˜theme-darkï¼Œæµ…è‰²ä¸»é¢˜theme-light[m
[32m+[m[32m   */[m
[32m+[m[32m  sideTheme: 'theme-dark',[m
[32m+[m[32m  /**[m
[32m+[m[32m   * æ˜¯å¦ç³»ç»Ÿå¸ƒå±€é…ç½®[m
[32m+[m[32m   */[m
[32m+[m[32m  showSettings: true,[m
[32m+[m
[32m+[m[32m  /**[m
[32m+[m[32m   * æ˜¯å¦æ˜¾ç¤ºé¡¶éƒ¨å¯¼èˆª[m
[32m+[m[32m   */[m
[32m+[m[32m  topNav: false,[m
[32m+[m
[32m+[m[32m  /**[m
[32m+[m[32m   * æ˜¯å¦æ˜¾ç¤º tagsView[m
[32m+[m[32m   */[m
[32m+[m[32m  tagsView: true,[m
[32m+[m
[32m+[m[32m  /**[m
[32m+[m[32m   * æ˜¯å¦å›ºå®šå¤´éƒ¨[m
[32m+[m[32m   */[m
[32m+[m[32m  fixedHeader: false,[m
[32m+[m
[32m+[m[32m  /**[m
[32m+[m[32m   * æ˜¯å¦æ˜¾ç¤ºlogo[m
[32m+[m[32m   */[m
[32m+[m[32m  sidebarLogo: true,[m
[32m+[m
[32m+[m[32m  /**[m
[32m+[m[32m   * æ˜¯å¦æ˜¾ç¤ºåŠ¨æ€æ ‡é¢˜[m
[32m+[m[32m   */[m
[32m+[m[32m  dynamicTitle: false,[m
[32m+[m
[32m+[m[32m  /**[m
[32m+[m[32m   * @type {string | array} 'production' | ['production', 'development'][m
[32m+[m[32m   * @description Need show err logs component.[m
[32m+[m[32m   * The default is only used in the production env[m
[32m+[m[32m   * If you want to also use it in dev, you can pass ['production', 'development'][m
[32m+[m[32m   */[m
[32m+[m[32m  errorLog: 'production'[m
[32m+[m[32m}[m
[1mdiff --git a/src/store/index.js b/src/store/index.js[m
[1mnew file mode 100644[m
[1mindex 00000000..f10f3895[m
[1m--- /dev/null[m
[1m+++ b/src/store/index.js[m
[36m@@ -0,0 +1,3 @@[m
[32m+[m[32mconst store = createPinia()[m
[32m+[m
[32m+[m[32mexport default store[m
\ No newline at end of file[m
[1mdiff --git a/src/store/modules/app.js b/src/store/modules/app.js[m
[1mnew file mode 100644[m
[1mindex 00000000..0b571596[m
[1m--- /dev/null[m
[1m+++ b/src/store/modules/app.js[m
[36m@@ -0,0 +1,46 @@[m
[32m+[m[32mimport Cookies from 'js-cookie'[m
[32m+[m
[32m+[m[32mconst useAppStore = defineStore([m
[32m+[m[32m  'app',[m
[32m+[m[32m  {[m
[32m+[m[32m    state: () => ({[m
[32m+[m[32m      sidebar: {[m
[32m+[m[32m        opened: Cookies.get('sidebarStatus') ? !!+Cookies.get('sidebarStatus') : true,[m
[32m+[m[32m        withoutAnimation: false,[m
[32m+[m[32m        hide: false[m
[32m+[m[32m      },[m
[32m+[m[32m      device: 'desktop',[m
[32m+[m[32m      size: Cookies.get('size') || 'default'[m
[32m+[m[32m    }),[m
[32m+[m[32m    actions: {[m
[32m+[m[32m      toggleSideBar(withoutAnimation) {[m
[32m+[m[32m        if (this.sidebar.hide) {[m
[32m+[m[32m          return false;[m
[32m+[m[32m        }[m
[32m+[m[32m        this.sidebar.opened = !this.sidebar.opened[m
[32m+[m[32m        this.sidebar.withoutAnimation = withoutAnimation[m
[32m+[m[32m        if (this.sidebar.opened) {[m
[32m+[m[32m          Cookies.set('sidebarStatus', 1)[m
[32m+[m[32m        } else {[m
[32m+[m[32m          Cookies.set('sidebarStatus', 0)[m
[32m+[m[32m        }[m
[32m+[m[32m      },[m
[32m+[m[32m      closeSideBar({ withoutAnimation }) {[m
[32m+[m[32m        Cookies.set('sidebarStatus', 0)[m
[32m+[m[32m        this.sidebar.opened = false[m
[32m+[m[32m        this.sidebar.withoutAnimation = withoutAnimation[m
[32m+[m[32m      },[m
[32m+[m[32m      toggleDevice(device) {[m
[32m+[m[32m        this.device = device[m
[32m+[m[32m      },[m
[32m+[m[32m      setSize(size) {[m
[32m+[m[32m        this.size = size;[m
[32m+[m[32m        Cookies.set('size', size)[m
[32m+[m[32m      },[m
[32m+[m[32m      toggleSideBarHide(status) {[m
[32m+[m[32m        this.sidebar.hide = status[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m
[32m+[m[32mexport default useAppStore[m
[1mdiff --git a/src/store/modules/dict.js b/src/store/modules/dict.js[m
[1mnew file mode 100644[m
[1mindex 00000000..27fc3086[m
[1m--- /dev/null[m
[1m+++ b/src/store/modules/dict.js[m
[36m@@ -0,0 +1,57 @@[m
[32m+[m[32mconst useDictStore = defineStore([m
[32m+[m[32m  'dict',[m
[32m+[m[32m  {[m
[32m+[m[32m    state: () => ({[m
[32m+[m[32m      dict: new Array()[m
[32m+[m[32m    }),[m
[32m+[m[32m    actions: {[m
[32m+[m[32m      // è·å–å­—å…¸[m
[32m+[m[32m      getDict(_key) {[m
[32m+[m[32m        if (_key == null && _key == "") {[m
[32m+[m[32m          return null;[m
[32m+[m[32m        }[m
[32m+[m[32m        try {[m
[32m+[m[32m          for (let i = 0; i < this.dict.length; i++) {[m
[32m+[m[32m            if (this.dict[i].key == _key) {[m
[32m+[m[32m              return this.dict[i].value;[m
[32m+[m[32m            }[m
[32m+[m[32m          }[m
[32m+[m[32m        } catch (e) {[m
[32m+[m[32m          return null;[m
[32m+[m[32m        }[m
[32m+[m[32m      },[m
[32m+[m[32m      // è®¾ç½®å­—å…¸[m
[32m+[m[32m      setDict(_key, value) {[m
[32m+[m[32m        if (_key !== null && _key !== "") {[m
[32m+[m[32m          this.dict.push({[m
[32m+[m[32m            key: _key,[m
[32m+[m[32m            value: value[m
[32m+[m[32m          });[m
[32m+[m[32m        }[m
[32m+[m[32m      },[m
[32m+[m[32m      // åˆ é™¤å­—å…¸[m
[32m+[m[32m      removeDict(_key) {[m
[32m+[m[32m        var bln = false;[m
[32m+[m[32m        try {[m
[32m+[m[32m          for (let i = 0; i < this.dict.length; i++) {[m
[32m+[m[32m            if (this.dict[i].key == _key) {[m
[32m+[m[32m              this.dict.splice(i, 1);[m
[32m+[m[32m              return true;[m
[32m+[m[32m            }[m
[32m+[m[32m          }[m
[32m+[m[32m        } catch (e) {[m
[32m+[m[32m          bln = false;[m
[32m+[m[32m        }[m
[32m+[m[32m        return bln;[m
[32m+[m[32m      },[m
[32m+[m[32m      // æ¸…ç©ºå­—å…¸[m
[32m+[m[32m      cleanDict() {[m
[32m+[m[32m        this.dict = new Array();[m
[32m+[m[32m      },[m
[32m+[m[32m      // åˆå§‹å­—å…¸[m
[32m+[m[32m      initDict() {[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m
[32m+[m[32mexport default useDictStore[m
[1mdiff --git a/src/store/modules/permission.js b/src/store/modules/permission.js[m
[1mnew file mode 100644[m
[1mindex 00000000..958fe636[m
[1m--- /dev/null[m
[1m+++ b/src/store/modules/permission.js[m
[36m@@ -0,0 +1,142 @@[m
[32m+[m[32mimport auth from '@/plugins/auth'[m
[32m+[m[32mimport router, { constantRoutes, dynamicRoutes } from '@/router'[m
[32m+[m[32mimport { getRouters } from '@/api/menu'[m
[32m+[m[32mimport Layout from '@/layout/index'[m
[32m+[m[32mimport ParentView from '@/components/ParentView'[m
[32m+[m[32mimport InnerLink from '@/layout/components/InnerLink'[m
[32m+[m
[32m+[m[32m// åŒ¹é…viewsé‡Œé¢æ‰€æœ‰çš„.vueæ–‡ä»¶[m
[32m+[m[32mconst modules = import.meta.glob('./../../views/**/*.vue')[m
[32m+[m
[32m+[m[32mconst usePermissionStore = defineStore([m
[32m+[m[32m  'permission',[m
[32m+[m[32m  {[m
[32m+[m[32m    state: () => ({[m
[32m+[m[32m      routes: [],[m
[32m+[m[32m      addRoutes: [],[m
[32m+[m[32m      defaultRoutes: [],[m
[32m+[m[32m      topbarRouters: [],[m
[32m+[m[32m      sidebarRouters: [][m
[32m+[m[32m    }),[m
[32m+[m[32m    actions: {[m
[32m+[m[32m      setRoutes(routes) {[m
[32m+[m[32m        this.addRoutes = routes[m
[32m+[m[32m        this.routes = constantRoutes.concat(routes)[m
[32m+[m[32m      },[m
[32m+[m[32m      setDefaultRoutes(routes) {[m
[32m+[m[32m        this.defaultRoutes = constantRoutes.concat(routes)[m
[32m+[m[32m      },[m
[32m+[m[32m      setTopbarRoutes(routes) {[m
[32m+[m[32m        this.topbarRouters = routes[m
[32m+[m[32m      },[m
[32m+[m[32m      setSidebarRouters(routes) {[m
[32m+[m[32m        this.sidebarRouters = routes[m
[32m+[m[32m      },[m
[32m+[m[32m      generateRoutes(roles) {[m
[32m+[m[32m        return new Promise(resolve => {[m
[32m+[m[32m          // å‘åç«¯è¯·æ±‚è·¯ç”±æ•°æ®[m
[32m+[m[32m          getRouters().then(res => {[m
[32m+[m[32m            const sdata = JSON.parse(JSON.stringify(res.data))[m
[32m+[m[32m            const rdata = JSON.parse(JSON.stringify(res.data))[m
[32m+[m[32m            const defaultData = JSON.parse(JSON.stringify(res.data))[m
[32m+[m[32m            const sidebarRoutes = filterAsyncRouter(sdata)[m
[32m+[m[32m            const rewriteRoutes = filterAsyncRouter(rdata, false, true)[m
[32m+[m[32m            const defaultRoutes = filterAsyncRouter(defaultData)[m
[32m+[m[32m            const asyncRoutes = filterDynamicRoutes(dynamicRoutes)[m
[32m+[m[32m            asyncRoutes.forEach(route => { router.addRoute(route) })[m
[32m+[m[32m            this.setRoutes(rewriteRoutes)[m
[32m+[m[32m            this.setSidebarRouters(constantRoutes.concat(sidebarRoutes))[m
[32m+[m[32m            this.setDefaultRoutes(sidebarRoutes)[m
[32m+[m[32m            this.setTopbarRoutes(defaultRoutes)[m
[32m+[m[32m            resolve(rewriteRoutes)[m
[32m+[m[32m          })[m
[32m+[m[32m        })[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m
[32m+[m[32m// éå†åå°ä¼ æ¥çš„è·¯ç”±å­—ç¬¦ä¸²ï¼Œè½¬æ¢ä¸ºç»„ä»¶å¯¹è±¡[m
[32m+[m[32mfunction filterAsyncRouter(asyncRouterMap, lastRouter = false, type = false) {[m
[32m+[m[32m  return asyncRouterMap.filter(route => {[m
[32m+[m[32m    if (type && route.children) {[m
[32m+[m[32m      route.children = filterChildren(route.children)[m
[32m+[m[32m    }[m
[32m+[m[32m    if (route.component) {[m
[32m+[m[32m      // Layout ParentView ç»„ä»¶ç‰¹æ®Šå¤„ç†[m
[32m+[m[32m      if (route.component === 'Layout') {[m
[32m+[m[32m        route.component = Layout[m
[32m+[m[32m      } else if (route.component === 'ParentView') {[m
[32m+[m[32m        route.component = ParentView[m
[32m+[m[32m      } else if (route.component === 'InnerLink') {[m
[32m+[m[32m        route.component = InnerLink[m
[32m+[m[32m      } else {[m
[32m+[m[32m        route.component = loadView(route.component)[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m    if (route.children != null && route.children && route.children.length) {[m
[32m+[m[32m      route.children = filterAsyncRouter(route.children, route, type)[m
[32m+[m[32m    } else {[m
[32m+[m[32m      delete route['children'][m
[32m+[m[32m      delete route['redirect'][m
[32m+[m[32m    }[m
[32m+[m[32m    return true[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction filterChildren(childrenMap, lastRouter = false) {[m
[32m+[m[32m  var children = [][m
[32m+[m[32m  childrenMap.forEach((el, index) => {[m
[32m+[m[32m    if (el.children && el.children.length) {[m
[32m+[m[32m      if (el.component === 'ParentView' && !lastRouter) {[m
[32m+[m[32m        el.children.forEach(c => {[m
[32m+[m[32m          c.path = el.path + '/' + c.path[m
[32m+[m[32m          if (c.children && c.children.length) {[m
[32m+[m[32m            children = children.concat(filterChildren(c.children, c))[m
[32m+[m[32m            return[m
[32m+[m[32m          }[m
[32m+[m[32m          children.push(c)[m
[32m+[m[32m        })[m
[32m+[m[32m        return[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m    if (lastRouter) {[m
[32m+[m[32m      el.path = lastRouter.path + '/' + el.path[m
[32m+[m[32m      if (el.children && el.children.length) {[m
[32m+[m[32m        children = children.concat(filterChildren(el.children, el))[m
[32m+[m[32m        return[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m    children = children.concat(el)[m
[32m+[m[32m  })[m
[32m+[m[32m  return children[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åŠ¨æ€è·¯ç”±éå†ï¼ŒéªŒè¯æ˜¯å¦å…·å¤‡æƒé™[m
[32m+[m[32mexport function filterDynamicRoutes(routes) {[m
[32m+[m[32m  const res = [][m
[32m+[m[32m  routes.forEach(route => {[m
[32m+[m[32m    if (route.permissions) {[m
[32m+[m[32m      if (auth.hasPermiOr(route.permissions)) {[m
[32m+[m[32m        res.push(route)[m
[32m+[m[32m      }[m
[32m+[m[32m    } else if (route.roles) {[m
[32m+[m[32m      if (auth.hasRoleOr(route.roles)) {[m
[32m+[m[32m        res.push(route)[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m[32m  return res[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport const loadView = (view) => {[m
[32m+[m[32m  let res;[m
[32m+[m[32m  for (const path in modules) {[m
[32m+[m[32m    const dir = path.split('views/')[1].split('.vue')[0];[m
[32m+[m[32m    if (dir === view) {[m
[32m+[m[32m      res = () => modules[path]();[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  return res;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport default usePermissionStore[m
[1mdiff --git a/src/store/modules/settings.js b/src/store/modules/settings.js[m
[1mnew file mode 100644[m
[1mindex 00000000..22b73366[m
[1m--- /dev/null[m
[1m+++ b/src/store/modules/settings.js[m
[36m@@ -0,0 +1,38 @@[m
[32m+[m[32mimport defaultSettings from '@/settings'[m
[32m+[m[32mimport { useDynamicTitle } from '@/utils/dynamicTitle'[m
[32m+[m
[32m+[m[32mconst { sideTheme, showSettings, topNav, tagsView, fixedHeader, sidebarLogo, dynamicTitle } = defaultSettings[m
[32m+[m
[32m+[m[32mconst storageSetting = JSON.parse(localStorage.getItem('layout-setting')) || ''[m
[32m+[m
[32m+[m[32mconst useSettingsStore = defineStore([m
[32m+[m[32m  'settings',[m
[32m+[m[32m  {[m
[32m+[m[32m    state: () => ({[m
[32m+[m[32m      title: '',[m
[32m+[m[32m      theme: storageSetting.theme || '#409EFF',[m
[32m+[m[32m      sideTheme: storageSetting.sideTheme || sideTheme,[m
[32m+[m[32m      showSettings: showSettings,[m
[32m+[m[32m      topNav: storageSetting.topNav === undefined ? topNav : storageSetting.topNav,[m
[32m+[m[32m      tagsView: storageSetting.tagsView === undefined ? tagsView : storageSetting.tagsView,[m
[32m+[m[32m      fixedHeader: storageSetting.fixedHeader === undefined ? fixedHeader : storageSetting.fixedHeader,[m
[32m+[m[32m      sidebarLogo: storageSetting.sidebarLogo === undefined ? sidebarLogo : storageSetting.sidebarLogo,[m
[32m+[m[32m      dynamicTitle: storageSetting.dynamicTitle === undefined ? dynamicTitle : storageSetting.dynamicTitle[m
[32m+[m[32m    }),[m
[32m+[m[32m    actions: {[m
[32m+[m[32m      // ä¿®æ”¹å¸ƒå±€è®¾ç½®[m
[32m+[m[32m      changeSetting(data) {[m
[32m+[m[32m        const { key, value } = data[m
[32m+[m[32m        if (this.hasOwnProperty(key)) {[m
[32m+[m[32m          this[key] = value[m
[32m+[m[32m        }[m
[32m+[m[32m      },[m
[32m+[m[32m      // è®¾ç½®ç½‘é¡µæ ‡é¢˜[m
[32m+[m[32m      setTitle(title) {[m
[32m+[m[32m        this.title = title[m
[32m+[m[32m        useDynamicTitle();[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m
[32m+[m[32mexport default useSettingsStore[m
[1mdiff --git a/src/store/modules/tagsView.js b/src/store/modules/tagsView.js[m
[1mnew file mode 100644[m
[1mindex 00000000..9d07f33d[m
[1m--- /dev/null[m
[1m+++ b/src/store/modules/tagsView.js[m
[36m@@ -0,0 +1,182 @@[m
[32m+[m[32mconst useTagsViewStore = defineStore([m
[32m+[m[32m  'tags-view',[m
[32m+[m[32m  {[m
[32m+[m[32m    state: () => ({[m
[32m+[m[32m      visitedViews: [],[m
[32m+[m[32m      cachedViews: [],[m
[32m+[m[32m      iframeViews: [][m
[32m+[m[32m    }),[m
[32m+[m[32m    actions: {[m
[32m+[m[32m      addView(view) {[m
[32m+[m[32m        this.addVisitedView(view)[m
[32m+[m[32m        this.addCachedView(view)[m
[32m+[m[32m      },[m
[32m+[m[32m      addIframeView(view) {[m
[32m+[m[32m        if (this.iframeViews.some(v => v.path === view.path)) return[m
[32m+[m[32m        this.iframeViews.push([m
[32m+[m[32m          Object.assign({}, view, {[m
[32m+[m[32m            title: view.meta.title || 'no-name'[m
[32m+[m[32m          })[m
[32m+[m[32m        )[m
[32m+[m[32m      },[m
[32m+[m[32m      addVisitedView(view) {[m
[32m+[m[32m        if (this.visitedViews.some(v => v.path === view.path)) return[m
[32m+[m[32m        this.visitedViews.push([m
[32m+[m[32m          Object.assign({}, view, {[m
[32m+[m[32m            title: view.meta.title || 'no-name'[m
[32m+[m[32m          })[m
[32m+[m[32m        )[m
[32m+[m[32m      },[m
[32m+[m[32m      addCachedView(view) {[m
[32m+[m[32m        if (this.cachedViews.includes(view.name)) return[m
[32m+[m[32m        if (!view.meta.noCache) {[m
[32m+[m[32m          this.cachedViews.push(view.name)[m
[32m+[m[32m        }[m
[32m+[m[32m      },[m
[32m+[m[32m      delView(view) {[m
[32m+[m[32m        return new Promise(resolve => {[m
[32m+[m[32m          this.delVisitedView(view)[m
[32m+[m[32m          this.delCachedView(view)[m
[32m+[m[32m          resolve({[m
[32m+[m[32m            visitedViews: [...this.visitedViews],[m
[32m+[m[32m            cachedViews: [...this.cachedViews][m
[32m+[m[32m          })[m
[32m+[m[32m        })[m
[32m+[m[32m      },[m
[32m+[m[32m      delVisitedView(view) {[m
[32m+[m[32m        return new Promise(resolve => {[m
[32m+[m[32m          for (const [i, v] of this.visitedViews.entries()) {[m
[32m+[m[32m            if (v.path === view.path) {[m
[32m+[m[32m              this.visitedViews.splice(i, 1)[m
[32m+[m[32m              break[m
[32m+[m[32m            }[m
[32m+[m[32m          }[m
[32m+[m[32m          this.iframeViews = this.iframeViews.filter(item => item.path !== view.path)[m
[32m+[m[32m          resolve([...this.visitedViews])[m
[32m+[m[32m        })[m
[32m+[m[32m      },[m
[32m+[m[32m      delIframeView(view) {[m
[32m+[m[32m        return new Promise(resolve => {[m
[32m+[m[32m          this.iframeViews = this.iframeViews.filter(item => item.path !== view.path)[m
[32m+[m[32m          resolve([...this.iframeViews])[m
[32m+[m[32m        })[m
[32m+[m[32m      },[m
[32m+[m[32m      delCachedView(view) {[m
[32m+[m[32m        return new Promise(resolve => {[m
[32m+[m[32m          const index = this.cachedViews.indexOf(view.name)[m
[32m+[m[32m          index > -1 && this.cachedViews.splice(index, 1)[m
[32m+[m[32m          resolve([...this.cachedViews])[m
[32m+[m[32m        })[m
[32m+[m[32m      },[m
[32m+[m[32m      delOthersViews(view) {[m
[32m+[m[32m        return new Promise(resolve => {[m
[32m+[m[32m          this.delOthersVisitedViews(view)[m
[32m+[m[32m          this.delOthersCachedViews(view)[m
[32m+[m[32m          resolve({[m
[32m+[m[32m            visitedViews: [...this.visitedViews],[m
[32m+[m[32m            cachedViews: [...this.cachedViews][m
[32m+[m[32m          })[m
[32m+[m[32m        })[m
[32m+[m[32m      },[m
[32m+[m[32m      delOthersVisitedViews(view) {[m
[32m+[m[32m        return new Promise(resolve => {[m
[32m+[m[32m          this.visitedViews = this.visitedViews.filter(v => {[m
[32m+[m[32m            return v.meta.affix || v.path === view.path[m
[32m+[m[32m          })[m
[32m+[m[32m          this.iframeViews = this.iframeViews.filter(item => item.path === view.path)[m
[32m+[m[32m          resolve([...this.visitedViews])[m
[32m+[m[32m        })[m
[32m+[m[32m      },[m
[32m+[m[32m      delOthersCachedViews(view) {[m
[32m+[m[32m        return new Promise(resolve => {[m
[32m+[m[32m          const index = this.cachedViews.indexOf(view.name)[m
[32m+[m[32m          if (index > -1) {[m
[32m+[m[32m            this.cachedViews = this.cachedViews.slice(index, index + 1)[m
[32m+[m[32m          } else {[m
[32m+[m[32m            this.cachedViews = [][m
[32m+[m[32m          }[m
[32m+[m[32m          resolve([...this.cachedViews])[m
[32m+[m[32m        })[m
[32m+[m[32m      },[m
[32m+[m[32m      delAllViews(view) {[m
[32m+[m[32m        return new Promise(resolve => {[m
[32m+[m[32m          this.delAllVisitedViews(view)[m
[32m+[m[32m          this.delAllCachedViews(view)[m
[32m+[m[32m          resolve({[m
[32m+[m[32m            visitedViews: [...this.visitedViews],[m
[32m+[m[32m            cachedViews: [...this.cachedViews][m
[32m+[m[32m          })[m
[32m+[m[32m        })[m
[32m+[m[32m      },[m
[32m+[m[32m      delAllVisitedViews(view) {[m
[32m+[m[32m        return new Promise(resolve => {[m
[32m+[m[32m          const affixTags = this.visitedViews.filter(tag => tag.meta.affix)[m
[32m+[m[32m          this.visitedViews = affixTags[m
[32m+[m[32m          this.iframeViews = [][m
[32m+[m[32m          resolve([...this.visitedViews])[m
[32m+[m[32m        })[m
[32m+[m[32m      },[m
[32m+[m[32m      delAllCachedViews(view) {[m
[32m+[m[32m        return new Promise(resolve => {[m
[32m+[m[32m          this.cachedViews = [][m
[32m+[m[32m          resolve([...this.cachedViews])[m
[32m+[m[32m        })[m
[32m+[m[32m      },[m
[32m+[m[32m      updateVisitedView(view) {[m
[32m+[m[32m        for (let v of this.visitedViews) {[m
[32m+[m[32m          if (v.path === view.path) {[m
[32m+[m[32m            v = Object.assign(v, view)[m
[32m+[m[32m            break[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
[32m+[m[32m      },[m
[32m+[m[32m      delRightTags(view) {[m
[32m+[m[32m        return new Promise(resolve => {[m
[32m+[m[32m          const index = this.visitedViews.findIndex(v => v.path === view.path)[m
[32m+[m[32m          if (index === -1) {[m
[32m+[m[32m            return[m
[32m+[m[32m          }[m
[32m+[m[32m          this.visitedViews = this.visitedViews.filter((item, idx) => {[m
[32m+[m[32m            if (idx <= index || (item.meta && item.meta.affix)) {[m
[32m+[m[32m              return true[m
[32m+[m[32m            }[m
[32m+[m[32m            const i = this.cachedViews.indexOf(item.name)[m
[32m+[m[32m            if (i > -1) {[m
[32m+[m[32m              this.cachedViews.splice(i, 1)[m
[32m+[m[32m            }[m
[32m+[m[32m            if(item.meta.link) {[m
[32m+[m[32m              const fi = this.iframeViews.findIndex(v => v.path === item.path)[m
[32m+[m[32m              this.iframeViews.splice(fi, 1)[m
[32m+[m[32m            }[m
[32m+[m[32m            return false[m
[32m+[m[32m          })[m
[32m+[m[32m          resolve([...this.visitedViews])[m
[32m+[m[32m        })[m
[32m+[m[32m      },[m
[32m+[m[32m      delLeftTags(view) {[m
[32m+[m[32m        return new Promise(resolve => {[m
[32m+[m[32m          const index = this.visitedViews.findIndex(v => v.path === view.path)[m
[32m+[m[32m          if (index === -1) {[m
[32m+[m[32m            return[m
[32m+[m[32m          }[m
[32m+[m[32m          this.visitedViews = this.visitedViews.filter((item, idx) => {[m
[32m+[m[32m            if (idx >= index || (item.meta && item.meta.affix)) {[m
[32m+[m[32m              return true[m
[32m+[m[32m            }[m
[32m+[m[32m            const i = this.cachedViews.indexOf(item.name)[m
[32m+[m[32m            if (i > -1) {[m
[32m+[m[32m              this.cachedViews.splice(i, 1)[m
[32m+[m[32m            }[m
[32m+[m[32m            if(item.meta.link) {[m
[32m+[m[32m              const fi = this.iframeViews.findIndex(v => v.path === item.path)[m
[32m+[m[32m              this.iframeViews.splice(fi, 1)[m
[32m+[m[32m            }[m
[32m+[m[32m            return false[m
[32m+[m[32m          })[m
[32m+[m[32m          resolve([...this.visitedViews])[m
[32m+[m[32m        })[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m
[32m+[m[32mexport default useTagsViewStore[m
[1mdiff --git a/src/store/modules/user.js b/src/store/modules/user.js[m
[1mnew file mode 100644[m
[1mindex 00000000..6076ea1b[m
[1m--- /dev/null[m
[1m+++ b/src/store/modules/user.js[m
[36m@@ -0,0 +1,83 @@[m
[32m+[m[32mimport { login, logout, getInfo } from '@/api/login'[m
[32m+[m[32mimport { getToken, setToken, removeToken } from '@/utils/auth'[m
[32m+[m[32mimport defAva from '@/assets/images/profile.jpg'[m
[32m+[m
[32m+[m[32mconst useUserStore = defineStore([m
[32m+[m[32m  'user',[m
[32m+[m[32m  {[m
[32m+[m[32m    state: () => ({[m
[32m+[m[32m      token: getToken(),[m
[32m+[m[32m      id: '',[m
[32m+[m[32m      name: '',[m
[32m+[m[32m      avatar: '',[m
[32m+[m[32m      roles: [],[m
[32m+[m[32m      permissions: [],[m
[32m+[m[32m      deptId: '' // æ·»åŠ éƒ¨é—¨IDå­—æ®µ[m
[32m+[m[32m    }),[m
[32m+[m[32m    actions: {[m
[32m+[m[32m      // ç™»å½•[m
[32m+[m[32m      login(userInfo) {[m
[32m+[m[32m        const username = userInfo.username.trim()[m
[32m+[m[32m        const password = userInfo.password[m
[32m+[m[32m        const code = userInfo.code[m
[32m+[m[32m        const uuid = userInfo.uuid[m
[32m+[m[32m        return new Promise((resolve, reject) => {[m
[32m+[m[32m          login(username, password, code, uuid).then(res => {[m
[32m+[m[32m            setToken(res.token)[m
[32m+[m[32m            this.token = res.token[m
[32m+[m[32m            resolve()[m
[32m+[m[32m          }).catch(error => {[m
[32m+[m[32m            reject(error)[m
[32m+[m[32m          })[m
[32m+[m[32m        })[m
[32m+[m[32m      },[m
[32m+[m[32m      // è·å–ç”¨æˆ·ä¿¡æ¯[m
[32m+[m[32m      getInfo() {[m
[32m+[m[32m        return new Promise((resolve, reject) => {[m
[32m+[m[32m          getInfo().then(res => {[m
[32m+[m[32m            const user = res.user[m
[32m+[m[32m            const avatar = (user.avatar == "" || user.avatar == null) ? defAva : import.meta.env.VITE_APP_BASE_API + user.avatar;[m
[32m+[m
[32m+[m[32m            if (res.roles && res.roles.length > 0) { // éªŒè¯è¿”å›çš„rolesæ˜¯å¦æ˜¯ä¸€ä¸ªéç©ºæ•°ç»„[m
[32m+[m[32m              this.roles = res.roles[m
[32m+[m[32m              this.permissions = res.permissions[m
[32m+[m[32m            } else {[m
[32m+[m[32m              this.roles = ['ROLE_DEFAULT'][m
[32m+[m[32m            }[m
[32m+[m[32m            this.id = user.userId[m
[32m+[m[32m            this.name = user.userName[m
[32m+[m[32m            this.avatar = avatar[m
[32m+[m[32m            this.deptId = user.deptId || '' // ä»åç«¯è·å–éƒ¨é—¨ID[m
[32m+[m[41m            [m
[32m+[m[32m            // è°ƒè¯•æ—¥å¿—ï¼šæ£€æŸ¥deptIdæ˜¯å¦æ­£ç¡®è·å–[m
[32m+[m[32m            console.log('UserStore - è·å–ç”¨æˆ·ä¿¡æ¯:', {[m
[32m+[m[32m              userId: user.userId,[m
[32m+[m[32m              userName: user.userName,[m
[32m+[m[32m              deptId: user.deptId,[m
[32m+[m[32m              storeDeptId: this.deptId[m
[32m+[m[32m            })[m
[32m+[m[41m            [m
[32m+[m[32m            resolve(res)[m
[32m+[m[32m          }).catch(error => {[m
[32m+[m[32m            reject(error)[m
[32m+[m[32m          })[m
[32m+[m[32m        })[m
[32m+[m[32m      },[m
[32m+[m[32m      // é€€å‡ºç³»ç»Ÿ[m
[32m+[m[32m      logOut() {[m
[32m+[m[32m        return new Promise((resolve, reject) => {[m
[32m+[m[32m          logout(this.token).then(() => {[m
[32m+[m[32m            this.token = ''[m
[32m+[m[32m            this.roles = [][m
[32m+[m[32m            this.permissions = [][m
[32m+[m[32m            removeToken()[m
[32m+[m[32m            resolve()[m
[32m+[m[32m          }).catch(error => {[m
[32m+[m[32m            reject(error)[m
[32m+[m[32m          })[m
[32m+[m[32m        })[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m
[32m+[m[32mexport default useUserStore[m
[1mdiff --git a/src/utils/auth.js b/src/utils/auth.js[m
[1mnew file mode 100644[m
[1mindex 00000000..7cf91703[m
[1m--- /dev/null[m
[1m+++ b/src/utils/auth.js[m
[36m@@ -0,0 +1,36 @@[m
[32m+[m[32mimport Cookies from 'js-cookie'[m
[32m+[m
[32m+[m[32mconst TokenKey = 'Admin-Token'[m
[32m+[m[32mconst AppTokenKey = 'app_token'[m
[32m+[m
[32m+[m[32m// è·å–åå°ç®¡ç†token[m
[32m+[m[32mexport function getToken() {[m
[32m+[m[32m  return Cookies.get(TokenKey)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// è®¾ç½®åå°ç®¡ç†token[m
[32m+[m[32mexport function setToken(token) {[m
[32m+[m[32m  return Cookies.set(TokenKey, token)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ é™¤åå°ç®¡ç†token[m
[32m+[m[32mexport function removeToken() {[m
[32m+[m[32m  return Cookies.remove(TokenKey)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// è·å–Cç«¯ç”¨æˆ·token[m
[32m+[m[32mexport function getAppToken() {[m
[32m+[m[32m  const token = localStorage.getItem(AppTokenKey)[m
[32m+[m[32m  console.log("getAppTokenä»localStorageè·å–:", AppTokenKey, "å€¼:", token);[m
[32m+[m[32m  return token;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// è®¾ç½®Cç«¯ç”¨æˆ·token[m
[32m+[m[32mexport function setAppToken(token) {[m
[32m+[m[32m  return localStorage.setItem(AppTokenKey, token)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ é™¤Cç«¯ç”¨æˆ·token[m
[32m+[m[32mexport function removeAppToken() {[m
[32m+[m[32m  return localStorage.removeItem(AppTokenKey)[m
[32m+[m[32m}[m
[1mdiff --git a/src/utils/avatarUtils.js b/src/utils/avatarUtils.js[m
[1mnew file mode 100644[m
[1mindex 00000000..52d2aa49[m
[1m--- /dev/null[m
[1m+++ b/src/utils/avatarUtils.js[m
[36m@@ -0,0 +1,50 @@[m
[32m+[m[32m/**[m
[32m+[m[32m * å¤´åƒå¤„ç†å·¥å…·[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m// é»˜è®¤å¤´åƒè·¯å¾„[m
[32m+[m[32mexport const DEFAULT_AVATAR = '/img/profile.jpg'[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * è·å–ç”¨æˆ·å¤´åƒ[m
[32m+[m[32m * @param {Object} userInfo - ç”¨æˆ·ä¿¡æ¯å¯¹è±¡[m
[32m+[m[32m * @param {string} userInfo.avatar - ç”¨æˆ·å¤´åƒè·¯å¾„[m
[32m+[m[32m * @returns {string} - å¤„ç†åçš„å¤´åƒè·¯å¾„[m
[32m+[m[32m */[m
[32m+[m[32mexport const getUserAvatar = (userInfo) => {[m
[32m+[m[32m  if (userInfo && userInfo.avatar) {[m
[32m+[m[32m    return userInfo.avatar[m
[32m+[m[32m  }[m
[32m+[m[32m  return DEFAULT_AVATAR[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * å¤„ç†å¤´åƒåŠ è½½å¤±è´¥[m
[32m+[m[32m * @param {Event} event - å›¾ç‰‡åŠ è½½é”™è¯¯äº‹ä»¶[m
[32m+[m[32m */[m
[32m+[m[32mexport const handleAvatarError = (event) => {[m
[32m+[m[32m  event.target.src = DEFAULT_AVATAR[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * æ ¼å¼åŒ–å¤´åƒURL[m
[32m+[m[32m * @param {string} avatarUrl - åŸå§‹å¤´åƒURL[m
[32m+[m[32m * @returns {string} - æ ¼å¼åŒ–åçš„å¤´åƒURL[m
[32m+[m[32m */[m
[32m+[m[32mexport const formatAvatarUrl = (avatarUrl) => {[m
[32m+[m[32m  if (!avatarUrl) {[m
[32m+[m[32m    return DEFAULT_AVATAR[m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  // æ£€æŸ¥æ˜¯å¦ä¸ºå®Œæ•´URL[m
[32m+[m[32m  if (avatarUrl.startsWith('http://') || avatarUrl.startsWith('https://')) {[m
[32m+[m[32m    return avatarUrl[m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  // å¦‚æœæ˜¯ç›¸å¯¹è·¯å¾„ï¼Œç¡®ä¿ä»¥/å¼€å¤´[m
[32m+[m[32m  if (!avatarUrl.startsWith('/')) {[m
[32m+[m[32m    return `/${avatarUrl}`[m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  return avatarUrl[m
[32m+[m[32m}[m
[1mdiff --git a/src/utils/dict.js b/src/utils/dict.js[m
[1mnew file mode 100644[m
[1mindex 00000000..9648f149[m
[1m--- /dev/null[m
[1m+++ b/src/utils/dict.js[m
[36m@@ -0,0 +1,24 @@[m
[32m+[m[32mimport useDictStore from '@/store/modules/dict'[m
[32m+[m[32mimport { getDicts } from '@/api/system/dict/data'[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * è·å–å­—å…¸æ•°æ®[m
[32m+[m[32m */[m
[32m+[m[32mexport function useDict(...args) {[m
[32m+[m[32m  const res = ref({});[m
[32m+[m[32m  return (() => {[m
[32m+[m[32m    args.forEach((dictType, index) => {[m
[32m+[m[32m      res.value[dictType] = [];[m
[32m+[m[32m      const dicts = useDictStore().getDict(dictType);[m
[32m+[m[32m      if (dicts) {[m
[32m+[m[32m        res.value[dictType] = dicts;[m
[32m+[m[32m      } else {[m
[32m+[m[32m        getDicts(dictType).then(resp => {[m
[32m+[m[32m          res.value[dictType] = resp.data.map(p => ({ label: p.dictLabel, value: p.dictValue, elTagType: p.listClass, elTagClass: p.cssClass }))[m
[32m+[m[32m          useDictStore().setDict(dictType, res.value[dictType]);[m
[32m+[m[32m        })[m
[32m+[m[32m      }[m
[32m+[m[32m    })[m
[32m+[m[32m    return toRefs(res.value);[m
[32m+[m[32m  })()[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/src/utils/dynamicTitle.js b/src/utils/dynamicTitle.js[m
[1mnew file mode 100644[m
[1mindex 00000000..64404b20[m
[1m--- /dev/null[m
[1m+++ b/src/utils/dynamicTitle.js[m
[36m@@ -0,0 +1,15 @@[m
[32m+[m[32mimport store from '@/store'[m
[32m+[m[32mimport defaultSettings from '@/settings'[m
[32m+[m[32mimport useSettingsStore from '@/store/modules/settings'[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * åŠ¨æ€ä¿®æ”¹æ ‡é¢˜[m
[32m+[m[32m */[m
[32m+[m[32mexport function useDynamicTitle() {[m
[32m+[m[32m  const settingsStore = useSettingsStore();[m
[32m+[m[32m  if (settingsStore.dynamicTitle) {[m
[32m+[m[32m    document.title = settingsStore.title + ' - ' + defaultSettings.title;[m
[32m+[m[32m  } else {[m
[32m+[m[32m    document.title = defaultSettings.title;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/src/utils/errorCode.js b/src/utils/errorCode.js[m
[1mnew file mode 100644[m
[1mindex 00000000..d2111ee1[m
[1m--- /dev/null[m
[1m+++ b/src/utils/errorCode.js[m
[36m@@ -0,0 +1,6 @@[m
[32m+[m[32mexport default {[m
[32m+[m[32m  '401': 'è®¤è¯å¤±è´¥ï¼Œæ— æ³•è®¿é—®ç³»ç»Ÿèµ„æº',[m
[32m+[m[32m  '403': 'å½“å‰æ“ä½œæ²¡æœ‰æƒé™',[m
[32m+[m[32m  '404': 'è®¿é—®èµ„æºä¸å­˜åœ¨',[m
[32m+[m[32m  'default': 'ç³»ç»ŸæœªçŸ¥é”™è¯¯ï¼Œè¯·åé¦ˆç»™ç®¡ç†å‘˜'[m
[32m+[m[32m}[m
[1mdiff --git a/src/utils/generator/config.js b/src/utils/generator/config.js[m
[1mnew file mode 100644[m
[1mindex 00000000..449715f0[m
[1m--- /dev/null[m
[1m+++ b/src/utils/generator/config.js[m
[36m@@ -0,0 +1,452 @@[m
[32m+[m[32mexport const formConf = {[m
[32m+[m[32m  formRef: 'formRef',[m
[32m+[m[32m  formModel: 'formData',[m
[32m+[m[32m  size: 'default',[m
[32m+[m[32m  labelPosition: 'right',[m
[32m+[m[32m  labelWidth: 100,[m
[32m+[m[32m  formRules: 'rules',[m
[32m+[m[32m  gutter: 15,[m
[32m+[m[32m  disabled: false,[m
[32m+[m[32m  span: 24,[m
[32m+[m[32m  formBtns: true,[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport const inputComponents = [[m
[32m+[m[32m  {[m
[32m+[m[32m    label: 'å•è¡Œæ–‡æœ¬',[m
[32m+[m[32m    tag: 'el-input',[m
[32m+[m[32m    tagIcon: 'input',[m
[32m+[m[32m    type: 'text',[m
[32m+[m[32m    placeholder: 'è¯·è¾“å…¥',[m
[32m+[m[32m    defaultValue: undefined,[m
[32m+[m[32m    span: 24,[m
[32m+[m[32m    labelWidth: null,[m
[32m+[m[32m    style: { width: '100%' },[m
[32m+[m[32m    clearable: true,[m
[32m+[m[32m    prepend: '',[m
[32m+[m[32m    append: '',[m
[32m+[m[32m    'prefix-icon': '',[m
[32m+[m[32m    'suffix-icon': '',[m
[32m+[m[32m    maxlength: null,[m
[32m+[m[32m    'show-word-limit': false,[m
[32m+[m[32m    readonly: false,[m
[32m+[m[32m    disabled: false,[m
[32m+[m[32m    required: true,[m
[32m+[m[32m    regList: [],[m
[32m+[m[32m    changeTag: true,[m
[32m+[m[32m    document: 'https://element-plus.org/zh-CN/component/input',[m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    label: 'å¤šè¡Œæ–‡æœ¬',[m
[32m+[m[32m    tag: 'el-input',[m
[32m+[m[32m    tagIcon: 'textarea',[m
[32m+[m[32m    type: 'textarea',[m
[32m+[m[32m    placeholder: 'è¯·è¾“å…¥',[m
[32m+[m[32m    defaultValue: undefined,[m
[32m+[m[32m    span: 24,[m
[32m+[m[32m    labelWidth: null,[m
[32m+[m[32m    autosize: {[m
[32m+[m[32m      minRows: 4,[m
[32m+[m[32m      maxRows: 4,[m
[32m+[m[32m    },[m
[32m+[m[32m    style: { width: '100%' },[m
[32m+[m[32m    maxlength: null,[m
[32m+[m[32m    'show-word-limit': false,[m
[32m+[m[32m    readonly: false,[m
[32m+[m[32m    disabled: false,[m
[32m+[m[32m    required: true,[m
[32m+[m[32m    regList: [],[m
[32m+[m[32m    changeTag: true,[m
[32m+[m[32m    document: 'https://element-plus.org/zh-CN/component/input',[m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    label: 'å¯†ç ',[m
[32m+[m[32m    tag: 'el-input',[m
[32m+[m[32m    tagIcon: 'password',[m
[32m+[m[32m    type: 'password',[m
[32m+[m[32m    placeholder: 'è¯·è¾“å…¥',[m
[32m+[m[32m    defaultValue: undefined,[m
[32m+[m[32m    span: 24,[m
[32m+[m[32m    'show-password': true,[m
[32m+[m[32m    labelWidth: null,[m
[32m+[m[32m    style: { width: '100%' },[m
[32m+[m[32m    clearable: true,[m
[32m+[m[32m    prepend: '',[m
[32m+[m[32m    append: '',[m
[32m+[m[32m    'prefix-icon': '',[m
[32m+[m[32m    'suffix-icon': '',[m
[32m+[m[32m    maxlength: null,[m
[32m+[m[32m    'show-word-limit': false,[m
[32m+[m[32m    readonly: false,[m
[32m+[m[32m    disabled: false,[m
[32m+[m[32m    required: true,[m
[32m+[m[32m    regList: [],[m
[32m+[m[32m    changeTag: true,[m
[32m+[m[32m    document: 'https://element-plus.org/zh-CN/component/input',[m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    label: 'è®¡æ•°å™¨',[m
[32m+[m[32m    tag: 'el-input-number',[m
[32m+[m[32m    tagIcon: 'number',[m
[32m+[m[32m    placeholder: '',[m
[32m+[m[32m    defaultValue: undefined,[m
[32m+[m[32m    span: 24,[m
[32m+[m[32m    labelWidth: null,[m
[32m+[m[32m    min: undefined,[m
[32m+[m[32m    max: undefined,[m
[32m+[m[32m    step: undefined,[m
[32m+[m[32m    'step-strictly': false,[m
[32m+[m[32m    precision: undefined,[m
[32m+[m[32m    'controls-position': '',[m
[32m+[m[32m    disabled: false,[m
[32m+[m[32m    required: true,[m
[32m+[m[32m    regList: [],[m
[32m+[m[32m    changeTag: true,[m
[32m+[m[32m    document: 'https://element-plus.org/zh-CN/component/input-number',[m
[32m+[m[32m  },[m
[32m+[m[32m][m
[32m+[m
[32m+[m[32mexport const selectComponents = [[m
[32m+[m[32m  {[m
[32m+[m[32m    label: 'ä¸‹æ‹‰é€‰æ‹©',[m
[32m+[m[32m    tag: 'el-select',[m
[32m+[m[32m    tagIcon: 'select',[m
[32m+[m[32m    placeholder: 'è¯·é€‰æ‹©',[m
[32m+[m[32m    defaultValue: undefined,[m
[32m+[m[32m    span: 24,[m
[32m+[m[32m    labelWidth: null,[m
[32m+[m[32m    style: { width: '100%' },[m
[32m+[m[32m    clearable: true,[m
[32m+[m[32m    disabled: false,[m
[32m+[m[32m    required: true,[m
[32m+[m[32m    filterable: false,[m
[32m+[m[32m    multiple: false,[m
[32m+[m[32m    options: [[m
[32m+[m[32m      {[m
[32m+[m[32m        label: 'é€‰é¡¹ä¸€',[m
[32m+[m[32m        value: 1,[m
[32m+[m[32m      },[m
[32m+[m[32m      {[m
[32m+[m[32m        label: 'é€‰é¡¹äºŒ',[m
[32m+[m[32m        value: 2,[m
[32m+[m[32m      },[m
[32m+[m[32m    ],[m
[32m+[m[32m    regList: [],[m
[32m+[m[32m    changeTag: true,[m
[32m+[m[32m    document: 'https://element-plus.org/zh-CN/component/select',[m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    label: 'çº§è”é€‰æ‹©',[m
[32m+[m[32m    tag: 'el-cascader',[m
[32m+[m[32m    tagIcon: 'cascader',[m
[32m+[m[32m    placeholder: 'è¯·é€‰æ‹©',[m
[32m+[m[32m    defaultValue: [],[m
[32m+[m[32m    span: 24,[m
[32m+[m[32m    labelWidth: null,[m
[32m+[m[32m    style: { width: '100%' },[m
[32m+[m[32m    props: {[m
[32m+[m[32m      props: {[m
[32m+[m[32m        multiple: false,[m
[32m+[m[32m      },[m
[32m+[m[32m    },[m
[32m+[m[32m    'show-all-levels': true,[m
[32m+[m[32m    disabled: false,[m
[32m+[m[32m    clearable: true,[m
[32m+[m[32m    filterable: false,[m
[32m+[m[32m    required: true,[m
[32m+[m[32m    options: [[m
[32m+[m[32m      {[m
[32m+[m[32m        id: 1,[m
[32m+[m[32m        value: 1,[m
[32m+[m[32m        label: 'é€‰é¡¹1',[m
[32m+[m[32m        children: [[m
[32m+[m[32m          {[m
[32m+[m[32m            id: 2,[m
[32m+[m[32m            value: 2,[m
[32m+[m[32m            label: 'é€‰é¡¹1-1',[m
[32m+[m[32m          },[m
[32m+[m[32m        ],[m
[32m+[m[32m      },[m
[32m+[m[32m    ],[m
[32m+[m[32m    dataType: 'dynamic',[m
[32m+[m[32m    labelKey: 'label',[m
[32m+[m[32m    valueKey: 'value',[m
[32m+[m[32m    childrenKey: 'children',[m
[32m+[m[32m    separator: '/',[m
[32m+[m[32m    regList: [],[m
[32m+[m[32m    changeTag: true,[m
[32m+[m[32m    document: 'https://element-plus.org/zh-CN/component/cascader',[m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    label: 'å•é€‰æ¡†ç»„',[m
[32m+[m[32m    tag: 'el-radio-group',[m
[32m+[m[32m    tagIcon: 'radio',[m
[32m+[m[32m    defaultValue: 0,[m
[32m+[m[32m    span: 24,[m
[32m+[m[32m    labelWidth: null,[m
[32m+[m[32m    style: {},[m
[32m+[m[32m    optionType: 'default',[m
[32m+[m[32m    border: false,[m
[32m+[m[32m    size: 'default',[m
[32m+[m[32m    disabled: false,[m
[32m+[m[32m    required: true,[m
[32m+[m[32m    options: [[m
[32m+[m[32m      {[m
[32m+[m[32m        label: 'é€‰é¡¹ä¸€',[m
[32m+[m[32m        value: 1,[m
[32m+[m[32m      },[m
[32m+[m[32m      {[m
[32m+[m[32m        label: 'é€‰é¡¹äºŒ',[m
[32m+[m[32m        value: 2,[m
[32m+[m[32m      },[m
[32m+[m[32m    ],[m
[32m+[m[32m    regList: [],[m
[32m+[m[32m    changeTag: true,[m
[32m+[m[32m    document: 'https://element-plus.org/zh-CN/component/radio',[m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    label: 'å¤šé€‰æ¡†ç»„',[m
[32m+[m[32m    tag: 'el-checkbox-group',[m
[32m+[m[32m    tagIcon: 'checkbox',[m
[32m+[m[32m    defaultValue: [],[m
[32m+[m[32m    span: 24,[m
[32m+[m[32m    labelWidth: null,[m
[32m+[m[32m    style: {},[m
[32m+[m[32m    optionType: 'default',[m
[32m+[m[32m    border: false,[m
[32m+[m[32m    size: 'default',[m
[32m+[m[32m    disabled: false,[m
[32m+[m[32m    required: true,[m
[32m+[m[32m    options: [[m
[32m+[m[32m      {[m
[32m+[m[32m        label: 'é€‰é¡¹ä¸€',[m
[32m+[m[32m        value: 1,[m
[32m+[m[32m      },[m
[32m+[m[32m      {[m
[32m+[m[32m        label: 'é€‰é¡¹äºŒ',[m
[32m+[m[32m        value: 2,[m
[32m+[m[32m      },[m
[32m+[m[32m    ],[m
[32m+[m[32m    regList: [],[m
[32m+[m[32m    changeTag: true,[m
[32m+[m[32m    document: 'https://element-plus.org/zh-CN/component/checkbox',[m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    label: 'å¼€å…³',[m
[32m+[m[32m    tag: 'el-switch',[m
[32m+[m[32m    tagIcon: 'switch',[m
[32m+[m[32m    defaultValue: false,[m
[32m+[m[32m    span: 24,[m
[32m+[m[32m    labelWidth: null,[m
[32m+[m[32m    style: {},[m
[32m+[m[32m    disabled: false,[m
[32m+[m[32m    required: true,[m
[32m+[m[32m    'active-text': '',[m
[32m+[m[32m    'inactive-text': '',[m
[32m+[m[32m    'active-color': null,[m
[32m+[m[32m    'inactive-color': null,[m
[32m+[m[32m    'active-value': true,[m
[32m+[m[32m    'inactive-value': false,[m
[32m+[m[32m    regList: [],[m
[32m+[m[32m    changeTag: true,[m
[32m+[m[32m    document: 'https://element-plus.org/zh-CN/component/switch',[m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    label: 'æ»‘å—',[m
[32m+[m[32m    tag: 'el-slider',[m
[32m+[m[32m    tagIcon: 'slider',[m
[32m+[m[32m    defaultValue: null,[m
[32m+[m[32m    span: 24,[m
[32m+[m[32m    labelWidth: null,[m
[32m+[m[32m    disabled: false,[m
[32m+[m[32m    required: true,[m
[32m+[m[32m    min: 0,[m
[32m+[m[32m    max: 100,[m
[32m+[m[32m    step: 1,[m
[32m+[m[32m    'show-stops': false,[m
[32m+[m[32m    range: false,[m
[32m+[m[32m    regList: [],[m
[32m+[m[32m    changeTag: true,[m
[32m+[m[32m    document: 'https://element-plus.org/zh-CN/component/slider',[m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    label: 'æ—¶é—´é€‰æ‹©',[m
[32m+[m[32m    tag: 'el-time-picker',[m
[32m+[m[32m    tagIcon: 'time',[m
[32m+[m[32m    placeholder: 'è¯·é€‰æ‹©',[m
[32m+[m[32m    defaultValue: '',[m
[32m+[m[32m    span: 24,[m
[32m+[m[32m    labelWidth: null,[m
[32m+[m[32m    style: { width: '100%' },[m
[32m+[m[32m    disabled: false,[m
[32m+[m[32m    clearable: true,[m
[32m+[m[32m    required: true,[m
[32m+[m[32m    format: 'HH:mm:ss',[m
[32m+[m[32m    'value-format': 'HH:mm:ss',[m
[32m+[m[32m    regList: [],[m
[32m+[m[32m    changeTag: true,[m
[32m+[m[32m    document: 'https://element-plus.org/zh-CN/component/time-picker',[m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    label: 'æ—¶é—´èŒƒå›´',[m
[32m+[m[32m    tag: 'el-time-picker',[m
[32m+[m[32m    tagIcon: 'time-range',[m
[32m+[m[32m    defaultValue: null,[m
[32m+[m[32m    span: 24,[m
[32m+[m[32m    labelWidth: null,[m
[32m+[m[32m    style: { width: '100%' },[m
[32m+[m[32m    disabled: false,[m
[32m+[m[32m    clearable: true,[m
[32m+[m[32m    required: true,[m
[32m+[m[32m    'is-range': true,[m
[32m+[m[32m    'range-separator': 'è‡³',[m
[32m+[m[32m    'start-placeholder': 'å¼€å§‹æ—¶é—´',[m
[32m+[m[32m    'end-placeholder': 'ç»“æŸæ—¶é—´',[m
[32m+[m[32m    format: 'HH:mm:ss',[m
[32m+[m[32m    'value-format': 'HH:mm:ss',[m
[32m+[m[32m    regList: [],[m
[32m+[m[32m    changeTag: true,[m
[32m+[m[32m    document: 'https://element-plus.org/zh-CN/component/time-picker',[m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    label: 'æ—¥æœŸé€‰æ‹©',[m
[32m+[m[32m    tag: 'el-date-picker',[m
[32m+[m[32m    tagIcon: 'date',[m
[32m+[m[32m    placeholder: 'è¯·é€‰æ‹©',[m
[32m+[m[32m    defaultValue: null,[m
[32m+[m[32m    type: 'date',[m
[32m+[m[32m    span: 24,[m
[32m+[m[32m    labelWidth: null,[m
[32m+[m[32m    style: { width: '100%' },[m
[32m+[m[32m    disabled: false,[m
[32m+[m[32m    clearable: true,[m
[32m+[m[32m    required: true,[m
[32m+[m[32m    format: 'YYYY-MM-DD',[m
[32m+[m[32m    'value-format': 'YYYY-MM-DD',[m
[32m+[m[32m    readonly: false,[m
[32m+[m[32m    regList: [],[m
[32m+[m[32m    changeTag: true,[m
[32m+[m[32m    document: 'https://element-plus.org/zh-CN/component/date-picker',[m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    label: 'æ—¥æœŸèŒƒå›´',[m
[32m+[m[32m    tag: 'el-date-picker',[m
[32m+[m[32m    tagIcon: 'date-range',[m
[32m+[m[32m    defaultValue: null,[m
[32m+[m[32m    span: 24,[m
[32m+[m[32m    labelWidth: null,[m
[32m+[m[32m    style: { width: '100%' },[m
[32m+[m[32m    type: 'daterange',[m
[32m+[m[32m    'range-separator': 'è‡³',[m
[32m+[m[32m    'start-placeholder': 'å¼€å§‹æ—¥æœŸ',[m
[32m+[m[32m    'end-placeholder': 'ç»“æŸæ—¥æœŸ',[m
[32m+[m[32m    disabled: false,[m
[32m+[m[32m    clearable: true,[m
[32m+[m[32m    required: true,[m
[32m+[m[32m    format: 'YYYY-MM-DD',[m
[32m+[m[32m    'value-format': 'YYYY-MM-DD',[m
[32m+[m[32m    readonly: false,[m
[32m+[m[32m    regList: [],[m
[32m+[m[32m    changeTag: true,[m
[32m+[m[32m    document: 'https://element-plus.org/zh-CN/component/date-picker',[m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    label: 'è¯„åˆ†',[m
[32m+[m[32m    tag: 'el-rate',[m
[32m+[m[32m    tagIcon: 'rate',[m
[32m+[m[32m    defaultValue: 0,[m
[32m+[m[32m    span: 24,[m
[32m+[m[32m    labelWidth: null,[m
[32m+[m[32m    style: {},[m
[32m+[m[32m    max: 5,[m
[32m+[m[32m    'allow-half': false,[m
[32m+[m[32m    'show-text': false,[m
[32m+[m[32m    'show-score': false,[m
[32m+[m[32m    disabled: false,[m
[32m+[m[32m    required: true,[m
[32m+[m[32m    regList: [],[m
[32m+[m[32m    changeTag: true,[m
[32m+[m[32m    document: 'https://element-plus.org/zh-CN/component/rate',[m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    label: 'é¢œè‰²é€‰æ‹©',[m
[32m+[m[32m    tag: 'el-color-picker',[m
[32m+[m[32m    tagIcon: 'color',[m
[32m+[m[32m    defaultValue: null,[m
[32m+[m[32m    labelWidth: null,[m
[32m+[m[32m    'show-alpha': false,[m
[32m+[m[32m    'color-format': '',[m
[32m+[m[32m    disabled: false,[m
[32m+[m[32m    required: true,[m
[32m+[m[32m    size: 'default',[m
[32m+[m[32m    regList: [],[m
[32m+[m[32m    changeTag: true,[m
[32m+[m[32m    document: 'https://element-plus.org/zh-CN/component/color-picker',[m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    label: 'ä¸Šä¼ ',[m
[32m+[m[32m    tag: 'el-upload',[m
[32m+[m[32m    tagIcon: 'upload',[m
[32m+[m[32m    action: 'https://jsonplaceholder.typicode.com/posts/',[m
[32m+[m[32m    defaultValue: null,[m
[32m+[m[32m    labelWidth: null,[m
[32m+[m[32m    disabled: false,[m
[32m+[m[32m    required: true,[m
[32m+[m[32m    accept: '',[m
[32m+[m[32m    name: 'file',[m
[32m+[m[32m    'auto-upload': true,[m
[32m+[m[32m    showTip: false,[m
[32m+[m[32m    buttonText: 'ç‚¹å‡»ä¸Šä¼ ',[m
[32m+[m[32m    fileSize: 2,[m
[32m+[m[32m    sizeUnit: 'MB',[m
[32m+[m[32m    'list-type': 'text',[m
[32m+[m[32m    multiple: false,[m
[32m+[m[32m    regList: [],[m
[32m+[m[32m    changeTag: true,[m
[32m+[m[32m    document: 'https://element-plus.org/zh-CN/component/upload',[m
[32m+[m[32m    tip: 'åªèƒ½ä¸Šä¼ ä¸è¶…è¿‡ 2MB çš„æ–‡ä»¶',[m
[32m+[m[32m    style: { width: '100%' },[m
[32m+[m[32m  },[m
[32m+[m[32m][m
[32m+[m
[32m+[m[32mexport const layoutComponents = [[m
[32m+[m[32m  {[m
[32m+[m[32m    layout: 'rowFormItem',[m
[32m+[m[32m    tagIcon: 'row',[m
[32m+[m[32m    type: 'default',[m
[32m+[m[32m    justify: 'start',[m
[32m+[m[32m    align: 'top',[m
[32m+[m[32m    label: 'è¡Œå®¹å™¨',[m
[32m+[m[32m    layoutTree: true,[m
[32m+[m[32m    children: [],[m
[32m+[m[32m    document: 'https://element-plus.org/zh-CN/component/layout',[m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    layout: 'colFormItem',[m
[32m+[m[32m    label: 'æŒ‰é’®',[m
[32m+[m[32m    changeTag: true,[m
[32m+[m[32m    labelWidth: null,[m
[32m+[m[32m    tag: 'el-button',[m
[32m+[m[32m    tagIcon: 'button',[m
[32m+[m[32m    span: 24,[m
[32m+[m[32m    default: 'ä¸»è¦æŒ‰é’®',[m
[32m+[m[32m    type: 'primary',[m
[32m+[m[32m    icon: 'Search',[m
[32m+[m[32m    size: 'default',[m
[32m+[m[32m    disabled: false,[m
[32m+[m[32m    document: 'https://element-plus.org/zh-CN/component/button',[m
[32m+[m[32m  },[m
[32m+[m[32m][m
[32m+[m
[32m+[m[32m// ç»„ä»¶ruleçš„è§¦å‘æ–¹å¼ï¼Œæ— è§¦å‘æ–¹å¼çš„ç»„ä»¶ä¸ç”Ÿæˆrule[m
[32m+[m[32mexport const trigger = {[m
[32m+[m[32m  'el-input': 'blur',[m
[32m+[m[32m  'el-input-number': 'blur',[m
[32m+[m[32m  'el-select': 'change',[m
[32m+[m[32m  'el-radio-group': 'change',[m
[32m+[m[32m  'el-checkbox-group': 'change',[m
[32m+[m[32m  'el-cascader': 'change',[m
[32m+[m[32m  'el-time-picker': 'change',[m
[32m+[m[32m  'el-date-picker': 'change',[m
[32m+[m[32m  'el-rate': 'change',[m
[32m+[m[32m}[m
[1mdiff --git a/src/utils/generator/css.js b/src/utils/generator/css.js[m
[1mnew file mode 100644[m
[1mindex 00000000..c1c62e60[m
[1m--- /dev/null[m
[1m+++ b/src/utils/generator/css.js[m
[36m@@ -0,0 +1,18 @@[m
[32m+[m[32mconst styles = {[m
[32m+[m[32m  'el-rate': '.el-rate{display: inline-block; vertical-align: text-top;}',[m
[32m+[m[32m  'el-upload': '.el-upload__tip{line-height: 1.2;}'[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction addCss(cssList, el) {[m
[32m+[m[32m  const css = styles[el.tag][m
[32m+[m[32m  css && cssList.indexOf(css) === -1 && cssList.push(css)[m
[32m+[m[32m  if (el.children) {[m
[32m+[m[32m    el.children.forEach(el2 => addCss(cssList, el2))[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport function makeUpCss(conf) {[m
[32m+[m[32m  const cssList = [][m
[32m+[m[32m  conf.fields.forEach(el => addCss(cssList, el))[m
[32m+[m[32m  return cssList.join('\n')[m
[32m+[m[32m}[m
[1mdiff --git a/src/utils/generator/drawingDefalut.js b/src/utils/generator/drawingDefalut.js[m
[1mnew file mode 100644[m
[1mindex 00000000..1105c280[m
[1m--- /dev/null[m
[1m+++ b/src/utils/generator/drawingDefalut.js[m
[36m@@ -0,0 +1,29 @@[m
[32m+[m[32mexport default [[m
[32m+[m[32m  {[m
[32m+[m[32m    layout: 'colFormItem',[m
[32m+[m[32m    tagIcon: 'input',[m
[32m+[m[32m    label: 'æ‰‹æœºå·',[m
[32m+[m[32m    vModel: 'mobile',[m
[32m+[m[32m    formId: 6,[m
[32m+[m[32m    tag: 'el-input',[m
[32m+[m[32m    placeholder: 'è¯·è¾“å…¥æ‰‹æœºå·',[m
[32m+[m[32m    defaultValue: '',[m
[32m+[m[32m    span: 24,[m
[32m+[m[32m    style: { width: '100%' },[m
[32m+[m[32m    clearable: true,[m
[32m+[m[32m    prepend: '',[m
[32m+[m[32m    append: '',[m
[32m+[m[32m    'prefix-icon': 'Cellphone',[m
[32m+[m[32m    'suffix-icon': '',[m
[32m+[m[32m    maxlength: 11,[m
[32m+[m[32m    'show-word-limit': true,[m
[32m+[m[32m    readonly: false,[m
[32m+[m[32m    disabled: false,[m
[32m+[m[32m    required: true,[m
[32m+[m[32m    changeTag: true,[m
[32m+[m[32m    regList: [{[m
[32m+[m[32m      pattern: '/^1(3|4|5|7|8|9)\\d{9}$/',[m
[32m+[m[32m      message: 'æ‰‹æœºå·æ ¼å¼é”™è¯¯'[m
[32m+[m[32m    }][m
[32m+[m[32m  }[m
[32m+[m[32m][m
[1mdiff --git a/src/utils/generator/html.js b/src/utils/generator/html.js[m
[1mnew file mode 100644[m
[1mindex 00000000..9bba813c[m
[1m--- /dev/null[m
[1m+++ b/src/utils/generator/html.js[m
[36m@@ -0,0 +1,359 @@[m
[32m+[m[32m/* eslint-disable max-len */[m
[32m+[m[32mimport { trigger } from './config'[m
[32m+[m
[32m+[m[32mlet confGlobal[m
[32m+[m[32mlet someSpanIsNot24[m
[32m+[m
[32m+[m[32mexport function dialogWrapper(str) {[m
[32m+[m[32m  return `<el-dialog v-model="dialogVisible"  @open="onOpen" @close="onClose" title="Dialog Titile">[m
[32m+[m[32m    ${str}[m
[32m+[m[32m    <div slot="footer">[m
[32m+[m[32m      <el-button @click="close">å–æ¶ˆ</el-button>[m
[32m+[m[32m      <el-button type="primary" @click="handelConfirm">ç¡®å®š</el-button>[m
[32m+[m[32m    </div>[m
[32m+[m[32m  </el-dialog>`[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport function vueTemplate(str) {[m
[32m+[m[32m  return `<template>[m
[32m+[m[32m    <div>[m
[32m+[m[32m      ${str}[m
[32m+[m[32m    </div>[m
[32m+[m[32m  </template>`[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport function vueScript(str) {[m
[32m+[m[32m  return `<script setup>[m
[32m+[m[32m    ${str}[m
[32m+[m[32m  </script>`[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport function cssStyle(cssStr) {[m
[32m+[m[32m  return `<style>[m
[32m+[m[32m    ${cssStr}[m
[32m+[m[32m  </style>`[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction buildFormTemplate(conf, child, type) {[m
[32m+[m[32m  let labelPosition = ''[m
[32m+[m[32m  if (conf.labelPosition !== 'right') {[m
[32m+[m[32m    labelPosition = `label-position="${conf.labelPosition}"`[m
[32m+[m[32m  }[m
[32m+[m[32m  const disabled = conf.disabled ? `:disabled="${conf.disabled}"` : ''[m
[32m+[m[32m  let str = `<el-form ref="${conf.formRef}" :model="${conf.formModel}" :rules="${conf.formRules}" size="${conf.size}" ${disabled} label-width="${conf.labelWidth}px" ${labelPosition}>[m
[32m+[m[32m      ${child}[m
[32m+[m[32m      ${buildFromBtns(conf, type)}[m
[32m+[m[32m    </el-form>`[m
[32m+[m[32m  if (someSpanIsNot24) {[m
[32m+[m[32m    str = `<el-row :gutter="${conf.gutter}">[m
[32m+[m[32m        ${str}[m
[32m+[m[32m      </el-row>`[m
[32m+[m[32m  }[m
[32m+[m[32m  return str[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction buildFromBtns(conf, type) {[m
[32m+[m[32m  let str = ''[m
[32m+[m[32m  if (conf.formBtns && type === 'file') {[m
[32m+[m[32m    str = `<el-form-item>[m
[32m+[m[32m          <el-button type="primary" @click="submitForm">æäº¤</el-button>[m
[32m+[m[32m          <el-button @click="resetForm">é‡ç½®</el-button>[m
[32m+[m[32m        </el-form-item>`[m
[32m+[m[32m    if (someSpanIsNot24) {[m
[32m+[m[32m      str = `<el-col :span="24">[m
[32m+[m[32m          ${str}[m
[32m+[m[32m        </el-col>`[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  return str[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// spanä¸ä¸º24çš„ç”¨el-colåŒ…è£¹[m
[32m+[m[32mfunction colWrapper(element, str) {[m
[32m+[m[32m  if (someSpanIsNot24 || element.span !== 24) {[m
[32m+[m[32m    return `<el-col :span="${element.span}">[m
[32m+[m[32m      ${str}[m
[32m+[m[32m    </el-col>`[m
[32m+[m[32m  }[m
[32m+[m[32m  return str[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mconst layouts = {[m
[32m+[m[32m  colFormItem(element) {[m
[32m+[m[32m    let labelWidth = ''[m
[32m+[m[32m    if (element.labelWidth && element.labelWidth !== confGlobal.labelWidth) {[m
[32m+[m[32m      labelWidth = `label-width="${element.labelWidth}px"`[m
[32m+[m[32m    }[m
[32m+[m[32m    const required = !trigger[element.tag] && element.required ? 'required' : ''[m
[32m+[m[32m    const tagDom = tags[element.tag] ? tags[element.tag](element) : null[m
[32m+[m[32m    let str = `<el-form-item ${labelWidth} label="${element.label}" prop="${element.vModel}" ${required}>[m
[32m+[m[32m        ${tagDom}[m
[32m+[m[32m      </el-form-item>`[m
[32m+[m[32m    str = colWrapper(element, str)[m
[32m+[m[32m    return str[m
[32m+[m[32m  },[m
[32m+[m[32m  rowFormItem(element) {[m
[32m+[m[32m    const type = element.type === 'default' ? '' : `type="${element.type}"`[m
[32m+[m[32m    const justify = element.type === 'default' ? '' : `justify="${element.justify}"`[m
[32m+[m[32m    const align = element.type === 'default' ? '' : `align="${element.align}"`[m
[32m+[m[32m    const gutter = element.gutter ? `gutter="${element.gutter}"` : ''[m
[32m+[m[32m    const children = element.children.map(el => layouts[el.layout](el))[m
[32m+[m[32m    let str = `<el-row ${type} ${justify} ${align} ${gutter}>[m
[32m+[m[32m      ${children.join('\n')}[m
[32m+[m[32m    </el-row>`[m
[32m+[m[32m    str = colWrapper(element, str)[m
[32m+[m[32m    return str[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mconst tags = {[m
[32m+[m[32m  'el-button': el => {[m
[32m+[m[32m    const {[m
[32m+[m[32m      tag, disabled[m
[32m+[m[32m    } = attrBuilder(el)[m
[32m+[m[32m    const type = el.type ? `type="${el.type}"` : ''[m
[32m+[m[32m    const icon = el.icon ? `icon="${el.icon}"` : ''[m
[32m+[m[32m    const size = el.size ? `size="${el.size}"` : ''[m
[32m+[m[32m    let child = buildElButtonChild(el)[m
[32m+[m
[32m+[m[32m    if (child) child = `\n${child}\n` // æ¢è¡Œ[m
[32m+[m[32m    return `<${el.tag} ${type} ${icon} ${size} ${disabled}>${child}</${el.tag}>`[m
[32m+[m[32m  },[m
[32m+[m[32m  'el-input': el => {[m
[32m+[m[32m    const {[m
[32m+[m[32m      disabled, vModel, clearable, placeholder, width[m
[32m+[m[32m    } = attrBuilder(el)[m
[32m+[m[32m    const maxlength = el.maxlength ? `:maxlength="${el.maxlength}"` : ''[m
[32m+[m[32m    const showWordLimit = el['show-word-limit'] ? 'show-word-limit' : ''[m
[32m+[m[32m    const readonly = el.readonly ? 'readonly' : ''[m
[32m+[m[32m    const prefixIcon = el['prefix-icon'] ? `prefix-icon='${el['prefix-icon']}'` : ''[m
[32m+[m[32m    const suffixIcon = el['suffix-icon'] ? `suffix-icon='${el['suffix-icon']}'` : ''[m
[32m+[m[32m    const showPassword = el['show-password'] ? 'show-password' : ''[m
[32m+[m[32m    const type = el.type ? `type="${el.type}"` : ''[m
[32m+[m[32m    const autosize = el.autosize && el.autosize.minRows[m
[32m+[m[32m      ? `:autosize="{minRows: ${el.autosize.minRows}, maxRows: ${el.autosize.maxRows}}"`[m
[32m+[m[32m      : ''[m
[32m+[m[32m    let child = buildElInputChild(el)[m
[32m+[m
[32m+[m[32m    if (child) child = `\n${child}\n` // æ¢è¡Œ[m
[32m+[m[32m    return `<${el.tag} ${vModel} ${type} ${placeholder} ${maxlength} ${showWordLimit} ${readonly} ${disabled} ${clearable} ${prefixIcon} ${suffixIcon} ${showPassword} ${autosize} ${width}>${child}</${el.tag}>`[m
[32m+[m[32m  },[m
[32m+[m[32m  'el-input-number': el => {[m
[32m+[m[32m    const { disabled, vModel, placeholder } = attrBuilder(el)[m
[32m+[m[32m    const controlsPosition = el['controls-position'] ? `controls-position=${el['controls-position']}` : ''[m
[32m+[m[32m    const min = el.min ? `:min='${el.min}'` : ''[m
[32m+[m[32m    const max = el.max ? `:max='${el.max}'` : ''[m
[32m+[m[32m    const step = el.step ? `:step='${el.step}'` : ''[m
[32m+[m[32m    const stepStrictly = el['step-strictly'] ? 'step-strictly' : ''[m
[32m+[m[32m    const precision = el.precision ? `:precision='${el.precision}'` : ''[m
[32m+[m
[32m+[m[32m    return `<${el.tag} ${vModel} ${placeholder} ${step} ${stepStrictly} ${precision} ${controlsPosition} ${min} ${max} ${disabled}></${el.tag}>`[m
[32m+[m[32m  },[m
[32m+[m[32m  'el-select': el => {[m
[32m+[m[32m    const {[m
[32m+[m[32m      disabled, vModel, clearable, placeholder, width[m
[32m+[m[32m    } = attrBuilder(el)[m
[32m+[m[32m    const filterable = el.filterable ? 'filterable' : ''[m
[32m+[m[32m    const multiple = el.multiple ? 'multiple' : ''[m
[32m+[m[32m    let child = buildElSelectChild(el)[m
[32m+[m
[32m+[m[32m    if (child) child = `\n${child}\n` // æ¢è¡Œ[m
[32m+[m[32m    return `<${el.tag} ${vModel} ${placeholder} ${disabled} ${multiple} ${filterable} ${clearable} ${width}>${child}</${el.tag}>`[m
[32m+[m[32m  },[m
[32m+[m[32m  'el-radio-group': el => {[m
[32m+[m[32m    const { disabled, vModel } = attrBuilder(el)[m
[32m+[m[32m    const size = `size="${el.size}"`[m
[32m+[m[32m    let child = buildElRadioGroupChild(el)[m
[32m+[m
[32m+[m[32m    if (child) child = `\n${child}\n` // æ¢è¡Œ[m
[32m+[m[32m    return `<${el.tag} ${vModel} ${size} ${disabled}>${child}</${el.tag}>`[m
[32m+[m[32m  },[m
[32m+[m[32m  'el-checkbox-group': el => {[m
[32m+[m[32m    const { disabled, vModel } = attrBuilder(el)[m
[32m+[m[32m    const size = `size="${el.size}"`[m
[32m+[m[32m    const min = el.min ? `:min="${el.min}"` : ''[m
[32m+[m[32m    const max = el.max ? `:max="${el.max}"` : ''[m
[32m+[m[32m    let child = buildElCheckboxGroupChild(el)[m
[32m+[m
[32m+[m[32m    if (child) child = `\n${child}\n` // æ¢è¡Œ[m
[32m+[m[32m    return `<${el.tag} ${vModel} ${min} ${max} ${size} ${disabled}>${child}</${el.tag}>`[m
[32m+[m[32m  },[m
[32m+[m[32m  'el-switch': el => {[m
[32m+[m[32m    const { disabled, vModel } = attrBuilder(el)[m
[32m+[m[32m    const activeText = el['active-text'] ? `active-text="${el['active-text']}"` : ''[m
[32m+[m[32m    const inactiveText = el['inactive-text'] ? `inactive-text="${el['inactive-text']}"` : ''[m
[32m+[m[32m    const activeColor = el['active-color'] ? `active-color="${el['active-color']}"` : ''[m
[32m+[m[32m    const inactiveColor = el['inactive-color'] ? `inactive-color="${el['inactive-color']}"` : ''[m
[32m+[m[32m    const activeValue = el['active-value'] !== true ? `:active-value='${JSON.stringify(el['active-value'])}'` : ''[m
[32m+[m[32m    const inactiveValue = el['inactive-value'] !== false ? `:inactive-value='${JSON.stringify(el['inactive-value'])}'` : ''[m
[32m+[m
[32m+[m[32m    return `<${el.tag} ${vModel} ${activeText} ${inactiveText} ${activeColor} ${inactiveColor} ${activeValue} ${inactiveValue} ${disabled}></${el.tag}>`[m
[32m+[m[32m  },[m
[32m+[m[32m  'el-cascader': el => {[m
[32m+[m[32m    const {[m
[32m+[m[32m      disabled, vModel, clearable, placeholder, width[m
[32m+[m[32m    } = attrBuilder(el)[m
[32m+[m[32m    const options = el.options ? `:options="${el.vModel}Options"` : ''[m
[32m+[m[32m    const props = el.props ? `:props="${el.vModel}Props"` : ''[m
[32m+[m[32m    const showAllLevels = el['show-all-levels'] ? '' : ':show-all-levels="false"'[m
[32m+[m[32m    const filterable = el.filterable ? 'filterable' : ''[m
[32m+[m[32m    const separator = el.separator === '/' ? '' : `separator="${el.separator}"`[m
[32m+[m
[32m+[m[32m    return `<${el.tag} ${vModel} ${options} ${props} ${width} ${showAllLevels} ${placeholder} ${separator} ${filterable} ${clearable} ${disabled}></${el.tag}>`[m
[32m+[m[32m  },[m
[32m+[m[32m  'el-slider': el => {[m
[32m+[m[32m    const { disabled, vModel } = attrBuilder(el)[m
[32m+[m[32m    const min = el.min ? `:min='${el.min}'` : ''[m
[32m+[m[32m    const max = el.max ? `:max='${el.max}'` : ''[m
[32m+[m[32m    const step = el.step ? `:step='${el.step}'` : ''[m
[32m+[m[32m    const range = el.range ? 'range' : ''[m
[32m+[m[32m    const showStops = el['show-stops'] ? `:show-stops="${el['show-stops']}"` : ''[m
[32m+[m
[32m+[m[32m    return `<${el.tag} ${min} ${max} ${step} ${vModel} ${range} ${showStops} ${disabled}></${el.tag}>`[m
[32m+[m[32m  },[m
[32m+[m[32m  'el-time-picker': el => {[m
[32m+[m[32m    const {[m
[32m+[m[32m      disabled, vModel, clearable, placeholder, width[m
[32m+[m[32m    } = attrBuilder(el)[m
[32m+[m[32m    const startPlaceholder = el['start-placeholder'] ? `start-placeholder="${el['start-placeholder']}"` : ''[m
[32m+[m[32m    const endPlaceholder = el['end-placeholder'] ? `end-placeholder="${el['end-placeholder']}"` : ''[m
[32m+[m[32m    const rangeSeparator = el['range-separator'] ? `range-separator="${el['range-separator']}"` : ''[m
[32m+[m[32m    const isRange = el['is-range'] ? 'is-range' : ''[m
[32m+[m[32m    const format = el.format ? `format="${el.format}"` : ''[m
[32m+[m[32m    const valueFormat = el['value-format'] ? `value-format="${el['value-format']}"` : ''[m
[32m+[m[32m    const pickerOptions = el['picker-options'] ? `:picker-options='${JSON.stringify(el['picker-options'])}'` : ''[m
[32m+[m
[32m+[m[32m    return `<${el.tag} ${vModel} ${isRange} ${format} ${valueFormat} ${pickerOptions} ${width} ${placeholder} ${startPlaceholder} ${endPlaceholder} ${rangeSeparator} ${clearable} ${disabled}></${el.tag}>`[m
[32m+[m[32m  },[m
[32m+[m[32m  'el-date-picker': el => {[m
[32m+[m[32m    const {[m
[32m+[m[32m      disabled, vModel, clearable, placeholder, width[m
[32m+[m[32m    } = attrBuilder(el)[m
[32m+[m[32m    const startPlaceholder = el['start-placeholder'] ? `start-placeholder="${el['start-placeholder']}"` : ''[m
[32m+[m[32m    const endPlaceholder = el['end-placeholder'] ? `end-placeholder="${el['end-placeholder']}"` : ''[m
[32m+[m[32m    const rangeSeparator = el['range-separator'] ? `range-separator="${el['range-separator']}"` : ''[m
[32m+[m[32m    const format = el.format ? `format="${el.format}"` : ''[m
[32m+[m[32m    const valueFormat = el['value-format'] ? `value-format="${el['value-format']}"` : ''[m
[32m+[m[32m    const type = el.type === 'date' ? '' : `type="${el.type}"`[m
[32m+[m[32m    const readonly = el.readonly ? 'readonly' : ''[m
[32m+[m
[32m+[m[32m    return `<${el.tag} ${type} ${vModel} ${format} ${valueFormat} ${width} ${placeholder} ${startPlaceholder} ${endPlaceholder} ${rangeSeparator} ${clearable} ${readonly} ${disabled}></${el.tag}>`[m
[32m+[m[32m  },[m
[32m+[m[32m  'el-rate': el => {[m
[32m+[m[32m    const { disabled, vModel } = attrBuilder(el)[m
[32m+[m[32m    const max = el.max ? `:max='${el.max}'` : ''[m
[32m+[m[32m    const allowHalf = el['allow-half'] ? 'allow-half' : ''[m
[32m+[m[32m    const showText = el['show-text'] ? 'show-text' : ''[m
[32m+[m[32m    const showScore = el['show-score'] ? 'show-score' : ''[m
[32m+[m
[32m+[m[32m    return `<${el.tag} ${vModel} ${allowHalf} ${showText} ${showScore} ${disabled}></${el.tag}>`[m
[32m+[m[32m  },[m
[32m+[m[32m  'el-color-picker': el => {[m
[32m+[m[32m    const { disabled, vModel } = attrBuilder(el)[m
[32m+[m[32m    const size = `size="${el.size}"`[m
[32m+[m[32m    const showAlpha = el['show-alpha'] ? 'show-alpha' : ''[m
[32m+[m[32m    const colorFormat = el['color-format'] ? `color-format="${el['color-format']}"` : ''[m
[32m+[m
[32m+[m[32m    return `<${el.tag} ${vModel} ${size} ${showAlpha} ${colorFormat} ${disabled}></${el.tag}>`[m
[32m+[m[32m  },[m
[32m+[m[32m  'el-upload': el => {[m
[32m+[m[32m    const disabled = el.disabled ? ':disabled=\'true\'' : ''[m
[32m+[m[32m    const action = el.action ? `:action="${el.vModel}Action"` : ''[m
[32m+[m[32m    const multiple = el.multiple ? 'multiple' : ''[m
[32m+[m[32m    const listType = el['list-type'] !== 'text' ? `list-type="${el['list-type']}"` : ''[m
[32m+[m[32m    const accept = el.accept ? `accept="${el.accept}"` : ''[m
[32m+[m[32m    const name = el.name !== 'file' ? `name="${el.name}"` : ''[m
[32m+[m[32m    const autoUpload = el['auto-upload'] === false ? ':auto-upload="false"' : ''[m
[32m+[m[32m    const beforeUpload = `:before-upload="${el.vModel}BeforeUpload"`[m
[32m+[m[32m    const fileList = `:file-list="${el.vModel}fileList"`[m
[32m+[m[32m    const ref = `ref="${el.vModel}"`[m
[32m+[m[32m    let child = buildElUploadChild(el)[m
[32m+[m
[32m+[m[32m    if (child) child = `\n${child}\n` // æ¢è¡Œ[m
[32m+[m[32m    return `<${el.tag} ${ref} ${fileList} ${action} ${autoUpload} ${multiple} ${beforeUpload} ${listType} ${accept} ${name} ${disabled}>${child}</${el.tag}>`[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction attrBuilder(el) {[m
[32m+[m[32m  return {[m
[32m+[m[32m    vModel: `v-model="${confGlobal.formModel}.${el.vModel}"`,[m
[32m+[m[32m    clearable: el.clearable ? 'clearable' : '',[m
[32m+[m[32m    placeholder: el.placeholder ? `placeholder="${el.placeholder}"` : '',[m
[32m+[m[32m    width: el.style && el.style.width ? ':style="{width: \'100%\'}"' : '',[m
[32m+[m[32m    disabled: el.disabled ? ':disabled=\'true\'' : ''[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// el-buttin å­çº§[m
[32m+[m[32mfunction buildElButtonChild(conf) {[m
[32m+[m[32m  const children = [][m
[32m+[m[32m  if (conf.default) {[m
[32m+[m[32m    children.push(conf.default)[m
[32m+[m[32m  }[m
[32m+[m[32m  return children.join('\n')[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// el-input innerHTML[m
[32m+[m[32mfunction buildElInputChild(conf) {[m
[32m+[m[32m  const children = [][m
[32m+[m[32m  if (conf.prepend) {[m
[32m+[m[32m    children.push(`<template slot="prepend">${conf.prepend}</template>`)[m
[32m+[m[32m  }[m
[32m+[m[32m  if (conf.append) {[m
[32m+[m[32m    children.push(`<template slot="append">${conf.append}</template>`)[m
[32m+[m[32m  }[m
[32m+[m[32m  return children.join('\n')[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction buildElSelectChild(conf) {[m
[32m+[m[32m  const children = [][m
[32m+[m[32m  if (conf.options && conf.options.length) {[m
[32m+[m[32m    children.push(`<el-option v-for="(item, index) in ${conf.vModel}Options" :key="index" :label="item.label" :value="item.value" :disabled="item.disabled"></el-option>`)[m
[32m+[m[32m  }[m
[32m+[m[32m  return children.join('\n')[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction buildElRadioGroupChild(conf) {[m
[32m+[m[32m  const children = [][m
[32m+[m[32m  if (conf.options && conf.options.length) {[m
[32m+[m[32m    const tag = conf.optionType === 'button' ? 'el-radio-button' : 'el-radio'[m
[32m+[m[32m    const border = conf.border ? 'border' : ''[m
[32m+[m[32m    children.push(`<${tag} v-for="(item, index) in ${conf.vModel}Options" :key="index" :label="item.value" :disabled="item.disabled" ${border}>{{item.label}}</${tag}>`)[m
[32m+[m[32m  }[m
[32m+[m[32m  return children.join('\n')[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction buildElCheckboxGroupChild(conf) {[m
[32m+[m[32m  const children = [][m
[32m+[m[32m  if (conf.options && conf.options.length) {[m
[32m+[m[32m    const tag = conf.optionType === 'button' ? 'el-checkbox-button' : 'el-checkbox'[m
[32m+[m[32m    const border = conf.border ? 'border' : ''[m
[32m+[m[32m    children.push(`<${tag} v-for="(item, index) in ${conf.vModel}Options" :key="index" :label="item.value" :disabled="item.disabled" ${border}>{{item.label}}</${tag}>`)[m
[32m+[m[32m  }[m
[32m+[m[32m  return children.join('\n')[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction buildElUploadChild(conf) {[m
[32m+[m[32m  const list = [][m
[32m+[m[32m  if (conf['list-type'] === 'picture-card') list.push('<i class="el-icon-plus"></i>')[m
[32m+[m[32m  else list.push(`<el-button size="small" type="primary" icon="el-icon-upload">${conf.buttonText}</el-button>`)[m
[32m+[m[32m  if (conf.showTip) list.push(`<div slot="tip" class="el-upload__tip">åªèƒ½ä¸Šä¼ ä¸è¶…è¿‡ ${conf.fileSize}${conf.sizeUnit} çš„${conf.accept}æ–‡ä»¶</div>`)[m
[32m+[m[32m  return list.join('\n')[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport function makeUpHtml(conf, type) {[m
[32m+[m[32m  const htmlList = [][m
[32m+[m[32m  confGlobal = conf[m
[32m+[m[32m  someSpanIsNot24 = conf.fields.some(item => item.span !== 24)[m
[32m+[m[32m  conf.fields.forEach(el => {[m
[32m+[m[32m    htmlList.push(layouts[el.layout](el))[m
[32m+[m[32m  })[m
[32m+[m[32m  const htmlStr = htmlList.join('\n')[m
[32m+[m
[32m+[m[32m  let temp = buildFormTemplate(conf, htmlStr, type)[m
[32m+[m[32m  if (type === 'dialog') {[m
[32m+[m[32m    temp = dialogWrapper(temp)[m
[32m+[m[32m  }[m
[32m+[m[32m  confGlobal = null[m
[32m+[m[32m  return temp[m
[32m+[m[32m}[m
[1mdiff --git a/src/utils/generator/icon.json b/src/utils/generator/icon.json[m
[1mnew file mode 100644[m
[1mindex 00000000..2d9999a3[m
[1m--- /dev/null[m
[1m+++ b/src/utils/generator/icon.json[m
[36m@@ -0,0 +1 @@[m
[32m+[m[32m["platform-eleme","eleme","delete-solid","delete","s-tools","setting","user-solid","user","phone","phone-outline","more","more-outline","star-on","star-off","s-goods","goods","warning","warning-outline","question","info","remove","circle-plus","success","error","zoom-in","zoom-out","remove-outline","circle-plus-outline","circle-check","circle-close","s-help","help","minus","plus","check","close","picture","picture-outline","picture-outline-round","upload","upload2","download","camera-solid","camera","video-camera-solid","video-camera","message-solid","bell","s-cooperation","s-order","s-platform","s-fold","s-unfold","s-operation","s-promotion","s-home","s-release","s-ticket","s-management","s-open","s-shop","s-marketing","s-flag","s-comment","s-finance","s-claim","s-custom","s-opportunity","s-data","s-check","s-grid","menu","share","d-caret","caret-left","caret-right","caret-bottom","caret-top","bottom-left","bottom-right","back","right","bottom","top","top-left","top-right","arrow-left","arrow-right","arrow-down","arrow-up","d-arrow-left","d-arrow-right","video-pause","video-play","refresh","refresh-right","refresh-left","finished","sort","sort-up","sort-down","rank","loading","view","c-scale-to-original","date","edit","edit-outline","folder","folder-opened","folder-add","folder-remove","folder-delete","folder-checked","tickets","document-remove","document-delete","document-copy","document-checked","document","document-add","printer","paperclip","takeaway-box","search","monitor","attract","mobile","scissors","umbrella","headset","brush","mouse","coordinate","magic-stick","reading","data-line","data-board","pie-chart","data-analysis","collection-tag","film","suitcase","suitcase-1","receiving","collection","files","notebook-1","notebook-2","toilet-paper","office-building","school","table-lamp","house","no-smoking","smoking","shopping-cart-full","shopping-cart-1","shopping-cart-2","shopping-bag-1","shopping-bag-2","sold-out","sell","present","box","bank-card","money","coin","wallet","discount","price-tag","news","guide","male","female","thumb","cpu","link","connection","open","turn-off","set-up","chat-round","chat-line-round","chat-square","chat-dot-round","chat-dot-square","chat-line-square","message","postcard","position","turn-off-microphone","microphone","close-notification","bangzhu","time","odometer","crop","aim","switch-button","full-screen","copy-document","mic","stopwatch","medal-1","medal","trophy","trophy-1","first-aid-kit","discover","place","location","location-outline","location-information","add-location","delete-location","map-location","alarm-clock","timer","watch-1","watch","lock","unlock","key","service","mobile-phone","bicycle","truck","ship","basketball","football","soccer","baseball","wind-power","light-rain","lightning","heavy-rain","sunrise","sunrise-1","sunset","sunny","cloudy","partly-cloudy","cloudy-and-sunny","moon","moon-night","dish","dish-1","food","chicken","fork-spoon","knife-fork","burger","tableware","sugar","dessert","ice-cream","hot-water","water-cup","coffee-cup","cold-drink","goblet","goblet-full","goblet-square","goblet-square-full","refrigerator","grape","watermelon","cherry","apple","pear","orange","coffee","ice-tea","ice-drink","milk-tea","potato-strips","lollipop","ice-cream-square","ice-cream-round"][m
\ No newline at end of file[m
[1mdiff --git a/src/utils/generator/js.js b/src/utils/generator/js.js[m
[1mnew file mode 100644[m
[1mindex 00000000..1aac45af[m
[1m--- /dev/null[m
[1m+++ b/src/utils/generator/js.js[m
[36m@@ -0,0 +1,372 @@[m
[32m+[m[32mimport { titleCase } from '@/utils/index'[m
[32m+[m[32mimport { trigger } from './config'[m
[32m+[m[32m// æ–‡ä»¶å¤§å°è®¾ç½®[m
[32m+[m[32mconst units = {[m
[32m+[m[32m  KB: '1024',[m
[32m+[m[32m  MB: '1024 / 1024',[m
[32m+[m[32m  GB: '1024 / 1024 / 1024',[m
[32m+[m[32m}[m
[32m+[m[32m/**[m
[32m+[m[32m * @name: ç”Ÿæˆjséœ€è¦çš„æ•°æ®[m
[32m+[m[32m * @description: ç”Ÿæˆjséœ€è¦çš„æ•°æ®[m
[32m+[m[32m * @param {*} conf[m
[32m+[m[32m * @param {*} type å¼¹çª—æˆ–è¡¨å•[m
[32m+[m[32m * @return {*}[m
[32m+[m[32m */[m
[32m+[m[32mexport function makeUpJs(conf, type) {[m
[32m+[m[32m  conf = JSON.parse(JSON.stringify(conf))[m
[32m+[m[32m  const dataList = [][m
[32m+[m[32m  const ruleList = [][m
[32m+[m[32m  const optionsList = [][m
[32m+[m[32m  const propsList = [][m
[32m+[m[32m  const methodList = [][m
[32m+[m[32m  const uploadVarList = [][m
[32m+[m
[32m+[m[32m  conf.fields.forEach((el) => {[m
[32m+[m[32m    buildAttributes([m
[32m+[m[32m      el,[m
[32m+[m[32m      dataList,[m
[32m+[m[32m      ruleList,[m
[32m+[m[32m      optionsList,[m
[32m+[m[32m      methodList,[m
[32m+[m[32m      propsList,[m
[32m+[m[32m      uploadVarList[m
[32m+[m[32m    )[m
[32m+[m[32m  })[m
[32m+[m
[32m+[m[32m  const script = buildexport([m
[32m+[m[32m    conf,[m
[32m+[m[32m    type,[m
[32m+[m[32m    dataList.join('\n'),[m
[32m+[m[32m    ruleList.join('\n'),[m
[32m+[m[32m    optionsList.join('\n'),[m
[32m+[m[32m    uploadVarList.join('\n'),[m
[32m+[m[32m    propsList.join('\n'),[m
[32m+[m[32m    methodList.join('\n')[m
[32m+[m[32m  )[m
[32m+[m[41m  [m
[32m+[m[32m  return script[m
[32m+[m[32m}[m
[32m+[m[32m/**[m
[32m+[m[32m * @name: ç”Ÿæˆå‚æ•°[m
[32m+[m[32m * @description: ç”Ÿæˆå‚æ•°ï¼ŒåŒ…æ‹¬è¡¨å•æ•°æ®è¡¨å•éªŒè¯æ•°æ®ï¼Œå¤šé€‰é€‰é¡¹æ•°æ®ï¼Œä¸Šä¼ æ•°æ®ç­‰[m
[32m+[m[32m * @return {*}[m
[32m+[m[32m */[m
[32m+[m[32mfunction buildAttributes([m
[32m+[m[32m  el,[m
[32m+[m[32m  dataList,[m
[32m+[m[32m  ruleList,[m
[32m+[m[32m  optionsList,[m
[32m+[m[32m  methodList,[m
[32m+[m[32m  propsList,[m
[32m+[m[32m  uploadVarList[m
[32m+[m[32m){[m
[32m+[m[32m  buildData(el, dataList)[m
[32m+[m[32m  buildRules(el, ruleList)[m
[32m+[m
[32m+[m[32m  if (el.options && el.options.length) {[m
[32m+[m[32m    buildOptions(el, optionsList)[m
[32m+[m[32m    if (el.dataType === 'dynamic') {[m
[32m+[m[32m      const model = `${el.vModel}Options`[m
[32m+[m[32m      const options = titleCase(model)[m
[32m+[m[32m      buildOptionMethod(`get${options}`, model, methodList)[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  if (el.props && el.props.props) {[m
[32m+[m[32m    buildProps(el, propsList)[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  if (el.action && el.tag === 'el-upload') {[m
[32m+[m[32m    uploadVarList.push([m
[32m+[m[32m      `[m
[32m+[m[32m      // ä¸Šä¼ è¯·æ±‚è·¯å¾„[m
[32m+[m[32m      const ${el.vModel}Action = ref('${el.action}')[m
[32m+[m[32m      // ä¸Šä¼ æ–‡ä»¶åˆ—è¡¨[m
[32m+[m[32m      const ${el.vModel}fileList =  ref([])`[m
[32m+[m[32m    )[m
[32m+[m[32m    methodList.push(buildBeforeUpload(el))[m
[32m+[m[32m    if (!el['auto-upload']) {[m
[32m+[m[32m      methodList.push(buildSubmitUpload(el))[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  if (el.children) {[m
[32m+[m[32m    el.children.forEach((el2) => {[m
[32m+[m[32m      buildAttributes([m
[32m+[m[32m        el2,[m
[32m+[m[32m        dataList,[m
[32m+[m[32m        ruleList,[m
[32m+[m[32m        optionsList,[m
[32m+[m[32m        methodList,[m
[32m+[m[32m        propsList,[m
[32m+[m[32m        uploadVarList[m
[32m+[m[32m      )[m
[32m+[m[32m    })[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m/**[m
[32m+[m[32m * @name: ç”Ÿæˆè¡¨å•æ•°æ®formData[m
[32m+[m[32m * @description: ç”Ÿæˆè¡¨å•æ•°æ®formData[m
[32m+[m[32m * @param {*} conf[m
[32m+[m[32m * @param {*} dataList æ•°æ®åˆ—è¡¨[m
[32m+[m[32m * @return {*}[m
[32m+[m[32m */[m
[32m+[m[32mfunction buildData(conf, dataList) {[m
[32m+[m[32m  if (conf.vModel === undefined) return[m
[32m+[m[32m  let defaultValue[m
[32m+[m[32m  if (typeof conf.defaultValue === 'string' && !conf.multiple) {[m
[32m+[m[32m    defaultValue = `'${conf.defaultValue}'`[m
[32m+[m[32m  } else {[m
[32m+[m[32m    defaultValue = `${JSON.stringify(conf.defaultValue)}`[m
[32m+[m[32m  }[m
[32m+[m[32m  dataList.push(`${conf.vModel}: ${defaultValue},`)[m
[32m+[m[32m}[m
[32m+[m[32m/**[m
[32m+[m[32m * @name: ç”Ÿæˆè¡¨å•éªŒè¯æ•°æ®rule[m
[32m+[m[32m * @description: ç”Ÿæˆè¡¨å•éªŒè¯æ•°æ®rule[m
[32m+[m[32m * @param {*} conf[m
[32m+[m[32m * @param {*} ruleList éªŒè¯æ•°æ®åˆ—è¡¨[m
[32m+[m[32m * @return {*}[m
[32m+[m[32m */[m
[32m+[m[32mfunction buildRules(conf, ruleList) {[m
[32m+[m[32m  if (conf.vModel === undefined) return[m
[32m+[m[32m  const rules = [][m
[32m+[m[32m  if (trigger[conf.tag]) {[m
[32m+[m[32m    if (conf.required) {[m
[32m+[m[32m      const type = Array.isArray(conf.defaultValue) ? "type: 'array'," : ''[m
[32m+[m[32m      let message = Array.isArray(conf.defaultValue)[m
[32m+[m[32m        ? `è¯·è‡³å°‘é€‰æ‹©ä¸€ä¸ª${conf.vModel}`[m
[32m+[m[32m        : conf.placeholder[m
[32m+[m[32m      if (message === undefined) message = `${conf.label}ä¸èƒ½ä¸ºç©º`[m
[32m+[m[32m      rules.push([m
[32m+[m[32m        `{ required: true, ${type} message: '${message}', trigger: '${[m
[32m+[m[32m          trigger[conf.tag][m
[32m+[m[32m        }' }`[m
[32m+[m[32m      )[m
[32m+[m[32m    }[m
[32m+[m[32m    if (conf.regList && Array.isArray(conf.regList)) {[m
[32m+[m[32m      conf.regList.forEach((item) => {[m
[32m+[m[32m        if (item.pattern) {[m
[32m+[m[32m          console.log(item.pattern);[m
[32m+[m[32m          rules.push([m
[32m+[m[32m            `{ pattern: new RegExp(${item.pattern}), message: '${[m
[32m+[m[32m              item.message[m
[32m+[m[32m            }', trigger: '${trigger[conf.tag]}' }`[m
[32m+[m[32m          )[m
[32m+[m[32m        }[m
[32m+[m[32m      })[m
[32m+[m[32m    }[m
[32m+[m[32m    ruleList.push(`${conf.vModel}: [${rules.join(',')}],`)[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m/**[m
[32m+[m[32m * @name: ç”Ÿæˆé€‰é¡¹æ•°æ®[m
[32m+[m[32m * @description: ç”Ÿæˆé€‰é¡¹æ•°æ®ï¼Œå•é€‰å¤šé€‰ä¸‹æ‹‰ç­‰[m
[32m+[m[32m * @param {*} conf[m
[32m+[m[32m * @param {*} optionsList é€‰é¡¹æ•°æ®åˆ—è¡¨[m
[32m+[m[32m * @return {*}[m
[32m+[m[32m */[m
[32m+[m[32mfunction buildOptions(conf, optionsList) {[m
[32m+[m[32m  if (conf.vModel === undefined) return[m
[32m+[m[32m  if (conf.dataType === 'dynamic') {[m
[32m+[m[32m    conf.options = [][m
[32m+[m[32m  }[m
[32m+[m[32m  const str = `const ${conf.vModel}Options = ref(${JSON.stringify(conf.options)})`[m
[32m+[m[32m  optionsList.push(str)[m
[32m+[m[32m}[m
[32m+[m[32m/**[m
[32m+[m[32m * @name: ç”Ÿæˆæ–¹æ³•[m
[32m+[m[32m * @description: ç”Ÿæˆæ–¹æ³•[m
[32m+[m[32m * @param {*} methodName æ–¹æ³•å[m
[32m+[m[32m * @param {*} model[m
[32m+[m[32m * @param {*} methodList æ–¹æ³•åˆ—è¡¨[m
[32m+[m[32m * @return {*}[m
[32m+[m[32m */[m
[32m+[m[32mfunction buildOptionMethod(methodName, model, methodList) {[m
[32m+[m[32m  const str = `function ${methodName}() {[m
[32m+[m[32m    // TODO å‘èµ·è¯·æ±‚è·å–æ•°æ®[m
[32m+[m[32m    ${model}.value[m
[32m+[m[32m  }`[m
[32m+[m[32m  methodList.push(str)[m
[32m+[m[32m}[m
[32m+[m[32m/**[m
[32m+[m[32m * @name: ç”Ÿæˆè¡¨å•ç»„ä»¶éœ€è¦çš„propsè®¾ç½®[m
[32m+[m[32m * @description: ç”Ÿæˆè¡¨å•ç»„ä»¶éœ€è¦çš„propsè®¾ç½®ï¼Œå¦‚ï¼›çº§è”ç»„ä»¶[m
[32m+[m[32m * @param {*} conf[m
[32m+[m[32m * @param {*} propsList[m
[32m+[m[32m * @return {*}[m
[32m+[m[32m */[m
[32m+[m[32mfunction buildProps(conf, propsList) {[m
[32m+[m[32m  if (conf.dataType === 'dynamic') {[m
[32m+[m[32m    conf.valueKey !== 'value' && (conf.props.props.value = conf.valueKey)[m
[32m+[m[32m    conf.labelKey !== 'label' && (conf.props.props.label = conf.labelKey)[m
[32m+[m[32m    conf.childrenKey !== 'children' &&[m
[32m+[m[32m      (conf.props.props.children = conf.childrenKey)[m
[32m+[m[32m  }[m
[32m+[m[32m  const str = `[m
[32m+[m[32m  // propsè®¾ç½®[m
[32m+[m[32m  const ${conf.vModel}Props = ref(${JSON.stringify(conf.props.props)})`[m
[32m+[m[32m  propsList.push(str)[m
[32m+[m[32m}[m
[32m+[m[32m/**[m
[32m+[m[32m * @name: ç”Ÿæˆä¸Šä¼ ç»„ä»¶çš„ç›¸å…³å†…å®¹[m
[32m+[m[32m * @description: ç”Ÿæˆä¸Šä¼ ç»„ä»¶çš„ç›¸å…³å†…å®¹[m
[32m+[m[32m * @param {*} conf[m
[32m+[m[32m * @return {*}[m
[32m+[m[32m */[m
[32m+[m[32mfunction buildBeforeUpload(conf) {[m
[32m+[m[32m  const unitNum = units[conf.sizeUnit][m
[32m+[m[32m  let rightSizeCode = ''[m
[32m+[m[32m  let acceptCode = ''[m
[32m+[m[32m  const returnList = [][m
[32m+[m[32m  if (conf.fileSize) {[m
[32m+[m[32m    rightSizeCode = `let isRightSize = file.size / ${unitNum} < ${conf.fileSize}[m
[32m+[m[32m    if(!isRightSize){[m
[32m+[m[32m      ElMessage.error('æ–‡ä»¶å¤§å°è¶…è¿‡ ${conf.fileSize}${conf.sizeUnit}')[m
[32m+[m[32m    }`[m
[32m+[m[32m    returnList.push('isRightSize')[m
[32m+[m[32m  }[m
[32m+[m[32m  if (conf.accept) {[m
[32m+[m[32m    acceptCode = `let isAccept = new RegExp('${conf.accept}').test(file.type)[m
[32m+[m[32m    if(!isAccept){[m
[32m+[m[32m      ElMessage.error('åº”è¯¥é€‰æ‹©${conf.accept}ç±»å‹çš„æ–‡ä»¶')[m
[32m+[m[32m    }`[m
[32m+[m[32m    returnList.push('isAccept')[m
[32m+[m[32m  }[m
[32m+[m[32m  const str = `[m
[32m+[m[32m  /**[m
[32m+[m[32m   * @name: ä¸Šä¼ ä¹‹å‰çš„æ–‡ä»¶åˆ¤æ–­[m
[32m+[m[32m   * @description: ä¸Šä¼ ä¹‹å‰çš„æ–‡ä»¶åˆ¤æ–­ï¼Œåˆ¤æ–­æ–‡ä»¶å¤§å°æ–‡ä»¶ç±»å‹ç­‰[m
[32m+[m[32m   * @param {*} file[m
[32m+[m[32m   * @return {*}[m
[32m+[m[32m   */[m[41m  [m
[32m+[m[32m  function ${conf.vModel}BeforeUpload(file) {[m
[32m+[m[32m    ${rightSizeCode}[m
[32m+[m[32m    ${acceptCode}[m
[32m+[m[32m    return ${returnList.join('&&')}[m
[32m+[m[32m  }`[m
[32m+[m[32m  return returnList.length ? str : ''[m
[32m+[m[32m}[m
[32m+[m[32m/**[m
[32m+[m[32m * @name: ç”Ÿæˆæäº¤è¡¨å•æ–¹æ³•[m
[32m+[m[32m * @description: ç”Ÿæˆæäº¤è¡¨å•æ–¹æ³•[m
[32m+[m[32m * @param {Object} conf vModel è¡¨å•ref[m
[32m+[m[32m * @return {*}[m
[32m+[m[32m */[m
[32m+[m[32mfunction buildSubmitUpload(conf) {[m
[32m+[m[32m  const str = `function submitUpload() {[m
[32m+[m[32m    this.$refs['${conf.vModel}'].submit()[m
[32m+[m[32m  }`[m
[32m+[m[32m  return str[m
[32m+[m[32m}[m
[32m+[m[32m/**[m
[32m+[m[32m * @name: ç»„è£…jsä»£ç [m
[32m+[m[32m * @description: ç»„è£…jsä»£ç æ–¹æ³•[m
[32m+[m[32m * @return {*}[m
[32m+[m[32m */[m
[32m+[m[32mfunction buildexport([m
[32m+[m[32m  conf,[m
[32m+[m[32m  type,[m
[32m+[m[32m  data,[m
[32m+[m[32m  rules,[m
[32m+[m[32m  selectOptions,[m
[32m+[m[32m  uploadVar,[m
[32m+[m[32m  props,[m
[32m+[m[32m  methods[m
[32m+[m[32m) {[m
[32m+[m[32m  console.log('props', props)[m
[32m+[m[32m  let str = `[m
[32m+[m[32m    import { ElMessage } from 'element-plus'[m
[32m+[m[32m    const ${conf.formRef} = ref()[m
[32m+[m[32m    const data = reactive({[m
[32m+[m[32m      ${conf.formModel}: {[m
[32m+[m[32m        ${data}[m
[32m+[m[32m      },[m
[32m+[m[32m      ${conf.formRules}: {[m
[32m+[m[32m        ${rules}[m
[32m+[m[32m      }[m
[32m+[m[32m    })[m
[32m+[m
[32m+[m[32m    const {${conf.formModel}, ${conf.formRules}} = toRefs(data)[m
[32m+[m
[32m+[m[32m    ${selectOptions}[m
[32m+[m
[32m+[m[32m    ${uploadVar}[m
[32m+[m
[32m+[m[32m    ${props}[m
[32m+[m
[32m+[m[32m    ${methods}[m
[32m+[m[32m  `[m
[32m+[m[41m  [m
[32m+[m[32m  if(type === 'dialog') {[m
[32m+[m[32m    str += `[m
[32m+[m[32m      // å¼¹çª—è®¾ç½®[m
[32m+[m[32m      const dialogVisible = defineModel()[m
[32m+[m[32m      // å¼¹çª—ç¡®è®¤å›è°ƒ[m
[32m+[m[32m      const emit = defineEmits(['confirm'])[m
[32m+[m[32m      /**[m
[32m+[m[32m       * @name: å¼¹çª—æ‰“å¼€åæ‰§è¡Œ[m
[32m+[m[32m       * @description: å¼¹çª—æ‰“å¼€åæ‰§è¡Œæ–¹æ³•[m
[32m+[m[32m       * @return {*}[m
[32m+[m[32m       */[m
[32m+[m[32m      function onOpen(){[m
[32m+[m
[32m+[m[32m      }[m
[32m+[m[32m      /**[m
[32m+[m[32m       * @name: å¼¹çª—å…³é—­æ—¶æ‰§è¡Œ[m
[32m+[m[32m       * @description: å¼¹çª—å…³é—­æ–¹æ³•ï¼Œé‡ç½®è¡¨å•[m
[32m+[m[32m       * @return {*}[m
[32m+[m[32m       */[m
[32m+[m[32m      function onClose(){[m
[32m+[m[32m        ${conf.formRef}.value.resetFields()[m
[32m+[m[32m      }[m
[32m+[m[32m      /**[m
[32m+[m[32m       * @name: å¼¹çª—å–æ¶ˆ[m
[32m+[m[32m       * @description: å¼¹çª—å–æ¶ˆæ–¹æ³•[m
[32m+[m[32m       * @return {*}[m
[32m+[m[32m       */[m
[32m+[m[32m      function close(){[m
[32m+[m[32m        dialogVisible.value = false[m
[32m+[m[32m      }[m
[32m+[m[32m      /**[m
[32m+[m[32m       * @name: å¼¹çª—è¡¨å•æäº¤[m
[32m+[m[32m       * @description: å¼¹çª—è¡¨å•æäº¤æ–¹æ³•[m
[32m+[m[32m       * @return {*}[m
[32m+[m[32m       */[m
[32m+[m[32m      function handelConfirm(){[m
[32m+[m[32m        ${conf.formRef}.value.validate((valid) => {[m
[32m+[m[32m          if (!valid) return[m
[32m+[m[32m          // TODO æäº¤è¡¨å•[m
[32m+[m
[32m+[m[32m          close()[m
[32m+[m[32m          // å›è°ƒçˆ¶çº§ç»„ä»¶[m
[32m+[m[32m          emit('confirm')[m
[32m+[m[32m        })[m
[32m+[m[32m      }[m
[32m+[m[32m    `[m
[32m+[m[32m  } else {[m
[32m+[m[32m    str += `[m
[32m+[m[32m    /**[m
[32m+[m[32m     * @name: è¡¨å•æäº¤[m
[32m+[m[32m     * @description: è¡¨å•æäº¤æ–¹æ³•[m
[32m+[m[32m     * @return {*}[m
[32m+[m[32m     */[m
[32m+[m[32m    function submitForm() {[m
[32m+[m[32m      ${conf.formRef}.value.validate((valid) => {[m
[32m+[m[32m        if (!valid) return[m
[32m+[m[32m        // TODO æäº¤è¡¨å•[m
[32m+[m[32m      })[m
[32m+[m[32m    }[m
[32m+[m[32m    /**[m
[32m+[m[32m     * @name: è¡¨å•é‡ç½®[m
[32m+[m[32m     * @description: è¡¨å•é‡ç½®æ–¹æ³•[m
[32m+[m[32m     * @return {*}[m
[32m+[m[32m     */[m
[32m+[m[32m    function resetForm() {[m
[32m+[m[32m      ${conf.formRef}.value.resetFields()[m
[32m+[m[32m    }[m
[32m+[m[32m    `[m
[32m+[m[32m  }[m
[32m+[m[32m  return str[m
[32m+[m[32m}[m
[1mdiff --git a/src/utils/generator/render.js b/src/utils/generator/render.js[m
[1mnew file mode 100644[m
[1mindex 00000000..03a4f2d7[m
[1m--- /dev/null[m
[1m+++ b/src/utils/generator/render.js[m
[36m@@ -0,0 +1,165 @@[m
[32m+[m[32mimport { defineComponent, h } from 'vue'[m
[32m+[m[32mimport { makeMap } from '@/utils/index'[m
[32m+[m
[32m+[m[32mconst isAttr = makeMap([m
[32m+[m[32m  'accept,accept-charset,accesskey,action,align,alt,async,autocomplete,' +[m
[32m+[m[32m  'autofocus,autoplay,autosave,bgcolor,border,buffered,challenge,charset,' +[m
[32m+[m[32m  'checked,cite,class,code,codebase,color,cols,colspan,content,http-equiv,' +[m
[32m+[m[32m  'name,contenteditable,contextmenu,controls,coords,data,datetime,default,' +[m
[32m+[m[32m  'defer,dir,dirname,disabled,download,draggable,dropzone,enctype,method,for,' +[m
[32m+[m[32m  'form,formaction,headers,height,hidden,high,href,hreflang,http-equiv,' +[m
[32m+[m[32m  'icon,id,ismap,itemprop,keytype,kind,label,lang,language,list,loop,low,' +[m
[32m+[m[32m  'manifest,max,maxlength,media,method,GET,POST,min,multiple,email,file,' +[m
[32m+[m[32m  'muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,' +[m
[32m+[m[32m  'preload,radiogroup,readonly,rel,required,reversed,rows,rowspan,sandbox,' +[m
[32m+[m[32m  'scope,scoped,seamless,selected,shape,size,type,text,password,sizes,span,' +[m
[32m+[m[32m  'spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,' +[m
[32m+[m[32m  'target,title,type,usemap,value,width,wrap' + 'prefix-icon'[m
[32m+[m[32m)[m
[32m+[m[32mconst isNotProps = makeMap([m
[32m+[m[32m  'layout,prepend,regList,tag,document,changeTag,defaultValue'[m
[32m+[m[32m)[m
[32m+[m
[32m+[m[32mfunction useVModel(props, emit) {[m
[32m+[m[32m  return {[m
[32m+[m[32m    modelValue: props.defaultValue,[m
[32m+[m[32m    'onUpdate:modelValue': (val) => emit('update:modelValue', val),[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32mconst componentChild = {[m
[32m+[m[32m  'el-button': {[m
[32m+[m[32m    default(h, conf, key) {[m
[32m+[m[32m      return conf[key][m
[32m+[m[32m    },[m
[32m+[m[32m  },[m
[32m+[m[32m  'el-select': {[m
[32m+[m[32m    options(h, conf, key) {[m
[32m+[m[32m      return conf.options.map(item => h(resolveComponent('el-option'), {[m
[32m+[m[32m        label: item.label,[m
[32m+[m[32m        value: item.value,[m
[32m+[m[32m      }))[m
[32m+[m[32m    }[m
[32m+[m[32m  },[m
[32m+[m[32m  'el-radio-group': {[m
[32m+[m[32m    options(h, conf, key) {[m
[32m+[m[32m      return conf.optionType === 'button' ? conf.options.map(item => h(resolveComponent('el-checkbox-button'), {[m
[32m+[m[32m        label: item.value,[m
[32m+[m[32m      }, () => item.label)) : conf.options.map(item => h(resolveComponent('el-radio'), {[m
[32m+[m[32m        label: item.value,[m
[32m+[m[32m        border: conf.border,[m
[32m+[m[32m      }, () => item.label))[m
[32m+[m[32m    }[m
[32m+[m[32m  },[m
[32m+[m[32m  'el-checkbox-group': {[m
[32m+[m[32m    options(h, conf, key) {[m
[32m+[m[32m      return conf.optionType === 'button' ? conf.options.map(item => h(resolveComponent('el-checkbox-button'), {[m
[32m+[m[32m        label: item.value,[m
[32m+[m[32m      }, () => item.label)) : conf.options.map(item => h(resolveComponent('el-checkbox'), {[m
[32m+[m[32m        label: item.value,[m
[32m+[m[32m        border: conf.border,[m
[32m+[m[32m      }, () => item.label))[m
[32m+[m[32m    }[m
[32m+[m[32m  },[m
[32m+[m[32m  'el-upload': {[m
[32m+[m[32m    'list-type': (h, conf, key) => {[m
[32m+[m[32m      const option = {}[m
[32m+[m[32m      // if (conf.showTip) {[m
[32m+[m[32m      //   tip = h('div', {[m
[32m+[m[32m      //     class: "el-upload__tip"[m
[32m+[m[32m      //   }, () => 'åªèƒ½ä¸Šä¼ ä¸è¶…è¿‡' + conf.fileSize + conf.sizeUnit + 'çš„' + conf.accept + 'æ–‡ä»¶')[m
[32m+[m[32m      // }[m
[32m+[m[32m      if (conf['list-type'] === 'picture-card') {[m
[32m+[m[32m        return h(resolveComponent('el-icon'), option, () => h(resolveComponent('Plus')))[m
[32m+[m[32m      } else {[m
[32m+[m[32m        // option.size = "small"[m
[32m+[m[32m        option.type = "primary"[m
[32m+[m[32m        option.icon = "Upload"[m
[32m+[m[32m        return h(resolveComponent('el-button'), option, () => conf.buttonText)[m
[32m+[m[32m      }[m
[32m+[m[32m    },[m
[32m+[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32mconst componentSlot = {[m
[32m+[m[32m  'el-upload': {[m
[32m+[m[32m    'tip': (h, conf, key) => {[m
[32m+[m[32m      if (conf.showTip) {[m
[32m+[m[32m        return () => h('div', {[m
[32m+[m[32m          class: "el-upload__tip"[m
[32m+[m[32m        }, 'åªèƒ½ä¸Šä¼ ä¸è¶…è¿‡' + conf.fileSize + conf.sizeUnit + 'çš„' + conf.accept + 'æ–‡ä»¶')[m
[32m+[m[32m      }[m
[32m+[m[32m    },[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32mexport default defineComponent({[m
[32m+[m
[32m+[m[32m  // ä½¿ç”¨ render å‡½æ•°[m
[32m+[m[32m  render() {[m
[32m+[m[32m    const dataObject = {[m
[32m+[m[32m      attrs: {},[m
[32m+[m[32m      props: {},[m
[32m+[m[32m      on: {},[m
[32m+[m[32m      style: {}[m
[32m+[m[32m    }[m
[32m+[m[32m    const confClone = JSON.parse(JSON.stringify(this.conf))[m
[32m+[m[32m    const children = [][m
[32m+[m[32m    const slot = {}[m
[32m+[m[32m    const childObjs = componentChild[confClone.tag][m
[32m+[m[32m    if (childObjs) {[m
[32m+[m[32m      Object.keys(childObjs).forEach(key => {[m
[32m+[m[32m        const childFunc = childObjs[key][m
[32m+[m[32m        if (confClone[key]) {[m
[32m+[m[32m          children.push(childFunc(h, confClone, key))[m
[32m+[m[32m        }[m
[32m+[m[32m      })[m
[32m+[m[32m    }[m
[32m+[m[32m    const slotObjs = componentSlot[confClone.tag][m
[32m+[m[32m    if (slotObjs) {[m
[32m+[m[32m      Object.keys(slotObjs).forEach(key => {[m
[32m+[m[32m        const childFunc = slotObjs[key][m
[32m+[m[32m        if (confClone[key]) {[m
[32m+[m[32m          slot[key] = childFunc(h, confClone, key)[m
[32m+[m[32m        }[m
[32m+[m[32m      })[m
[32m+[m[32m    }[m
[32m+[m[32m    // console.log(childObjs);[m
[32m+[m[32m    Object.keys(confClone).forEach(key => {[m
[32m+[m[32m      const val = confClone[key][m
[32m+[m[32m      if (dataObject[key]) {[m
[32m+[m[32m        dataObject[key] = val[m
[32m+[m[32m      } else if (isAttr(key)) {[m
[32m+[m[32m        dataObject.attrs[key] = val[m
[32m+[m[32m      } else if (!isNotProps(key)) {[m
[32m+[m[32m        dataObject.props[key] = val[m
[32m+[m[32m      }[m
[32m+[m[41m      [m
[32m+[m[32m      // else {[m
[32m+[m[32m      //   dataObject.props[key] = val[m
[32m+[m[32m      // }[m
[32m+[m[41m      [m
[32m+[m[41m      [m
[32m+[m[32m    })[m
[32m+[m[32m    if(children.length > 0){[m
[32m+[m[32m      slot.default = () => children[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    // console.log('props', dataObject.props);[m
[32m+[m[32m    // resolveComponent(this.conf.tag)[m
[32m+[m[32m    return h(resolveComponent(this.conf.tag),[m
[32m+[m[32m      {[m
[32m+[m[32m        modelValue: this.$attrs.modelValue,[m
[32m+[m[32m        ...dataObject.props,[m
[32m+[m[32m        ...dataObject.attrs,[m
[32m+[m[32m        style: {[m
[32m+[m[32m          ...dataObject.style[m
[32m+[m[32m        },[m
[32m+[m[32m      }[m
[32m+[m[32m      , slot ?? null)[m
[32m+[m[32m  },[m
[32m+[m[32m  props: {[m
[32m+[m[32m    conf: {[m
[32m+[m[32m      type: Object,[m
[32m+[m[32m      required: true,[m
[32m+[m[32m    },[m
[32m+[m[32m  }[m
[32m+[m[32m})[m
\ No newline at end of file[m
[1mdiff --git a/src/utils/index.js b/src/utils/index.js[m
[1mnew file mode 100644[m
[1mindex 00000000..4e65504c[m
[1m--- /dev/null[m
[1m+++ b/src/utils/index.js[m
[36m@@ -0,0 +1,390 @@[m
[32m+[m[32mimport { parseTime } from './ruoyi'[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * è¡¨æ ¼æ—¶é—´æ ¼å¼åŒ–[m
[32m+[m[32m */[m
[32m+[m[32mexport function formatDate(cellValue) {[m
[32m+[m[32m  if (cellValue == null || cellValue == "") return "";[m
[32m+[m[32m  var date = new Date(cellValue)[m[41m [m
[32m+[m[32m  var year = date.getFullYear()[m
[32m+[m[32m  var month = date.getMonth() + 1 < 10 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1[m
[32m+[m[32m  var day = date.getDate() < 10 ? '0' + date.getDate() : date.getDate()[m[41m [m
[32m+[m[32m  var hours = date.getHours() < 10 ? '0' + date.getHours() : date.getHours()[m[41m [m
[32m+[m[32m  var minutes = date.getMinutes() < 10 ? '0' + date.getMinutes() : date.getMinutes()[m[41m [m
[32m+[m[32m  var seconds = date.getSeconds() < 10 ? '0' + date.getSeconds() : date.getSeconds()[m
[32m+[m[32m  return year + '-' + month + '-' + day + ' ' + hours + ':' + minutes + ':' + seconds[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * @param {number} time[m
[32m+[m[32m * @param {string} option[m
[32m+[m[32m * @returns {string}[m
[32m+[m[32m */[m
[32m+[m[32mexport function formatTime(time, option) {[m
[32m+[m[32m  if (('' + time).length === 10) {[m
[32m+[m[32m    time = parseInt(time) * 1000[m
[32m+[m[32m  } else {[m
[32m+[m[32m    time = +time[m
[32m+[m[32m  }[m
[32m+[m[32m  const d = new Date(time)[m
[32m+[m[32m  const now = Date.now()[m
[32m+[m
[32m+[m[32m  const diff = (now - d) / 1000[m
[32m+[m
[32m+[m[32m  if (diff < 30) {[m
[32m+[m[32m    return 'åˆšåˆš'[m
[32m+[m[32m  } else if (diff < 3600) {[m
[32m+[m[32m    // less 1 hour[m
[32m+[m[32m    return Math.ceil(diff / 60) + 'åˆ†é’Ÿå‰'[m
[32m+[m[32m  } else if (diff < 3600 * 24) {[m
[32m+[m[32m    return Math.ceil(diff / 3600) + 'å°æ—¶å‰'[m
[32m+[m[32m  } else if (diff < 3600 * 24 * 2) {[m
[32m+[m[32m    return '1å¤©å‰'[m
[32m+[m[32m  }[m
[32m+[m[32m  if (option) {[m
[32m+[m[32m    return parseTime(time, option)[m
[32m+[m[32m  } else {[m
[32m+[m[32m    return ([m
[32m+[m[32m      d.getMonth() +[m
[32m+[m[32m      1 +[m
[32m+[m[32m      'æœˆ' +[m
[32m+[m[32m      d.getDate() +[m
[32m+[m[32m      'æ—¥' +[m
[32m+[m[32m      d.getHours() +[m
[32m+[m[32m      'æ—¶' +[m
[32m+[m[32m      d.getMinutes() +[m
[32m+[m[32m      'åˆ†'[m
[32m+[m[32m    )[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * @param {string} url[m
[32m+[m[32m * @returns {Object}[m
[32m+[m[32m */[m
[32m+[m[32mexport function getQueryObject(url) {[m
[32m+[m[32m  url = url == null ? window.location.href : url[m
[32m+[m[32m  const search = url.substring(url.lastIndexOf('?') + 1)[m
[32m+[m[32m  const obj = {}[m
[32m+[m[32m  const reg = /([^?&=]+)=([^?&=]*)/g[m
[32m+[m[32m  search.replace(reg, (rs, $1, $2) => {[m
[32m+[m[32m    const name = decodeURIComponent($1)[m
[32m+[m[32m    let val = decodeURIComponent($2)[m
[32m+[m[32m    val = String(val)[m
[32m+[m[32m    obj[name] = val[m
[32m+[m[32m    return rs[m
[32m+[m[32m  })[m
[32m+[m[32m  return obj[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * @param {string} input value[m
[32m+[m[32m * @returns {number} output value[m
[32m+[m[32m */[m
[32m+[m[32mexport function byteLength(str) {[m
[32m+[m[32m  // returns the byte length of an utf8 string[m
[32m+[m[32m  let s = str.length[m
[32m+[m[32m  for (var i = str.length - 1; i >= 0; i--) {[m
[32m+[m[32m    const code = str.charCodeAt(i)[m
[32m+[m[32m    if (code > 0x7f && code <= 0x7ff) s++[m
[32m+[m[32m    else if (code > 0x7ff && code <= 0xffff) s += 2[m
[32m+[m[32m    if (code >= 0xDC00 && code <= 0xDFFF) i--[m
[32m+[m[32m  }[m
[32m+[m[32m  return s[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * @param {Array} actual[m
[32m+[m[32m * @returns {Array}[m
[32m+[m[32m */[m
[32m+[m[32mexport function cleanArray(actual) {[m
[32m+[m[32m  const newArray = [][m
[32m+[m[32m  for (let i = 0; i < actual.length; i++) {[m
[32m+[m[32m    if (actual[i]) {[m
[32m+[m[32m      newArray.push(actual[i])[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  return newArray[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * @param {Object} json[m
[32m+[m[32m * @returns {Array}[m
[32m+[m[32m */[m
[32m+[m[32mexport function param(json) {[m
[32m+[m[32m  if (!json) return ''[m
[32m+[m[32m  return cleanArray([m
[32m+[m[32m    Object.keys(json).map(key => {[m
[32m+[m[32m      if (json[key] === undefined) return ''[m
[32m+[m[32m      return encodeURIComponent(key) + '=' + encodeURIComponent(json[key])[m
[32m+[m[32m    })[m
[32m+[m[32m  ).join('&')[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * @param {string} url[m
[32m+[m[32m * @returns {Object}[m
[32m+[m[32m */[m
[32m+[m[32mexport function param2Obj(url) {[m
[32m+[m[32m  const search = decodeURIComponent(url.split('?')[1]).replace(/\+/g, ' ')[m
[32m+[m[32m  if (!search) {[m
[32m+[m[32m    return {}[m
[32m+[m[32m  }[m
[32m+[m[32m  const obj = {}[m
[32m+[m[32m  const searchArr = search.split('&')[m
[32m+[m[32m  searchArr.forEach(v => {[m
[32m+[m[32m    const index = v.indexOf('=')[m
[32m+[m[32m    if (index !== -1) {[m
[32m+[m[32m      const name = v.substring(0, index)[m
[32m+[m[32m      const val = v.substring(index + 1, v.length)[m
[32m+[m[32m      obj[name] = val[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m[32m  return obj[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * @param {string} val[m
[32m+[m[32m * @returns {string}[m
[32m+[m[32m */[m
[32m+[m[32mexport function html2Text(val) {[m
[32m+[m[32m  const div = document.createElement('div')[m
[32m+[m[32m  div.innerHTML = val[m
[32m+[m[32m  return div.textContent || div.innerText[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Merges two objects, giving the last one precedence[m
[32m+[m[32m * @param {Object} target[m
[32m+[m[32m * @param {(Object|Array)} source[m
[32m+[m[32m * @returns {Object}[m
[32m+[m[32m */[m
[32m+[m[32mexport function objectMerge(target, source) {[m
[32m+[m[32m  if (typeof target !== 'object') {[m
[32m+[m[32m    target = {}[m
[32m+[m[32m  }[m
[32m+[m[32m  if (Array.isArray(source)) {[m
[32m+[m[32m    return source.slice()[m
[32m+[m[32m  }[m
[32m+[m[32m  Object.keys(source).forEach(property => {[m
[32m+[m[32m    const sourceProperty = source[property][m
[32m+[m[32m    if (typeof sourceProperty === 'object') {[m
[32m+[m[32m      target[property] = objectMerge(target[property], sourceProperty)[m
[32m+[m[32m    } else {[m
[32m+[m[32m      target[property] = sourceProperty[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m[32m  return target[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * @param {HTMLElement} element[m
[32m+[m[32m * @param {string} className[m
[32m+[m[32m */[m
[32m+[m[32mexport function toggleClass(element, className) {[m
[32m+[m[32m  if (!element || !className) {[m
[32m+[m[32m    return[m
[32m+[m[32m  }[m
[32m+[m[32m  let classString = element.className[m
[32m+[m[32m  const nameIndex = classString.indexOf(className)[m
[32m+[m[32m  if (nameIndex === -1) {[m
[32m+[m[32m    classString += '' + className[m
[32m+[m[32m  } else {[m
[32m+[m[32m    classString =[m
[32m+[m[32m      classString.substr(0, nameIndex) +[m
[32m+[m[32m      classString.substr(nameIndex + className.length)[m
[32m+[m[32m  }[m
[32m+[m[32m  element.className = classString[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * @param {string} type[m
[32m+[m[32m * @returns {Date}[m
[32m+[m[32m */[m
[32m+[m[32mexport function getTime(type) {[m
[32m+[m[32m  if (type === 'start') {[m
[32m+[m[32m    return new Date().getTime() - 3600 * 1000 * 24 * 90[m
[32m+[m[32m  } else {[m
[32m+[m[32m    return new Date(new Date().toDateString())[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * @param {Function} func[m
[32m+[m[32m * @param {number} wait[m
[32m+[m[32m * @param {boolean} immediate[m
[32m+[m[32m * @return {*}[m
[32m+[m[32m */[m
[32m+[m[32mexport function debounce(func, wait, immediate) {[m
[32m+[m[32m  let timeout, args, context, timestamp, result[m
[32m+[m
[32m+[m[32m  const later = function() {[m
[32m+[m[32m    // æ®ä¸Šä¸€æ¬¡è§¦å‘æ—¶é—´é—´éš”[m
[32m+[m[32m    const last = +new Date() - timestamp[m
[32m+[m
[32m+[m[32m    // ä¸Šæ¬¡è¢«åŒ…è£…å‡½æ•°è¢«è°ƒç”¨æ—¶é—´é—´éš” last å°äºè®¾å®šæ—¶é—´é—´éš” wait[m
[32m+[m[32m    if (last < wait && last > 0) {[m
[32m+[m[32m      timeout = setTimeout(later, wait - last)[m
[32m+[m[32m    } else {[m
[32m+[m[32m      timeout = null[m
[32m+[m[32m      // å¦‚æœè®¾å®šä¸ºimmediate===trueï¼Œå› ä¸ºå¼€å§‹è¾¹ç•Œå·²ç»è°ƒç”¨è¿‡äº†æ­¤å¤„æ— éœ€è°ƒç”¨[m
[32m+[m[32m      if (!immediate) {[m
[32m+[m[32m        result = func.apply(context, args)[m
[32m+[m[32m        if (!timeout) context = args = null[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  return function(...args) {[m
[32m+[m[32m    context = this[m
[32m+[m[32m    timestamp = +new Date()[m
[32m+[m[32m    const callNow = immediate && !timeout[m
[32m+[m[32m    // å¦‚æœå»¶æ—¶ä¸å­˜åœ¨ï¼Œé‡æ–°è®¾å®šå»¶æ—¶[m
[32m+[m[32m    if (!timeout) timeout = setTimeout(later, wait)[m
[32m+[m[32m    if (callNow) {[m
[32m+[m[32m      result = func.apply(context, args)[m
[32m+[m[32m      context = args = null[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    return result[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * This is just a simple version of deep copy[m
[32m+[m[32m * Has a lot of edge cases bug[m
[32m+[m[32m * If you want to use a perfect deep copy, use lodash's _.cloneDeep[m
[32m+[m[32m * @param {Object} source[m
[32m+[m[32m * @returns {Object}[m
[32m+[m[32m */[m
[32m+[m[32mexport function deepClone(source) {[m
[32m+[m[32m  if (!source && typeof source !== 'object') {[m
[32m+[m[32m    throw new Error('error arguments', 'deepClone')[m
[32m+[m[32m  }[m
[32m+[m[32m  const targetObj = source.constructor === Array ? [] : {}[m
[32m+[m[32m  Object.keys(source).forEach(keys => {[m
[32m+[m[32m    if (source[keys] && typeof source[keys] === 'object') {[m
[32m+[m[32m      targetObj[keys] = deepClone(source[keys])[m
[32m+[m[32m    } else {[m
[32m+[m[32m      targetObj[keys] = source[keys][m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m[32m  return targetObj[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * @param {Array} arr[m
[32m+[m[32m * @returns {Array}[m
[32m+[m[32m */[m
[32m+[m[32mexport function uniqueArr(arr) {[m
[32m+[m[32m  return Array.from(new Set(arr))[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * @returns {string}[m
[32m+[m[32m */[m
[32m+[m[32mexport function createUniqueString() {[m
[32m+[m[32m  const timestamp = +new Date() + ''[m
[32m+[m[32m  const randomNum = parseInt((1 + Math.random()) * 65536) + ''[m
[32m+[m[32m  return (+(randomNum + timestamp)).toString(32)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Check if an element has a class[m
[32m+[m[32m * @param {HTMLElement} elm[m
[32m+[m[32m * @param {string} cls[m
[32m+[m[32m * @returns {boolean}[m
[32m+[m[32m */[m
[32m+[m[32mexport function hasClass(ele, cls) {[m
[32m+[m[32m  return !!ele.className.match(new RegExp('(\\s|^)' + cls + '(\\s|$)'))[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Add class to element[m
[32m+[m[32m * @param {HTMLElement} elm[m
[32m+[m[32m * @param {string} cls[m
[32m+[m[32m */[m
[32m+[m[32mexport function addClass(ele, cls) {[m
[32m+[m[32m  if (!hasClass(ele, cls)) ele.className += ' ' + cls[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Remove class from element[m
[32m+[m[32m * @param {HTMLElement} elm[m
[32m+[m[32m * @param {string} cls[m
[32m+[m[32m */[m
[32m+[m[32mexport function removeClass(ele, cls) {[m
[32m+[m[32m  if (hasClass(ele, cls)) {[m
[32m+[m[32m    const reg = new RegExp('(\\s|^)' + cls + '(\\s|$)')[m
[32m+[m[32m    ele.className = ele.className.replace(reg, ' ')[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport function makeMap(str, expectsLowerCase) {[m
[32m+[m[32m  const map = Object.create(null)[m
[32m+[m[32m  const list = str.split(',')[m
[32m+[m[32m  for (let i = 0; i < list.length; i++) {[m
[32m+[m[32m    map[list[i]] = true[m
[32m+[m[32m  }[m
[32m+[m[32m  return expectsLowerCase[m
[32m+[m[32m    ? val => map[val.toLowerCase()][m
[32m+[m[32m    : val => map[val][m
[32m+[m[32m}[m
[32m+[m[41m [m
[32m+[m[32mexport const exportDefault = 'export default '[m
[32m+[m
[32m+[m[32mexport const beautifierConf = {[m
[32m+[m[32m  html: {[m
[32m+[m[32m    indent_size: '2',[m
[32m+[m[32m    indent_char: ' ',[m
[32m+[m[32m    max_preserve_newlines: '-1',[m
[32m+[m[32m    preserve_newlines: false,[m
[32m+[m[32m    keep_array_indentation: false,[m
[32m+[m[32m    break_chained_methods: false,[m
[32m+[m[32m    indent_scripts: 'separate',[m
[32m+[m[32m    brace_style: 'end-expand',[m
[32m+[m[32m    space_before_conditional: true,[m
[32m+[m[32m    unescape_strings: false,[m
[32m+[m[32m    jslint_happy: false,[m
[32m+[m[32m    end_with_newline: true,[m
[32m+[m[32m    wrap_line_length: '110',[m
[32m+[m[32m    indent_inner_html: true,[m
[32m+[m[32m    comma_first: false,[m
[32m+[m[32m    e4x: true,[m
[32m+[m[32m    indent_empty_lines: true[m
[32m+[m[32m  },[m
[32m+[m[32m  js: {[m
[32m+[m[32m    indent_size: '2',[m
[32m+[m[32m    indent_char: ' ',[m
[32m+[m[32m    max_preserve_newlines: '-1',[m
[32m+[m[32m    preserve_newlines: false,[m
[32m+[m[32m    keep_array_indentation: false,[m
[32m+[m[32m    break_chained_methods: false,[m
[32m+[m[32m    indent_scripts: 'normal',[m
[32m+[m[32m    brace_style: 'end-expand',[m
[32m+[m[32m    space_before_conditional: true,[m
[32m+[m[32m    unescape_strings: false,[m
[32m+[m[32m    jslint_happy: true,[m
[32m+[m[32m    end_with_newline: true,[m
[32m+[m[32m    wrap_line_length: '110',[m
[32m+[m[32m    indent_inner_html: true,[m
[32m+[m[32m    comma_first: false,[m
[32m+[m[32m    e4x: true,[m
[32m+[m[32m    indent_empty_lines: true[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// é¦–å­—æ¯å¤§å°[m
[32m+[m[32mexport function titleCase(str) {[m
[32m+[m[32m  return str.replace(/( |^)[a-z]/g, L => L.toUpperCase())[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¸‹åˆ’è½¬é©¼å³°[m
[32m+[m[32mexport function camelCase(str) {[m
[32m+[m[32m  return str.replace(/_[a-z]/g, str1 => str1.substr(-1).toUpperCase())[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport function isNumberStr(str) {[m
[32m+[m[32m  return /^[+-]?(0|([1-9]\d*))(\.\d+)?$/g.test(str)[m
[32m+[m[32m}[m
[32m+[m[41m [m
[1mdiff --git a/src/utils/jsencrypt.js b/src/utils/jsencrypt.js[m
[1mnew file mode 100644[m
[1mindex 00000000..78d95234[m
[1m--- /dev/null[m
[1m+++ b/src/utils/jsencrypt.js[m
[36m@@ -0,0 +1,30 @@[m
[32m+[m[32mimport JSEncrypt from 'jsencrypt/bin/jsencrypt.min'[m
[32m+[m
[32m+[m[32m// å¯†é’¥å¯¹ç”Ÿæˆ http://web.chacuo.net/netrsakeypair[m
[32m+[m
[32m+[m[32mconst publicKey = 'MFwwDQYJKoZIhvcNAQEBBQADSwAwSAJBAKoR8mX0rGKLqzcWmOzbfj64K8ZIgOdH\n' +[m
[32m+[m[32m  'nzkXSOVOZbFu/TJhZ7rFAN+eaGkl3C4buccQd/EjEsj9ir7ijT7h96MCAwEAAQ=='[m
[32m+[m
[32m+[m[32mconst privateKey = 'MIIBVAIBADANBgkqhkiG9w0BAQEFAASCAT4wggE6AgEAAkEAqhHyZfSsYourNxaY\n' +[m
[32m+[m[32m  '7Nt+PrgrxkiA50efORdI5U5lsW79MmFnusUA355oaSXcLhu5xxB38SMSyP2KvuKN\n' +[m
[32m+[m[32m  'PuH3owIDAQABAkAfoiLyL+Z4lf4Myxk6xUDgLaWGximj20CUf+5BKKnlrK+Ed8gA\n' +[m
[32m+[m[32m  'kM0HqoTt2UZwA5E2MzS4EI2gjfQhz5X28uqxAiEA3wNFxfrCZlSZHb0gn2zDpWow\n' +[m
[32m+[m[32m  'cSxQAgiCstxGUoOqlW8CIQDDOerGKH5OmCJ4Z21v+F25WaHYPxCFMvwxpcw99Ecv\n' +[m
[32m+[m[32m  'DQIgIdhDTIqD2jfYjPTY8Jj3EDGPbH2HHuffvflECt3Ek60CIQCFRlCkHpi7hthh\n' +[m
[32m+[m[32m  'YhovyloRYsM+IS9h/0BzlEAuO0ktMQIgSPT3aFAgJYwKpqRYKlLDVcflZFCKY7u3\n' +[m
[32m+[m[32m  'UP8iWi1Qw0Y='[m
[32m+[m
[32m+[m[32m// åŠ å¯†[m
[32m+[m[32mexport function encrypt(txt) {[m
[32m+[m[32m  const encryptor = new JSEncrypt()[m
[32m+[m[32m  encryptor.setPublicKey(publicKey) // è®¾ç½®å…¬é’¥[m
[32m+[m[32m  return encryptor.encrypt(txt) // å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// è§£å¯†[m
[32m+[m[32mexport function decrypt(txt) {[m
[32m+[m[32m  const encryptor = new JSEncrypt()[m
[32m+[m[32m  encryptor.setPrivateKey(privateKey) // è®¾ç½®ç§é’¥[m
[32m+[m[32m  return encryptor.decrypt(txt) // å¯¹æ•°æ®è¿›è¡Œè§£å¯†[m
[32m+[m[32m}[m
[32m+[m
[1mdiff --git a/src/utils/permission.js b/src/utils/permission.js[m
[1mnew file mode 100644[m
[1mindex 00000000..93fee87f[m
[1m--- /dev/null[m
[1m+++ b/src/utils/permission.js[m
[36m@@ -0,0 +1,51 @@[m
[32m+[m[32mimport useUserStore from '@/store/modules/user'[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * å­—ç¬¦æƒé™æ ¡éªŒ[m
[32m+[m[32m * @param {Array} value æ ¡éªŒå€¼[m
[32m+[m[32m * @returns {Boolean}[m
[32m+[m[32m */[m
[32m+[m[32mexport function checkPermi(value) {[m
[32m+[m[32m  if (value && value instanceof Array && value.length > 0) {[m
[32m+[m[32m    const permissions = useUserStore().permissions[m
[32m+[m[32m    const permissionDatas = value[m
[32m+[m[32m    const all_permission = "*:*:*";[m
[32m+[m
[32m+[m[32m    const hasPermission = permissions.some(permission => {[m
[32m+[m[32m      return all_permission === permission || permissionDatas.includes(permission)[m
[32m+[m[32m    })[m
[32m+[m
[32m+[m[32m    if (!hasPermission) {[m
[32m+[m[32m      return false[m
[32m+[m[32m    }[m
[32m+[m[32m    return true[m
[32m+[m[32m  } else {[m
[32m+[m[32m    console.error(`need roles! Like checkPermi="['system:user:add','system:user:edit']"`)[m
[32m+[m[32m    return false[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * è§’è‰²æƒé™æ ¡éªŒ[m
[32m+[m[32m * @param {Array} value æ ¡éªŒå€¼[m
[32m+[m[32m * @returns {Boolean}[m
[32m+[m[32m */[m
[32m+[m[32mexport function checkRole(value) {[m
[32m+[m[32m  if (value && value instanceof Array && value.length > 0) {[m
[32m+[m[32m    const roles = useUserStore().roles[m
[32m+[m[32m    const permissionRoles = value[m
[32m+[m[32m    const super_admin = "admin";[m
[32m+[m
[32m+[m[32m    const hasRole = roles.some(role => {[m
[32m+[m[32m      return super_admin === role || permissionRoles.includes(role)[m
[32m+[m[32m    })[m
[32m+[m
[32m+[m[32m    if (!hasRole) {[m
[32m+[m[32m      return false[m
[32m+[m[32m    }[m
[32m+[m[32m    return true[m
[32m+[m[32m  } else {[m
[32m+[m[32m    console.error(`need roles! Like checkRole="['admin','editor']"`)[m
[32m+[m[32m    return false[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
\ No newline at end of file[m
[1mdiff --git a/src/utils/request.js b/src/utils/request.js[m
[1mnew file mode 100644[m
[1mindex 00000000..eb98ec39[m
[1m--- /dev/null[m
[1m+++ b/src/utils/request.js[m
[36m@@ -0,0 +1,213 @@[m
[32m+[m[32mimport axios from 'axios'[m
[32m+[m[32mimport { ElNotification , ElMessageBox, ElMessage, ElLoading } from 'element-plus'[m
[32m+[m[32mimport { getToken, getAppToken } from '@/utils/auth'[m
[32m+[m[32mimport errorCode from '@/utils/errorCode'[m
[32m+[m[32mimport { tansParams, blobValidate } from '@/utils/ruoyi'[m
[32m+[m[32mimport cache from '@/plugins/cache'[m
[32m+[m[32mimport { saveAs } from 'file-saver'[m
[32m+[m[32mimport useUserStore from '@/store/modules/user'[m
[32m+[m
[32m+[m[32mlet downloadLoadingInstance;[m
[32m+[m[32m// æ˜¯å¦æ˜¾ç¤ºé‡æ–°ç™»å½•[m
[32m+[m[32mexport let isRelogin = { show: false };[m
[32m+[m
[32m+[m[32maxios.defaults.headers['Content-Type'] = 'application/json;charset=utf-8'[m
[32m+[m[32m// åˆ›å»ºaxioså®ä¾‹[m
[32m+[m[32mconst service = axios.create({[m
[32m+[m[32m  // axiosä¸­è¯·æ±‚é…ç½®æœ‰baseURLé€‰é¡¹ï¼Œè¡¨ç¤ºè¯·æ±‚URLå…¬å…±éƒ¨åˆ†[m
[32m+[m[32m  baseURL: import.meta.env.VITE_APP_BASE_API,[m
[32m+[m[32m  // è¶…æ—¶[m
[32m+[m[32m  timeout: 10000[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32m// requestæ‹¦æˆªå™¨[m
[32m+[m[32mservice.interceptors.request.use(config => {[m
[32m+[m[32m  // æ˜¯å¦éœ€è¦è®¾ç½® token[m
[32m+[m[32m  const isToken = (config.headers || {}).isToken === false[m
[32m+[m[32m  // æ˜¯å¦éœ€è¦é˜²æ­¢æ•°æ®é‡å¤æäº¤[m
[32m+[m[32m  const isRepeatSubmit = (config.headers || {}).repeatSubmit === false[m
[32m+[m[41m  [m
[32m+[m[32m  // æ£€æŸ¥æ˜¯å¦æ˜¯Cç«¯æ¥å£[m
[32m+[m[32m  const isAppApi = config.url && config.url.startsWith('/app/')[m
[32m+[m[32m  // æ£€æŸ¥æ˜¯å¦æ˜¯æ³¨å†Œæˆ–ç™»å½•æ¥å£ï¼ˆè¿™äº›æ¥å£ä¸éœ€è¦tokenï¼‰[m
[32m+[m[32m  const isAuthApi = config.url && (config.url.includes('/register') || config.url.includes('/login'))[m
[32m+[m[41m  [m
[32m+[m[32m  console.log("requestæ‹¦æˆªå™¨ - URL:", config.url, "isAppApi:", isAppApi, "isAuthApi:", isAuthApi, "isToken:", isToken);[m
[32m+[m[41m  [m
[32m+[m[32m  // ç¡®ä¿headerså¯¹è±¡å­˜åœ¨[m
[32m+[m[32m  if (!config.headers) {[m
[32m+[m[32m    config.headers = {}[m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  // åªæœ‰éœ€è¦tokenä¸”ä¸æ˜¯è®¤è¯æ¥å£æ—¶æ‰æ·»åŠ token[m
[32m+[m[32m  if (!isToken && !isAuthApi) {[m
[32m+[m[32m    if (isAppApi) {[m
[32m+[m[32m      // Cç«¯æ¥å£ä½¿ç”¨app_token[m
[32m+[m[32m      const appToken = getAppToken()[m
[32m+[m[32m      console.log("Cç«¯æ¥å£ï¼Œè·å–åˆ°çš„appToken:", appToken);[m
[32m+[m[32m      if (appToken) {[m
[32m+[m[32m        config.headers.Authorization = 'Bearer ' + appToken[m
[32m+[m[32m        console.log("è®¾ç½®Cç«¯Authorizationå¤´:", config.headers.Authorization);[m
[32m+[m[32m      } else {[m
[32m+[m[32m        console.log("Cç«¯æ¥å£ä½†æœªæ‰¾åˆ°appToken");[m
[32m+[m[32m      }[m
[32m+[m[32m    } else if (getToken()) {[m
[32m+[m[32m      // åå°æ¥å£ä½¿ç”¨Admin-Token[m
[32m+[m[32m      const adminToken = getToken();[m
[32m+[m[32m      console.log("åå°æ¥å£ï¼Œè·å–åˆ°çš„adminToken:", adminToken);[m
[32m+[m[32m      config.headers.Authorization = 'Bearer ' + adminToken[m
[32m+[m[32m      console.log("è®¾ç½®åå°Authorizationå¤´:", config.headers.Authorization);[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  console.log("æœ€ç»ˆrequesté…ç½®headers:", config.headers);[m
[32m+[m[32m  console.log("æœ€ç»ˆrequesté…ç½®:", config);[m
[32m+[m[32m  // getè¯·æ±‚æ˜ å°„paramså‚æ•°[m
[32m+[m[32m  if (config.method === 'get' && config.params) {[m
[32m+[m[32m    let url = config.url + '?' + tansParams(config.params);[m
[32m+[m[32m    url = url.slice(0, -1);[m
[32m+[m[32m    config.params = {};[m
[32m+[m[32m    config.url = url;[m
[32m+[m[32m  }[m
[32m+[m[32m  if (!isRepeatSubmit && (config.method === 'post' || config.method === 'put')) {[m
[32m+[m[32m    const requestObj = {[m
[32m+[m[32m      url: config.url,[m
[32m+[m[32m      data: typeof config.data === 'object' ? JSON.stringify(config.data) : config.data,[m
[32m+[m[32m      time: new Date().getTime()[m
[32m+[m[32m    }[m
[32m+[m[32m    const requestSize = Object.keys(JSON.stringify(requestObj)).length; // è¯·æ±‚æ•°æ®å¤§å°[m
[32m+[m[32m    const limitSize = 5 * 1024 * 1024; // é™åˆ¶å­˜æ”¾æ•°æ®5M[m
[32m+[m[32m    if (requestSize >= limitSize) {[m
[32m+[m[32m      console.warn(`[${config.url}]: ` + 'è¯·æ±‚æ•°æ®å¤§å°è¶…å‡ºå…è®¸çš„5Mé™åˆ¶ï¼Œæ— æ³•è¿›è¡Œé˜²é‡å¤æäº¤éªŒè¯ã€‚')[m
[32m+[m[32m      return config;[m
[32m+[m[32m    }[m
[32m+[m[32m    const sessionObj = cache.session.getJSON('sessionObj')[m
[32m+[m[32m    if (sessionObj === undefined || sessionObj === null || sessionObj === '') {[m
[32m+[m[32m      cache.session.setJSON('sessionObj', requestObj)[m
[32m+[m[32m    } else {[m
[32m+[m[32m      const s_url = sessionObj.url;                // è¯·æ±‚åœ°å€[m
[32m+[m[32m      const s_data = sessionObj.data;              // è¯·æ±‚æ•°æ®[m
[32m+[m[32m      const s_time = sessionObj.time;              // è¯·æ±‚æ—¶é—´[m
[32m+[m[32m      const interval = 1000;                       // é—´éš”æ—¶é—´(ms)ï¼Œå°äºæ­¤æ—¶é—´è§†ä¸ºé‡å¤æäº¤[m
[32m+[m[32m      if (s_data === requestObj.data && requestObj.time - s_time < interval && s_url === requestObj.url) {[m
[32m+[m[32m        const message = 'æ•°æ®æ­£åœ¨å¤„ç†ï¼Œè¯·å‹¿é‡å¤æäº¤';[m
[32m+[m[32m        console.warn(`[${s_url}]: ` + message)[m
[32m+[m[32m        return Promise.reject(new Error(message))[m
[32m+[m[32m      } else {[m
[32m+[m[32m        cache.session.setJSON('sessionObj', requestObj)[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  return config[m
[32m+[m[32m}, error => {[m
[32m+[m[32m    console.log(error)[m
[32m+[m[32m    Promise.reject(error)[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32m// è¯·æ±‚å‘é€å‰çš„æ—¥å¿—[m
[32m+[m[32mservice.interceptors.request.use(config => {[m
[32m+[m[32m  console.log("=== Axiosè¯·æ±‚å‘é€å‰ ===");[m
[32m+[m[32m  console.log("URL:", config.url);[m
[32m+[m[32m  console.log("Method:", config.method);[m
[32m+[m[32m  console.log("Headers:", JSON.stringify(config.headers, null, 2));[m
[32m+[m[32m  console.log("=== Axiosè¯·æ±‚é…ç½®ç»“æŸ ===");[m
[32m+[m[32m  return config;[m
[32m+[m[32m}, error => {[m
[32m+[m[32m  console.log("=== Axiosè¯·æ±‚é”™è¯¯ ===");[m
[32m+[m[32m  console.log("Error:", error);[m
[32m+[m[32m  return Promise.reject(error);[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m// å“åº”æ‹¦æˆªå™¨[m
[32m+[m[32mservice.interceptors.response.use(res => {[m
[32m+[m[32m    console.log("=== Axioså“åº”æ¥æ”¶ ===");[m
[32m+[m[32m    console.log("å“åº”URL:", res.config.url);[m
[32m+[m[32m    console.log("å“åº”çŠ¶æ€:", res.status);[m
[32m+[m[32m    console.log("å“åº”å¤´:", JSON.stringify(res.headers, null, 2));[m
[32m+[m[32m    console.log("=== Axioså“åº”ç»“æŸ ===");[m
[32m+[m[41m    [m
[32m+[m[32m    // æœªè®¾ç½®çŠ¶æ€ç åˆ™é»˜è®¤æˆåŠŸçŠ¶æ€[m
[32m+[m[32m    const code = res.data.code || 200;[m
[32m+[m[32m    // è·å–é”™è¯¯ä¿¡æ¯[m
[32m+[m[32m    const msg = errorCode[code] || res.data.msg || errorCode['default'][m
[32m+[m[32m    // äºŒè¿›åˆ¶æ•°æ®åˆ™ç›´æ¥è¿”å›[m
[32m+[m[32m    if (res.request.responseType ===  'blob' || res.request.responseType ===  'arraybuffer') {[m
[32m+[m[32m      return res.data[m
[32m+[m[32m    }[m
[32m+[m[32m    if (code === 401) {[m
[32m+[m[32m      // æ£€æŸ¥æ˜¯å¦æ˜¯Cç«¯æ¥å£çš„401é”™è¯¯[m
[32m+[m[32m      const isAppApi = res.config && res.config.url && res.config.url.startsWith('/app/')[m
[32m+[m[32m      if (isAppApi) {[m
[32m+[m[32m        // Cç«¯æ¥å£401é”™è¯¯ï¼Œç›´æ¥è¿”å›é”™è¯¯ä¿¡æ¯ï¼Œä¸å¼¹çª—[m
[32m+[m[32m        return Promise.reject(msg || 'ç™»å½•çŠ¶æ€å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•')[m
[32m+[m[32m      }[m
[32m+[m[41m      [m
[32m+[m[32m      // åå°æ¥å£401é”™è¯¯ï¼Œæ˜¾ç¤ºé‡æ–°ç™»å½•å¼¹çª—[m
[32m+[m[32m      if (!isRelogin.show) {[m
[32m+[m[32m        isRelogin.show = true;[m
[32m+[m[32m        ElMessageBox.confirm('ç™»å½•çŠ¶æ€å·²è¿‡æœŸï¼Œæ‚¨å¯ä»¥ç»§ç»­ç•™åœ¨è¯¥é¡µé¢ï¼Œæˆ–è€…é‡æ–°ç™»å½•', 'ç³»ç»Ÿæç¤º', { confirmButtonText: 'é‡æ–°ç™»å½•', cancelButtonText: 'å–æ¶ˆ', type: 'warning' }).then(() => {[m
[32m+[m[32m          isRelogin.show = false;[m
[32m+[m[32m          useUserStore().logOut().then(() => {[m
[32m+[m[32m            location.href = '/index';[m
[32m+[m[32m          })[m
[32m+[m[32m      }).catch(() => {[m
[32m+[m[32m        isRelogin.show = false;[m
[32m+[m[32m      });[m
[32m+[m[32m    }[m
[32m+[m[32m      return Promise.reject('æ— æ•ˆçš„ä¼šè¯ï¼Œæˆ–è€…ä¼šè¯å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•ã€‚')[m
[32m+[m[32m    } else if (code === 500) {[m
[32m+[m[32m      ElMessage({ message: msg, type: 'error' })[m
[32m+[m[32m      return Promise.reject(new Error(msg))[m
[32m+[m[32m    } else if (code === 601) {[m
[32m+[m[32m      ElMessage({ message: msg, type: 'warning' })[m
[32m+[m[32m      return Promise.reject(new Error(msg))[m
[32m+[m[32m    } else if (code !== 200) {[m
[32m+[m[32m      ElNotification.error({ title: msg })[m
[32m+[m[32m      return Promise.reject('error')[m
[32m+[m[32m    } else {[m
[32m+[m[32m      return  Promise.resolve(res.data)[m
[32m+[m[32m    }[m
[32m+[m[32m  },[m
[32m+[m[32m  error => {[m
[32m+[m[32m    console.log('err' + error)[m
[32m+[m[32m    let { message } = error;[m
[32m+[m[32m    if (message == "Network Error") {[m
[32m+[m[32m      message = "åç«¯æ¥å£è¿æ¥å¼‚å¸¸";[m
[32m+[m[32m    } else if (message.includes("timeout")) {[m
[32m+[m[32m      message = "ç³»ç»Ÿæ¥å£è¯·æ±‚è¶…æ—¶";[m
[32m+[m[32m    } else if (message.includes("Request failed with status code")) {[m
[32m+[m[32m      message = "ç³»ç»Ÿæ¥å£" + message.substr(message.length - 3) + "å¼‚å¸¸";[m
[32m+[m[32m    }[m
[32m+[m[32m    ElMessage({ message: message, type: 'error', duration: 5 * 1000 })[m
[32m+[m[32m    return Promise.reject(error)[m
[32m+[m[32m  }[m
[32m+[m[32m)[m
[32m+[m
[32m+[m[32m// é€šç”¨ä¸‹è½½æ–¹æ³•[m
[32m+[m[32mexport function download(url, params, filename, config) {[m
[32m+[m[32m  downloadLoadingInstance = ElLoading.service({ text: "æ­£åœ¨ä¸‹è½½æ•°æ®ï¼Œè¯·ç¨å€™", background: "rgba(0, 0, 0, 0.7)", })[m
[32m+[m[32m  return service.post(url, params, {[m
[32m+[m[32m    transformRequest: [(params) => { return tansParams(params) }],[m
[32m+[m[32m    headers: { 'Content-Type': 'application/x-www-form-urlencoded' },[m
[32m+[m[32m    responseType: 'blob',[m
[32m+[m[32m    ...config[m
[32m+[m[32m  }).then(async (data) => {[m
[32m+[m[32m    const isBlob = blobValidate(data);[m
[32m+[m[32m    if (isBlob) {[m
[32m+[m[32m      const blob = new Blob([data])[m
[32m+[m[32m      saveAs(blob, filename)[m
[32m+[m[32m    } else {[m
[32m+[m[32m      const resText = await data.text();[m
[32m+[m[32m      const rspObj = JSON.parse(resText);[m
[32m+[m[32m      const errMsg = errorCode[rspObj.code] || rspObj.msg || errorCode['default'][m
[32m+[m[32m      ElMessage.error(errMsg);[m
[32m+[m[32m    }[m
[32m+[m[32m    downloadLoadingInstance.close();[m
[32m+[m[32m  }).catch((r) => {[m
[32m+[m[32m    console.error(r)[m
[32m+[m[32m    ElMessage.error('ä¸‹è½½æ–‡ä»¶å‡ºç°é”™è¯¯ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ï¼')[m
[32m+[m[32m    downloadLoadingInstance.close();[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mexport default service[m
[1mdiff --git a/src/utils/ruoyi.js b/src/utils/ruoyi.js[m
[1mnew file mode 100644[m
[1mindex 00000000..4efca08f[m
[1m--- /dev/null[m
[1m+++ b/src/utils/ruoyi.js[m
[36m@@ -0,0 +1,246 @@[m
[32m+[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * é€šç”¨jsæ–¹æ³•å°è£…å¤„ç†[m
[32m+[m[32m * Copyright (c) 2019 ruoyi[m
[32m+[m[32m */[m
[32m+[m
[32m+[m[32m// æ—¥æœŸæ ¼å¼åŒ–[m
[32m+[m[32mexport function parseTime(time, pattern) {[m
[32m+[m[32m  if (arguments.length === 0 || !time) {[m
[32m+[m[32m    return null[m
[32m+[m[32m  }[m
[32m+[m[32m  const format = pattern || '{y}-{m}-{d} {h}:{i}:{s}'[m
[32m+[m[32m  let date[m
[32m+[m[32m  if (typeof time === 'object') {[m
[32m+[m[32m    date = time[m
[32m+[m[32m  } else {[m
[32m+[m[32m    if ((typeof time === 'string') && (/^[0-9]+$/.test(time))) {[m
[32m+[m[32m      time = parseInt(time)[m
[32m+[m[32m    } else if (typeof time === 'string') {[m
[32m+[m[32m      time = time.replace(new RegExp(/-/gm), '/').replace('T', ' ').replace(new RegExp(/\.[\d]{3}/gm), '');[m
[32m+[m[32m    }[m
[32m+[m[32m    if ((typeof time === 'number') && (time.toString().length === 10)) {[m
[32m+[m[32m      time = time * 1000[m
[32m+[m[32m    }[m
[32m+[m[32m    date = new Date(time)[m
[32m+[m[32m  }[m
[32m+[m[32m  const formatObj = {[m
[32m+[m[32m    y: date.getFullYear(),[m
[32m+[m[32m    m: date.getMonth() + 1,[m
[32m+[m[32m    d: date.getDate(),[m
[32m+[m[32m    h: date.getHours(),[m
[32m+[m[32m    i: date.getMinutes(),[m
[32m+[m[32m    s: date.getSeconds(),[m
[32m+[m[32m    a: date.getDay()[m
[32m+[m[32m  }[m
[32m+[m[32m  const time_str = format.replace(/{(y|m|d|h|i|s|a)+}/g, (result, key) => {[m
[32m+[m[32m    let value = formatObj[key][m
[32m+[m[32m    // Note: getDay() returns 0 on Sunday[m
[32m+[m[32m    if (key === 'a') { return ['æ—¥', 'ä¸€', 'äºŒ', 'ä¸‰', 'å››', 'äº”', 'å…­'][value] }[m
[32m+[m[32m    if (result.length > 0 && value < 10) {[m
[32m+[m[32m      value = '0' + value[m
[32m+[m[32m    }[m
[32m+[m[32m    return value || 0[m
[32m+[m[32m  })[m
[32m+[m[32m  return time_str[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// è¡¨å•é‡ç½®[m
[32m+[m[32mexport function resetForm(refName) {[m
[32m+[m[32m  if (this.$refs[refName]) {[m
[32m+[m[32m    this.$refs[refName].resetFields();[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ·»åŠ æ—¥æœŸèŒƒå›´[m
[32m+[m[32mexport function addDateRange(params, dateRange, propName) {[m
[32m+[m[32m  let search = params;[m
[32m+[m[32m  search.params = typeof (search.params) === 'object' && search.params !== null && !Array.isArray(search.params) ? search.params : {};[m
[32m+[m[32m  dateRange = Array.isArray(dateRange) ? dateRange : [];[m
[32m+[m[32m  if (typeof (propName) === 'undefined') {[m
[32m+[m[32m    search.params['beginTime'] = dateRange[0];[m
[32m+[m[32m    search.params['endTime'] = dateRange[1];[m
[32m+[m[32m  } else {[m
[32m+[m[32m    search.params['begin' + propName] = dateRange[0];[m
[32m+[m[32m    search.params['end' + propName] = dateRange[1];[m
[32m+[m[32m  }[m
[32m+[m[32m  return search;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å›æ˜¾æ•°æ®å­—å…¸[m
[32m+[m[32mexport function selectDictLabel(datas, value) {[m
[32m+[m[32m  if (value === undefined) {[m
[32m+[m[32m    return "";[m
[32m+[m[32m  }[m
[32m+[m[32m  var actions = [];[m
[32m+[m[32m  Object.keys(datas).some((key) => {[m
[32m+[m[32m    if (datas[key].value == ('' + value)) {[m
[32m+[m[32m      actions.push(datas[key].label);[m
[32m+[m[32m      return true;[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m[32m  if (actions.length === 0) {[m
[32m+[m[32m    actions.push(value);[m
[32m+[m[32m  }[m
[32m+[m[32m  return actions.join('');[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å›æ˜¾æ•°æ®å­—å…¸ï¼ˆå­—ç¬¦ä¸²æ•°ç»„ï¼‰[m
[32m+[m[32mexport function selectDictLabels(datas, value, separator) {[m
[32m+[m[32m  if (value === undefined || value.length ===0) {[m
[32m+[m[32m    return "";[m
[32m+[m[32m  }[m
[32m+[m[32m  if (Array.isArray(value)) {[m
[32m+[m[32m    value = value.join(",");[m
[32m+[m[32m  }[m
[32m+[m[32m  var actions = [];[m
[32m+[m[32m  var currentSeparator = undefined === separator ? "," : separator;[m
[32m+[m[32m  var temp = value.split(currentSeparator);[m
[32m+[m[32m  Object.keys(value.split(currentSeparator)).some((val) => {[m
[32m+[m[32m    var match = false;[m
[32m+[m[32m    Object.keys(datas).some((key) => {[m
[32m+[m[32m      if (datas[key].value == ('' + temp[val])) {[m
[32m+[m[32m        actions.push(datas[key].label + currentSeparator);[m
[32m+[m[32m        match = true;[m
[32m+[m[32m      }[m
[32m+[m[32m    })[m
[32m+[m[32m    if (!match) {[m
[32m+[m[32m      actions.push(temp[val] + currentSeparator);[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m[32m  return actions.join('').substring(0, actions.join('').length - 1);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å­—ç¬¦ä¸²æ ¼å¼åŒ–(%s )[m
[32m+[m[32mexport function sprintf(str) {[m
[32m+[m[32m  var args = arguments, flag = true, i = 1;[m
[32m+[m[32m  str = str.replace(/%s/g, function () {[m
[32m+[m[32m    var arg = args[i++];[m
[32m+[m[32m    if (typeof arg === 'undefined') {[m
[32m+[m[32m      flag = false;[m
[32m+[m[32m      return '';[m
[32m+[m[32m    }[m
[32m+[m[32m    return arg;[m
[32m+[m[32m  });[m
[32m+[m[32m  return flag ? str : '';[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// è½¬æ¢å­—ç¬¦ä¸²ï¼Œundefined,nullç­‰è½¬åŒ–ä¸º""[m
[32m+[m[32mexport function parseStrEmpty(str) {[m
[32m+[m[32m  if (!str || str == "undefined" || str == "null") {[m
[32m+[m[32m    return "";[m
[32m+[m[32m  }[m
[32m+[m[32m  return str;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// æ•°æ®åˆå¹¶[m
[32m+[m[32mexport function mergeRecursive(source, target) {[m
[32m+[m[32m  for (var p in target) {[m
[32m+[m[32m    try {[m
[32m+[m[32m      if (target[p].constructor == Object) {[m
[32m+[m[32m        source[p] = mergeRecursive(source[p], target[p]);[m
[32m+[m[32m      } else {[m
[32m+[m[32m        source[p] = target[p];[m
[32m+[m[32m      }[m
[32m+[m[32m    } catch (e) {[m
[32m+[m[32m      source[p] = target[p];[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  return source;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * æ„é€ æ ‘å‹ç»“æ„æ•°æ®[m
[32m+[m[32m * @param {*} data æ•°æ®æº[m
[32m+[m[32m * @param {*} id idå­—æ®µ é»˜è®¤ 'id'[m
[32m+[m[32m * @param {*} parentId çˆ¶èŠ‚ç‚¹å­—æ®µ é»˜è®¤ 'parentId'[m
[32m+[m[32m * @param {*} children å­©å­èŠ‚ç‚¹å­—æ®µ é»˜è®¤ 'children'[m
[32m+[m[32m */[m
[32m+[m[32mexport function handleTree(data, id, parentId, children) {[m
[32m+[m[32m  let config = {[m
[32m+[m[32m    id: id || 'id',[m
[32m+[m[32m    parentId: parentId || 'parentId',[m
[32m+[m[32m    childrenList: children || 'children'[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  var childrenListMap = {};[m
[32m+[m[32m  var nodeIds = {};[m
[32m+[m[32m  var tree = [];[m
[32m+[m
[32m+[m[32m  for (let d of data) {[m
[32m+[m[32m    let parentId = d[config.parentId];[m
[32m+[m[32m    if (childrenListMap[parentId] == null) {[m
[32m+[m[32m      childrenListMap[parentId] = [];[m
[32m+[m[32m    }[m
[32m+[m[32m    nodeIds[d[config.id]] = d;[m
[32m+[m[32m    childrenListMap[parentId].push(d);[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  for (let d of data) {[m
[32m+[m[32m    let parentId = d[config.parentId];[m
[32m+[m[32m    if (nodeIds[parentId] == null) {[m
[32m+[m[32m      tree.push(d);[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  for (let t of tree) {[m
[32m+[m[32m    adaptToChildrenList(t);[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  function adaptToChildrenList(o) {[m
[32m+[m[32m    if (childrenListMap[o[config.id]] !== null) {[m
[32m+[m[32m      o[config.childrenList] = childrenListMap[o[config.id]];[m
[32m+[m[32m    }[m
[32m+[m[32m    if (o[config.childrenList]) {[m
[32m+[m[32m      for (let c of o[config.childrenList]) {[m
[32m+[m[32m        adaptToChildrenList(c);[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  return tree;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m* å‚æ•°å¤„ç†[m
[32m+[m[32m* @param {*} params  å‚æ•°[m
[32m+[m[32m*/[m
[32m+[m[32mexport function tansParams(params) {[m
[32m+[m[32m  let result = ''[m
[32m+[m[32m  for (const propName of Object.keys(params)) {[m
[32m+[m[32m    const value = params[propName];[m
[32m+[m[32m    var part = encodeURIComponent(propName) + "=";[m
[32m+[m[32m    if (value !== null && value !== "" && typeof (value) !== "undefined") {[m
[32m+[m[32m      if (typeof value === 'object') {[m
[32m+[m[32m        for (const key of Object.keys(value)) {[m
[32m+[m[32m          if (value[key] !== null && value[key] !== "" && typeof (value[key]) !== 'undefined') {[m
[32m+[m[32m            let params = propName + '[' + key + ']';[m
[32m+[m[32m            var subPart = encodeURIComponent(params) + "=";[m
[32m+[m[32m            result += subPart + encodeURIComponent(value[key]) + "&";[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
[32m+[m[32m      } else {[m
[32m+[m[32m        result += part + encodeURIComponent(value) + "&";[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  return result[m
[32m+[m[32m}[m
[32m+[m
[32m+[m
[32m+[m[32m// è¿”å›é¡¹ç›®è·¯å¾„[m
[32m+[m[32mexport function getNormalPath(p) {[m
[32m+[m[32m  if (p.length === 0 || !p || p == 'undefined') {[m
[32m+[m[32m    return p[m
[32m+[m[32m  };[m
[32m+[m[32m  let res = p.replace('//', '/')[m
[32m+[m[32m  if (res[res.length - 1] === '/') {[m
[32m+[m[32m    return res.slice(0, res.length - 1)[m
[32m+[m[32m  }[m
[32m+[m[32m  return res;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// éªŒè¯æ˜¯å¦ä¸ºblobæ ¼å¼[m
[32m+[m[32mexport function blobValidate(data) {[m
[32m+[m[32m  return data.type !== 'application/json'[m
[32m+[m[32m}[m
[1mdiff --git a/src/utils/scroll-to.js b/src/utils/scroll-to.js[m
[1mnew file mode 100644[m
[1mindex 00000000..c5d8e04e[m
[1m--- /dev/null[m
[1m+++ b/src/utils/scroll-to.js[m
[36m@@ -0,0 +1,58 @@[m
[32m+[m[32mMath.easeInOutQuad = function(t, b, c, d) {[m
[32m+[m[32m  t /= d / 2[m
[32m+[m[32m  if (t < 1) {[m
[32m+[m[32m    return c / 2 * t * t + b[m
[32m+[m[32m  }[m
[32m+[m[32m  t--[m
[32m+[m[32m  return -c / 2 * (t * (t - 2) - 1) + b[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// requestAnimationFrame for Smart Animating http://goo.gl/sx5sts[m
[32m+[m[32mvar requestAnimFrame = (function() {[m
[32m+[m[32m  return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || function(callback) { window.setTimeout(callback, 1000 / 60) }[m
[32m+[m[32m})()[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * Because it's so fucking difficult to detect the scrolling element, just move them all[m
[32m+[m[32m * @param {number} amount[m
[32m+[m[32m */[m
[32m+[m[32mfunction move(amount) {[m
[32m+[m[32m  document.documentElement.scrollTop = amount[m
[32m+[m[32m  document.body.parentNode.scrollTop = amount[m
[32m+[m[32m  document.body.scrollTop = amount[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction position() {[m
[32m+[m[32m  return document.documentElement.scrollTop || document.body.parentNode.scrollTop || document.body.scrollTop[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * @param {number} to[m
[32m+[m[32m * @param {number} duration[m
[32m+[m[32m * @param {Function} callback[m
[32m+[m[32m */[m
[32m+[m[32mexport function scrollTo(to, duration, callback) {[m
[32m+[m[32m  const start = position()[m
[32m+[m[32m  const change = to - start[m
[32m+[m[32m  const increment = 20[m
[32m+[m[32m  let currentTime = 0[m
[32m+[m[32m  duration = (typeof (duration) === 'undefined') ? 500 : duration[m
[32m+[m[32m  var animateScroll = function() {[m
[32m+[m[32m    // increment the time[m
[32m+[m[32m    currentTime += increment[m
[32m+[m[32m    // find the value with the quadratic in-out easing function[m
[32m+[m[32m    var val = Math.easeInOutQuad(currentTime, start, change, duration)[m
[32m+[m[32m    // move the document.body[m
[32m+[m[32m    move(val)[m
[32m+[m[32m    // do the animation unless its over[m
[32m+[m[32m    if (currentTime < duration) {[m
[32m+[m[32m      requestAnimFrame(animateScroll)[m
[32m+[m[32m    } else {[m
[32m+[m[32m      if (callback && typeof (callback) === 'function') {[m
[32m+[m[32m        // the animation is done so lets callback[m
[32m+[m[32m        callback()[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  animateScroll()[m
[32m+[m[32m}[m
[1mdiff --git a/src/utils/theme.js b/src/utils/theme.js[m
[1mnew file mode 100644[m
[1mindex 00000000..f4badc67[m
[1m--- /dev/null[m
[1m+++ b/src/utils/theme.js[m
[36m@@ -0,0 +1,49 @@[m
[32m+[m[32m// å¤„ç†ä¸»é¢˜æ ·å¼[m
[32m+[m[32mexport function handleThemeStyle(theme) {[m
[32m+[m	[32mdocument.documentElement.style.setProperty('--el-color-primary', theme)[m
[32m+[m	[32mfor (let i = 1; i <= 9; i++) {[m
[32m+[m		[32mdocument.documentElement.style.setProperty(`--el-color-primary-light-${i}`, `${getLightColor(theme, i / 10)}`)[m
[32m+[m	[32m}[m
[32m+[m	[32mfor (let i = 1; i <= 9; i++) {[m
[32m+[m		[32mdocument.documentElement.style.setProperty(`--el-color-primary-dark-${i}`, `${getDarkColor(theme, i / 10)}`)[m
[32m+[m	[32m}[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// hexé¢œè‰²è½¬rgbé¢œè‰²[m
[32m+[m[32mexport function hexToRgb(str) {[m
[32m+[m	[32mstr = str.replace('#', '')[m
[32m+[m	[32mlet hexs = str.match(/../g)[m
[32m+[m	[32mfor (let i = 0; i < 3; i++) {[m
[32m+[m		[32mhexs[i] = parseInt(hexs[i], 16)[m
[32m+[m	[32m}[m
[32m+[m	[32mreturn hexs[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// rgbé¢œè‰²è½¬Hexé¢œè‰²[m
[32m+[m[32mexport function rgbToHex(r, g, b) {[m
[32m+[m	[32mlet hexs = [r.toString(16), g.toString(16), b.toString(16)][m
[32m+[m	[32mfor (let i = 0; i < 3; i++) {[m
[32m+[m		[32mif (hexs[i].length == 1) {[m
[32m+[m			[32mhexs[i] = `0${hexs[i]}`[m
[32m+[m		[32m}[m
[32m+[m	[32m}[m
[32m+[m	[32mreturn `#${hexs.join('')}`[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å˜æµ…é¢œè‰²å€¼[m
[32m+[m[32mexport function getLightColor(color, level) {[m
[32m+[m	[32mlet rgb = hexToRgb(color)[m
[32m+[m	[32mfor (let i = 0; i < 3; i++) {[m
[32m+[m		[32mrgb[i] = Math.floor((255 - rgb[i]) * level + rgb[i])[m
[32m+[m	[32m}[m
[32m+[m	[32mreturn rgbToHex(rgb[0], rgb[1], rgb[2])[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å˜æ·±é¢œè‰²å€¼[m
[32m+[m[32mexport function getDarkColor(color, level) {[m
[32m+[m	[32mlet rgb = hexToRgb(color)[m
[32m+[m	[32mfor (let i = 0; i < 3; i++) {[m
[32m+[m		[32mrgb[i] = Math.floor(rgb[i] * (1 - level))[m
[32m+[m	[32m}[m
[32m+[m	[32mreturn rgbToHex(rgb[0], rgb[1], rgb[2])[m
[32m+[m[32m}[m
[1mdiff --git a/src/utils/validate.js b/src/utils/validate.js[m
[1mnew file mode 100644[m
[1mindex 00000000..702add4b[m
[1m--- /dev/null[m
[1m+++ b/src/utils/validate.js[m
[36m@@ -0,0 +1,93 @@[m
[32m+[m[32m/**[m
[32m+[m[32m * åˆ¤æ–­urlæ˜¯å¦æ˜¯httpæˆ–https[m[41m [m
[32m+[m[32m * @param {string} path[m
[32m+[m[32m * @returns {Boolean}[m
[32m+[m[32m */[m
[32m+[m[32m export function isHttp(url) {[m
[32m+[m[32m  return url.indexOf('http://') !== -1 || url.indexOf('https://') !== -1[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * åˆ¤æ–­pathæ˜¯å¦ä¸ºå¤–é“¾[m
[32m+[m[32m * @param {string} path[m
[32m+[m[32m * @returns {Boolean}[m
[32m+[m[32m */[m
[32m+[m[32m export function isExternal(path) {[m
[32m+[m[32m  return /^(https?:|mailto:|tel:)/.test(path)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * @param {string} str[m
[32m+[m[32m * @returns {Boolean}[m
[32m+[m[32m */[m
[32m+[m[32mexport function validUsername(str) {[m
[32m+[m[32m  const valid_map = ['admin', 'editor'][m
[32m+[m[32m  return valid_map.indexOf(str.trim()) >= 0[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * @param {string} url[m
[32m+[m[32m * @returns {Boolean}[m
[32m+[m[32m */[m
[32m+[m[32mexport function validURL(url) {[m
[32m+[m[32m  const reg = /^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])){3}|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]{2}))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?'\\+&%$#=~_-]+))*$/[m
[32m+[m[32m  return reg.test(url)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * @param {string} str[m
[32m+[m[32m * @returns {Boolean}[m
[32m+[m[32m */[m
[32m+[m[32mexport function validLowerCase(str) {[m
[32m+[m[32m  const reg = /^[a-z]+$/[m
[32m+[m[32m  return reg.test(str)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * @param {string} str[m
[32m+[m[32m * @returns {Boolean}[m
[32m+[m[32m */[m
[32m+[m[32mexport function validUpperCase(str) {[m
[32m+[m[32m  const reg = /^[A-Z]+$/[m
[32m+[m[32m  return reg.test(str)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * @param {string} str[m
[32m+[m[32m * @returns {Boolean}[m
[32m+[m[32m */[m
[32m+[m[32mexport function validAlphabets(str) {[m
[32m+[m[32m  const reg = /^[A-Za-z]+$/[m
[32m+[m[32m  return reg.test(str)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * @param {string} email[m
[32m+[m[32m * @returns {Boolean}[m
[32m+[m[32m */[m
[32m+[m[32mexport function validEmail(email) {[m
[32m+[m[32m  const reg = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/[m
[32m+[m[32m  return reg.test(email)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * @param {string} str[m
[32m+[m[32m * @returns {Boolean}[m
[32m+[m[32m */[m
[32m+[m[32mexport function isString(str) {[m
[32m+[m[32m  if (typeof str === 'string' || str instanceof String) {[m
[32m+[m[32m    return true[m
[32m+[m[32m  }[m
[32m+[m[32m  return false[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * @param {Array} arg[m
[32m+[m[32m * @returns {Boolean}[m
[32m+[m[32m */[m
[32m+[m[32mexport function isArray(arg) {[m
[32m+[m[32m  if (typeof Array.isArray === 'undefined') {[m
[32m+[m[32m    return Object.prototype.toString.call(arg) === '[object Array]'[m
[32m+[m[32m  }[m
[32m+[m[32m  return Array.isArray(arg)[m
[32m+[m[32m}[m
[1mdiff --git a/src/views/computerMarket/Header.vue b/src/views/computerMarket/Header.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..4be0b078[m
[1m--- /dev/null[m
[1m+++ b/src/views/computerMarket/Header.vue[m
[36m@@ -0,0 +1,135 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <el-header class="header-container">[m
[32m+[m[32m    <div class="header-content">[m
[32m+[m[32m      <!-- å·¦ä¾§åŒºåŸŸï¼šlogo + æ–‡å­— -->[m
[32m+[m[32m      <div class="header-left">[m
[32m+[m[32m        <span class="platform-text">ç”µè„‘ç§Ÿå”®ä¸ç¡¬ä»¶æ€§èƒ½æ™ºèƒ½è¯„ä¼°å¹³å°</span>[m
[32m+[m[32m      </div>[m
[32m+[m[41m      [m
[32m+[m[32m      <!-- ä¸­é—´å ä½ -->[m
[32m+[m[32m      <div class="header-center"></div>[m
[32m+[m[41m      [m
[32m+[m[32m      <!-- å³ä¾§å¯¼èˆª -->[m
[32m+[m[32m      <div class="header-right">[m
[32m+[m[32m        <div class="nav-item" @click="goToHome">é¦–é¡µ</div>[m
[32m+[m[32m        <div class="nav-item" @click="goToSale">å‡ºå”®</div>[m
[32m+[m[32m        <div class="nav-item" @click="goToRental">ç§Ÿèµ</div>[m
[32m+[m[32m        <div class="nav-item" @click="goToBuild">è£…æœº</div> <!-- æ–°å¢è£…æœºæŒ‰é’® -->[m
[32m+[m[32m        <div class="nav-item" @click="goToCart">è´­ç‰©è½¦</div>[m
[32m+[m[32m        <div class="nav-item" @click="goToMerchant">å•†å®¶</div>[m
[32m+[m[32m        <!-- ç™»å½•çŠ¶æ€ç»„ä»¶ -->[m
[32m+[m[32m        <LoginStatus />[m
[32m+[m[32m      </div>[m
[32m+[m[32m    </div>[m
[32m+[m[32m  </el-header>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { useRouter } from 'vue-router';[m
[32m+[m[32mimport LoginStatus from '@/components/LoginStatus.vue';[m
[32m+[m
[32m+[m[32mconst router = useRouter();[m
[32m+[m
[32m+[m[32m// å¯¼èˆªæ–¹æ³•[m
[32m+[m[32mconst goToHome = () => {[m
[32m+[m[32m  router.push('/computer-market');[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mconst goToSale = () => {[m
[32m+[m[32m  router.push('/computer-market/sale');[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mconst goToRental = () => {[m
[32m+[m[32m  router.push('/computer-market/rental');[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// æ–°å¢è£…æœºé¡µé¢å¯¼èˆª[m
[32m+[m[32mconst goToBuild = () => {[m
[32m+[m[32m  router.push('/computer-market/build');[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mconst goToCart = () => {[m
[32m+[m[32m  router.push('/computer-market/shopping-cart');[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mconst goToMerchant = () => {[m
[32m+[m[32m  router.push('/login');[m
[32m+[m[32m};[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style scoped>[m
[32m+[m[32m.header-container {[m
[32m+[m[32m  background-color: #ffffff;[m
[32m+[m[32m  padding: 0 20px;[m
[32m+[m[32m  border-bottom: 1px solid #e0e0e0;[m
[32m+[m[32m  height: 60px;[m
[32m+[m[32m  border-radius: 20px;[m
[32m+[m[32m  position: fixed;[m
[32m+[m[32m  top: 0;[m
[32m+[m[32m  left: 0;[m
[32m+[m[32m  right: 0;[m
[32m+[m[32m  z-index: 1000;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.header-content {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m  height: 100%;[m
[32m+[m[32m  padding: 0 20px;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  border-radius: 20px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.header-left {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  gap: 15px;[m
[32m+[m[32m  font-weight: 500;[m
[32m+[m[32m  color: #000000;[m
[32m+[m[32m  width: 33.333%;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.platform-text {[m
[32m+[m[32m  font-size: 16px;[m
[32m+[m[32m  white-space: nowrap;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.header-center {[m
[32m+[m[32m  width: 33.333%;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.header-right {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  justify-content: flex-end;[m
[32m+[m[32m  gap: 30px; /* å‡å°é—´è·ï¼ˆä»50pxæ”¹ä¸º30pxï¼Œé¿å…é—´è·è¿‡å¤§ï¼‰ */[m
[32m+[m[32m  width: 60%; /* å¢åŠ å®½åº¦ï¼ˆä»33.333%æ”¹ä¸º60%ï¼Œæä¾›è¶³å¤Ÿç©ºé—´ï¼‰ */[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.nav-item {[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m  cursor: pointer;[m
[32m+[m[32m  padding: 5px 0;[m
[32m+[m[32m  transition: color 0.2s;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.nav-item:hover {[m
[32m+[m[32m  color: #0071c5;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.nav-item::after {[m
[32m+[m[32m  content: '';[m
[32m+[m[32m  position: absolute;[m
[32m+[m[32m  left: 0;[m
[32m+[m[32m  bottom: -5px;[m
[32m+[m[32m  width: 0;[m
[32m+[m[32m  height: 2px;[m
[32m+[m[32m  background-color: #0071c5;[m
[32m+[m[32m  transition: width 0.3s ease;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.nav-item:hover::after {[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/views/computerMarket/cart/index.vue b/src/views/computerMarket/cart/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..bbf9a9b7[m
[1m--- /dev/null[m
[1m+++ b/src/views/computerMarket/cart/index.vue[m
[36m@@ -0,0 +1,567 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="cart-page">[m
[32m+[m[32m    <Header />[m
[32m+[m
[32m+[m[32m    <div class="main-container">[m
[32m+[m[32m      <!-- é¡µé¢æ ‡é¢˜ -->[m
[32m+[m[32m      <div class="cart-header">[m
[32m+[m[32m        <h1 class="title">æˆ‘çš„è´­ç‰©æ¸…å•</h1>[m
[32m+[m[32m        <span class="count">å…± {{ cartList.length }} ä»¶å•†å“</span>[m
[32m+[m[32m      </div>[m
[32m+[m
[32m+[m[32m      <!-- åŠ è½½çŠ¶æ€ -->[m
[32m+[m[32m      <div v-if="loading" class="loading-box">[m
[32m+[m[32m        <el-skeleton :rows="5" animated />[m
[32m+[m[32m      </div>[m
[32m+[m
[32m+[m[32m      <!-- ç©ºçŠ¶æ€ -->[m
[32m+[m[32m      <div v-else-if="cartList.length === 0" class="empty-cart">[m
[32m+[m[32m        <el-empty description="è´­ç‰©è½¦ç©ºç©ºå¦‚ä¹Ÿ" :image-size="200">[m
[32m+[m[32m          <el-button type="primary" @click="$router.push('/computer-market')" round>å»é€›é€›</el-button>[m
[32m+[m[32m        </el-empty>[m
[32m+[m[32m      </div>[m
[32m+[m
[32m+[m[32m      <!-- è´­ç‰©è½¦åˆ—è¡¨ -->[m
[32m+[m[32m      <div v-else class="cart-list-wrapper">[m
[32m+[m[32m        <!-- è¡¨å¤´ -->[m
[32m+[m[32m        <div class="cart-table-header">[m
[32m+[m[32m          <div class="col-check">[m
[32m+[m[32m            <el-checkbox[m[41m [m
[32m+[m[32m              v-model="isAllSelected"[m[41m [m
[32m+[m[32m              :indeterminate="isIndeterminate"[m
[32m+[m[32m              @change="handleSelectAll"[m
[32m+[m[32m            >å…¨é€‰</el-checkbox>[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <div class="col-info">å•†å“ä¿¡æ¯</div>[m
[32m+[m[32m          <div class="col-type">ç±»å‹</div>[m
[32m+[m[32m          <div class="col-price">å•ä»·</div>[m
[32m+[m[32m          <div class="col-qty">æ•°é‡</div>[m
[32m+[m[32m          <div class="col-subtotal">å°è®¡</div>[m
[32m+[m[32m          <div class="col-action">æ“ä½œ</div>[m
[32m+[m[32m        </div>[m
[32m+[m
[32m+[m[32m        <!-- å•†å“åˆ—è¡¨é¡¹ -->[m
[32m+[m[32m        <div[m[41m [m
[32m+[m[32m          v-for="item in cartList"[m[41m [m
[32m+[m[32m          :key="item.cartId"[m[41m [m
[32m+[m[32m          class="cart-item"[m
[32m+[m[32m          :class="{ 'is-selected': item.isChecked === '1' }"[m
[32m+[m[32m        >[m
[32m+[m[32m          <div class="col-check">[m
[32m+[m[32m            <el-checkbox[m[41m [m
[32m+[m[32m              v-model="item.isChecked"[m[41m [m
[32m+[m[32m              true-label="1"[m[41m [m
[32m+[m[32m              false-label="0"[m
[32m+[m[32m              @change="(val) => handleCheckChange(item, val)"[m
[32m+[m[32m            />[m
[32m+[m[32m          </div>[m
[32m+[m[41m          [m
[32m+[m[32m          <div class="col-info product-info">[m
[32m+[m[32m            <el-image[m[41m [m
[32m+[m[32m              :src="item.productImg ? baseUrl + item.productImg : defaultImg"[m[41m [m
[32m+[m[32m              class="product-img"[m
[32m+[m[32m              fit="cover"[m
[32m+[m[32m            />[m
[32m+[m[32m            <div class="info-text">[m
[32m+[m[32m              <h3 class="name" @click="$router.push(`/computer-market/product-detail/${item.productId}`)">[m
[32m+[m[32m                {{ item.productName }}[m
[32m+[m[32m              </h3>[m
[32m+[m[32m              <p class="specs">æ ‡å‡†é…ç½®</p>[m
[32m+[m[32m            </div>[m
[32m+[m[32m          </div>[m
[32m+[m
[32m+[m[32m          <div class="col-type">[m
[32m+[m[32m            <el-tag :type="item.businessType === '1' ? '' : 'warning'" effect="plain" round>[m
[32m+[m[32m              {{ item.businessType === '1' ? 'ç§Ÿèµ' : 'è´­ä¹°' }}[m
[32m+[m[32m            </el-tag>[m
[32m+[m[32m          </div>[m
[32m+[m
[32m+[m[32m          <div class="col-price">[m
[32m+[m[32m            <span class="currency">Â¥</span>{{ item.price }}[m
[32m+[m[32m            <span v-if="item.businessType === '1'" class="unit">/å¤©</span>[m
[32m+[m[32m          </div>[m
[32m+[m
[32m+[m[32m          <div class="col-qty">[m
[32m+[m[32m            <el-input-number[m[41m [m
[32m+[m[32m              v-model="item.quantity"[m[41m [m
[32m+[m[32m              :min="1"[m[41m [m
[32m+[m[32m              :max="99"[m
[32m+[m[32m              size="small"[m
[32m+[m[32m              @change="(val) => handleQuantityChange(item, val)"[m
[32m+[m[32m            />[m
[32m+[m[32m          </div>[m
[32m+[m
[32m+[m[32m          <div class="col-subtotal">[m
[32m+[m[32m            <span class="amount">Â¥{{ (item.price * item.quantity).toFixed(2) }}</span>[m
[32m+[m[32m          </div>[m
[32m+[m
[32m+[m[32m          <div class="col-action">[m
[32m+[m[32m            <el-button[m[41m [m
[32m+[m[32m              type="danger"[m[41m [m
[32m+[m[32m              link[m[41m [m
[32m+[m[32m              icon="Delete"[m
[32m+[m[32m              @click="handleDelete(item.cartId)"[m
[32m+[m[32m            >åˆ é™¤</el-button>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </div>[m
[32m+[m
[32m+[m[32m      <!-- åº•éƒ¨ç»“ç®—æ  (Sticky) -->[m
[32m+[m[32m      <div v-if="cartList.length > 0" class="cart-footer">[m
[32m+[m[32m        <div class="footer-left">[m
[32m+[m[32m          <el-checkbox[m[41m [m
[32m+[m[32m            v-model="isAllSelected"[m[41m [m
[32m+[m[32m            :indeterminate="isIndeterminate"[m
[32m+[m[32m            @change="handleSelectAll"[m
[32m+[m[32m          >å…¨é€‰</el-checkbox>[m
[32m+[m[32m          <el-button link @click="handleBatchDelete" :disabled="selectedIds.length === 0" style="margin-left: 20px">[m
[32m+[m[32m            åˆ é™¤é€‰ä¸­çš„å•†å“[m
[32m+[m[32m          </el-button>[m
[32m+[m[32m        </div>[m
[32m+[m[41m        [m
[32m+[m[32m        <div class="footer-right">[m
[32m+[m[32m          <div class="total-info">[m
[32m+[m[32m            <div class="total-row" v-if="totalStats.rentTotal > 0">[m
[32m+[m[32m              <span class="label">ç§Ÿèµæ—¥ç§Ÿ:</span>[m
[32m+[m[32m              <span class="price rent-price">Â¥{{ totalStats.rentTotal.toFixed(2) }}<span class="unit">/å¤©</span></span>[m
[32m+[m[32m            </div>[m
[32m+[m[32m            <div class="total-row" v-if="totalStats.saleTotal > 0">[m
[32m+[m[32m              <span class="label">è´­ä¹°æ€»é¢:</span>[m
[32m+[m[32m              <span class="price sale-price">Â¥{{ totalStats.saleTotal.toFixed(2) }}</span>[m
[32m+[m[32m            </div>[m
[32m+[m[32m            <div class="total-row selected-count">[m
[32m+[m[32m              å·²é€‰ <b>{{ totalStats.count }}</b> ä»¶[m
[32m+[m[32m            </div>[m
[32m+[m[32m          </div>[m
[32m+[m[41m          [m
[32m+[m[32m          <el-button[m[41m [m
[32m+[m[32m            type="primary"[m[41m [m
[32m+[m[32m            class="checkout-btn"[m[41m [m
[32m+[m[32m            :disabled="totalStats.count === 0"[m
[32m+[m[32m            @click="handleCheckout"[m
[32m+[m[32m          >[m
[32m+[m[32m            å»ç»“ç®—[m
[32m+[m[32m          </el-button>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </div>[m
[32m+[m
[32m+[m[32m    </div>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { ref, computed, onMounted } from 'vue';[m
[32m+[m[32mimport { useRouter, useRoute } from 'vue-router';[m
[32m+[m[32mimport { ElMessage, ElMessageBox } from 'element-plus';[m
[32m+[m[32mimport { listCart, updateCart, delCart } from '@/api/shop/cart';[m
[32m+[m[32mimport Header from '../Header.vue';[m
[32m+[m[32mimport { Delete } from '@element-plus/icons-vue';[m
[32m+[m[32mimport { getAppToken } from '@/utils/auth';[m
[32m+[m
[32m+[m[32mconst router = useRouter();[m
[32m+[m[32mconst route = useRoute();[m
[32m+[m[32mconst baseUrl = import.meta.env.VITE_APP_BASE_API;[m
[32m+[m[32mconst defaultImg = new URL('@/assets/images/default-product.jpg', import.meta.url).href;[m
[32m+[m
[32m+[m[32mconst loading = ref(true);[m
[32m+[m[32mconst cartList = ref([]);[m
[32m+[m
[32m+[m[32m// è®¡ç®—å±æ€§ï¼šæ˜¯å¦å…¨é€‰[m
[32m+[m[32mconst isAllSelected = computed({[m
[32m+[m[32m  get: () => cartList.value.length > 0 && cartList.value.every(item => item.isChecked === '1'),[m
[32m+[m[32m  set: (val) => handleSelectAll(val)[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m// è®¡ç®—å±æ€§ï¼šå…¨é€‰æ¡†çš„åŠé€‰çŠ¶æ€[m
[32m+[m[32mconst isIndeterminate = computed(() => {[m
[32m+[m[32m  const selectedCount = cartList.value.filter(item => item.isChecked === '1').length;[m
[32m+[m[32m  return selectedCount > 0 && selectedCount < cartList.value.length;[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m// è®¡ç®—å±æ€§ï¼šé€‰ä¸­çš„IDé›†åˆ[m
[32m+[m[32mconst selectedIds = computed(() => {[m
[32m+[m[32m  return cartList.value[m
[32m+[m[32m    .filter(item => item.isChecked === '1')[m
[32m+[m[32m    .map(item => item.cartId);[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m// è®¡ç®—å±æ€§ï¼šåˆè®¡é‡‘é¢ï¼ˆåˆ†å¼€è®¡ç®—ç§Ÿèµå’Œè´­ä¹°ï¼‰[m
[32m+[m[32mconst totalStats = computed(() => {[m
[32m+[m[32m  let rentTotal = 0;[m
[32m+[m[32m  let saleTotal = 0;[m
[32m+[m[32m  let count = 0;[m
[32m+[m
[32m+[m[32m  cartList.value.forEach(item => {[m
[32m+[m[32m    if (item.isChecked === '1') {[m
[32m+[m[32m      count++;[m
[32m+[m[32m      const subtotal = item.price * item.quantity;[m
[32m+[m[32m      if (item.businessType === '1') {[m
[32m+[m[32m        rentTotal += subtotal;[m
[32m+[m[32m      } else {[m
[32m+[m[32m        saleTotal += subtotal;[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m
[32m+[m[32m  return { rentTotal, saleTotal, count };[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m// æ£€æŸ¥ç™»å½•çŠ¶æ€[m
[32m+[m[32mconst checkLogin = () => {[m
[32m+[m[32m  const token = getAppToken();[m
[32m+[m[32m  if (!token) {[m
[32m+[m[32m    ElMessage.error("è¯·å…ˆç™»å½•");[m
[32m+[m[32m    router.push('/portal/login?redirect=' + encodeURIComponent(route.fullPath));[m
[32m+[m[32m    return false;[m
[32m+[m[32m  }[m
[32m+[m[32m  return true;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// åˆå§‹åŒ–[m
[32m+[m[32mconst initData = async () => {[m
[32m+[m[32m  if (!checkLogin()) return;[m
[32m+[m[41m  [m
[32m+[m[32m  loading.value = true;[m
[32m+[m[32m  try {[m
[32m+[m[32m    const res = await listCart();[m
[32m+[m[32m    cartList.value = res.data || [];[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    console.error(error);[m
[32m+[m[32m    ElMessage.error('è´­ç‰©è½¦åŠ è½½å¤±è´¥');[m
[32m+[m[32m    if (error && error.toString().includes('è®¤è¯å¤±è´¥')) {[m
[32m+[m[32m      ElMessage.error("ç™»å½•çŠ¶æ€å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•");[m
[32m+[m[32m      router.push('/portal/login?redirect=' + encodeURIComponent(route.fullPath));[m
[32m+[m[32m    }[m
[32m+[m[32m  } finally {[m
[32m+[m[32m    loading.value = false;[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// ä¿®æ”¹æ•°é‡[m
[32m+[m[32mconst handleQuantityChange = async (item, val) => {[m
[32m+[m[32m  if (!checkLogin()) return;[m
[32m+[m[41m  [m
[32m+[m[32m  try {[m
[32m+[m[32m    await updateCart({[m
[32m+[m[32m      cartId: item.cartId,[m
[32m+[m[32m      quantity: val,[m
[32m+[m[32m      // ä¿æŒå½“å‰çš„é€‰ä¸­çŠ¶æ€[m
[32m+[m[32m      isChecked: item.isChecked[m
[32m+[m[32m    });[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    // å¦‚æœå¤±è´¥ï¼Œå›é€€ï¼ˆç®€åŒ–å¤„ç†ï¼Œå®é™…å¯åˆ·æ–°åˆ—è¡¨ï¼‰[m
[32m+[m[32m    initData();[m
[32m+[m[32m    if (error && error.toString().includes('è®¤è¯å¤±è´¥')) {[m
[32m+[m[32m      ElMessage.error("ç™»å½•çŠ¶æ€å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•");[m
[32m+[m[32m      router.push('/portal/login?redirect=' + encodeURIComponent(route.fullPath));[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// ä¿®æ”¹é€‰ä¸­çŠ¶æ€[m
[32m+[m[32mconst handleCheckChange = async (item, val) => {[m
[32m+[m[32m  if (!checkLogin()) return;[m
[32m+[m[41m  [m
[32m+[m[32m  try {[m
[32m+[m[32m    await updateCart({[m
[32m+[m[32m      cartId: item.cartId,[m
[32m+[m[32m      isChecked: val[m
[32m+[m[32m      // quantity ä¸ä¼ åç«¯ä¼šä¿æŒåŸæ ·[m
[32m+[m[32m    });[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    item.isChecked = val === '1' ? '0' : '1'; // å›é€€UI[m
[32m+[m[32m    ElMessage.error('æ“ä½œå¤±è´¥');[m
[32m+[m[32m    if (error && error.toString().includes('è®¤è¯å¤±è´¥')) {[m
[32m+[m[32m      ElMessage.error("ç™»å½•çŠ¶æ€å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•");[m
[32m+[m[32m      router.push('/portal/login?redirect=' + encodeURIComponent(route.fullPath));[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// å…¨é€‰/å–æ¶ˆå…¨é€‰[m
[32m+[m[32mconst handleSelectAll = async (val) => {[m
[32m+[m[32m  const checkedStr = val ? '1' : '0';[m
[32m+[m[41m  [m
[32m+[m[32m  // å‰ç«¯å…ˆå˜ UI[m
[32m+[m[32m  cartList.value.forEach(item => item.isChecked = checkedStr);[m
[32m+[m[41m  [m
[32m+[m[32m  // è¿™é‡Œå¦‚æœä¸å¸Œæœ›å¾ªç¯è°ƒç”¨æ¥å£ï¼Œåç«¯åº”è¯¥æä¾›ä¸€ä¸ª batchUpdate æ¥å£[m
[32m+[m[32m  // æ¯•è®¾ç®€åŒ–å¤„ç†ï¼šå¾ªç¯è°ƒç”¨æ›´æ–°ï¼Œæˆ–è€…åªæ›´æ–°å½“å‰é¡µé¢çš„UIï¼Œç­‰ç‚¹å‡»ç»“ç®—æˆ–ç¦»å¼€æ—¶å†åŒæ­¥ï¼Ÿ[m
[32m+[m[32m  // æœ€ç¨³å¦¥çš„æ¯•è®¾æ–¹æ¡ˆï¼šå‰ç«¯å¾ªç¯è°ƒç”¨ updateCart (å¹¶å‘å¯èƒ½è¾ƒå¤š)ï¼Œæˆ–è€…å¿½ç•¥è¿™é‡Œçš„ API è°ƒç”¨ï¼Œ[m
[32m+[m[32m  // ä»…åœ¨â€œå»ç»“ç®—â€æ—¶æŠŠé€‰ä¸­çš„ IDs ä¼ ç»™è®¢å•é¡µã€‚[m
[32m+[m[41m  [m
[32m+[m[32m  // æ–¹æ¡ˆäºŒï¼ˆæ¨èï¼‰ï¼šå¾ªç¯è°ƒç”¨ï¼Œè™½ç„¶æ€§èƒ½ä¸€èˆ¬ä½†é€»è¾‘æœ€ç®€å•[m
[32m+[m[32m  const promises = cartList.value.map(item => updateCart({[m
[32m+[m[32m    cartId: item.cartId,[m
[32m+[m[32m    isChecked: checkedStr[m
[32m+[m[32m  }));[m
[32m+[m[41m  [m
[32m+[m[32m  try {[m
[32m+[m[32m    await Promise.all(promises);[m
[32m+[m[32m  } catch (e) {[m
[32m+[m[32m    console.error(e);[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// åˆ é™¤å•ä¸ª[m
[32m+[m[32mconst handleDelete = (cartId) => {[m
[32m+[m[32m  if (!checkLogin()) return;[m
[32m+[m[41m  [m
[32m+[m[32m  ElMessageBox.confirm('ç¡®å®šè¦ä»è´­ç‰©è½¦ç§»é™¤è¯¥å•†å“å—ï¼Ÿ', 'æç¤º', {[m
[32m+[m[32m    type: 'warning',[m
[32m+[m[32m    confirmButtonText: 'ç§»é™¤',[m
[32m+[m[32m    cancelButtonText: 'å–æ¶ˆ'[m
[32m+[m[32m  }).then(async () => {[m
[32m+[m[32m    await delCart(cartId);[m
[32m+[m[32m    ElMessage.success('å·²ç§»é™¤');[m
[32m+[m[32m    initData(); // åˆ·æ–°åˆ—è¡¨[m
[32m+[m[32m  }).catch(error => {[m
[32m+[m[32m    if (error && error.toString().includes('è®¤è¯å¤±è´¥')) {[m
[32m+[m[32m      ElMessage.error("ç™»å½•çŠ¶æ€å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•");[m
[32m+[m[32m      router.push('/portal/login?redirect=' + encodeURIComponent(route.fullPath));[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// æ‰¹é‡åˆ é™¤[m
[32m+[m[32mconst handleBatchDelete = () => {[m
[32m+[m[32m  if (!checkLogin()) return;[m
[32m+[m[32m  if (selectedIds.value.length === 0) return;[m
[32m+[m[41m  [m
[32m+[m[32m  ElMessageBox.confirm(`ç¡®å®šè¦ç§»é™¤é€‰ä¸­çš„ ${selectedIds.value.length} ä»¶å•†å“å—ï¼Ÿ`, 'æç¤º', {[m
[32m+[m[32m    type: 'warning',[m
[32m+[m[32m    confirmButtonText: 'ç¡®è®¤ç§»é™¤',[m
[32m+[m[32m    cancelButtonText: 'å–æ¶ˆ'[m
[32m+[m[32m  }).then(async () => {[m
[32m+[m[32m    await delCart(selectedIds.value.join(','));[m
[32m+[m[32m    ElMessage.success('æ‰¹é‡ç§»é™¤æˆåŠŸ');[m
[32m+[m[32m    initData();[m
[32m+[m[32m  }).catch(error => {[m
[32m+[m[32m    if (error && error.toString().includes('è®¤è¯å¤±è´¥')) {[m
[32m+[m[32m      ElMessage.error("ç™»å½•çŠ¶æ€å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•");[m
[32m+[m[32m      router.push('/portal/login?redirect=' + encodeURIComponent(route.fullPath));[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// å»ç»“ç®—[m
[32m+[m[32mconst handleCheckout = () => {[m
[32m+[m[32m  if (!checkLogin()) return;[m
[32m+[m[41m  [m
[32m+[m[32m  // è·å–é€‰ä¸­çš„è´­ç‰©è½¦é¡¹ID[m
[32m+[m[32m  const selectedCartIds = cartList.value[m
[32m+[m[32m    .filter(item => item.isChecked === '1')[m
[32m+[m[32m    .map(item => item.cartId);[m
[32m+[m[41m  [m
[32m+[m[32m  if (selectedCartIds.length === 0) {[m
[32m+[m[32m    ElMessage.warning('è¯·å…ˆé€‰æ‹©è¦ç»“ç®—çš„å•†å“');[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  // è·³è½¬åˆ°ç¡®è®¤è®¢å•é¡µå‰ï¼ŒéªŒè¯token[m
[32m+[m[32m  const token = localStorage.getItem('app_token');[m
[32m+[m[32m  console.log("è´­ç‰©è½¦é¡µé¢è·³è½¬å‰ï¼Œtoken:", token);[m
[32m+[m[41m  [m
[32m+[m[32m  // è·³è½¬åˆ°ç¡®è®¤è®¢å•é¡µï¼Œä¼ é€’é€‰ä¸­çš„è´­ç‰©è½¦ID[m
[32m+[m[32m  router.push({[m
[32m+[m[32m    path: '/computer-market/checkout',[m
[32m+[m[32m    query: {[m
[32m+[m[32m      ids: selectedCartIds.join(',')[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32monMounted(() => {[m
[32m+[m[32m  initData();[m
[32m+[m[32m});[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style scoped>[m
[32m+[m[32m.cart-page {[m
[32m+[m[32m  min-height: 100vh;[m
[32m+[m[32m  background-color: #f8fafc;[m
[32m+[m[32m  padding-bottom: 100px; /* ä¸ºåº•éƒ¨æ ç•™ä½ç½® */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.main-container {[m
[32m+[m[32m  max-width: 1200px;[m
[32m+[m[32m  margin: 80px auto 0;[m
[32m+[m[32m  padding: 0 20px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.cart-header {[m
[32m+[m[32m  margin-bottom: 24px;[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: baseline;[m
[32m+[m[32m  gap: 12px;[m
[32m+[m[32m}[m
[32m+[m[32m.cart-header .title {[m
[32m+[m[32m  font-size: 28px;[m
[32m+[m[32m  color: #1e293b;[m
[32m+[m[32m  font-weight: 700;[m
[32m+[m[32m}[m
[32m+[m[32m.cart-header .count {[m
[32m+[m[32m  color: #64748b;[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* ç©ºçŠ¶æ€ */[m
[32m+[m[32m.empty-cart {[m
[32m+[m[32m  background: #fff;[m
[32m+[m[32m  border-radius: 16px;[m
[32m+[m[32m  padding: 60px 0;[m
[32m+[m[32m  box-shadow: 0 2px 10px rgba(0,0,0,0.02);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* è¡¨æ ¼ç»“æ„è‡ªå®šä¹‰ - Flexå¸ƒå±€æ¨¡æ‹Ÿè¡¨æ ¼ */[m
[32m+[m[32m.cart-list-wrapper {[m
[32m+[m[32m  background: #fff;[m
[32m+[m[32m  border-radius: 16px;[m
[32m+[m[32m  overflow: hidden;[m
[32m+[m[32m  box-shadow: 0 2px 10px rgba(0,0,0,0.02);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.cart-table-header {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  padding: 16px 24px;[m
[32m+[m[32m  background: #f1f5f9;[m
[32m+[m[32m  color: #64748b;[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m  font-weight: 500;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* åˆ—å®½å®šä¹‰ */[m
[32m+[m[32m.col-check { width: 60px; display: flex; align-items: center; }[m
[32m+[m[32m.col-info { flex: 1; }[m
[32m+[m[32m.col-type { width: 100px; text-align: center; }[m
[32m+[m[32m.col-price { width: 140px; text-align: center; }[m
[32m+[m[32m.col-qty { width: 140px; text-align: center; }[m
[32m+[m[32m.col-subtotal { width: 140px; text-align: center; font-weight: 700; color: #1e293b; }[m
[32m+[m[32m.col-action { width: 80px; text-align: center; }[m
[32m+[m
[32m+[m[32m/* åˆ—è¡¨é¡¹æ ·å¼ */[m
[32m+[m[32m.cart-item {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  padding: 24px;[m
[32m+[m[32m  border-bottom: 1px solid #f1f5f9;[m
[32m+[m[32m  transition: background-color 0.2s;[m
[32m+[m[32m}[m
[32m+[m[32m.cart-item:hover {[m
[32m+[m[32m  background-color: #fafbfd;[m
[32m+[m[32m}[m
[32m+[m[32m.cart-item:last-child {[m
[32m+[m[32m  border-bottom: none;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* å•†å“ä¿¡æ¯åˆ— */[m
[32m+[m[32m.product-info {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  gap: 16px;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m}[m
[32m+[m[32m.product-img {[m
[32m+[m[32m  width: 80px;[m
[32m+[m[32m  height: 80px;[m
[32m+[m[32m  border-radius: 8px;[m
[32m+[m[32m  border: 1px solid #e2e8f0;[m
[32m+[m[32m  background: #f8fafc;[m
[32m+[m[32m}[m
[32m+[m[32m.info-text {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  flex-direction: column;[m
[32m+[m[32m  gap: 6px;[m
[32m+[m[32m}[m
[32m+[m[32m.info-text .name {[m
[32m+[m[32m  font-size: 16px;[m
[32m+[m[32m  color: #1e293b;[m
[32m+[m[32m  font-weight: 500;[m
[32m+[m[32m  cursor: pointer;[m
[32m+[m[32m  transition: color 0.2s;[m
[32m+[m[32m}[m
[32m+[m[32m.info-text .name:hover {[m
[32m+[m[32m  color: #3b82f6;[m
[32m+[m[32m}[m
[32m+[m[32m.specs {[m
[32m+[m[32m  font-size: 12px;[m
[32m+[m[32m  color: #94a3b8;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* ä»·æ ¼åˆ— */[m
[32m+[m[32m.col-price, .col-subtotal {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  flex-direction: column;[m
[32m+[m[32m  justify-content: center;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m}[m
[32m+[m[32m.unit {[m
[32m+[m[32m  font-size: 12px;[m
[32m+[m[32m  color: #94a3b8;[m
[32m+[m[32m  font-weight: normal;[m
[32m+[m[32m}[m
[32m+[m[32m.currency {[m
[32m+[m[32m  font-size: 12px;[m
[32m+[m[32m  margin-right: 2px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* åº•éƒ¨ç»“ç®—æ  */[m
[32m+[m[32m.cart-footer {[m
[32m+[m[32m  position: fixed;[m
[32m+[m[32m  bottom: 0;[m
[32m+[m[32m  left: 0;[m
[32m+[m[32m  right: 0;[m
[32m+[m[32m  background: #fff;[m
[32m+[m[32m  border-top: 1px solid #e2e8f0;[m
[32m+[m[32m  padding: 16px 40px; /* ç•¥å¾®è°ƒå¤§ä¸¤è¾¹è¾¹è· */[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  justify-content: space-between;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  box-shadow: 0 -4px 20px rgba(0,0,0,0.05);[m
[32m+[m[32m  z-index: 100;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* å±…ä¸­çº¦æŸï¼ˆå¯é€‰ï¼Œå¦‚æœå¸Œæœ›åº•éƒ¨æ å†…å®¹ä¹Ÿå±…ä¸­å¯¹é½ä¸»å®¹å™¨ï¼‰ */[m
[32m+[m[32m/* æ³¨æ„ï¼šç”±äºæ˜¯fixedï¼Œè¿™é‡Œç”¨ç®€å•çš„paddingå¤„ç†ï¼Œå¦‚æœè¿½æ±‚å®Œç¾å¯ä»¥åŠ ä¸ªå†…éƒ¨å®¹å™¨ */[m
[32m+[m
[32m+[m[32m.footer-left {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.footer-right {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  gap: 24px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.total-info {[m
[32m+[m[32m  text-align: right;[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  flex-direction: column;[m
[32m+[m[32m  justify-content: center;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.total-row {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: baseline;[m
[32m+[m[32m  justify-content: flex-end;[m
[32m+[m[32m  gap: 8px;[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m  color: #64748b;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.total-row .price {[m
[32m+[m[32m  font-size: 18px;[m
[32m+[m[32m  font-weight: 700;[m
[32m+[m[32m}[m
[32m+[m[32m.rent-price { color: #3b82f6; }[m
[32m+[m[32m.sale-price { color: #ef4444; }[m
[32m+[m
[32m+[m[32m.checkout-btn {[m
[32m+[m[32m  height: 44px;[m
[32m+[m[32m  padding: 0 36px;[m
[32m+[m[32m  font-size: 16px;[m
[32m+[m[32m  border-radius: 22px;[m
[32m+[m[32m  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/views/computerMarket/mallHome.vue b/src/views/computerMarket/mallHome.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..9140906a[m
[1m--- /dev/null[m
[1m+++ b/src/views/computerMarket/mallHome.vue[m
[36m@@ -0,0 +1,615 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="common-layout">[m
[32m+[m[32m    <el-container class="app-container">[m
[32m+[m[32m      <!-- å¯¼å…¥çš„å¤´éƒ¨å¯¼èˆªæ ç»„ä»¶ -->[m
[32m+[m[32m      <Header />[m
[32m+[m[41m      [m
[32m+[m[32m      <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->[m
[32m+[m[32m      <el-main class="main-content">[m
[32m+[m[32m        <div class="carousel-container">[m
[32m+[m[32m          <!-- è½®æ’­å›¾ -->[m
[32m+[m[32m          <el-carousel trigger="click" height="520px" indicator-position="bottom">[m
[32m+[m[32m            <el-carousel-item>[m
[32m+[m[32m              <img[m[41m [m
[32m+[m[32m                src="@/assets/images/1.jpg"[m[41m [m
[32m+[m[32m                alt="è½®æ’­å›¾1"[m[41m [m
[32m+[m[32m                class="carousel-img"[m
[32m+[m[32m              >[m
[32m+[m[32m            </el-carousel-item>[m
[32m+[m[32m            <el-carousel-item>[m
[32m+[m[32m              <img[m[41m [m
[32m+[m[32m                src="@/assets/images/2.jpg"[m[41m [m
[32m+[m[32m                alt="è½®æ’­å›¾2"[m[41m [m
[32m+[m[32m                class="carousel-img"[m
[32m+[m[32m              >[m
[32m+[m[32m              <div class="carousel-text carousel-text-white">[m
[32m+[m[32m                æ‰¾åˆ°ä½ çš„å®Œç¾è£…å¤‡<br>[m
[32m+[m[32m                <h1>æ€§èƒ½ï¼Œä¸€è§¦å³çŸ¥</h1>[m
[32m+[m[32m              </div>[m
[32m+[m[32m            </el-carousel-item>[m
[32m+[m[32m            <el-carousel-item>[m
[32m+[m[32m              <img[m[41m [m
[32m+[m[32m                src="@/assets/images/3.jpg"[m[41m [m
[32m+[m[32m                alt="è½®æ’­å›¾3"[m[41m [m
[32m+[m[32m                class="carousel-img"[m
[32m+[m[32m              >[m
[32m+[m[32m              <div class="carousel-text carousel-text-black">[m
[32m+[m[32m                ä¸ºæ¸¸æˆç©å®¶ã€ç›´æ’­ç”¨æˆ·å’Œåˆ›æ„äººå£«<br>[m
[32m+[m[32m                <h2>ç²¾å¿ƒæ‰“é€ å‡ºè‰²çš„ç”µè„‘ä½“éªŒ</h2>[m
[32m+[m[32m              </div>[m
[32m+[m[32m            </el-carousel-item>[m
[32m+[m[32m          </el-carousel>[m
[32m+[m
[32m+[m[32m          <!-- æŒ‰é’®åŒºåŸŸ -->[m
[32m+[m[32m          <div class="buttons-container">[m
[32m+[m[32m             <a href="#" class="custom-btn" @click.prevent="goToSale">æˆ‘è¦è´­ä¹°</a>[m
[32m+[m[32m            <a href="#" class="custom-btn" @click.prevent="goToRental">æˆ‘è¦ç§Ÿèµ</a>[m
[32m+[m[32m            <a href="#" class="custom-btn" @click.prevent="goToBuild">DIYè£…æœº</a>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </div>[m
[32m+[m
[32m+[m[32m        <!-- çƒ­é—¨æœºå‹åŒºåŸŸ -->[m
[32m+[m[32m        <div class="hot-model-section">[m
[32m+[m[32m          <span class="hot-model-text"><h2>çƒ­é—¨æœºå‹</h2></span>[m
[32m+[m[32m          <div class="hot-model-line"></div>[m
[32m+[m[32m        </div>[m
[32m+[m
[32m+[m[32m        <!-- å•†å“åˆ—è¡¨å±•ç¤ºåŒºåŸŸ -->[m
[32m+[m[32m        <div class="product-section">[m
[32m+[m[32m          <div v-for="product in productList" :key="product.id" class="product-item">[m
[32m+[m[32m            <h3 class="product-name">{{ product.productName }}</h3>[m
[32m+[m
[32m+[m[32m            <div class="product-detail">[m
[32m+[m[32m              <div class="product-image">[m
[32m+[m[32m                <img[m[41m [m
[32m+[m[32m                  :src="product.imageUrl ? '/dev-api' + product.imageUrl : '@/assets/images/default-product.jpg'"[m[41m [m
[32m+[m[32m                  alt="å•†å“å›¾ç‰‡"[m[41m [m
[32m+[m[32m                  class="product-img"[m
[32m+[m[32m                >[m
[32m+[m[32m              </div>[m
[32m+[m
[32m+[m[32m              <div class="product-form">[m
[32m+[m[32m                <el-form :model="product" label-width="80px" class="hardware-form">[m
[32m+[m[32m                  <el-form-item label="CPU">[m
[32m+[m[32m                    <el-input v-model="product.cpu" readonly />[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m                  <el-form-item label="å†…å­˜">[m
[32m+[m[32m                    <el-input v-model="product.memory" readonly />[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m                  <el-form-item label="ç¡¬ç›˜">[m
[32m+[m[32m                    <el-input v-model="product.ssd" readonly />[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m                  <el-form-item label="æ˜¾å¡">[m
[32m+[m[32m                    <el-input v-model="product.graphicsCard" readonly />[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m                  <el-form-item label="ä¸»æ¿">[m
[32m+[m[32m                    <el-input v-model="product.motherboard" readonly />[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m                  <el-form-item label="ä»·æ ¼">[m
[32m+[m[32m                    <template v-if="product.productType === '1'">[m
[32m+[m[32m                      <el-input :value="`ç§Ÿèµ: ${product.rentPrice || 0}å…ƒ/å¤©`" readonly />[m
[32m+[m[32m                    </template>[m
[32m+[m[32m                    <template v-else-if="product.productType === '2'">[m
[32m+[m[32m                      <el-input :value="`é”€å”®: ${product.salePrice || 0}å…ƒ`" readonly />[m
[32m+[m[32m                    </template>[m
[32m+[m[32m                    <template v-else>[m
[32m+[m[32m                      <el-input :value="`é”€å”®: ${product.salePrice || 0}å…ƒ / ç§Ÿèµ: ${product.rentPrice || 0}å…ƒ/å¤©`" readonly />[m
[32m+[m[32m                    </template>[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m                </el-form>[m
[32m+[m[32m              </div>[m
[32m+[m
[32m+[m[32m              <div class="performance-score">[m
[32m+[m[32m                <h3>æ€§èƒ½è¯„åˆ†</h3>[m
[32m+[m[32m                <el-progress[m[41m [m
[32m+[m[32m                  type="dashboard"[m[41m [m
[32m+[m[32m                  :percentage="product.performanceScore.percentage"[m
[32m+[m[32m                  :stroke-width="15"[m
[32m+[m[32m                  :width="180"[m
[32m+[m[32m                >[m
[32m+[m[32m                  <template #default>[m
[32m+[m[32m                    <span class="percentage-value">{{ product.performanceScore.score }}</span>[m
[32m+[m[32m                    <span class="percentage-label">ç»¼åˆæ€§èƒ½</span>[m
[32m+[m[32m                  </template>[m
[32m+[m[32m                </el-progress>[m
[32m+[m[32m              </div>[m
[32m+[m
[32m+[m[32m              <div class="service-buttons">[m
[32m+[m[32m                <a href="#" class="action-btn rent">ç«‹å³ç§Ÿèµ</a>[m
[32m+[m[32m                <a href="#" class="action-btn buy">ç«‹å³è´­ä¹°</a>[m
[32m+[m[32m                <a href="#" class="action-btn consult" @click.prevent="addToCart(product)">åŠ å…¥è´­ç‰©è½¦</a>[m
[32m+[m[32m              </div>[m
[32m+[m[32m            </div>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </el-main>[m
[32m+[m[41m      [m
[32m+[m[32m      <!-- é¡µè„š -->[m
[32m+[m[32m      <el-footer class="footer-content">[m
[32m+[m[32m        <p>ç”µè„‘ç§Ÿå”®ä¸ç¡¬ä»¶æ€§èƒ½æ™ºèƒ½è¯„ä¼°å¹³å°</p>[m
[32m+[m[32m      </el-footer>[m
[32m+[m[32m    </el-container>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { ref, onMounted } from 'vue';[m
[32m+[m[32mimport { useRouter } from 'vue-router';[m
[32m+[m[32mimport { ElContainer, ElMain, ElFooter, ElCarousel, ElCarouselItem, ElForm, ElFormItem, ElInput, ElProgress, ElMessage } from 'element-plus';[m
[32m+[m[32mimport { listFrontProduct } from "@/api/front/product";[m
[32m+[m[32mimport Header from './Header.vue'; // å¯¼å…¥å¯¼èˆªæ ç»„ä»¶[m
[32m+[m[32mimport { addToCart as addToCartAPI } from '@/api/shop/cart';[m
[32m+[m
[32m+[m[32mconst router = useRouter();[m
[32m+[m
[32m+[m[32m// å¯¼èˆªæ–¹æ³•[m
[32m+[m[32mconst goToRental = () => {[m
[32m+[m[32m  router.push('/computer-market/rental');[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mconst goToSale = () => {[m
[32m+[m[32m  router.push('/computer-market/sale');[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// æ–°å¢è£…æœºé¡µé¢å¯¼èˆª[m
[32m+[m[32mconst goToBuild = () => {[m
[32m+[m[32m  router.push('/computer-market/build');[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// æ·»åŠ åˆ°è´­ç‰©è½¦[m
[32m+[m[32mconst addToCart = async (product) => {[m
[32m+[m[32m  try {[m
[32m+[m[32m    // é¦–é¡µå•†å“æ•°æ®ç»“æ„ä¸åç«¯å•†å“ä¸åŒï¼Œéœ€è¦æ˜ å°„[m
[32m+[m[32m    const cartData = {[m
[32m+[m[32m      productId: product.id,[m
[32m+[m[32m      productName: product.productName,[m
[32m+[m[32m      productImg: product.imageUrl,[m
[32m+[m[32m      price: product.rentPrice || product.salePrice || 0,[m
[32m+[m[32m      businessType: product.productType === '1' ? '1' : '2', // æ ¹æ®å•†å“ç±»å‹åˆ¤æ–­[m
[32m+[m[32m      quantity: 1[m
[32m+[m[32m    };[m
[32m+[m[41m    [m
[32m+[m[32m    await addToCartAPI(cartData);[m
[32m+[m[32m    ElMessage.success('å·²åŠ å…¥è´­ç‰©è½¦');[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    console.error('åŠ å…¥è´­ç‰©è½¦å¤±è´¥:', error);[m
[32m+[m[32m    ElMessage.error('æ“ä½œå¤±è´¥');[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// å•†å“æ•°æ®[m
[32m+[m[32mconst productList = ref([]);[m
[32m+[m
[32m+[m[32m// æ€§èƒ½åˆ†æ•°è®¡ç®—[m
[32m+[m[32mconst calculateScore = (product) => {[m
[32m+[m[32m  let cpuBaseScore = 0;[m
[32m+[m[32m  let memoryScore = 0;[m
[32m+[m[32m  const gpuScore = product.gpuScore || 0;[m
[32m+[m
[32m+[m[32m  if (product.cpuBrand === 'AMD') {[m
[32m+[m[32m    cpuBaseScore = Math.round((product.cpuMultiCoreScore * 0.5) + product.cpuSingleCoreScore);[m
[32m+[m[32m  } else if (product.cpuBrand === 'Intel') {[m
[32m+[m[32m    cpuBaseScore = Math.round((product.cpuMultiCoreScore * 0.3) + product.cpuSingleCoreScore);[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  if (product.memoryType === 'DDR4') {[m
[32m+[m[32m    memoryScore = product.memoryFrequency * 2;[m
[32m+[m[32m  } else if (product.memoryType === 'DDR5') {[m
[32m+[m[32m    memoryScore = product.memoryFrequency;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  const totalScore = cpuBaseScore + memoryScore + gpuScore;[m
[32m+[m[32m  const maxScore = 32387;[m
[32m+[m[32m  const percentage = Math.min(100, Math.round((totalScore / maxScore) * 100));[m
[32m+[m
[32m+[m[32m  return {[m
[32m+[m[32m    score: totalScore,[m
[32m+[m[32m    percentage[m
[32m+[m[32m  };[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// è·å–å•†å“æ•°æ®[m
[32m+[m[32mconst getProductData = async () => {[m
[32m+[m[32m  try {[m
[32m+[m[32m    const response = await listFrontProduct({});[m
[32m+[m[32m    if (response.rows && response.rows.length > 0) {[m
[32m+[m[32m      const hotProducts = response.rows.filter(product =>[m[41m [m
[32m+[m[32m        [1, 2, 3].includes(product.id)[m
[32m+[m[32m      );[m
[32m+[m
[32m+[m[32m      productList.value = hotProducts.map(product => ({[m
[32m+[m[32m        ...product,[m
[32m+[m[32m        performanceScore: calculateScore(product)[m
[32m+[m[32m      }));[m
[32m+[m
[32m+[m[32m      productList.value.sort((a, b) => a.id - b.id);[m
[32m+[m[32m    } else {[m
[32m+[m[32m      console.warn('æœªè·å–åˆ°å•†å“æ•°æ®');[m
[32m+[m[32m      productList.value = [];[m
[32m+[m[32m    }[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    console.error('è·å–å•†å“æ•°æ®å¤±è´¥:', error);[m
[32m+[m[32m    productList.value = [];[m
[32m+[m[32m    ElMessage.error('è·å–çƒ­é—¨å•†å“å¤±è´¥ï¼Œè¯·é‡è¯•');[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// é¡µé¢æŒ‚è½½æ—¶è·å–æ•°æ®[m
[32m+[m[32monMounted(() => {[m
[32m+[m[32m  getProductData();[m
[32m+[m[32m});[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style scoped>[m
[32m+[m[32m/* ä¿ç•™æ‰€æœ‰åŸæœ‰æ ·å¼ï¼Œç§»é™¤äº†å¯¼èˆªæ ç›¸å…³æ ·å¼ï¼ˆå·²ç§»è‡³Headerç»„ä»¶ï¼‰ */[m
[32m+[m[32m.common-layout {[m
[32m+[m[32m  min-height: 100vh;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.app-container {[m
[32m+[m[32m  background-color: #FAFAF8;[m
[32m+[m[32m  color: #000000;[m
[32m+[m[32m  min-height: 100vh;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.main-content {[m
[32m+[m[32m  background-color: #FAFAF8;[m
[32m+[m[32m  padding: 20px;[m
[32m+[m[32m  margin-top: 70px; /* ä¸ºå›ºå®šå¯¼èˆªæ ç•™å‡ºç©ºé—´ */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* è½®æ’­å›¾æ ·å¼ */[m
[32m+[m[32m.carousel-container {[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m  max-width: 1500px;[m
[32m+[m[32m  margin: 0 auto;[m
[32m+[m[32m  border-radius: 8px;[m
[32m+[m[32m  overflow: hidden;[m
[32m+[m[32m  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.carousel-img {[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m  height: 100%;[m
[32m+[m[32m  object-fit: cover;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.carousel-text {[m
[32m+[m[32m  position: absolute;[m
[32m+[m[32m  left: 200px;[m
[32m+[m[32m  top: 50%;[m
[32m+[m[32m  transform: translateY(-50%);[m
[32m+[m[32m  font-size: 28px;[m
[32m+[m[32m  font-weight: 600;[m
[32m+[m[32m  line-height: 1.6;[m
[32m+[m[32m  z-index: 10;[m
[32m+[m[32m  text-align: left;[m
[32m+[m[32m  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.carousel-text-white {[m
[32m+[m[32m  color: #ffffff;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.carousel-text-black {[m
[32m+[m[32m  color: #000000;[m
[32m+[m[32m  text-shadow: 0 2px 4px rgba(255, 255, 255, 0.3);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.carousel-text h1,[m
[32m+[m[32m.carousel-text h2 {[m
[32m+[m[32m  font-size: 2.5rem;[m
[32m+[m[32m  margin: 10px 0;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* æŒ‰é’®æ ·å¼ */[m
[32m+[m[32m.buttons-container {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  justify-content: center;[m
[32m+[m[32m  gap: 40px;[m
[32m+[m[32m  padding: 40px 0;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.custom-btn {[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m  width: 200px;[m
[32m+[m[32m  height: 60px;[m
[32m+[m[32m  text-align: center;[m
[32m+[m[32m  line-height: 60px;[m
[32m+[m[32m  color: #fff;[m
[32m+[m[32m  font-size: 24px;[m
[32m+[m[32m  text-decoration: none;[m
[32m+[m[32m  font-family: sans-serif;[m
[32m+[m[32m  box-sizing: border-box;[m
[32m+[m[32m  background: linear-gradient([m
[32m+[m[32m    135deg,[m
[32m+[m[32m    #7b61ff 0%,[m
[32m+[m[32m    #9a72ff 20%,[m
[32m+[m[32m    #b883ff 40%,[m
[32m+[m[32m    #d694ff 50%,[m
[32m+[m[32m    #b883ff 60%,[m
[32m+[m[32m    #9a72ff 80%,[m
[32m+[m[32m    #7b61ff 100%[m
[32m+[m[32m  );[m
[32m+[m[32m  background-size: 400%;[m
[32m+[m[32m  border-radius: 30px;[m
[32m+[m[32m  z-index: 1;[m
[32m+[m[32m  transition: all 0.3s;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.custom-btn::before {[m
[32m+[m[32m  content: '';[m
[32m+[m[32m  position: absolute;[m
[32m+[m[32m  inset: -5px;[m
[32m+[m[32m  z-index: -1;[m
[32m+[m[32m  background: linear-gradient([m
[32m+[m[32m    135deg,[m
[32m+[m[32m    #7b61ff 0%,[m
[32m+[m[32m    #9a72ff 20%,[m
[32m+[m[32m    #b883ff 40%,[m
[32m+[m[32m    #d694ff 50%,[m
[32m+[m[32m    #b883ff 60%,[m
[32m+[m[32m    #9a72ff 80%,[m
[32m+[m[32m    #7b61ff 100%[m
[32m+[m[32m  );[m
[32m+[m[32m  background-size: 400%;[m
[32m+[m[32m  border-radius: 40px;[m
[32m+[m[32m  opacity: 0;[m
[32m+[m[32m  filter: blur(15px);[m
[32m+[m[32m  transition: opacity 0.5s;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.custom-btn:hover::before {[m
[32m+[m[32m  opacity: 1;[m
[32m+[m[32m  animation: glow 15s linear infinite;[m
[32m+[m[32m}[m
[32m+[m[32m.custom-btn:hover {[m
[32m+[m[32m  animation: glow 15s linear infinite;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m@keyframes glow {[m
[32m+[m[32m  0% { background-position: 0% 0; }[m
[32m+[m[32m  100% { background-position: 400% 0; }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.custom-btn:hover::before {[m
[32m+[m[32m  opacity: 1;[m
[32m+[m[32m  filter: blur(20px);[m
[32m+[m[32m  animation: animate 8s linear infinite;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.custom-btn:hover {[m
[32m+[m[32m  animation: animate 8s linear infinite;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m@keyframes animate {[m
[32m+[m[32m  0% {[m
[32m+[m[32m    background-position: 0%;[m
[32m+[m[32m  }[m
[32m+[m[32m  100% {[m
[32m+[m[32m    background-position: 400%;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* çƒ­é—¨æœºå‹+æ¨ªçº¿å®¹å™¨ */[m
[32m+[m[32m.hot-model-section {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m  margin-top: 20px;[m
[32m+[m[32m  padding-left: 20px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.hot-model-text {[m
[32m+[m[32m  font-size: 20px;[m
[32m+[m[32m  font-weight: 600;[m
[32m+[m[32m  color: #9a72ff;[m
[32m+[m[32m  white-space: nowrap;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.hot-model-line {[m
[32m+[m[32m  height: 2px;[m
[32m+[m[32m  background-color: #e0e0e0;[m
[32m+[m[32m  flex-grow: 1;[m
[32m+[m[32m  margin-left: 15px;[m
[32m+[m[32m  max-width: 1300px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* å•†å“å±•ç¤ºåŒºåŸŸæ ·å¼ */[m
[32m+[m[32m.product-section {[m
[32m+[m[32m  padding: 30px 20px;[m
[32m+[m[32m  max-width: 1600px;[m
[32m+[m[32m  margin: 0 auto;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.product-name {[m
[32m+[m[32m  font-size: 22px;[m
[32m+[m[32m  font-weight: 600;[m
[32m+[m[32m  color: #2c3e50;[m
[32m+[m[32m  margin-bottom: 20px;[m
[32m+[m[32m  padding-left: 12px;[m
[32m+[m[32m  border-left: 4px solid #9a72ff;[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m}[m
[32m+[m[32m.product-name::after {[m
[32m+[m[32m  content: '';[m
[32m+[m[32m  flex-grow: 1;[m
[32m+[m[32m  height: 1px;[m
[32m+[m[32m  background-color: #f0f0f0;[m
[32m+[m[32m  margin-left: 15px;[m
[32m+[m[32m}[m
[32m+[m[32m.product-detail {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  gap: 10px;[m
[32m+[m[32m  background-color: #fff;[m
[32m+[m[32m  border-radius: 8px;[m
[32m+[m[32m  padding: 20px;[m
[32m+[m[32m  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.product-image {[m
[32m+[m[32mflex: 0 0 350px;[m
[32m+[m[32m  height: 300px;[m
[32m+[m[32m  border-radius: 8px;[m
[32m+[m[32m  overflow: hidden;[m
[32m+[m[32m  background-color: #f9f9f9;[m
[32m+[m[32m  border: 1px solid #f0f0f0;[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.product-img {[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m  height: 100%;[m
[32m+[m[32m  object-fit: contain;[m
[32m+[m[32m  transition: transform 0.5s ease;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.product-img:hover {[m
[32m+[m[32m  transform: scale(1.2);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.product-form {[m
[32m+[m[32m  flex: 1;[m
[32m+[m[32m  max-width: 400px;[m[41m [m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.hardware-form {[m
[32m+[m[32m  max-width: 600px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.el-form-item .el-input {[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m  max-width: 400px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* æ€§èƒ½è¯„åˆ†æ ·å¼ */[m
[32m+[m[32m.performance-score {[m
[32m+[m[32m  flex: 0 0 220px;[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  flex-direction: column;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  justify-content: center;[m
[32m+[m[32m  padding: 25px;[m
[32m+[m[32m  background-color: #f9f9f9;[m
[32m+[m[32m  border-radius: 10px;[m
[32m+[m[32m  margin-left: 10px;[m
[32m+[m[32m  min-height: 280px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.performance-score h3 {[m
[32m+[m[32m  margin-bottom: 20px;[m
[32m+[m[32m  color: #333;[m
[32m+[m[32m  font-size: 18px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.percentage-value {[m
[32m+[m[32m  display: block;[m
[32m+[m[32m  margin-top: 10px;[m
[32m+[m[32m  font-size: 28px;[m
[32m+[m[32m  font-weight: bold;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.percentage-label {[m
[32m+[m[32m  display: block;[m
[32m+[m[32m  margin-top: 5px;[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m  color: #666;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.footer-content {[m
[32m+[m[32m  background-color: #FAFAF8;[m
[32m+[m[32m  text-align: center;[m
[32m+[m[32m  padding: 15px 0;[m
[32m+[m[32m  border-top: 1px solid #e0e0e0;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* æŒ‰é’®å®¹å™¨æ ·å¼ */[m
[32m+[m[32m.service-buttons {[m
[32m+[m[32m  flex: 0 0 220px;[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  flex-direction: column;[m
[32m+[m[32m  justify-content: center;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  gap: 15px;[m
[32m+[m[32m  padding: 20px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* æŒ‰é’®æ ·å¼ */[m
[32m+[m[32m.action-btn {[m
[32m+[m[32m  width: 180px;[m
[32m+[m[32m  padding: 12px 0;[m
[32m+[m[32m  border-radius: 8px;[m
[32m+[m[32m  color: #fff;[m
[32m+[m[32m  font-size: 16px;[m
[32m+[m[32m  font-weight: 500;[m
[32m+[m[32m  text-decoration: none;[m
[32m+[m[32m  text-align: center;[m
[32m+[m[32m  transition: all 0.3s ease;[m
[32m+[m[32m  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m  overflow: hidden;[m
[32m+[m[32m  margin-bottom: 20px;[m
[32m+[m[32m  margin-left: 20px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.action-btn:hover {[m
[32m+[m[32m  transform: translateY(-3px);[m
[32m+[m[32m  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.action-btn:active {[m
[32m+[m[32m  transform: translateY(-1px);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.action-btn.rent {[m
[32m+[m[32m  background: linear-gradient(135deg, #7b61ff 0%, #9a72ff 100%);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.action-btn.buy {[m
[32m+[m[32m  background: linear-gradient(135deg, #0071c5 0%, #00a0e9 100%);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.action-btn.consult {[m
[32m+[m[32m  background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.action-btn::before {[m
[32m+[m[32m  content: '';[m
[32m+[m[32m  display: inline-block;[m
[32m+[m[32m  width: 16px;[m
[32m+[m[32m  height: 16px;[m
[32m+[m[32m  margin-right: 8px;[m
[32m+[m[32m  vertical-align: middle;[m
[32m+[m[32m  background-size: contain;[m
[32m+[m[32m  background-repeat: no-repeat;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.product-item {[m
[32m+[m[32m background-color: #fff;[m
[32m+[m[32m  border-radius: 12px;[m
[32m+[m[32m  padding: 25px;[m
[32m+[m[32m  margin-bottom: 30px;[m
[32m+[m[32m  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);[m
[32m+[m[32m  transition: all 0.3s ease;[m
[32m+[m[32m  overflow: hidden;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.product-item:hover {[m
[32m+[m[32m  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);[m
[32m+[m[32m  transform: translateY(-2px);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.action-btn.rent::before {[m
[32m+[m[32m  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23ffffff'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z' /%3E%3C/svg%3E");[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.action-btn.buy::before {[m
[32m+[m[32m  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23ffffff'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z' /%3E%3C/svg%3E");[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.action-btn.consult::before {[m
[32m+[m[32m  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23ffffff'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.97-4.03 9-9 9s-9-4.03-9-9 4.03-9 9-9 9 4.03 9 9z' /%3E%3C/svg%3E");[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/views/computerMarket/shop/build.vue b/src/views/computerMarket/shop/build.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..e69de29b[m
[1mdiff --git a/src/views/computerMarket/shop/detail.vue b/src/views/computerMarket/shop/detail.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..db99f261[m
[1m--- /dev/null[m
[1m+++ b/src/views/computerMarket/shop/detail.vue[m
[36m@@ -0,0 +1,744 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="product-detail-page">[m
[32m+[m[32m    <Header />[m
[32m+[m
[32m+[m[32m    <div class="breadcrumb-container">[m
[32m+[m[32m      <el-breadcrumb separator="/">[m
[32m+[m[32m        <el-breadcrumb-item :to="{ path: '/computer-market' }">é¦–é¡µ</el-breadcrumb-item>[m
[32m+[m[32m        <el-breadcrumb-item :to="{ path: '/computer-market' }">ç”µè„‘ç§Ÿèµ</el-breadcrumb-item>[m
[32m+[m[32m        <el-breadcrumb-item>å•†å“è¯¦æƒ…</el-breadcrumb-item>[m
[32m+[m[32m      </el-breadcrumb>[m
[32m+[m[32m    </div>[m
[32m+[m
[32m+[m[32m    <div class="main-container" v-loading="loading">[m
[32m+[m[32m      <div v-if="product" class="product-wrapper">[m
[32m+[m[32m        <div class="product-overview">[m
[32m+[m[32m          <div class="gallery-section">[m
[32m+[m[32m            <div class="main-image-box">[m
[32m+[m[32m              <el-image[m[41m [m
[32m+[m[32m                :src="product.imageUrl ? '/dev-api' + product.imageUrl : defaultImage"[m[41m [m
[32m+[m[32m                :preview-src-list="[product.imageUrl ? '/dev-api' + product.imageUrl : defaultImage]"[m
[32m+[m[32m                fit="cover"[m
[32m+[m[32m                class="main-image"[m
[32m+[m[32m                :initial-index="0"[m
[32m+[m[32m              >[m
[32m+[m[32m                <template #placeholder>[m
[32m+[m[32m                  <div class="image-slot">åŠ è½½ä¸­...</div>[m
[32m+[m[32m                </template>[m
[32m+[m[32m              </el-image>[m
[32m+[m[32m            </div>[m
[32m+[m[32m          </div>[m
[32m+[m
[32m+[m[32m          <div class="info-section">[m
[32m+[m[32m            <h1 class="product-title">{{ product.productName }}</h1>[m
[32m+[m[32m            <p class="product-subtitle">{{ product.description }}</p>[m
[32m+[m
[32m+[m[32m            <div class="price-card">[m
[32m+[m[32m              <div v-if="isRent" class="price-row rent-mode">[m
[32m+[m[32m                <div class="main-price">[m
[32m+[m[32m                  <span class="label">æ—¥ç§Ÿé‡‘</span>[m
[32m+[m[32m                  <span class="currency">Â¥</span>[m
[32m+[m[32m                  <span class="amount">{{ product.rentPrice }}</span>[m
[32m+[m[32m                  <span class="unit">/å¤©</span>[m
[32m+[m[32m                </div>[m
[32m+[m[32m                <div class="divider-vertical"></div>[m
[32m+[m[32m                <div class="deposit-info">[m
[32m+[m[32m                  <span class="label">æŠ¼é‡‘</span>[m
[32m+[m[32m                  <span class="value">Â¥{{ product.deposit || 0 }}</span>[m
[32m+[m[32m                  <el-tooltip content="å½’è¿˜è®¾å¤‡æ— æŸååï¼ŒæŠ¼é‡‘å°†å…¨é¢é€€è¿˜" placement="top">[m
[32m+[m[32m                    <el-icon class="info-icon"><QuestionFilled /></el-icon>[m
[32m+[m[32m                  </el-tooltip>[m
[32m+[m[32m                </div>[m
[32m+[m[32m              </div>[m
[32m+[m[41m              [m
[32m+[m[32m              <div v-else class="price-row sale-mode">[m
[32m+[m[32m                <div class="main-price">[m
[32m+[m[32m                  <span class="label">å”®ä»·</span>[m
[32m+[m[32m                  <span class="currency">Â¥</span>[m
[32m+[m[32m                  <span class="amount">{{ product.salePrice }}</span>[m
[32m+[m[32m                </div>[m
[32m+[m[32m              </div>[m
[32m+[m
[32m+[m[32m              <div class="stock-row">[m
[32m+[m[32m                <span class="label">{{ isRent ? 'ç§ŸèµçŠ¶æ€:' : 'åº“å­˜çŠ¶æ€:' }}</span>[m
[32m+[m[41m                [m
[32m+[m[32m                <span v-if="realStock > 0" class="stock-val in-stock">[m
[32m+[m[32m                  <el-icon><CircleCheckFilled /></el-icon>[m[41m [m
[32m+[m[32m                  {{ isRent ? 'å¯ç§Ÿ' : 'ç°è´§' }} ({{ realStock }}ä»¶)[m
[32m+[m[32m                </span>[m
[32m+[m[41m                [m
[32m+[m[32m                <span v-else class="stock-val out-stock">[m
[32m+[m[32m                  <el-icon><CircleCloseFilled /></el-icon>[m[41m [m
[32m+[m[32m                  {{ isRent ? 'è®¾å¤‡å·²ç§Ÿå®Œ' : 'æš‚æ—¶ç¼ºè´§' }}[m
[32m+[m[32m                </span>[m
[32m+[m[32m              </div>[m
[32m+[m[32m            </div>[m
[32m+[m
[32m+[m[32m            <div class="specs-summary">[m
[32m+[m[32m              <div class="spec-item">[m
[32m+[m[32m                <span class="spec-label">å¤„ç†å™¨</span>[m
[32m+[m[32m                <span class="spec-val">{{ product.cpu }}</span>[m
[32m+[m[32m              </div>[m
[32m+[m[32m              <div class="spec-item">[m
[32m+[m[32m                <span class="spec-label">æ˜¾å¡</span>[m
[32m+[m[32m                <span class="spec-val">{{ product.graphicsCard }}</span>[m
[32m+[m[32m              </div>[m
[32m+[m[32m              <div class="spec-item">[m
[32m+[m[32m                <span class="spec-label">å†…å­˜</span>[m
[32m+[m[32m                <span class="spec-val">{{ product.memory }}</span>[m
[32m+[m[32m              </div>[m
[32m+[m[32m            </div>[m
[32m+[m
[32m+[m[32m            <div class="action-area">[m
[32m+[m[32m              <div class="quantity-selector">[m
[32m+[m[32m                <span class="qty-label">æ•°é‡</span>[m
[32m+[m[32m                <el-input-number[m[41m [m
[32m+[m[32m                  v-model="quantity"[m[41m [m
[32m+[m[32m                  :min="1"[m[41m [m
[32m+[m[32m                  :max="realStock || 1"[m[41m [m
[32m+[m[32m                  :disabled="realStock <= 0"[m
[32m+[m[32m                  size="large"[m
[32m+[m[32m                />[m
[32m+[m[32m              </div>[m
[32m+[m[41m              [m
[32m+[m[32m              <div class="btn-group">[m
[32m+[m[32m                <el-button[m[41m [m
[32m+[m[32m                  class="action-btn cart-btn"[m[41m [m
[32m+[m[32m                  size="large"[m[41m [m
[32m+[m[32m                  @click="addToCart"[m
[32m+[m[32m                  :disabled="realStock <= 0"[m
[32m+[m[32m                  plain[m
[32m+[m[32m                >[m
[32m+[m[32m                  <el-icon style="margin-right: 8px"><ShoppingCart /></el-icon>[m
[32m+[m[32m                  åŠ å…¥è´­ç‰©è½¦[m
[32m+[m[32m                </el-button>[m
[32m+[m[32m                <el-button[m[41m [m
[32m+[m[32m                  type="primary"[m[41m [m
[32m+[m[32m                  class="action-btn buy-btn"[m[41m [m
[32m+[m[32m                  size="large"[m
[32m+[m[32m                  @click="buyNow"[m
[32m+[m[32m                  :disabled="realStock <= 0"[m
[32m+[m[32m                >[m
[32m+[m[32m                  ç«‹å³{{ isRent ? 'ç§Ÿèµ' : 'è´­ä¹°' }}[m
[32m+[m[32m                </el-button>[m
[32m+[m[32m              </div>[m
[32m+[m[32m            </div>[m
[32m+[m[41m            [m
[32m+[m[32m            <!-- è¯„åˆ†æ¦‚è§ˆ -->[m
[32m+[m[32m            <div class="meta-item">[m
[32m+[m[32m              <span class="label">è¯„åˆ†</span>[m
[32m+[m[32m              <el-rate[m
[32m+[m[32m                v-model="averageRating"[m
[32m+[m[32m                disabled[m
[32m+[m[32m                show-score[m
[32m+[m[32m                text-color="#ff9900"[m
[32m+[m[32m                score-template="{value}"[m
[32m+[m[32m              />[m
[32m+[m[32m            </div>[m
[32m+[m
[32m+[m[32m            <div class="service-tags">[m
[32m+[m[32m              <span class="tag"><el-icon><CircleCheck /></el-icon> æ­£å“ä¿éšœ</span>[m
[32m+[m[32m              <span class="tag"><el-icon><Van /></el-icon> æé€Ÿå‘è´§</span>[m
[32m+[m[32m              <span class="tag" v-if="isRent"><el-icon><Refresh /></el-icon> éšç§Ÿéšè¿˜</span>[m
[32m+[m[32m            </div>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </div>[m
[32m+[m
[32m+[m[32m        <!-- å•†å“æ ‡ç­¾é¡µåŒºåŸŸ -->[m
[32m+[m[32m        <div class="product-tabs-section">[m
[32m+[m[32m          <el-tabs v-model="activeTab" class="custom-tabs" @tab-change="handleTabChange">[m
[32m+[m[32m            <!-- å•†å“è¯¦æƒ…æ ‡ç­¾ -->[m
[32m+[m[32m            <el-tab-pane label="å•†å“è¯¦æƒ…" name="detail">[m
[32m+[m[32m              <div class="rich-text-content" v-if="product.detail">[m
[32m+[m[32m                <div v-html="product.detail"></div>[m
[32m+[m[32m              </div>[m
[32m+[m[32m              <div v-else class="empty-tab">[m
[32m+[m[32m                <el-empty description="æš‚æ— å›¾æ–‡è¯¦æƒ…" :image-size="100"></el-empty>[m
[32m+[m[32m              </div>[m
[32m+[m[32m            </el-tab-pane>[m
[32m+[m[41m            [m
[32m+[m[32m            <!-- é…ç½®æ¸…å•æ ‡ç­¾ -->[m
[32m+[m[32m            <el-tab-pane label="é…ç½®æ¸…å•" name="config">[m
[32m+[m[32m              <el-descriptions :column="1" border>[m
[32m+[m[32m                <el-descriptions-item label="CPU">{{ product.cpu }}</el-descriptions-item>[m
[32m+[m[32m                <el-descriptions-item label="æ˜¾å¡">{{ product.graphicsCard }}</el-descriptions-item>[m
[32m+[m[32m                <el-descriptions-item label="å†…å­˜">{{ product.memory }}</el-descriptions-item>[m
[32m+[m[32m                <el-descriptions-item label="ç¡¬ç›˜">{{ product.ssd }}</el-descriptions-item>[m
[32m+[m[32m                <el-descriptions-item label="ä¸»æ¿">{{ product.mainboard || 'æ ‡å‡†é…ç½®' }}</el-descriptions-item>[m
[32m+[m[32m              </el-descriptions>[m
[32m+[m[32m            </el-tab-pane>[m
[32m+[m[41m            [m
[32m+[m[32m            <!-- å•†å“è¯„ä»·æ ‡ç­¾ -->[m
[32m+[m[32m            <el-tab-pane :label="`å•†å“è¯„ä»· (${commentTotal})`" name="reviews">[m
[32m+[m[32m              <div class="reviews-container" v-loading="commentLoading">[m
[32m+[m[32m                <div v-if="commentList.length > 0">[m
[32m+[m[32m                  <div v-for="item in commentList" :key="item.id" class="review-item">[m
[32m+[m[32m                    <div class="review-header">[m
[32m+[m[32m                      <div class="user-info">[m
[32m+[m[32m                        <el-avatar :size="32" :src="defaultAvatar" class="user-avatar">[m
[32m+[m[32m                          {{ item.userName ? item.userName.charAt(0).toUpperCase() : 'U' }}[m
[32m+[m[32m                        </el-avatar>[m
[32m+[m[32m                        <span class="user-name">{{ item.userName || 'åŒ¿åç”¨æˆ·' }}</span>[m
[32m+[m[32m                      </div>[m
[32m+[m[32m                      <div class="review-meta">[m
[32m+[m[32m                        <span class="review-date">{{ formatDate(item.createTime) }}</span>[m
[32m+[m[32m                      </div>[m
[32m+[m[32m                    </div>[m
[32m+[m[32m                    <div class="review-rating">[m
[32m+[m[32m                      <el-rate v-model="item.star" disabled text-color="#ff9900" />[m
[32m+[m[32m                    </div>[m
[32m+[m[32m                    <div class="review-content">[m
[32m+[m[32m                      {{ item.content }}[m
[32m+[m[32m                    </div>[m
[32m+[m[32m                  </div>[m
[32m+[m[41m                  [m
[32m+[m[32m                  <!-- è¯„ä»·åˆ†é¡µ -->[m
[32m+[m[32m                  <div class="pagination-box">[m
[32m+[m[32m                    <el-pagination[m
[32m+[m[32m                      v-show="commentTotal > 0"[m
[32m+[m[32m                      :total="commentTotal"[m
[32m+[m[32m                      v-model:current-page="commentParams.pageNum"[m
[32m+[m[32m                      v-model:page-size="commentParams.pageSize"[m
[32m+[m[32m                      layout="prev, pager, next"[m
[32m+[m[32m                      @current-change="getCommentList"[m
[32m+[m[32m                    />[m
[32m+[m[32m                  </div>[m
[32m+[m[32m                </div>[m
[32m+[m[32m                <el-empty v-else description="æš‚æ— è¯„ä»·ï¼Œå¿«æ¥æŠ¢æ²™å‘å§ï¼" :image-size="80" />[m
[32m+[m[32m              </div>[m
[32m+[m[32m            </el-tab-pane>[m
[32m+[m[32m          </el-tabs>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </div>[m
[32m+[m[41m      [m
[32m+[m[32m      <el-empty v-else description="å•†å“ä¸å­˜åœ¨" :image-size="100" />[m
[32m+[m[32m    </div>[m
[32m+[m[41m    [m
[32m+[m[32m    <el-footer class="simple-footer">[m
[32m+[m[32m      <p>Â© 2024 ç”µè„‘ç§Ÿèµæ™ºèƒ½å¹³å°</p>[m
[32m+[m[32m    </el-footer>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { ref, onMounted, computed } from 'vue';[m
[32m+[m[32mimport { useRoute, useRouter } from 'vue-router';[m
[32m+[m[32mimport { getFrontProduct } from "@/api/front/product";[m
[32m+[m[32mimport { addToCart as addToCartAPI } from '@/api/shop/cart';[m
[32m+[m[32mimport { listFrontComment } from '@/api/front/comment';[m
[32m+[m[32mimport { ElMessage } from 'element-plus';[m
[32m+[m[32mimport {[m
[32m+[m[32m  ZoomIn, QuestionFilled, CircleCheckFilled, CircleCloseFilled,[m
[32m+[m[32m  ShoppingCart, CircleCheck, Van, Refresh[m
[32m+[m[32m} from '@element-plus/icons-vue';[m
[32m+[m[32mimport Header from '../Header.vue';[m
[32m+[m[32m// import defaultImg from '@/assets/images/default-product.jpg';[m
[32m+[m
[32m+[m[32mconst route = useRoute();[m
[32m+[m[32mconst router = useRouter();[m
[32m+[m
[32m+[m[32m// çŠ¶æ€[m
[32m+[m[32mconst loading = ref(true);[m
[32m+[m[32mconst product = ref(null);[m
[32m+[m[32mconst quantity = ref(1);[m
[32m+[m[32mconst activeTab = ref('detail');[m
[32m+[m[32mconst commentLoading = ref(false);[m
[32m+[m[32mconst commentList = ref([]);[m
[32m+[m[32mconst commentTotal = ref(0);[m
[32m+[m[32mconst averageRating = ref(0);[m
[32m+[m[32mconst defaultAvatar = 'https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png';[m
[32m+[m[32mconst commentParams = ref({[m
[32m+[m[32m  pageNum: 1,[m
[32m+[m[32m  pageSize: 10,[m
[32m+[m[32m  productId: null[m
[32m+[m[32m});[m
[32m+[m[32m// const defaultImage = defaultImg;[m
[32m+[m
[32m+[m[32m// 1. åˆ¤æ–­æ˜¯å¦ç§Ÿèµ (ä¸¥æ ¼æ¨¡å¼ï¼šåªè®¤ '1')[m
[32m+[m[32mconst isRent = computed(() => {[m
[32m+[m[32m  if (!product.value) return false;[m
[32m+[m[32m  return product.value.productType === '1';[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m// 2. åŠ¨æ€è·å–çœŸå®åº“å­˜[m
[32m+[m[32mconst realStock = computed(() => {[m
[32m+[m[32m  if (!product.value) return 0;[m
[32m+[m[32m  if (isRent.value) {[m
[32m+[m[32m    // ç§Ÿèµæ¨¡å¼ï¼šçœ‹ availableRent (å¯ç§Ÿèµæ•°é‡)[m
[32m+[m[32m    return product.value.availableRent || 0;[m
[32m+[m[32m  } else {[m
[32m+[m[32m    // å‡ºå”®æ¨¡å¼ (ç±»å‹ '2')ï¼šçœ‹ stockQuantity (åº“å­˜)[m
[32m+[m[32m    return product.value.stockQuantity || 0;[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m// è·å–è¯¦æƒ…æ•°æ®[m
[32m+[m[32mconst fetchDetail = async () => {[m
[32m+[m[32m  const id = route.params.id;[m
[32m+[m[32m  if (!id) {[m
[32m+[m[32m    ElMessage.error('å‚æ•°é”™è¯¯');[m
[32m+[m[32m    loading.value = false;[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  try {[m
[32m+[m[32m    loading.value = true;[m
[32m+[m[32m    const response = await getFrontProduct(id);[m
[32m+[m[32m    if (response.data) {[m
[32m+[m[32m      product.value = response.data;[m
[32m+[m[32m    } else {[m
[32m+[m[32m      ElMessage.warning('æœªæ‰¾åˆ°è¯¥å•†å“ä¿¡æ¯');[m
[32m+[m[32m    }[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    console.error('è·å–è¯¦æƒ…å¤±è´¥:', error);[m
[32m+[m[32m    ElMessage.error('è·å–å•†å“è¯¦æƒ…å¤±è´¥');[m
[32m+[m[32m  } finally {[m
[32m+[m[32m    loading.value = false;[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// åŠ å…¥è´­ç‰©è½¦[m
[32m+[m[32mconst addToCart = async () => {[m
[32m+[m[32m  if (!product.value) return;[m
[32m+[m
[32m+[m[32m  try {[m
[32m+[m[32m    // ä¸šåŠ¡ç±»å‹: 1=ç§Ÿèµ, 2=è´­ä¹°[m
[32m+[m[32m    const businessType = isRent.value ? '1' : '2';[m[41m [m
[32m+[m[32m    const price = isRent.value ? product.value.rentPrice : product.value.salePrice;[m
[32m+[m[41m    [m
[32m+[m[32m    if (!price || price === 0) {[m
[32m+[m[32m      ElMessage.warning('è¯¥å•†å“ä»·æ ¼å¼‚å¸¸ï¼Œæ— æ³•åŠ å…¥è´­ç‰©è½¦');[m
[32m+[m[32m      return;[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    const cartData = {[m
[32m+[m[32m      productId: product.value.id,[m
[32m+[m[32m      productName: product.value.productName,[m
[32m+[m[32m      productImg: product.value.imageUrl,[m
[32m+[m[32m      price: price,[m
[32m+[m[32m      businessType: businessType,[m
[32m+[m[32m      quantity: quantity.value[m
[32m+[m[32m    };[m
[32m+[m[41m    [m
[32m+[m[32m    await addToCartAPI(cartData);[m
[32m+[m[32m    ElMessage.success('å•†å“å·²æˆåŠŸåŠ å…¥è´­ç‰©è½¦');[m
[32m+[m[32m  } catch (e) {[m
[32m+[m[32m    console.error('åŠ å…¥è´­ç‰©è½¦å¤±è´¥:', e);[m
[32m+[m[32m    // è¿™é‡Œå¦‚æœæ‹¦æˆªå™¨å·²ç»æŠ¥äº†é”™ï¼Œå¯ä»¥ä¸é‡å¤æŠ¥[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// ç«‹å³ä¸‹å•[m
[32m+[m[32mconst buyNow = () => {[m
[32m+[m[32m  addToCart();[m
[32m+[m[32m  // å»ºè®®è·³è½¬åˆ°è´­ç‰©è½¦é¡µï¼Œæˆ–è€…ç›´æ¥è·³ç»“ç®—é¡µ[m
[32m+[m[32m  router.push('/computer-market/cart');[m[41m [m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// è·å–è¯„ä»·åˆ—è¡¨[m
[32m+[m[32mconst getCommentList = async () => {[m
[32m+[m[32m  if (!product.value) return;[m
[32m+[m[41m  [m
[32m+[m[32m  try {[m
[32m+[m[32m    commentLoading.value = true;[m
[32m+[m[32m    commentParams.value.productId = product.value.id;[m
[32m+[m[32m    const response = await listFrontComment(commentParams.value);[m
[32m+[m[41m    [m
[32m+[m[32m    if (response.rows) {[m
[32m+[m[32m      commentList.value = response.rows;[m
[32m+[m[32m      commentTotal.value = response.total;[m
[32m+[m[41m      [m
[32m+[m[32m      // è®¡ç®—å¹³å‡è¯„åˆ†[m
[32m+[m[32m      if (commentList.value.length > 0) {[m
[32m+[m[32m        const totalStars = commentList.value.reduce((sum, item) => sum + (item.star || 0), 0);[m
[32m+[m[32m        averageRating.value = (totalStars / commentList.value.length).toFixed(1);[m
[32m+[m[32m      } else {[m
[32m+[m[32m        averageRating.value = 0;[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    console.error('è·å–è¯„ä»·åˆ—è¡¨å¤±è´¥:', error);[m
[32m+[m[32m    ElMessage.error('è·å–è¯„ä»·åˆ—è¡¨å¤±è´¥');[m
[32m+[m[32m  } finally {[m
[32m+[m[32m    commentLoading.value = false;[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// æ ¼å¼åŒ–æ—¥æœŸ[m
[32m+[m[32mconst formatDate = (dateStr) => {[m
[32m+[m[32m  if (!dateStr) return '';[m
[32m+[m[32m  const date = new Date(dateStr);[m
[32m+[m[32m  const year = date.getFullYear();[m
[32m+[m[32m  const month = String(date.getMonth() + 1).padStart(2, '0');[m
[32m+[m[32m  const day = String(date.getDate()).padStart(2, '0');[m
[32m+[m[32m  return `${year}-${month}-${day}`;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// ç›‘å¬æ ‡ç­¾é¡µåˆ‡æ¢[m
[32m+[m[32mconst handleTabChange = (tab) => {[m
[32m+[m[32m  if (tab === 'reviews' && product.value) {[m
[32m+[m[32m    getCommentList();[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32monMounted(() => {[m
[32m+[m[32m  fetchDetail();[m
[32m+[m[32m});[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style scoped>[m
[32m+[m[32m@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');[m
[32m+[m
[32m+[m[32m.product-detail-page {[m
[32m+[m[32m  min-height: 100vh;[m
[32m+[m[32m  background-color: #ffffff;[m
[32m+[m[32m  font-family: 'Inter', sans-serif;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* é¢åŒ…å±‘ */[m
[32m+[m[32m.breadcrumb-container {[m
[32m+[m[32m  max-width: 1200px;[m
[32m+[m[32m  margin: 20px auto;[m[41m [m
[32m+[m[32m  padding: 0 20px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* ä¸»å®¹å™¨ */[m
[32m+[m[32m.main-container {[m
[32m+[m[32m  max-width: 1200px;[m
[32m+[m[32m  margin: 0 auto 60px;[m
[32m+[m[32m  padding: 0 20px;[m
[32m+[m[32m  min-height: 600px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* ä¸ŠåŠéƒ¨åˆ†å¸ƒå±€ */[m
[32m+[m[32m.product-overview {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  gap: 48px;[m
[32m+[m[32m  margin-bottom: 60px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* å›¾ç‰‡åŒºåŸŸ */[m
[32m+[m[32m.gallery-section {[m
[32m+[m[32m  flex: 0 0 500px;[m[41m [m
[32m+[m[32m  width: 500px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.main-image-box {[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m  height: 500px;[m
[32m+[m[32m  border-radius: 16px;[m
[32m+[m[32m  overflow: hidden;[m
[32m+[m[32m  border: 1px solid #f1f5f9;[m
[32m+[m[32m  background: #f8fafc;[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  justify-content: center;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.main-image {[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m  height: 100%;[m
[32m+[m[32m  cursor: zoom-in;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* ä¿¡æ¯åŒºåŸŸ */[m
[32m+[m[32m.info-section {[m
[32m+[m[32m  flex: 1;[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  flex-direction: column;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.product-title {[m
[32m+[m[32m  font-size: 28px;[m
[32m+[m[32m  font-weight: 700;[m
[32m+[m[32m  color: #1e293b;[m
[32m+[m[32m  margin-bottom: 12px;[m
[32m+[m[32m  line-height: 1.3;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.product-subtitle {[m
[32m+[m[32m  font-size: 15px;[m
[32m+[m[32m  color: #64748b;[m
[32m+[m[32m  margin-bottom: 24px;[m
[32m+[m[32m  line-height: 1.6;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* ä»·æ ¼å¡ç‰‡ */[m
[32m+[m[32m.price-card {[m
[32m+[m[32m  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);[m
[32m+[m[32m  border-radius: 12px;[m
[32m+[m[32m  padding: 24px;[m
[32m+[m[32m  margin-bottom: 24px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.price-row {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: flex-end;[m
[32m+[m[32m  margin-bottom: 16px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.main-price {[m
[32m+[m[32m  color: #ef4444;[m[41m [m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: baseline;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.main-price .label {[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m  color: #64748b;[m
[32m+[m[32m  margin-right: 8px;[m
[32m+[m[32m  font-weight: normal;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.main-price .currency {[m
[32m+[m[32m  font-size: 18px;[m
[32m+[m[32m  font-weight: 600;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.main-price .amount {[m
[32m+[m[32m  font-size: 36px;[m
[32m+[m[32m  font-weight: 800;[m
[32m+[m[32m  line-height: 1;[m
[32m+[m[32m  margin: 0 2px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.main-price .unit {[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m  color: #64748b;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.divider-vertical {[m
[32m+[m[32m  width: 1px;[m
[32m+[m[32m  height: 24px;[m
[32m+[m[32m  background: #cbd5e1;[m
[32m+[m[32m  margin: 0 24px;[m
[32m+[m[32m  align-self: center;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.deposit-info {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  gap: 6px;[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m  color: #475569;[m
[32m+[m[32m}[m
[32m+[m[32m.deposit-info .value {[m
[32m+[m[32m  font-weight: 600;[m
[32m+[m[32m  color: #334155;[m
[32m+[m[32m}[m
[32m+[m[32m.info-icon {[m
[32m+[m[32m  color: #94a3b8;[m
[32m+[m[32m  cursor: help;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.stock-row {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  gap: 10px;[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m}[m
[32m+[m[32m.stock-row .label { color: #64748b; }[m
[32m+[m[32m.stock-val.in-stock { color: #059669; font-weight: 500; display: flex; align-items: center; gap: 4px;}[m
[32m+[m[32m.stock-val.out-stock { color: #dc2626; font-weight: 500; display: flex; align-items: center; gap: 4px;}[m
[32m+[m
[32m+[m[32m/* è§„æ ¼ç®€è¿° */[m
[32m+[m[32m.specs-summary {[m
[32m+[m[32m  margin-bottom: 32px;[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  gap: 32px;[m
[32m+[m[32m  border-top: 1px solid #f1f5f9;[m
[32m+[m[32m  border-bottom: 1px solid #f1f5f9;[m
[32m+[m[32m  padding: 16px 0;[m
[32m+[m[32m}[m
[32m+[m[32m.spec-item {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  flex-direction: column;[m
[32m+[m[32m  gap: 4px;[m
[32m+[m[32m}[m
[32m+[m[32m.spec-label { font-size: 12px; color: #94a3b8; }[m
[32m+[m[32m.spec-val { font-size: 15px; color: #334155; font-weight: 500; }[m
[32m+[m
[32m+[m[32m/* æ“ä½œåŒº */[m
[32m+[m[32m.action-area {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  gap: 24px;[m
[32m+[m[32m  margin-bottom: 32px;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m}[m
[32m+[m[32m.quantity-selector {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  gap: 12px;[m
[32m+[m[32m}[m
[32m+[m[32m.qty-label { font-size: 14px; color: #334155; font-weight: 500; }[m
[32m+[m
[32m+[m[32m.btn-group {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  gap: 16px;[m
[32m+[m[32m  flex: 1;[m
[32m+[m[32m}[m
[32m+[m[32m.action-btn {[m
[32m+[m[32m  flex: 1;[m
[32m+[m[32m  height: 50px;[m
[32m+[m[32m  font-size: 16px;[m
[32m+[m[32m  border-radius: 8px;[m
[32m+[m[32m}[m
[32m+[m[32m.cart-btn {[m
[32m+[m[32m  border-color: #3b82f6;[m
[32m+[m[32m  color: #3b82f6;[m
[32m+[m[32m}[m
[32m+[m[32m.cart-btn:hover {[m
[32m+[m[32m  background-color: #eff6ff;[m
[32m+[m[32m}[m
[32m+[m[32m.buy-btn {[m
[32m+[m[32m  background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);[m
[32m+[m[32m  border: none;[m
[32m+[m[32m  box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);[m
[32m+[m[32m  color: #fff;[m
[32m+[m[32m}[m
[32m+[m[32m.buy-btn:hover {[m
[32m+[m[32m  box-shadow: 0 6px 16px rgba(37, 99, 235, 0.4);[m
[32m+[m[32m  transform: translateY(-1px);[m
[32m+[m[32m}[m
[32m+[m[32m.buy-btn:disabled {[m
[32m+[m[32m  background: #cbd5e1;[m
[32m+[m[32m  box-shadow: none;[m
[32m+[m[32m  cursor: not-allowed;[m
[32m+[m[32m  transform: none;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* æœåŠ¡æ ‡ç­¾ */[m
[32m+[m[32m.service-tags {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  gap: 20px;[m
[32m+[m[32m  font-size: 13px;[m
[32m+[m[32m  color: #64748b;[m
[32m+[m[32m}[m
[32m+[m[32m.service-tags .tag {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  gap: 6px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* åº•éƒ¨ Tabs */[m
[32m+[m[32m.product-tabs-section {[m
[32m+[m[32m  background: #fff;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.custom-tabs :deep(.el-tabs__item) {[m
[32m+[m[32m  font-size: 16px;[m
[32m+[m[32m  height: 50px;[m
[32m+[m[32m  line-height: 50px;[m
[32m+[m[32m  color: #64748b;[m
[32m+[m[32m}[m
[32m+[m[32m.custom-tabs :deep(.el-tabs__item.is-active) {[m
[32m+[m[32m  color: #3b82f6;[m
[32m+[m[32m  font-weight: 600;[m
[32m+[m[32m}[m
[32m+[m[32m.custom-tabs :deep(.el-tabs__active-bar) {[m
[32m+[m[32m  background-color: #3b82f6;[m
[32m+[m[32m  height: 3px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.rich-text-content {[m
[32m+[m[32m  padding: 20px 0;[m
[32m+[m[32m  line-height: 1.8;[m
[32m+[m[32m  color: #334155;[m
[32m+[m[32m  font-size: 15px;[m
[32m+[m[32m}[m
[32m+[m[32m.rich-text-content :deep(img) {[m
[32m+[m[32m  max-width: 100%;[m
[32m+[m[32m  height: auto;[m
[32m+[m[32m}[m
[32m+[m[32m.empty-tab {[m
[32m+[m[32m  padding: 40px 0;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.simple-footer {[m
[32m+[m[32m  text-align: center;[m
[32m+[m[32m  border-top: 1px solid #e2e8f0;[m
[32m+[m[32m  color: #94a3b8;[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m  padding: 20px 0;[m
[32m+[m[32m  margin-top: auto;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* è¯„ä»·æ ·å¼ */[m
[32m+[m[32m.reviews-container {[m
[32m+[m[32m  padding: 20px 0;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.review-item {[m
[32m+[m[32m  padding: 20px 0;[m
[32m+[m[32m  border-bottom: 1px solid #f1f5f9;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.review-item:last-child {[m
[32m+[m[32m  border-bottom: none;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.review-header {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  justify-content: space-between;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  margin-bottom: 12px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.user-info {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  gap: 12px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.user-avatar {[m
[32m+[m[32m  background-color: #3b82f6;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.user-name {[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m  color: #334155;[m
[32m+[m[32m  font-weight: 500;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.review-meta {[m
[32m+[m[32m  font-size: 13px;[m
[32m+[m[32m  color: #94a3b8;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.review-rating {[m
[32m+[m[32m  margin-bottom: 12px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.review-content {[m
[32m+[m[32m  font-size: 15px;[m
[32m+[m[32m  color: #334155;[m
[32m+[m[32m  line-height: 1.6;[m
[32m+[m[32m  padding-left: 44px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.pagination-box {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  justify-content: center;[m
[32m+[m[32m  margin-top: 30px;[m
[32m+[m[32m  padding: 20px 0;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.meta-item {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  gap: 12px;[m
[32m+[m[32m  margin-bottom: 16px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.meta-item .label {[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m  color: #64748b;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* å“åº”å¼ */[m
[32m+[m[32m@media (max-width: 1024px) {[m
[32m+[m[32m  .product-overview { flex-direction: column; gap: 30px; }[m
[32m+[m[32m  .gallery-section { width: 100%; flex: none; }[m
[32m+[m[32m  .main-image-box { height: 400px; }[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/views/computerMarket/shop/rental.vue b/src/views/computerMarket/shop/rental.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..fe9dda25[m
[1m--- /dev/null[m
[1m+++ b/src/views/computerMarket/shop/rental.vue[m
[36m@@ -0,0 +1,1000 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="common-layout">[m
[32m+[m[32m    <el-container class="app-container">[m
[32m+[m[32m      <Header />[m
[32m+[m[41m      [m
[32m+[m[32m       <el-main class="main-content">[m
[32m+[m[32m        <!-- é¡µé¢æ ‡é¢˜ -->[m
[32m+[m[32m        <div class="text-center mb-12 page-header">[m
[32m+[m[32m          <h1 class="main-title">ç”µè„‘ç§ŸèµæœåŠ¡</h1>[m
[32m+[m[32m          <p class="sub-title">é«˜æ€§èƒ½è®¾å¤‡ Â· æé€Ÿç§Ÿèµ Â· æ™ºèƒ½è¯„ä¼°</p>[m
[32m+[m[32m          <div class="title-decoration"></div>[m
[32m+[m[32m        </div>[m
[32m+[m
[32m+[m[32m        <!-- ç­›é€‰å’Œæœç´¢åŒºåŸŸ -->[m
[32m+[m[32m        <el-card class="filter-card mb-8" :body-style="{ padding: '0' }">[m
[32m+[m[32m          <div class="filter-container">[m
[32m+[m[32m            <!-- å·¦ä¾§ï¼šç¡¬ä»¶ç­›é€‰ + ç§Ÿé‡‘èŒƒå›´ + æ’åº -->[m
[32m+[m[32m            <div class="left-filters">[m
[32m+[m[32m              <el-select[m[41m [m
[32m+[m[32m                v-model="selectedCPU"[m[41m [m
[32m+[m[32m                placeholder="CPUå‹å·"[m
[32m+[m[32m                filterable[m
[32m+[m[32m                clearable[m
[32m+[m[32m                @change="handleFilterChange"[m
[32m+[m[32m                class="custom-select hardware-select"[m
[32m+[m[32m                :loading="cpuLoading"[m
[32m+[m[32m                remote[m
[32m+[m[32m                :remote-method="remoteCpuMethod"[m
[32m+[m[32m                effect="light"[m
[32m+[m[32m              >[m
[32m+[m[32m                <template #prefix><el-icon><Cpu /></el-icon></template>[m
[32m+[m[32m                <el-option[m
[32m+[m[32m                  v-for="cpu in cpuOptions"[m
[32m+[m[32m                  :key="cpu.id"[m
[32m+[m[32m                  :label="`${cpu.brand} ${cpu.model}`"[m
[32m+[m[32m                  :value="cpu.model"[m
[32m+[m[32m                >[m
[32m+[m[32m                  <div class="option-item">[m
[32m+[m[32m                    <span class="brand-tag" :class="cpu.brand.toLowerCase()">{{ cpu.brand }}</span>[m
[32m+[m[32m                    <span class="model-text">{{ cpu.model }}</span>[m
[32m+[m[32m                  </div>[m
[32m+[m[32m                </el-option>[m
[32m+[m[32m              </el-select>[m
[32m+[m
[32m+[m[32m              <el-select[m[41m [m
[32m+[m[32m                v-model="selectedGPU"[m[41m [m
[32m+[m[32m                placeholder="æ˜¾å¡å‹å·"[m
[32m+[m[32m                filterable[m
[32m+[m[32m                clearable[m
[32m+[m[32m                @change="handleFilterChange"[m
[32m+[m[32m                class="custom-select hardware-select"[m
[32m+[m[32m                :loading="gpuLoading"[m
[32m+[m[32m                remote[m
[32m+[m[32m                :remote-method="remoteGpuMethod"[m
[32m+[m[32m              >[m
[32m+[m[32m                <template #prefix><el-icon><Monitor /></el-icon></template>[m
[32m+[m[32m                <el-option[m
[32m+[m[32m                  v-for="gpu in gpuOptions"[m
[32m+[m[32m                  :key="gpu.id"[m
[32m+[m[32m                  :label="`${gpu.brand} ${gpu.model}`"[m
[32m+[m[32m                  :value="gpu.model"[m
[32m+[m[32m                >[m
[32m+[m[32m                   <div class="option-item">[m
[32m+[m[32m                    <span class="brand-tag" :class="gpu.brand.toLowerCase()">{{ gpu.brand }}</span>[m
[32m+[m[32m                    <span class="model-text">{{ gpu.model }}</span>[m
[32m+[m[32m                  </div>[m
[32m+[m[32m                </el-option>[m
[32m+[m[32m              </el-select>[m
[32m+[m
[32m+[m[32m              <el-select[m[41m [m
[32m+[m[32m                v-model="priceRange"[m[41m [m
[32m+[m[32m                placeholder="ç§Ÿé‡‘èŒƒå›´"[m
[32m+[m[32m                clearable[m
[32m+[m[32m                @change="handleFilterChange"[m
[32m+[m[32m                class="custom-select price-range-select"[m
[32m+[m[32m              >[m
[32m+[m[32m                <template #prefix><el-icon><Money /></el-icon></template>[m
[32m+[m[32m                <el-option label="0-25å…ƒ/å¤©" value="0-25"></el-option>[m
[32m+[m[32m                <el-option label="25-50å…ƒ/å¤©" value="25-50"></el-option>[m
[32m+[m[32m                <el-option label="50-100å…ƒ/å¤©" value="50-100"></el-option>[m
[32m+[m[32m              </el-select>[m
[32m+[m
[32m+[m[32m              <el-select[m[41m [m
[32m+[m[32m                v-model="sortType"[m[41m [m
[32m+[m[32m                placeholder="æ’åºæ–¹å¼"[m
[32m+[m[32m                @change="handleFilterChange"[m
[32m+[m[32m                class="custom-select sort-select"[m
[32m+[m[32m              >[m
[32m+[m[32m                <template #prefix><el-icon><Sort /></el-icon></template>[m
[32m+[m[32m                <el-option label="é»˜è®¤æ’åº" value="default"></el-option>[m
[32m+[m[32m                <el-option label="ä»·æ ¼ä»ä½åˆ°é«˜" value="price-low"></el-option>[m
[32m+[m[32m                <el-option label="ä»·æ ¼ä»é«˜åˆ°ä½" value="price-high"></el-option>[m
[32m+[m[32m                <el-option label="æ€§èƒ½æ’åº" value="performance"></el-option>[m
[32m+[m[32m              </el-select>[m
[32m+[m[32m            </div>[m
[32m+[m
[32m+[m[32m            <!-- å³ä¾§ï¼šæœç´¢æ¡†å’Œæœç´¢æŒ‰é’® -->[m
[32m+[m[32m            <div class="right-search">[m
[32m+[m[32m              <div class="search-wrapper">[m
[32m+[m[32m                <el-input[m[41m [m
[32m+[m[32m                  v-model="searchQuery"[m[41m [m
[32m+[m[32m                  placeholder="æœç´¢æƒ³ç§Ÿèµçš„è®¾å¤‡..."[m[41m [m
[32m+[m[32m                  class="custom-search-input"[m
[32m+[m[32m                  clearable[m
[32m+[m[32m                  @keyup.enter="handleSearch"[m
[32m+[m[32m                >[m
[32m+[m[32m                  <template #prefix>[m
[32m+[m[32m                    <el-icon class="search-icon"><Search /></el-icon>[m
[32m+[m[32m                  </template>[m
[32m+[m[32m                </el-input>[m
[32m+[m[32m                <el-button[m[41m [m
[32m+[m[32m                  type="primary"[m[41m [m
[32m+[m[32m                  class="search-button"[m
[32m+[m[32m                  @click="handleSearch"[m
[32m+[m[32m                >[m
[32m+[m[32m                  æœç´¢[m
[32m+[m[32m                </el-button>[m
[32m+[m[32m              </div>[m
[32m+[m[32m            </div>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </el-card>[m
[32m+[m
[32m+[m[32m        <!-- å•†å“ç½‘æ ¼ -->[m
[32m+[m[32m        <div v-if="loading" class="loading-container">[m
[32m+[m[32m          <el-skeleton v-for="i in 6" :key="i" animated class="skeleton-card">[m
[32m+[m[32m            <template #template>[m
[32m+[m[32m              <el-skeleton-item variant="image" style="width: 100%; height: 220px" />[m
[32m+[m[32m              <div style="padding: 14px">[m
[32m+[m[32m                <el-skeleton-item variant="h1" style="width: 50%" />[m
[32m+[m[32m                <el-skeleton-item variant="text" style="margin-top: 16px" />[m
[32m+[m[32m                <el-skeleton-item variant="text" style="width: 30%" />[m
[32m+[m[32m              </div>[m
[32m+[m[32m            </template>[m
[32m+[m[32m          </el-skeleton>[m
[32m+[m[32m        </div>[m
[32m+[m[41m        [m
[32m+[m[32m        <div v-else-if="filteredProducts.length === 0" class="empty-container">[m
[32m+[m[32m          <div class="empty-wrapper">[m
[32m+[m[32m            <el-empty description="æš‚æ— ç¬¦åˆæ¡ä»¶çš„å•†å“" :image-size="220"></el-empty>[m
[32m+[m[32m            <el-button @click="clearFilters" plain round>æ¸…ç©ºç­›é€‰æ¡ä»¶</el-button>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </div>[m
[32m+[m[41m        [m
[32m+[m[32m        <div v-else class="product-grid">[m
[32m+[m[32m          <el-card[m[41m [m
[32m+[m[32m            v-for="product in displayedProducts"[m[41m [m
[32m+[m[32m            :key="product.id"[m
[32m+[m[32m            class="product-card"[m
[32m+[m[32m            :body-style="{ padding: '0' }"[m
[32m+[m[32m          >[m
[32m+[m[32m            <div class="card-image-wrapper">[m
[32m+[m[32m              <div class="image-overlay"></div>[m
[32m+[m[32m              <el-image[m[41m [m
[32m+[m[32m                :src="product.imageUrl ? '/dev-api' + product.imageUrl : '@/assets/images/default-product.jpg'"[m[41m [m
[32m+[m[32m                alt="å•†å“å›¾ç‰‡"[m
[32m+[m[32m                class="product-image"[m
[32m+[m[32m                fit="cover"[m
[32m+[m[32m                loading="lazy"[m
[32m+[m[32m              ></el-image>[m
[32m+[m[41m              [m
[32m+[m[32m              <!-- ä»·æ ¼æ ‡ç­¾ (æ‚¬æµ®) -->[m
[32m+[m[32m              <div class="floating-price">[m
[32m+[m[32m                <span class="currency">Â¥</span>[m
[32m+[m[32m                <span class="amount">{{ product.rentPrice }}</span>[m
[32m+[m[32m                <span class="unit">/å¤©</span>[m
[32m+[m[32m              </div>[m
[32m+[m
[32m+[m[32m              <div[m[41m [m
[32m+[m[32m                v-if="product.originalRentPrice && product.originalRentPrice > product.rentPrice"[m
[32m+[m[32m                class="discount-tag"[m
[32m+[m[32m              >[m
[32m+[m[32m                ç‰¹æƒ [m
[32m+[m[32m              </div>[m
[32m+[m[32m            </div>[m
[32m+[m[41m            [m
[32m+[m[32m            <div class="product-body">[m
[32m+[m[32m              <div class="title-section">[m
[32m+[m[32m                <h3 class="product-name" :title="product.productName">{{ product.productName }}</h3>[m
[32m+[m[32m                <div class="stock-badge" :class="{ 'low-stock': product.availableRent < 3 }">[m
[32m+[m[32m                  {{ product.availableRent > 0 ? `ä½™ ${product.availableRent}` : 'ç¼ºè´§' }}[m
[32m+[m[32m                </div>[m
[32m+[m[32m              </div>[m
[32m+[m
[32m+[m[32m              <!-- æ€§èƒ½æ¡ -->[m
[32m+[m[32m              <div class="performance-section">[m
[32m+[m[32m                <div class="perf-label">[m
[32m+[m[32m                  <el-icon color="#6366f1"><Odometer /></el-icon>[m
[32m+[m[32m                  <span>æ€§èƒ½è¯„åˆ†</span>[m
[32m+[m[32m                </div>[m
[32m+[m[32m                <div class="perf-content">[m
[32m+[m[32m                  <el-progress[m[41m [m
[32m+[m[32m                    :percentage="product.performanceScore.percentage"[m[41m [m
[32m+[m[32m                    :stroke-width="8"[m
[32m+[m[32m                    class="performance-bar"[m
[32m+[m[32m                    :color="getPerformanceColor(product.performanceScore.percentage)"[m
[32m+[m[32m                    :format="(p) => product.performanceScore.score"[m
[32m+[m[32m                  ></el-progress>[m
[32m+[m[32m                </div>[m
[32m+[m[32m              </div>[m
[32m+[m[41m              [m
[32m+[m[32m             <!-- å‚æ•°æ ‡ç­¾åŒ–å±•ç¤º -->[m
[32m+[m[32m              <div class="specs-chips">[m
[32m+[m[32m                <div class="spec-chip" title="å¤„ç†å™¨">[m
[32m+[m[32m                  <el-icon><Cpu /></el-icon>[m
[32m+[m[32m                  <span>{{ product.cpu }}</span>[m
[32m+[m[32m                </div>[m
[32m+[m[32m                <div class="spec-chip" title="æ˜¾å¡">[m
[32m+[m[32m                  <el-icon><Monitor /></el-icon>[m
[32m+[m[32m                  <span>{{ product.graphicsCard }}</span>[m
[32m+[m[32m                </div>[m
[32m+[m[32m                <!-- åˆå¹¶å†…å­˜å’Œç¡¬ç›˜åˆ°åŒä¸€è¡Œ -->[m
[32m+[m[32m                <div class="spec-chip memory-storage-chip" title="å†…å­˜/å­˜å‚¨">[m
[32m+[m[32m                  <span>{{ formatMemoryStorage(product) }}</span>[m
[32m+[m[32m                </div>[m
[32m+[m[32m              </div>[m
[32m+[m[32m              <div class="price-section">[m[41m [m
[32m+[m[32m              </div>[m
[32m+[m[32m              <div class="card-divider"></div>[m
[32m+[m[41m              [m
[32m+[m[32m              <div class="action-buttons">[m
[32m+[m[32m                <el-button[m[41m [m
[32m+[m[32m                  class="action-btn detail-btn"[m
[32m+[m[32m                  icon="View"[m
[32m+[m[32m                  @click="viewDetails(product.id)"[m
[32m+[m[32m                  circle[m
[32m+[m[32m                  plain[m
[32m+[m[32m                ></el-button>[m
[32m+[m[32m                <el-button[m[41m [m
[32m+[m[32m                  class="action-btn rent-btn"[m
[32m+[m[32m                  icon="ShoppingCart"[m
[32m+[m[32m                  @click="addToCart(product, 'rent')"[m
[32m+[m[32m                  :disabled="!product.availableRent"[m
[32m+[m[32m                >[m
[32m+[m[32m                  {{ product.availableRent ? 'ç«‹å³ç§Ÿèµ' : 'æš‚æ—¶ç¼ºè´§' }}[m
[32m+[m[32m                </el-button>[m
[32m+[m[32m              </div>[m
[32m+[m[32m            </div>[m
[32m+[m[32m          </el-card>[m
[32m+[m[32m        </div>[m
[32m+[m
[32m+[m[32m        <!-- åŠ è½½æ›´å¤šæŒ‰é’® -->[m
[32m+[m[32m        <div v-if="hasMoreProducts" class="pagination-wrapper">[m
[32m+[m[32m          <el-button[m[41m [m
[32m+[m[32m            class="load-more-btn"[m
[32m+[m[32m            @click="loadMore"[m
[32m+[m[32m            :loading="loading"[m
[32m+[m[32m          >[m
[32m+[m[32m            æ¢ç´¢æ›´å¤šè®¾å¤‡[m
[32m+[m[32m            <el-icon class="el-icon--right"><ArrowDown /></el-icon>[m
[32m+[m[32m          </el-button>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </el-main>[m
[32m+[m[41m      [m
[32m+[m[32m      <!-- é¡µè„š -->[m
[32m+[m[32m      <el-footer class="footer-content">[m
[32m+[m[32m        <div class="footer-inner">[m
[32m+[m[32m          <p>Â© 2024 ç”µè„‘ç§Ÿèµæ™ºèƒ½å¹³å°</p>[m
[32m+[m[32m          <span class="divider">|</span>[m
[32m+[m[32m          <p>æé€Ÿå“åº” Â· ä¿¡ç”¨å…æŠ¼ Â· éšç§Ÿéšè¿˜</p>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </el-footer>[m
[32m+[m[32m    </el-container>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { ref, onMounted, computed } from 'vue';[m
[32m+[m[32mimport { useRouter } from 'vue-router';[m
[32m+[m[32mimport { ElMessage } from 'element-plus';[m
[32m+[m[32mimport { listFrontProduct } from "@/api/front/product";[m
[32m+[m[32mimport { listFrontCpu, listFrontGpu } from "@/api/front/hardware";[m
[32m+[m[32mimport {[m
[32m+[m[32m  Box, ShoppingCart, View, Search, Cpu, Monitor,[m
[32m+[m[32m  Money, Sort, Odometer, Connection, Files, ArrowDown[m
[32m+[m[32m} from '@element-plus/icons-vue';[m
[32m+[m[32mimport Header from '../Header.vue';[m
[32m+[m[32mimport { addToCart as addToCartAPI } from '@/api/shop/cart';[m
[32m+[m
[32m+[m[32mconst router = useRouter();[m
[32m+[m
[32m+[m[32m// çŠ¶æ€ç®¡ç†[m
[32m+[m[32mconst products = ref([]);[m
[32m+[m[32mconst filteredProducts = ref([]);[m
[32m+[m[32mconst displayedProducts = ref([]);[m
[32m+[m[32mconst loading = ref(true);[m
[32m+[m[32mconst currentPage = ref(0);[m
[32m+[m[32mconst productsPerPage = ref(12); // å¢åŠ æ¯é¡µæ˜¾ç¤ºæ•°é‡[m
[32m+[m[32mconst searchQuery = ref('');[m
[32m+[m[32mconst sortType = ref('default');[m
[32m+[m
[32m+[m[32m// ç­›é€‰çŠ¶æ€[m
[32m+[m[32mconst cpuOptions = ref([]);[m
[32m+[m[32mconst gpuOptions = ref([]);[m
[32m+[m[32mconst selectedCPU = ref('');[m
[32m+[m[32mconst selectedGPU = ref('');[m
[32m+[m[32mconst priceRange = ref('');[m
[32m+[m[32mconst cpuLoading = ref(false);[m
[32m+[m[32mconst gpuLoading = ref(false);[m
[32m+[m
[32m+[m[32m// è®¡ç®—å±æ€§[m
[32m+[m[32mconst hasMoreProducts = computed(() => {[m
[32m+[m[32m  return displayedProducts.value.length < filteredProducts.value.length;[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m// æ€§èƒ½é¢œè‰²æ˜ å°„ (è°ƒæ•´ä¸ºæ›´æ¸…æ–°çš„é¢œè‰²)[m
[32m+[m[32mconst getPerformanceColor = (percentage) => {[m
[32m+[m[32m  if (percentage >= 85) return '#8b5cf6'; // ç´«è‰²[m
[32m+[m[32m  if (percentage >= 70) return '#3b82f6'; // è“è‰²[m
[32m+[m[32m  if (percentage >= 50) return '#10b981'; // ç»¿è‰²[m
[32m+[m[32m  return '#f59e0b'; // æ©™è‰²[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// æ¸…ç©ºç­›é€‰[m
[32m+[m[32mconst clearFilters = () => {[m
[32m+[m[32m  selectedCPU.value = '';[m
[32m+[m[32m  selectedGPU.value = '';[m
[32m+[m[32m  priceRange.value = '';[m
[32m+[m[32m  searchQuery.value = '';[m
[32m+[m[32m  sortType.value = 'default';[m
[32m+[m[32m  filterAndSortProducts();[m
[32m+[m[32m};[m
[32m+[m[32mconst formatMemoryStorage = (product) => {[m
[32m+[m[32m  // å¤„ç†å†…å­˜ï¼šæå–å“ç‰Œå’Œå®¹é‡ï¼ˆæ ¹æ®å®é™…æ•°æ®æ ¼å¼è°ƒæ•´ï¼‰[m
[32m+[m[32m  let memoryText = "";[m
[32m+[m[32m  if (product.memory) {[m
[32m+[m[32m    // å‡è®¾å†…å­˜æ ¼å¼å¦‚ "å®ç¢ DDR5 32GB 3600MHz" æˆ– "é‡‘å£«é¡¿ 16GB DDR4"[m
[32m+[m[32m    const memoryParts = product.memory.split(/\s+/);[m
[32m+[m[32m    // å–ç¬¬ä¸€ä¸ªè¯ä½œä¸ºå“ç‰Œï¼Œæ‰¾åˆ°åŒ…å« GB çš„éƒ¨åˆ†ä½œä¸ºå®¹é‡[m
[32m+[m[32m    const brand = memoryParts[0];[m
[32m+[m[32m    const capacity = memoryParts.find(part => part.includes("GB")) || "";[m
[32m+[m[32m    memoryText = `${brand}${capacity}`;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // å¤„ç†ç¡¬ç›˜ï¼šæå–å“ç‰Œå’Œå®¹é‡ï¼ˆæ ¹æ®å®é™…æ•°æ®æ ¼å¼è°ƒæ•´ï¼‰[m
[32m+[m[32m  let storageText = "";[m
[32m+[m[32m  if (product.ssd) {[m
[32m+[m[32m    // å‡è®¾ç¡¬ç›˜æ ¼å¼å¦‚ "è¥¿æ•° SN850X 1TB" æˆ– "ä¸‰æ˜Ÿ 980PRO 512GB"[m
[32m+[m[32m    const storageParts = product.ssd.split(/\s+/);[m
[32m+[m[32m    const brand = storageParts[0];[m
[32m+[m[32m    const capacity = storageParts.find(part => part.includes("TB") || part.includes("GB")) || "";[m
[32m+[m[32m    storageText = `${brand}${capacity}`;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  return `${memoryText} ${storageText}`;[m
[32m+[m[32m};[m
[32m+[m[32m// è®¡ç®—æ€§èƒ½è¯„åˆ†ï¼ˆç»¼åˆæ€§èƒ½ï¼‰[m
[32m+[m[32mconst calculateScore = (product) => {[m
[32m+[m[32m  let cpuBaseScore = 0;[m
[32m+[m[32m  let memoryScore = 0;[m
[32m+[m[32m  const gpuScore = product.gpuScore || 0;[m
[32m+[m
[32m+[m[32m  if (product.cpuBrand === 'AMD') {[m
[32m+[m[32m    cpuBaseScore = Math.round((product.cpuMultiCoreScore * 0.5) + product.cpuSingleCoreScore);[m
[32m+[m[32m  } else if (product.cpuBrand === 'Intel') {[m
[32m+[m[32m    cpuBaseScore = Math.round((product.cpuMultiCoreScore * 0.3) + product.cpuSingleCoreScore);[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  if (product.memoryType === 'DDR4') {[m
[32m+[m[32m    memoryScore = product.memoryFrequency * 2;[m
[32m+[m[32m  } else if (product.memoryType === 'DDR5') {[m
[32m+[m[32m    memoryScore = product.memoryFrequency;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  const totalScore = cpuBaseScore + memoryScore + gpuScore;[m
[32m+[m[32m  const maxScore = 32387;[m
[32m+[m[32m  const percentage = Math.min(100, Math.round((totalScore / maxScore) * 100));[m
[32m+[m
[32m+[m[32m  return {[m
[32m+[m[32m    score: totalScore,[m
[32m+[m[32m    percentage[m
[32m+[m[32m  };[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mconst getProductData = async () => {[m
[32m+[m[32m  try {[m
[32m+[m[32m    loading.value = true;[m
[32m+[m[32m    const response = await listFrontProduct({[m
[32m+[m[32m      minId: 4,[m
[32m+[m[32m      hasRent: true,[m
[32m+[m[32m      pageSize: 1000  // è¯·æ±‚1000æ¡æ•°æ®ï¼Œç¡®ä¿æ‹¿å›æ‰€æœ‰å•†å“[m
[32m+[m[32m    });[m
[32m+[m[41m    [m
[32m+[m[32m    if (response.rows && response.rows.length > 0) {[m
[32m+[m[32m      const validProducts = response.rows.filter(product => product.id >= 4);[m
[32m+[m[32m      products.value = validProducts.map(product => ({[m
[32m+[m[32m        ...product,[m
[32m+[m[32m        performanceScore: calculateScore(product)[m
[32m+[m[32m      }));[m
[32m+[m[32m      filterAndSortProducts();[m
[32m+[m[32m    } else {[m
[32m+[m[32m      products.value = [];[m
[32m+[m[32m      filteredProducts.value = [];[m
[32m+[m[32m    }[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    console.error('è·å–å•†å“æ•°æ®å¤±è´¥:', error);[m
[32m+[m[32m    ElMessage.error('æ•°æ®åŠ è½½å¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•');[m
[32m+[m[32m  } finally {[m
[32m+[m[32m    loading.value = false;[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mconst getHardwareData = async () => {[m
[32m+[m[32m  try {[m
[32m+[m[32m    cpuLoading.value = true;[m
[32m+[m[32m    gpuLoading.value = true;[m
[32m+[m[32m    const [cpuRes, gpuRes] = await Promise.all([[m
[32m+[m[32m      listFrontCpu({ pageSize: 100 }),[m
[32m+[m[32m      listFrontGpu({ pageSize: 100 })[m
[32m+[m[32m    ]);[m
[32m+[m[32m    cpuOptions.value = cpuRes.rows || [];[m
[32m+[m[32m    gpuOptions.value = gpuRes.rows || [];[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    console.error('ç¡¬ä»¶æ•°æ®å¤±è´¥:', error);[m
[32m+[m[32m  } finally {[m
[32m+[m[32m    cpuLoading.value = false;[m
[32m+[m[32m    gpuLoading.value = false;[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mconst remoteCpuMethod = async (query) => {[m
[32m+[m[32m  if (!query) { await getHardwareData(); return; }[m
[32m+[m[32m  cpuLoading.value = true;[m
[32m+[m[32m  try {[m
[32m+[m[32m    const response = await listFrontCpu({ model: query });[m
[32m+[m[32m    cpuOptions.value = response.rows;[m
[32m+[m[32m  } finally { cpuLoading.value = false; }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mconst remoteGpuMethod = async (query) => {[m
[32m+[m[32m  if (!query) { await getHardwareData(); return; }[m
[32m+[m[32m  gpuLoading.value = true;[m
[32m+[m[32m  try {[m
[32m+[m[32m    const response = await listFrontGpu({ model: query });[m
[32m+[m[32m    gpuOptions.value = response.rows;[m
[32m+[m[32m  } finally { gpuLoading.value = false; }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mconst filterAndSortProducts = () => {[m
[32m+[m[32m  let result = [...products.value].filter(product => {[m
[32m+[m[32m    const type = String(product.productType || '').trim();[m
[32m+[m[32m    return type === '1' || type === '3';[m
[32m+[m[32m  });[m
[32m+[m[41m  [m
[32m+[m[32m  if (selectedCPU.value) {[m
[32m+[m[32m    result = result.filter(p => p.cpu?.toLowerCase().includes(selectedCPU.value.toLowerCase()));[m
[32m+[m[32m  }[m
[32m+[m[32m  if (selectedGPU.value) {[m
[32m+[m[32m    result = result.filter(p => p.graphicsCard?.toLowerCase().includes(selectedGPU.value.toLowerCase()));[m
[32m+[m[32m  }[m
[32m+[m[32m  if (priceRange.value) {[m
[32m+[m[32m    const [min, max] = priceRange.value.split('-').map(Number);[m
[32m+[m[32m    result = result.filter(p => (p.rentPrice || 0) >= min && (p.rentPrice || 0) < max);[m
[32m+[m[32m  }[m
[32m+[m[32m  if (searchQuery.value) {[m
[32m+[m[32m    const query = searchQuery.value.toLowerCase();[m
[32m+[m[32m    result = result.filter(p =>[m[41m [m
[32m+[m[32m      p.productName.toLowerCase().includes(query) ||[m
[32m+[m[32m      p.cpu.toLowerCase().includes(query) ||[m
[32m+[m[32m      p.graphicsCard.toLowerCase().includes(query)[m
[32m+[m[32m    );[m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  switch (sortType.value) {[m
[32m+[m[32m    case 'price-low': result.sort((a, b) => (a.rentPrice || 0) - (b.rentPrice || 0)); break;[m
[32m+[m[32m    case 'price-high': result.sort((a, b) => (b.rentPrice || 0) - (a.rentPrice || 0)); break;[m
[32m+[m[32m    case 'performance': result.sort((a, b) => b.performanceScore.percentage - a.performanceScore.percentage); break;[m
[32m+[m[32m    default: result.sort((a, b) => a.id - b.id);[m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  filteredProducts.value = result;[m
[32m+[m[32m  currentPage.value = 0;[m
[32m+[m[32m  displayedProducts.value = filteredProducts.value.slice(0, productsPerPage.value);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mconst handleFilterChange = () => filterAndSortProducts();[m
[32m+[m[32mconst handleSearch = () => filterAndSortProducts();[m
[32m+[m
[32m+[m[32mconst loadMore = () => {[m
[32m+[m[32m  currentPage.value++;[m
[32m+[m[32m  const startIndex = currentPage.value * productsPerPage.value;[m
[32m+[m[32m  const endIndex = startIndex + productsPerPage.value;[m
[32m+[m[32m  displayedProducts.value = [...displayedProducts.value, ...filteredProducts.value.slice(startIndex, endIndex)];[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mconst viewDetails = (productId) => router.push(`/computer-market/product-detail/${productId}`);[m
[32m+[m
[32m+[m[32mconst addToCart = async (product, type) => {[m
[32m+[m[32m  try {[m
[32m+[m[32m    const cartData = {[m
[32m+[m[32m      productId: product.id,[m
[32m+[m[32m      productName: product.productName,[m
[32m+[m[32m      productImg: product.imageUrl,[m
[32m+[m[32m      price: product.rentPrice,[m
[32m+[m[32m      businessType: '1', // 1=ç§Ÿèµ[m
[32m+[m[32m      quantity: 1[m
[32m+[m[32m    };[m
[32m+[m[41m    [m
[32m+[m[32m    await addToCartAPI(cartData);[m
[32m+[m[32m    ElMessage.success({ message: 'å·²åŠ å…¥ç§Ÿèµæ¸…å•', type: 'success', plain: true });[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    console.error('åŠ å…¥ç§Ÿèµæ¸…å•å¤±è´¥:', error);[m
[32m+[m[32m    ElMessage.error('æ“ä½œå¤±è´¥');[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32monMounted(() => {[m
[32m+[m[32m  getProductData();[m
[32m+[m[32m  getHardwareData();[m
[32m+[m[32m});[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style scoped>[m
[32m+[m[32m/* å¼•å…¥å­—ä½“ï¼Œå»ºè®®åœ¨å…¨å±€ index.html ä¸­ä¹Ÿå¼•å…¥ Inter æˆ–ç±»ä¼¼æ— è¡¬çº¿å­—ä½“ */[m
[32m+[m[32m@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');[m
[32m+[m
[32m+[m[32m.common-layout {[m
[32m+[m[32m  min-height: 100vh;[m
[32m+[m[32m  /* ææµ…çš„ç°è“æ¸å˜èƒŒæ™¯ï¼Œæ¸…æ–°æŠ¤çœ¼ */[m
[32m+[m[32m  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);[m
[32m+[m[32m  font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.app-container {[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.main-content {[m
[32m+[m[32m  padding: 40px 24px;[m
[32m+[m[32m  margin-top: 60px;[m
[32m+[m[32m  max-width: 1360px; /* ç•¥å¾®æ”¶çª„æœ€å¤§å®½åº¦ï¼Œè§†è§‰æ›´èšæ‹¢ */[m
[32m+[m[32m  margin-left: auto;[m
[32m+[m[32m  margin-right: auto;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* --- é¡µé¢å¤´éƒ¨ --- */[m
[32m+[m[32m.page-header {[m
[32m+[m[32m  margin-bottom: 48px;[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.main-title {[m
[32m+[m[32m  font-size: 36px;[m
[32m+[m[32m  color: #1e293b;[m
[32m+[m[32m  font-weight: 800;[m
[32m+[m[32m  margin-bottom: 12px;[m
[32m+[m[32m  letter-spacing: -0.5px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.sub-title {[m
[32m+[m[32m  color: #64748b;[m
[32m+[m[32m  font-size: 16px;[m
[32m+[m[32m  font-weight: 400;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.title-decoration {[m
[32m+[m[32m  width: 60px;[m
[32m+[m[32m  height: 4px;[m
[32m+[m[32m  background: #3b82f6;[m
[32m+[m[32m  margin: 20px auto 0;[m
[32m+[m[32m  border-radius: 2px;[m
[32m+[m[32m  opacity: 0.8;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* --- ç­›é€‰åŒºåŸŸ --- */[m
[32m+[m[32m.filter-card {[m
[32m+[m[32m  background: rgba(255, 255, 255, 0.9);[m
[32m+[m[32m  backdrop-filter: blur(12px);[m
[32m+[m[32m  border: 1px solid #fff;[m
[32m+[m[32m  border-radius: 16px;[m
[32m+[m[32m  box-shadow: 0 4px 20px rgba(148, 163, 184, 0.1); /* ææ·¡çš„é˜´å½± */[m
[32m+[m[32m  margin-bottom: 40px;[m
[32m+[m[32m  overflow: visible; /* å…è®¸ä¸‹æ‹‰æ¡†æº¢å‡º */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.filter-container {[m
[32m+[m[32m  padding: 20px 24px;[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  justify-content: space-between;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  gap: 20px;[m
[32m+[m[32m  flex-wrap: wrap;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.left-filters {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  gap: 12px;[m
[32m+[m[32m  flex-wrap: wrap;[m
[32m+[m[32m  flex: 1;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.custom-select {[m
[32m+[m[32m  width: 160px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.hardware-select {[m
[32m+[m[32m  width: 180px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* æ·±åº¦å®šåˆ¶ Element Plus è¾“å…¥æ¡†æ ·å¼ - æ‰å¹³åŒ– */[m
[32m+[m[32m.custom-select :deep(.el-input__wrapper),[m
[32m+[m[32m.custom-search-input :deep(.el-input__wrapper) {[m
[32m+[m[32m  background-color: #f8fafc;[m
[32m+[m[32m  border: 1px solid transparent; /* é»˜è®¤æ— è¾¹æ¡† */[m
[32m+[m[32m  box-shadow: none;[m
[32m+[m[32m  border-radius: 8px;[m
[32m+[m[32m  padding: 4px 12px;[m
[32m+[m[32m  transition: all 0.3s ease;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.custom-select :deep(.el-input__wrapper):hover,[m
[32m+[m[32m.custom-search-input :deep(.el-input__wrapper):hover {[m
[32m+[m[32m  background-color: #f1f5f9;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.custom-select :deep(.el-input__wrapper.is-focus),[m
[32m+[m[32m.custom-search-input :deep(.el-input__wrapper.is-focus) {[m
[32m+[m[32m  background-color: #fff;[m
[32m+[m[32m  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2); /* èšç„¦æ—¶å…‰æ™• */[m
[32m+[m[32m  border-color: #3b82f6;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* ä¸‹æ‹‰é€‰é¡¹ç¾åŒ– */[m
[32m+[m[32m.option-item {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  gap: 8px;[m
[32m+[m[32m}[m
[32m+[m[32m.brand-tag {[m
[32m+[m[32m  font-size: 10px;[m
[32m+[m[32m  padding: 2px 6px;[m
[32m+[m[32m  border-radius: 4px;[m
[32m+[m[32m  color: #fff;[m
[32m+[m[32m  font-weight: bold;[m
[32m+[m[32m}[m
[32m+[m[32m.brand-tag.intel { background: #0068b5; }[m
[32m+[m[32m.brand-tag.amd { background: #ed1c24; }[m
[32m+[m[32m.brand-tag.nvidia { background: #76b900; }[m
[32m+[m[32m.model-text { color: #334155; }[m
[32m+[m
[32m+[m[32m/* å³ä¾§æœç´¢ */[m
[32m+[m[32m.right-search {[m
[32m+[m[32m  width: 320px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.search-wrapper {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  gap: 10px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.custom-search-input {[m
[32m+[m[32m  flex: 1;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.search-button {[m
[32m+[m[32m  border-radius: 8px;[m
[32m+[m[32m  padding: 0 20px;[m
[32m+[m[32m  background-color: #3b82f6;[m
[32m+[m[32m  border: none;[m
[32m+[m[32m  font-weight: 500;[m
[32m+[m[32m  transition: all 0.3s;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.search-button:hover {[m
[32m+[m[32m  background-color: #2563eb;[m
[32m+[m[32m  transform: translateY(-1px);[m
[32m+[m[32m  box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* --- å•†å“ç½‘æ ¼ --- */[m
[32m+[m[32m.product-grid {[m
[32m+[m[32m  display: grid;[m
[32m+[m[32m  grid-template-columns: repeat(4, 1fr); /* å›ºå®šä¸€è¡Œ4åˆ— */[m
[32m+[m[32m  gap: 32px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* --- å•†å“å¡ç‰‡ (æ ¸å¿ƒæ ·å¼) --- */[m
[32m+[m[32m.product-card {[m
[32m+[m[32m  border: none;[m
[32m+[m[32m  border-radius: 20px;[m
[32m+[m[32m  background: #fff;[m
[32m+[m[32m  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m  overflow: hidden;[m
[32m+[m[32m  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.03);[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  flex-direction: column;[m
[32m+[m[32m  height: 100%; /* ã€æ–°å¢ã€‘ç¡®ä¿å¡ç‰‡é«˜åº¦å æ»¡ç½‘æ ¼é«˜åº¦ */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.product-card:hover {[m
[32m+[m[32m  transform: translateY(-8px);[m
[32m+[m[32m  /* æ‚¬åœé˜´å½±åŠ æ·± */[m
[32m+[m[32m  box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.1);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.card-image-wrapper {[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m  height: 220px;[m
[32m+[m[32m  overflow: hidden;[m
[32m+[m[32m  background: #f8fafc;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.product-image {[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m  height: 100%;[m
[32m+[m[32m  transition: transform 0.6s ease;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.product-card:hover .product-image {[m
[32m+[m[32m  transform: scale(1.08);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* æ‚¬æµ®ä»·æ ¼æ ‡ç­¾ */[m
[32m+[m[32m.floating-price {[m
[32m+[m[32m  position: absolute;[m
[32m+[m[32m  bottom: 16px;[m
[32m+[m[32m  right: 16px;[m
[32m+[m[32m  background: rgba(255, 255, 255, 0.95);[m
[32m+[m[32m  backdrop-filter: blur(8px);[m
[32m+[m[32m  padding: 6px 16px;[m
[32m+[m[32m  border-radius: 30px;[m
[32m+[m[32m  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: baseline;[m
[32m+[m[32m  z-index: 2;[m
[32m+[m[32m  color: #0f172a;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.currency { font-size: 14px; font-weight: 600; margin-right: 2px; }[m
[32m+[m[32m.amount { font-size: 22px; font-weight: 800; color: #2563eb; letter-spacing: -0.5px; }[m
[32m+[m[32m.unit { font-size: 12px; color: #64748b; margin-left: 2px; }[m
[32m+[m
[32m+[m[32m.discount-tag {[m
[32m+[m[32m  position: absolute;[m
[32m+[m[32m  top: 16px;[m
[32m+[m[32m  left: 16px;[m
[32m+[m[32m  background: #ef4444;[m
[32m+[m[32m  color: white;[m
[32m+[m[32m  font-size: 12px;[m
[32m+[m[32m  font-weight: 700;[m
[32m+[m[32m  padding: 4px 10px;[m
[32m+[m[32m  border-radius: 6px;[m
[32m+[m[32m  box-shadow: 0 2px 8px rgba(239, 68, 68, 0.4);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* å•†å“ä¸»ä½“å†…å®¹ */[m
[32m+[m[32m.product-body {[m
[32m+[m[32m  padding: 24px;[m
[32m+[m[32m  flex: 1; /* å æ»¡å‰©ä½™ç©ºé—´ */[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  flex-direction: column; /* å‚ç›´æ’åˆ— */[m
[32m+[m[32m  /* ç¡®ä¿å†…å®¹åŒºä¸ä¼šè¢«å‹ç¼© */[m
[32m+[m[32m  min-height: 0;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.title-section {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  justify-content: space-between;[m
[32m+[m[32m  align-items: flex-start;[m
[32m+[m[32m  margin-bottom: 16px;[m
[32m+[m[32m  gap: 10px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.product-name {[m
[32m+[m[32m  font-size: 18px;[m
[32m+[m[32m  font-weight: 700;[m
[32m+[m[32m  color: #1e293b;[m
[32m+[m[32m  line-height: 1.4;[m
[32m+[m[32m  margin: 0;[m
[32m+[m[32m  display: -webkit-box;[m
[32m+[m[32m  -webkit-line-clamp: 2;[m
[32m+[m[32m  -webkit-box-orient: vertical;[m
[32m+[m[32m  overflow: hidden;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.stock-badge {[m
[32m+[m[32m  font-size: 12px;[m
[32m+[m[32m  background: #ecfdf5;[m
[32m+[m[32m  color: #059669;[m
[32m+[m[32m  padding: 2px 8px;[m
[32m+[m[32m  border-radius: 4px;[m
[32m+[m[32m  white-space: nowrap;[m
[32m+[m[32m  font-weight: 600;[m
[32m+[m[32m}[m
[32m+[m[32m.stock-badge.low-stock {[m
[32m+[m[32m  background: #fef2f2;[m
[32m+[m[32m  color: #dc2626;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* æ€§èƒ½éƒ¨åˆ† */[m
[32m+[m[32m.performance-section {[m
[32m+[m[32m  margin-bottom: 20px;[m
[32m+[m[32m  flex-shrink: 0; /* ä¸å‹ç¼© */[m
[32m+[m[32m}[m
[32m+[m[32m.perf-label {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  gap: 6px;[m
[32m+[m[32m  font-size: 12px;[m
[32m+[m[32m  color: #64748b;[m
[32m+[m[32m  margin-bottom: 6px;[m
[32m+[m[32m}[m
[32m+[m[32m.performance-bar :deep(.el-progress-bar__outer) {[m
[32m+[m[32m  background-color: #f1f5f9;[m
[32m+[m[32m  border-radius: 10px;[m
[32m+[m[32m}[m
[32m+[m[32m.performance-bar :deep(.el-progress-bar__inner) {[m
[32m+[m[32m  border-radius: 10px;[m
[32m+[m[32m  transition: width 1s ease;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* è§„æ ¼ Chips */[m
[32m+[m[32m.specs-chips {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  flex-wrap: wrap;[m
[32m+[m[32m  gap: 8px;[m
[32m+[m[32m  margin-bottom: 16px;[m
[32m+[m[32m  flex-shrink: 0;[m
[32m+[m[32m  align-items: flex-start; /* é˜²æ­¢å•è¡Œæ—¶è¢«æ‹‰ä¼¸ */[m
[32m+[m[32m  min-height: 72px; /* æ ¸å¿ƒä¿®æ”¹ï¼šé¢„ç•™çº¦ä¸¤è¡Œæ ‡ç­¾çš„é«˜åº¦ï¼Œå¼ºè¡Œå¯¹é½ */[m
[32m+[m[32m  align-content: flex-start; /* ç¡®ä¿å†…å®¹ä»ä¸Šå¾€ä¸‹æ’ */[m
[32m+[m[32m  justify-content: flex-start; /* ç¡®ä¿å†…å®¹ä»å·¦å¾€å³æ’ */[m
[32m+[m[32m}[m
[32m+[m[32m.spec-chip {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  gap: 6px;[m
[32m+[m[32m  background: #f8fafc; /* ç»Ÿä¸€æµ…ç°èƒŒæ™¯ */[m
[32m+[m[32m  border: 1px solid #e2e8f0; /* ç»Ÿä¸€è¾¹æ¡†è‰² */[m
[32m+[m[32m  padding: 6px 10px;[m
[32m+[m[32m  border-radius: 8px;[m
[32m+[m[32m  font-size: 12px;[m
[32m+[m[32m  color: #475569; /* ç»Ÿä¸€æ–‡å­—è‰² */[m
[32m+[m[32m  transition: all 0.2s;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.spec-chip:hover {[m
[32m+[m[32m  background: #fff;[m
[32m+[m[32m  border-color: #cbd5e1;[m
[32m+[m[32m  transform: translateY(-1px);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.spec-chip .el-icon {[m
[32m+[m[32m  color: #94a3b8;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.card-divider {[m
[32m+[m[32m  height: 1px;[m
[32m+[m[32m  background: #f1f5f9;[m
[32m+[m[32m  margin: 0 -24px 20px; /* è´Ÿè¾¹è·æ‹‰é€šåˆ†å‰²çº¿ */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* æ“ä½œæŒ‰é’®ç»„ */[m
[32m+[m[32m.action-buttons {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  gap: 12px;[m
[32m+[m[32m  margin-top: auto; /* è‡ªåŠ¨æ¨åˆ°æœ€åº•éƒ¨ */[m
[32m+[m[32m  padding-top: 16px; /* ä¸ä¸Šæ–¹å†…å®¹ä¿æŒè·ç¦» */[m
[32m+[m[32m  flex-shrink: 0; /* é˜²æ­¢æŒ‰é’®è¢«å‹ç¼© */[m
[32m+[m[32m}[m
[32m+[m[32m.action-btn {[m
[32m+[m[32m  height: 44px;[m
[32m+[m[32m  border-radius: 10px;[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m  font-weight: 600;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.detail-btn {[m
[32m+[m[32m  width: 44px;[m
[32m+[m[32m  padding: 0;[m
[32m+[m[32m  border-color: #e2e8f0;[m
[32m+[m[32m  color: #64748b;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.detail-btn:hover {[m
[32m+[m[32m  background-color: #f8fafc;[m
[32m+[m[32m  color: #3b82f6;[m
[32m+[m[32m  border-color: #bfdbfe;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.rent-btn {[m
[32m+[m[32m  flex: 1;[m
[32m+[m[32m  background: #1e293b; /* æ·±è‰²æŒ‰é’®æ˜¾é«˜çº§ */[m
[32m+[m[32m  border: none;[m
[32m+[m[32m  color: #fff;[m
[32m+[m[32m  box-shadow: 0 4px 12px rgba(30, 41, 59, 0.2);[m
[32m+[m[32m  transition: all 0.3s;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.rent-btn:hover {[m
[32m+[m[32m  background: #334155;[m
[32m+[m[32m  box-shadow: 0 6px 16px rgba(30, 41, 59, 0.3);[m
[32m+[m[32m  transform: translateY(-1px);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.rent-btn.is-disabled {[m
[32m+[m[32m  background: #e2e8f0;[m
[32m+[m[32m  color: #94a3b8;[m
[32m+[m[32m  box-shadow: none;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* --- å…¶ä»– --- */[m
[32m+[m[32m.pagination-wrapper {[m
[32m+[m[32m  text-align: center;[m
[32m+[m[32m  margin-top: 60px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.load-more-btn {[m
[32m+[m[32m  background: white;[m
[32m+[m[32m  border: 1px solid #e2e8f0;[m
[32m+[m[32m  color: #475569;[m
[32m+[m[32m  padding: 12px 32px;[m
[32m+[m[32m  height: auto;[m
[32m+[m[32m  border-radius: 30px;[m
[32m+[m[32m  font-size: 15px;[m
[32m+[m[32m  transition: all 0.3s;[m
[32m+[m[32m  box-shadow: 0 2px 8px rgba(0,0,0,0.05);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.load-more-btn:hover {[m
[32m+[m[32m  color: #3b82f6;[m
[32m+[m[32m  border-color: #3b82f6;[m
[32m+[m[32m  background: #eff6ff;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.empty-container {[m
[32m+[m[32m  padding: 60px 0;[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  justify-content: center;[m
[32m+[m[32m}[m
[32m+[m[32m.empty-wrapper {[m
[32m+[m[32m  text-align: center;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.footer-content {[m
[32m+[m[32m  margin-top: 80px;[m
[32m+[m[32m  border-top: 1px solid #e2e8f0;[m
[32m+[m[32m  background: #fff;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.footer-inner {[m
[32m+[m[32m  max-width: 1200px;[m
[32m+[m[32m  margin: 0 auto;[m
[32m+[m[32m  height: 100%;[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  justify-content: center;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  color: #94a3b8;[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.divider { margin: 0 16px; color: #e2e8f0; }[m
[32m+[m
[32m+[m[32m/* å“åº”å¼ */[m
[32m+[m[32m@media (max-width: 1200px) {[m
[32m+[m[32m  .product-grid {[m
[32m+[m[32m    grid-template-columns: repeat(3, 1fr); /* ä¸­ç­‰å±å¹•ä¸€è¡Œ3åˆ— */[m
[32m+[m[32m  }[m
[32m+[m[32m  .filter-container { flex-direction: column; align-items: stretch; }[m
[32m+[m[32m  .left-filters { width: 100%; }[m
[32m+[m[32m  .right-search { width: 100%; margin-left: 0; }[m
[32m+[m[32m  .custom-select, .hardware-select, .price-range-select, .sort-select { flex: 1; min-width: 140px; }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m@media (max-width: 992px) {[m
[32m+[m[32m  .product-grid {[m
[32m+[m[32m    grid-template-columns: repeat(2, 1fr); /* å°å±å¹•ä¸€è¡Œ2åˆ— */[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m@media (max-width: 640px) {[m
[32m+[m[32m  .product-grid {[m
[32m+[m[32m    grid-template-columns: 1fr; /* æ‰‹æœºå±å¹•ä¸€è¡Œ1åˆ— */[m
[32m+[m[32m  }[m
[32m+[m[32m  .main-title { font-size: 28px; }[m
[32m+[m[32m}[m
[32m+[m[32m/* å†…å­˜ç¡¬ç›˜åˆå¹¶æ ‡ç­¾æ ·å¼ */[m
[32m+[m[32m.memory-storage-chip {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  gap: 12px; /* å†…å­˜å’Œç¡¬ç›˜ä¹‹é—´çš„é—´è· */[m
[32m+[m[32m  /* ç§»é™¤ç‰¹æ®ŠèƒŒæ™¯å’Œè¾¹æ¡†è‰²ï¼Œç»§æ‰¿é€šç”¨æ ·å¼ */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* è°ƒæ•´æ ‡ç­¾æ•´ä½“å¸ƒå±€ï¼Œé¿å…æ¢è¡Œ */[m
[32m+[m[32m.specs-chips {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  flex-wrap: wrap;[m
[32m+[m[32m  gap: 8px;[m
[32m+[m[32m  margin-bottom: 24px;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* ç¡®ä¿åˆå¹¶åçš„æ ‡ç­¾ä¸ä¼šè¿‡é•¿ */[m
[32m+[m[32m.memory-storage-chip span {[m
[32m+[m[32m  white-space: nowrap;[m
[32m+[m[32m  font-size: 12px;[m
[32m+[m[32m  color: #334155;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/views/computerMarket/shop/sale.vue b/src/views/computerMarket/shop/sale.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..298be04f[m
[1m--- /dev/null[m
[1m+++ b/src/views/computerMarket/shop/sale.vue[m
[36m@@ -0,0 +1,1043 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="common-layout">[m
[32m+[m[32m    <el-container class="app-container">[m
[32m+[m[32m      <Header />[m
[32m+[m[41m      [m
[32m+[m[32m       <el-main class="main-content">[m
[32m+[m[32m        <!-- é¡µé¢æ ‡é¢˜ -->[m
[32m+[m[32m        <div class="text-center mb-12 page-header">[m
[32m+[m[32m          <h1 class="main-title">ç”µè„‘é”€å”®ä¸­å¿ƒ</h1>[m
[32m+[m[32m          <p class="sub-title">å…¨æ–°æ­£å“ Â· è´¨é‡ä¿è¯ Â· å”®åæ— å¿§</p>[m
[32m+[m[32m          <div class="title-decoration"></div>[m
[32m+[m[32m        </div>[m
[32m+[m
[32m+[m[32m        <!-- ç­›é€‰å’Œæœç´¢åŒºåŸŸ -->[m
[32m+[m[32m        <el-card class="filter-card mb-8" :body-style="{ padding: '0' }">[m
[32m+[m[32m          <div class="filter-container">[m
[32m+[m[32m            <!-- å·¦ä¾§ï¼šç¡¬ä»¶ç­›é€‰ + å”®ä»·èŒƒå›´ + æ’åº -->[m
[32m+[m[32m            <div class="left-filters">[m
[32m+[m[32m              <el-select[m[41m [m
[32m+[m[32m                v-model="selectedCPU"[m[41m [m
[32m+[m[32m                placeholder="CPUå‹å·"[m
[32m+[m[32m                filterable[m
[32m+[m[32m                clearable[m
[32m+[m[32m                @change="handleFilterChange"[m
[32m+[m[32m                class="custom-select hardware-select"[m
[32m+[m[32m                :loading="cpuLoading"[m
[32m+[m[32m                remote[m
[32m+[m[32m                :remote-method="remoteCpuMethod"[m
[32m+[m[32m                effect="light"[m
[32m+[m[32m              >[m
[32m+[m[32m                <template #prefix><el-icon><Cpu /></el-icon></template>[m
[32m+[m[32m                <el-option[m
[32m+[m[32m                  v-for="cpu in cpuOptions"[m
[32m+[m[32m                  :key="cpu.id"[m
[32m+[m[32m                  :label="`${cpu.brand} ${cpu.model}`"[m
[32m+[m[32m                  :value="cpu.model"[m
[32m+[m[32m                >[m
[32m+[m[32m                  <div class="option-item">[m
[32m+[m[32m                    <span class="brand-tag" :class="cpu.brand.toLowerCase()">{{ cpu.brand }}</span>[m
[32m+[m[32m                    <span class="model-text">{{ cpu.model }}</span>[m
[32m+[m[32m                  </div>[m
[32m+[m[32m                </el-option>[m
[32m+[m[32m              </el-select>[m
[32m+[m
[32m+[m[32m              <el-select[m[41m [m
[32m+[m[32m                v-model="selectedGPU"[m[41m [m
[32m+[m[32m                placeholder="æ˜¾å¡å‹å·"[m
[32m+[m[32m                filterable[m
[32m+[m[32m                clearable[m
[32m+[m[32m                @change="handleFilterChange"[m
[32m+[m[32m                class="custom-select hardware-select"[m
[32m+[m[32m                :loading="gpuLoading"[m
[32m+[m[32m                remote[m
[32m+[m[32m                :remote-method="remoteGpuMethod"[m
[32m+[m[32m              >[m
[32m+[m[32m                <template #prefix><el-icon><Monitor /></el-icon></template>[m
[32m+[m[32m                <el-option[m
[32m+[m[32m                  v-for="gpu in gpuOptions"[m
[32m+[m[32m                  :key="gpu.id"[m
[32m+[m[32m                  :label="`${gpu.brand} ${gpu.model}`"[m
[32m+[m[32m                  :value="gpu.model"[m
[32m+[m[32m                >[m
[32m+[m[32m                   <div class="option-item">[m
[32m+[m[32m                    <span class="brand-tag" :class="gpu.brand.toLowerCase()">{{ gpu.brand }}</span>[m
[32m+[m[32m                    <span class="model-text">{{ gpu.model }}</span>[m
[32m+[m[32m                  </div>[m
[32m+[m[32m                </el-option>[m
[32m+[m[32m              </el-select>[m
[32m+[m
[32m+[m[32m              <el-select[m[41m [m
[32m+[m[32m                v-model="priceRange"[m[41m [m
[32m+[m[32m                placeholder="å”®ä»·èŒƒå›´"[m
[32m+[m[32m                clearable[m
[32m+[m[32m                @change="handleFilterChange"[m
[32m+[m[32m                class="custom-select price-range-select"[m
[32m+[m[32m              >[m
[32m+[m[32m                <template #prefix><el-icon><Money /></el-icon></template>[m
[32m+[m[32m                <el-option label="0-5000å…ƒ" value="0-5000"></el-option>[m
[32m+[m[32m                <el-option label="5000-10000å…ƒ" value="5000-10000"></el-option>[m
[32m+[m[32m                <el-option label="10000-20000å…ƒ" value="10000-20000"></el-option>[m
[32m+[m[32m                <el-option label="20000å…ƒä»¥ä¸Š" value="20000+"></el-option>[m
[32m+[m[32m              </el-select>[m
[32m+[m
[32m+[m[32m              <el-select[m[41m [m
[32m+[m[32m                v-model="sortType"[m[41m [m
[32m+[m[32m                placeholder="æ’åºæ–¹å¼"[m
[32m+[m[32m                @change="handleFilterChange"[m
[32m+[m[32m                class="custom-select sort-select"[m
[32m+[m[32m              >[m
[32m+[m[32m                <template #prefix><el-icon><Sort /></el-icon></template>[m
[32m+[m[32m                <el-option label="é»˜è®¤æ’åº" value="default"></el-option>[m
[32m+[m[32m                <el-option label="ä»·æ ¼ä»ä½åˆ°é«˜" value="price-low"></el-option>[m
[32m+[m[32m                <el-option label="ä»·æ ¼ä»é«˜åˆ°ä½" value="price-high"></el-option>[m
[32m+[m[32m                <el-option label="æ€§èƒ½æ’åº" value="performance"></el-option>[m
[32m+[m[32m                <el-option label="ä¼˜æƒ åŠ›åº¦" value="discount"></el-option>[m
[32m+[m[32m              </el-select>[m
[32m+[m[32m            </div>[m
[32m+[m
[32m+[m[32m            <!-- å³ä¾§ï¼šæœç´¢æ¡†å’Œæœç´¢æŒ‰é’® -->[m
[32m+[m[32m            <div class="right-search">[m
[32m+[m[32m              <div class="search-wrapper">[m
[32m+[m[32m                <el-input[m[41m [m
[32m+[m[32m                  v-model="searchQuery"[m[41m [m
[32m+[m[32m                  placeholder="æœç´¢æƒ³è´­ä¹°çš„è®¾å¤‡..."[m[41m [m
[32m+[m[32m                  class="custom-search-input"[m
[32m+[m[32m                  clearable[m
[32m+[m[32m                  @keyup.enter="handleSearch"[m
[32m+[m[32m                >[m
[32m+[m[32m                  <template #prefix>[m
[32m+[m[32m                    <el-icon class="search-icon"><Search /></el-icon>[m
[32m+[m[32m                  </template>[m
[32m+[m[32m                </el-input>[m
[32m+[m[32m                <el-button[m[41m [m
[32m+[m[32m                  type="primary"[m[41m [m
[32m+[m[32m                  class="search-button"[m
[32m+[m[32m                  @click="handleSearch"[m
[32m+[m[32m                >[m
[32m+[m[32m                  æœç´¢[m
[32m+[m[32m                </el-button>[m
[32m+[m[32m              </div>[m
[32m+[m[32m            </div>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </el-card>[m
[32m+[m
[32m+[m[32m        <!-- å•†å“ç½‘æ ¼ -->[m
[32m+[m[32m        <div v-if="loading" class="loading-container">[m
[32m+[m[32m          <el-skeleton v-for="i in 6" :key="i" animated class="skeleton-card">[m
[32m+[m[32m            <template #template>[m
[32m+[m[32m              <el-skeleton-item variant="image" style="width: 100%; height: 220px" />[m
[32m+[m[32m              <div style="padding: 14px">[m
[32m+[m[32m                <el-skeleton-item variant="h1" style="width: 50%" />[m
[32m+[m[32m                <el-skeleton-item variant="text" style="margin-top: 16px" />[m
[32m+[m[32m                <el-skeleton-item variant="text" style="width: 30%" />[m
[32m+[m[32m              </div>[m
[32m+[m[32m            </template>[m
[32m+[m[32m          </el-skeleton>[m
[32m+[m[32m        </div>[m
[32m+[m[41m        [m
[32m+[m[32m        <div v-else-if="filteredProducts.length === 0" class="empty-container">[m
[32m+[m[32m          <div class="empty-wrapper">[m
[32m+[m[32m            <el-empty description="æš‚æ— ç¬¦åˆæ¡ä»¶çš„å•†å“" :image-size="220"></el-empty>[m
[32m+[m[32m            <el-button @click="clearFilters" plain round>æ¸…ç©ºç­›é€‰æ¡ä»¶</el-button>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </div>[m
[32m+[m[41m        [m
[32m+[m[32m        <div v-else class="product-grid">[m
[32m+[m[32m          <el-card[m[41m [m
[32m+[m[32m            v-for="product in displayedProducts"[m[41m [m
[32m+[m[32m            :key="product.id"[m
[32m+[m[32m            class="product-card"[m
[32m+[m[32m            :body-style="{ padding: '0' }"[m
[32m+[m[32m          >[m
[32m+[m[32m            <div class="card-image-wrapper">[m
[32m+[m[32m              <div class="image-overlay"></div>[m
[32m+[m[32m              <el-image[m[41m [m
[32m+[m[32m                :src="product.imageUrl ? '/dev-api' + product.imageUrl : '@/assets/images/default-product.jpg'"[m[41m [m
[32m+[m[32m                alt="å•†å“å›¾ç‰‡"[m
[32m+[m[32m                class="product-image"[m
[32m+[m[32m                fit="cover"[m
[32m+[m[32m                loading="lazy"[m
[32m+[m[32m              ></el-image>[m
[32m+[m[41m              [m
[32m+[m[32m              <!-- ä»·æ ¼æ ‡ç­¾ (æ‚¬æµ®) -->[m
[32m+[m[32m              <div class="floating-price">[m
[32m+[m[32m                <span class="currency">Â¥</span>[m
[32m+[m[32m                <span class="amount">{{ product.salePrice }}</span>[m
[32m+[m[32m              </div>[m
[32m+[m
[32m+[m[32m              <div[m[41m [m
[32m+[m[32m                v-if="product.originalSalePrice && product.originalSalePrice > product.salePrice"[m
[32m+[m[32m                class="discount-tag"[m
[32m+[m[32m              >[m
[32m+[m[32m                ç‰¹æƒ [m
[32m+[m[32m              </div>[m
[32m+[m[32m            </div>[m
[32m+[m[41m            [m
[32m+[m[32m            <div class="product-body">[m
[32m+[m[32m              <div class="title-section">[m
[32m+[m[32m                <h3 class="product-name" :title="product.productName">{{ product.productName }}</h3>[m
[32m+[m[32m                <div class="stock-badge" :class="{ 'low-stock': product.availableSale < 3 }">[m
[32m+[m[32m                  {{ product.availableSale > 0 ? `ä½™ ${product.availableSale}` : 'ç¼ºè´§' }}[m
[32m+[m[32m                </div>[m
[32m+[m[32m              </div>[m
[32m+[m
[32m+[m[32m              <!-- æ€§èƒ½æ¡ -->[m
[32m+[m[32m              <div class="performance-section">[m
[32m+[m[32m                <div class="perf-label">[m
[32m+[m[32m                  <el-icon color="#6366f1"><Odometer /></el-icon>[m
[32m+[m[32m                  <span>ç»¼åˆæ€§èƒ½è¯„åˆ†</span>[m
[32m+[m[32m                </div>[m
[32m+[m[32m                <div class="perf-content">[m
[32m+[m[32m                  <el-progress[m[41m [m
[32m+[m[32m                    :percentage="product.performanceScore.percentage"[m[41m [m
[32m+[m[32m                    :stroke-width="8"[m
[32m+[m[32m                    class="performance-bar"[m
[32m+[m[32m                    :color="getPerformanceColor(product.performanceScore.percentage)"[m
[32m+[m[32m                    :format="(p) => product.performanceScore.score"[m
[32m+[m[32m                  ></el-progress>[m
[32m+[m[32m                </div>[m
[32m+[m[32m              </div>[m
[32m+[m[41m              [m
[32m+[m[32m             <!-- å‚æ•°æ ‡ç­¾åŒ–å±•ç¤º -->[m
[32m+[m[32m              <div class="specs-chips">[m
[32m+[m[32m                <div class="spec-chip" title="å¤„ç†å™¨">[m
[32m+[m[32m                  <el-icon><Cpu /></el-icon>[m
[32m+[m[32m                  <span>{{ product.cpu }}</span>[m
[32m+[m[32m                </div>[m
[32m+[m[32m                <div class="spec-chip" title="æ˜¾å¡">[m
[32m+[m[32m                  <el-icon><Monitor /></el-icon>[m
[32m+[m[32m                  <span>{{ product.graphicsCard }}</span>[m
[32m+[m[32m                </div>[m
[32m+[m[32m                <!-- åˆå¹¶å†…å­˜å’Œç¡¬ç›˜åˆ°åŒä¸€è¡Œ -->[m
[32m+[m[32m                <div class="spec-chip memory-storage-chip" title="å†…å­˜/å­˜å‚¨">[m
[32m+[m[32m                  <span>{{ formatMemoryStorage(product) }}</span>[m
[32m+[m[32m                </div>[m
[32m+[m[32m              </div>[m
[32m+[m[41m              [m
[32m+[m[32m              <div[m[41m [m
[32m+[m[32m                v-if="product.originalSalePrice && product.originalSalePrice > product.salePrice"[m
[32m+[m[32m                class="original-price-tag"[m
[32m+[m[32m              >[m
[32m+[m[32m                åŸä»·: Â¥{{ product.originalSalePrice }}[m
[32m+[m[32m              </div>[m
[32m+[m[41m              [m
[32m+[m[32m              <div class="card-divider"></div>[m
[32m+[m[41m              [m
[32m+[m[32m              <div class="action-buttons">[m
[32m+[m[32m                <el-button[m[41m [m
[32m+[m[32m                  class="action-btn detail-btn"[m
[32m+[m[32m                  icon="View"[m
[32m+[m[32m                  @click="viewDetails(product.id)"[m
[32m+[m[32m                  circle[m
[32m+[m[32m                  plain[m
[32m+[m[32m                ></el-button>[m
[32m+[m[32m                <el-button[m[41m [m
[32m+[m[32m                  class="action-btn rent-btn"[m
[32m+[m[32m                  icon="ShoppingCart"[m
[32m+[m[32m                  @click="addToCart(product, 'sale')"[m
[32m+[m[32m                  :disabled="!product.availableSale"[m
[32m+[m[32m                >[m
[32m+[m[32m                  {{ product.availableSale ? 'ç«‹å³è´­ä¹°' : 'æš‚æ—¶ç¼ºè´§' }}[m
[32m+[m[32m                </el-button>[m
[32m+[m[32m              </div>[m
[32m+[m[32m            </div>[m
[32m+[m[32m          </el-card>[m
[32m+[m[32m        </div>[m
[32m+[m
[32m+[m[32m        <!-- åŠ è½½æ›´å¤šæŒ‰é’® -->[m
[32m+[m[32m        <div v-if="hasMoreProducts" class="pagination-wrapper">[m
[32m+[m[32m          <el-button[m[41m [m
[32m+[m[32m            class="load-more-btn"[m
[32m+[m[32m            @click="loadMore"[m
[32m+[m[32m            :loading="loading"[m
[32m+[m[32m          >[m
[32m+[m[32m            æ¢ç´¢æ›´å¤šè®¾å¤‡[m
[32m+[m[32m            <el-icon class="el-icon--right"><ArrowDown /></el-icon>[m
[32m+[m[32m          </el-button>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </el-main>[m
[32m+[m[41m      [m
[32m+[m[32m      <!-- é¡µè„š -->[m
[32m+[m[32m      <el-footer class="footer-content">[m
[32m+[m[32m        <div class="footer-inner">[m
[32m+[m[32m          <p>Â© 2024 ç”µè„‘é”€å”®æ™ºèƒ½å¹³å°</p>[m
[32m+[m[32m          <span class="divider">|</span>[m
[32m+[m[32m          <p>æ­£å“ä¿éšœ Â· ä¸“ä¸šå”®å Â· æ— å¿§é€€æ¢</p>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </el-footer>[m
[32m+[m[32m    </el-container>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { ref, onMounted, computed } from 'vue';[m
[32m+[m[32mimport { useRouter } from 'vue-router';[m
[32m+[m[32mimport { ElMessage } from 'element-plus';[m
[32m+[m[32mimport { listFrontProduct } from "@/api/front/product";[m
[32m+[m[32mimport { listFrontCpu, listFrontGpu } from "@/api/front/hardware";[m
[32m+[m[32mimport {[m
[32m+[m[32m  Box, ShoppingCart, View, Search, Cpu, Monitor,[m
[32m+[m[32m  Money, Sort, Odometer, ArrowDown[m
[32m+[m[32m} from '@element-plus/icons-vue';[m
[32m+[m[32mimport Header from '../Header.vue';[m
[32m+[m[32mimport { addToCart as addToCartAPI } from '@/api/shop/cart';[m
[32m+[m
[32m+[m[32mconst router = useRouter();[m
[32m+[m
[32m+[m[32m// çŠ¶æ€ç®¡ç† - é‡‡ç”¨ç§Ÿèµé¡µé¢çš„åˆ†é¡µé€»è¾‘[m
[32m+[m[32mconst products = ref([]);[m
[32m+[m[32mconst filteredProducts = ref([]);[m
[32m+[m[32mconst displayedProducts = ref([]);[m
[32m+[m[32mconst loading = ref(true);[m
[32m+[m[32mconst currentPage = ref(0);[m
[32m+[m[32mconst productsPerPage = ref(12); // æ¯é¡µæ˜¾ç¤º12ä¸ªå•†å“ï¼ˆä¸ç§Ÿèµé¡µé¢ä¸€è‡´ï¼‰[m
[32m+[m[32mconst searchQuery = ref('');[m
[32m+[m[32mconst sortType = ref('default');[m
[32m+[m
[32m+[m[32m// ç¡¬ä»¶ç­›é€‰çŠ¶æ€[m
[32m+[m[32mconst cpuOptions = ref([]);[m
[32m+[m[32mconst gpuOptions = ref([]);[m
[32m+[m[32mconst selectedCPU = ref('');[m
[32m+[m[32mconst selectedGPU = ref('');[m
[32m+[m[32mconst cpuLoading = ref(false);[m
[32m+[m[32mconst gpuLoading = ref(false);[m
[32m+[m
[32m+[m[32m// é”€å”®ç­›é€‰çŠ¶æ€[m
[32m+[m[32mconst priceRange = ref('');[m
[32m+[m
[32m+[m[32m// è®¡ç®—å±æ€§ - ä¸ç§Ÿèµé¡µé¢é€»è¾‘ä¸€è‡´[m
[32m+[m[32mconst hasMoreProducts = computed(() => {[m
[32m+[m[32m  return displayedProducts.value.length < filteredProducts.value.length;[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m// æ€§èƒ½é¢œè‰²æ˜ å°„[m
[32m+[m[32mconst getPerformanceColor = (percentage) => {[m
[32m+[m[32m  if (percentage >= 85) return '#8b5cf6'; // ç´«è‰²[m
[32m+[m[32m  if (percentage >= 70) return '#3b82f6'; // è“è‰²[m
[32m+[m[32m  if (percentage >= 50) return '#10b981'; // ç»¿è‰²[m
[32m+[m[32m  return '#f59e0b'; // æ©™è‰²[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// æ¸…ç©ºç­›é€‰[m
[32m+[m[32mconst clearFilters = () => {[m
[32m+[m[32m  selectedCPU.value = '';[m
[32m+[m[32m  selectedGPU.value = '';[m
[32m+[m[32m  priceRange.value = '';[m
[32m+[m[32m  searchQuery.value = '';[m
[32m+[m[32m  sortType.value = 'default';[m
[32m+[m[32m  filterAndSortProducts();[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// æ ¼å¼åŒ–å†…å­˜å­˜å‚¨å±•ç¤º[m
[32m+[m[32mconst formatMemoryStorage = (product) => {[m
[32m+[m[32m  let memoryText = "";[m
[32m+[m[32m  if (product.memory) {[m
[32m+[m[32m    const memoryParts = product.memory.split(/\s+/);[m
[32m+[m[32m    const brand = memoryParts[0];[m
[32m+[m[32m    const capacity = memoryParts.find(part => part.includes("GB")) || "";[m
[32m+[m[32m    memoryText = `${brand}${capacity}`;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  let storageText = "";[m
[32m+[m[32m  if (product.ssd) {[m
[32m+[m[32m    const storageParts = product.ssd.split(/\s+/);[m
[32m+[m[32m    const brand = storageParts[0];[m
[32m+[m[32m    const capacity = storageParts.find(part => part.includes("TB") || part.includes("GB")) || "";[m
[32m+[m[32m    storageText = `${brand}${capacity}`;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  return `${memoryText} ${storageText}`;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// è®¡ç®—æ€§èƒ½è¯„åˆ†[m
[32m+[m[32mconst calculateScore = (product) => {[m
[32m+[m[32m  let cpuBaseScore = 0;[m
[32m+[m[32m  let memoryScore = 0;[m
[32m+[m[32m  const gpuScore = product.gpuScore || 0;[m
[32m+[m
[32m+[m[32m  if (product.cpuBrand === 'AMD') {[m
[32m+[m[32m    cpuBaseScore = Math.round((product.cpuMultiCoreScore * 0.5) + product.cpuSingleCoreScore);[m
[32m+[m[32m  } else if (product.cpuBrand === 'Intel') {[m
[32m+[m[32m    cpuBaseScore = Math.round((product.cpuMultiCoreScore * 0.3) + product.cpuSingleCoreScore);[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  if (product.memoryType === 'DDR4') {[m
[32m+[m[32m    memoryScore = product.memoryFrequency * 2;[m
[32m+[m[32m  } else if (product.memoryType === 'DDR5') {[m
[32m+[m[32m    memoryScore = product.memoryFrequency;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  const totalScore = cpuBaseScore + memoryScore + gpuScore;[m
[32m+[m[32m  const maxScore = 32387;[m
[32m+[m[32m  const percentage = Math.min(100, Math.round((totalScore / maxScore) * 100));[m
[32m+[m
[32m+[m[32m  return {[m
[32m+[m[32m    score: totalScore,[m
[32m+[m[32m    percentage[m
[32m+[m[32m  };[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// è·å–å•†å“æ•°æ®[m
[32m+[m[32mconst getProductData = async () => {[m
[32m+[m[32m  try {[m
[32m+[m[32m    loading.value = true;[m
[32m+[m[32m    const response = await listFrontProduct({[m
[32m+[m[32m      minId: 4,[m
[32m+[m[32m      hasSale: true,[m
[32m+[m[32m      pageSize: 1000  // è¯·æ±‚1000æ¡æ•°æ®ï¼Œç¡®ä¿æ‹¿å›æ‰€æœ‰å•†å“[m
[32m+[m[32m    });[m
[32m+[m[41m    [m
[32m+[m[32m    if (response.rows && response.rows.length > 0) {[m
[32m+[m[32m      const validProducts = response.rows.filter(product => product.id >= 4);[m
[32m+[m[32m      products.value = validProducts.map(product => ({[m
[32m+[m[32m        ...product,[m
[32m+[m[32m        availableSale: product.stockQuantity || 0,[m
[32m+[m[32m        performanceScore: calculateScore(product)[m
[32m+[m[32m      }));[m
[32m+[m[32m      filterAndSortProducts(); // åˆå§‹åŒ–æ—¶æ‰§è¡Œç­›é€‰æ’åº[m
[32m+[m[32m    } else {[m
[32m+[m[32m      products.value = [];[m
[32m+[m[32m      filteredProducts.value = [];[m
[32m+[m[32m    }[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    console.error('è·å–å•†å“æ•°æ®å¤±è´¥:', error);[m
[32m+[m[32m    ElMessage.error('æ•°æ®åŠ è½½å¼‚å¸¸ï¼Œè¯·ç¨åé‡è¯•');[m
[32m+[m[32m  } finally {[m
[32m+[m[32m    loading.value = false;[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// è·å–ç¡¬ä»¶æ•°æ®[m
[32m+[m[32mconst getHardwareData = async () => {[m
[32m+[m[32m  try {[m
[32m+[m[32m    cpuLoading.value = true;[m
[32m+[m[32m    gpuLoading.value = true;[m
[32m+[m[32m    const [cpuRes, gpuRes] = await Promise.all([[m
[32m+[m[32m      listFrontCpu({ pageSize: 100 }),[m
[32m+[m[32m      listFrontGpu({ pageSize: 100 })[m
[32m+[m[32m    ]);[m
[32m+[m[32m    cpuOptions.value = cpuRes.rows || [];[m
[32m+[m[32m    gpuOptions.value = gpuRes.rows || [];[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    console.error('ç¡¬ä»¶æ•°æ®å¤±è´¥:', error);[m
[32m+[m[32m  } finally {[m
[32m+[m[32m    cpuLoading.value = false;[m
[32m+[m[32m    gpuLoading.value = false;[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// CPUè¿œç¨‹æœç´¢[m
[32m+[m[32mconst remoteCpuMethod = async (query) => {[m
[32m+[m[32m  if (!query) { await getHardwareData(); return; }[m
[32m+[m[32m  cpuLoading.value = true;[m
[32m+[m[32m  try {[m
[32m+[m[32m    const response = await listFrontCpu({ model: query });[m
[32m+[m[32m    cpuOptions.value = response.rows;[m
[32m+[m[32m  } finally { cpuLoading.value = false; }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// GPUè¿œç¨‹æœç´¢[m
[32m+[m[32mconst remoteGpuMethod = async (query) => {[m
[32m+[m[32m  if (!query) { await getHardwareData(); return; }[m
[32m+[m[32m  gpuLoading.value = true;[m
[32m+[m[32m  try {[m
[32m+[m[32m    const response = await listFrontGpu({ model: query });[m
[32m+[m[32m    gpuOptions.value = response.rows;[m
[32m+[m[32m  } finally { gpuLoading.value = false; }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// ç­›é€‰å’Œæ’åºå•†å“ - é‡‡ç”¨ç§Ÿèµé¡µé¢çš„åˆ†é¡µåˆå§‹åŒ–é€»è¾‘[m
[32m+[m[32mconst filterAndSortProducts = () => {[m
[32m+[m[32m  // åŸºç¡€ç­›é€‰ï¼šåªæ˜¾ç¤ºé”€å”®å•†å“[m
[32m+[m[32m  let result = [...products.value].filter(product => {[m
[32m+[m[32m    const type = String(product.productType || '').trim();[m
[32m+[m[32m    return type === '2' || type === '3';[m
[32m+[m[32m  });[m
[32m+[m[41m  [m
[32m+[m[32m  // CPUç­›é€‰[m
[32m+[m[32m  if (selectedCPU.value) {[m
[32m+[m[32m    result = result.filter(p => p.cpu?.toLowerCase().includes(selectedCPU.value.toLowerCase()));[m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  // GPUç­›é€‰[m
[32m+[m[32m  if (selectedGPU.value) {[m
[32m+[m[32m    result = result.filter(p => p.graphicsCard?.toLowerCase().includes(selectedGPU.value.toLowerCase()));[m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  // ä»·æ ¼èŒƒå›´ç­›é€‰[m
[32m+[m[32m  if (priceRange.value) {[m
[32m+[m[32m    if (priceRange.value === '20000+') {[m
[32m+[m[32m      result = result.filter(p => (p.salePrice || 0) >= 20000);[m
[32m+[m[32m    } else {[m
[32m+[m[32m      const [min, max] = priceRange.value.split('-').map(Number);[m
[32m+[m[32m      result = result.filter(p => (p.salePrice || 0) >= min && (p.salePrice || 0) < max);[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  // æœç´¢ç­›é€‰[m
[32m+[m[32m  if (searchQuery.value) {[m
[32m+[m[32m    const query = searchQuery.value.toLowerCase();[m
[32m+[m[32m    result = result.filter(p =>[m[41m [m
[32m+[m[32m      p.productName.toLowerCase().includes(query) ||[m
[32m+[m[32m      p.cpu.toLowerCase().includes(query) ||[m
[32m+[m[32m      p.graphicsCard.toLowerCase().includes(query) ||[m
[32m+[m[32m      (p.features && p.features.some(f => f.toLowerCase().includes(query)))[m
[32m+[m[32m    );[m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  // æ’åº[m
[32m+[m[32m  switch (sortType.value) {[m
[32m+[m[32m    case 'price-low':[m[41m [m
[32m+[m[32m      result.sort((a, b) => (a.salePrice || 0) - (b.salePrice || 0));[m[41m [m
[32m+[m[32m      break;[m
[32m+[m[32m    case 'price-high':[m[41m [m
[32m+[m[32m      result.sort((a, b) => (b.salePrice || 0) - (a.salePrice || 0));[m[41m [m
[32m+[m[32m      break;[m
[32m+[m[32m    case 'performance':[m[41m [m
[32m+[m[32m      result.sort((a, b) => b.performanceScore.percentage - a.performanceScore.percentage);[m[41m [m
[32m+[m[32m      break;[m
[32m+[m[32m    case 'discount':[m
[32m+[m[32m      result.sort((a, b) => {[m
[32m+[m[32m        const discountA = a.originalSalePrice ? (a.originalSalePrice - a.salePrice) / a.originalSalePrice : 0;[m
[32m+[m[32m        const discountB = b.originalSalePrice ? (b.originalSalePrice - b.salePrice) / b.originalSalePrice : 0;[m
[32m+[m[32m        return discountB - discountA;[m
[32m+[m[32m      });[m
[32m+[m[32m      break;[m
[32m+[m[32m    default:[m[41m [m
[32m+[m[32m      result.sort((a, b) => a.id - b.id);[m[41m [m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  filteredProducts.value = result;[m
[32m+[m[32m  currentPage.value = 0; // é‡ç½®é¡µç ï¼ˆä¸ç§Ÿèµé¡µé¢ä¸€è‡´ï¼‰[m
[32m+[m[32m  displayedProducts.value = filteredProducts.value.slice(0, productsPerPage.value); // åˆå§‹åŒ–æ˜¾ç¤ºç¬¬ä¸€é¡µ[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// åŠ è½½æ›´å¤š - ä¸ç§Ÿèµé¡µé¢é€»è¾‘å®Œå…¨ä¸€è‡´[m
[32m+[m[32mconst loadMore = () => {[m
[32m+[m[32m  currentPage.value++;[m
[32m+[m[32m  const startIndex = currentPage.value * productsPerPage.value;[m
[32m+[m[32m  const endIndex = startIndex + productsPerPage.value;[m
[32m+[m[32m  displayedProducts.value = [...displayedProducts.value, ...filteredProducts.value.slice(startIndex, endIndex)];[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mconst handleFilterChange = () => filterAndSortProducts();[m
[32m+[m[32mconst handleSearch = () => filterAndSortProducts();[m
[32m+[m
[32m+[m[32mconst viewDetails = (productId) => {[m
[32m+[m[32m  router.push(`/computer-market/product-detail/${productId}?type=sale`);[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mconst addToCart = async (product, type) => {[m
[32m+[m[32m  try {[m
[32m+[m[32m    if (!product.salePrice || product.salePrice === 0) {[m
[32m+[m[32m      ElMessage.warning('è¯¥å•†å“æš‚æ—¶ä¸èƒ½è´­ä¹°');[m
[32m+[m[32m      return;[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    const cartData = {[m
[32m+[m[32m      productId: product.id,[m
[32m+[m[32m      productName: product.productName,[m
[32m+[m[32m      productImg: product.imageUrl,[m
[32m+[m[32m      price: product.salePrice,[m
[32m+[m[32m      businessType: '2', // 2=è´­ä¹°[m
[32m+[m[32m      quantity: 1[m
[32m+[m[32m    };[m
[32m+[m[41m    [m
[32m+[m[32m    await addToCartAPI(cartData);[m
[32m+[m[32m    ElMessage.success('å·²åŠ å…¥è´­ç‰©è½¦');[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    console.error('åŠ å…¥è´­ç‰©è½¦å¤±è´¥:', error);[m
[32m+[m[32m    ElMessage.error('æ“ä½œå¤±è´¥');[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32monMounted(() => {[m
[32m+[m[32m  getProductData();[m
[32m+[m[32m  getHardwareData();[m
[32m+[m[32m});[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style scoped>[m
[32m+[m[32m/* å¼•å…¥å­—ä½“ */[m
[32m+[m[32m@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');[m
[32m+[m
[32m+[m[32m.common-layout {[m
[32m+[m[32m  min-height: 100vh;[m
[32m+[m[32m  background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);[m
[32m+[m[32m  font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.app-container {[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.main-content {[m
[32m+[m[32m  padding: 40px 24px;[m
[32m+[m[32m  margin-top: 60px;[m
[32m+[m[32m  max-width: 1360px;[m
[32m+[m[32m  margin-left: auto;[m
[32m+[m[32m  margin-right: auto;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* --- é¡µé¢å¤´éƒ¨ --- */[m
[32m+[m[32m.page-header {[m
[32m+[m[32m  margin-bottom: 48px;[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.main-title {[m
[32m+[m[32m  font-size: 36px;[m
[32m+[m[32m  color: #1e293b;[m
[32m+[m[32m  font-weight: 800;[m
[32m+[m[32m  margin-bottom: 12px;[m
[32m+[m[32m  letter-spacing: -0.5px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.sub-title {[m
[32m+[m[32m  color: #64748b;[m
[32m+[m[32m  font-size: 16px;[m
[32m+[m[32m  font-weight: 400;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.title-decoration {[m
[32m+[m[32m  width: 60px;[m
[32m+[m[32m  height: 4px;[m
[32m+[m[32m  background: #3b82f6;[m
[32m+[m[32m  margin: 20px auto 0;[m
[32m+[m[32m  border-radius: 2px;[m
[32m+[m[32m  opacity: 0.8;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* --- ç­›é€‰åŒºåŸŸ --- */[m
[32m+[m[32m.filter-card {[m
[32m+[m[32m  background: rgba(255, 255, 255, 0.9);[m
[32m+[m[32m  backdrop-filter: blur(12px);[m
[32m+[m[32m  border: 1px solid #fff;[m
[32m+[m[32m  border-radius: 16px;[m
[32m+[m[32m  box-shadow: 0 4px 20px rgba(148, 163, 184, 0.1);[m
[32m+[m[32m  margin-bottom: 40px;[m
[32m+[m[32m  overflow: visible;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.filter-container {[m
[32m+[m[32m  padding: 20px 24px;[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  justify-content: space-between;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  gap: 20px;[m
[32m+[m[32m  flex-wrap: wrap;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.left-filters {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  gap: 12px;[m
[32m+[m[32m  flex-wrap: wrap;[m
[32m+[m[32m  flex: 1;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.custom-select {[m
[32m+[m[32m  width: 160px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.hardware-select {[m
[32m+[m[32m  width: 180px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* æ·±åº¦å®šåˆ¶Element Plusè¾“å…¥æ¡†æ ·å¼ */[m
[32m+[m[32m.custom-select :deep(.el-input__wrapper),[m
[32m+[m[32m.custom-search-input :deep(.el-input__wrapper) {[m
[32m+[m[32m  background-color: #f8fafc;[m
[32m+[m[32m  border: 1px solid transparent;[m
[32m+[m[32m  box-shadow: none;[m
[32m+[m[32m  border-radius: 8px;[m
[32m+[m[32m  padding: 4px 12px;[m
[32m+[m[32m  transition: all 0.3s ease;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.custom-select :deep(.el-input__wrapper):hover,[m
[32m+[m[32m.custom-search-input :deep(.el-input__wrapper):hover {[m
[32m+[m[32m  background-color: #f1f5f9;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.custom-select :deep(.el-input__wrapper.is-focus),[m
[32m+[m[32m.custom-search-input :deep(.el-input__wrapper.is-focus) {[m
[32m+[m[32m  background-color: #fff;[m
[32m+[m[32m  box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2);[m
[32m+[m[32m  border-color: #3b82f6;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* ä¸‹æ‹‰é€‰é¡¹ç¾åŒ– */[m
[32m+[m[32m.option-item {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  gap: 8px;[m
[32m+[m[32m}[m
[32m+[m[32m.brand-tag {[m
[32m+[m[32m  font-size: 10px;[m
[32m+[m[32m  padding: 2px 6px;[m
[32m+[m[32m  border-radius: 4px;[m
[32m+[m[32m  color: #fff;[m
[32m+[m[32m  font-weight: bold;[m
[32m+[m[32m}[m
[32m+[m[32m.brand-tag.intel { background: #0068b5; }[m
[32m+[m[32m.brand-tag.amd { background: #ed1c24; }[m
[32m+[m[32m.brand-tag.nvidia { background: #76b900; }[m
[32m+[m[32m.model-text { color: #334155; }[m
[32m+[m
[32m+[m[32m/* å³ä¾§æœç´¢ */[m
[32m+[m[32m.right-search {[m
[32m+[m[32m  width: 320px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.search-wrapper {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  gap: 10px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.custom-search-input {[m
[32m+[m[32m  flex: 1;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.search-button {[m
[32m+[m[32m  border-radius: 8px;[m
[32m+[m[32m  padding: 0 20px;[m
[32m+[m[32m  background-color: #3b82f6;[m
[32m+[m[32m  border: none;[m
[32m+[m[32m  font-weight: 500;[m
[32m+[m[32m  transition: all 0.3s;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.search-button:hover {[m
[32m+[m[32m  background-color: #2563eb;[m
[32m+[m[32m  transform: translateY(-1px);[m
[32m+[m[32m  box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* --- å•†å“ç½‘æ ¼ --- */[m
[32m+[m[32m.product-grid {[m
[32m+[m[32m  display: grid;[m
[32m+[m[32m  grid-template-columns: repeat(4, 1fr);[m
[32m+[m[32m  gap: 32px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* --- å•†å“å¡ç‰‡ --- */[m
[32m+[m[32m.product-card {[m
[32m+[m[32m  border: none;[m
[32m+[m[32m  border-radius: 20px;[m
[32m+[m[32m  background: #fff;[m
[32m+[m[32m  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m  overflow: hidden;[m
[32m+[m[32m  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.03);[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  flex-direction: column;[m
[32m+[m[32m  height: 100%;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.product-card:hover {[m
[32m+[m[32m  transform: translateY(-8px);[m
[32m+[m[32m  box-shadow: 0 20px 40px -10px rgba(0, 0, 0, 0.1);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.card-image-wrapper {[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m  height: 220px;[m
[32m+[m[32m  overflow: hidden;[m
[32m+[m[32m  background: #f8fafc;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.product-image {[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m  height: 100%;[m
[32m+[m[32m  transition: transform 0.6s ease;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.product-card:hover .product-image {[m
[32m+[m[32m  transform: scale(1.08);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* æ‚¬æµ®ä»·æ ¼æ ‡ç­¾ */[m
[32m+[m[32m.floating-price {[m
[32m+[m[32m  position: absolute;[m
[32m+[m[32m  bottom: 16px;[m
[32m+[m[32m  right: 16px;[m
[32m+[m[32m  background: rgba(255, 255, 255, 0.95);[m
[32m+[m[32m  backdrop-filter: blur(8px);[m
[32m+[m[32m  padding: 6px 16px;[m
[32m+[m[32m  border-radius: 30px;[m
[32m+[m[32m  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: baseline;[m
[32m+[m[32m  z-index: 2;[m
[32m+[m[32m  color: #0f172a;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.currency { font-size: 14px; font-weight: 600; margin-right: 2px; }[m
[32m+[m[32m.amount { font-size: 22px; font-weight: 800; color: #2563eb; letter-spacing: -0.5px; }[m
[32m+[m[32m.unit { font-size: 12px; color: #64748b; margin-left: 2px; }[m
[32m+[m
[32m+[m[32m.discount-tag {[m
[32m+[m[32m  position: absolute;[m
[32m+[m[32m  top: 16px;[m
[32m+[m[32m  left: 16px;[m
[32m+[m[32m  background: #ef4444;[m
[32m+[m[32m  color: white;[m
[32m+[m[32m  font-size: 12px;[m
[32m+[m[32m  font-weight: 700;[m
[32m+[m[32m  padding: 4px 10px;[m
[32m+[m[32m  border-radius: 6px;[m
[32m+[m[32m  box-shadow: 0 2px 8px rgba(239, 68, 68, 0.4);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* å•†å“ä¸»ä½“å†…å®¹ */[m
[32m+[m[32m.product-body {[m
[32m+[m[32m  padding: 24px;[m
[32m+[m[32m  flex: 1;[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  flex-direction: column;[m
[32m+[m[32m  min-height: 0;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.title-section {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  justify-content: space-between;[m
[32m+[m[32m  align-items: flex-start;[m
[32m+[m[32m  margin-bottom: 16px;[m
[32m+[m[32m  gap: 10px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.product-name {[m
[32m+[m[32m  font-size: 18px;[m
[32m+[m[32m  font-weight: 700;[m
[32m+[m[32m  color: #1e293b;[m
[32m+[m[32m  line-height: 1.4;[m
[32m+[m[32m  margin: 0;[m
[32m+[m[32m  display: -webkit-box;[m
[32m+[m[32m  -webkit-line-clamp: 2;[m
[32m+[m[32m  -webkit-box-orient: vertical;[m
[32m+[m[32m  overflow: hidden;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.stock-badge {[m
[32m+[m[32m  font-size: 12px;[m
[32m+[m[32m  background: #ecfdf5;[m
[32m+[m[32m  color: #059669;[m
[32m+[m[32m  padding: 2px 8px;[m
[32m+[m[32m  border-radius: 4px;[m
[32m+[m[32m  white-space: nowrap;[m
[32m+[m[32m  font-weight: 600;[m
[32m+[m[32m}[m
[32m+[m[32m.stock-badge.low-stock {[m
[32m+[m[32m  background: #fef2f2;[m
[32m+[m[32m  color: #dc2626;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* æ€§èƒ½éƒ¨åˆ† */[m
[32m+[m[32m.performance-section {[m
[32m+[m[32m  margin-bottom: 20px;[m
[32m+[m[32m  flex-shrink: 0;[m
[32m+[m[32m}[m
[32m+[m[32m.perf-label {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  gap: 6px;[m
[32m+[m[32m  font-size: 12px;[m
[32m+[m[32m  color: #64748b;[m
[32m+[m[32m  margin-bottom: 6px;[m
[32m+[m[32m}[m
[32m+[m[32m.performance-bar :deep(.el-progress-bar__outer) {[m
[32m+[m[32m  background-color: #f1f5f9;[m
[32m+[m[32m  border-radius: 10px;[m
[32m+[m[32m}[m
[32m+[m[32m.performance-bar :deep(.el-progress-bar__inner) {[m
[32m+[m[32m  border-radius: 10px;[m
[32m+[m[32m  transition: width 1s ease;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* è§„æ ¼Chips */[m
[32m+[m[32m.specs-chips {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  flex-wrap: wrap;[m
[32m+[m[32m  gap: 8px;[m
[32m+[m[32m  margin-bottom: 16px;[m
[32m+[m[32m  flex-shrink: 0;[m
[32m+[m[32m  min-height: 72px;[m
[32m+[m[32m  align-content: flex-start;[m
[32m+[m[32m  justify-content: flex-start;[m
[32m+[m[32m}[m
[32m+[m[32m.spec-chip {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  gap: 6px;[m
[32m+[m[32m  background: #f8fafc;[m
[32m+[m[32m  border: 1px solid #e2e8f0;[m
[32m+[m[32m  padding: 6px 10px;[m
[32m+[m[32m  border-radius: 8px;[m
[32m+[m[32m  font-size: 12px;[m
[32m+[m[32m  color: #475569;[m
[32m+[m[32m  transition: all 0.2s;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.spec-chip:hover {[m
[32m+[m[32m  background: #fff;[m
[32m+[m[32m  border-color: #cbd5e1;[m
[32m+[m[32m  transform: translateY(-1px);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.spec-chip .el-icon {[m
[32m+[m[32m  color: #94a3b8;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* åŸä»·æ ‡ç­¾ */[m
[32m+[m[32m.original-price-tag {[m
[32m+[m[32m  font-size: 12px;[m
[32m+[m[32m  color: #94a3b8;[m
[32m+[m[32m  text-decoration: line-through;[m
[32m+[m[32m  margin-bottom: 16px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.card-divider {[m
[32m+[m[32m  height: 1px;[m
[32m+[m[32m  background: #f1f5f9;[m
[32m+[m[32m  margin: 0 -24px 20px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* æ“ä½œæŒ‰é’®ç»„ */[m
[32m+[m[32m.action-buttons {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  gap: 12px;[m
[32m+[m[32m  margin-top: auto;[m
[32m+[m[32m  padding-top: 16px;[m
[32m+[m[32m  flex-shrink: 0;[m
[32m+[m[32m}[m
[32m+[m[32m.action-btn {[m
[32m+[m[32m  height: 44px;[m
[32m+[m[32m  border-radius: 10px;[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m  font-weight: 600;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.detail-btn {[m
[32m+[m[32m  width: 44px;[m
[32m+[m[32m  padding: 0;[m
[32m+[m[32m  border-color: #e2e8f0;[m
[32m+[m[32m  color: #64748b;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.detail-btn:hover {[m
[32m+[m[32m  background-color: #f8fafc;[m
[32m+[m[32m  color: #3b82f6;[m
[32m+[m[32m  border-color: #bfdbfe;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.rent-btn {[m
[32m+[m[32m  flex: 1;[m
[32m+[m[32m  background: #1e293b;[m
[32m+[m[32m  border: none;[m
[32m+[m[32m  color: #fff;[m
[32m+[m[32m  box-shadow: 0 4px 12px rgba(30, 41, 59, 0.2);[m
[32m+[m[32m  transition: all 0.3s;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.rent-btn:hover {[m
[32m+[m[32m  background: #334155;[m
[32m+[m[32m  box-shadow: 0 6px 16px rgba(30, 41, 59, 0.3);[m
[32m+[m[32m  transform: translateY(-1px);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.rent-btn.is-disabled {[m
[32m+[m[32m  background: #e2e8f0;[m
[32m+[m[32m  color: #94a3b8;[m
[32m+[m[32m  box-shadow: none;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* --- åˆ†é¡µç›¸å…³æ ·å¼ - ä¸ç§Ÿèµé¡µé¢ä¿æŒä¸€è‡´ --- */[m
[32m+[m[32m.pagination-wrapper {[m
[32m+[m[32m  text-align: center;[m
[32m+[m[32m  margin-top: 60px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.load-more-btn {[m
[32m+[m[32m  background: white;[m
[32m+[m[32m  border: 1px solid #e2e8f0;[m
[32m+[m[32m  color: #475569;[m
[32m+[m[32m  padding: 12px 32px;[m
[32m+[m[32m  height: auto;[m
[32m+[m[32m  border-radius: 30px;[m
[32m+[m[32m  font-size: 15px;[m
[32m+[m[32m  transition: all 0.3s;[m
[32m+[m[32m  box-shadow: 0 2px 8px rgba(0,0,0,0.05);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.load-more-btn:hover {[m
[32m+[m[32m  color: #3b82f6;[m
[32m+[m[32m  border-color: #3b82f6;[m
[32m+[m[32m  background: #eff6ff;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.empty-container {[m
[32m+[m[32m  padding: 60px 0;[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  justify-content: center;[m
[32m+[m[32m}[m
[32m+[m[32m.empty-wrapper {[m
[32m+[m[32m  text-align: center;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.footer-content {[m
[32m+[m[32m  margin-top: 80px;[m
[32m+[m[32m  border-top: 1px solid #e2e8f0;[m
[32m+[m[32m  background: #fff;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.footer-inner {[m
[32m+[m[32m  max-width: 1200px;[m
[32m+[m[32m  margin: 0 auto;[m
[32m+[m[32m  height: 100%;[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  justify-content: center;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  color: #94a3b8;[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.divider { margin: 0 16px; color: #e2e8f0; }[m
[32m+[m
[32m+[m[32m/* å†…å­˜ç¡¬ç›˜åˆå¹¶æ ‡ç­¾æ ·å¼ */[m
[32m+[m[32m.memory-storage-chip {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  gap: 12px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.memory-storage-chip span {[m
[32m+[m[32m  white-space: nowrap;[m
[32m+[m[32m  font-size: 12px;[m
[32m+[m[32m  color: #334155;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* å“åº”å¼ */[m
[32m+[m[32m@media (max-width: 1200px) {[m
[32m+[m[32m  .product-grid {[m
[32m+[m[32m    grid-template-columns: repeat(3, 1fr);[m
[32m+[m[32m  }[m
[32m+[m[32m  .filter-container { flex-direction: column; align-items: stretch; }[m
[32m+[m[32m  .left-filters { width: 100%; }[m
[32m+[m[32m  .right-search { width: 100%; margin-left: 0; }[m
[32m+[m[32m  .custom-select, .hardware-select, .price-range-select, .sort-select { flex: 1; min-width: 140px; }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m@media (max-width: 992px) {[m
[32m+[m[32m  .product-grid {[m
[32m+[m[32m    grid-template-columns: repeat(2, 1fr);[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m@media (max-width: 640px) {[m
[32m+[m[32m  .product-grid {[m
[32m+[m[32m    grid-template-columns: 1fr;[m
[32m+[m[32m  }[m
[32m+[m[32m  .main-title { font-size: 28px; }[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/views/error/401.vue b/src/views/error/401.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..1ba37922[m
[1m--- /dev/null[m
[1m+++ b/src/views/error/401.vue[m
[36m@@ -0,0 +1,82 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="errPage-container">[m
[32m+[m[32m    <el-button icon="arrow-left" class="pan-back-btn" @click="back">[m
[32m+[m[32m      è¿”å›[m
[32m+[m[32m    </el-button>[m
[32m+[m[32m    <el-row>[m
[32m+[m[32m      <el-col :span="12">[m
[32m+[m[32m        <h1 class="text-jumbo text-ginormous">[m
[32m+[m[32m          401é”™è¯¯![m
[32m+[m[32m        </h1>[m
[32m+[m[32m        <h2>æ‚¨æ²¡æœ‰è®¿é—®æƒé™ï¼</h2>[m
[32m+[m[32m        <h6>å¯¹ä¸èµ·ï¼Œæ‚¨æ²¡æœ‰è®¿é—®æƒé™ï¼Œè¯·ä¸è¦è¿›è¡Œéæ³•æ“ä½œï¼æ‚¨å¯ä»¥è¿”å›ä¸»é¡µé¢</h6>[m
[32m+[m[32m        <ul class="list-unstyled">[m
[32m+[m[32m          <li class="link-type">[m
[32m+[m[32m            <router-link to="/">[m
[32m+[m[32m              å›é¦–é¡µ[m
[32m+[m[32m            </router-link>[m
[32m+[m[32m          </li>[m
[32m+[m[32m        </ul>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <el-col :span="12">[m
[32m+[m[32m        <img :src="errGif" width="313" height="428" alt="Girl has dropped her ice cream.">[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m    </el-row>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport errImage from "@/assets/401_images/401.gif";[m
[32m+[m
[32m+[m[32mlet { proxy } = getCurrentInstance();[m
[32m+[m
[32m+[m[32mconst errGif = ref(errImage + "?" + +new Date());[m
[32m+[m
[32m+[m[32mfunction back() {[m
[32m+[m[32m  if (proxy.$route.query.noGoBack) {[m
[32m+[m[32m    proxy.$router.push({ path: "/" });[m
[32m+[m[32m  } else {[m
[32m+[m[32m    proxy.$router.go(-1);[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang="scss" scoped>[m
[32m+[m[32m.errPage-container {[m
[32m+[m[32m  width: 800px;[m
[32m+[m[32m  max-width: 100%;[m
[32m+[m[32m  margin: 100px auto;[m
[32m+[m[32m  .pan-back-btn {[m
[32m+[m[32m    background: #008489;[m
[32m+[m[32m    color: #fff;[m
[32m+[m[32m    border: none !important;[m
[32m+[m[32m  }[m
[32m+[m[32m  .pan-gif {[m
[32m+[m[32m    margin: 0 auto;[m
[32m+[m[32m    display: block;[m
[32m+[m[32m  }[m
[32m+[m[32m  .pan-img {[m
[32m+[m[32m    display: block;[m
[32m+[m[32m    margin: 0 auto;[m
[32m+[m[32m    width: 100%;[m
[32m+[m[32m  }[m
[32m+[m[32m  .text-jumbo {[m
[32m+[m[32m    font-size: 60px;[m
[32m+[m[32m    font-weight: 700;[m
[32m+[m[32m    color: #484848;[m
[32m+[m[32m  }[m
[32m+[m[32m  .list-unstyled {[m
[32m+[m[32m    font-size: 14px;[m
[32m+[m[32m    li {[m
[32m+[m[32m      padding-bottom: 5px;[m
[32m+[m[32m    }[m
[32m+[m[32m    a {[m
[32m+[m[32m      color: #008489;[m
[32m+[m[32m      text-decoration: none;[m
[32m+[m[32m      &:hover {[m
[32m+[m[32m        text-decoration: underline;[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
[1mdiff --git a/src/views/error/404.vue b/src/views/error/404.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..f2053032[m
[1m--- /dev/null[m
[1m+++ b/src/views/error/404.vue[m
[36m@@ -0,0 +1,227 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="wscn-http404-container">[m
[32m+[m[32m    <div class="wscn-http404">[m
[32m+[m[32m      <div class="pic-404">[m
[32m+[m[32m        <img class="pic-404__parent" src="@/assets/404_images/404.png" alt="404">[m
[32m+[m[32m        <img class="pic-404__child left" src="@/assets/404_images/404_cloud.png" alt="404">[m
[32m+[m[32m        <img class="pic-404__child mid" src="@/assets/404_images/404_cloud.png" alt="404">[m
[32m+[m[32m        <img class="pic-404__child right" src="@/assets/404_images/404_cloud.png" alt="404">[m
[32m+[m[32m      </div>[m
[32m+[m[32m      <div class="bullshit">[m
[32m+[m[32m        <div class="bullshit__oops">[m
[32m+[m[32m          404é”™è¯¯![m
[32m+[m[32m        </div>[m
[32m+[m[32m        <div class="bullshit__headline">[m
[32m+[m[32m          {{ message }}[m
[32m+[m[32m        </div>[m
[32m+[m[32m        <div class="bullshit__info">[m
[32m+[m[32m          å¯¹ä¸èµ·ï¼Œæ‚¨æ­£åœ¨å¯»æ‰¾çš„é¡µé¢ä¸å­˜åœ¨ã€‚å°è¯•æ£€æŸ¥URLçš„é”™è¯¯ï¼Œç„¶åæŒ‰æµè§ˆå™¨ä¸Šçš„åˆ·æ–°æŒ‰é’®æˆ–å°è¯•åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­æ‰¾åˆ°å…¶ä»–å†…å®¹ã€‚[m
[32m+[m[32m        </div>[m
[32m+[m[32m        <router-link to="/index" class="bullshit__return-home">[m
[32m+[m[32m          è¿”å›é¦–é¡µ[m
[32m+[m[32m        </router-link>[m
[32m+[m[32m      </div>[m
[32m+[m[32m    </div>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mlet message = computed(() => {[m
[32m+[m[32m  return 'æ‰¾ä¸åˆ°ç½‘é¡µï¼'[m
[32m+[m[32m})[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang="scss" scoped>[m
[32m+[m[32m.wscn-http404-container{[m
[32m+[m[32m  transform: translate(-50%,-50%);[m
[32m+[m[32m  position: absolute;[m
[32m+[m[32m  top: 40%;[m
[32m+[m[32m  left: 50%;[m
[32m+[m[32m}[m
[32m+[m[32m.wscn-http404 {[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m  width: 1200px;[m
[32m+[m[32m  padding: 0 50px;[m
[32m+[m[32m  overflow: hidden;[m
[32m+[m[32m  .pic-404 {[m
[32m+[m[32m    position: relative;[m
[32m+[m[32m    float: left;[m
[32m+[m[32m    width: 600px;[m
[32m+[m[32m    overflow: hidden;[m
[32m+[m[32m    &__parent {[m
[32m+[m[32m      width: 100%;[m
[32m+[m[32m    }[m
[32m+[m[32m    &__child {[m
[32m+[m[32m      position: absolute;[m
[32m+[m[32m      &.left {[m
[32m+[m[32m        width: 80px;[m
[32m+[m[32m        top: 17px;[m
[32m+[m[32m        left: 220px;[m
[32m+[m[32m        opacity: 0;[m
[32m+[m[32m        animation-name: cloudLeft;[m
[32m+[m[32m        animation-duration: 2s;[m
[32m+[m[32m        animation-timing-function: linear;[m
[32m+[m[32m        animation-fill-mode: forwards;[m
[32m+[m[32m        animation-delay: 1s;[m
[32m+[m[32m      }[m
[32m+[m[32m      &.mid {[m
[32m+[m[32m        width: 46px;[m
[32m+[m[32m        top: 10px;[m
[32m+[m[32m        left: 420px;[m
[32m+[m[32m        opacity: 0;[m
[32m+[m[32m        animation-name: cloudMid;[m
[32m+[m[32m        animation-duration: 2s;[m
[32m+[m[32m        animation-timing-function: linear;[m
[32m+[m[32m        animation-fill-mode: forwards;[m
[32m+[m[32m        animation-delay: 1.2s;[m
[32m+[m[32m      }[m
[32m+[m[32m      &.right {[m
[32m+[m[32m        width: 62px;[m
[32m+[m[32m        top: 100px;[m
[32m+[m[32m        left: 500px;[m
[32m+[m[32m        opacity: 0;[m
[32m+[m[32m        animation-name: cloudRight;[m
[32m+[m[32m        animation-duration: 2s;[m
[32m+[m[32m        animation-timing-function: linear;[m
[32m+[m[32m        animation-fill-mode: forwards;[m
[32m+[m[32m        animation-delay: 1s;[m
[32m+[m[32m      }[m
[32m+[m[32m      @keyframes cloudLeft {[m
[32m+[m[32m        0% {[m
[32m+[m[32m          top: 17px;[m
[32m+[m[32m          left: 220px;[m
[32m+[m[32m          opacity: 0;[m
[32m+[m[32m        }[m
[32m+[m[32m        20% {[m
[32m+[m[32m          top: 33px;[m
[32m+[m[32m          left: 188px;[m
[32m+[m[32m          opacity: 1;[m
[32m+[m[32m        }[m
[32m+[m[32m        80% {[m
[32m+[m[32m          top: 81px;[m
[32m+[m[32m          left: 92px;[m
[32m+[m[32m          opacity: 1;[m
[32m+[m[32m        }[m
[32m+[m[32m        100% {[m
[32m+[m[32m          top: 97px;[m
[32m+[m[32m          left: 60px;[m
[32m+[m[32m          opacity: 0;[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m[32m      @keyframes cloudMid {[m
[32m+[m[32m        0% {[m
[32m+[m[32m          top: 10px;[m
[32m+[m[32m          left: 420px;[m
[32m+[m[32m          opacity: 0;[m
[32m+[m[32m        }[m
[32m+[m[32m        20% {[m
[32m+[m[32m          top: 40px;[m
[32m+[m[32m          left: 360px;[m
[32m+[m[32m          opacity: 1;[m
[32m+[m[32m        }[m
[32m+[m[32m        70% {[m
[32m+[m[32m          top: 130px;[m
[32m+[m[32m          left: 180px;[m
[32m+[m[32m          opacity: 1;[m
[32m+[m[32m        }[m
[32m+[m[32m        100% {[m
[32m+[m[32m          top: 160px;[m
[32m+[m[32m          left: 120px;[m
[32m+[m[32m          opacity: 0;[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m[32m      @keyframes cloudRight {[m
[32m+[m[32m        0% {[m
[32m+[m[32m          top: 100px;[m
[32m+[m[32m          left: 500px;[m
[32m+[m[32m          opacity: 0;[m
[32m+[m[32m        }[m
[32m+[m[32m        20% {[m
[32m+[m[32m          top: 120px;[m
[32m+[m[32m          left: 460px;[m
[32m+[m[32m          opacity: 1;[m
[32m+[m[32m        }[m
[32m+[m[32m        80% {[m
[32m+[m[32m          top: 180px;[m
[32m+[m[32m          left: 340px;[m
[32m+[m[32m          opacity: 1;[m
[32m+[m[32m        }[m
[32m+[m[32m        100% {[m
[32m+[m[32m          top: 200px;[m
[32m+[m[32m          left: 300px;[m
[32m+[m[32m          opacity: 0;[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  .bullshit {[m
[32m+[m[32m    position: relative;[m
[32m+[m[32m    float: left;[m
[32m+[m[32m    width: 300px;[m
[32m+[m[32m    padding: 30px 0;[m
[32m+[m[32m    overflow: hidden;[m
[32m+[m[32m    &__oops {[m
[32m+[m[32m      font-size: 32px;[m
[32m+[m[32m      font-weight: bold;[m
[32m+[m[32m      line-height: 40px;[m
[32m+[m[32m      color: #1482f0;[m
[32m+[m[32m      opacity: 0;[m
[32m+[m[32m      margin-bottom: 20px;[m
[32m+[m[32m      animation-name: slideUp;[m
[32m+[m[32m      animation-duration: 0.5s;[m
[32m+[m[32m      animation-fill-mode: forwards;[m
[32m+[m[32m    }[m
[32m+[m[32m    &__headline {[m
[32m+[m[32m      font-size: 20px;[m
[32m+[m[32m      line-height: 24px;[m
[32m+[m[32m      color: #222;[m
[32m+[m[32m      font-weight: bold;[m
[32m+[m[32m      opacity: 0;[m
[32m+[m[32m      margin-bottom: 10px;[m
[32m+[m[32m      animation-name: slideUp;[m
[32m+[m[32m      animation-duration: 0.5s;[m
[32m+[m[32m      animation-delay: 0.1s;[m
[32m+[m[32m      animation-fill-mode: forwards;[m
[32m+[m[32m    }[m
[32m+[m[32m    &__info {[m
[32m+[m[32m      font-size: 13px;[m
[32m+[m[32m      line-height: 21px;[m
[32m+[m[32m      color: grey;[m
[32m+[m[32m      opacity: 0;[m
[32m+[m[32m      margin-bottom: 30px;[m
[32m+[m[32m      animation-name: slideUp;[m
[32m+[m[32m      animation-duration: 0.5s;[m
[32m+[m[32m      animation-delay: 0.2s;[m
[32m+[m[32m      animation-fill-mode: forwards;[m
[32m+[m[32m    }[m
[32m+[m[32m    &__return-home {[m
[32m+[m[32m      display: block;[m
[32m+[m[32m      float: left;[m
[32m+[m[32m      width: 110px;[m
[32m+[m[32m      height: 36px;[m
[32m+[m[32m      background: #1482f0;[m
[32m+[m[32m      border-radius: 100px;[m
[32m+[m[32m      text-align: center;[m
[32m+[m[32m      color: #ffffff;[m
[32m+[m[32m      opacity: 0;[m
[32m+[m[32m      font-size: 14px;[m
[32m+[m[32m      line-height: 36px;[m
[32m+[m[32m      cursor: pointer;[m
[32m+[m[32m      animation-name: slideUp;[m
[32m+[m[32m      animation-duration: 0.5s;[m
[32m+[m[32m      animation-delay: 0.3s;[m
[32m+[m[32m      animation-fill-mode: forwards;[m
[32m+[m[32m    }[m
[32m+[m[32m    @keyframes slideUp {[m
[32m+[m[32m      0% {[m
[32m+[m[32m        transform: translateY(60px);[m
[32m+[m[32m        opacity: 0;[m
[32m+[m[32m      }[m
[32m+[m[32m      100% {[m
[32m+[m[32m        transform: translateY(0);[m
[32m+[m[32m        opacity: 1;[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
[1mdiff --git a/src/views/index.vue b/src/views/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..3e15a18b[m
[1m--- /dev/null[m
[1m+++ b/src/views/index.vue[m
[36m@@ -0,0 +1,76 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="app-container home">[m
[32m+[m[32m    <el-row :gutter="20">[m
[32m+[m[32m      <el-col :sm="24" :lg="24">[m
[32m+[m[32m        <hr />[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m    </el-row>[m
[32m+[m[41m    [m
[32m+[m[32m    <el-row :gutter="20">[m
[32m+[m[32m      <el-col :sm="24" :lg="12" style="padding-left: 20px">[m
[32m+[m[32m        <h2>ç”µè„‘ç§Ÿå”®ä¸ç¡¬ä»¶æ€§èƒ½æ™ºèƒ½è¯„ä¼°å¹³å°</h2>[m
[32m+[m[32m        <p>[m
[32m+[m[32m          éšç€æ•°å­—åŒ–è½¬å‹åŠ é€Ÿï¼Œä¼ä¸šçŸ­æœŸåŠå…¬ã€ä¸ªäººä¸´æ—¶ç”¨æœºéœ€æ±‚æ¿€å¢ï¼Œç”µè„‘ç§Ÿå”®å¸‚åœºè§„æ¨¡æŒç»­æ‰©å¤§ï¼Œä½†è¡Œä¸šç°å­˜è¯¸å¤šç—›ç‚¹ï¼šä¼ ç»Ÿç¡¬ä»¶æ€§èƒ½è¯„ä¼°ä¾èµ–äººå·¥æ£€æµ‹æ•ˆç‡ä½ä¸‹ï¼›ç§Ÿå”®æµç¨‹ä»¥çº¿ä¸‹æ“ä½œä¸ºä¸»ï¼Œå­˜åœ¨èµ„äº§ç®¡ç†æ··ä¹±é—®é¢˜åœ¨æ­¤èƒŒæ™¯ä¸‹ï¼Œæ„å»ºâ€œæ™ºèƒ½è¯„ä¼°-çº¿ä¸Šç§Ÿå”®-åŠ¨æ€ç®¡ç†â€ä¸€ä½“åŒ–å¹³å°ï¼Œæˆä¸ºè§£å†³è¡Œä¸šç—›ç‚¹çš„å…³é”®ã€‚[m
[32m+[m[32m        </p>[m
[32m+[m[41m        [m
[32m+[m[32m        <p>[m
[32m+[m[32m          <el-button[m
[32m+[m[32m            type="primary"[m
[32m+[m[32m            icon="Cloudy"[m
[32m+[m[32m            plain[m
[32m+[m[32m            @click="goTarget('https://gitee.com/y_project/RuoYi-Vue')"[m
[32m+[m[32m          >[m
[32m+[m[32m            è®¿é—®å‰å°[m
[32m+[m[32m          </el-button>[m
[32m+[m[41m          [m
[32m+[m[32m        </p>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m    </el-row>[m
[32m+[m[41m    [m
[32m+[m[32m    <el-divider />[m
[32m+[m[41m    [m
[32m+[m[32m    <el-row :gutter="20">[m
[32m+[m[32m      <el-col :xs="24" :sm="24" :md="12" :lg="8">[m
[32m+[m[32m        <el-card class="update-log">[m
[32m+[m[32m          <template #header>[m
[32m+[m[32m            <div class="clearfix">[m
[32m+[m[32m              <span>è”ç³»ä¿¡æ¯</span>[m
[32m+[m[32m            </div>[m
[32m+[m[32m          </template>[m
[32m+[m[32m          <div class="body">[m
[32m+[m[32m            <p>[m
[32m+[m[32m              <i class="el-icon-s-promotion"></i> QQï¼š 1179630166 <span style="margin-left: 10px;">æ‰‹æœºå·ï¼š13763837981</span>[m
[32m+[m[41m              [m
[32m+[m[41m              [m
[32m+[m[32m            </p>[m
[32m+[m[41m            [m
[32m+[m[32m          </div>[m
[32m+[m[32m        </el-card>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m    </el-row>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mconst goTarget = (url) => {[m
[32m+[m[32m  window.open(url, '_blank')[m
[32m+[m[32m}[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style scoped>[m
[32m+[m[32m.home {[m
[32m+[m[32m  padding: 20px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.update-log {[m
[32m+[m[32m  margin-bottom: 20px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.body p {[m
[32m+[m[32m  margin-bottom: 10px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.el-col {[m
[32m+[m[32m  margin-bottom: 20px;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/views/login.vue b/src/views/login.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..c23815ee[m
[1m--- /dev/null[m
[1m+++ b/src/views/login.vue[m
[36m@@ -0,0 +1,232 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="login">[m
[32m+[m[32m    <el-form ref="loginRef" :model="loginForm" :rules="loginRules" class="login-form">[m
[32m+[m[32m      <h3 class="title">ç§Ÿå”®åå°ç®¡ç†ç³»ç»Ÿ</h3>[m
[32m+[m[32m      <el-form-item prop="username">[m
[32m+[m[32m        <el-input[m
[32m+[m[32m          v-model="loginForm.username"[m
[32m+[m[32m          type="text"[m
[32m+[m[32m          size="large"[m
[32m+[m[32m          auto-complete="off"[m
[32m+[m[32m          placeholder="è´¦å·"[m
[32m+[m[32m        >[m
[32m+[m[32m          <template #prefix><svg-icon icon-class="user" class="el-input__icon input-icon" /></template>[m
[32m+[m[32m        </el-input>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item prop="password">[m
[32m+[m[32m        <el-input[m
[32m+[m[32m          v-model="loginForm.password"[m
[32m+[m[32m          type="password"[m
[32m+[m[32m          size="large"[m
[32m+[m[32m          auto-complete="off"[m
[32m+[m[32m          placeholder="å¯†ç "[m
[32m+[m[32m          @keyup.enter="handleLogin"[m
[32m+[m[32m        >[m
[32m+[m[32m          <template #prefix><svg-icon icon-class="password" class="el-input__icon input-icon" /></template>[m
[32m+[m[32m        </el-input>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item prop="code" v-if="captchaEnabled">[m
[32m+[m[32m        <el-input[m
[32m+[m[32m          v-model="loginForm.code"[m
[32m+[m[32m          size="large"[m
[32m+[m[32m          auto-complete="off"[m
[32m+[m[32m          placeholder="éªŒè¯ç "[m
[32m+[m[32m          style="width: 63%"[m
[32m+[m[32m          @keyup.enter="handleLogin"[m
[32m+[m[32m        >[m
[32m+[m[32m          <template #prefix><svg-icon icon-class="validCode" class="el-input__icon input-icon" /></template>[m
[32m+[m[32m        </el-input>[m
[32m+[m[32m        <div class="login-code">[m
[32m+[m[32m          <img :src="codeUrl" @click="getCode" class="login-code-img"/>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-checkbox v-model="loginForm.rememberMe" style="margin:0px 0px 25px 0px;">è®°ä½å¯†ç </el-checkbox>[m
[32m+[m[32m      <el-form-item style="width:100%;">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          :loading="loading"[m
[32m+[m[32m          size="large"[m
[32m+[m[32m          type="primary"[m
[32m+[m[32m          style="width:100%;"[m
[32m+[m[32m          @click.prevent="handleLogin"[m
[32m+[m[32m        >[m
[32m+[m[32m          <span v-if="!loading">ç™» å½•</span>[m
[32m+[m[32m          <span v-else>ç™» å½• ä¸­...</span>[m
[32m+[m[32m        </el-button>[m
[32m+[m[32m        <div style="float: right;" v-if="register">[m
[32m+[m[32m          <router-link class="link-type" :to="'/portal/register'">æ¸¸å®¢æ³¨å†Œ</router-link>[m
[32m+[m[32m        </div>[m
[32m+[m[32m        <div style="float: left;">[m
[32m+[m[32m          <router-link class="link-type" :to="'/portal/login'">ä¹°å®¶ç™»å½•</router-link>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m    </el-form>[m
[32m+[m[32m    <!--  åº•éƒ¨  -->[m
[32m+[m[32m    <div class="el-login-footer">[m
[32m+[m[32m      <span>Copyright Â© 2018-2023 ruoyi.vip All Rights Reserved.</span>[m
[32m+[m[32m    </div>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { getCodeImg } from "@/api/login";[m
[32m+[m[32mimport Cookies from "js-cookie";[m
[32m+[m[32mimport { encrypt, decrypt } from "@/utils/jsencrypt";[m
[32m+[m[32mimport useUserStore from '@/store/modules/user'[m
[32m+[m
[32m+[m[32mconst userStore = useUserStore()[m
[32m+[m[32mconst route = useRoute();[m
[32m+[m[32mconst router = useRouter();[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m
[32m+[m[32mconst loginForm = ref({[m
[32m+[m[32m  username: "admin",[m
[32m+[m[32m  password: "admin123",[m
[32m+[m[32m  rememberMe: false,[m
[32m+[m[32m  code: "",[m
[32m+[m[32m  uuid: ""[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst loginRules = {[m
[32m+[m[32m  username: [{ required: true, trigger: "blur", message: "è¯·è¾“å…¥æ‚¨çš„è´¦å·" }],[m
[32m+[m[32m  password: [{ required: true, trigger: "blur", message: "è¯·è¾“å…¥æ‚¨çš„å¯†ç " }],[m
[32m+[m[32m  code: [{ required: true, trigger: "change", message: "è¯·è¾“å…¥éªŒè¯ç " }][m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mconst codeUrl = ref("");[m
[32m+[m[32mconst loading = ref(false);[m
[32m+[m[32m// éªŒè¯ç å¼€å…³[m
[32m+[m[32mconst captchaEnabled = ref(true);[m
[32m+[m
[32m+[m[32m// æ³¨å†Œå¼€å…³[m
[32m+[m[32mconst register = ref(true);[m
[32m+[m[32mconst redirect = ref(undefined);[m
[32m+[m
[32m+[m[32mwatch(route, (newRoute) => {[m
[32m+[m[32m    redirect.value = newRoute.query && newRoute.query.redirect;[m
[32m+[m[32m}, { immediate: true });[m
[32m+[m
[32m+[m[32mfunction handleLogin() {[m
[32m+[m[32m  proxy.$refs.loginRef.validate(valid => {[m
[32m+[m[32m    if (valid) {[m
[32m+[m[32m      loading.value = true;[m
[32m+[m[32m      // å‹¾é€‰äº†éœ€è¦è®°ä½å¯†ç è®¾ç½®åœ¨ cookie ä¸­è®¾ç½®è®°ä½ç”¨æˆ·åå’Œå¯†ç [m
[32m+[m[32m      if (loginForm.value.rememberMe) {[m
[32m+[m[32m        Cookies.set("username", loginForm.value.username, { expires: 30 });[m
[32m+[m[32m        Cookies.set("password", encrypt(loginForm.value.password), { expires: 30 });[m
[32m+[m[32m        Cookies.set("rememberMe", loginForm.value.rememberMe, { expires: 30 });[m
[32m+[m[32m      } else {[m
[32m+[m[32m        // å¦åˆ™ç§»é™¤[m
[32m+[m[32m        Cookies.remove("username");[m
[32m+[m[32m        Cookies.remove("password");[m
[32m+[m[32m        Cookies.remove("rememberMe");[m
[32m+[m[32m      }[m
[32m+[m[32m      // è°ƒç”¨actionçš„ç™»å½•æ–¹æ³•[m
[32m+[m[32m      userStore.login(loginForm.value).then(() => {[m
[32m+[m[32m        const query = route.query;[m
[32m+[m[32m        const otherQueryParams = Object.keys(query).reduce((acc, cur) => {[m
[32m+[m[32m          if (cur !== "redirect") {[m
[32m+[m[32m            acc[cur] = query[cur];[m
[32m+[m[32m          }[m
[32m+[m[32m          return acc;[m
[32m+[m[32m        }, {});[m
[32m+[m[32m        router.push({ path: redirect.value || "/", query: otherQueryParams });[m
[32m+[m[32m      }).catch(() => {[m
[32m+[m[32m        loading.value = false;[m
[32m+[m[32m        // é‡æ–°è·å–éªŒè¯ç [m
[32m+[m[32m        if (captchaEnabled.value) {[m
[32m+[m[32m          getCode();[m
[32m+[m[32m        }[m
[32m+[m[32m      });[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction getCode() {[m
[32m+[m[32m  getCodeImg().then(res => {[m
[32m+[m[32m    captchaEnabled.value = res.captchaEnabled === undefined ? true : res.captchaEnabled;[m
[32m+[m[32m    if (captchaEnabled.value) {[m
[32m+[m[32m      codeUrl.value = "data:image/gif;base64," + res.img;[m
[32m+[m[32m      loginForm.value.uuid = res.uuid;[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction getCookie() {[m
[32m+[m[32m  const username = Cookies.get("username");[m
[32m+[m[32m  const password = Cookies.get("password");[m
[32m+[m[32m  const rememberMe = Cookies.get("rememberMe");[m
[32m+[m[32m  loginForm.value = {[m
[32m+[m[32m    username: username === undefined ? loginForm.value.username : username,[m
[32m+[m[32m    password: password === undefined ? loginForm.value.password : decrypt(password),[m
[32m+[m[32m    rememberMe: rememberMe === undefined ? false : Boolean(rememberMe)[m
[32m+[m[32m  };[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mgetCode();[m
[32m+[m[32mgetCookie();[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang='scss' scoped>[m
[32m+[m[32m.login {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  justify-content: flex-end; /* æ”¹ç”¨flex-endæ›´ç›´è§‚è¡¨ç¤ºé å³å¯¹é½ */[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  height: 100%;[m
[32m+[m[32m  background-image: url("../assets/images/login-background1.jpg");[m
[32m+[m[32m  background-size: cover;[m
[32m+[m[32m  padding-right: 90px; /* å³ä¾§ç•™å‡º50pxé—´è·ï¼Œå¯æ ¹æ®éœ€è¦è°ƒæ•´æ•°å€¼ */[m
[32m+[m[32m}[m
[32m+[m[32m.title {[m
[32m+[m[32m  margin: 0px auto 30px auto;[m
[32m+[m[32m  text-align: center;[m
[32m+[m[32m  color: #707070;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.login-form {[m
[32m+[m[32m  border-radius: 6px;[m
[32m+[m[32m  background: #ffffff;[m
[32m+[m[32m  width: 400px;[m
[32m+[m[32m  padding: 25px 25px 5px 25px;[m
[32m+[m[32m  .el-input {[m
[32m+[m[32m    height: 40px;[m
[32m+[m[32m    input {[m
[32m+[m[32m      height: 40px;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  .input-icon {[m
[32m+[m[32m    height: 39px;[m
[32m+[m[32m    width: 14px;[m
[32m+[m[32m    margin-left: 0px;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m.login-tip {[m
[32m+[m[32m  font-size: 13px;[m
[32m+[m[32m  text-align: center;[m
[32m+[m[32m  color: #bfbfbf;[m
[32m+[m[32m}[m
[32m+[m[32m.login-code {[m
[32m+[m[32m  width: 33%;[m
[32m+[m[32m  height: 40px;[m
[32m+[m[32m  float: right;[m
[32m+[m[32m  img {[m
[32m+[m[32m    cursor: pointer;[m
[32m+[m[32m    vertical-align: middle;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m.el-login-footer {[m
[32m+[m[32m  height: 40px;[m
[32m+[m[32m  line-height: 40px;[m
[32m+[m[32m  position: fixed;[m
[32m+[m[32m  bottom: 0;[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m  text-align: center;[m
[32m+[m[32m  color: #fff;[m
[32m+[m[32m  font-family: Arial;[m
[32m+[m[32m  font-size: 12px;[m
[32m+[m[32m  letter-spacing: 1px;[m
[32m+[m[32m}[m
[32m+[m[32m.login-code-img {[m
[32m+[m[32m  height: 40px;[m
[32m+[m[32m  padding-left: 12px;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
[1mdiff --git a/src/views/monitor/cache/index.vue b/src/views/monitor/cache/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..f2a53a9d[m
[1m--- /dev/null[m
[1m+++ b/src/views/monitor/cache/index.vue[m
[36m@@ -0,0 +1,132 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="app-container">[m
[32m+[m[32m    <el-row>[m
[32m+[m[32m      <el-col :span="24" class="card-box">[m
[32m+[m[32m        <el-card>[m
[32m+[m[32m          <template #header><Monitor style="width: 1em; height: 1em; vertical-align: middle;" /> <span style="vertical-align: middle;">åŸºæœ¬ä¿¡æ¯</span></template>[m
[32m+[m[32m          <div class="el-table el-table--enable-row-hover el-table--medium">[m
[32m+[m[32m            <table cellspacing="0" style="width: 100%">[m
[32m+[m[32m              <tbody>[m
[32m+[m[32m                <tr>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">Redisç‰ˆæœ¬</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="cache.info">{{ cache.info.redis_version }}</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">è¿è¡Œæ¨¡å¼</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="cache.info">{{ cache.info.redis_mode == "standalone" ? "å•æœº" : "é›†ç¾¤" }}</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">ç«¯å£</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="cache.info">{{ cache.info.tcp_port }}</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">å®¢æˆ·ç«¯æ•°</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="cache.info">{{ cache.info.connected_clients }}</div></td>[m
[32m+[m[32m                </tr>[m
[32m+[m[32m                <tr>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">è¿è¡Œæ—¶é—´(å¤©)</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="cache.info">{{ cache.info.uptime_in_days }}</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">ä½¿ç”¨å†…å­˜</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="cache.info">{{ cache.info.used_memory_human }}</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">ä½¿ç”¨CPU</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="cache.info">{{ parseFloat(cache.info.used_cpu_user_children).toFixed(2) }}</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">å†…å­˜é…ç½®</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="cache.info">{{ cache.info.maxmemory_human }}</div></td>[m
[32m+[m[32m                </tr>[m
[32m+[m[32m                <tr>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">AOFæ˜¯å¦å¼€å¯</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="cache.info">{{ cache.info.aof_enabled == "0" ? "å¦" : "æ˜¯" }}</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">RDBæ˜¯å¦æˆåŠŸ</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="cache.info">{{ cache.info.rdb_last_bgsave_status }}</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">Keyæ•°é‡</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="cache.dbSize">{{ cache.dbSize }} </div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">ç½‘ç»œå…¥å£/å‡ºå£</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="cache.info">{{ cache.info.instantaneous_input_kbps }}kps/{{cache.info.instantaneous_output_kbps}}kps</div></td>[m
[32m+[m[32m                </tr>[m
[32m+[m[32m              </tbody>[m
[32m+[m[32m            </table>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </el-card>[m
[32m+[m[32m      </el-col>[m
[32m+[m
[32m+[m[32m      <el-col :span="12" class="card-box">[m
[32m+[m[32m        <el-card>[m
[32m+[m[32m          <template #header><PieChart style="width: 1em; height: 1em; vertical-align: middle;" /> <span style="vertical-align: middle;">å‘½ä»¤ç»Ÿè®¡</span></template>[m
[32m+[m[32m          <div class="el-table el-table--enable-row-hover el-table--medium">[m
[32m+[m[32m            <div ref="commandstats" style="height: 420px" />[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </el-card>[m
[32m+[m[32m      </el-col>[m
[32m+[m
[32m+[m[32m      <el-col :span="12" class="card-box">[m
[32m+[m[32m        <el-card>[m
[32m+[m[32m          <template #header><Odometer style="width: 1em; height: 1em; vertical-align: middle;" /> <span style="vertical-align: middle;">å†…å­˜ä¿¡æ¯</span></template>[m
[32m+[m[32m          <div class="el-table el-table--enable-row-hover el-table--medium">[m
[32m+[m[32m            <div ref="usedmemory" style="height: 420px" />[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </el-card>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m    </el-row>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup name="Cache">[m
[32m+[m[32mimport { getCache } from '@/api/monitor/cache';[m
[32m+[m[32mimport * as echarts from 'echarts';[m
[32m+[m
[32m+[m[32mconst cache = ref([]);[m
[32m+[m[32mconst commandstats = ref(null);[m
[32m+[m[32mconst usedmemory = ref(null);[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m
[32m+[m[32mfunction getList() {[m
[32m+[m[32m  proxy.$modal.loading("æ­£åœ¨åŠ è½½ç¼“å­˜ç›‘æ§æ•°æ®ï¼Œè¯·ç¨å€™ï¼");[m
[32m+[m[32m  getCache().then(response => {[m
[32m+[m[32m    proxy.$modal.closeLoading();[m
[32m+[m[32m    cache.value = response.data;[m
[32m+[m
[32m+[m[32m    const commandstatsIntance = echarts.init(commandstats.value, "macarons");[m
[32m+[m[32m    commandstatsIntance.setOption({[m
[32m+[m[32m      tooltip: {[m
[32m+[m[32m        trigger: "item",[m
[32m+[m[32m        formatter: "{a} <br/>{b} : {c} ({d}%)"[m
[32m+[m[32m      },[m
[32m+[m[32m      series: [[m
[32m+[m[32m        {[m
[32m+[m[32m          name: "å‘½ä»¤",[m
[32m+[m[32m          type: "pie",[m
[32m+[m[32m          roseType: "radius",[m
[32m+[m[32m          radius: [15, 95],[m
[32m+[m[32m          center: ["50%", "38%"],[m
[32m+[m[32m          data: response.data.commandStats,[m
[32m+[m[32m          animationEasing: "cubicInOut",[m
[32m+[m[32m          animationDuration: 1000[m
[32m+[m[32m        }[m
[32m+[m[32m      ][m
[32m+[m[32m    });[m
[32m+[m[32m    const usedmemoryInstance = echarts.init(usedmemory.value, "macarons");[m
[32m+[m[32m    usedmemoryInstance.setOption({[m
[32m+[m[32m      tooltip: {[m
[32m+[m[32m        formatter: "{b} <br/>{a} : " + cache.value.info.used_memory_human[m
[32m+[m[32m      },[m
[32m+[m[32m      series: [[m
[32m+[m[32m        {[m
[32m+[m[32m          name: "å³°å€¼",[m
[32m+[m[32m          type: "gauge",[m
[32m+[m[32m          min: 0,[m
[32m+[m[32m          max: 1000,[m
[32m+[m[32m          detail: {[m
[32m+[m[32m            formatter: cache.value.info.used_memory_human[m
[32m+[m[32m          },[m
[32m+[m[32m          data: [[m
[32m+[m[32m            {[m
[32m+[m[32m              value: parseFloat(cache.value.info.used_memory_human),[m
[32m+[m[32m              name: "å†…å­˜æ¶ˆè€—"[m
[32m+[m[32m            }[m
[32m+[m[32m          ][m
[32m+[m[32m        }[m
[32m+[m[32m      ][m
[32m+[m[32m    })[m
[32m+[m[32m    window.addEventListener("resize", () => {[m
[32m+[m[32m      commandstatsIntance.resize();[m
[32m+[m[32m      usedmemoryInstance.resize();[m
[32m+[m[32m    });[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mgetList();[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/monitor/cache/list.vue b/src/views/monitor/cache/list.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..1696f3a2[m
[1m--- /dev/null[m
[1m+++ b/src/views/monitor/cache/list.vue[m
[36m@@ -0,0 +1,246 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="app-container">[m
[32m+[m[32m    <el-row :gutter="10">[m
[32m+[m[32m      <el-col :span="8">[m
[32m+[m[32m        <el-card style="height: calc(100vh - 125px)">[m
[32m+[m[32m          <template #header>[m
[32m+[m[32m            <Collection style="width: 1em; height: 1em; vertical-align: middle;" /> <span style="vertical-align: middle;">ç¼“å­˜åˆ—è¡¨</span>[m
[32m+[m[32m            <el-button[m
[32m+[m[32m              style="float: right; padding: 3px 0"[m
[32m+[m[32m              link[m
[32m+[m[32m              type="primary"[m
[32m+[m[32m              icon="Refresh"[m
[32m+[m[32m              @click="refreshCacheNames()"[m
[32m+[m[32m            ></el-button>[m
[32m+[m[32m          </template>[m
[32m+[m[32m          <el-table[m
[32m+[m[32m            v-loading="loading"[m
[32m+[m[32m            :data="cacheNames"[m
[32m+[m[32m            :height="tableHeight"[m
[32m+[m[32m            highlight-current-row[m
[32m+[m[32m            @row-click="getCacheKeys"[m
[32m+[m[32m            style="width: 100%"[m
[32m+[m[32m          >[m
[32m+[m[32m            <el-table-column[m
[32m+[m[32m              label="åºå·"[m
[32m+[m[32m              width="60"[m
[32m+[m[32m              type="index"[m
[32m+[m[32m            ></el-table-column>[m
[32m+[m
[32m+[m[32m            <el-table-column[m
[32m+[m[32m              label="ç¼“å­˜åç§°"[m
[32m+[m[32m              align="center"[m
[32m+[m[32m              prop="cacheName"[m
[32m+[m[32m              :show-overflow-tooltip="true"[m
[32m+[m[32m              :formatter="nameFormatter"[m
[32m+[m[32m            ></el-table-column>[m
[32m+[m
[32m+[m[32m            <el-table-column[m
[32m+[m[32m              label="å¤‡æ³¨"[m
[32m+[m[32m              align="center"[m
[32m+[m[32m              prop="remark"[m
[32m+[m[32m              :show-overflow-tooltip="true"[m
[32m+[m[32m            />[m
[32m+[m[32m            <el-table-column[m
[32m+[m[32m              label="æ“ä½œ"[m
[32m+[m[32m              width="60"[m
[32m+[m[32m              align="center"[m
[32m+[m[32m              class-name="small-padding fixed-width"[m
[32m+[m[32m            >[m
[32m+[m[32m              <template #default="scope">[m
[32m+[m[32m                <el-button[m
[32m+[m[32m                  link[m
[32m+[m[32m                  type="primary"[m
[32m+[m[32m                  icon="Delete"[m
[32m+[m[32m                  @click="handleClearCacheName(scope.row)"[m
[32m+[m[32m                ></el-button>[m
[32m+[m[32m              </template>[m
[32m+[m[32m            </el-table-column>[m
[32m+[m[32m          </el-table>[m
[32m+[m[32m        </el-card>[m
[32m+[m[32m      </el-col>[m
[32m+[m
[32m+[m[32m      <el-col :span="8">[m
[32m+[m[32m        <el-card style="height: calc(100vh - 125px)">[m
[32m+[m[32m          <template #header>[m
[32m+[m[32m            <Key style="width: 1em; height: 1em; vertical-align: middle;" /> <span style="vertical-align: middle;">é”®ååˆ—è¡¨</span>[m
[32m+[m[32m            <el-button[m
[32m+[m[32m              style="float: right; padding: 3px 0"[m
[32m+[m[32m              link[m
[32m+[m[32m              type="primary"[m
[32m+[m[32m              icon="Refresh"[m
[32m+[m[32m              @click="refreshCacheKeys()"[m
[32m+[m[32m            ></el-button>[m
[32m+[m[32m          </template>[m
[32m+[m[32m          <el-table[m
[32m+[m[32m            v-loading="subLoading"[m
[32m+[m[32m            :data="cacheKeys"[m
[32m+[m[32m            :height="tableHeight"[m
[32m+[m[32m            highlight-current-row[m
[32m+[m[32m            @row-click="handleCacheValue"[m
[32m+[m[32m            style="width: 100%"[m
[32m+[m[32m          >[m
[32m+[m[32m            <el-table-column[m
[32m+[m[32m              label="åºå·"[m
[32m+[m[32m              width="60"[m
[32m+[m[32m              type="index"[m
[32m+[m[32m            ></el-table-column>[m
[32m+[m[32m            <el-table-column[m
[32m+[m[32m              label="ç¼“å­˜é”®å"[m
[32m+[m[32m              align="center"[m
[32m+[m[32m              :show-overflow-tooltip="true"[m
[32m+[m[32m              :formatter="keyFormatter"[m
[32m+[m[32m            >[m
[32m+[m[32m            </el-table-column>[m
[32m+[m[32m            <el-table-column[m
[32m+[m[32m              label="æ“ä½œ"[m
[32m+[m[32m              width="60"[m
[32m+[m[32m              align="center"[m
[32m+[m[32m              class-name="small-padding fixed-width"[m
[32m+[m[32m            >[m
[32m+[m[32m              <template #default="scope">[m
[32m+[m[32m                <el-button[m
[32m+[m[32m                  link[m
[32m+[m[32m                  type="primary"[m
[32m+[m[32m                  icon="Delete"[m
[32m+[m[32m                  @click="handleClearCacheKey(scope.row)"[m
[32m+[m[32m                ></el-button>[m
[32m+[m[32m              </template>[m
[32m+[m[32m            </el-table-column>[m
[32m+[m[32m          </el-table>[m
[32m+[m[32m        </el-card>[m
[32m+[m[32m      </el-col>[m
[32m+[m
[32m+[m[32m      <el-col :span="8">[m
[32m+[m[32m        <el-card :bordered="false" style="height: calc(100vh - 125px)">[m
[32m+[m[32m          <template #header>[m
[32m+[m[32m            <Document style="width: 1em; height: 1em; vertical-align: middle;" /> <span style="vertical-align: middle;">ç¼“å­˜å†…å®¹</span>[m
[32m+[m[32m            <el-button[m
[32m+[m[32m              style="float: right; padding: 3px 0"[m
[32m+[m[32m              link[m
[32m+[m[32m              type="primary"[m
[32m+[m[32m              icon="Refresh"[m
[32m+[m[32m              @click="handleClearCacheAll()"[m
[32m+[m[32m              >æ¸…ç†å…¨éƒ¨</el-button[m
[32m+[m[32m            >[m
[32m+[m[32m          </template>[m
[32m+[m[32m          <el-form :model="cacheForm">[m
[32m+[m[32m            <el-row :gutter="32">[m
[32m+[m[32m              <el-col :offset="1" :span="22">[m
[32m+[m[32m                <el-form-item label="ç¼“å­˜åç§°:" prop="cacheName">[m
[32m+[m[32m                  <el-input v-model="cacheForm.cacheName" :readOnly="true" />[m
[32m+[m[32m                </el-form-item>[m
[32m+[m[32m              </el-col>[m
[32m+[m[32m              <el-col :offset="1" :span="22">[m
[32m+[m[32m                <el-form-item label="ç¼“å­˜é”®å:" prop="cacheKey">[m
[32m+[m[32m                  <el-input v-model="cacheForm.cacheKey" :readOnly="true" />[m
[32m+[m[32m                </el-form-item>[m
[32m+[m[32m              </el-col>[m
[32m+[m[32m              <el-col :offset="1" :span="22">[m
[32m+[m[32m                <el-form-item label="ç¼“å­˜å†…å®¹:" prop="cacheValue">[m
[32m+[m[32m                  <el-input[m
[32m+[m[32m                    v-model="cacheForm.cacheValue"[m
[32m+[m[32m                    type="textarea"[m
[32m+[m[32m                    :rows="8"[m
[32m+[m[32m                    :readOnly="true"[m
[32m+[m[32m                  />[m
[32m+[m[32m                </el-form-item>[m
[32m+[m[32m              </el-col>[m
[32m+[m[32m            </el-row>[m
[32m+[m[32m          </el-form>[m
[32m+[m[32m        </el-card>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m    </el-row>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup name="CacheList">[m
[32m+[m[32mimport { listCacheName, listCacheKey, getCacheValue, clearCacheName, clearCacheKey, clearCacheAll } from "@/api/monitor/cache";[m
[32m+[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m
[32m+[m[32mconst cacheNames = ref([]);[m
[32m+[m[32mconst cacheKeys = ref([]);[m
[32m+[m[32mconst cacheForm = ref({});[m
[32m+[m[32mconst loading = ref(true);[m
[32m+[m[32mconst subLoading = ref(false);[m
[32m+[m[32mconst nowCacheName = ref("");[m
[32m+[m[32mconst tableHeight = ref(window.innerHeight - 200);[m
[32m+[m
[32m+[m[32m/** æŸ¥è¯¢ç¼“å­˜åç§°åˆ—è¡¨ */[m
[32m+[m[32mfunction getCacheNames() {[m
[32m+[m[32m  loading.value = true;[m
[32m+[m[32m  listCacheName().then(response => {[m
[32m+[m[32m    cacheNames.value = response.data;[m
[32m+[m[32m    loading.value = false;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** åˆ·æ–°ç¼“å­˜åç§°åˆ—è¡¨ */[m
[32m+[m[32mfunction refreshCacheNames() {[m
[32m+[m[32m  getCacheNames();[m
[32m+[m[32m  proxy.$modal.msgSuccess("åˆ·æ–°ç¼“å­˜åˆ—è¡¨æˆåŠŸ");[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** æ¸…ç†æŒ‡å®šåç§°ç¼“å­˜ */[m
[32m+[m[32mfunction handleClearCacheName(row) {[m
[32m+[m[32m  clearCacheName(row.cacheName).then(response => {[m
[32m+[m[32m    proxy.$modal.msgSuccess("æ¸…ç†ç¼“å­˜åç§°[" + row.cacheName + "]æˆåŠŸ");[m
[32m+[m[32m    getCacheKeys();[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** æŸ¥è¯¢ç¼“å­˜é”®ååˆ—è¡¨ */[m
[32m+[m[32mfunction getCacheKeys(row) {[m
[32m+[m[32m  const cacheName = row !== undefined ? row.cacheName : nowCacheName.value;[m
[32m+[m[32m  if (cacheName === "") {[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m[32m  subLoading.value = true;[m
[32m+[m[32m  listCacheKey(cacheName).then(response => {[m
[32m+[m[32m    cacheKeys.value = response.data;[m
[32m+[m[32m    subLoading.value = false;[m
[32m+[m[32m    nowCacheName.value = cacheName;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** åˆ·æ–°ç¼“å­˜é”®ååˆ—è¡¨ */[m
[32m+[m[32mfunction refreshCacheKeys() {[m
[32m+[m[32m  getCacheKeys();[m
[32m+[m[32m  proxy.$modal.msgSuccess("åˆ·æ–°é”®ååˆ—è¡¨æˆåŠŸ");[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** æ¸…ç†æŒ‡å®šé”®åç¼“å­˜ */[m
[32m+[m[32mfunction handleClearCacheKey(cacheKey) {[m
[32m+[m[32m  clearCacheKey(cacheKey).then(response => {[m
[32m+[m[32m    proxy.$modal.msgSuccess("æ¸…ç†ç¼“å­˜é”®å[" + cacheKey + "]æˆåŠŸ");[m
[32m+[m[32m    getCacheKeys();[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** åˆ—è¡¨å‰ç¼€å»é™¤ */[m
[32m+[m[32mfunction nameFormatter(row) {[m
[32m+[m[32m  return row.cacheName.replace(":", "");[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** é”®åå‰ç¼€å»é™¤ */[m
[32m+[m[32mfunction keyFormatter(cacheKey) {[m
[32m+[m[32m  return cacheKey.replace(nowCacheName.value, "");[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** æŸ¥è¯¢ç¼“å­˜å†…å®¹è¯¦ç»† */[m
[32m+[m[32mfunction handleCacheValue(cacheKey) {[m
[32m+[m[32m  getCacheValue(nowCacheName.value, cacheKey).then(response => {[m
[32m+[m[32m    cacheForm.value = response.data;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** æ¸…ç†å…¨éƒ¨ç¼“å­˜ */[m
[32m+[m[32mfunction handleClearCacheAll() {[m
[32m+[m[32m  clearCacheAll().then(response => {[m
[32m+[m[32m    proxy.$modal.msgSuccess("æ¸…ç†å…¨éƒ¨ç¼“å­˜æˆåŠŸ");[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mgetCacheNames();[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/monitor/druid/index.vue b/src/views/monitor/druid/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..13736ec1[m
[1m--- /dev/null[m
[1m+++ b/src/views/monitor/druid/index.vue[m
[36m@@ -0,0 +1,13 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m   <div>[m
[32m+[m[32m      <i-frame v-model:src="url"></i-frame>[m
[32m+[m[32m   </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport iFrame from '@/components/iFrame'[m
[32m+[m
[32m+[m[32mimport { ref } from 'vue';[m
[32m+[m
[32m+[m[32mconst url = ref(import.meta.env.VITE_APP_BASE_API + '/druid/login.html');[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/monitor/job/index.vue b/src/views/monitor/job/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..071626ad[m
[1m--- /dev/null[m
[1m+++ b/src/views/monitor/job/index.vue[m
[36m@@ -0,0 +1,483 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m   <div class="app-container">[m
[32m+[m[32m      <el-form :model="queryParams" ref="queryRef" :inline="true" v-show="showSearch">[m
[32m+[m[32m         <el-form-item label="ä»»åŠ¡åç§°" prop="jobName">[m
[32m+[m[32m            <el-input[m
[32m+[m[32m               v-model="queryParams.jobName"[m
[32m+[m[32m               placeholder="è¯·è¾“å…¥ä»»åŠ¡åç§°"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 200px"[m
[32m+[m[32m               @keyup.enter="handleQuery"[m
[32m+[m[32m            />[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="ä»»åŠ¡ç»„å" prop="jobGroup">[m
[32m+[m[32m            <el-select v-model="queryParams.jobGroup" placeholder="è¯·é€‰æ‹©ä»»åŠ¡ç»„å" clearable style="width: 200px">[m
[32m+[m[32m               <el-option[m
[32m+[m[32m                  v-for="dict in sys_job_group"[m
[32m+[m[32m                  :key="dict.value"[m
[32m+[m[32m                  :label="dict.label"[m
[32m+[m[32m                  :value="dict.value"[m
[32m+[m[32m               />[m
[32m+[m[32m            </el-select>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="ä»»åŠ¡çŠ¶æ€" prop="status">[m
[32m+[m[32m            <el-select v-model="queryParams.status" placeholder="è¯·é€‰æ‹©ä»»åŠ¡çŠ¶æ€" clearable style="width: 200px">[m
[32m+[m[32m               <el-option[m
[32m+[m[32m                  v-for="dict in sys_job_status"[m
[32m+[m[32m                  :key="dict.value"[m
[32m+[m[32m                  :label="dict.label"[m
[32m+[m[32m                  :value="dict.value"[m
[32m+[m[32m               />[m
[32m+[m[32m            </el-select>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item>[m
[32m+[m[32m            <el-button type="primary" icon="Search" @click="handleQuery">æœç´¢</el-button>[m
[32m+[m[32m            <el-button icon="Refresh" @click="resetQuery">é‡ç½®</el-button>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m      </el-form>[m
[32m+[m
[32m+[m[32m      <el-row :gutter="10" class="mb8">[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="primary"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Plus"[m
[32m+[m[32m               @click="handleAdd"[m
[32m+[m[32m               v-hasPermi="['monitor:job:add']"[m
[32m+[m[32m            >æ–°å¢</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="success"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Edit"[m
[32m+[m[32m               :disabled="single"[m
[32m+[m[32m               @click="handleUpdate"[m
[32m+[m[32m               v-hasPermi="['monitor:job:edit']"[m
[32m+[m[32m            >ä¿®æ”¹</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="danger"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Delete"[m
[32m+[m[32m               :disabled="multiple"[m
[32m+[m[32m               @click="handleDelete"[m
[32m+[m[32m               v-hasPermi="['monitor:job:remove']"[m
[32m+[m[32m            >åˆ é™¤</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="warning"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Download"[m
[32m+[m[32m               @click="handleExport"[m
[32m+[m[32m               v-hasPermi="['monitor:job:export']"[m
[32m+[m[32m            >å¯¼å‡º</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="info"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Operation"[m
[32m+[m[32m               @click="handleJobLog"[m
[32m+[m[32m               v-hasPermi="['monitor:job:query']"[m
[32m+[m[32m            >æ—¥å¿—</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <right-toolbar v-model:showSearch="showSearch" @queryTable="getList"></right-toolbar>[m
[32m+[m[32m      </el-row>[m
[32m+[m
[32m+[m[32m      <el-table v-loading="loading" :data="jobList" @selection-change="handleSelectionChange">[m
[32m+[m[32m         <el-table-column type="selection" width="55" align="center" />[m
[32m+[m[32m         <el-table-column label="ä»»åŠ¡ç¼–å·" width="100" align="center" prop="jobId" />[m
[32m+[m[32m         <el-table-column label="ä»»åŠ¡åç§°" align="center" prop="jobName" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="ä»»åŠ¡ç»„å" align="center" prop="jobGroup">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <dict-tag :options="sys_job_group" :value="scope.row.jobGroup" />[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="è°ƒç”¨ç›®æ ‡å­—ç¬¦ä¸²" align="center" prop="invokeTarget" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="cronæ‰§è¡Œè¡¨è¾¾å¼" align="center" prop="cronExpression" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="çŠ¶æ€" align="center">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <el-switch[m
[32m+[m[32m                  v-model="scope.row.status"[m
[32m+[m[32m                  active-value="0"[m
[32m+[m[32m                  inactive-value="1"[m
[32m+[m[32m                  @change="handleStatusChange(scope.row)"[m
[32m+[m[32m               ></el-switch>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="æ“ä½œ" align="center" width="200" class-name="small-padding fixed-width">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <el-tooltip content="ä¿®æ”¹" placement="top">[m
[32m+[m[32m                  <el-button link type="primary" icon="Edit" @click="handleUpdate(scope.row)" v-hasPermi="['monitor:job:edit']"></el-button>[m
[32m+[m[32m               </el-tooltip>[m
[32m+[m[32m               <el-tooltip content="åˆ é™¤" placement="top">[m
[32m+[m[32m                  <el-button link type="primary" icon="Delete" @click="handleDelete(scope.row)" v-hasPermi="['monitor:job:remove']"></el-button>[m
[32m+[m[32m               </el-tooltip>[m
[32m+[m[32m               <el-tooltip content="æ‰§è¡Œä¸€æ¬¡" placement="top">[m
[32m+[m[32m                  <el-button link type="primary" icon="CaretRight" @click="handleRun(scope.row)" v-hasPermi="['monitor:job:changeStatus']"></el-button>[m
[32m+[m[32m               </el-tooltip>[m
[32m+[m[32m               <el-tooltip content="ä»»åŠ¡è¯¦ç»†" placement="top">[m
[32m+[m[32m                  <el-button link type="primary" icon="View" @click="handleView(scope.row)" v-hasPermi="['monitor:job:query']"></el-button>[m
[32m+[m[32m               </el-tooltip>[m
[32m+[m[32m               <el-tooltip content="è°ƒåº¦æ—¥å¿—" placement="top">[m
[32m+[m[32m                  <el-button link type="primary" icon="Operation" @click="handleJobLog(scope.row)" v-hasPermi="['monitor:job:query']"></el-button>[m
[32m+[m[32m               </el-tooltip>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m      </el-table>[m
[32m+[m
[32m+[m[32m      <pagination[m
[32m+[m[32m         v-show="total > 0"[m
[32m+[m[32m         :total="total"[m
[32m+[m[32m         v-model:page="queryParams.pageNum"[m
[32m+[m[32m         v-model:limit="queryParams.pageSize"[m
[32m+[m[32m         @pagination="getList"[m
[32m+[m[32m      />[m
[32m+[m
[32m+[m[32m      <!-- æ·»åŠ æˆ–ä¿®æ”¹å®šæ—¶ä»»åŠ¡å¯¹è¯æ¡† -->[m
[32m+[m[32m      <el-dialog :title="title" v-model="open" width="820px" append-to-body>[m
[32m+[m[32m         <el-form ref="jobRef" :model="form" :rules="rules" label-width="120px">[m
[32m+[m[32m            <el-row>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="ä»»åŠ¡åç§°" prop="jobName">[m
[32m+[m[32m                     <el-input v-model="form.jobName" placeholder="è¯·è¾“å…¥ä»»åŠ¡åç§°" />[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="ä»»åŠ¡åˆ†ç»„" prop="jobGroup">[m
[32m+[m[32m                     <el-select v-model="form.jobGroup" placeholder="è¯·é€‰æ‹©">[m
[32m+[m[32m                        <el-option[m
[32m+[m[32m                           v-for="dict in sys_job_group"[m
[32m+[m[32m                           :key="dict.value"[m
[32m+[m[32m                           :label="dict.label"[m
[32m+[m[32m                           :value="dict.value"[m
[32m+[m[32m                        ></el-option>[m
[32m+[m[32m                     </el-select>[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="24">[m
[32m+[m[32m                  <el-form-item prop="invokeTarget">[m
[32m+[m[32m                     <template #label>[m
[32m+[m[32m                        <span>[m
[32m+[m[32m                           è°ƒç”¨æ–¹æ³•[m
[32m+[m[32m                           <el-tooltip placement="top">[m
[32m+[m[32m                              <template #content>[m
[32m+[m[32m                                 <div>[m
[32m+[m[32m                                    Beanè°ƒç”¨ç¤ºä¾‹ï¼šryTask.ryParams('ry')[m
[32m+[m[32m                                    <br />Classç±»è°ƒç”¨ç¤ºä¾‹ï¼šcom.ruoyi.quartz.task.RyTask.ryParams('ry')[m
[32m+[m[32m                                    <br />å‚æ•°è¯´æ˜ï¼šæ”¯æŒå­—ç¬¦ä¸²ï¼Œå¸ƒå°”ç±»å‹ï¼Œé•¿æ•´å‹ï¼Œæµ®ç‚¹å‹ï¼Œæ•´å‹[m
[32m+[m[32m                                 </div>[m
[32m+[m[32m                              </template>[m
[32m+[m[32m                              <el-icon><question-filled /></el-icon>[m
[32m+[m[32m                           </el-tooltip>[m
[32m+[m[32m                        </span>[m
[32m+[m[32m                     </template>[m
[32m+[m[32m                     <el-input v-model="form.invokeTarget" placeholder="è¯·è¾“å…¥è°ƒç”¨ç›®æ ‡å­—ç¬¦ä¸²" />[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="24">[m
[32m+[m[32m                  <el-form-item label="cronè¡¨è¾¾å¼" prop="cronExpression">[m
[32m+[m[32m                     <el-input v-model="form.cronExpression" placeholder="è¯·è¾“å…¥cronæ‰§è¡Œè¡¨è¾¾å¼">[m
[32m+[m[32m                        <template #append>[m
[32m+[m[32m                           <el-button type="primary" @click="handleShowCron">[m
[32m+[m[32m                              ç”Ÿæˆè¡¨è¾¾å¼[m
[32m+[m[32m                              <i class="el-icon-time el-icon--right"></i>[m
[32m+[m[32m                           </el-button>[m
[32m+[m[32m                        </template>[m
[32m+[m[32m                     </el-input>[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="24" v-if="form.jobId !== undefined">[m
[32m+[m[32m                  <el-form-item label="çŠ¶æ€">[m
[32m+[m[32m                     <el-radio-group v-model="form.status">[m
[32m+[m[32m                        <el-radio[m
[32m+[m[32m                           v-for="dict in sys_job_status"[m
[32m+[m[32m                           :key="dict.value"[m
[32m+[m[32m                           :label="dict.value"[m
[32m+[m[32m                        >{{ dict.label }}</el-radio>[m
[32m+[m[32m                     </el-radio-group>[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="æ‰§è¡Œç­–ç•¥" prop="misfirePolicy">[m
[32m+[m[32m                     <el-radio-group v-model="form.misfirePolicy">[m
[32m+[m[32m                        <el-radio-button label="1">ç«‹å³æ‰§è¡Œ</el-radio-button>[m
[32m+[m[32m                        <el-radio-button label="2">æ‰§è¡Œä¸€æ¬¡</el-radio-button>[m
[32m+[m[32m                        <el-radio-button label="3">æ”¾å¼ƒæ‰§è¡Œ</el-radio-button>[m
[32m+[m[32m                     </el-radio-group>[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="æ˜¯å¦å¹¶å‘" prop="concurrent">[m
[32m+[m[32m                     <el-radio-group v-model="form.concurrent">[m
[32m+[m[32m                        <el-radio-button label="0">å…è®¸</el-radio-button>[m
[32m+[m[32m                        <el-radio-button label="1">ç¦æ­¢</el-radio-button>[m
[32m+[m[32m                     </el-radio-group>[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m            </el-row>[m
[32m+[m[32m         </el-form>[m
[32m+[m[32m         <template #footer>[m
[32m+[m[32m            <div class="dialog-footer">[m
[32m+[m[32m               <el-button type="primary" @click="submitForm">ç¡® å®š</el-button>[m
[32m+[m[32m               <el-button @click="cancel">å– æ¶ˆ</el-button>[m
[32m+[m[32m            </div>[m
[32m+[m[32m         </template>[m
[32m+[m[32m      </el-dialog>[m
[32m+[m
[32m+[m[32m     <el-dialog title="Cronè¡¨è¾¾å¼ç”Ÿæˆå™¨" v-model="openCron" append-to-body destroy-on-close>[m
[32m+[m[32m       <crontab ref="crontabRef" @hide="openCron=false" @fill="crontabFill" :expression="expression"></crontab>[m
[32m+[m[32m     </el-dialog>[m
[32m+[m
[32m+[m[32m      <!-- ä»»åŠ¡æ—¥å¿—è¯¦ç»† -->[m
[32m+[m[32m      <el-dialog title="ä»»åŠ¡è¯¦ç»†" v-model="openView" width="700px" append-to-body>[m
[32m+[m[32m         <el-form :model="form" label-width="120px">[m
[32m+[m[32m            <el-row>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="ä»»åŠ¡ç¼–å·ï¼š">{{ form.jobId }}</el-form-item>[m
[32m+[m[32m                  <el-form-item label="ä»»åŠ¡åç§°ï¼š">{{ form.jobName }}</el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="ä»»åŠ¡åˆ†ç»„ï¼š">{{ jobGroupFormat(form) }}</el-form-item>[m
[32m+[m[32m                  <el-form-item label="åˆ›å»ºæ—¶é—´ï¼š">{{ form.createTime }}</el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="cronè¡¨è¾¾å¼ï¼š">{{ form.cronExpression }}</el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="ä¸‹æ¬¡æ‰§è¡Œæ—¶é—´ï¼š">{{ parseTime(form.nextValidTime) }}</el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="24">[m
[32m+[m[32m                  <el-form-item label="è°ƒç”¨ç›®æ ‡æ–¹æ³•ï¼š">{{ form.invokeTarget }}</el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="ä»»åŠ¡çŠ¶æ€ï¼š">[m
[32m+[m[32m                     <div v-if="form.status == 0">æ­£å¸¸</div>[m
[32m+[m[32m                     <div v-else-if="form.status == 1">æš‚åœ</div>[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="æ˜¯å¦å¹¶å‘ï¼š">[m
[32m+[m[32m                     <div v-if="form.concurrent == 0">å…è®¸</div>[m
[32m+[m[32m                     <div v-else-if="form.concurrent == 1">ç¦æ­¢</div>[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="æ‰§è¡Œç­–ç•¥ï¼š">[m
[32m+[m[32m                     <div v-if="form.misfirePolicy == 0">é»˜è®¤ç­–ç•¥</div>[m
[32m+[m[32m                     <div v-else-if="form.misfirePolicy == 1">ç«‹å³æ‰§è¡Œ</div>[m
[32m+[m[32m                     <div v-else-if="form.misfirePolicy == 2">æ‰§è¡Œä¸€æ¬¡</div>[m
[32m+[m[32m                     <div v-else-if="form.misfirePolicy == 3">æ”¾å¼ƒæ‰§è¡Œ</div>[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m            </el-row>[m
[32m+[m[32m         </el-form>[m
[32m+[m[32m         <template #footer>[m
[32m+[m[32m            <div class="dialog-footer">[m
[32m+[m[32m               <el-button @click="openView = false">å…³ é—­</el-button>[m
[32m+[m[32m            </div>[m
[32m+[m[32m         </template>[m
[32m+[m[32m      </el-dialog>[m
[32m+[m[32m   </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup name="Job">[m
[32m+[m[32mimport { listJob, getJob, delJob, addJob, updateJob, runJob, changeJobStatus } from "@/api/monitor/job";[m
[32m+[m[32mimport Crontab from '@/components/Crontab'[m
[32m+[m[32mconst router = useRouter();[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m[32mconst { sys_job_group, sys_job_status } = proxy.useDict("sys_job_group", "sys_job_status");[m
[32m+[m
[32m+[m[32mconst jobList = ref([]);[m
[32m+[m[32mconst open = ref(false);[m
[32m+[m[32mconst loading = ref(true);[m
[32m+[m[32mconst showSearch = ref(true);[m
[32m+[m[32mconst ids = ref([]);[m
[32m+[m[32mconst single = ref(true);[m
[32m+[m[32mconst multiple = ref(true);[m
[32m+[m[32mconst total = ref(0);[m
[32m+[m[32mconst title = ref("");[m
[32m+[m[32mconst openView = ref(false);[m
[32m+[m[32mconst openCron = ref(false);[m
[32m+[m[32mconst expression = ref("");[m
[32m+[m
[32m+[m[32mconst data = reactive({[m
[32m+[m[32m  form: {},[m
[32m+[m[32m  queryParams: {[m
[32m+[m[32m    pageNum: 1,[m
[32m+[m[32m    pageSize: 10,[m
[32m+[m[32m    jobName: undefined,[m
[32m+[m[32m    jobGroup: undefined,[m
[32m+[m[32m    status: undefined[m
[32m+[m[32m  },[m
[32m+[m[32m  rules: {[m
[32m+[m[32m    jobName: [{ required: true, message: "ä»»åŠ¡åç§°ä¸èƒ½ä¸ºç©º", trigger: "blur" }],[m
[32m+[m[32m    invokeTarget: [{ required: true, message: "è°ƒç”¨ç›®æ ‡å­—ç¬¦ä¸²ä¸èƒ½ä¸ºç©º", trigger: "blur" }],[m
[32m+[m[32m    cronExpression: [{ required: true, message: "cronæ‰§è¡Œè¡¨è¾¾å¼ä¸èƒ½ä¸ºç©º", trigger: "change" }][m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst { queryParams, form, rules } = toRefs(data);[m
[32m+[m
[32m+[m[32m/** æŸ¥è¯¢å®šæ—¶ä»»åŠ¡åˆ—è¡¨ */[m
[32m+[m[32mfunction getList() {[m
[32m+[m[32m  loading.value = true;[m
[32m+[m[32m  listJob(queryParams.value).then(response => {[m
[32m+[m[32m    jobList.value = response.rows;[m
[32m+[m[32m    total.value = response.total;[m
[32m+[m[32m    loading.value = false;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** ä»»åŠ¡ç»„åå­—å…¸ç¿»è¯‘ */[m
[32m+[m[32mfunction jobGroupFormat(row, column) {[m
[32m+[m[32m  return proxy.selectDictLabel(sys_job_group.value, row.jobGroup);[m
[32m+[m[32m}[m
[32m+[m[32m/** å–æ¶ˆæŒ‰é’® */[m
[32m+[m[32mfunction cancel() {[m
[32m+[m[32m  open.value = false;[m
[32m+[m[32m  reset();[m
[32m+[m[32m}[m
[32m+[m[32m/** è¡¨å•é‡ç½® */[m
[32m+[m[32mfunction reset() {[m
[32m+[m[32m  form.value = {[m
[32m+[m[32m    jobId: undefined,[m
[32m+[m[32m    jobName: undefined,[m
[32m+[m[32m    jobGroup: undefined,[m
[32m+[m[32m    invokeTarget: undefined,[m
[32m+[m[32m    cronExpression: undefined,[m
[32m+[m[32m    misfirePolicy: 1,[m
[32m+[m[32m    concurrent: 1,[m
[32m+[m[32m    status: "0"[m
[32m+[m[32m  };[m
[32m+[m[32m  proxy.resetForm("jobRef");[m
[32m+[m[32m}[m
[32m+[m[32m/** æœç´¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleQuery() {[m
[32m+[m[32m  queryParams.value.pageNum = 1;[m
[32m+[m[32m  getList();[m
[32m+[m[32m}[m
[32m+[m[32m/** é‡ç½®æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction resetQuery() {[m
[32m+[m[32m  proxy.resetForm("queryRef");[m
[32m+[m[32m  handleQuery();[m
[32m+[m[32m}[m
[32m+[m[32m// å¤šé€‰æ¡†é€‰ä¸­æ•°æ®[m
[32m+[m[32mfunction handleSelectionChange(selection) {[m
[32m+[m[32m  ids.value = selection.map(item => item.jobId);[m
[32m+[m[32m  single.value = selection.length != 1;[m
[32m+[m[32m  multiple.value = !selection.length;[m
[32m+[m[32m}[m
[32m+[m[32m// æ›´å¤šæ“ä½œè§¦å‘[m
[32m+[m[32mfunction handleCommand(command, row) {[m
[32m+[m[32m  switch (command) {[m
[32m+[m[32m    case "handleRun":[m
[32m+[m[32m      handleRun(row);[m
[32m+[m[32m      break;[m
[32m+[m[32m    case "handleView":[m
[32m+[m[32m      handleView(row);[m
[32m+[m[32m      break;[m
[32m+[m[32m    case "handleJobLog":[m
[32m+[m[32m      handleJobLog(row);[m
[32m+[m[32m      break;[m
[32m+[m[32m    default:[m
[32m+[m[32m      break;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m// ä»»åŠ¡çŠ¶æ€ä¿®æ”¹[m
[32m+[m[32mfunction handleStatusChange(row) {[m
[32m+[m[32m  let text = row.status === "0" ? "å¯ç”¨" : "åœç”¨";[m
[32m+[m[32m  proxy.$modal.confirm('ç¡®è®¤è¦"' + text + '""' + row.jobName + '"ä»»åŠ¡å—?').then(function () {[m
[32m+[m[32m    return changeJobStatus(row.jobId, row.status);[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    proxy.$modal.msgSuccess(text + "æˆåŠŸ");[m
[32m+[m[32m  }).catch(function () {[m
[32m+[m[32m    row.status = row.status === "0" ? "1" : "0";[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/* ç«‹å³æ‰§è¡Œä¸€æ¬¡ */[m
[32m+[m[32mfunction handleRun(row) {[m
[32m+[m[32m  proxy.$modal.confirm('ç¡®è®¤è¦ç«‹å³æ‰§è¡Œä¸€æ¬¡"' + row.jobName + '"ä»»åŠ¡å—?').then(function () {[m
[32m+[m[32m    return runJob(row.jobId, row.jobGroup);[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    proxy.$modal.msgSuccess("æ‰§è¡ŒæˆåŠŸ");})[m
[32m+[m[32m  .catch(() => {});[m
[32m+[m[32m}[m
[32m+[m[32m/** ä»»åŠ¡è¯¦ç»†ä¿¡æ¯ */[m
[32m+[m[32mfunction handleView(row) {[m
[32m+[m[32m  getJob(row.jobId).then(response => {[m
[32m+[m[32m    form.value = response.data;[m
[32m+[m[32m    openView.value = true;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** cronè¡¨è¾¾å¼æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleShowCron() {[m
[32m+[m[32m  expression.value = form.value.cronExpression;[m
[32m+[m[32m  openCron.value = true;[m
[32m+[m[32m}[m
[32m+[m[32m/** ç¡®å®šåå›ä¼ å€¼ */[m
[32m+[m[32mfunction crontabFill(value) {[m
[32m+[m[32m  form.value.cronExpression = value;[m
[32m+[m[32m}[m
[32m+[m[32m/** ä»»åŠ¡æ—¥å¿—åˆ—è¡¨æŸ¥è¯¢ */[m
[32m+[m[32mfunction handleJobLog(row) {[m
[32m+[m[32m  const jobId = row.jobId || 0;[m
[32m+[m[32m  router.push('/monitor/job-log/index/' + jobId)[m
[32m+[m[32m}[m
[32m+[m[32m/** æ–°å¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleAdd() {[m
[32m+[m[32m  reset();[m
[32m+[m[32m  open.value = true;[m
[32m+[m[32m  title.value = "æ·»åŠ ä»»åŠ¡";[m
[32m+[m[32m}[m
[32m+[m[32m/** ä¿®æ”¹æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleUpdate(row) {[m
[32m+[m[32m  reset();[m
[32m+[m[32m  const jobId = row.jobId || ids.value;[m
[32m+[m[32m  getJob(jobId).then(response => {[m
[32m+[m[32m    form.value = response.data;[m
[32m+[m[32m    open.value = true;[m
[32m+[m[32m    title.value = "ä¿®æ”¹ä»»åŠ¡";[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** æäº¤æŒ‰é’® */[m
[32m+[m[32mfunction submitForm() {[m
[32m+[m[32m  proxy.$refs["jobRef"].validate(valid => {[m
[32m+[m[32m    if (valid) {[m
[32m+[m[32m      if (form.value.jobId != undefined) {[m
[32m+[m[32m        updateJob(form.value).then(response => {[m
[32m+[m[32m          proxy.$modal.msgSuccess("ä¿®æ”¹æˆåŠŸ");[m
[32m+[m[32m          open.value = false;[m
[32m+[m[32m          getList();[m
[32m+[m[32m        });[m
[32m+[m[32m      } else {[m
[32m+[m[32m        addJob(form.value).then(response => {[m
[32m+[m[32m          proxy.$modal.msgSuccess("æ–°å¢æˆåŠŸ");[m
[32m+[m[32m          open.value = false;[m
[32m+[m[32m          getList();[m
[32m+[m[32m        });[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** åˆ é™¤æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleDelete(row) {[m
[32m+[m[32m  const jobIds = row.jobId || ids.value;[m
[32m+[m[32m  proxy.$modal.confirm('æ˜¯å¦ç¡®è®¤åˆ é™¤å®šæ—¶ä»»åŠ¡ç¼–å·ä¸º"' + jobIds + '"çš„æ•°æ®é¡¹?').then(function () {[m
[32m+[m[32m    return delJob(jobIds);[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    getList();[m
[32m+[m[32m    proxy.$modal.msgSuccess("åˆ é™¤æˆåŠŸ");[m
[32m+[m[32m  }).catch(() => {});[m
[32m+[m[32m}[m
[32m+[m[32m/** å¯¼å‡ºæŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleExport() {[m
[32m+[m[32m  proxy.download("monitor/job/export", {[m
[32m+[m[32m    ...queryParams.value,[m
[32m+[m[32m  }, `job_${new Date().getTime()}.xlsx`);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mgetList();[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/monitor/job/log.vue b/src/views/monitor/job/log.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..48f36267[m
[1m--- /dev/null[m
[1m+++ b/src/views/monitor/job/log.vue[m
[36m@@ -0,0 +1,277 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m   <div class="app-container">[m
[32m+[m[32m      <el-form :model="queryParams" ref="queryRef" :inline="true" v-show="showSearch" label-width="68px">[m
[32m+[m[32m         <el-form-item label="ä»»åŠ¡åç§°" prop="jobName">[m
[32m+[m[32m            <el-input[m
[32m+[m[32m               v-model="queryParams.jobName"[m
[32m+[m[32m               placeholder="è¯·è¾“å…¥ä»»åŠ¡åç§°"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 240px"[m
[32m+[m[32m               @keyup.enter="handleQuery"[m
[32m+[m[32m            />[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="ä»»åŠ¡ç»„å" prop="jobGroup">[m
[32m+[m[32m            <el-select[m
[32m+[m[32m               v-model="queryParams.jobGroup"[m
[32m+[m[32m               placeholder="è¯·é€‰æ‹©ä»»åŠ¡ç»„å"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 240px"[m
[32m+[m[32m            >[m
[32m+[m[32m               <el-option[m
[32m+[m[32m                  v-for="dict in sys_job_group"[m
[32m+[m[32m                  :key="dict.value"[m
[32m+[m[32m                  :label="dict.label"[m
[32m+[m[32m                  :value="dict.value"[m
[32m+[m[32m               />[m
[32m+[m[32m            </el-select>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="æ‰§è¡ŒçŠ¶æ€" prop="status">[m
[32m+[m[32m            <el-select[m
[32m+[m[32m               v-model="queryParams.status"[m
[32m+[m[32m               placeholder="è¯·é€‰æ‹©æ‰§è¡ŒçŠ¶æ€"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 240px"[m
[32m+[m[32m            >[m
[32m+[m[32m               <el-option[m
[32m+[m[32m                  v-for="dict in sys_common_status"[m
[32m+[m[32m                  :key="dict.value"[m
[32m+[m[32m                  :label="dict.label"[m
[32m+[m[32m                  :value="dict.value"[m
[32m+[m[32m               />[m
[32m+[m[32m            </el-select>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="æ‰§è¡Œæ—¶é—´" style="width: 308px">[m
[32m+[m[32m            <el-date-picker[m
[32m+[m[32m               v-model="dateRange"[m
[32m+[m[32m               value-format="YYYY-MM-DD"[m
[32m+[m[32m               type="daterange"[m
[32m+[m[32m               range-separator="-"[m
[32m+[m[32m               start-placeholder="å¼€å§‹æ—¥æœŸ"[m
[32m+[m[32m               end-placeholder="ç»“æŸæ—¥æœŸ"[m
[32m+[m[32m            ></el-date-picker>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item>[m
[32m+[m[32m            <el-button type="primary" icon="Search" @click="handleQuery">æœç´¢</el-button>[m
[32m+[m[32m            <el-button icon="Refresh" @click="resetQuery">é‡ç½®</el-button>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m      </el-form>[m
[32m+[m
[32m+[m[32m      <el-row :gutter="10" class="mb8">[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="danger"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Delete"[m
[32m+[m[32m               :disabled="multiple"[m
[32m+[m[32m               @click="handleDelete"[m
[32m+[m[32m               v-hasPermi="['monitor:job:remove']"[m
[32m+[m[32m            >åˆ é™¤</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="danger"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Delete"[m
[32m+[m[32m               @click="handleClean"[m
[32m+[m[32m               v-hasPermi="['monitor:job:remove']"[m
[32m+[m[32m            >æ¸…ç©º</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="warning"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Download"[m
[32m+[m[32m               @click="handleExport"[m
[32m+[m[32m               v-hasPermi="['monitor:job:export']"[m
[32m+[m[32m            >å¯¼å‡º</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m[41m [m
[32m+[m[32m               type="warning"[m[41m [m
[32m+[m[32m               plain[m[41m [m
[32m+[m[32m               icon="Close"[m
[32m+[m[32m               @click="handleClose"[m
[32m+[m[32m            >å…³é—­</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <right-toolbar v-model:showSearch="showSearch" @queryTable="getList"></right-toolbar>[m
[32m+[m[32m      </el-row>[m
[32m+[m
[32m+[m[32m      <el-table v-loading="loading" :data="jobLogList" @selection-change="handleSelectionChange">[m
[32m+[m[32m         <el-table-column type="selection" width="55" align="center" />[m
[32m+[m[32m         <el-table-column label="æ—¥å¿—ç¼–å·" width="80" align="center" prop="jobLogId" />[m
[32m+[m[32m         <el-table-column label="ä»»åŠ¡åç§°" align="center" prop="jobName" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="ä»»åŠ¡ç»„å" align="center" prop="jobGroup" :show-overflow-tooltip="true">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <dict-tag :options="sys_job_group" :value="scope.row.jobGroup" />[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="è°ƒç”¨ç›®æ ‡å­—ç¬¦ä¸²" align="center" prop="invokeTarget" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="æ—¥å¿—ä¿¡æ¯" align="center" prop="jobMessage" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="æ‰§è¡ŒçŠ¶æ€" align="center" prop="status">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <dict-tag :options="sys_common_status" :value="scope.row.status" />[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="æ‰§è¡Œæ—¶é—´" align="center" prop="createTime" width="180">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <span>{{ parseTime(scope.row.createTime) }}</span>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="æ“ä½œ" align="center" class-name="small-padding fixed-width">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <el-button link type="primary" icon="View" @click="handleView(scope.row)" v-hasPermi="['monitor:job:query']">è¯¦ç»†</el-button>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m      </el-table>[m
[32m+[m
[32m+[m[32m      <pagination[m
[32m+[m[32m         v-show="total > 0"[m
[32m+[m[32m         :total="total"[m
[32m+[m[32m         v-model:page="queryParams.pageNum"[m
[32m+[m[32m         v-model:limit="queryParams.pageSize"[m
[32m+[m[32m         @pagination="getList"[m
[32m+[m[32m      />[m
[32m+[m
[32m+[m[32m      <!-- è°ƒåº¦æ—¥å¿—è¯¦ç»† -->[m
[32m+[m[32m      <el-dialog title="è°ƒåº¦æ—¥å¿—è¯¦ç»†" v-model="open" width="700px" append-to-body>[m
[32m+[m[32m         <el-form :model="form" label-width="100px">[m
[32m+[m[32m            <el-row>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="æ—¥å¿—åºå·ï¼š">{{ form.jobLogId }}</el-form-item>[m
[32m+[m[32m                  <el-form-item label="ä»»åŠ¡åç§°ï¼š">{{ form.jobName }}</el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="ä»»åŠ¡åˆ†ç»„ï¼š">{{ form.jobGroup }}</el-form-item>[m
[32m+[m[32m                  <el-form-item label="æ‰§è¡Œæ—¶é—´ï¼š">{{ form.createTime }}</el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="24">[m
[32m+[m[32m                  <el-form-item label="è°ƒç”¨æ–¹æ³•ï¼š">{{ form.invokeTarget }}</el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="24">[m
[32m+[m[32m                  <el-form-item label="æ—¥å¿—ä¿¡æ¯ï¼š">{{ form.jobMessage }}</el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="24">[m
[32m+[m[32m                  <el-form-item label="æ‰§è¡ŒçŠ¶æ€ï¼š">[m
[32m+[m[32m                     <div v-if="form.status == 0">æ­£å¸¸</div>[m
[32m+[m[32m                     <div v-else-if="form.status == 1">å¤±è´¥</div>[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="24">[m
[32m+[m[32m                  <el-form-item label="å¼‚å¸¸ä¿¡æ¯ï¼š" v-if="form.status == 1">{{ form.exceptionInfo }}</el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m            </el-row>[m
[32m+[m[32m         </el-form>[m
[32m+[m[32m         <template #footer>[m
[32m+[m[32m            <div class="dialog-footer">[m
[32m+[m[32m               <el-button @click="open = false">å…³ é—­</el-button>[m
[32m+[m[32m            </div>[m
[32m+[m[32m         </template>[m
[32m+[m[32m      </el-dialog>[m
[32m+[m[32m   </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup name="JobLog">[m
[32m+[m[32mimport { getJob } from "@/api/monitor/job";[m
[32m+[m[32mimport { listJobLog, delJobLog, cleanJobLog } from "@/api/monitor/jobLog";[m
[32m+[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m[32mconst { sys_common_status, sys_job_group } = proxy.useDict("sys_common_status", "sys_job_group");[m
[32m+[m
[32m+[m[32mconst jobLogList = ref([]);[m
[32m+[m[32mconst open = ref(false);[m
[32m+[m[32mconst loading = ref(true);[m
[32m+[m[32mconst showSearch = ref(true);[m
[32m+[m[32mconst ids = ref([]);[m
[32m+[m[32mconst multiple = ref(true);[m
[32m+[m[32mconst total = ref(0);[m
[32m+[m[32mconst dateRange = ref([]);[m
[32m+[m[32mconst route = useRoute();[m
[32m+[m
[32m+[m[32mconst data = reactive({[m
[32m+[m[32m  form: {},[m
[32m+[m[32m  queryParams: {[m
[32m+[m[32m    pageNum: 1,[m
[32m+[m[32m    pageSize: 10,[m
[32m+[m[32m    dictName: undefined,[m
[32m+[m[32m    dictType: undefined,[m
[32m+[m[32m    status: undefined[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst { queryParams, form, rules } = toRefs(data);[m
[32m+[m
[32m+[m[32m/** æŸ¥è¯¢è°ƒåº¦æ—¥å¿—åˆ—è¡¨ */[m
[32m+[m[32mfunction getList() {[m
[32m+[m[32m  loading.value = true;[m
[32m+[m[32m  listJobLog(proxy.addDateRange(queryParams.value, dateRange.value)).then(response => {[m
[32m+[m[32m    jobLogList.value = response.rows;[m
[32m+[m[32m    total.value = response.total;[m
[32m+[m[32m    loading.value = false;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m// è¿”å›æŒ‰é’®[m
[32m+[m[32mfunction handleClose() {[m
[32m+[m[32m  const obj = { path: "/monitor/job" };[m
[32m+[m[32m  proxy.$tab.closeOpenPage(obj);[m
[32m+[m[32m}[m
[32m+[m[32m/** æœç´¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleQuery() {[m
[32m+[m[32m  queryParams.value.pageNum = 1;[m
[32m+[m[32m  getList();[m
[32m+[m[32m}[m
[32m+[m[32m/** é‡ç½®æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction resetQuery() {[m
[32m+[m[32m  dateRange.value = [];[m
[32m+[m[32m  proxy.resetForm("queryRef");[m
[32m+[m[32m  handleQuery();[m
[32m+[m[32m}[m
[32m+[m[32m// å¤šé€‰æ¡†é€‰ä¸­æ•°æ®[m
[32m+[m[32mfunction handleSelectionChange(selection) {[m
[32m+[m[32m  ids.value = selection.map(item => item.jobLogId);[m
[32m+[m[32m  multiple.value = !selection.length;[m
[32m+[m[32m}[m
[32m+[m[32m/** è¯¦ç»†æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleView(row) {[m
[32m+[m[32m  open.value = true;[m
[32m+[m[32m  form.value = row;[m
[32m+[m[32m}[m
[32m+[m[32m/** åˆ é™¤æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleDelete(row) {[m
[32m+[m[32m  proxy.$modal.confirm('æ˜¯å¦ç¡®è®¤åˆ é™¤è°ƒåº¦æ—¥å¿—ç¼–å·ä¸º"' + ids.value + '"çš„æ•°æ®é¡¹?').then(function () {[m
[32m+[m[32m    return delJobLog(ids.value);[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    getList();[m
[32m+[m[32m    proxy.$modal.msgSuccess("åˆ é™¤æˆåŠŸ");[m
[32m+[m[32m  }).catch(() => {});[m
[32m+[m[32m}[m
[32m+[m[32m/** æ¸…ç©ºæŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleClean() {[m
[32m+[m[32m  proxy.$modal.confirm("æ˜¯å¦ç¡®è®¤æ¸…ç©ºæ‰€æœ‰è°ƒåº¦æ—¥å¿—æ•°æ®é¡¹?").then(function () {[m
[32m+[m[32m    return cleanJobLog();[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    getList();[m
[32m+[m[32m    proxy.$modal.msgSuccess("æ¸…ç©ºæˆåŠŸ");[m
[32m+[m[32m  }).catch(() => {});[m
[32m+[m[32m}[m
[32m+[m[32m/** å¯¼å‡ºæŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleExport() {[m
[32m+[m[32m  proxy.download("monitor/jobLog/export", {[m
[32m+[m[32m    ...queryParams.value,[m
[32m+[m[32m  }, `job_log_${new Date().getTime()}.xlsx`);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m(() => {[m
[32m+[m[32m  const jobId = route.params && route.params.jobId;[m
[32m+[m[32m  if (jobId !== undefined && jobId != 0) {[m
[32m+[m[32m    getJob(jobId).then(response => {[m
[32m+[m[32m      queryParams.value.jobName = response.data.jobName;[m
[32m+[m[32m      queryParams.value.jobGroup = response.data.jobGroup;[m
[32m+[m[32m      getList();[m
[32m+[m[32m    });[m
[32m+[m[32m  } else {[m
[32m+[m[32m    getList();[m
[32m+[m[32m  }[m
[32m+[m[32m})();[m
[32m+[m
[32m+[m[32mgetList();[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/monitor/logininfor/index.vue b/src/views/monitor/logininfor/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..bd58a5db[m
[1m--- /dev/null[m
[1m+++ b/src/views/monitor/logininfor/index.vue[m
[36m@@ -0,0 +1,225 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m   <div class="app-container">[m
[32m+[m[32m      <el-form :model="queryParams" ref="queryRef" :inline="true" v-show="showSearch" label-width="68px">[m
[32m+[m[32m         <el-form-item label="ç™»å½•åœ°å€" prop="ipaddr">[m
[32m+[m[32m            <el-input[m
[32m+[m[32m               v-model="queryParams.ipaddr"[m
[32m+[m[32m               placeholder="è¯·è¾“å…¥ç™»å½•åœ°å€"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 240px;"[m
[32m+[m[32m               @keyup.enter="handleQuery"[m
[32m+[m[32m            />[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="ç”¨æˆ·åç§°" prop="userName">[m
[32m+[m[32m            <el-input[m
[32m+[m[32m               v-model="queryParams.userName"[m
[32m+[m[32m               placeholder="è¯·è¾“å…¥ç”¨æˆ·åç§°"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 240px;"[m
[32m+[m[32m               @keyup.enter="handleQuery"[m
[32m+[m[32m            />[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="çŠ¶æ€" prop="status">[m
[32m+[m[32m            <el-select[m
[32m+[m[32m               v-model="queryParams.status"[m
[32m+[m[32m               placeholder="ç™»å½•çŠ¶æ€"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 240px"[m
[32m+[m[32m            >[m
[32m+[m[32m               <el-option[m
[32m+[m[32m                  v-for="dict in sys_common_status"[m
[32m+[m[32m                  :key="dict.value"[m
[32m+[m[32m                  :label="dict.label"[m
[32m+[m[32m                  :value="dict.value"[m
[32m+[m[32m               />[m
[32m+[m[32m            </el-select>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="ç™»å½•æ—¶é—´" style="width: 308px">[m
[32m+[m[32m            <el-date-picker[m
[32m+[m[32m               v-model="dateRange"[m
[32m+[m[32m               value-format="YYYY-MM-DD HH:mm:ss"[m
[32m+[m[32m               type="daterange"[m
[32m+[m[32m               range-separator="-"[m
[32m+[m[32m               start-placeholder="å¼€å§‹æ—¥æœŸ"[m
[32m+[m[32m               end-placeholder="ç»“æŸæ—¥æœŸ"[m
[32m+[m[32m               :default-time="[new Date(2000, 1, 1, 0, 0, 0), new Date(2000, 1, 1, 23, 59, 59)]"[m
[32m+[m[32m            ></el-date-picker>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item>[m
[32m+[m[32m            <el-button type="primary" icon="Search" @click="handleQuery">æœç´¢</el-button>[m
[32m+[m[32m            <el-button icon="Refresh" @click="resetQuery">é‡ç½®</el-button>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m      </el-form>[m
[32m+[m
[32m+[m[32m      <el-row :gutter="10" class="mb8">[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="danger"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Delete"[m
[32m+[m[32m               :disabled="multiple"[m
[32m+[m[32m               @click="handleDelete"[m
[32m+[m[32m               v-hasPermi="['monitor:logininfor:remove']"[m
[32m+[m[32m            >åˆ é™¤</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="danger"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Delete"[m
[32m+[m[32m               @click="handleClean"[m
[32m+[m[32m               v-hasPermi="['monitor:logininfor:remove']"[m
[32m+[m[32m            >æ¸…ç©º</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="primary"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Unlock"[m
[32m+[m[32m               :disabled="single"[m
[32m+[m[32m               @click="handleUnlock"[m
[32m+[m[32m               v-hasPermi="['monitor:logininfor:unlock']"[m
[32m+[m[32m            >è§£é”</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="warning"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Download"[m
[32m+[m[32m               @click="handleExport"[m
[32m+[m[32m               v-hasPermi="['monitor:logininfor:export']"[m
[32m+[m[32m            >å¯¼å‡º</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <right-toolbar v-model:showSearch="showSearch" @queryTable="getList"></right-toolbar>[m
[32m+[m[32m      </el-row>[m
[32m+[m
[32m+[m[32m      <el-table ref="logininforRef" v-loading="loading" :data="logininforList" @selection-change="handleSelectionChange" :default-sort="defaultSort" @sort-change="handleSortChange">[m
[32m+[m[32m         <el-table-column type="selection" width="55" align="center" />[m
[32m+[m[32m         <el-table-column label="è®¿é—®ç¼–å·" align="center" prop="infoId" />[m
[32m+[m[32m         <el-table-column label="ç”¨æˆ·åç§°" align="center" prop="userName" :show-overflow-tooltip="true" sortable="custom" :sort-orders="['descending', 'ascending']" />[m
[32m+[m[32m         <el-table-column label="åœ°å€" align="center" prop="ipaddr" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="ç™»å½•åœ°ç‚¹" align="center" prop="loginLocation" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="æ“ä½œç³»ç»Ÿ" align="center" prop="os" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="æµè§ˆå™¨" align="center" prop="browser" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="ç™»å½•çŠ¶æ€" align="center" prop="status">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <dict-tag :options="sys_common_status" :value="scope.row.status" />[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="æè¿°" align="center" prop="msg" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="è®¿é—®æ—¶é—´" align="center" prop="loginTime" sortable="custom" :sort-orders="['descending', 'ascending']" width="180">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <span>{{ parseTime(scope.row.loginTime) }}</span>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m      </el-table>[m
[32m+[m
[32m+[m[32m      <pagination[m
[32m+[m[32m         v-show="total > 0"[m
[32m+[m[32m         :total="total"[m
[32m+[m[32m         v-model:page="queryParams.pageNum"[m
[32m+[m[32m         v-model:limit="queryParams.pageSize"[m
[32m+[m[32m         @pagination="getList"[m
[32m+[m[32m      />[m
[32m+[m[32m   </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup name="Logininfor">[m
[32m+[m[32mimport { list, delLogininfor, cleanLogininfor, unlockLogininfor } from "@/api/monitor/logininfor";[m
[32m+[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m[32mconst { sys_common_status } = proxy.useDict("sys_common_status");[m
[32m+[m
[32m+[m[32mconst logininforList = ref([]);[m
[32m+[m[32mconst loading = ref(true);[m
[32m+[m[32mconst showSearch = ref(true);[m
[32m+[m[32mconst ids = ref([]);[m
[32m+[m[32mconst single = ref(true);[m
[32m+[m[32mconst multiple = ref(true);[m
[32m+[m[32mconst selectName = ref("");[m
[32m+[m[32mconst total = ref(0);[m
[32m+[m[32mconst dateRange = ref([]);[m
[32m+[m[32mconst defaultSort = ref({ prop: "loginTime", order: "descending" });[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢å‚æ•°[m
[32m+[m[32mconst queryParams = ref({[m
[32m+[m[32m  pageNum: 1,[m
[32m+[m[32m  pageSize: 10,[m
[32m+[m[32m  ipaddr: undefined,[m
[32m+[m[32m  userName: undefined,[m
[32m+[m[32m  status: undefined,[m
[32m+[m[32m  orderByColumn: undefined,[m
[32m+[m[32m  isAsc: undefined[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m/** æŸ¥è¯¢ç™»å½•æ—¥å¿—åˆ—è¡¨ */[m
[32m+[m[32mfunction getList() {[m
[32m+[m[32m  loading.value = true;[m
[32m+[m[32m  list(proxy.addDateRange(queryParams.value, dateRange.value)).then(response => {[m
[32m+[m[32m    logininforList.value = response.rows;[m
[32m+[m[32m    total.value = response.total;[m
[32m+[m[32m    loading.value = false;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** æœç´¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleQuery() {[m
[32m+[m[32m  queryParams.value.pageNum = 1;[m
[32m+[m[32m  getList();[m
[32m+[m[32m}[m
[32m+[m[32m/** é‡ç½®æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction resetQuery() {[m
[32m+[m[32m  dateRange.value = [];[m
[32m+[m[32m  proxy.resetForm("queryRef");[m
[32m+[m[32m  queryParams.value.pageNum = 1;[m
[32m+[m[32m  proxy.$refs["logininforRef"].sort(defaultSort.value.prop, defaultSort.value.order);[m
[32m+[m[32m}[m
[32m+[m[32m/** å¤šé€‰æ¡†é€‰ä¸­æ•°æ® */[m
[32m+[m[32mfunction handleSelectionChange(selection) {[m
[32m+[m[32m  ids.value = selection.map(item => item.infoId);[m
[32m+[m[32m  multiple.value = !selection.length;[m
[32m+[m[32m  single.value = selection.length != 1;[m
[32m+[m[32m  selectName.value = selection.map(item => item.userName);[m
[32m+[m[32m}[m
[32m+[m[32m/** æ’åºè§¦å‘äº‹ä»¶ */[m
[32m+[m[32mfunction handleSortChange(column, prop, order) {[m
[32m+[m[32m  queryParams.value.orderByColumn = column.prop;[m
[32m+[m[32m  queryParams.value.isAsc = column.order;[m
[32m+[m[32m  getList();[m
[32m+[m[32m}[m
[32m+[m[32m/** åˆ é™¤æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleDelete(row) {[m
[32m+[m[32m  const infoIds = row.infoId || ids.value;[m
[32m+[m[32m  proxy.$modal.confirm('æ˜¯å¦ç¡®è®¤åˆ é™¤è®¿é—®ç¼–å·ä¸º"' + infoIds + '"çš„æ•°æ®é¡¹?').then(function () {[m
[32m+[m[32m    return delLogininfor(infoIds);[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    getList();[m
[32m+[m[32m    proxy.$modal.msgSuccess("åˆ é™¤æˆåŠŸ");[m
[32m+[m[32m  }).catch(() => {});[m
[32m+[m[32m}[m
[32m+[m[32m/** æ¸…ç©ºæŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleClean() {[m
[32m+[m[32m  proxy.$modal.confirm("æ˜¯å¦ç¡®è®¤æ¸…ç©ºæ‰€æœ‰ç™»å½•æ—¥å¿—æ•°æ®é¡¹?").then(function () {[m
[32m+[m[32m    return cleanLogininfor();[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    getList();[m
[32m+[m[32m    proxy.$modal.msgSuccess("æ¸…ç©ºæˆåŠŸ");[m
[32m+[m[32m  }).catch(() => {});[m
[32m+[m[32m}[m
[32m+[m[32m/** è§£é”æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleUnlock() {[m
[32m+[m[32m  const username = selectName.value;[m
[32m+[m[32m  proxy.$modal.confirm('æ˜¯å¦ç¡®è®¤è§£é”ç”¨æˆ·"' + username + '"æ•°æ®é¡¹?').then(function () {[m
[32m+[m[32m    return unlockLogininfor(username);[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    proxy.$modal.msgSuccess("ç”¨æˆ·" + username + "è§£é”æˆåŠŸ");[m
[32m+[m[32m  }).catch(() => {});[m
[32m+[m[32m}[m
[32m+[m[32m/** å¯¼å‡ºæŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleExport() {[m
[32m+[m[32m  proxy.download("monitor/logininfor/export", {[m
[32m+[m[32m    ...queryParams.value,[m
[32m+[m[32m  }, `config_${new Date().getTime()}.xlsx`);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mgetList();[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/monitor/online/index.vue b/src/views/monitor/online/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..eb17ebc3[m
[1m--- /dev/null[m
[1m+++ b/src/views/monitor/online/index.vue[m
[36m@@ -0,0 +1,106 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m   <div class="app-container">[m
[32m+[m[32m      <el-form :model="queryParams" ref="queryRef" :inline="true">[m
[32m+[m[32m         <el-form-item label="ç™»å½•åœ°å€" prop="ipaddr">[m
[32m+[m[32m            <el-input[m
[32m+[m[32m               v-model="queryParams.ipaddr"[m
[32m+[m[32m               placeholder="è¯·è¾“å…¥ç™»å½•åœ°å€"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 200px"[m
[32m+[m[32m               @keyup.enter="handleQuery"[m
[32m+[m[32m            />[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="ç”¨æˆ·åç§°" prop="userName">[m
[32m+[m[32m            <el-input[m
[32m+[m[32m               v-model="queryParams.userName"[m
[32m+[m[32m               placeholder="è¯·è¾“å…¥ç”¨æˆ·åç§°"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 200px"[m
[32m+[m[32m               @keyup.enter="handleQuery"[m
[32m+[m[32m            />[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item>[m
[32m+[m[32m            <el-button type="primary" icon="Search" @click="handleQuery">æœç´¢</el-button>[m
[32m+[m[32m            <el-button icon="Refresh" @click="resetQuery">é‡ç½®</el-button>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m      </el-form>[m
[32m+[m[32m      <el-table[m
[32m+[m[32m         v-loading="loading"[m
[32m+[m[32m         :data="onlineList.slice((pageNum - 1) * pageSize, pageNum * pageSize)"[m
[32m+[m[32m         style="width: 100%;"[m
[32m+[m[32m      >[m
[32m+[m[32m         <el-table-column label="åºå·" width="50" type="index" align="center">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <span>{{ (pageNum - 1) * pageSize + scope.$index + 1 }}</span>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="ä¼šè¯ç¼–å·" align="center" prop="tokenId" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="ç™»å½•åç§°" align="center" prop="userName" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="æ‰€å±éƒ¨é—¨" align="center" prop="deptName" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="ä¸»æœº" align="center" prop="ipaddr" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="ç™»å½•åœ°ç‚¹" align="center" prop="loginLocation" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="æ“ä½œç³»ç»Ÿ" align="center" prop="os" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="æµè§ˆå™¨" align="center" prop="browser" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="ç™»å½•æ—¶é—´" align="center" prop="loginTime" width="180">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <span>{{ parseTime(scope.row.loginTime) }}</span>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="æ“ä½œ" align="center" class-name="small-padding fixed-width">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <el-button link type="primary" icon="Delete" @click="handleForceLogout(scope.row)" v-hasPermi="['monitor:online:forceLogout']">å¼ºé€€</el-button>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m      </el-table>[m
[32m+[m
[32m+[m[32m      <pagination v-show="total > 0" :total="total" v-model:page="pageNum" v-model:limit="pageSize" />[m
[32m+[m[32m   </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup name="Online">[m
[32m+[m[32mimport { forceLogout, list as initData } from "@/api/monitor/online";[m
[32m+[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m
[32m+[m[32mconst onlineList = ref([]);[m
[32m+[m[32mconst loading = ref(true);[m
[32m+[m[32mconst total = ref(0);[m
[32m+[m[32mconst pageNum = ref(1);[m
[32m+[m[32mconst pageSize = ref(10);[m
[32m+[m
[32m+[m[32mconst queryParams = ref({[m
[32m+[m[32m  ipaddr: undefined,[m
[32m+[m[32m  userName: undefined[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m/** æŸ¥è¯¢ç™»å½•æ—¥å¿—åˆ—è¡¨ */[m
[32m+[m[32mfunction getList() {[m
[32m+[m[32m  loading.value = true;[m
[32m+[m[32m  initData(queryParams.value).then(response => {[m
[32m+[m[32m    onlineList.value = response.rows;[m
[32m+[m[32m    total.value = response.total;[m
[32m+[m[32m    loading.value = false;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** æœç´¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleQuery() {[m
[32m+[m[32m  pageNum.value = 1;[m
[32m+[m[32m  getList();[m
[32m+[m[32m}[m
[32m+[m[32m/** é‡ç½®æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction resetQuery() {[m
[32m+[m[32m  proxy.resetForm("queryRef");[m
[32m+[m[32m  handleQuery();[m
[32m+[m[32m}[m
[32m+[m[32m/** å¼ºé€€æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleForceLogout(row) {[m
[32m+[m[32m    proxy.$modal.confirm('æ˜¯å¦ç¡®è®¤å¼ºé€€åç§°ä¸º"' + row.userName + '"çš„ç”¨æˆ·?').then(function () {[m
[32m+[m[32m  return forceLogout(row.tokenId);[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    getList();[m
[32m+[m[32m    proxy.$modal.msgSuccess("åˆ é™¤æˆåŠŸ");[m
[32m+[m[32m  }).catch(() => {});[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mgetList();[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/monitor/operlog/index.vue b/src/views/monitor/operlog/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..cb59a472[m
[1m--- /dev/null[m
[1m+++ b/src/views/monitor/operlog/index.vue[m
[36m@@ -0,0 +1,301 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m   <div class="app-container">[m
[32m+[m[32m      <el-form :model="queryParams" ref="queryRef" :inline="true" v-show="showSearch" label-width="68px">[m
[32m+[m[32m         <el-form-item label="æ“ä½œåœ°å€" prop="operIp">[m
[32m+[m[32m            <el-input[m
[32m+[m[32m               v-model="queryParams.operIp"[m
[32m+[m[32m               placeholder="è¯·è¾“å…¥æ“ä½œåœ°å€"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 240px;"[m
[32m+[m[32m               @keyup.enter="handleQuery"[m
[32m+[m[32m            />[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="ç³»ç»Ÿæ¨¡å—" prop="title">[m
[32m+[m[32m            <el-input[m
[32m+[m[32m               v-model="queryParams.title"[m
[32m+[m[32m               placeholder="è¯·è¾“å…¥ç³»ç»Ÿæ¨¡å—"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 240px;"[m
[32m+[m[32m               @keyup.enter="handleQuery"[m
[32m+[m[32m            />[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="æ“ä½œäººå‘˜" prop="operName">[m
[32m+[m[32m            <el-input[m
[32m+[m[32m               v-model="queryParams.operName"[m
[32m+[m[32m               placeholder="è¯·è¾“å…¥æ“ä½œäººå‘˜"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 240px;"[m
[32m+[m[32m               @keyup.enter="handleQuery"[m
[32m+[m[32m            />[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="ç±»å‹" prop="businessType">[m
[32m+[m[32m            <el-select[m
[32m+[m[32m               v-model="queryParams.businessType"[m
[32m+[m[32m               placeholder="æ“ä½œç±»å‹"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 240px"[m
[32m+[m[32m            >[m
[32m+[m[32m               <el-option[m
[32m+[m[32m                  v-for="dict in sys_oper_type"[m
[32m+[m[32m                  :key="dict.value"[m
[32m+[m[32m                  :label="dict.label"[m
[32m+[m[32m                  :value="dict.value"[m
[32m+[m[32m               />[m
[32m+[m[32m            </el-select>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="çŠ¶æ€" prop="status">[m
[32m+[m[32m            <el-select[m
[32m+[m[32m               v-model="queryParams.status"[m
[32m+[m[32m               placeholder="æ“ä½œçŠ¶æ€"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 240px"[m
[32m+[m[32m            >[m
[32m+[m[32m               <el-option[m
[32m+[m[32m                  v-for="dict in sys_common_status"[m
[32m+[m[32m                  :key="dict.value"[m
[32m+[m[32m                  :label="dict.label"[m
[32m+[m[32m                  :value="dict.value"[m
[32m+[m[32m               />[m
[32m+[m[32m            </el-select>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="æ“ä½œæ—¶é—´" style="width: 308px">[m
[32m+[m[32m            <el-date-picker[m
[32m+[m[32m               v-model="dateRange"[m
[32m+[m[32m               value-format="YYYY-MM-DD HH:mm:ss"[m
[32m+[m[32m               type="daterange"[m
[32m+[m[32m               range-separator="-"[m
[32m+[m[32m               start-placeholder="å¼€å§‹æ—¥æœŸ"[m
[32m+[m[32m               end-placeholder="ç»“æŸæ—¥æœŸ"[m
[32m+[m[32m               :default-time="[new Date(2000, 1, 1, 0, 0, 0), new Date(2000, 1, 1, 23, 59, 59)]"[m
[32m+[m[32m            ></el-date-picker>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item>[m
[32m+[m[32m            <el-button type="primary" icon="Search" @click="handleQuery">æœç´¢</el-button>[m
[32m+[m[32m            <el-button icon="Refresh" @click="resetQuery">é‡ç½®</el-button>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m      </el-form>[m
[32m+[m
[32m+[m[32m      <el-row :gutter="10" class="mb8">[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="danger"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Delete"[m
[32m+[m[32m               :disabled="multiple"[m
[32m+[m[32m               @click="handleDelete"[m
[32m+[m[32m               v-hasPermi="['monitor:operlog:remove']"[m
[32m+[m[32m            >åˆ é™¤</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="danger"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Delete"[m
[32m+[m[32m               @click="handleClean"[m
[32m+[m[32m               v-hasPermi="['monitor:operlog:remove']"[m
[32m+[m[32m            >æ¸…ç©º</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="warning"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Download"[m
[32m+[m[32m               @click="handleExport"[m
[32m+[m[32m               v-hasPermi="['monitor:operlog:export']"[m
[32m+[m[32m            >å¯¼å‡º</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <right-toolbar v-model:showSearch="showSearch" @queryTable="getList"></right-toolbar>[m
[32m+[m[32m      </el-row>[m
[32m+[m
[32m+[m[32m      <el-table ref="operlogRef" v-loading="loading" :data="operlogList" @selection-change="handleSelectionChange" :default-sort="defaultSort" @sort-change="handleSortChange">[m
[32m+[m[32m         <el-table-column type="selection" width="50" align="center" />[m
[32m+[m[32m         <el-table-column label="æ—¥å¿—ç¼–å·" align="center" prop="operId" />[m
[32m+[m[32m         <el-table-column label="ç³»ç»Ÿæ¨¡å—" align="center" prop="title" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="æ“ä½œç±»å‹" align="center" prop="businessType">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <dict-tag :options="sys_oper_type" :value="scope.row.businessType" />[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="æ“ä½œäººå‘˜" align="center" width="110" prop="operName" :show-overflow-tooltip="true" sortable="custom" :sort-orders="['descending', 'ascending']" />[m
[32m+[m[32m         <el-table-column label="æ“ä½œåœ°å€" align="center" prop="operIp" width="130" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="æ“ä½œçŠ¶æ€" align="center" prop="status">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <dict-tag :options="sys_common_status" :value="scope.row.status" />[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="æ“ä½œæ—¥æœŸ" align="center" prop="operTime" width="180" sortable="custom" :sort-orders="['descending', 'ascending']">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <span>{{ parseTime(scope.row.operTime) }}</span>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="æ¶ˆè€—æ—¶é—´" align="center" prop="costTime" width="110" :show-overflow-tooltip="true" sortable="custom" :sort-orders="['descending', 'ascending']">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <span>{{ scope.row.costTime }}æ¯«ç§’</span>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="æ“ä½œ" align="center" class-name="small-padding fixed-width">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <el-button link type="primary" icon="View" @click="handleView(scope.row, scope.index)" v-hasPermi="['monitor:operlog:query']">è¯¦ç»†</el-button>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m      </el-table>[m
[32m+[m
[32m+[m[32m      <pagination[m
[32m+[m[32m         v-show="total > 0"[m
[32m+[m[32m         :total="total"[m
[32m+[m[32m         v-model:page="queryParams.pageNum"[m
[32m+[m[32m         v-model:limit="queryParams.pageSize"[m
[32m+[m[32m         @pagination="getList"[m
[32m+[m[32m      />[m
[32m+[m
[32m+[m[32m      <!-- æ“ä½œæ—¥å¿—è¯¦ç»† -->[m
[32m+[m[32m      <el-dialog title="æ“ä½œæ—¥å¿—è¯¦ç»†" v-model="open" width="800px" append-to-body>[m
[32m+[m[32m         <el-form :model="form" label-width="100px">[m
[32m+[m[32m            <el-row>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="æ“ä½œæ¨¡å—ï¼š">{{ form.title }} / {{ typeFormat(form) }}</el-form-item>[m
[32m+[m[32m                  <el-form-item[m
[32m+[m[32m                    label="ç™»å½•ä¿¡æ¯ï¼š"[m
[32m+[m[32m                  >{{ form.operName }} / {{ form.operIp }} / {{ form.operLocation }}</el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="è¯·æ±‚åœ°å€ï¼š">{{ form.operUrl }}</el-form-item>[m
[32m+[m[32m                  <el-form-item label="è¯·æ±‚æ–¹å¼ï¼š">{{ form.requestMethod }}</el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="24">[m
[32m+[m[32m                  <el-form-item label="æ“ä½œæ–¹æ³•ï¼š">{{ form.method }}</el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="24">[m
[32m+[m[32m                  <el-form-item label="è¯·æ±‚å‚æ•°ï¼š">{{ form.operParam }}</el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="24">[m
[32m+[m[32m                  <el-form-item label="è¿”å›å‚æ•°ï¼š">{{ form.jsonResult }}</el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="8">[m
[32m+[m[32m                  <el-form-item label="æ“ä½œçŠ¶æ€ï¼š">[m
[32m+[m[32m                     <div v-if="form.status === 0">æ­£å¸¸</div>[m
[32m+[m[32m                     <div v-else-if="form.status === 1">å¤±è´¥</div>[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="8">[m
[32m+[m[32m                  <el-form-item label="æ¶ˆè€—æ—¶é—´ï¼š">{{ form.costTime }}æ¯«ç§’</el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="8">[m
[32m+[m[32m                  <el-form-item label="æ“ä½œæ—¶é—´ï¼š">{{ parseTime(form.operTime) }}</el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="24">[m
[32m+[m[32m                  <el-form-item label="å¼‚å¸¸ä¿¡æ¯ï¼š" v-if="form.status === 1">{{ form.errorMsg }}</el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m            </el-row>[m
[32m+[m[32m         </el-form>[m
[32m+[m[32m         <template #footer>[m
[32m+[m[32m            <div class="dialog-footer">[m
[32m+[m[32m               <el-button @click="open = false">å…³ é—­</el-button>[m
[32m+[m[32m            </div>[m
[32m+[m[32m         </template>[m
[32m+[m[32m      </el-dialog>[m
[32m+[m[32m   </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup name="Operlog">[m
[32m+[m[32mimport { list, delOperlog, cleanOperlog } from "@/api/monitor/operlog";[m
[32m+[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m[32mconst { sys_oper_type, sys_common_status } = proxy.useDict("sys_oper_type","sys_common_status");[m
[32m+[m
[32m+[m[32mconst operlogList = ref([]);[m
[32m+[m[32mconst open = ref(false);[m
[32m+[m[32mconst loading = ref(true);[m
[32m+[m[32mconst showSearch = ref(true);[m
[32m+[m[32mconst ids = ref([]);[m
[32m+[m[32mconst single = ref(true);[m
[32m+[m[32mconst multiple = ref(true);[m
[32m+[m[32mconst total = ref(0);[m
[32m+[m[32mconst title = ref("");[m
[32m+[m[32mconst dateRange = ref([]);[m
[32m+[m[32mconst defaultSort = ref({ prop: "operTime", order: "descending" });[m
[32m+[m
[32m+[m[32mconst data = reactive({[m
[32m+[m[32m  form: {},[m
[32m+[m[32m  queryParams: {[m
[32m+[m[32m    pageNum: 1,[m
[32m+[m[32m    pageSize: 10,[m
[32m+[m[32m    operIp: undefined,[m
[32m+[m[32m    title: undefined,[m
[32m+[m[32m    operName: undefined,[m
[32m+[m[32m    businessType: undefined,[m
[32m+[m[32m    status: undefined[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst { queryParams, form } = toRefs(data);[m
[32m+[m
[32m+[m[32m/** æŸ¥è¯¢ç™»å½•æ—¥å¿— */[m
[32m+[m[32mfunction getList() {[m
[32m+[m[32m  loading.value = true;[m
[32m+[m[32m  list(proxy.addDateRange(queryParams.value, dateRange.value)).then(response => {[m
[32m+[m[32m    operlogList.value = response.rows;[m
[32m+[m[32m    total.value = response.total;[m
[32m+[m[32m    loading.value = false;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** æ“ä½œæ—¥å¿—ç±»å‹å­—å…¸ç¿»è¯‘ */[m
[32m+[m[32mfunction typeFormat(row, column) {[m
[32m+[m[32m  return proxy.selectDictLabel(sys_oper_type.value, row.businessType);[m
[32m+[m[32m}[m
[32m+[m[32m/** æœç´¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleQuery() {[m
[32m+[m[32m  queryParams.value.pageNum = 1;[m
[32m+[m[32m  getList();[m
[32m+[m[32m}[m
[32m+[m[32m/** é‡ç½®æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction resetQuery() {[m
[32m+[m[32m  dateRange.value = [];[m
[32m+[m[32m  proxy.resetForm("queryRef");[m
[32m+[m[32m  queryParams.value.pageNum = 1;[m
[32m+[m[32m  proxy.$refs["operlogRef"].sort(defaultSort.value.prop, defaultSort.value.order);[m
[32m+[m[32m}[m
[32m+[m[32m/** å¤šé€‰æ¡†é€‰ä¸­æ•°æ® */[m
[32m+[m[32mfunction handleSelectionChange(selection) {[m
[32m+[m[32m  ids.value = selection.map(item => item.operId);[m
[32m+[m[32m  multiple.value = !selection.length;[m
[32m+[m[32m}[m
[32m+[m[32m/** æ’åºè§¦å‘äº‹ä»¶ */[m
[32m+[m[32mfunction handleSortChange(column, prop, order) {[m
[32m+[m[32m  queryParams.value.orderByColumn = column.prop;[m
[32m+[m[32m  queryParams.value.isAsc = column.order;[m
[32m+[m[32m  getList();[m
[32m+[m[32m}[m
[32m+[m[32m/** è¯¦ç»†æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleView(row) {[m
[32m+[m[32m  open.value = true;[m
[32m+[m[32m  form.value = row;[m
[32m+[m[32m}[m
[32m+[m[32m/** åˆ é™¤æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleDelete(row) {[m
[32m+[m[32m  const operIds = row.operId || ids.value;[m
[32m+[m[32m  proxy.$modal.confirm('æ˜¯å¦ç¡®è®¤åˆ é™¤æ—¥å¿—ç¼–å·ä¸º"' + operIds + '"çš„æ•°æ®é¡¹?').then(function () {[m
[32m+[m[32m    return delOperlog(operIds);[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    getList();[m
[32m+[m[32m    proxy.$modal.msgSuccess("åˆ é™¤æˆåŠŸ");[m
[32m+[m[32m  }).catch(() => {});[m
[32m+[m[32m}[m
[32m+[m[32m/** æ¸…ç©ºæŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleClean() {[m
[32m+[m[32m  proxy.$modal.confirm("æ˜¯å¦ç¡®è®¤æ¸…ç©ºæ‰€æœ‰æ“ä½œæ—¥å¿—æ•°æ®é¡¹?").then(function () {[m
[32m+[m[32m    return cleanOperlog();[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    getList();[m
[32m+[m[32m    proxy.$modal.msgSuccess("æ¸…ç©ºæˆåŠŸ");[m
[32m+[m[32m  }).catch(() => {});[m
[32m+[m[32m}[m
[32m+[m[32m/** å¯¼å‡ºæŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleExport() {[m
[32m+[m[32m  proxy.download("monitor/operlog/export",{[m
[32m+[m[32m    ...queryParams.value,[m
[32m+[m[32m  }, `config_${new Date().getTime()}.xlsx`);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mgetList();[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/monitor/server/index.vue b/src/views/monitor/server/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..a1178b1a[m
[1m--- /dev/null[m
[1m+++ b/src/views/monitor/server/index.vue[m
[36m@@ -0,0 +1,187 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="app-container">[m
[32m+[m[32m    <el-row>[m
[32m+[m[32m      <el-col :span="12" class="card-box">[m
[32m+[m[32m        <el-card>[m
[32m+[m[32m          <template #header><Cpu style="width: 1em; height: 1em; vertical-align: middle;" /> <span style="vertical-align: middle;">CPU</span></template>[m
[32m+[m[32m          <div class="el-table el-table--enable-row-hover el-table--medium">[m
[32m+[m[32m            <table cellspacing="0" style="width: 100%;">[m
[32m+[m[32m              <thead>[m
[32m+[m[32m                <tr>[m
[32m+[m[32m                  <th class="el-table__cell is-leaf"><div class="cell">å±æ€§</div></th>[m
[32m+[m[32m                  <th class="el-table__cell is-leaf"><div class="cell">å€¼</div></th>[m
[32m+[m[32m                </tr>[m
[32m+[m[32m              </thead>[m
[32m+[m[32m              <tbody>[m
[32m+[m[32m                <tr>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">æ ¸å¿ƒæ•°</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="server.cpu">{{ server.cpu.cpuNum }}</div></td>[m
[32m+[m[32m                </tr>[m
[32m+[m[32m                <tr>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">ç”¨æˆ·ä½¿ç”¨ç‡</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="server.cpu">{{ server.cpu.used }}%</div></td>[m
[32m+[m[32m                </tr>[m
[32m+[m[32m                <tr>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">ç³»ç»Ÿä½¿ç”¨ç‡</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="server.cpu">{{ server.cpu.sys }}%</div></td>[m
[32m+[m[32m                </tr>[m
[32m+[m[32m                <tr>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">å½“å‰ç©ºé—²ç‡</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="server.cpu">{{ server.cpu.free }}%</div></td>[m
[32m+[m[32m                </tr>[m
[32m+[m[32m              </tbody>[m
[32m+[m[32m            </table>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </el-card>[m
[32m+[m[32m      </el-col>[m
[32m+[m
[32m+[m[32m      <el-col :span="12" class="card-box">[m
[32m+[m[32m        <el-card>[m
[32m+[m[32m          <template #header><Tickets style="width: 1em; height: 1em; vertical-align: middle;" /> <span style="vertical-align: middle;">å†…å­˜</span></template>[m
[32m+[m[32m          <div class="el-table el-table--enable-row-hover el-table--medium">[m
[32m+[m[32m            <table cellspacing="0" style="width: 100%;">[m
[32m+[m[32m              <thead>[m
[32m+[m[32m                <tr>[m
[32m+[m[32m                  <th class="el-table__cell is-leaf"><div class="cell">å±æ€§</div></th>[m
[32m+[m[32m                  <th class="el-table__cell is-leaf"><div class="cell">å†…å­˜</div></th>[m
[32m+[m[32m                  <th class="el-table__cell is-leaf"><div class="cell">JVM</div></th>[m
[32m+[m[32m                </tr>[m
[32m+[m[32m              </thead>[m
[32m+[m[32m              <tbody>[m
[32m+[m[32m                <tr>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">æ€»å†…å­˜</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="server.mem">{{ server.mem.total }}G</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="server.jvm">{{ server.jvm.total }}M</div></td>[m
[32m+[m[32m                </tr>[m
[32m+[m[32m                <tr>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">å·²ç”¨å†…å­˜</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="server.mem">{{ server.mem.used}}G</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="server.jvm">{{ server.jvm.used}}M</div></td>[m
[32m+[m[32m                </tr>[m
[32m+[m[32m                <tr>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">å‰©ä½™å†…å­˜</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="server.mem">{{ server.mem.free }}G</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="server.jvm">{{ server.jvm.free }}M</div></td>[m
[32m+[m[32m                </tr>[m
[32m+[m[32m                <tr>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">ä½¿ç”¨ç‡</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="server.mem" :class="{'text-danger': server.mem.usage > 80}">{{ server.mem.usage }}%</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="server.jvm" :class="{'text-danger': server.jvm.usage > 80}">{{ server.jvm.usage }}%</div></td>[m
[32m+[m[32m                </tr>[m
[32m+[m[32m              </tbody>[m
[32m+[m[32m            </table>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </el-card>[m
[32m+[m[32m      </el-col>[m
[32m+[m
[32m+[m[32m      <el-col :span="24" class="card-box">[m
[32m+[m[32m        <el-card>[m
[32m+[m[32m          <template #header><Monitor style="width: 1em; height: 1em; vertical-align: middle;" /> <span style="vertical-align: middle;">æœåŠ¡å™¨ä¿¡æ¯</span></template>[m
[32m+[m[32m          <div class="el-table el-table--enable-row-hover el-table--medium">[m
[32m+[m[32m            <table cellspacing="0" style="width: 100%;">[m
[32m+[m[32m              <tbody>[m
[32m+[m[32m                <tr>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">æœåŠ¡å™¨åç§°</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="server.sys">{{ server.sys.computerName }}</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">æ“ä½œç³»ç»Ÿ</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="server.sys">{{ server.sys.osName }}</div></td>[m
[32m+[m[32m                </tr>[m
[32m+[m[32m                <tr>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">æœåŠ¡å™¨IP</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="server.sys">{{ server.sys.computerIp }}</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">ç³»ç»Ÿæ¶æ„</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="server.sys">{{ server.sys.osArch }}</div></td>[m
[32m+[m[32m                </tr>[m
[32m+[m[32m              </tbody>[m
[32m+[m[32m            </table>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </el-card>[m
[32m+[m[32m      </el-col>[m
[32m+[m
[32m+[m[32m      <el-col :span="24" class="card-box">[m
[32m+[m[32m        <el-card>[m
[32m+[m[32m          <template #header><CoffeeCup style="width: 1em; height: 1em; vertical-align: middle;" /> <span style="vertical-align: middle;">Javaè™šæ‹Ÿæœºä¿¡æ¯</span></template>[m
[32m+[m[32m          <div class="el-table el-table--enable-row-hover el-table--medium">[m
[32m+[m[32m            <table cellspacing="0" style="width: 100%;table-layout:fixed;">[m
[32m+[m[32m              <tbody>[m
[32m+[m[32m                <tr>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">Javaåç§°</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="server.jvm">{{ server.jvm.name }}</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">Javaç‰ˆæœ¬</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="server.jvm">{{ server.jvm.version }}</div></td>[m
[32m+[m[32m                </tr>[m
[32m+[m[32m                <tr>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">å¯åŠ¨æ—¶é—´</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="server.jvm">{{ server.jvm.startTime }}</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">è¿è¡Œæ—¶é•¿</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" v-if="server.jvm">{{ server.jvm.runTime }}</div></td>[m
[32m+[m[32m                </tr>[m
[32m+[m[32m                <tr>[m
[32m+[m[32m                  <td colspan="1" class="el-table__cell is-leaf"><div class="cell">å®‰è£…è·¯å¾„</div></td>[m
[32m+[m[32m                  <td colspan="3" class="el-table__cell is-leaf"><div class="cell" v-if="server.jvm">{{ server.jvm.home }}</div></td>[m
[32m+[m[32m                </tr>[m
[32m+[m[32m                <tr>[m
[32m+[m[32m                  <td colspan="1" class="el-table__cell is-leaf"><div class="cell">é¡¹ç›®è·¯å¾„</div></td>[m
[32m+[m[32m                  <td colspan="3" class="el-table__cell is-leaf"><div class="cell" v-if="server.sys">{{ server.sys.userDir }}</div></td>[m
[32m+[m[32m                </tr>[m
[32m+[m[32m                <tr>[m
[32m+[m[32m                  <td colspan="1" class="el-table__cell is-leaf"><div class="cell">è¿è¡Œå‚æ•°</div></td>[m
[32m+[m[32m                  <td colspan="3" class="el-table__cell is-leaf"><div class="cell" v-if="server.jvm">{{ server.jvm.inputArgs }}</div></td>[m
[32m+[m[32m                </tr>[m
[32m+[m[32m              </tbody>[m
[32m+[m[32m            </table>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </el-card>[m
[32m+[m[32m      </el-col>[m
[32m+[m
[32m+[m[32m      <el-col :span="24" class="card-box">[m
[32m+[m[32m        <el-card>[m
[32m+[m[32m          <template #header><MessageBox style="width: 1em; height: 1em; vertical-align: middle;" /> <span style="vertical-align: middle;">ç£ç›˜çŠ¶æ€</span></template>[m
[32m+[m[32m          <div class="el-table el-table--enable-row-hover el-table--medium">[m
[32m+[m[32m            <table cellspacing="0" style="width: 100%;">[m
[32m+[m[32m              <thead>[m
[32m+[m[32m                <tr>[m
[32m+[m[32m                  <th class="el-table__cell el-table__cell is-leaf"><div class="cell">ç›˜ç¬¦è·¯å¾„</div></th>[m
[32m+[m[32m                  <th class="el-table__cell is-leaf"><div class="cell">æ–‡ä»¶ç³»ç»Ÿ</div></th>[m
[32m+[m[32m                  <th class="el-table__cell is-leaf"><div class="cell">ç›˜ç¬¦ç±»å‹</div></th>[m
[32m+[m[32m                  <th class="el-table__cell is-leaf"><div class="cell">æ€»å¤§å°</div></th>[m
[32m+[m[32m                  <th class="el-table__cell is-leaf"><div class="cell">å¯ç”¨å¤§å°</div></th>[m
[32m+[m[32m                  <th class="el-table__cell is-leaf"><div class="cell">å·²ç”¨å¤§å°</div></th>[m
[32m+[m[32m                  <th class="el-table__cell is-leaf"><div class="cell">å·²ç”¨ç™¾åˆ†æ¯”</div></th>[m
[32m+[m[32m                </tr>[m
[32m+[m[32m              </thead>[m
[32m+[m[32m              <tbody v-if="server.sysFiles">[m
[32m+[m[32m                <tr v-for="(sysFile, index) in server.sysFiles" :key="index">[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">{{ sysFile.dirName }}</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">{{ sysFile.sysTypeName }}</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">{{ sysFile.typeName }}</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">{{ sysFile.total }}</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">{{ sysFile.free }}</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell">{{ sysFile.used }}</div></td>[m
[32m+[m[32m                  <td class="el-table__cell is-leaf"><div class="cell" :class="{'text-danger': sysFile.usage > 80}">{{ sysFile.usage }}%</div></td>[m
[32m+[m[32m                </tr>[m
[32m+[m[32m              </tbody>[m
[32m+[m[32m            </table>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </el-card>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m    </el-row>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { getServer } from '@/api/monitor/server'[m
[32m+[m
[32m+[m[32mconst server = ref([]);[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m
[32m+[m[32mfunction getList() {[m
[32m+[m[32m  proxy.$modal.loading("æ­£åœ¨åŠ è½½æœåŠ¡ç›‘æ§æ•°æ®ï¼Œè¯·ç¨å€™ï¼");[m
[32m+[m[32m  getServer().then(response => {[m
[32m+[m[32m    server.value = response.data;[m
[32m+[m[32m    proxy.$modal.closeLoading();[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mgetList();[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/portal/home.vue b/src/views/portal/home.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..5fd651bc[m
[1m--- /dev/null[m
[1m+++ b/src/views/portal/home.vue[m
[36m@@ -0,0 +1,67 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="portal-home">[m
[32m+[m[32m    <h1>æ¬¢è¿æ¥åˆ°ç”µè„‘ç§Ÿå”®ä¸ç¡¬ä»¶æ€§èƒ½æ™ºèƒ½è¯„ä¼°å¹³å°</h1>[m
[32m+[m[32m    <p>è¿™æ˜¯Cç«¯ç”¨æˆ·å‰å°é¦–é¡µ</p>[m
[32m+[m[32m    <div v-if="userInfo">[m
[32m+[m[32m      <p>å½“å‰ç™»å½•ç”¨æˆ·ï¼š{{ userInfo.nickname || userInfo.username }}</p>[m
[32m+[m[32m      <el-button @click="logout">é€€å‡ºç™»å½•</el-button>[m
[32m+[m[32m    </div>[m
[32m+[m[32m    <div v-else>[m
[32m+[m[32m      <el-button @click="$router.push('/portal/login')">å»ç™»å½•</el-button>[m
[32m+[m[32m    </div>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script>[m
[32m+[m[32mimport { getAppUserInfo } from '@/api/appLogin'[m
[32m+[m
[32m+[m[32mexport default {[m
[32m+[m[32m  name: 'PortalHome',[m
[32m+[m[32m  data() {[m
[32m+[m[32m    return {[m
[32m+[m[32m      userInfo: null[m
[32m+[m[32m    }[m
[32m+[m[32m  },[m
[32m+[m[32m  created() {[m
[32m+[m[32m    this.getUserInfo()[m
[32m+[m[32m  },[m
[32m+[m[32m  methods: {[m
[32m+[m[32m    getUserInfo() {[m
[32m+[m[32m      const token = localStorage.getItem('app_token')[m
[32m+[m[32m      if (token) {[m
[32m+[m[32m        getAppUserInfo().then(res => {[m
[32m+[m[32m          this.userInfo = res.user[m
[32m+[m[32m        }).catch(err => {[m
[32m+[m[32m          console.error('è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:', err)[m
[32m+[m[32m          localStorage.removeItem('app_token')[m
[32m+[m[32m          this.$message.error('ç™»å½•çŠ¶æ€å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•')[m
[32m+[m[32m          this.$router.push('/portal/login')[m
[32m+[m[32m        })[m
[32m+[m[32m      }[m
[32m+[m[32m    },[m
[32m+[m[32m    logout() {[m
[32m+[m[32m      localStorage.removeItem('app_token')[m
[32m+[m[32m      this.userInfo = null[m
[32m+[m[32m      this.$message.success('å·²é€€å‡ºç™»å½•')[m
[32m+[m[32m      this.$router.push('/portal/login')[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style scoped>[m
[32m+[m[32m.portal-home {[m
[32m+[m[32m  padding: 50px;[m
[32m+[m[32m  text-align: center;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mh1 {[m
[32m+[m[32m  color: #333;[m
[32m+[m[32m  margin-bottom: 20px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mp {[m
[32m+[m[32m  color: #666;[m
[32m+[m[32m  margin-bottom: 30px;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/views/portal/login.vue b/src/views/portal/login.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..7f50152e[m
[1m--- /dev/null[m
[1m+++ b/src/views/portal/login.vue[m
[36m@@ -0,0 +1,260 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="common-layout">[m
[32m+[m[32m    <el-container class="app-container">[m
[32m+[m[32m      <!-- å¯¼å…¥çš„å¤´éƒ¨å¯¼èˆªæ ç»„ä»¶ -->[m
[32m+[m[32m      <Header />[m
[32m+[m[41m      [m
[32m+[m[32m      <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->[m
[32m+[m[32m      <el-main class="main-content">[m
[32m+[m[32m        <div class="portal-login">[m
[32m+[m[32m          <div class="login-container">[m
[32m+[m[32m            <h2 class="login-title">Cç«¯ç”¨æˆ·ç™»å½•</h2>[m
[32m+[m[32m      <el-form ref="loginForm" :model="loginForm" :rules="loginRules" class="login-form">[m
[32m+[m[32m        <el-form-item prop="username">[m
[32m+[m[32m          <el-input[m
[32m+[m[32m            v-model="loginForm.username"[m
[32m+[m[32m            type="text"[m
[32m+[m[32m            size="large"[m
[32m+[m[32m            auto-complete="off"[m
[32m+[m[32m            placeholder="è¯·è¾“å…¥ç”¨æˆ·å"[m
[32m+[m[32m          >[m
[32m+[m[32m            <template #prefix>[m
[32m+[m[32m              <svg-icon icon-class="user" class="el-input__icon input-icon" />[m
[32m+[m[32m            </template>[m
[32m+[m[32m          </el-input>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item prop="password">[m
[32m+[m[32m          <el-input[m
[32m+[m[32m            v-model="loginForm.password"[m
[32m+[m[32m            type="password"[m
[32m+[m[32m            size="large"[m
[32m+[m[32m            auto-complete="off"[m
[32m+[m[32m            placeholder="è¯·è¾“å…¥å¯†ç "[m
[32m+[m[32m            @keyup.enter="handleLogin"[m
[32m+[m[32m          >[m
[32m+[m[32m            <template #prefix>[m
[32m+[m[32m              <svg-icon icon-class="password" class="el-input__icon input-icon" />[m
[32m+[m[32m            </template>[m
[32m+[m[32m          </el-input>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item prop="code" v-if="captchaEnabled">[m
[32m+[m[32m          <el-input[m
[32m+[m[32m            v-model="loginForm.code"[m
[32m+[m[32m            size="large"[m
[32m+[m[32m            auto-complete="off"[m
[32m+[m[32m            placeholder="éªŒè¯ç "[m
[32m+[m[32m            style="width: 63%"[m
[32m+[m[32m            @keyup.enter="handleLogin"[m
[32m+[m[32m          >[m
[32m+[m[32m            <template #prefix>[m
[32m+[m[32m              <svg-icon icon-class="validCode" class="el-input__icon input-icon" />[m
[32m+[m[32m            </template>[m
[32m+[m[32m          </el-input>[m
[32m+[m[32m          <div class="login-code">[m
[32m+[m[32m            <img :src="codeUrl" @click="getCode" class="login-code-img"/>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item style="width:100%;">[m
[32m+[m[32m          <el-button[m
[32m+[m[32m            :loading="loading"[m
[32m+[m[32m            size="large"[m
[32m+[m[32m            type="primary"[m
[32m+[m[32m            style="width:100%;"[m
[32m+[m[32m            @click.prevent="handleLogin"[m
[32m+[m[32m          >[m
[32m+[m[32m            <span v-if="!loading">ç™» å½•</span>[m
[32m+[m[32m            <span v-else>ç™» å½• ä¸­...</span>[m
[32m+[m[32m          </el-button>[m
[32m+[m[32m          <div style="float: right;" v-if="register">[m
[32m+[m[32m            <router-link class="link-type" :to="'/portal/register'">ç«‹å³æ³¨å†Œ</router-link>[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <div style="float: left;">[m
[32m+[m[32m            <router-link class="link-type" :to="'/login'">å•†å®¶ç™»å½•</router-link>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m      </el-form>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </el-main>[m
[32m+[m[32m    </el-container>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script>[m
[32m+[m[32mimport { getCodeImg } from "@/api/login";[m
[32m+[m[32mimport { appLogin } from "@/api/appLogin";[m
[32m+[m[32mimport Cookies from "js-cookie";[m
[32m+[m[32mimport { encrypt, decrypt } from '@/utils/jsencrypt'[m
[32m+[m[32mimport { setAppToken } from "@/utils/auth";[m
[32m+[m[32mimport Header from '@/views/computerMarket/Header.vue';[m[41m [m
[32m+[m
[32m+[m[32mexport default {[m
[32m+[m[32m  name: "PortalLogin",[m
[32m+[m[32m  components: {[m
[32m+[m[32m    Header[m
[32m+[m[32m  },[m
[32m+[m[32m  data() {[m
[32m+[m[32m    return {[m
[32m+[m[32m      codeUrl: "",[m
[32m+[m[32m      loginForm: {[m
[32m+[m[32m        username: "",[m
[32m+[m[32m        password: "",[m
[32m+[m[32m        rememberMe: false,[m
[32m+[m[32m        code: "",[m
[32m+[m[32m        uuid: ""[m
[32m+[m[32m      },[m
[32m+[m[32m      loginRules: {[m
[32m+[m[32m        username: [[m
[32m+[m[32m          { required: true, trigger: "blur", message: "è¯·è¾“å…¥æ‚¨çš„è´¦å·" }[m
[32m+[m[32m        ],[m
[32m+[m[32m        password: [[m
[32m+[m[32m          { required: true, trigger: "blur", message: "è¯·è¾“å…¥æ‚¨çš„å¯†ç " }[m
[32m+[m[32m        ],[m
[32m+[m[32m        code: [{ required: true, trigger: "change", message: "è¯·è¾“å…¥éªŒè¯ç " }][m
[32m+[m[32m      },[m
[32m+[m[32m      loading: false,[m
[32m+[m[32m      // éªŒè¯ç å¼€å…³[m
[32m+[m[32m      captchaEnabled: true,[m
[32m+[m[32m      // æ³¨å†Œå¼€å…³[m
[32m+[m[32m      register: true,[m
[32m+[m[32m      redirect: undefined[m
[32m+[m[32m    };[m
[32m+[m[32m  },[m
[32m+[m[32m  watch: {[m
[32m+[m[32m    $route: {[m
[32m+[m[32m      handler: function(route) {[m
[32m+[m[32m        this.redirect = route.query && route.query.redirect;[m
[32m+[m[32m      },[m
[32m+[m[32m      immediate: true[m
[32m+[m[32m    }[m
[32m+[m[32m  },[m
[32m+[m[32m  created() {[m
[32m+[m[32m    this.getCode();[m
[32m+[m[32m  },[m
[32m+[m[32m  methods: {[m
[32m+[m[32m    getCode() {[m
[32m+[m[32m      getCodeImg().then(res => {[m
[32m+[m[32m        this.captchaEnabled = res.captchaEnabled === undefined ? true : res.captchaEnabled;[m
[32m+[m[32m        if (this.captchaEnabled) {[m
[32m+[m[32m          this.codeUrl = "data:image/gif;base64," + res.img;[m
[32m+[m[32m          this.loginForm.uuid = res.uuid;[m
[32m+[m[32m        }[m
[32m+[m[32m      });[m
[32m+[m[32m    },[m
[32m+[m[32m    handleLogin() {[m
[32m+[m[32m      console.log('ç™»å½•æŒ‰é’®è¢«ç‚¹å‡»');[m
[32m+[m[32m      this.$refs.loginForm.validate(valid => {[m
[32m+[m[32m        if (valid) {[m
[32m+[m[32m          console.log('è¡¨å•éªŒè¯é€šè¿‡');[m
[32m+[m[32m          this.loading = true;[m
[32m+[m[32m          appLogin(this.loginForm.username, this.loginForm.password, this.loginForm.code, this.loginForm.uuid).then(res => {[m
[32m+[m[32m            console.log('ç™»å½•æˆåŠŸ:', res);[m
[32m+[m[32m            // å­˜å‚¨Cç«¯token[m
[32m+[m[32m            setAppToken(res.token);[m
[32m+[m[32m            console.log("ç™»å½•æˆåŠŸï¼Œä¿å­˜tokenåˆ°localStorage:", res.token);[m
[32m+[m[41m            [m
[32m+[m[32m            // éªŒè¯tokenæ˜¯å¦ä¿å­˜æˆåŠŸ[m
[32m+[m[32m            const savedToken = localStorage.getItem('app_token');[m
[32m+[m[32m            console.log("éªŒè¯ä¿å­˜çš„token:", savedToken);[m
[32m+[m[41m            [m
[32m+[m[32m            this.$message.success('ç™»å½•æˆåŠŸ');[m
[32m+[m[32m            console.log('å‡†å¤‡è·³è½¬åˆ°:', this.redirect || "/computer-market");[m
[32m+[m[32m            this.$router.push({ path: this.redirect || "/computer-market" }).then(() => {[m
[32m+[m[32m              console.log('è·³è½¬æˆåŠŸ');[m
[32m+[m[32m            }).catch(err => {[m
[32m+[m[32m              console.error('è·³è½¬å¤±è´¥:', err);[m
[32m+[m[32m            });[m
[32m+[m[32m          }).catch(err => {[m
[32m+[m[32m            console.error('ç™»å½•å¤±è´¥:', err);[m
[32m+[m[32m            this.loading = false;[m
[32m+[m[32m            if (this.captchaEnabled) {[m
[32m+[m[32m              this.getCode();[m
[32m+[m[32m            }[m
[32m+[m[32m            // æ˜¾ç¤ºé”™è¯¯æç¤º[m
[32m+[m[32m            if (err && err.message) {[m
[32m+[m[32m              this.$message.error(err.message);[m
[32m+[m[32m            } else {[m
[32m+[m[32m              this.$message.error('ç™»å½•å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç”¨æˆ·åå’Œå¯†ç ');[m
[32m+[m[32m            }[m
[32m+[m[32m          });[m
[32m+[m[32m        } else {[m
[32m+[m[32m          console.log('è¡¨å•éªŒè¯å¤±è´¥');[m
[32m+[m[32m          this.$message.error('è¯·å¡«å†™å®Œæ•´çš„ç™»å½•ä¿¡æ¯');[m
[32m+[m[32m        }[m
[32m+[m[32m      });[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style rel="stylesheet/scss" lang="scss" scoped>[m
[32m+[m[32m/* å¸ƒå±€æ ·å¼ */[m
[32m+[m[32m.common-layout {[m
[32m+[m[32m  min-height: 100vh;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.app-container {[m
[32m+[m[32m  background-color: #FAFAF8;[m
[32m+[m[32m  color: #000000;[m
[32m+[m[32m  min-height: 100vh;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.main-content {[m
[32m+[m[32m  background-color: #FAFAF8;[m
[32m+[m[32m  padding: 20px;[m
[32m+[m[32m  margin-top: 70px; /* ä¸ºå›ºå®šå¯¼èˆªæ ç•™å‡ºç©ºé—´ */[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  justify-content: center;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.portal-login {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  justify-content: center;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m  height: 100%;[m
[32m+[m[32m  background-image: url("../assets/images/login-background.jpg");[m
[32m+[m[32m  background-size: cover;[m
[32m+[m[32m  border-radius: 8px;[m
[32m+[m[32m  overflow: hidden;[m
[32m+[m[32m  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);[m
[32m+[m[32m}[m
[32m+[m[32m.login-container {[m
[32m+[m[32m  width: 400px;[m
[32m+[m[32m  padding: 30px;[m
[32m+[m[32m  background: #fff;[m
[32m+[m[32m  border-radius: 8px;[m
[32m+[m[32m  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);[m
[32m+[m[32m}[m
[32m+[m[32m.login-title {[m
[32m+[m[32m  margin: 0 auto 30px auto;[m
[32m+[m[32m  text-align: center;[m
[32m+[m[32m  color: #707070;[m
[32m+[m[32m}[m
[32m+[m[32m.login-form {[m
[32m+[m[32m  .el-input {[m
[32m+[m[32m    height: 38px;[m
[32m+[m[32m    input {[m
[32m+[m[32m      height: 38px;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  .input-icon {[m
[32m+[m[32m    height: 39px;[m
[32m+[m[32m    width: 14px;[m
[32m+[m[32m    margin-left: 2px;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m.login-code {[m
[32m+[m[32m  width: 33%;[m
[32m+[m[32m  height: 38px;[m
[32m+[m[32m  float: right;[m
[32m+[m[32m  img {[m
[32m+[m[32m    cursor: pointer;[m
[32m+[m[32m    vertical-align: middle;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m.login-code-img {[m
[32m+[m[32m  height: 38px;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/views/portal/register.vue b/src/views/portal/register.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..18072bc6[m
[1m--- /dev/null[m
[1m+++ b/src/views/portal/register.vue[m
[36m@@ -0,0 +1,390 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="common-layout">[m
[32m+[m[32m    <el-container class="app-container">[m
[32m+[m[32m      <!-- å¯¼å…¥çš„å¤´éƒ¨å¯¼èˆªæ ç»„ä»¶ -->[m
[32m+[m[32m      <Header />[m
[32m+[m[41m      [m
[32m+[m[32m      <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->[m
[32m+[m[32m      <el-main class="main-content">[m
[32m+[m[32m        <div class="portal-register">[m
[32m+[m[32m          <div class="register-container">[m
[32m+[m[32m            <h2 class="register-title">Cç«¯ç”¨æˆ·æ³¨å†Œ</h2>[m
[32m+[m[32m      <el-form ref="registerForm" :model="registerForm" :rules="registerRules" class="register-form">[m
[32m+[m[32m        <!-- å¤´åƒä¸Šä¼ åŒºåŸŸ -->[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m          <div class="avatar-upload-section">[m
[32m+[m[32m            <h3 class="avatar-title">ä¸Šä¼ å¤´åƒ</h3>[m
[32m+[m[32m            <el-upload[m
[32m+[m[32m              class="avatar-uploader"[m
[32m+[m[32m              :action="uploadUrl"[m
[32m+[m[32m              :headers="uploadHeaders"[m
[32m+[m[32m              :show-file-list="false"[m
[32m+[m[32m              :on-success="handleAvatarSuccess"[m
[32m+[m[32m              :before-upload="beforeAvatarUpload"[m
[32m+[m[32m              :auto-upload="true"[m
[32m+[m[32m              drag[m
[32m+[m[32m            >[m
[32m+[m[32m              <img v-if="registerForm.avatar" :src="registerForm.avatar" class="avatar" />[m
[32m+[m[32m              <template v-else>[m
[32m+[m[32m                <el-icon class="avatar-uploader-icon"><Plus /></el-icon>[m
[32m+[m[32m                <div class="avatar-hint">ç‚¹å‡»æˆ–æ‹–æ‹½æ–‡ä»¶åˆ°æ­¤å¤„ä¸Šä¼ </div>[m
[32m+[m[32m                <div class="avatar-tip">æ”¯æŒ JPGã€PNG æ ¼å¼ï¼Œä¸è¶…è¿‡ 2MB</div>[m
[32m+[m[32m              </template>[m
[32m+[m[32m            </el-upload>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[41m        [m
[32m+[m[32m        <el-form-item prop="username">[m
[32m+[m[32m          <el-input[m
[32m+[m[32m            v-model="registerForm.username"[m
[32m+[m[32m            type="text"[m
[32m+[m[32m            size="large"[m
[32m+[m[32m            auto-complete="off"[m
[32m+[m[32m            placeholder="è¯·è¾“å…¥ç”¨æˆ·å"[m
[32m+[m[32m          >[m
[32m+[m[32m            <template #prefix>[m
[32m+[m[32m              <svg-icon icon-class="user" class="el-input__icon input-icon" />[m
[32m+[m[32m            </template>[m
[32m+[m[32m          </el-input>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item prop="password">[m
[32m+[m[32m          <el-input[m
[32m+[m[32m            v-model="registerForm.password"[m
[32m+[m[32m            type="password"[m
[32m+[m[32m            size="large"[m
[32m+[m[32m            auto-complete="off"[m
[32m+[m[32m            placeholder="è¯·è¾“å…¥å¯†ç "[m
[32m+[m[32m          >[m
[32m+[m[32m            <template #prefix>[m
[32m+[m[32m              <svg-icon icon-class="password" class="el-input__icon input-icon" />[m
[32m+[m[32m            </template>[m
[32m+[m[32m          </el-input>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item prop="confirmPassword">[m
[32m+[m[32m          <el-input[m
[32m+[m[32m            v-model="registerForm.confirmPassword"[m
[32m+[m[32m            type="password"[m
[32m+[m[32m            size="large"[m
[32m+[m[32m            auto-complete="off"[m
[32m+[m[32m            placeholder="è¯·ç¡®è®¤å¯†ç "[m
[32m+[m[32m          >[m
[32m+[m[32m            <template #prefix>[m
[32m+[m[32m              <svg-icon icon-class="password" class="el-input__icon input-icon" />[m
[32m+[m[32m            </template>[m
[32m+[m[32m          </el-input>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item prop="nickname">[m
[32m+[m[32m          <el-input[m
[32m+[m[32m            v-model="registerForm.nickname"[m
[32m+[m[32m            type="text"[m
[32m+[m[32m            size="large"[m
[32m+[m[32m            auto-complete="off"[m
[32m+[m[32m            placeholder="è¯·è¾“å…¥æ˜µç§°"[m
[32m+[m[32m          >[m
[32m+[m[32m            <template #prefix>[m
[32m+[m[32m              <svg-icon icon-class="user" class="el-input__icon input-icon" />[m
[32m+[m[32m            </template>[m
[32m+[m[32m          </el-input>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item prop="code" v-if="captchaEnabled">[m
[32m+[m[32m          <el-input[m
[32m+[m[32m            v-model="registerForm.code"[m
[32m+[m[32m            size="large"[m
[32m+[m[32m            auto-complete="off"[m
[32m+[m[32m            placeholder="éªŒè¯ç "[m
[32m+[m[32m            style="width: 63%"[m
[32m+[m[32m          >[m
[32m+[m[32m            <template #prefix>[m
[32m+[m[32m              <svg-icon icon-class="validCode" class="el-input__icon input-icon" />[m
[32m+[m[32m            </template>[m
[32m+[m[32m          </el-input>[m
[32m+[m[32m          <div class="register-code">[m
[32m+[m[32m            <img :src="codeUrl" @click="getCode" class="register-code-img"/>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item style="width:100%;">[m
[32m+[m[32m          <el-button[m
[32m+[m[32m            :loading="loading"[m
[32m+[m[32m            size="large"[m
[32m+[m[32m            type="primary"[m
[32m+[m[32m            style="width:100%;"[m
[32m+[m[32m            @click.prevent="handleRegister"[m
[32m+[m[32m          >[m
[32m+[m[32m            <span v-if="!loading">æ³¨ å†Œ</span>[m
[32m+[m[32m            <span v-else>æ³¨ å†Œ ä¸­...</span>[m
[32m+[m[32m          </el-button>[m
[32m+[m[32m          <div style="float: right;">[m
[32m+[m[32m            <router-link class="link-type" :to="'/portal/login'">è¿”å›ç™»å½•</router-link>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m      </el-form>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </el-main>[m
[32m+[m[32m    </el-container>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script>[m
[32m+[m[32mimport { getCodeImg } from "@/api/login";[m
[32m+[m[32mimport { appRegister } from "@/api/appLogin";[m
[32m+[m[32mimport { Plus } from '@element-plus/icons-vue';[m
[32m+[m[32mimport { ElMessage } from 'element-plus';[m
[32m+[m[32mimport Header from '@/views/computerMarket/Header.vue';[m
[32m+[m
[32m+[m[32mexport default {[m
[32m+[m[32m  name: "PortalRegister",[m
[32m+[m[32m  components: {[m
[32m+[m[32m    Plus,[m
[32m+[m[32m    Header[m
[32m+[m[32m  },[m
[32m+[m[32m  data() {[m
[32m+[m[32m    const equalToPassword = (rule, value, callback) => {[m
[32m+[m[32m      if (this.registerForm.password !== value) {[m
[32m+[m[32m        callback(new Error("ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´"));[m
[32m+[m[32m      } else {[m
[32m+[m[32m        callback();[m
[32m+[m[32m      }[m
[32m+[m[32m    };[m
[32m+[m[32m    return {[m
[32m+[m[32m      codeUrl: "",[m
[32m+[m[32m      // å¤´åƒä¸Šä¼ é…ç½®[m
[32m+[m[32m      uploadUrl: '/app/user/avatar', // å¤´åƒä¸Šä¼ æ¥å£åœ°å€[m
[32m+[m[32m      uploadHeaders: {}, // ä¸Šä¼ è¯·æ±‚å¤´[m
[32m+[m[32m      registerForm: {[m
[32m+[m[32m        username: "",[m
[32m+[m[32m        password: "",[m
[32m+[m[32m        confirmPassword: "",[m
[32m+[m[32m        nickname: "",[m
[32m+[m[32m        avatar: "", // å¤´åƒå­—æ®µ[m
[32m+[m[32m        code: "",[m
[32m+[m[32m        uuid: ""[m
[32m+[m[32m      },[m
[32m+[m[32m      registerRules: {[m
[32m+[m[32m        username: [[m
[32m+[m[32m          { required: true, trigger: "blur", message: "è¯·è¾“å…¥æ‚¨çš„è´¦å·" },[m
[32m+[m[32m          { min: 2, max: 20, message: "ç”¨æˆ·è´¦å·é•¿åº¦å¿…é¡»ä»‹äº 2 å’Œ 20 ä¹‹é—´", trigger: "blur" }[m
[32m+[m[32m        ],[m
[32m+[m[32m        password: [[m
[32m+[m[32m          { required: true, trigger: "blur", message: "è¯·è¾“å…¥æ‚¨çš„å¯†ç " },[m
[32m+[m[32m          { min: 5, max: 20, message: "ç”¨æˆ·å¯†ç é•¿åº¦å¿…é¡»ä»‹äº 5 å’Œ 20 ä¹‹é—´", trigger: "blur" }[m
[32m+[m[32m        ],[m
[32m+[m[32m        confirmPassword: [[m
[32m+[m[32m          { required: true, trigger: "blur", message: "è¯·å†æ¬¡è¾“å…¥æ‚¨çš„å¯†ç " },[m
[32m+[m[32m          { required: true, validator: equalToPassword, trigger: "blur" }[m
[32m+[m[32m        ],[m
[32m+[m[32m        nickname: [[m
[32m+[m[32m          { required: true, trigger: "blur", message: "è¯·è¾“å…¥æ‚¨çš„æ˜µç§°" },[m
[32m+[m[32m          { max: 30, message: "æ˜µç§°é•¿åº¦ä¸èƒ½è¶…è¿‡30ä¸ªå­—ç¬¦", trigger: "blur" }[m
[32m+[m[32m        ],[m
[32m+[m[32m        code: [{ required: true, trigger: "change", message: "è¯·è¾“å…¥éªŒè¯ç " }][m
[32m+[m[32m      },[m
[32m+[m[32m      loading: false,[m
[32m+[m[32m      captchaEnabled: true[m
[32m+[m[32m    };[m
[32m+[m[32m  },[m
[32m+[m[32m  created() {[m
[32m+[m[32m    this.getCode();[m
[32m+[m[32m  },[m
[32m+[m[32m  methods: {[m
[32m+[m[32m    getCode() {[m
[32m+[m[32m      getCodeImg().then(res => {[m
[32m+[m[32m        this.captchaEnabled = res.captchaEnabled === undefined ? true : res.captchaEnabled;[m
[32m+[m[32m        if (this.captchaEnabled) {[m
[32m+[m[32m          this.codeUrl = "data:image/gif;base64," + res.img;[m
[32m+[m[32m          this.registerForm.uuid = res.uuid;[m
[32m+[m[32m        }[m
[32m+[m[32m      });[m
[32m+[m[32m    },[m
[32m+[m[41m    [m
[32m+[m[32m    // å¤´åƒä¸Šä¼ æˆåŠŸå¤„ç†[m
[32m+[m[32m    handleAvatarSuccess(response) {[m
[32m+[m[32m      if (response.code === 200) {[m
[32m+[m[32m        this.registerForm.avatar = response.data.avatar;[m
[32m+[m[32m        ElMessage.success('å¤´åƒä¸Šä¼ æˆåŠŸ');[m
[32m+[m[32m      } else {[m
[32m+[m[32m        ElMessage.error('å¤´åƒä¸Šä¼ å¤±è´¥');[m
[32m+[m[32m      }[m
[32m+[m[32m    },[m
[32m+[m[41m    [m
[32m+[m[32m    // å¤´åƒä¸Šä¼ å‰éªŒè¯[m
[32m+[m[32m    beforeAvatarUpload(file) {[m
[32m+[m[32m      const isJPG = file.type === 'image/jpeg' || file.type === 'image/png';[m
[32m+[m[32m      const isLt2M = file.size / 1024 / 1024 < 2;[m
[32m+[m
[32m+[m[32m      if (!isJPG) {[m
[32m+[m[32m        ElMessage.error('ä¸Šä¼ å¤´åƒå›¾ç‰‡åªèƒ½æ˜¯ JPG/PNG æ ¼å¼!');[m
[32m+[m[32m      }[m
[32m+[m[32m      if (!isLt2M) {[m
[32m+[m[32m        ElMessage.error('ä¸Šä¼ å¤´åƒå›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡ 2MB!');[m
[32m+[m[32m      }[m
[32m+[m[32m      return isJPG && isLt2M;[m
[32m+[m[32m    },[m
[32m+[m[41m    [m
[32m+[m[32m    handleRegister() {[m
[32m+[m[32m      this.$refs.registerForm.validate(valid => {[m
[32m+[m[32m        if (valid) {[m
[32m+[m[32m          this.loading = true;[m
[32m+[m[32m          appRegister({[m
[32m+[m[32m            username: this.registerForm.username,[m
[32m+[m[32m            password: this.registerForm.password,[m
[32m+[m[32m            nickname: this.registerForm.nickname,[m
[32m+[m[32m            avatar: this.registerForm.avatar, // ä¼ é€’å¤´åƒä¿¡æ¯[m
[32m+[m[32m            code: this.registerForm.code,[m
[32m+[m[32m            uuid: this.registerForm.uuid[m
[32m+[m[32m          }).then(res => {[m
[32m+[m[32m            ElMessage.success('æ³¨å†ŒæˆåŠŸï¼Œè¯·ç™»å½•');[m
[32m+[m[32m            this.$router.push('/portal/login');[m
[32m+[m[32m          }).catch(err => {[m
[32m+[m[32m            console.error('æ³¨å†Œå¤±è´¥:', err);[m
[32m+[m[32m            this.loading = false;[m
[32m+[m[32m            if (this.captchaEnabled) {[m
[32m+[m[32m              this.getCode();[m
[32m+[m[32m            }[m
[32m+[m[32m            // æ˜¾ç¤ºå…·ä½“çš„é”™è¯¯ä¿¡æ¯[m
[32m+[m[32m            if (err && err.message) {[m
[32m+[m[32m              ElMessage.error(err.message);[m
[32m+[m[32m            } else if (typeof err === 'string') {[m
[32m+[m[32m              ElMessage.error(err);[m
[32m+[m[32m            } else {[m
[32m+[m[32m              ElMessage.error('æ³¨å†Œå¤±è´¥ï¼Œè¯·æ£€æŸ¥è¾“å…¥ä¿¡æ¯');[m
[32m+[m[32m            }[m
[32m+[m[32m          });[m
[32m+[m[32m        }[m
[32m+[m[32m      });[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style rel="stylesheet/scss" lang="scss" scoped>[m
[32m+[m[32m/* å¸ƒå±€æ ·å¼ */[m
[32m+[m[32m.common-layout {[m
[32m+[m[32m  min-height: 100vh;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.app-container {[m
[32m+[m[32m  background-color: #FAFAF8;[m
[32m+[m[32m  color: #000000;[m
[32m+[m[32m  min-height: 100vh;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.main-content {[m
[32m+[m[32m  background-color: #FAFAF8;[m
[32m+[m[32m  padding: 20px;[m
[32m+[m[32m  margin-top: 70px; /* ä¸ºå›ºå®šå¯¼èˆªæ ç•™å‡ºç©ºé—´ */[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  justify-content: center;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.portal-register {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  justify-content: center;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m  height: 100%;[m
[32m+[m[32m  background-image: url("../assets/images/login-background.jpg");[m
[32m+[m[32m  background-size: cover;[m
[32m+[m[32m  border-radius: 8px;[m
[32m+[m[32m  overflow: hidden;[m
[32m+[m[32m  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);[m
[32m+[m[32m}[m
[32m+[m[32m.register-container {[m
[32m+[m[32m  width: 400px;[m
[32m+[m[32m  padding: 30px;[m
[32m+[m[32m  background: #fff;[m
[32m+[m[32m  border-radius: 8px;[m
[32m+[m[32m  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);[m
[32m+[m[32m}[m
[32m+[m[32m.register-title {[m
[32m+[m[32m  margin: 0 auto 30px auto;[m
[32m+[m[32m  text-align: center;[m
[32m+[m[32m  color: #707070;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* å¤´åƒä¸Šä¼ åŒºåŸŸæ ·å¼ */[m
[32m+[m[32m.avatar-upload-section {[m
[32m+[m[32m  margin-bottom: 20px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.avatar-title {[m
[32m+[m[32m  margin: 0 0 15px 0;[m
[32m+[m[32m  font-size: 16px;[m
[32m+[m[32m  font-weight: 600;[m
[32m+[m[32m  color: #303133;[m
[32m+[m[32m  text-align: center;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.avatar-uploader {[m
[32m+[m[32m  border: 1px dashed #d9d9d9;[m
[32m+[m[32m  border-radius: 12px;[m
[32m+[m[32m  cursor: pointer;[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m  overflow: hidden;[m
[32m+[m[32m  transition: all 0.3s ease;[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  flex-direction: column;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  justify-content: center;[m
[32m+[m[32m  padding: 20px 0;[m
[32m+[m[32m  background-color: #fafafa;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.avatar-uploader:hover {[m
[32m+[m[32m  border-color: #409eff;[m
[32m+[m[32m  background-color: #ecf5ff;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.avatar-uploader-icon {[m
[32m+[m[32m  font-size: 32px;[m
[32m+[m[32m  color: #8c939d;[m
[32m+[m[32m  margin-bottom: 10px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.avatar {[m
[32m+[m[32m  width: 120px;[m
[32m+[m[32m  height: 120px;[m
[32m+[m[32m  border-radius: 50%;[m
[32m+[m[32m  object-fit: cover;[m
[32m+[m[32m  border: 3px solid #fff;[m
[32m+[m[32m  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.avatar-hint {[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m  color: #606266;[m
[32m+[m[32m  margin-bottom: 5px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.avatar-tip {[m
[32m+[m[32m  font-size: 12px;[m
[32m+[m[32m  color: #909399;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.register-form {[m
[32m+[m[32m  .el-input {[m
[32m+[m[32m    height: 38px;[m
[32m+[m[32m    input {[m
[32m+[m[32m      height: 38px;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  .input-icon {[m
[32m+[m[32m    height: 39px;[m
[32m+[m[32m    width: 14px;[m
[32m+[m[32m    margin-left: 2px;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m.register-code {[m
[32m+[m[32m  width: 33%;[m
[32m+[m[32m  height: 38px;[m
[32m+[m[32m  float: right;[m
[32m+[m[32m  img {[m
[32m+[m[32m    cursor: pointer;[m
[32m+[m[32m    vertical-align: middle;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m.register-code-img {[m
[32m+[m[32m  height: 38px;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/views/portal/trade/checkout.vue b/src/views/portal/trade/checkout.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..5a45b97c[m
[1m--- /dev/null[m
[1m+++ b/src/views/portal/trade/checkout.vue[m
[36m@@ -0,0 +1,528 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="common-layout">[m
[32m+[m[32m    <el-container class="app-container">[m
[32m+[m[32m      <!-- å¯¼å…¥çš„å¤´éƒ¨å¯¼èˆªæ ç»„ä»¶ -->[m
[32m+[m[32m      <Header />[m
[32m+[m[41m      [m
[32m+[m[32m      <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->[m
[32m+[m[32m      <el-main class="main-content">[m
[32m+[m[32m        <div class="checkout-container">[m
[32m+[m[32m          <div class="content-wrapper">[m
[32m+[m[32m      <!-- æ­¥éª¤æ¡ -->[m
[32m+[m[32m      <el-steps :active="1" finish-status="success" simple class="mb-20">[m
[32m+[m[32m        <el-step title="æˆ‘çš„è´­ç‰©è½¦" icon="ShoppingCart" />[m
[32m+[m[32m        <el-step title="å¡«å†™æ ¸å¯¹è®¢å•ä¿¡æ¯" icon="Edit" />[m
[32m+[m[32m        <el-step title="æˆåŠŸæäº¤è®¢å•" icon="CircleCheck" />[m
[32m+[m[32m      </el-steps>[m
[32m+[m
[32m+[m[32m      <!-- 1. æ”¶è´§åœ°å€é€‰æ‹© -->[m
[32m+[m[32m      <el-card class="section-card mb-20">[m
[32m+[m[32m        <template #header>[m
[32m+[m[32m          <div class="section-header">[m
[32m+[m[32m            <span class="title"><el-icon><Location /></el-icon> æ”¶è´§äººä¿¡æ¯</span>[m
[32m+[m[32m            <el-button link type="primary" @click="openAddressModal">åˆ‡æ¢åœ°å€</el-button>[m
[32m+[m[32m            <el-button link type="primary" @click="$router.push('/portal/user/address')">ç®¡ç†åœ°å€</el-button>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </template>[m
[32m+[m[41m        [m
[32m+[m[32m        <div v-if="currentAddress" class="current-address-box">[m
[32m+[m[32m          <div class="addr-name">{{ currentAddress.realName }} <span class="phone">{{ currentAddress.phone }}</span></div>[m
[32m+[m[32m          <div class="addr-detail">[m
[32m+[m[32m            <el-tag v-if="currentAddress.isDefault === '1'" size="small" type="danger">é»˜è®¤</el-tag>[m
[32m+[m[32m            {{ currentAddress.province }} {{ currentAddress.city }} {{ currentAddress.district }} {{ currentAddress.detailAddress }}[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </div>[m
[32m+[m[32m        <div v-else class="no-address">[m
[32m+[m[32m          <el-empty description="æ‚¨è¿˜æ²¡æœ‰é€‰æ‹©æ”¶è´§åœ°å€" :image-size="60">[m
[32m+[m[32m            <el-button type="primary" @click="openAddressModal">é€‰æ‹©æˆ–æ·»åŠ åœ°å€</el-button>[m
[32m+[m[32m          </el-empty>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </el-card>[m
[32m+[m
[32m+[m[32m      <!-- 2. å•†å“æ¸…å• -->[m
[32m+[m[32m      <el-card class="section-card mb-20">[m
[32m+[m[32m        <template #header>[m
[32m+[m[32m          <div class="section-header">[m
[32m+[m[32m            <span class="title"><el-icon><Goods /></el-icon> å•†å“æ¸…å•</span>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </template>[m
[32m+[m
[32m+[m[32m        <el-table :data="checkoutList" border style="width: 100%">[m
[32m+[m[32m          <el-table-column label="å•†å“ä¿¡æ¯" min-width="300">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m              <div class="product-info">[m
[32m+[m[32m                <img :src="scope.row.productImg || '/default-img.png'" class="product-img" />[m
[32m+[m[32m                <div class="product-detail">[m
[32m+[m[32m                  <div class="name">{{ scope.row.productName }}</div>[m
[32m+[m[32m                  <div class="tags">[m
[32m+[m[32m                    <el-tag v-if="scope.row.businessType === '1'" type="warning" size="small">ç§Ÿèµ</el-tag>[m
[32m+[m[32m                    <el-tag v-else type="success" size="small">è´­ä¹°</el-tag>[m
[32m+[m[32m                  </div>[m
[32m+[m[32m                </div>[m
[32m+[m[32m              </div>[m
[32m+[m[32m            </template>[m
[32m+[m[32m          </el-table-column>[m
[32m+[m[41m          [m
[32m+[m[32m          <el-table-column label="å•ä»·/æ—¥ç§Ÿé‡‘" width="150" align="center">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m              <span class="price">Â¥{{ scope.row.price }}</span>[m
[32m+[m[32m              <span v-if="scope.row.businessType === '1'" class="unit">/å¤©</span>[m
[32m+[m[32m            </template>[m
[32m+[m[32m          </el-table-column>[m
[32m+[m
[32m+[m[32m          <el-table-column label="æ•°é‡" width="100" align="center" prop="quantity" />[m
[32m+[m
[32m+[m[32m          <el-table-column label="ç§Ÿèµé…ç½® (ä»…ç§Ÿèµå•†å“)" min-width="320">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m              <div v-if="scope.row.businessType === '1'">[m
[32m+[m[32m                <el-date-picker[m
[32m+[m[32m                  v-model="scope.row.daterange"[m
[32m+[m[32m                  type="daterange"[m
[32m+[m[32m                  range-separator="è‡³"[m
[32m+[m[32m                  start-placeholder="èµ·ç§Ÿæ—¥æœŸ"[m
[32m+[m[32m                  end-placeholder="å½’è¿˜æ—¥æœŸ"[m
[32m+[m[32m                  :disabled-date="disabledDate"[m
[32m+[m[32m                  @change="(val) => handleDateChange(val, scope.row)"[m
[32m+[m[32m                  style="width: 100%"[m
[32m+[m[32m                  size="default"[m
[32m+[m[32m                />[m
[32m+[m[32m                <div v-if="scope.row.rentDays > 0" class="rent-days-tip">[m
[32m+[m[32m                  å…±ç§Ÿ {{ scope.row.rentDays }} å¤©[m
[32m+[m[32m                </div>[m
[32m+[m[32m              </div>[m
[32m+[m[32m              <span v-else class="text-gray">æ— é¡»é…ç½®</span>[m
[32m+[m[32m            </template>[m
[32m+[m[32m          </el-table-column>[m
[32m+[m
[32m+[m[32m          <el-table-column label="å°è®¡" width="150" align="center">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m              <span class="subtotal">Â¥{{ calculateSubtotal(scope.row) }}</span>[m
[32m+[m[32m            </template>[m
[32m+[m[32m          </el-table-column>[m
[32m+[m[32m        </el-table>[m
[32m+[m
[32m+[m[32m        <div class="remark-section mt-20">[m
[32m+[m[32m          <el-input[m
[32m+[m[32m            v-model="orderRemark"[m
[32m+[m[32m            type="textarea"[m
[32m+[m[32m            :rows="2"[m
[32m+[m[32m            placeholder="è®¢å•å¤‡æ³¨ï¼šå¦‚æœ‰ç‰¹æ®Šéœ€æ±‚ï¼Œè¯·åœ¨æ­¤å¤„ç•™è¨€"[m
[32m+[m[32m          />[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </el-card>[m
[32m+[m[32m    </div>[m
[32m+[m
[32m+[m[32m    <!-- åº•éƒ¨ç»“ç®—æ  -->[m
[32m+[m[32m    <div class="checkout-footer">[m
[32m+[m[32m      <div class="footer-content">[m
[32m+[m[32m        <div class="total-info">[m
[32m+[m[32m          <span>å…± <span class="highlight">{{ totalCount }}</span> ä»¶å•†å“</span>[m
[32m+[m[32m          <span class="ml-20">åº”ä»˜æ€»é¢ï¼š</span>[m
[32m+[m[32m          <span class="final-price">Â¥{{ finalTotalPrice }}</span>[m
[32m+[m[32m        </div>[m
[32m+[m[32m        <el-button[m[41m [m
[32m+[m[32m          type="danger"[m[41m [m
[32m+[m[32m          size="large"[m[41m [m
[32m+[m[32m          class="submit-btn"[m[41m [m
[32m+[m[32m          @click="submitOrder"[m[41m [m
[32m+[m[32m          :loading="submitting"[m
[32m+[m[32m        >[m
[32m+[m[32m          æäº¤è®¢å•[m
[32m+[m[32m        </el-button>[m
[32m+[m[32m      </div>[m
[32m+[m[32m    </div>[m
[32m+[m
[32m+[m[32m    <!-- åœ°å€é€‰æ‹©å¼¹çª— -->[m
[32m+[m[32m    <el-dialog v-model="addressVisible" title="é€‰æ‹©æ”¶è´§åœ°å€" width="600px">[m
[32m+[m[32m      <div class="address-list">[m
[32m+[m[32m        <div[m[41m [m
[32m+[m[32m          v-for="addr in addressList"[m[41m [m
[32m+[m[32m          :key="addr.addressId"[m[41m [m
[32m+[m[32m          class="address-option"[m
[32m+[m[32m          :class="{ active: selectedAddressId === addr.addressId }"[m
[32m+[m[32m          @click="selectedAddressId = addr.addressId"[m
[32m+[m[32m        >[m
[32m+[m[32m          <div class="opt-name">{{ addr.realName }} {{ addr.phone }}</div>[m
[32m+[m[32m          <div class="opt-detail">{{ addr.province }}{{ addr.city }}{{ addr.district }}{{ addr.detailAddress }}</div>[m
[32m+[m[32m          <el-icon v-if="selectedAddressId === addr.addressId" class="check-icon"><Select /></el-icon>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </div>[m
[32m+[m[32m      <div v-if="addressList.length === 0" class="text-center py-4">[m
[32m+[m[32m        <el-button type="primary" @click="$router.push('/portal/user/address')">å»ç®¡ç†åœ°å€</el-button>[m
[32m+[m[32m      </div>[m
[32m+[m[32m      <template #footer>[m
[32m+[m[32m        <el-button @click="addressVisible = false">å–æ¶ˆ</el-button>[m
[32m+[m[32m        <el-button type="primary" @click="confirmAddressSelection">ç¡®å®š</el-button>[m
[32m+[m[32m      </template>[m
[32m+[m[32m    </el-dialog>[m
[32m+[m[32m        </div>[m
[32m+[m[41m      [m
[32m+[m[32m    </el-main>[m
[32m+[m[32m  </el-container>[m
[32m+[m[32m</div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { ref, computed, onMounted } from 'vue';[m
[32m+[m[32mimport { useRoute, useRouter } from 'vue-router';[m
[32m+[m[32mimport { ElMessage, ElMessageBox } from 'element-plus';[m
[32m+[m[32mimport { ShoppingCart, Edit, CircleCheck, Location, Goods, Select } from '@element-plus/icons-vue';[m
[32m+[m[32mimport { listCart } from "@/api/shop/cart";[m
[32m+[m[32mimport { listAddress } from "@/api/portal/address";[m
[32m+[m[32mimport { createOrder } from "@/api/portal/order";[m
[32m+[m[32mimport { getAppToken } from '@/utils/auth';[m
[32m+[m[32mimport Header from '@/views/computerMarket/Header.vue';[m
[32m+[m
[32m+[m[32mconst route = useRoute();[m
[32m+[m[32mconst router = useRouter();[m
[32m+[m
[32m+[m[32m// æ•°æ®[m
[32m+[m[32mconst checkoutList = ref([]);[m
[32m+[m[32mconst addressList = ref([]);[m
[32m+[m[32mconst currentAddress = ref(null);[m
[32m+[m[32mconst selectedAddressId = ref(null);[m
[32m+[m[32mconst orderRemark = ref('');[m
[32m+[m[32mconst addressVisible = ref(false);[m
[32m+[m[32mconst submitting = ref(false);[m
[32m+[m
[32m+[m[32m// è®¡ç®—å±æ€§[m
[32m+[m[32mconst totalCount = computed(() => checkoutList.value.length);[m
[32m+[m
[32m+[m[32mconst finalTotalPrice = computed(() => {[m
[32m+[m[32m  let total = 0;[m
[32m+[m[32m  checkoutList.value.forEach(item => {[m
[32m+[m[32m    total += calculateSubtotal(item);[m
[32m+[m[32m  });[m
[32m+[m[32m  return total.toFixed(2);[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m// ç¦ç”¨è¿‡æœŸæ—¥æœŸï¼ˆä»Šå¤©ä¹‹å‰ï¼‰[m
[32m+[m[32mconst disabledDate = (time) => {[m
[32m+[m[32m  return time.getTime() < Date.now() - 8.64e7;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// ç›‘å¬æ—¥æœŸå˜åŒ–è®¡ç®—å¤©æ•°[m
[32m+[m[32mconst handleDateChange = (val, row) => {[m
[32m+[m[32m  if (val && val.length === 2) {[m
[32m+[m[32m    const start = val[0].getTime();[m
[32m+[m[32m    const end = val[1].getTime();[m
[32m+[m[32m    // å‘ä¸Šå–æ•´è®¡ç®—å¤©æ•°ï¼Œè‡³å°‘ç®—1å¤©[m
[32m+[m[32m    let days = Math.ceil((end - start) / (1000 * 3600 * 24));[m
[32m+[m[32m    if (days <= 0) days = 1;[m
[32m+[m[32m    row.rentDays = days;[m
[32m+[m[32m  } else {[m
[32m+[m[32m    row.rentDays = 0;[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// è®¡ç®—å•é¡¹å°è®¡[m
[32m+[m[32mconst calculateSubtotal = (item) => {[m
[32m+[m[32m  if (item.businessType === '1') {[m
[32m+[m[32m    // ç§Ÿèµï¼šå•ä»· * æ•°é‡ * å¤©æ•°[m
[32m+[m[32m    const days = item.rentDays || 0;[m
[32m+[m[32m    return item.price * item.quantity * days;[m
[32m+[m[32m  } else {[m
[32m+[m[32m    // è´­ä¹°ï¼šå•ä»· * æ•°é‡[m
[32m+[m[32m    return item.price * item.quantity;[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// åˆå§‹åŒ–åŠ è½½[m
[32m+[m[32mconst init = async () => {[m
[32m+[m[32m  // æ£€æŸ¥ç™»å½•çŠ¶æ€ - ç›´æ¥ä½¿ç”¨localStorageé¿å…ä»»ä½•ä¸­é—´å‡½æ•°é—®é¢˜[m
[32m+[m[32m  const token = localStorage.getItem('app_token');[m
[32m+[m[32m  console.log("è®¢å•é¡µé¢initï¼Œä»localStorageè·å–token:", token);[m
[32m+[m[41m  [m
[32m+[m[32m  if (!token) {[m
[32m+[m[32m    ElMessage.error("è¯·å…ˆç™»å½•");[m
[32m+[m[32m    router.push('/portal/login?redirect=' + encodeURIComponent(route.fullPath));[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  const cartIdsStr = route.query.ids;[m
[32m+[m[32m  if (!cartIdsStr) {[m
[32m+[m[32m    ElMessage.error("å‚æ•°é”™è¯¯ï¼Œæœªé€‰æ‹©å•†å“");[m
[32m+[m[32m    router.push('/computer-market/cart');[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m[32m  const cartIdArr = cartIdsStr.split(',').map(Number);[m
[32m+[m
[32m+[m[32m  // 1. è·å–è´­ç‰©è½¦æ•°æ®å¹¶è¿‡æ»¤[m
[32m+[m[32m  try {[m
[32m+[m[32m    const res = await listCart(); // å‡è®¾è¿™ä¸ªæ¥å£è¿”å›è¯¥ç”¨æˆ·æ‰€æœ‰è´­ç‰©è½¦é¡¹[m
[32m+[m[32m    const allItems = res.rows || res.data || [];[m
[32m+[m[41m    [m
[32m+[m[32m    // è¿‡æ»¤å‡ºé€‰ä¸­çš„å•†å“[m
[32m+[m[32m    checkoutList.value = allItems.filter(item => cartIdArr.includes(item.cartId)).map(item => ({[m
[32m+[m[32m      ...item,[m
[32m+[m[32m      daterange: [], // åˆå§‹åŒ–æ—¥æœŸèŒƒå›´[m
[32m+[m[32m      rentDays: 0    // åˆå§‹åŒ–ç§ŸæœŸ[m
[32m+[m[32m    }));[m
[32m+[m
[32m+[m[32m    if (checkoutList.value.length === 0) {[m
[32m+[m[32m      ElMessage.warning("æœªæ‰¾åˆ°æŒ‡å®šå•†å“ï¼Œè¯·é‡æ–°é€‰æ‹©");[m
[32m+[m[32m      router.push('/computer-market/cart');[m
[32m+[m[32m    }[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    console.error("Failed to fetch cart items", error);[m
[32m+[m[32m    if (error && error.toString().includes('è®¤è¯å¤±è´¥')) {[m
[32m+[m[32m      ElMessage.error("ç™»å½•çŠ¶æ€å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•");[m
[32m+[m[32m      router.push('/portal/login?redirect=' + encodeURIComponent(route.fullPath));[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // 2. è·å–åœ°å€åˆ—è¡¨å¹¶è®¾ç½®é»˜è®¤[m
[32m+[m[32m  try {[m
[32m+[m[32m    console.log("å‡†å¤‡è°ƒç”¨listAddressï¼Œå½“å‰token:", token);[m
[32m+[m[32m    console.log("å½“å‰è·¯ç”±å®Œæ•´è·¯å¾„:", route.fullPath);[m
[32m+[m[32m    console.log("å½“å‰è·¯ç”±queryå‚æ•°:", route.query);[m
[32m+[m[41m    [m
[32m+[m[32m    const addrRes = await listAddress();[m
[32m+[m[32m    console.log("listAddressè¿”å›ç»“æœ:", addrRes);[m
[32m+[m[32m    addressList.value = addrRes.data || [];[m
[32m+[m[32m    const def = addressList.value.find(a => a.isDefault === '1');[m
[32m+[m[32m    if (def) {[m
[32m+[m[32m      currentAddress.value = def;[m
[32m+[m[32m      selectedAddressId.value = def.addressId;[m
[32m+[m[32m    } else if (addressList.value.length > 0) {[m
[32m+[m[32m      currentAddress.value = addressList.value[0];[m
[32m+[m[32m      selectedAddressId.value = addressList.value[0].addressId;[m
[32m+[m[32m    }[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    console.error("Failed to fetch addresses", error);[m
[32m+[m[32m    if (error && error.toString().includes('è®¤è¯å¤±è´¥')) {[m
[32m+[m[32m      ElMessage.error("ç™»å½•çŠ¶æ€å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•");[m
[32m+[m[32m      router.push('/portal/login?redirect=' + encodeURIComponent(route.fullPath));[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// åœ°å€ç›¸å…³æ“ä½œ[m
[32m+[m[32mconst openAddressModal = () => {[m
[32m+[m[32m  if (currentAddress.value) {[m
[32m+[m[32m    selectedAddressId.value = currentAddress.value.addressId;[m
[32m+[m[32m  }[m
[32m+[m[32m  addressVisible.value = true;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mconst confirmAddressSelection = () => {[m
[32m+[m[32m  const selected = addressList.value.find(a => a.addressId === selectedAddressId.value);[m
[32m+[m[32m  if (selected) {[m
[32m+[m[32m    currentAddress.value = selected;[m
[32m+[m[32m  }[m
[32m+[m[32m  addressVisible.value = false;[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// æäº¤è®¢å•[m
[32m+[m[32mconst submitOrder = async () => {[m
[32m+[m[32m  // æ£€æŸ¥ç™»å½•çŠ¶æ€[m
[32m+[m[32m  const token = getAppToken();[m
[32m+[m[32m  if (!token) {[m
[32m+[m[32m    ElMessage.error("è¯·å…ˆç™»å½•");[m
[32m+[m[32m    router.push('/portal/login?redirect=' + encodeURIComponent(route.fullPath));[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  if (!currentAddress.value) {[m
[32m+[m[32m    ElMessage.warning("è¯·å…ˆé€‰æ‹©æ”¶è´§åœ°å€");[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // æ ¡éªŒç§Ÿèµå•†å“æ˜¯å¦é€‰äº†æ—¶é—´[m
[32m+[m[32m  for (const item of checkoutList.value) {[m
[32m+[m[32m    if (item.businessType === '1' && (!item.daterange || item.daterange.length !== 2)) {[m
[32m+[m[32m      ElMessage.warning(`å•†å“ã€${item.productName}ã€‘æ˜¯ç§Ÿèµå•†å“ï¼Œè¯·é€‰æ‹©èµ·ç§Ÿå’Œå½’è¿˜æ—¥æœŸ`);[m
[32m+[m[32m      return;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  submitting.value = true;[m
[32m+[m
[32m+[m[32m  // æ„é€ åç«¯éœ€è¦çš„å…¥å‚æ ¼å¼[m
[32m+[m[32m  const payload = {[m
[32m+[m[32m    addressId: currentAddress.value.addressId,[m
[32m+[m[32m    remark: orderRemark.value,[m
[32m+[m[32m    items: checkoutList.value.map(item => {[m
[32m+[m[32m      const baseItem = {[m
[32m+[m[32m        cartId: item.cartId,[m
[32m+[m[32m        productId: item.productId,[m
[32m+[m[32m        quantity: item.quantity,[m
[32m+[m[32m        businessType: item.businessType[m
[32m+[m[32m      };[m
[32m+[m[32m      // å¦‚æœæ˜¯ç§Ÿèµï¼ŒåŠ å…¥æ—¶é—´[m
[32m+[m[32m      if (item.businessType === '1') {[m
[32m+[m[32m        baseItem.startDate = item.daterange[0];[m
[32m+[m[32m        baseItem.endDate = item.daterange[1];[m
[32m+[m[32m      }[m
[32m+[m[32m      return baseItem;[m
[32m+[m[32m    })[m
[32m+[m[32m  };[m
[32m+[m
[32m+[m[32m  try {[m
[32m+[m[32m    const res = await createOrder(payload);[m
[32m+[m[32m    ElMessage.success("è®¢å•æäº¤æˆåŠŸï¼");[m
[32m+[m[32m    // è·³è½¬åˆ°æ”¯ä»˜é¡µï¼Œä¼ é€’è®¢å•å·å’Œé‡‘é¢[m
[32m+[m[32m    // åç«¯è¿”å›çš„æ˜¯è®¢å•å·æ•°ç»„ï¼Œå–ç¬¬ä¸€ä¸ªè®¢å•å·[m
[32m+[m[32m    const orderNo = res.data?.[0] || res.data?.orderNo || res.orderNo;[m
[32m+[m[32m    const totalAmount = finalTotalPrice.value;[m
[32m+[m[41m    [m
[32m+[m[32m    router.push({[m
[32m+[m[32m      path: '/portal/trade/pay',[m
[32m+[m[32m      query: {[m
[32m+[m[32m        orderNo: orderNo,[m
[32m+[m[32m        amount: totalAmount[m
[32m+[m[32m      }[m
[32m+[m[32m    });[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    console.error("Order creation failed", error);[m
[32m+[m[32m    if (error && error.toString().includes('è®¤è¯å¤±è´¥')) {[m
[32m+[m[32m      ElMessage.error("ç™»å½•çŠ¶æ€å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•");[m
[32m+[m[32m      router.push('/portal/login?redirect=' + encodeURIComponent(route.fullPath));[m
[32m+[m[32m    }[m
[32m+[m[32m  } finally {[m
[32m+[m[32m    submitting.value = false;[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32monMounted(() => {[m
[32m+[m[32m  init();[m
[32m+[m[32m});[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style scoped>[m
[32m+[m[32m/* å¸ƒå±€æ ·å¼ */[m
[32m+[m[32m.common-layout {[m
[32m+[m[32m  min-height: 100vh;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.app-container {[m
[32m+[m[32m  background-color: #FAFAF8;[m
[32m+[m[32m  color: #000000;[m
[32m+[m[32m  min-height: 100vh;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.main-content {[m
[32m+[m[32m  background-color: #FAFAF8;[m
[32m+[m[32m  padding: 0;[m
[32m+[m[32m  margin-top: 70px; /* ä¸ºå›ºå®šå¯¼èˆªæ ç•™å‡ºç©ºé—´ */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.checkout-container {[m
[32m+[m[32m  background-color: #f5f7fa;[m
[32m+[m[32m  min-height: calc(100vh - 70px);[m
[32m+[m[32m  padding-bottom: 80px; /* ç•™å‡ºåº•éƒ¨æ ç©ºé—´ */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.content-wrapper {[m
[32m+[m[32m  max-width: 1200px;[m
[32m+[m[32m  margin: 0 auto;[m
[32m+[m[32m  padding: 20px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.mb-20 { margin-bottom: 20px; }[m
[32m+[m[32m.mt-20 { margin-top: 20px; }[m
[32m+[m[32m.text-gray { color: #909399; font-size: 12px; }[m
[32m+[m
[32m+[m[32m.section-card {[m
[32m+[m[32m  border-radius: 8px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.section-header {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  justify-content: space-between;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.section-header .title {[m
[32m+[m[32m  font-size: 16px;[m
[32m+[m[32m  font-weight: bold;[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  gap: 5px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* åœ°å€æ ·å¼ */[m
[32m+[m[32m.current-address-box {[m
[32m+[m[32m  padding: 10px;[m
[32m+[m[32m  border: 1px solid #e4e7ed;[m
[32m+[m[32m  background: #fcfcfc;[m
[32m+[m[32m  border-radius: 4px;[m
[32m+[m[32m}[m
[32m+[m[32m.addr-name { font-weight: bold; font-size: 16px; margin-bottom: 5px; }[m
[32m+[m[32m.addr-name .phone { margin-left: 10px; font-weight: normal; }[m
[32m+[m[32m.addr-detail { color: #606266; line-height: 1.5; }[m
[32m+[m
[32m+[m[32m.address-option {[m
[32m+[m[32m  padding: 15px;[m
[32m+[m[32m  border: 1px solid #dcdfe6;[m
[32m+[m[32m  border-radius: 4px;[m
[32m+[m[32m  margin-bottom: 10px;[m
[32m+[m[32m  cursor: pointer;[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m  transition: all 0.2s;[m
[32m+[m[32m}[m
[32m+[m[32m.address-option:hover { border-color: #409eff; }[m
[32m+[m[32m.address-option.active { border-color: #409eff; background-color: #ecf5ff; }[m
[32m+[m[32m.opt-name { font-weight: bold; margin-bottom: 5px; }[m
[32m+[m[32m.check-icon { position: absolute; right: 15px; top: 50%; transform: translateY(-50%); color: #409eff; font-weight: bold; }[m
[32m+[m
[32m+[m[32m/* å•†å“åˆ—è¡¨æ ·å¼ */[m
[32m+[m[32m.product-info {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  gap: 10px;[m
[32m+[m[32m}[m
[32m+[m[32m.product-img {[m
[32m+[m[32m  width: 60px;[m
[32m+[m[32m  height: 60px;[m
[32m+[m[32m  object-fit: cover;[m
[32m+[m[32m  border-radius: 4px;[m
[32m+[m[32m  border: 1px solid #eee;[m
[32m+[m[32m}[m
[32m+[m[32m.product-detail .name {[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m  margin-bottom: 5px;[m
[32m+[m[32m  line-height: 1.4;[m
[32m+[m[32m}[m
[32m+[m[32m.price { font-weight: bold; color: #303133; }[m
[32m+[m[32m.unit { font-size: 12px; color: #909399; }[m
[32m+[m[32m.subtotal { color: #f56c6c; font-weight: bold; font-size: 16px; }[m
[32m+[m[32m.rent-days-tip { font-size: 12px; color: #e6a23c; margin-top: 4px; }[m
[32m+[m
[32m+[m[32m/* åº•éƒ¨ç»“ç®—æ  */[m
[32m+[m[32m.checkout-footer {[m
[32m+[m[32m  position: fixed;[m
[32m+[m[32m  bottom: 0;[m
[32m+[m[32m  left: 0;[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m  background: #fff;[m
[32m+[m[32m  box-shadow: 0 -2px 10px rgba(0,0,0,0.05);[m
[32m+[m[32m  z-index: 100;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.footer-content {[m
[32m+[m[32m  max-width: 1200px;[m
[32m+[m[32m  margin: 0 auto;[m
[32m+[m[32m  height: 70px;[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  justify-content: flex-end;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  padding: 0 20px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.total-info {[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m  margin-right: 20px;[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: baseline;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.ml-20 { margin-left: 20px; }[m
[32m+[m[32m.highlight { color: #f56c6c; font-weight: bold; margin: 0 4px; }[m
[32m+[m[32m.final-price { font-size: 28px; color: #f56c6c; font-weight: bold; }[m
[32m+[m
[32m+[m[32m.submit-btn {[m
[32m+[m[32m  width: 160px;[m
[32m+[m[32m  font-size: 18px;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/views/portal/trade/pay.vue b/src/views/portal/trade/pay.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..065f1890[m
[1m--- /dev/null[m
[1m+++ b/src/views/portal/trade/pay.vue[m
[36m@@ -0,0 +1,277 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="app-container pay-container">[m
[32m+[m[32m    <el-card class="pay-card">[m
[32m+[m[32m      <template #header>[m
[32m+[m[32m        <div class="card-header">[m
[32m+[m[32m          <span class="title">æ”¶é“¶å°</span>[m
[32m+[m[32m          <span class="tips">è¯·åœ¨ 15:00 åˆ†é’Ÿå†…å®Œæˆæ”¯ä»˜</span>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </template>[m
[32m+[m
[32m+[m[32m      <div class="pay-content">[m
[32m+[m[32m        <div class="order-info">[m
[32m+[m[32m          <div class="info-item">[m
[32m+[m[32m            <span class="label">è®¢å•ç¼–å·ï¼š</span>[m
[32m+[m[32m            <span class="value">{{ orderNo }}</span>[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <div class="info-item">[m
[32m+[m[32m            <span class="label">æ”¯ä»˜é‡‘é¢ï¼š</span>[m
[32m+[m[32m            <span class="amount">Â¥ {{ amount }}</span>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </div>[m
[32m+[m
[32m+[m[32m        <el-divider />[m
[32m+[m
[32m+[m[32m        <div class="pay-type-select">[m
[32m+[m[32m          <div[m[41m [m
[32m+[m[32m            class="type-item"[m[41m [m
[32m+[m[32m            :class="{ active: payType === 'wechat' }"[m
[32m+[m[32m            @click="payType = 'wechat'"[m
[32m+[m[32m          >[m
[32m+[m[32m            <svg-icon icon-class="wechat" class="pay-icon" />[m
[32m+[m[32m            <span>å¾®ä¿¡æ”¯ä»˜</span>[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <div[m[41m [m
[32m+[m[32m            class="type-item"[m[41m [m
[32m+[m[32m            :class="{ active: payType === 'alipay' }"[m
[32m+[m[32m            @click="payType = 'alipay'"[m
[32m+[m[32m          >[m
[32m+[m[32m            <svg-icon icon-class="money" class="pay-icon" /> <span>æ”¯ä»˜å®</span>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </div>[m
[32m+[m
[32m+[m[32m        <div class="qr-section">[m
[32m+[m[32m          <div class="qr-box">[m
[32m+[m[32m            <img src="@/assets/images/pay.png" alt="æ”¯ä»˜äºŒç»´ç " class="qr-img" />[m
[32m+[m[32m            <div class="qr-mask" v-if="loading">[m
[32m+[m[32m              <el-icon class="is-loading"><Loading /></el-icon>[m
[32m+[m[32m              <p>æ”¯ä»˜å¤„ç†ä¸­...</p>[m
[32m+[m[32m            </div>[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <p class="qr-desc">è¯·ä½¿ç”¨ {{ payType === 'wechat' ? 'å¾®ä¿¡' : 'æ”¯ä»˜å®' }} æ‰«ä¸€æ‰«</p>[m
[32m+[m[32m          <p class="qr-desc-sub">äºŒç»´ç ä»…ä¸ºæ¨¡æ‹Ÿæ¼”ç¤ºï¼Œç‚¹å‡»ä¸‹æ–¹æŒ‰é’®ç›´æ¥å®Œæˆ</p>[m
[32m+[m[32m        </div>[m
[32m+[m
[32m+[m[32m        <div class="action-box">[m
[32m+[m[32m          <el-button[m[41m [m
[32m+[m[32m            type="success"[m[41m [m
[32m+[m[32m            size="large"[m[41m [m
[32m+[m[32m            class="pay-btn"[m
[32m+[m[32m            :loading="loading"[m
[32m+[m[32m            @click="handleSimulatePay"[m
[32m+[m[32m          >[m
[32m+[m[32m            æ¨¡æ‹Ÿæ”¯ä»˜æˆåŠŸ[m
[32m+[m[32m          </el-button>[m
[32m+[m[32m          <el-button text @click="cancelPay">ç¨åæ”¯ä»˜</el-button>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </div>[m
[32m+[m[32m    </el-card>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { ref, onMounted } from 'vue';[m
[32m+[m[32mimport { useRoute, useRouter } from 'vue-router';[m
[32m+[m[32mimport request from '@/utils/request'; // ç›´æ¥ä½¿ç”¨requestè°ƒç”¨ï¼Œä¹Ÿå¯å°è£…åˆ°apiæ–‡ä»¶[m
[32m+[m[32mimport { ElMessage } from 'element-plus';[m
[32m+[m[32mimport { Loading } from '@element-plus/icons-vue';[m
[32m+[m[32mimport { getAppToken } from '@/utils/auth';[m
[32m+[m
[32m+[m
[32m+[m[32mconst route = useRoute();[m
[32m+[m[32mconst router = useRouter();[m
[32m+[m
[32m+[m[32m// å“åº”å¼æ•°æ®[m
[32m+[m[32mconst orderNo = route.query.orderNo;[m
[32m+[m[32mconst amount = route.query.amount;[m
[32m+[m[32mconst loading = ref(false);[m
[32m+[m[32mconst payType = ref('wechat'); // é»˜è®¤å¾®ä¿¡[m
[32m+[m
[32m+[m
[32m+[m[32m/** æ¨¡æ‹Ÿæ”¯ä»˜å¤„ç† */[m
[32m+[m[32mfunction handleSimulatePay() {[m
[32m+[m[32m  // æ£€æŸ¥ç™»å½•çŠ¶æ€[m
[32m+[m[32m  const token = getAppToken();[m
[32m+[m[32m  if (!token) {[m
[32m+[m[32m    ElMessage.error("è¯·å…ˆç™»å½•");[m
[32m+[m[32m    router.push('/portal/login?redirect=' + encodeURIComponent(route.fullPath));[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  loading.value = true;[m
[32m+[m[41m  [m
[32m+[m[32m  // æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ 1ç§’ï¼Œå¢åŠ çœŸå®æ„Ÿ[m
[32m+[m[32m  setTimeout(() => {[m
[32m+[m[32m    request({[m
[32m+[m[32m      url: `/app/order/pay/${route.query.orderNo}`,[m
[32m+[m[32m      method: 'put',[m
[32m+[m[32m      headers: {[m
[32m+[m[32m        'Authorization': 'Bearer ' + token[m
[32m+[m[32m      }[m
[32m+[m[32m    }).then(res => {[m
[32m+[m[32m      loading.value = false;[m
[32m+[m[32m      ElMessage.success('æ­å–œæ‚¨ï¼Œæ”¯ä»˜æˆåŠŸï¼');[m
[32m+[m[41m      [m
[32m+[m[32m      // è·³è½¬å›æˆ‘çš„è®¢å•é¡µ[m
[32m+[m[32m      router.push({[m
[32m+[m[32m        path: '/portal/user/order',[m
[32m+[m[32m        query: { tab: '1' }[m
[32m+[m[32m      });[m
[32m+[m[32m    }).catch((error) => {[m
[32m+[m[32m      loading.value = false;[m
[32m+[m[32m      if (error && error.toString().includes('è®¤è¯å¤±è´¥')) {[m
[32m+[m[32m        ElMessage.error("ç™»å½•çŠ¶æ€å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•");[m
[32m+[m[32m        router.push('/portal/login?redirect=' + encodeURIComponent(route.fullPath));[m
[32m+[m[32m      }[m
[32m+[m[32m    });[m
[32m+[m[32m  }, 1000);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** å–æ¶ˆ/ç¨åæ”¯ä»˜ */[m
[32m+[m[32mfunction cancelPay() {[m
[32m+[m[32m  // è·¯ç”±åˆ°è®¢å•åˆ—è¡¨é¡µé¢ï¼Œå¹¶è‡ªåŠ¨æ˜¾ç¤º"å¾…æ”¯ä»˜"æ ‡ç­¾é¡µ[m
[32m+[m[32m  router.push({[m
[32m+[m[32m    path: '/portal/user/order',[m
[32m+[m[32m    query: { tab: '0' }[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style scoped lang="scss">[m
[32m+[m[32m.pay-container {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  justify-content: center;[m
[32m+[m[32m  padding-top: 50px;[m
[32m+[m[32m  background-color: #f5f7fa;[m
[32m+[m[32m  min-height: calc(100vh - 84px);[m
[32m+[m
[32m+[m[32m  .pay-card {[m
[32m+[m[32m    width: 600px;[m
[32m+[m[41m    [m
[32m+[m[32m    .card-header {[m
[32m+[m[32m      display: flex;[m
[32m+[m[32m      justify-content: space-between;[m
[32m+[m[32m      align-items: center;[m
[32m+[m[32m      .title {[m
[32m+[m[32m        font-size: 18px;[m
[32m+[m[32m        font-weight: bold;[m
[32m+[m[32m      }[m
[32m+[m[32m      .tips {[m
[32m+[m[32m        font-size: 13px;[m
[32m+[m[32m        color: #f56c6c;[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    .pay-content {[m
[32m+[m[32m      padding: 20px;[m
[32m+[m
[32m+[m[32m      .order-info {[m
[32m+[m[32m        text-align: center;[m
[32m+[m[32m        margin-bottom: 30px;[m
[32m+[m[41m        [m
[32m+[m[32m        .info-item {[m
[32m+[m[32m          margin-bottom: 10px;[m
[32m+[m[32m          .label {[m
[32m+[m[32m            color: #606266;[m
[32m+[m[32m          }[m
[32m+[m[32m          .value {[m
[32m+[m[32m            font-weight: 500;[m
[32m+[m[32m          }[m
[32m+[m[32m          .amount {[m
[32m+[m[32m            font-size: 28px;[m
[32m+[m[32m            color: #f56c6c;[m
[32m+[m[32m            font-weight: bold;[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m      .pay-type-select {[m
[32m+[m[32m        display: flex;[m
[32m+[m[32m        justify-content: center;[m
[32m+[m[32m        gap: 20px;[m
[32m+[m[32m        margin: 30px 0;[m
[32m+[m
[32m+[m[32m        .type-item {[m
[32m+[m[32m          width: 140px;[m
[32m+[m[32m          height: 50px;[m
[32m+[m[32m          border: 1px solid #dcdfe6;[m
[32m+[m[32m          border-radius: 4px;[m
[32m+[m[32m          display: flex;[m
[32m+[m[32m          align-items: center;[m
[32m+[m[32m          justify-content: center;[m
[32m+[m[32m          cursor: pointer;[m
[32m+[m[32m          transition: all 0.3s;[m
[32m+[m
[32m+[m[32m          .pay-icon {[m
[32m+[m[32m            font-size: 20px;[m
[32m+[m[32m            margin-right: 8px;[m
[32m+[m[32m          }[m
[32m+[m
[32m+[m[32m          &:hover {[m
[32m+[m[32m            border-color: #409eff;[m
[32m+[m[32m            color: #409eff;[m
[32m+[m[32m          }[m
[32m+[m
[32m+[m[32m          &.active {[m
[32m+[m[32m            border-color: #409eff;[m
[32m+[m[32m            background-color: #ecf5ff;[m
[32m+[m[32m            color: #409eff;[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m      .qr-section {[m
[32m+[m[32m        text-align: center;[m
[32m+[m[32m        margin-bottom: 30px;[m
[32m+[m
[32m+[m[32m        .qr-box {[m
[32m+[m[32m          position: relative;[m
[32m+[m[32m          width: 200px;[m
[32m+[m[32m          height: 200px;[m
[32m+[m[32m          margin: 0 auto 15px;[m
[32m+[m[32m          border: 1px solid #ebeef5;[m
[32m+[m[32m          padding: 10px;[m
[32m+[m[32m          border-radius: 8px;[m
[32m+[m
[32m+[m[32m          .qr-img {[m
[32m+[m[32m            width: 100%;[m
[32m+[m[32m            height: 100%;[m
[32m+[m[32m          }[m
[32m+[m
[32m+[m[32m          .qr-mask {[m
[32m+[m[32m            position: absolute;[m
[32m+[m[32m            top: 0;[m
[32m+[m[32m            left: 0;[m
[32m+[m[32m            width: 100%;[m
[32m+[m[32m            height: 100%;[m
[32m+[m[32m            background: rgba(255, 255, 255, 0.9);[m
[32m+[m[32m            display: flex;[m
[32m+[m[32m            flex-direction: column;[m
[32m+[m[32m            justify-content: center;[m
[32m+[m[32m            align-items: center;[m
[32m+[m[32m            color: #409eff;[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        .qr-desc {[m
[32m+[m[32m          font-size: 14px;[m
[32m+[m[32m          color: #303133;[m
[32m+[m[32m          margin-bottom: 5px;[m
[32m+[m[32m        }[m
[32m+[m[32m        .qr-desc-sub {[m
[32m+[m[32m          font-size: 12px;[m
[32m+[m[32m          color: #909399;[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m      .action-box {[m
[32m+[m[32m        text-align: center;[m
[32m+[m[32m        .pay-btn {[m
[32m+[m[32m          width: 200px;[m
[32m+[m[32m          margin-right: 15px;[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/views/portal/user/address.vue b/src/views/portal/user/address.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..d15541a3[m
[1m--- /dev/null[m
[1m+++ b/src/views/portal/user/address.vue[m
[36m@@ -0,0 +1,284 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="app-container">[m
[32m+[m[32m    <el-card class="box-card">[m
[32m+[m[32m      <template #header>[m
[32m+[m[32m        <div class="card-header">[m
[32m+[m[32m          <span>æˆ‘çš„æ”¶è´§åœ°å€</span>[m
[32m+[m[32m          <el-button type="primary" icon="Plus" @click="handleAdd">æ–°å¢åœ°å€</el-button>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </template>[m
[32m+[m
[32m+[m[32m      <el-empty v-if="addressList.length === 0" description="æš‚æ— æ”¶è´§åœ°å€" />[m
[32m+[m
[32m+[m[32m      <div v-else class="address-grid">[m
[32m+[m[32m        <el-card[m[41m [m
[32m+[m[32m          v-for="item in addressList"[m[41m [m
[32m+[m[32m          :key="item.addressId"[m[41m [m
[32m+[m[32m          class="address-item"[m
[32m+[m[32m          :class="{ 'is-default': item.isDefault === '1' }"[m
[32m+[m[32m          shadow="hover"[m
[32m+[m[32m        >[m
[32m+[m[32m          <div class="address-content">[m
[32m+[m[32m            <div class="info-row name-row">[m
[32m+[m[32m              <span class="name">{{ item.realName }}</span>[m
[32m+[m[32m              <span class="phone">{{ item.phone }}</span>[m
[32m+[m[32m              <el-tag v-if="item.isDefault === '1'" size="small" type="success" effect="dark">é»˜è®¤</el-tag>[m
[32m+[m[32m            </div>[m
[32m+[m[32m            <div class="info-row region-row">[m
[32m+[m[32m              {{ item.province }} {{ item.city }} {{ item.district }}[m
[32m+[m[32m            </div>[m
[32m+[m[32m            <div class="info-row detail-row">[m
[32m+[m[32m              {{ item.detailAddress }}[m
[32m+[m[32m            </div>[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <div class="address-actions">[m
[32m+[m[32m            <el-button type="primary" link icon="Edit" @click="handleEdit(item)">ç¼–è¾‘</el-button>[m
[32m+[m[32m            <el-button type="danger" link icon="Delete" @click="handleDelete(item)">åˆ é™¤</el-button>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </el-card>[m
[32m+[m[32m      </div>[m
[32m+[m[32m    </el-card>[m
[32m+[m
[32m+[m[32m    <!-- æ·»åŠ /ä¿®æ”¹åœ°å€å¯¹è¯æ¡† -->[m
[32m+[m[32m    <el-dialog :title="title" v-model="open" width="500px" append-to-body>[m
[32m+[m[32m      <el-form ref="addressRef" :model="form" :rules="rules" label-width="80px">[m
[32m+[m[32m        <el-form-item label="æ”¶è´§äºº" prop="realName">[m
[32m+[m[32m          <el-input v-model="form.realName" placeholder="è¯·è¾“å…¥æ”¶è´§äººå§“å" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="æ‰‹æœºå·" prop="phone">[m
[32m+[m[32m          <el-input v-model="form.phone" placeholder="è¯·è¾“å…¥æ‰‹æœºå·ç " maxlength="11" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="æ‰€åœ¨åœ°åŒº" prop="region">[m
[32m+[m[32m           <!-- ç®€åŒ–å¤„ç†ï¼šå®é™…é¡¹ç›®ä¸­å¯ä»¥ä½¿ç”¨ el-cascader é…åˆè¡Œæ”¿åŒºåˆ’æ•°æ® -->[m
[32m+[m[32m           <div class="region-inputs">[m
[32m+[m[32m             <el-input v-model="form.province" placeholder="çœ" style="width: 32%" />[m
[32m+[m[32m             <el-input v-model="form.city" placeholder="å¸‚" style="width: 32%" />[m
[32m+[m[32m             <el-input v-model="form.district" placeholder="åŒº/å¿" style="width: 32%" />[m
[32m+[m[32m           </div>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="è¯¦ç»†åœ°å€" prop="detailAddress">[m
[32m+[m[32m          <el-input v-model="form.detailAddress" type="textarea" placeholder="è¯·è¾“å…¥è¯¦ç»†åœ°å€" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="é»˜è®¤åœ°å€" prop="isDefault">[m
[32m+[m[32m          <el-switch v-model="form.isDefault" active-value="1" inactive-value="0" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m      </el-form>[m
[32m+[m[32m      <template #footer>[m
[32m+[m[32m        <div class="dialog-footer">[m
[32m+[m[32m          <el-button type="primary" @click="submitForm">ç¡® å®š</el-button>[m
[32m+[m[32m          <el-button @click="cancel">å– æ¶ˆ</el-button>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </template>[m
[32m+[m[32m    </el-dialog>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { ref, reactive, onMounted } from 'vue';[m
[32m+[m[32mimport { useRouter, useRoute } from 'vue-router';[m
[32m+[m[32mimport { ElMessage, ElMessageBox } from 'element-plus';[m
[32m+[m[32mimport { listAddress, addAddress, updateAddress, delAddress } from "@/api/portal/address";[m
[32m+[m[32mimport { getAppToken } from '@/utils/auth';[m
[32m+[m
[32m+[m[32mconst router = useRouter();[m
[32m+[m[32mconst route = useRoute();[m
[32m+[m
[32m+[m[32mconst addressList = ref([]);[m
[32m+[m[32mconst open = ref(false);[m
[32m+[m[32mconst title = ref("");[m
[32m+[m[32mconst addressRef = ref(null);[m
[32m+[m
[32m+[m[32mconst form = reactive({[m
[32m+[m[32m  addressId: undefined,[m
[32m+[m[32m  realName: '',[m
[32m+[m[32m  phone: '',[m
[32m+[m[32m  province: '',[m
[32m+[m[32m  city: '',[m
[32m+[m[32m  district: '',[m
[32m+[m[32m  detailAddress: '',[m
[32m+[m[32m  isDefault: '0'[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst rules = {[m
[32m+[m[32m  realName: [{ required: true, message: "æ”¶è´§äººä¸èƒ½ä¸ºç©º", trigger: "blur" }],[m
[32m+[m[32m  phone: [[m
[32m+[m[32m    { required: true, message: "æ‰‹æœºå·ä¸èƒ½ä¸ºç©º", trigger: "blur" },[m
[32m+[m[32m    { pattern: /^1[3-9]\d{9}$/, message: "è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·ç ", trigger: "blur" }[m
[32m+[m[32m  ],[m
[32m+[m[32m  detailAddress: [{ required: true, message: "è¯¦ç»†åœ°å€ä¸èƒ½ä¸ºç©º", trigger: "blur" }][m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// æ£€æŸ¥ç™»å½•çŠ¶æ€[m
[32m+[m[32mfunction checkLogin() {[m
[32m+[m[32m  const token = getAppToken();[m
[32m+[m[32m  if (!token) {[m
[32m+[m[32m    ElMessage.error("è¯·å…ˆç™»å½•");[m
[32m+[m[32m    router.push('/portal/login?redirect=' + encodeURIComponent(route.fullPath));[m
[32m+[m[32m    return false;[m
[32m+[m[32m  }[m
[32m+[m[32m  return true;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction getList() {[m
[32m+[m[32m  if (!checkLogin()) return;[m
[32m+[m[41m  [m
[32m+[m[32m  listAddress().then(response => {[m
[32m+[m[32m    addressList.value = response.data || [];[m
[32m+[m[32m  }).catch(error => {[m
[32m+[m[32m    console.error("Failed to fetch addresses", error);[m
[32m+[m[32m    if (error && error.toString().includes('è®¤è¯å¤±è´¥')) {[m
[32m+[m[32m      ElMessage.error("ç™»å½•çŠ¶æ€å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•");[m
[32m+[m[32m      router.push('/portal/login?redirect=' + encodeURIComponent(route.fullPath));[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction cancel() {[m
[32m+[m[32m  open.value = false;[m
[32m+[m[32m  reset();[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction reset() {[m
[32m+[m[32m  form.addressId = undefined;[m
[32m+[m[32m  form.realName = '';[m
[32m+[m[32m  form.phone = '';[m
[32m+[m[32m  form.province = '';[m
[32m+[m[32m  form.city = '';[m
[32m+[m[32m  form.district = '';[m
[32m+[m[32m  form.detailAddress = '';[m
[32m+[m[32m  form.isDefault = '0';[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction handleAdd() {[m
[32m+[m[32m  if (!checkLogin()) return;[m
[32m+[m[32m  reset();[m
[32m+[m[32m  open.value = true;[m
[32m+[m[32m  title.value = "æ·»åŠ æ”¶è´§åœ°å€";[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction handleEdit(row) {[m
[32m+[m[32m  if (!checkLogin()) return;[m
[32m+[m[32m  reset();[m
[32m+[m[32m  Object.assign(form, row);[m
[32m+[m[32m  open.value = true;[m
[32m+[m[32m  title.value = "ä¿®æ”¹æ”¶è´§åœ°å€";[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction submitForm() {[m
[32m+[m[32m  if (!checkLogin()) return;[m
[32m+[m[41m  [m
[32m+[m[32m  addressRef.value.validate(valid => {[m
[32m+[m[32m    if (valid) {[m
[32m+[m[32m      // ç®€å•æ ¡éªŒåœ°åŒº[m
[32m+[m[32m      if(!form.province || !form.city || !form.district) {[m
[32m+[m[32m        ElMessage.warning("è¯·è¡¥å…¨çœå¸‚åŒºä¿¡æ¯");[m
[32m+[m[32m        return;[m
[32m+[m[32m      }[m
[32m+[m[41m      [m
[32m+[m[32m      if (form.addressId) {[m
[32m+[m[32m        updateAddress(form).then(() => {[m
[32m+[m[32m          ElMessage.success("ä¿®æ”¹æˆåŠŸ");[m
[32m+[m[32m          open.value = false;[m
[32m+[m[32m          getList();[m
[32m+[m[32m        }).catch(error => {[m
[32m+[m[32m          if (error && error.toString().includes('è®¤è¯å¤±è´¥')) {[m
[32m+[m[32m            ElMessage.error("ç™»å½•çŠ¶æ€å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•");[m
[32m+[m[32m            router.push('/portal/login?redirect=' + encodeURIComponent(route.fullPath));[m
[32m+[m[32m          }[m
[32m+[m[32m        });[m
[32m+[m[32m      } else {[m
[32m+[m[32m        addAddress(form).then(() => {[m
[32m+[m[32m          ElMessage.success("æ–°å¢æˆåŠŸ");[m
[32m+[m[32m          open.value = false;[m
[32m+[m[32m          getList();[m
[32m+[m[32m        }).catch(error => {[m
[32m+[m[32m          if (error && error.toString().includes('è®¤è¯å¤±è´¥')) {[m
[32m+[m[32m            ElMessage.error("ç™»å½•çŠ¶æ€å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•");[m
[32m+[m[32m            router.push('/portal/login?redirect=' + encodeURIComponent(route.fullPath));[m
[32m+[m[32m          }[m
[32m+[m[32m        });[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction handleDelete(row) {[m
[32m+[m[32m  if (!checkLogin()) return;[m
[32m+[m[41m  [m
[32m+[m[32m  ElMessageBox.confirm('æ˜¯å¦ç¡®è®¤åˆ é™¤è¯¥åœ°å€?', 'æç¤º', {[m
[32m+[m[32m    confirmButtonText: 'ç¡®å®š',[m
[32m+[m[32m    cancelButtonText: 'å–æ¶ˆ',[m
[32m+[m[32m    type: 'warning'[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    delAddress(row.addressId).then(() => {[m
[32m+[m[32m      ElMessage.success("åˆ é™¤æˆåŠŸ");[m
[32m+[m[32m      getList();[m
[32m+[m[32m    }).catch(error => {[m
[32m+[m[32m      if (error && error.toString().includes('è®¤è¯å¤±è´¥')) {[m
[32m+[m[32m        ElMessage.error("ç™»å½•çŠ¶æ€å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•");[m
[32m+[m[32m        router.push('/portal/login?redirect=' + encodeURIComponent(route.fullPath));[m
[32m+[m[32m      }[m
[32m+[m[32m    });[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32monMounted(() => {[m
[32m+[m[32m  checkLogin();[m
[32m+[m[32m  getList();[m
[32m+[m[32m});[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style scoped>[m
[32m+[m[32m.card-header {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  justify-content: space-between;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.address-grid {[m
[32m+[m[32m  display: grid;[m
[32m+[m[32m  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));[m
[32m+[m[32m  gap: 20px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.address-item {[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m  border: 1px solid #e4e7ed;[m
[32m+[m[32m  transition: all 0.3s;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.address-item.is-default {[m
[32m+[m[32m  border-color: #67c23a;[m
[32m+[m[32m  background-color: #f0f9eb;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.address-content {[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m  color: #606266;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.info-row {[m
[32m+[m[32m  margin-bottom: 8px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.name-row {[m
[32m+[m[32m  font-size: 16px;[m
[32m+[m[32m  font-weight: bold;[m
[32m+[m[32m  color: #303133;[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  gap: 10px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.address-actions {[m
[32m+[m[32m  border-top: 1px solid #ebeef5;[m
[32m+[m[32m  margin-top: 15px;[m
[32m+[m[32m  padding-top: 10px;[m
[32m+[m[32m  text-align: right;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.region-inputs {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  justify-content: space-between;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/views/portal/user/order.vue b/src/views/portal/user/order.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..fd118dbd[m
[1m--- /dev/null[m
[1m+++ b/src/views/portal/user/order.vue[m
[36m@@ -0,0 +1,302 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="app-container">[m
[32m+[m[32m    <!-- çŠ¶æ€åˆ‡æ¢æ  -->[m
[32m+[m[32m    <el-tabs v-model="activeTab" @tab-click="handleTabClick">[m
[32m+[m[32m      <el-tab-pane label="å…¨éƒ¨è®¢å•" name="all"></el-tab-pane>[m
[32m+[m[32m      <el-tab-pane label="å¾…æ”¯ä»˜" name="0"></el-tab-pane>[m
[32m+[m[32m      <el-tab-pane label="å¾…å‘è´§" name="1"></el-tab-pane>[m
[32m+[m[32m      <el-tab-pane label="è¿›è¡Œä¸­" name="2"></el-tab-pane>[m
[32m+[m[32m      <el-tab-pane label="å·²å®Œæˆ" name="3"></el-tab-pane>[m
[32m+[m[32m    </el-tabs>[m
[32m+[m
[32m+[m[32m    <!-- è®¢å•åˆ—è¡¨ -->[m
[32m+[m[32m    <div v-loading="loading">[m
[32m+[m[32m      <div v-if="orderList.length === 0" class="empty-block">[m
[32m+[m[32m        <el-empty description="æš‚æ— è®¢å•æ•°æ®" />[m
[32m+[m[32m      </div>[m
[32m+[m
[32m+[m[32m      <el-card v-for="order in orderList" :key="order.orderId" shadow="hover" class="order-card">[m
[32m+[m[32m        <!-- å¡ç‰‡å¤´éƒ¨ -->[m
[32m+[m[32m        <template #header>[m
[32m+[m[32m          <div class="card-header">[m
[32m+[m[32m            <span>è®¢å•å·ï¼š{{ order.orderNo }}</span>[m
[32m+[m[32m            <div>[m
[32m+[m[32m              <!-- çŠ¶æ€æ ‡ç­¾ -->[m
[32m+[m[32m              <el-tag :type="statusTypeMap[order.status]">{{ statusText(order.status) }}</el-tag>[m
[32m+[m[32m            </div>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </template>[m
[32m+[m
[32m+[m[32m        <!-- å•†å“æ˜ç»†åˆ—è¡¨ (æ­£å¸¸æƒ…å†µ) -->[m
[32m+[m[32m        <div v-if="order.shopOrderItemList && order.shopOrderItemList.length > 0">[m
[32m+[m[32m          <div v-for="item in order.shopOrderItemList" :key="item.id" class="order-item">[m
[32m+[m[32m            <img :src="item.productImg" class="item-img" alt="å•†å“å›¾ç‰‡" />[m
[32m+[m[32m            <div class="item-info">[m
[32m+[m[32m              <div class="item-name">{{ item.productName }}</div>[m
[32m+[m[32m              <div v-if="item.businessType === '1'" class="rent-info">[m
[32m+[m[32m                <span class="tag-rent">ç§Ÿèµ</span>[m
[32m+[m[32m                <span class="date-range">[m
[32m+[m[32m                  {{ parseTime(item.rentStartTime, '{y}-{m}-{d}') }} è‡³[m[41m [m
[32m+[m[32m                  {{ parseTime(item.rentEndTime, '{y}-{m}-{d}') }}[m
[32m+[m[32m                </span>[m
[32m+[m[32m              </div>[m
[32m+[m[32m              <div v-else class="sale-info">[m
[32m+[m[32m                <span class="tag-sale">è´­ä¹°</span>[m
[32m+[m[32m              </div>[m
[32m+[m[32m              <div class="item-price">[m
[32m+[m[32m                <span>Â¥{{ item.price }}</span>[m
[32m+[m[32m                <span class="quantity">x{{ item.quantity }}</span>[m
[32m+[m[32m              </div>[m
[32m+[m[32m            </div>[m
[32m+[m[41m            [m
[32m+[m[32m            <!-- è¯„ä»·æŒ‰é’®ï¼šä»…å½“ status == 3 æ˜¾ç¤º -->[m
[32m+[m[32m            <div class="item-action">[m
[32m+[m[32m               <el-button[m[41m [m
[32m+[m[32m                 v-if="order.status == '3'"[m[41m [m
[32m+[m[32m                 type="primary"[m[41m [m
[32m+[m[32m                 link[m[41m [m
[32m+[m[32m                 size="small"[m
[32m+[m[32m                 icon="ChatDotRound"[m[41m [m
[32m+[m[32m                 @click="openCommentDialog(order, item)"[m
[32m+[m[32m               >[m
[32m+[m[32m                 è¯„ä»·[m
[32m+[m[32m               </el-button>[m
[32m+[m[32m            </div>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </div>[m
[32m+[m
[32m+[m[32m        <!-- æ•°æ®å¼‚å¸¸å…œåº•æ˜¾ç¤ºï¼šå¦‚æœæ²¡æœ‰å•†å“æ˜ç»†ï¼Œæ˜¾ç¤ºé€šç”¨å ä½ -->[m
[32m+[m[32m        <div v-else class="order-item">[m
[32m+[m[32m           <div class="item-info">[m
[32m+[m[32m             <div class="item-name" style="color: #909399; font-style: italic;">[m
[32m+[m[32m               (æš‚æ— å•†å“æ˜ç»†æ•°æ®)[m
[32m+[m[32m             </div>[m
[32m+[m[32m           </div>[m
[32m+[m[32m           <div class="item-action">[m
[32m+[m[32m             <!-- å³ä½¿æ²¡æ•°æ®ï¼Œå¦‚æœæ˜¯å·²å®ŒæˆçŠ¶æ€ï¼Œå…è®¸å¯¹è®¢å•æ•´ä½“è¿›è¡Œè¯„ä»· -->[m
[32m+[m[32m             <el-button[m[41m [m
[32m+[m[32m               v-if="order.status == '3'"[m[41m [m
[32m+[m[32m               type="primary"[m[41m [m
[32m+[m[32m               link[m[41m [m
[32m+[m[32m               size="small"[m
[32m+[m[32m               icon="ChatDotRound"[m[41m [m
[32m+[m[32m               @click="openCommentDialog(order, { productId: 0, productName: 'æ•´å•è¯„ä»·' })"[m
[32m+[m[32m             >[m
[32m+[m[32m               è¯„ä»·[m
[32m+[m[32m             </el-button>[m
[32m+[m[32m           </div>[m
[32m+[m[32m        </div>[m
[32m+[m
[32m+[m[32m        <!-- åº•éƒ¨åˆè®¡ä¸æ“ä½œ -->[m
[32m+[m[32m        <div class="card-footer">[m
[32m+[m[32m          <div class="total-amount">[m
[32m+[m[32m            å®ä»˜: <span class="price-text">Â¥{{ order.totalAmount }}</span>[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <div class="action-btns">[m
[32m+[m[32m            <el-button v-if="order.status == '0'" type="danger" size="small" @click="handlePay(order)">å»æ”¯ä»˜</el-button>[m
[32m+[m[41m            [m
[32m+[m[32m            <!-- è´­ä¹°ä¸”å·²å‘è´§ -> ç¡®è®¤æ”¶è´§ -->[m
[32m+[m[32m            <el-button[m[41m [m
[32m+[m[32m                v-if="order.status == '2' && !isRentOrder(order)"[m[41m [m
[32m+[m[32m                type="primary" size="small"[m[41m [m
[32m+[m[32m                @click="handleConfirm(order)"[m
[32m+[m[32m            >ç¡®è®¤æ”¶è´§</el-button>[m
[32m+[m[41m            [m
[32m+[m[32m            <!-- ç§Ÿèµä¸”è¿›è¡Œä¸­ -> ç”³è¯·å½’è¿˜ -->[m
[32m+[m[32m            <el-button[m[41m [m
[32m+[m[32m                v-if="order.status == '2' && isRentOrder(order)"[m[41m [m
[32m+[m[32m                type="warning" size="small"[m[41m [m
[32m+[m[32m                @click="handleReturn(order)"[m
[32m+[m[32m            >ç”³è¯·å½’è¿˜</el-button>[m
[32m+[m[41m            [m
[32m+[m[32m            <el-button v-if="order.status == '4'" type="info" plain size="small" disabled>å½’è¿˜ä¸­(å¾…å•†å®¶ç¡®è®¤)</el-button>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </el-card>[m
[32m+[m[32m    </div>[m
[32m+[m[41m    [m
[32m+[m[32m    <!-- è¯„ä»·å¯¹è¯æ¡† -->[m
[32m+[m[32m    <el-dialog v-model="commentOpen" title="å‘è¡¨è¯„ä»·" width="500px" append-to-body>[m
[32m+[m[32m      <el-form :model="commentForm" label-width="80px">[m
[32m+[m[32m        <el-form-item label="è¯„åˆ†">[m
[32m+[m[32m          <el-rate v-model="commentForm.star" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="è¯„ä»·å†…å®¹">[m
[32m+[m[32m          <el-input v-model="commentForm.content" type="textarea" rows="4" placeholder="è¯·è¾“å…¥æ‚¨çš„ä½¿ç”¨ä½“éªŒ..." />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m      </el-form>[m
[32m+[m[32m      <template #footer>[m
[32m+[m[32m        <div class="dialog-footer">[m
[32m+[m[32m          <el-button @click="commentOpen = false">å– æ¶ˆ</el-button>[m
[32m+[m[32m          <el-button type="primary" @click="submitComment">ç¡® å®š</el-button>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </template>[m
[32m+[m[32m    </el-dialog>[m
[32m+[m
[32m+[m[32m    <pagination v-show="total>0" :total="total" v-model:page="queryParams.pageNum" v-model:limit="queryParams.pageSize" @pagination="getList" />[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { ref, reactive, onMounted } from 'vue';[m
[32m+[m[32mimport { useRouter, useRoute } from 'vue-router';[m
[32m+[m[32mimport request from '@/utils/request';[m
[32m+[m[32mimport { ElMessage, ElMessageBox } from 'element-plus';[m
[32m+[m[32mimport { parseTime } from '@/utils/ruoyi';[m
[32m+[m
[32m+[m[32mconst router = useRouter();[m
[32m+[m[32mconst route = useRoute();[m
[32m+[m[32mconst loading = ref(false);[m
[32m+[m[32mconst orderList = ref([]);[m
[32m+[m[32mconst total = ref(0);[m
[32m+[m[32mconst activeTab = ref('all');[m
[32m+[m[32mconst commentOpen = ref(false);[m
[32m+[m
[32m+[m[32mconst queryParams = reactive({[m
[32m+[m[32m  pageNum: 1,[m
[32m+[m[32m  pageSize: 10,[m
[32m+[m[32m  status: undefined[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst commentForm = reactive({[m
[32m+[m[32m  orderId: null,[m
[32m+[m[32m  productId: null,[m
[32m+[m[32m  star: 5,[m
[32m+[m[32m  content: ''[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst statusTypeMap = { '0':'danger', '1':'warning', '2':'primary', '3':'success', '4':'info' };[m
[32m+[m
[32m+[m[32m// è¾…åŠ©å‡½æ•°ï¼šè·å–çŠ¶æ€æ–‡æœ¬[m
[32m+[m[32mfunction statusText(status) {[m
[32m+[m[32m  const map = { '0':'å¾…æ”¯ä»˜', '1':'å¾…å‘è´§', '2':'è¿›è¡Œä¸­', '3':'å·²å®Œæˆ', '4':'å½’è¿˜ä¸­' };[m
[32m+[m[32m  return map[String(status)] || status;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// åˆ¤æ–­æ˜¯å¦åŒ…å«ç§Ÿèµå•†å“[m
[32m+[m[32mconst isRentOrder = (order) => {[m
[32m+[m[32m  return order.shopOrderItemList && order.shopOrderItemList.some(item => item.businessType === '1');[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mfunction getList() {[m
[32m+[m[32m  loading.value = true;[m
[32m+[m[41m  [m
[32m+[m[32m  // ã€è°ƒè¯•æ—¥å¿—ã€‘æ‰“å°æŸ¥è¯¢å‚æ•°[m
[32m+[m[32m  console.log('ã€å‰ç«¯è®¢å•åˆ—è¡¨ã€‘æŸ¥è¯¢å‚æ•°:', JSON.parse(JSON.stringify(queryParams)));[m
[32m+[m[41m  [m
[32m+[m[32m  request({ url: '/app/order/list', method: 'get', params: queryParams }).then(res => {[m
[32m+[m[32m    // ã€è°ƒè¯•æ—¥å¿—ã€‘æ‰“å°è¿”å›çš„è®¢å•æ•°æ®[m
[32m+[m[32m    console.log('ã€å‰ç«¯è®¢å•åˆ—è¡¨ã€‘è¿”å›æ•°æ®:', res);[m
[32m+[m[32m    console.log('ã€å‰ç«¯è®¢å•åˆ—è¡¨ã€‘è®¢å•æ•°é‡:', res.rows ? res.rows.length : 0);[m
[32m+[m[41m    [m
[32m+[m[32m    if (res.rows && res.rows.length > 0) {[m
[32m+[m[32m      res.rows.forEach((order, index) => {[m
[32m+[m[32m        console.log(`ã€å‰ç«¯è®¢å•åˆ—è¡¨ã€‘è®¢å• ${index} - orderId: ${order.orderId}, çŠ¶æ€: ${order.status}, å•†å“æ•°é‡: ${order.shopOrderItemList ? order.shopOrderItemList.length : 0}`);[m
[32m+[m[32m        if (order.shopOrderItemList && order.shopOrderItemList.length > 0) {[m
[32m+[m[32m          order.shopOrderItemList.forEach((item, itemIndex) => {[m
[32m+[m[32m            console.log(`ã€å‰ç«¯è®¢å•åˆ—è¡¨ã€‘  å•†å“ ${itemIndex} - productId: ${item.productId}, productName: ${item.productName}`);[m
[32m+[m[32m          });[m
[32m+[m[32m        }[m
[32m+[m[32m      });[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    orderList.value = res.rows;[m
[32m+[m[32m    total.value = res.total;[m
[32m+[m[32m    loading.value = false;[m
[32m+[m[32m  }).catch(error => {[m
[32m+[m[32m    console.error('ã€å‰ç«¯è®¢å•åˆ—è¡¨ã€‘æŸ¥è¯¢å¤±è´¥:', error);[m
[32m+[m[32m    loading.value = false;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction handleTabClick(tab) {[m
[32m+[m[32m  queryParams.status = tab.props.name === 'all' ? undefined : tab.props.name;[m
[32m+[m[32m  queryParams.pageNum = 1;[m
[32m+[m[41m  [m
[32m+[m[32m  // ã€è°ƒè¯•æ—¥å¿—ã€‘æ‰“å°æ ‡ç­¾åˆ‡æ¢ä¿¡æ¯[m
[32m+[m[32m  console.log('ã€å‰ç«¯æ ‡ç­¾åˆ‡æ¢ã€‘åˆ‡æ¢åˆ°:', tab.props.name, 'æŸ¥è¯¢çŠ¶æ€:', queryParams.status);[m
[32m+[m[41m  [m
[32m+[m[32m  getList();[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction handlePay(order) {[m
[32m+[m[32m  router.push({ path: '/portal/trade/pay', query: { orderNo: order.orderNo, amount: order.totalAmount } });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction handleConfirm(order) {[m
[32m+[m[32m  ElMessageBox.confirm('ç¡®è®¤æ”¶åˆ°å•†å“å—?', 'æç¤º', { type: 'success' }).then(() => {[m
[32m+[m[32m    request({ url: `/app/order/confirm/${order.orderNo}`, method: 'put' }).then(() => {[m
[32m+[m[32m      ElMessage.success('äº¤æ˜“å®Œæˆ');[m
[32m+[m[32m      getList();[m
[32m+[m[32m    });[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction handleReturn(order) {[m
[32m+[m[32m  ElMessageBox.confirm('ç¡®è®¤å·²å°†è®¾å¤‡å¯„å›/å½’è¿˜ç»™å•†å®¶å—?', 'å½’è¿˜ç¡®è®¤', { type: 'warning' }).then(() => {[m
[32m+[m[32m    request({ url: `/app/order/return/${order.orderId}`, method: 'put' }).then(() => {[m
[32m+[m[32m      ElMessage.success('å½’è¿˜ç”³è¯·å·²æäº¤ï¼Œç­‰å¾…å•†å®¶ç¡®è®¤');[m
[32m+[m[32m      getList();[m
[32m+[m[32m    });[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction openCommentDialog(order, item) {[m
[32m+[m[32m  // ã€è°ƒè¯•æ—¥å¿—ã€‘æ‰“å°æ‰“å¼€è¯„è®ºå¯¹è¯æ¡†æ—¶çš„æ•°æ®[m
[32m+[m[32m  console.log('ã€å‰ç«¯è¯„è®ºã€‘æ‰“å¼€è¯„è®ºå¯¹è¯æ¡† - è®¢å•æ•°æ®:', order);[m
[32m+[m[32m  console.log('ã€å‰ç«¯è¯„è®ºã€‘æ‰“å¼€è¯„è®ºå¯¹è¯æ¡† - å•†å“æ•°æ®:', item);[m
[32m+[m[32m  console.log('ã€å‰ç«¯è¯„è®ºã€‘è®¾ç½®è¯„è®ºè¡¨å• - orderId:', order.orderId, 'productId:', item.productId);[m
[32m+[m[41m  [m
[32m+[m[32m  commentForm.orderId = order.orderId;[m
[32m+[m[32m  commentForm.productId = item.productId;[m
[32m+[m[32m  commentForm.star = 5;[m
[32m+[m[32m  commentForm.content = '';[m
[32m+[m[32m  commentOpen.value = true;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction submitComment() {[m
[32m+[m[32m  // ã€è°ƒè¯•æ—¥å¿—ã€‘æ‰“å°æäº¤å‰çš„è¡¨å•æ•°æ®[m
[32m+[m[32m  console.log('ã€å‰ç«¯è¯„è®ºã€‘å‡†å¤‡æäº¤è¯„è®º - è¡¨å•æ•°æ®:', JSON.parse(JSON.stringify(commentForm)));[m
[32m+[m[41m  [m
[32m+[m[32m  if (!commentForm.content) return ElMessage.warning("è¯·è¾“å…¥è¯„ä»·å†…å®¹");[m
[32m+[m[32m  request({[m
[32m+[m[32m    url: '/app/comment/add',[m
[32m+[m[32m    method: 'post',[m
[32m+[m[32m    data: commentForm[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    ElMessage.success('è¯„ä»·æˆåŠŸ');[m
[32m+[m[32m    commentOpen.value = false;[m
[32m+[m[32m  }).catch(error => {[m
[32m+[m[32m    console.error('ã€å‰ç«¯è¯„è®ºã€‘æäº¤å¤±è´¥:', error);[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32monMounted(() => {[m
[32m+[m[32m  // ä»è·¯ç”±å‚æ•°ä¸­è·å–activeTab[m
[32m+[m[32m  const tabIndex = route.query.activeTab;[m
[32m+[m[32m  if (tabIndex !== undefined) {[m
[32m+[m[32m    // è®¾ç½®activeTab[m
[32m+[m[32m    activeTab.value = tabIndex;[m
[32m+[m[32m    // è§¦å‘å¯¹åº”æ ‡ç­¾çš„æŸ¥è¯¢[m
[32m+[m[32m    handleTabClick({ props: { name: tabIndex } });[m
[32m+[m[32m  } else {[m
[32m+[m[32m    // é»˜è®¤æŸ¥è¯¢å…¨éƒ¨è®¢å•[m
[32m+[m[32m    getList();[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style scoped lang="scss">[m
[32m+[m[32m.order-card { margin-bottom: 20px; }[m
[32m+[m[32m.card-header { display: flex; justify-content: space-between; align-items: center; font-weight: bold; }[m
[32m+[m[32m.order-item { display: flex; padding: 10px 0; border-bottom: 1px solid #f0f0f0; align-items: center; }[m
[32m+[m[32m.item-img { width: 80px; height: 80px; object-fit: cover; border-radius: 4px; margin-right: 15px; }[m
[32m+[m[32m.item-info { flex: 1; }[m
[32m+[m[32m.item-name { font-size: 15px; color: #333; margin-bottom: 5px; }[m
[32m+[m[32m.rent-info .tag-rent { background: #e8f4ff; color: #1890ff; padding: 2px 5px; border-radius: 2px; margin-right: 5px; font-size: 12px; }[m
[32m+[m[32m.sale-info .tag-sale { background: #fff1f0; color: #f5222d; padding: 2px 5px; border-radius: 2px; font-size: 12px; }[m
[32m+[m[32m.item-price { display: flex; justify-content: space-between; color: #333; font-weight: 500; }[m
[32m+[m[32m.item-action { margin-left: 15px; } /* ç¡®ä¿æŒ‰é’®æœ‰é—´è· */[m
[32m+[m[32m.card-footer { display: flex; justify-content: space-between; align-items: center; margin-top: 10px; padding-top: 10px; border-top: 1px solid #eee; }[m
[32m+[m[32m.price-text { color: #f56c6c; font-size: 18px; font-weight: bold; }[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/views/portal/user/profile.vue b/src/views/portal/user/profile.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..5e42412b[m
[1m--- /dev/null[m
[1m+++ b/src/views/portal/user/profile.vue[m
[36m@@ -0,0 +1,718 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="common-layout">[m
[32m+[m[32m    <el-container class="app-container">[m
[32m+[m[32m      <!-- å¯¼å…¥çš„å¤´éƒ¨å¯¼èˆªæ ç»„ä»¶ -->[m
[32m+[m[32m      <Header />[m
[32m+[m[41m      [m
[32m+[m[32m      <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->[m
[32m+[m[32m      <el-main class="main-content">[m
[32m+[m[32m        <div class="profile-container">[m
[32m+[m[32m          <!-- å¤´éƒ¨ä¿¡æ¯åŒºåŸŸ -->[m
[32m+[m[32m          <el-card class="profile-header" shadow="hover">[m
[32m+[m[32m      <div class="header-content">[m
[32m+[m[32m        <!-- å·¦ä¾§ï¼šå¤´åƒ -->[m
[32m+[m[32m        <div class="avatar-section">[m
[32m+[m[32m          <el-upload[m
[32m+[m[32m            class="avatar-uploader"[m
[32m+[m[32m            action="/app/user/avatar"[m
[32m+[m[32m            :headers="{ 'App-Token': appToken }"[m
[32m+[m[32m            :show-file-list="false"[m
[32m+[m[32m            :on-success="handleAvatarSuccess"[m
[32m+[m[32m            :before-upload="beforeAvatarUpload"[m
[32m+[m[32m          >[m
[32m+[m[32m            <img v-if="userInfo.avatar" :src="userAvatar" @error="handleAvatarError" class="avatar" />[m
[32m+[m[32m            <el-icon v-else class="avatar-uploader-icon"><Plus /></el-icon>[m
[32m+[m[32m          </el-upload>[m
[32m+[m[32m          <div class="avatar-hint">ç‚¹å‡»æ›´æ¢å¤´åƒ</div>[m
[32m+[m[32m        </div>[m
[32m+[m[41m        [m
[32m+[m[32m        <!-- ä¸­é—´ï¼šç”¨æˆ·åŸºæœ¬ä¿¡æ¯ -->[m
[32m+[m[32m        <div class="user-info-section">[m
[32m+[m[32m          <div class="user-main-info">[m
[32m+[m[32m            <h2 class="nickname">{{ userInfo.nickname || 'æœªè®¾ç½®æ˜µç§°' }}</h2>[m
[32m+[m[32m            <span class="username">è´¦å·ï¼š{{ userInfo.username }}</span>[m
[32m+[m[32m            <el-tag type="success" size="small" class="auth-tag">å·²å®åè®¤è¯</el-tag>[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <div class="user-detail-info">[m
[32m+[m[32m            <div class="info-item">[m
[32m+[m[32m              <el-icon><Phone /></el-icon>[m
[32m+[m[32m              <span>{{ userInfo.phonenumber || 'æœªè®¾ç½®æ‰‹æœºå·' }}</span>[m
[32m+[m[32m            </div>[m
[32m+[m[32m            <div class="info-item">[m
[32m+[m[32m              <el-icon><User /></el-icon>[m
[32m+[m[32m              <span>{{ userInfo.sex === '0' ? 'ç”·' : userInfo.sex === '1' ? 'å¥³' : 'æœªçŸ¥' }}</span>[m
[32m+[m[32m            </div>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </div>[m
[32m+[m[41m        [m
[32m+[m[32m        <!-- å³ä¾§ï¼šä¿¡ç”¨åˆ†å’Œä½™é¢ -->[m
[32m+[m[32m        <div class="credit-section">[m
[32m+[m[32m          <div class="credit-score">[m
[32m+[m[32m            <el-progress[m
[32m+[m[32m              type="dashboard"[m
[32m+[m[32m              :percentage="userInfo.creditScore || 700"[m
[32m+[m[32m              :color="creditColor"[m
[32m+[m[32m              :width="120"[m
[32m+[m[32m              :stroke-width="10"[m
[32m+[m[32m            >[m
[32m+[m[32m              <template #default>[m
[32m+[m[32m                <div class="progress-content">[m
[32m+[m[32m                  <div class="progress-text">ä¿¡ç”¨åˆ†</div>[m
[32m+[m[32m                  <div class="progress-value">{{ userInfo.creditScore || 700 }}</div>[m
[32m+[m[32m                </div>[m
[32m+[m[32m              </template>[m
[32m+[m[32m            </el-progress>[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <div class="balance-info">[m
[32m+[m[32m            <div class="balance-label">è´¦æˆ·ä½™é¢</div>[m
[32m+[m[32m            <div class="balance-amount">Â¥{{ userInfo.balance || 0 }}</div>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </div>[m
[32m+[m[32m    </el-card>[m
[32m+[m[41m    [m
[32m+[m[32m    <!-- è®¢å•å¿«æ·å…¥å£åŒºåŸŸ -->[m
[32m+[m[32m    <el-card class="order-shortcuts" shadow="hover">[m
[32m+[m[32m      <h3 class="section-title">è®¢å•ç®¡ç†</h3>[m
[32m+[m[32m      <div class="shortcuts-grid">[m
[32m+[m[32m        <div class="shortcut-item" @click="goToOrder(0)">[m
[32m+[m[32m          <el-icon class="shortcut-icon"><Timer /></el-icon>[m
[32m+[m[32m          <div class="shortcut-text">å¾…æ”¯ä»˜</div>[m
[32m+[m[32m        </div>[m
[32m+[m[32m        <div class="shortcut-item" @click="goToOrder(1)">[m
[32m+[m[32m          <el-icon class="shortcut-icon"><Van /></el-icon>[m
[32m+[m[32m          <div class="shortcut-text">å¾…å‘è´§</div>[m
[32m+[m[32m        </div>[m
[32m+[m[32m        <div class="shortcut-item" @click="goToOrder(2)">[m
[32m+[m[32m          <el-icon class="shortcut-icon"><Box /></el-icon>[m
[32m+[m[32m          <div class="shortcut-text">ç§Ÿèµä¸­</div>[m
[32m+[m[32m        </div>[m
[32m+[m[32m        <div class="shortcut-item" @click="goToOrder(3)">[m
[32m+[m[32m          <el-icon class="shortcut-icon"><List /></el-icon>[m
[32m+[m[32m          <div class="shortcut-text">å…¨éƒ¨è®¢å•</div>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </div>[m
[32m+[m[32m    </el-card>[m
[32m+[m[41m    [m
[32m+[m[32m    <!-- åŠŸèƒ½åˆ—è¡¨åŒºåŸŸ -->[m
[32m+[m[32m    <el-card class="function-list" shadow="hover">[m
[32m+[m[32m      <h3 class="section-title">è´¦æˆ·è®¾ç½®</h3>[m
[32m+[m[32m      <el-menu[m
[32m+[m[32m        default-active="1"[m
[32m+[m[32m        class="function-menu"[m
[32m+[m[32m        mode="vertical"[m
[32m+[m[32m        @select="handleMenuSelect"[m
[32m+[m[32m      >[m
[32m+[m[32m        <el-menu-item index="1">[m
[32m+[m[32m          <template #title>[m
[32m+[m[32m            <el-icon><User /></el-icon>[m
[32m+[m[32m            <span>åŸºæœ¬èµ„æ–™</span>[m
[32m+[m[32m          </template>[m
[32m+[m[32m        </el-menu-item>[m
[32m+[m[32m        <el-menu-item index="2">[m
[32m+[m[32m          <template #title>[m
[32m+[m[32m            <el-icon><Location /></el-icon>[m
[32m+[m[32m            <span>æ”¶è´§åœ°å€</span>[m
[32m+[m[32m          </template>[m
[32m+[m[32m        </el-menu-item>[m
[32m+[m[32m        <el-menu-item index="3">[m
[32m+[m[32m          <template #title>[m
[32m+[m[32m            <el-icon><Lock /></el-icon>[m
[32m+[m[32m            <span>ä¿®æ”¹å¯†ç </span>[m
[32m+[m[32m          </template>[m
[32m+[m[32m        </el-menu-item>[m
[32m+[m[32m        <el-menu-item index="4">[m
[32m+[m[32m          <template #title>[m
[32m+[m[32m            <el-icon><SwitchButton /></el-icon>[m
[32m+[m[32m            <span>é€€å‡ºç™»å½•</span>[m
[32m+[m[32m          </template>[m
[32m+[m[32m        </el-menu-item>[m
[32m+[m[32m      </el-menu>[m
[32m+[m[32m    </el-card>[m
[32m+[m[41m    [m
[32m+[m[32m    <!-- åŸºæœ¬èµ„æ–™å¼¹çª— -->[m
[32m+[m[32m    <el-dialog[m
[32m+[m[32m      v-model="dialogVisible"[m
[32m+[m[32m      title="ç¼–è¾‘åŸºæœ¬èµ„æ–™"[m
[32m+[m[32m      width="500px"[m
[32m+[m[32m    >[m
[32m+[m[32m      <el-form :model="editForm" label-width="80px">[m
[32m+[m[32m        <el-form-item label="æ˜µç§°">[m
[32m+[m[32m          <el-input v-model="editForm.nickname" placeholder="è¯·è¾“å…¥æ˜µç§°" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="æ€§åˆ«">[m
[32m+[m[32m          <el-radio-group v-model="editForm.sex">[m
[32m+[m[32m            <el-radio label="0">ç”·</el-radio>[m
[32m+[m[32m            <el-radio label="1">å¥³</el-radio>[m
[32m+[m[32m            <el-radio label="2">æœªçŸ¥</el-radio>[m
[32m+[m[32m          </el-radio-group>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="æ‰‹æœºå·">[m
[32m+[m[32m          <el-input v-model="editForm.phonenumber" placeholder="è¯·è¾“å…¥æ‰‹æœºå·" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m      </el-form>[m
[32m+[m[32m      <template #footer>[m
[32m+[m[32m        <span class="dialog-footer">[m
[32m+[m[32m          <el-button @click="dialogVisible = false">å–æ¶ˆ</el-button>[m
[32m+[m[32m          <el-button type="primary" @click="saveProfile">ä¿å­˜</el-button>[m
[32m+[m[32m        </span>[m
[32m+[m[32m      </template>[m
[32m+[m[32m    </el-dialog>[m
[32m+[m[41m    [m
[32m+[m[32m    <!-- ä¿®æ”¹å¯†ç å¼¹çª— -->[m
[32m+[m[32m    <el-dialog[m
[32m+[m[32m      v-model="pwdDialogVisible"[m
[32m+[m[32m      title="ä¿®æ”¹å¯†ç "[m
[32m+[m[32m      width="500px"[m
[32m+[m[32m    >[m
[32m+[m[32m      <el-form :model="pwdForm" label-width="100px" :rules="pwdRules" ref="pwdFormRef">[m
[32m+[m[32m        <el-form-item label="æ—§å¯†ç " prop="oldPassword">[m
[32m+[m[32m          <el-input type="password" v-model="pwdForm.oldPassword" placeholder="è¯·è¾“å…¥æ—§å¯†ç " />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="æ–°å¯†ç " prop="newPassword">[m
[32m+[m[32m          <el-input type="password" v-model="pwdForm.newPassword" placeholder="è¯·è¾“å…¥æ–°å¯†ç " />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="ç¡®è®¤æ–°å¯†ç " prop="confirmPassword">[m
[32m+[m[32m          <el-input type="password" v-model="pwdForm.confirmPassword" placeholder="è¯·ç¡®è®¤æ–°å¯†ç " />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m      </el-form>[m
[32m+[m[32m      <template #footer>[m
[32m+[m[32m        <span class="dialog-footer">[m
[32m+[m[32m          <el-button @click="pwdDialogVisible = false">å–æ¶ˆ</el-button>[m
[32m+[m[32m          <el-button type="primary" @click="savePassword">ä¿å­˜</el-button>[m
[32m+[m[32m        </span>[m
[32m+[m[32m      </template>[m
[32m+[m[32m    </el-dialog>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </el-main>[m
[32m+[m[32m    </el-container>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { ref, reactive, computed, onMounted } from 'vue'[m
[32m+[m[32mimport { useRouter } from 'vue-router'[m
[32m+[m[32mimport { Plus, Phone, User, Location, Lock, SwitchButton, Timer, Van, Box, List } from '@element-plus/icons-vue'[m
[32m+[m[32mimport { ElMessage } from 'element-plus'[m
[32m+[m[32mimport { getInfo } from '@/api/portal/user'[m
[32m+[m[32mimport { updateProfile } from '@/api/portal/user'[m
[32m+[m[32mimport { updatePassword } from '@/api/portal/user'[m
[32m+[m[32mimport { getAppUserInfo } from '@/api/appLogin'[m
[32m+[m[32mimport Header from '@/views/computerMarket/Header.vue'[m
[32m+[m
[32m+[m[32mconst router = useRouter()[m
[32m+[m
[32m+[m[32m// ç”¨æˆ·ä¿¡æ¯[m
[32m+[m[32mconst userInfo = ref({[m
[32m+[m[32m  username: '',[m
[32m+[m[32m  nickname: '',[m
[32m+[m[32m  avatar: '',[m
[32m+[m[32m  phonenumber: '',[m
[32m+[m[32m  sex: '2',[m
[32m+[m[32m  creditScore: 700,[m
[32m+[m[32m  balance: 0[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32m// é»˜è®¤å¤´åƒ[m
[32m+[m[32mconst defaultAvatar = '/img/profile.jpg'[m
[32m+[m
[32m+[m[32m// ç¼–è¾‘èµ„æ–™å¼¹çª—[m
[32m+[m[32mconst dialogVisible = ref(false)[m
[32m+[m[32mconst editForm = reactive({[m
[32m+[m[32m  nickname: '',[m
[32m+[m[32m  sex: '2',[m
[32m+[m[32m  phonenumber: ''[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32m// ä¿®æ”¹å¯†ç å¼¹çª—[m
[32m+[m[32mconst pwdDialogVisible = ref(false)[m
[32m+[m[32mconst pwdFormRef = ref()[m
[32m+[m[32mconst pwdForm = reactive({[m
[32m+[m[32m  oldPassword: '',[m
[32m+[m[32m  newPassword: '',[m
[32m+[m[32m  confirmPassword: ''[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32m// å¯†ç éªŒè¯è§„åˆ™[m
[32m+[m[32mconst pwdRules = {[m
[32m+[m[32m  oldPassword: [{ required: true, message: 'è¯·è¾“å…¥æ—§å¯†ç ', trigger: 'blur' }],[m
[32m+[m[32m  newPassword: [{ required: true, message: 'è¯·è¾“å…¥æ–°å¯†ç ', trigger: 'blur' }],[m
[32m+[m[32m  confirmPassword: [[m
[32m+[m[32m    { required: true, message: 'è¯·ç¡®è®¤æ–°å¯†ç ', trigger: 'blur' },[m
[32m+[m[32m    { validator: (rule, value, callback) => {[m
[32m+[m[32m        if (value !== pwdForm.newPassword) {[m
[32m+[m[32m          callback(new Error('ä¸¤æ¬¡è¾“å…¥å¯†ç ä¸ä¸€è‡´'))[m
[32m+[m[32m        } else {[m
[32m+[m[32m          callback()[m
[32m+[m[32m        }[m
[32m+[m[32m      }, trigger: 'blur' }[m
[32m+[m[32m  ][m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// è®¡ç®—ä¿¡ç”¨åˆ†é¢œè‰²[m
[32m+[m[32mconst creditColor = computed(() => {[m
[32m+[m[32m  const score = userInfo.value.creditScore || 700[m
[32m+[m[32m  if (score >= 800) return '#67c23a'[m
[32m+[m[32m  if (score >= 700) return '#e6a23c'[m
[32m+[m[32m  return '#f56c6c'[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32m// è®¡ç®—ç”¨æˆ·å¤´åƒ[m
[32m+[m[32mconst userAvatar = computed(() => {[m
[32m+[m[32m  if (userInfo.value && userInfo.value.avatar) {[m
[32m+[m[32m    return userInfo.value.avatar[m
[32m+[m[32m  }[m
[32m+[m[32m  return defaultAvatar[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32m// è·å–App-Token[m
[32m+[m[32mconst appToken = computed(() => {[m
[32m+[m[32m  return localStorage.getItem('app_token')[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32m// è·å–ç”¨æˆ·ä¿¡æ¯[m
[32m+[m[32mconst getUserInfo = async () => {[m
[32m+[m[32m  const token = localStorage.getItem('app_token')[m
[32m+[m[32m  if (token) {[m
[32m+[m[32m    try {[m
[32m+[m[32m      const res = await getAppUserInfo()[m
[32m+[m[32m      userInfo.value = {[m
[32m+[m[32m        ...userInfo.value,[m
[32m+[m[32m        ...res.user,[m
[32m+[m[32m        creditScore: res.user.creditScore || 700,[m
[32m+[m[32m        balance: res.user.balance || 0[m
[32m+[m[32m      }[m
[32m+[m[32m    } catch (err) {[m
[32m+[m[32m      console.error('è·å–ç”¨æˆ·ä¿¡æ¯å¤±è´¥:', err)[m
[32m+[m[32m      localStorage.removeItem('app_token')[m
[32m+[m[32m      ElMessage.error('ç™»å½•çŠ¶æ€å·²è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•')[m
[32m+[m[32m      router.push('/portal/login')[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å¤´åƒä¸Šä¼ æˆåŠŸå¤„ç†[m
[32m+[m[32mconst handleAvatarSuccess = (response) => {[m
[32m+[m[32m  if (response.code === 200) {[m
[32m+[m[32m    userInfo.value.avatar = response.data.avatar[m
[32m+[m[32m    ElMessage.success('å¤´åƒä¸Šä¼ æˆåŠŸ')[m
[32m+[m[32m  } else {[m
[32m+[m[32m    ElMessage.error('å¤´åƒä¸Šä¼ å¤±è´¥')[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å¤„ç†å¤´åƒåŠ è½½å¤±è´¥[m
[32m+[m[32mconst handleAvatarError = (event) => {[m
[32m+[m[32m  event.target.src = defaultAvatar[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å¤´åƒä¸Šä¼ å‰éªŒè¯[m
[32m+[m[32mconst beforeAvatarUpload = (file) => {[m
[32m+[m[32m  const isJPG = file.type === 'image/jpeg' || file.type === 'image/png'[m
[32m+[m[32m  const isLt2M = file.size / 1024 / 1024 < 2[m
[32m+[m
[32m+[m[32m  if (!isJPG) {[m
[32m+[m[32m    ElMessage.error('ä¸Šä¼ å¤´åƒå›¾ç‰‡åªèƒ½æ˜¯ JPG/PNG æ ¼å¼!')[m
[32m+[m[32m  }[m
[32m+[m[32m  if (!isLt2M) {[m
[32m+[m[32m    ElMessage.error('ä¸Šä¼ å¤´åƒå›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡ 2MB!')[m
[32m+[m[32m  }[m
[32m+[m[32m  return isJPG && isLt2M[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// èœå•é€‰æ‹©å¤„ç†[m
[32m+[m[32mconst handleMenuSelect = (index) => {[m
[32m+[m[32m  switch (index) {[m
[32m+[m[32m    case '1':[m
[32m+[m[32m      // ç¼–è¾‘åŸºæœ¬èµ„æ–™[m
[32m+[m[32m      editForm.nickname = userInfo.value.nickname[m
[32m+[m[32m      editForm.sex = userInfo.value.sex[m
[32m+[m[32m      editForm.phonenumber = userInfo.value.phonenumber[m
[32m+[m[32m      dialogVisible.value = true[m
[32m+[m[32m      break[m
[32m+[m[32m    case '2':[m
[32m+[m[32m      // è·³è½¬åˆ°æ”¶è´§åœ°å€[m
[32m+[m[32m      router.push('/portal/user/address')[m
[32m+[m[32m      break[m
[32m+[m[32m    case '3':[m
[32m+[m[32m      // ä¿®æ”¹å¯†ç [m
[32m+[m[32m      pwdDialogVisible.value = true[m
[32m+[m[32m      break[m
[32m+[m[32m    case '4':[m
[32m+[m[32m      // é€€å‡ºç™»å½•[m
[32m+[m[32m      handleLogout()[m
[32m+[m[32m      break[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¿å­˜åŸºæœ¬èµ„æ–™[m
[32m+[m[32mconst saveProfile = async () => {[m
[32m+[m[32m  try {[m
[32m+[m[32m    await updateProfile(editForm)[m
[32m+[m[32m    await getUserInfo()[m
[32m+[m[32m    dialogVisible.value = false[m
[32m+[m[32m    ElMessage.success('åŸºæœ¬èµ„æ–™ä¿®æ”¹æˆåŠŸ')[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    ElMessage.error('åŸºæœ¬èµ„æ–™ä¿®æ”¹å¤±è´¥')[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// ä¿å­˜å¯†ç [m
[32m+[m[32mconst savePassword = async () => {[m
[32m+[m[32m  if (!pwdFormRef.value) return[m
[32m+[m[32m  await pwdFormRef.value.validate(async (valid) => {[m
[32m+[m[32m    if (valid) {[m
[32m+[m[32m      try {[m
[32m+[m[32m        await updatePassword(pwdForm)[m
[32m+[m[32m        pwdDialogVisible.value = false[m
[32m+[m[32m        pwdForm.oldPassword = ''[m
[32m+[m[32m        pwdForm.newPassword = ''[m
[32m+[m[32m        pwdForm.confirmPassword = ''[m
[32m+[m[32m        ElMessage.success('å¯†ç ä¿®æ”¹æˆåŠŸ')[m
[32m+[m[32m      } catch (error) {[m
[32m+[m[32m        ElMessage.error('å¯†ç ä¿®æ”¹å¤±è´¥')[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// é€€å‡ºç™»å½•[m
[32m+[m[32mconst handleLogout = () => {[m
[32m+[m[32m  localStorage.removeItem('app_token')[m
[32m+[m[32m  userInfo.value = {[m
[32m+[m[32m    username: '',[m
[32m+[m[32m    nickname: '',[m
[32m+[m[32m    avatar: '',[m
[32m+[m[32m    phonenumber: '',[m
[32m+[m[32m    sex: '2',[m
[32m+[m[32m    creditScore: 700,[m
[32m+[m[32m    balance: 0[m
[32m+[m[32m  }[m
[32m+[m[32m  ElMessage.success('é€€å‡ºç™»å½•æˆåŠŸ')[m
[32m+[m[32m  router.push('/computer-market')[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// è·³è½¬åˆ°è®¢å•é¡µé¢[m
[32m+[m[32mconst goToOrder = (tabIndex) => {[m
[32m+[m[32m  router.push({[m
[32m+[m[32m    path: '/portal/user/order',[m
[32m+[m[32m    query: { activeTab: tabIndex }[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// é¡µé¢æŒ‚è½½æ—¶è·å–ç”¨æˆ·ä¿¡æ¯[m
[32m+[m[32monMounted(() => {[m
[32m+[m[32m  getUserInfo()[m
[32m+[m[32m})[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style scoped>[m
[32m+[m[32m/* å¸ƒå±€æ ·å¼ */[m
[32m+[m[32m.common-layout {[m
[32m+[m[32m  min-height: 100vh;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.app-container {[m
[32m+[m[32m  background-color: #FAFAF8;[m
[32m+[m[32m  color: #000000;[m
[32m+[m[32m  min-height: 100vh;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.main-content {[m
[32m+[m[32m  background-color: #FAFAF8;[m
[32m+[m[32m  padding: 20px;[m
[32m+[m[32m  margin-top: 70px; /* ä¸ºå›ºå®šå¯¼èˆªæ ç•™å‡ºç©ºé—´ */[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.profile-container {[m
[32m+[m[32m  max-width: 1200px;[m
[32m+[m[32m  margin: 0 auto;[m
[32m+[m[32m  padding: 0 20px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* å¤´éƒ¨ä¿¡æ¯æ ·å¼ */[m
[32m+[m[32m.profile-header {[m
[32m+[m[32m  margin-bottom: 20px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.header-content {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  gap: 40px;[m
[32m+[m[32m  padding: 20px 0;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* å¤´åƒæ ·å¼ */[m
[32m+[m[32m.avatar-section {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  flex-direction: column;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  gap: 10px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.avatar-uploader {[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m  width: 120px;[m
[32m+[m[32m  height: 120px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.avatar {[m
[32m+[m[32m  width: 120px;[m
[32m+[m[32m  height: 120px;[m
[32m+[m[32m  border-radius: 50%;[m
[32m+[m[32m  object-fit: cover;[m
[32m+[m[32m  border: 3px solid #fff;[m
[32m+[m[32m  box-shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);[m
[32m+[m[32m  cursor: pointer;[m
[32m+[m[32m  transition: all 0.3s ease;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.avatar:hover {[m
[32m+[m[32m  transform: scale(1.05);[m
[32m+[m[32m  box-shadow: 0 4px 20px 0 rgba(0, 0, 0, 0.15);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.avatar-uploader-icon {[m
[32m+[m[32m  width: 120px;[m
[32m+[m[32m  height: 120px;[m
[32m+[m[32m  border-radius: 50%;[m
[32m+[m[32m  background-color: #f5f7fa;[m
[32m+[m[32m  border: 1px dashed #d9d9d9;[m
[32m+[m[32m  cursor: pointer;[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  justify-content: center;[m
[32m+[m[32m  font-size: 28px;[m
[32m+[m[32m  color: #8c939d;[m
[32m+[m[32m  transition: all 0.3s ease;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.avatar-uploader-icon:hover {[m
[32m+[m[32m  border-color: #409eff;[m
[32m+[m[32m  color: #409eff;[m
[32m+[m[32m  background-color: #ecf5ff;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.avatar-hint {[m
[32m+[m[32m  font-size: 12px;[m
[32m+[m[32m  color: #909399;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* ç”¨æˆ·ä¿¡æ¯æ ·å¼ */[m
[32m+[m[32m.user-info-section {[m
[32m+[m[32m  flex: 1;[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  flex-direction: column;[m
[32m+[m[32m  gap: 20px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.user-main-info {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  gap: 15px;[m
[32m+[m[32m  flex-wrap: wrap;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.nickname {[m
[32m+[m[32m  margin: 0;[m
[32m+[m[32m  font-size: 24px;[m
[32m+[m[32m  font-weight: 600;[m
[32m+[m[32m  color: #303133;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.username {[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m  color: #606266;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.auth-tag {[m
[32m+[m[32m  margin-left: 10px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.user-detail-info {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  gap: 30px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.info-item {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  gap: 8px;[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m  color: #606266;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* ä¿¡ç”¨åˆ†å’Œä½™é¢æ ·å¼ */[m
[32m+[m[32m.credit-section {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  flex-direction: column;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  gap: 20px;[m
[32m+[m[32m  padding: 0 30px;[m
[32m+[m[32m  border-left: 1px solid #ebeef5;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.credit-score {[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.progress-content {[m
[32m+[m[32m  position: absolute;[m
[32m+[m[32m  top: 50%;[m
[32m+[m[32m  left: 50%;[m
[32m+[m[32m  transform: translate(-50%, -50%);[m
[32m+[m[32m  text-align: center;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.progress-text {[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m  color: #606266;[m
[32m+[m[32m  margin-bottom: 5px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.progress-value {[m
[32m+[m[32m  font-size: 24px;[m
[32m+[m[32m  font-weight: 600;[m
[32m+[m[32m  color: #303133;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.balance-info {[m
[32m+[m[32m  text-align: center;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.balance-label {[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m  color: #606266;[m
[32m+[m[32m  margin-bottom: 5px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.balance-amount {[m
[32m+[m[32m  font-size: 28px;[m
[32m+[m[32m  font-weight: 600;[m
[32m+[m[32m  color: #e6a23c;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* è®¢å•å¿«æ·å…¥å£æ ·å¼ */[m
[32m+[m[32m.order-shortcuts {[m
[32m+[m[32m  margin-bottom: 20px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.section-title {[m
[32m+[m[32m  margin: 0 0 20px 0;[m
[32m+[m[32m  font-size: 18px;[m
[32m+[m[32m  font-weight: 600;[m
[32m+[m[32m  color: #303133;[m
[32m+[m[32m  border-bottom: 2px solid #409eff;[m
[32m+[m[32m  padding-bottom: 10px;[m
[32m+[m[32m  display: inline-block;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.shortcuts-grid {[m
[32m+[m[32m  display: grid;[m
[32m+[m[32m  grid-template-columns: repeat(4, 1fr);[m
[32m+[m[32m  gap: 20px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.shortcut-item {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  flex-direction: column;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  justify-content: center;[m
[32m+[m[32m  padding: 25px 0;[m
[32m+[m[32m  background-color: #f5f7fa;[m
[32m+[m[32m  border-radius: 12px;[m
[32m+[m[32m  cursor: pointer;[m
[32m+[m[32m  transition: all 0.3s ease;[m
[32m+[m[32m  border: 1px solid transparent;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.shortcut-item:hover {[m
[32m+[m[32m  background-color: #ecf5ff;[m
[32m+[m[32m  border-color: #409eff;[m
[32m+[m[32m  transform: translateY(-5px);[m
[32m+[m[32m  box-shadow: 0 4px 12px rgba(64, 158, 255, 0.15);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.shortcut-icon {[m
[32m+[m[32m  font-size: 32px;[m
[32m+[m[32m  color: #409eff;[m
[32m+[m[32m  margin-bottom: 10px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.shortcut-text {[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m  color: #303133;[m
[32m+[m[32m  font-weight: 500;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* åŠŸèƒ½åˆ—è¡¨æ ·å¼ */[m
[32m+[m[32m.function-list {[m
[32m+[m[32m  margin-bottom: 20px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.function-menu {[m
[32m+[m[32m  border: none;[m
[32m+[m[32m  background: none;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.function-menu .el-menu-item {[m
[32m+[m[32m  height: 60px;[m
[32m+[m[32m  line-height: 60px;[m
[32m+[m[32m  font-size: 16px;[m
[32m+[m[32m  color: #303133;[m
[32m+[m[32m  border-radius: 8px;[m
[32m+[m[32m  margin-bottom: 8px;[m
[32m+[m[32m  transition: all 0.3s ease;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.function-menu .el-menu-item:hover {[m
[32m+[m[32m  background-color: #ecf5ff;[m
[32m+[m[32m  color: #409eff;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.function-menu .el-menu-item.is-active {[m
[32m+[m[32m  background-color: #ecf5ff;[m
[32m+[m[32m  color: #409eff;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.function-menu .el-menu-item .el-icon {[m
[32m+[m[32m  margin-right: 12px;[m
[32m+[m[32m  font-size: 18px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/* å“åº”å¼è®¾è®¡ */[m
[32m+[m[32m@media (max-width: 1024px) {[m
[32m+[m[32m  .header-content {[m
[32m+[m[32m    flex-direction: column;[m
[32m+[m[32m    text-align: center;[m
[32m+[m[32m    gap: 20px;[m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  .credit-section {[m
[32m+[m[32m    border-left: none;[m
[32m+[m[32m    border-top: 1px solid #ebeef5;[m
[32m+[m[32m    padding-top: 20px;[m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  .user-detail-info {[m
[32m+[m[32m    justify-content: center;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m@media (max-width: 768px) {[m
[32m+[m[32m  .shortcuts-grid {[m
[32m+[m[32m    grid-template-columns: repeat(2, 1fr);[m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  .user-main-info {[m
[32m+[m[32m    flex-direction: column;[m
[32m+[m[32m    align-items: flex-start;[m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  .user-detail-info {[m
[32m+[m[32m    flex-direction: column;[m
[32m+[m[32m    align-items: flex-start;[m
[32m+[m[32m    gap: 15px;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/views/redirect/index.vue b/src/views/redirect/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..a469960d[m
[1m--- /dev/null[m
[1m+++ b/src/views/redirect/index.vue[m
[36m@@ -0,0 +1,14 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div></div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { useRoute, useRouter } from 'vue-router'[m
[32m+[m
[32m+[m[32mconst route = useRoute();[m
[32m+[m[32mconst router = useRouter();[m
[32m+[m[32mconst { params, query } = route[m
[32m+[m[32mconst { path } = params[m
[32m+[m
[32m+[m[32mrouter.replace({ path: '/' + path, query })[m
[32m+[m[32m</script>[m
\ No newline at end of file[m
[1mdiff --git a/src/views/register.vue b/src/views/register.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..8b6022ed[m
[1m--- /dev/null[m
[1m+++ b/src/views/register.vue[m
[36m@@ -0,0 +1,218 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="register">[m
[32m+[m[32m    <el-form ref="registerRef" :model="registerForm" :rules="registerRules" class="register-form">[m
[32m+[m[32m      <h3 class="title">ç§Ÿå”®å•†åŸ</h3>[m
[32m+[m[32m      <el-form-item prop="username">[m
[32m+[m[32m        <el-input[m[41m [m
[32m+[m[32m          v-model="registerForm.username"[m[41m [m
[32m+[m[32m          type="text"[m[41m [m
[32m+[m[32m          size="large"[m[41m [m
[32m+[m[32m          auto-complete="off"[m[41m [m
[32m+[m[32m          placeholder="è´¦å·"[m
[32m+[m[32m        >[m
[32m+[m[32m          <template #prefix><svg-icon icon-class="user" class="el-input__icon input-icon" /></template>[m
[32m+[m[32m        </el-input>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item prop="password">[m
[32m+[m[32m        <el-input[m
[32m+[m[32m          v-model="registerForm.password"[m
[32m+[m[32m          type="password"[m
[32m+[m[32m          size="large"[m[41m [m
[32m+[m[32m          auto-complete="off"[m
[32m+[m[32m          placeholder="å¯†ç "[m
[32m+[m[32m          @keyup.enter="handleRegister"[m
[32m+[m[32m        >[m
[32m+[m[32m          <template #prefix><svg-icon icon-class="password" class="el-input__icon input-icon" /></template>[m
[32m+[m[32m        </el-input>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item prop="confirmPassword">[m
[32m+[m[32m        <el-input[m
[32m+[m[32m          v-model="registerForm.confirmPassword"[m
[32m+[m[32m          type="password"[m
[32m+[m[32m          size="large"[m[41m [m
[32m+[m[32m          auto-complete="off"[m
[32m+[m[32m          placeholder="ç¡®è®¤å¯†ç "[m
[32m+[m[32m          @keyup.enter="handleRegister"[m
[32m+[m[32m        >[m
[32m+[m[32m          <template #prefix><svg-icon icon-class="password" class="el-input__icon input-icon" /></template>[m
[32m+[m[32m        </el-input>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item prop="code" v-if="captchaEnabled">[m
[32m+[m[32m        <el-input[m
[32m+[m[32m          size="large"[m[41m [m
[32m+[m[32m          v-model="registerForm.code"[m
[32m+[m[32m          auto-complete="off"[m
[32m+[m[32m          placeholder="éªŒè¯ç "[m
[32m+[m[32m          style="width: 63%"[m
[32m+[m[32m          @keyup.enter="handleRegister"[m
[32m+[m[32m        >[m
[32m+[m[32m          <template #prefix><svg-icon icon-class="validCode" class="el-input__icon input-icon" /></template>[m
[32m+[m[32m        </el-input>[m
[32m+[m[32m        <div class="register-code">[m
[32m+[m[32m          <img :src="codeUrl" @click="getCode" class="register-code-img"/>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item style="width:100%;">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          :loading="loading"[m
[32m+[m[32m          size="large"[m[41m [m
[32m+[m[32m          type="primary"[m
[32m+[m[32m          style="width:100%;"[m
[32m+[m[32m          @click.prevent="handleRegister"[m
[32m+[m[32m        >[m
[32m+[m[32m          <span v-if="!loading">æ³¨ å†Œ</span>[m
[32m+[m[32m          <span v-else>æ³¨ å†Œ ä¸­...</span>[m
[32m+[m[32m        </el-button>[m
[32m+[m[32m        <div style="float: right;">[m
[32m+[m[32m          <router-link class="link-type" :to="'/login'">ä½¿ç”¨å·²æœ‰è´¦æˆ·ç™»å½•</router-link>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m    </el-form>[m
[32m+[m[32m    <!--  åº•éƒ¨  -->[m
[32m+[m[32m    <div class="el-register-footer">[m
[32m+[m[32m      <span>Copyright Â© 2018-2023 ruoyi.vip All Rights Reserved.</span>[m
[32m+[m[32m    </div>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { ElMessageBox } from "element-plus";[m
[32m+[m[32mimport { getCodeImg, register } from "@/api/login";[m
[32m+[m
[32m+[m[32mconst router = useRouter();[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m
[32m+[m[32mconst registerForm = ref({[m
[32m+[m[32m  username: "",[m
[32m+[m[32m  password: "",[m
[32m+[m[32m  confirmPassword: "",[m
[32m+[m[32m  code: "",[m
[32m+[m[32m  uuid: ""[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst equalToPassword = (rule, value, callback) => {[m
[32m+[m[32m  if (registerForm.value.password !== value) {[m
[32m+[m[32m    callback(new Error("ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´"));[m
[32m+[m[32m  } else {[m
[32m+[m[32m    callback();[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mconst registerRules = {[m
[32m+[m[32m  username: [[m
[32m+[m[32m    { required: true, trigger: "blur", message: "è¯·è¾“å…¥æ‚¨çš„è´¦å·" },[m
[32m+[m[32m    { min: 2, max: 20, message: "ç”¨æˆ·è´¦å·é•¿åº¦å¿…é¡»ä»‹äº 2 å’Œ 20 ä¹‹é—´", trigger: "blur" }[m
[32m+[m[32m  ],[m
[32m+[m[32m  password: [[m
[32m+[m[32m    { required: true, trigger: "blur", message: "è¯·è¾“å…¥æ‚¨çš„å¯†ç " },[m
[32m+[m[32m    { min: 5, max: 20, message: "ç”¨æˆ·å¯†ç é•¿åº¦å¿…é¡»ä»‹äº 5 å’Œ 20 ä¹‹é—´", trigger: "blur" }[m
[32m+[m[32m  ],[m
[32m+[m[32m  confirmPassword: [[m
[32m+[m[32m    { required: true, trigger: "blur", message: "è¯·å†æ¬¡è¾“å…¥æ‚¨çš„å¯†ç " },[m
[32m+[m[32m    { required: true, validator: equalToPassword, trigger: "blur" }[m
[32m+[m[32m  ],[m
[32m+[m[32m  code: [{ required: true, trigger: "change", message: "è¯·è¾“å…¥éªŒè¯ç " }][m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mconst codeUrl = ref("");[m
[32m+[m[32mconst loading = ref(false);[m
[32m+[m[32mconst captchaEnabled = ref(true);[m
[32m+[m
[32m+[m[32mfunction handleRegister() {[m
[32m+[m[32m  proxy.$refs.registerRef.validate(valid => {[m
[32m+[m[32m    if (valid) {[m
[32m+[m[32m      loading.value = true;[m
[32m+[m[32m      register(registerForm.value).then(res => {[m
[32m+[m[32m        const username = registerForm.value.username;[m
[32m+[m[32m        ElMessageBox.alert("<font color='red'>æ­å–œä½ ï¼Œæ‚¨çš„è´¦å· " + username + " æ³¨å†ŒæˆåŠŸï¼</font>", "ç³»ç»Ÿæç¤º", {[m
[32m+[m[32m          dangerouslyUseHTMLString: true,[m
[32m+[m[32m          type: "success",[m
[32m+[m[32m        }).then(() => {[m
[32m+[m[32m          router.push("/login");[m
[32m+[m[32m        }).catch(() => {});[m
[32m+[m[32m      }).catch(() => {[m
[32m+[m[32m        loading.value = false;[m
[32m+[m[32m        if (captchaEnabled) {[m
[32m+[m[32m          getCode();[m
[32m+[m[32m        }[m
[32m+[m[32m      });[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction getCode() {[m
[32m+[m[32m  getCodeImg().then(res => {[m
[32m+[m[32m    captchaEnabled.value = res.captchaEnabled === undefined ? true : res.captchaEnabled;[m
[32m+[m[32m    if (captchaEnabled.value) {[m
[32m+[m[32m      codeUrl.value = "data:image/gif;base64," + res.img;[m
[32m+[m[32m      registerForm.value.uuid = res.uuid;[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mgetCode();[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang='scss' scoped>[m
[32m+[m[32m.register {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  justify-content: center;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  height: 100%;[m
[32m+[m[32m  background-image: url("../assets/images/login-background.jpg");[m
[32m+[m[32m  background-size: cover;[m
[32m+[m[32m}[m
[32m+[m[32m.title {[m
[32m+[m[32m  margin: 0px auto 30px auto;[m
[32m+[m[32m  text-align: center;[m
[32m+[m[32m  color: #707070;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.register-form {[m
[32m+[m[32m  border-radius: 6px;[m
[32m+[m[32m  background: #ffffff;[m
[32m+[m[32m  width: 400px;[m
[32m+[m[32m  padding: 25px 25px 5px 25px;[m
[32m+[m[32m  .el-input {[m
[32m+[m[32m    height: 40px;[m
[32m+[m[32m    input {[m
[32m+[m[32m      height: 40px;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m  .input-icon {[m
[32m+[m[32m    height: 39px;[m
[32m+[m[32m    width: 14px;[m
[32m+[m[32m    margin-left: 0px;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m.register-tip {[m
[32m+[m[32m  font-size: 13px;[m
[32m+[m[32m  text-align: center;[m
[32m+[m[32m  color: #bfbfbf;[m
[32m+[m[32m}[m
[32m+[m[32m.register-code {[m
[32m+[m[32m  width: 33%;[m
[32m+[m[32m  height: 40px;[m
[32m+[m[32m  float: right;[m
[32m+[m[32m  img {[m
[32m+[m[32m    cursor: pointer;[m
[32m+[m[32m    vertical-align: middle;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m.el-register-footer {[m
[32m+[m[32m  height: 40px;[m
[32m+[m[32m  line-height: 40px;[m
[32m+[m[32m  position: fixed;[m
[32m+[m[32m  bottom: 0;[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m  text-align: center;[m
[32m+[m[32m  color: #fff;[m
[32m+[m[32m  font-family: Arial;[m
[32m+[m[32m  font-size: 12px;[m
[32m+[m[32m  letter-spacing: 1px;[m
[32m+[m[32m}[m
[32m+[m[32m.register-code-img {[m
[32m+[m[32m  height: 40px;[m
[32m+[m[32m  padding-left: 12px;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
[1mdiff --git a/src/views/system/AppAddress/index.vue b/src/views/system/AppAddress/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..c7b62e0e[m
[1m--- /dev/null[m
[1m+++ b/src/views/system/AppAddress/index.vue[m
[36m@@ -0,0 +1,342 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="app-container">[m
[32m+[m[32m    <el-form :model="queryParams" ref="queryRef" :inline="true" v-show="showSearch" label-width="68px">[m
[32m+[m[32m      <el-form-item label="ç”¨æˆ·ID" prop="userId">[m
[32m+[m[32m        <el-input[m
[32m+[m[32m          v-model="queryParams.userId"[m
[32m+[m[32m          placeholder="è¯·è¾“å…¥ç”¨æˆ·ID"[m
[32m+[m[32m          clearable[m
[32m+[m[32m          @keyup.enter="handleQuery"[m
[32m+[m[32m        />[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item label="æ”¶è´§äººå§“å" prop="realName">[m
[32m+[m[32m        <el-input[m
[32m+[m[32m          v-model="queryParams.realName"[m
[32m+[m[32m          placeholder="è¯·è¾“å…¥æ”¶è´§äººå§“å"[m
[32m+[m[32m          clearable[m
[32m+[m[32m          @keyup.enter="handleQuery"[m
[32m+[m[32m        />[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item label="æ‰‹æœºå·" prop="phone">[m
[32m+[m[32m        <el-input[m
[32m+[m[32m          v-model="queryParams.phone"[m
[32m+[m[32m          placeholder="è¯·è¾“å…¥æ‰‹æœºå·"[m
[32m+[m[32m          clearable[m
[32m+[m[32m          @keyup.enter="handleQuery"[m
[32m+[m[32m        />[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item label="çœ" prop="province">[m
[32m+[m[32m        <el-input[m
[32m+[m[32m          v-model="queryParams.province"[m
[32m+[m[32m          placeholder="è¯·è¾“å…¥çœ"[m
[32m+[m[32m          clearable[m
[32m+[m[32m          @keyup.enter="handleQuery"[m
[32m+[m[32m        />[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item label="å¸‚" prop="city">[m
[32m+[m[32m        <el-input[m
[32m+[m[32m          v-model="queryParams.city"[m
[32m+[m[32m          placeholder="è¯·è¾“å…¥å¸‚"[m
[32m+[m[32m          clearable[m
[32m+[m[32m          @keyup.enter="handleQuery"[m
[32m+[m[32m        />[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item label="åŒº" prop="district">[m
[32m+[m[32m        <el-input[m
[32m+[m[32m          v-model="queryParams.district"[m
[32m+[m[32m          placeholder="è¯·è¾“å…¥åŒº"[m
[32m+[m[32m          clearable[m
[32m+[m[32m          @keyup.enter="handleQuery"[m
[32m+[m[32m        />[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item label="è¯¦ç»†åœ°å€" prop="detailAddress">[m
[32m+[m[32m        <el-input[m
[32m+[m[32m          v-model="queryParams.detailAddress"[m
[32m+[m[32m          placeholder="è¯·è¾“å…¥è¯¦ç»†åœ°å€"[m
[32m+[m[32m          clearable[m
[32m+[m[32m          @keyup.enter="handleQuery"[m
[32m+[m[32m        />[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item label="æ˜¯å¦é»˜è®¤(0å¦ 1æ˜¯)" prop="isDefault">[m
[32m+[m[32m        <el-input[m
[32m+[m[32m          v-model="queryParams.isDefault"[m
[32m+[m[32m          placeholder="è¯·è¾“å…¥æ˜¯å¦é»˜è®¤(0å¦ 1æ˜¯)"[m
[32m+[m[32m          clearable[m
[32m+[m[32m          @keyup.enter="handleQuery"[m
[32m+[m[32m        />[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item>[m
[32m+[m[32m        <el-button type="primary" icon="Search" @click="handleQuery">æœç´¢</el-button>[m
[32m+[m[32m        <el-button icon="Refresh" @click="resetQuery">é‡ç½®</el-button>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m    </el-form>[m
[32m+[m
[32m+[m[32m    <el-row :gutter="10" class="mb8">[m
[32m+[m[32m      <el-col :span="1.5">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="primary"[m
[32m+[m[32m          plain[m
[32m+[m[32m          icon="Plus"[m
[32m+[m[32m          @click="handleAdd"[m
[32m+[m[32m          v-hasPermi="['system:AppAddress:add']"[m
[32m+[m[32m        >æ–°å¢</el-button>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <el-col :span="1.5">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="success"[m
[32m+[m[32m          plain[m
[32m+[m[32m          icon="Edit"[m
[32m+[m[32m          :disabled="single"[m
[32m+[m[32m          @click="handleUpdate"[m
[32m+[m[32m          v-hasPermi="['system:AppAddress:edit']"[m
[32m+[m[32m        >ä¿®æ”¹</el-button>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <el-col :span="1.5">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="danger"[m
[32m+[m[32m          plain[m
[32m+[m[32m          icon="Delete"[m
[32m+[m[32m          :disabled="multiple"[m
[32m+[m[32m          @click="handleDelete"[m
[32m+[m[32m          v-hasPermi="['system:AppAddress:remove']"[m
[32m+[m[32m        >åˆ é™¤</el-button>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <el-col :span="1.5">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="warning"[m
[32m+[m[32m          plain[m
[32m+[m[32m          icon="Download"[m
[32m+[m[32m          @click="handleExport"[m
[32m+[m[32m          v-hasPermi="['system:AppAddress:export']"[m
[32m+[m[32m        >å¯¼å‡º</el-button>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <right-toolbar v-model:showSearch="showSearch" @queryTable="getList"></right-toolbar>[m
[32m+[m[32m    </el-row>[m
[32m+[m
[32m+[m[32m    <el-table v-loading="loading" :data="AppAddressList" @selection-change="handleSelectionChange">[m
[32m+[m[32m      <el-table-column type="selection" width="55" align="center" />[m
[32m+[m[32m      <el-table-column label="${comment}" align="center" prop="addressId" />[m
[32m+[m[32m      <el-table-column label="ç”¨æˆ·ID" align="center" prop="userId" />[m
[32m+[m[32m      <el-table-column label="æ”¶è´§äººå§“å" align="center" prop="realName" />[m
[32m+[m[32m      <el-table-column label="æ‰‹æœºå·" align="center" prop="phone" />[m
[32m+[m[32m      <el-table-column label="çœ" align="center" prop="province" />[m
[32m+[m[32m      <el-table-column label="å¸‚" align="center" prop="city" />[m
[32m+[m[32m      <el-table-column label="åŒº" align="center" prop="district" />[m
[32m+[m[32m      <el-table-column label="è¯¦ç»†åœ°å€" align="center" prop="detailAddress" />[m
[32m+[m[32m      <el-table-column label="æ˜¯å¦é»˜è®¤(0å¦ 1æ˜¯)" align="center" prop="isDefault" />[m
[32m+[m[32m      <el-table-column label="æ“ä½œ" align="center" class-name="small-padding fixed-width">[m
[32m+[m[32m        <template #default="scope">[m
[32m+[m[32m          <el-button link type="primary" icon="Edit" @click="handleUpdate(scope.row)" v-hasPermi="['system:AppAddress:edit']">ä¿®æ”¹</el-button>[m
[32m+[m[32m          <el-button link type="primary" icon="Delete" @click="handleDelete(scope.row)" v-hasPermi="['system:AppAddress:remove']">åˆ é™¤</el-button>[m
[32m+[m[32m        </template>[m
[32m+[m[32m      </el-table-column>[m
[32m+[m[32m    </el-table>[m
[32m+[m[41m    [m
[32m+[m[32m    <pagination[m
[32m+[m[32m      v-show="total>0"[m
[32m+[m[32m      :total="total"[m
[32m+[m[32m      v-model:page="queryParams.pageNum"[m
[32m+[m[32m      v-model:limit="queryParams.pageSize"[m
[32m+[m[32m      @pagination="getList"[m
[32m+[m[32m    />[m
[32m+[m
[32m+[m[32m    <!-- æ·»åŠ æˆ–ä¿®æ”¹æ”¶è´§åœ°å€å¯¹è¯æ¡† -->[m
[32m+[m[32m    <el-dialog :title="title" v-model="open" width="500px" append-to-body>[m
[32m+[m[32m      <el-form ref="AppAddressRef" :model="form" :rules="rules" label-width="80px">[m
[32m+[m[32m        <el-form-item label="ç”¨æˆ·ID" prop="userId">[m
[32m+[m[32m          <el-input v-model="form.userId" placeholder="è¯·è¾“å…¥ç”¨æˆ·ID" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="æ”¶è´§äººå§“å" prop="realName">[m
[32m+[m[32m          <el-input v-model="form.realName" placeholder="è¯·è¾“å…¥æ”¶è´§äººå§“å" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="æ‰‹æœºå·" prop="phone">[m
[32m+[m[32m          <el-input v-model="form.phone" placeholder="è¯·è¾“å…¥æ‰‹æœºå·" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="çœ" prop="province">[m
[32m+[m[32m          <el-input v-model="form.province" placeholder="è¯·è¾“å…¥çœ" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="å¸‚" prop="city">[m
[32m+[m[32m          <el-input v-model="form.city" placeholder="è¯·è¾“å…¥å¸‚" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="åŒº" prop="district">[m
[32m+[m[32m          <el-input v-model="form.district" placeholder="è¯·è¾“å…¥åŒº" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="è¯¦ç»†åœ°å€" prop="detailAddress">[m
[32m+[m[32m          <el-input v-model="form.detailAddress" placeholder="è¯·è¾“å…¥è¯¦ç»†åœ°å€" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="æ˜¯å¦é»˜è®¤(0å¦ 1æ˜¯)" prop="isDefault">[m
[32m+[m[32m          <el-input v-model="form.isDefault" placeholder="è¯·è¾“å…¥æ˜¯å¦é»˜è®¤(0å¦ 1æ˜¯)" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="åˆ é™¤æ ‡å¿—" prop="delFlag">[m
[32m+[m[32m          <el-input v-model="form.delFlag" placeholder="è¯·è¾“å…¥åˆ é™¤æ ‡å¿—" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m      </el-form>[m
[32m+[m[32m      <template #footer>[m
[32m+[m[32m        <div class="dialog-footer">[m
[32m+[m[32m          <el-button type="primary" @click="submitForm">ç¡® å®š</el-button>[m
[32m+[m[32m          <el-button @click="cancel">å– æ¶ˆ</el-button>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </template>[m
[32m+[m[32m    </el-dialog>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup name="AppAddress">[m
[32m+[m[32mimport { listAppAddress, getAppAddress, delAppAddress, addAppAddress, updateAppAddress } from "@/api/system/AppAddress"[m
[32m+[m
[32m+[m[32mconst { proxy } = getCurrentInstance()[m
[32m+[m
[32m+[m[32mconst AppAddressList = ref([])[m
[32m+[m[32mconst open = ref(false)[m
[32m+[m[32mconst loading = ref(true)[m
[32m+[m[32mconst showSearch = ref(true)[m
[32m+[m[32mconst ids = ref([])[m
[32m+[m[32mconst single = ref(true)[m
[32m+[m[32mconst multiple = ref(true)[m
[32m+[m[32mconst total = ref(0)[m
[32m+[m[32mconst title = ref("")[m
[32m+[m
[32m+[m[32mconst data = reactive({[m
[32m+[m[32m  form: {},[m
[32m+[m[32m  queryParams: {[m
[32m+[m[32m    pageNum: 1,[m
[32m+[m[32m    pageSize: 10,[m
[32m+[m[32m    userId: null,[m
[32m+[m[32m    realName: null,[m
[32m+[m[32m    phone: null,[m
[32m+[m[32m    province: null,[m
[32m+[m[32m    city: null,[m
[32m+[m[32m    district: null,[m
[32m+[m[32m    detailAddress: null,[m
[32m+[m[32m    isDefault: null,[m
[32m+[m[32m  },[m
[32m+[m[32m  rules: {[m
[32m+[m[32m    userId: [[m
[32m+[m[32m      { required: true, message: "ç”¨æˆ·IDä¸èƒ½ä¸ºç©º", trigger: "blur" }[m
[32m+[m[32m    ],[m
[32m+[m[32m    realName: [[m
[32m+[m[32m      { required: true, message: "æ”¶è´§äººå§“åä¸èƒ½ä¸ºç©º", trigger: "blur" }[m
[32m+[m[32m    ],[m
[32m+[m[32m    phone: [[m
[32m+[m[32m      { required: true, message: "æ‰‹æœºå·ä¸èƒ½ä¸ºç©º", trigger: "blur" }[m
[32m+[m[32m    ],[m
[32m+[m[32m    detailAddress: [[m
[32m+[m[32m      { required: true, message: "è¯¦ç»†åœ°å€ä¸èƒ½ä¸ºç©º", trigger: "blur" }[m
[32m+[m[32m    ],[m
[32m+[m[32m  }[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32mconst { queryParams, form, rules } = toRefs(data)[m
[32m+[m
[32m+[m[32m/** æŸ¥è¯¢æ”¶è´§åœ°å€åˆ—è¡¨ */[m
[32m+[m[32mfunction getList() {[m
[32m+[m[32m  loading.value = true[m
[32m+[m[32m  listAppAddress(queryParams.value).then(response => {[m
[32m+[m[32m    AppAddressList.value = response.rows[m
[32m+[m[32m    total.value = response.total[m
[32m+[m[32m    loading.value = false[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å–æ¶ˆæŒ‰é’®[m
[32m+[m[32mfunction cancel() {[m
[32m+[m[32m  open.value = false[m
[32m+[m[32m  reset()[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// è¡¨å•é‡ç½®[m
[32m+[m[32mfunction reset() {[m
[32m+[m[32m  form.value = {[m
[32m+[m[32m    addressId: null,[m
[32m+[m[32m    userId: null,[m
[32m+[m[32m    realName: null,[m
[32m+[m[32m    phone: null,[m
[32m+[m[32m    province: null,[m
[32m+[m[32m    city: null,[m
[32m+[m[32m    district: null,[m
[32m+[m[32m    detailAddress: null,[m
[32m+[m[32m    isDefault: null,[m
[32m+[m[32m    delFlag: null,[m
[32m+[m[32m    createTime: null[m
[32m+[m[32m  }[m
[32m+[m[32m  proxy.resetForm("AppAddressRef")[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** æœç´¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleQuery() {[m
[32m+[m[32m  queryParams.value.pageNum = 1[m
[32m+[m[32m  getList()[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** é‡ç½®æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction resetQuery() {[m
[32m+[m[32m  proxy.resetForm("queryRef")[m
[32m+[m[32m  handleQuery()[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å¤šé€‰æ¡†é€‰ä¸­æ•°æ®[m
[32m+[m[32mfunction handleSelectionChange(selection) {[m
[32m+[m[32m  ids.value = selection.map(item => item.addressId)[m
[32m+[m[32m  single.value = selection.length != 1[m
[32m+[m[32m  multiple.value = !selection.length[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** æ–°å¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleAdd() {[m
[32m+[m[32m  reset()[m
[32m+[m[32m  open.value = true[m
[32m+[m[32m  title.value = "æ·»åŠ æ”¶è´§åœ°å€"[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** ä¿®æ”¹æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleUpdate(row) {[m
[32m+[m[32m  reset()[m
[32m+[m[32m  const _addressId = row.addressId || ids.value[m
[32m+[m[32m  getAppAddress(_addressId).then(response => {[m
[32m+[m[32m    form.value = response.data[m
[32m+[m[32m    open.value = true[m
[32m+[m[32m    title.value = "ä¿®æ”¹æ”¶è´§åœ°å€"[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** æäº¤æŒ‰é’® */[m
[32m+[m[32mfunction submitForm() {[m
[32m+[m[32m  proxy.$refs["AppAddressRef"].validate(valid => {[m
[32m+[m[32m    if (valid) {[m
[32m+[m[32m      if (form.value.addressId != null) {[m
[32m+[m[32m        updateAppAddress(form.value).then(response => {[m
[32m+[m[32m          proxy.$modal.msgSuccess("ä¿®æ”¹æˆåŠŸ")[m
[32m+[m[32m          open.value = false[m
[32m+[m[32m          getList()[m
[32m+[m[32m        })[m
[32m+[m[32m      } else {[m
[32m+[m[32m        addAppAddress(form.value).then(response => {[m
[32m+[m[32m          proxy.$modal.msgSuccess("æ–°å¢æˆåŠŸ")[m
[32m+[m[32m          open.value = false[m
[32m+[m[32m          getList()[m
[32m+[m[32m        })[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** åˆ é™¤æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleDelete(row) {[m
[32m+[m[32m  const _addressIds = row.addressId || ids.value[m
[32m+[m[32m  proxy.$modal.confirm('æ˜¯å¦ç¡®è®¤åˆ é™¤æ”¶è´§åœ°å€ç¼–å·ä¸º"' + _addressIds + '"çš„æ•°æ®é¡¹ï¼Ÿ').then(function() {[m
[32m+[m[32m    return delAppAddress(_addressIds)[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    getList()[m
[32m+[m[32m    proxy.$modal.msgSuccess("åˆ é™¤æˆåŠŸ")[m
[32m+[m[32m  }).catch(() => {})[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** å¯¼å‡ºæŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleExport() {[m
[32m+[m[32m  proxy.download('system/AppAddress/export', {[m
[32m+[m[32m    ...queryParams.value[m
[32m+[m[32m  }, `AppAddress_${new Date().getTime()}.xlsx`)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mgetList()[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/system/ShopOrder/index.vue b/src/views/system/ShopOrder/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..53a93ad5[m
[1m--- /dev/null[m
[1m+++ b/src/views/system/ShopOrder/index.vue[m
[36m@@ -0,0 +1,217 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="app-container">[m
[32m+[m[32m    <el-form :model="queryParams" ref="queryRef" :inline="true" v-show="showSearch" label-width="68px">[m
[32m+[m[32m      <el-form-item label="è®¢å•ç¼–å·" prop="orderNo">[m
[32m+[m[32m        <el-input[m
[32m+[m[32m          v-model="queryParams.orderNo"[m
[32m+[m[32m          placeholder="è¯·è¾“å…¥è®¢å•ç¼–å·"[m
[32m+[m[32m          clearable[m
[32m+[m[32m          @keyup.enter="handleQuery"[m
[32m+[m[32m        />[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item label="çŠ¶æ€" prop="status">[m
[32m+[m[32m        <el-select v-model="queryParams.status" placeholder="è¯·é€‰æ‹©çŠ¶æ€" clearable>[m
[32m+[m[32m          <el-option label="å¾…æ”¯ä»˜" value="0" />[m
[32m+[m[32m          <el-option label="å¾…å‘è´§" value="1" />[m
[32m+[m[32m          <el-option label="å·²å‘è´§/ç§Ÿèµä¸­" value="2" />[m
[32m+[m[32m          <el-option label="å·²å®Œæˆ" value="3" />[m
[32m+[m[32m          <el-option label="å½’è¿˜ä¸­" value="4" />[m
[32m+[m[32m        </el-select>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item>[m
[32m+[m[32m        <el-button type="primary" icon="Search" @click="handleQuery">æœç´¢</el-button>[m
[32m+[m[32m        <el-button icon="Refresh" @click="resetQuery">é‡ç½®</el-button>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m    </el-form>[m
[32m+[m
[32m+[m[32m    <el-row :gutter="10" class="mb8">[m
[32m+[m[32m      <el-col :span="1.5">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="warning"[m
[32m+[m[32m          plain[m
[32m+[m[32m          icon="Download"[m
[32m+[m[32m          @click="handleExport"[m
[32m+[m[32m          v-hasPermi="['system:order:export']"[m
[32m+[m[32m        >å¯¼å‡º</el-button>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <right-toolbar v-model:showSearch="showSearch" @queryTable="getList"></right-toolbar>[m
[32m+[m[32m    </el-row>[m
[32m+[m
[32m+[m[32m    <el-table v-loading="loading" :data="shopOrderList" @selection-change="handleSelectionChange">[m
[32m+[m[32m      <el-table-column type="selection" width="55" align="center" />[m
[32m+[m[32m      <el-table-column label="è®¢å•ç¼–å·" align="center" prop="orderNo" width="180" />[m
[32m+[m[32m      <el-table-column label="æ€»é‡‘é¢" align="center" prop="totalAmount" />[m
[32m+[m[32m      <el-table-column label="çŠ¶æ€" align="center" prop="status">[m
[32m+[m[32m        <template #default="scope">[m
[32m+[m[32m           <el-tag :type="statusType(scope.row.status)">{{ statusText(scope.row.status) }}</el-tag>[m
[32m+[m[32m        </template>[m
[32m+[m[32m      </el-table-column>[m
[32m+[m[32m      <el-table-column label="æ”¶è´§äºº" align="center" prop="receiverName" />[m
[32m+[m[32m      <el-table-column label="ç”µè¯" align="center" prop="receiverPhone" />[m
[32m+[m[32m      <el-table-column label="ä¸‹å•æ—¶é—´" align="center" prop="createTime" width="180">[m
[32m+[m[32m        <template #default="scope">[m
[32m+[m[32m          <span>{{ parseTime(scope.row.createTime) }}</span>[m
[32m+[m[32m        </template>[m
[32m+[m[32m      </el-table-column>[m
[32m+[m[32m      <el-table-column label="æ“ä½œ" align="center" class-name="small-padding fixed-width">[m
[32m+[m[32m        <template #default="scope">[m
[32m+[m[32m          <el-button link type="primary" icon="Search" @click="handleDetail(scope.row)">è¯¦æƒ…</el-button>[m
[32m+[m[41m          [m
[32m+[m[32m          <!-- å‘è´§æŒ‰é’®ï¼šä»…çŠ¶æ€1æ˜¾ç¤º (ç§»é™¤äº† v-hasPermi) -->[m
[32m+[m[32m          <el-button[m[41m [m
[32m+[m[32m            v-if="scope.row.status === '1'"[m
[32m+[m[32m            link[m[41m [m
[32m+[m[32m            type="success"[m[41m [m
[32m+[m[32m            icon="Van"[m[41m [m
[32m+[m[32m            @click="handleShip(scope.row)"[m
[32m+[m[32m          >å‘è´§</el-button>[m
[32m+[m
[32m+[m[32m          <!-- ç¡®è®¤æ”¶è´§æŒ‰é’®ï¼šä»…çŠ¶æ€4ï¼ˆå½’è¿˜ä¸­ï¼‰æ˜¾ç¤º (ç§»é™¤äº† v-hasPermi) -->[m
[32m+[m[32m          <el-button[m[41m [m
[32m+[m[32m            v-if="scope.row.status === '4'"[m
[32m+[m[32m            link[m[41m [m
[32m+[m[32m            type="warning"[m[41m [m
[32m+[m[32m            icon="Checked"[m[41m [m
[32m+[m[32m            @click="handleConfirmReturn(scope.row)"[m
[32m+[m[32m          >ç¡®è®¤æ”¶è´§</el-button>[m
[32m+[m
[32m+[m[32m        </template>[m
[32m+[m[32m      </el-table-column>[m
[32m+[m[32m    </el-table>[m
[32m+[m[41m    [m
[32m+[m[32m    <pagination[m
[32m+[m[32m      v-show="total>0"[m
[32m+[m[32m      :total="total"[m
[32m+[m[32m      v-model:page="queryParams.pageNum"[m
[32m+[m[32m      v-model:limit="queryParams.pageSize"[m
[32m+[m[32m      @pagination="getList"[m
[32m+[m[32m    />[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup name="ShopOrder">[m
[32m+[m[32mimport { listShopOrder, getShopOrder, delShopOrder, addShopOrder, updateShopOrder } from "@/api/system/ShopOrder";[m
[32m+[m[32mimport request from '@/utils/request';[m
[32m+[m[32mimport { ElMessage, ElMessageBox } from 'element-plus';[m
[32m+[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m
[32m+[m[32mconst shopOrderList = ref([]);[m
[32m+[m[32mconst open = ref(false);[m
[32m+[m[32mconst loading = ref(true);[m
[32m+[m[32mconst showSearch = ref(true);[m
[32m+[m[32mconst ids = ref([]);[m
[32m+[m[32mconst single = ref(true);[m
[32m+[m[32mconst multiple = ref(true);[m
[32m+[m[32mconst total = ref(0);[m
[32m+[m[32mconst title = ref("");[m
[32m+[m
[32m+[m[32mconst data = reactive({[m
[32m+[m[32m  form: {},[m
[32m+[m[32m  queryParams: {[m
[32m+[m[32m    pageNum: 1,[m
[32m+[m[32m    pageSize: 10,[m
[32m+[m[32m    orderNo: null,[m
[32m+[m[32m    userId: null,[m
[32m+[m[32m    status: null,[m
[32m+[m[32m    receiverName: null,[m
[32m+[m[32m    receiverPhone: null,[m
[32m+[m[32m    deptId: null[m
[32m+[m[32m  },[m
[32m+[m[32m  rules: {[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst { queryParams, form, rules } = toRefs(data);[m
[32m+[m
[32m+[m[32mfunction statusText(status) {[m
[32m+[m[32m  const map = {'0':'å¾…æ”¯ä»˜', '1':'å¾…å‘è´§', '2':'è¿›è¡Œä¸­', '3':'å·²å®Œæˆ', '4':'å½’è¿˜ä¸­'};[m
[32m+[m[32m  return map[status] || status;[m
[32m+[m[32m}[m
[32m+[m[32mfunction statusType(status) {[m
[32m+[m[32m  const map = {'0':'danger', '1':'warning', '2':'primary', '3':'success', '4':'info'};[m
[32m+[m[32m  return map[status] || '';[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** æŸ¥è¯¢åˆ—è¡¨ - è®°å¾—åç«¯æ¥å£è·¯å¾„å·²æ”¹ä¸º /merchant/order/listï¼Œéœ€ç¡®è®¤ api.js */[m
[32m+[m[32mfunction getList() {[m
[32m+[m[32m  loading.value = true;[m
[32m+[m[32m  // ä¸´æ—¶ç›´æ¥è°ƒç”¨ï¼Œé˜²æ­¢ api.js æœªæ›´æ–°[m
[32m+[m[32m  request({[m
[32m+[m[32m    url: '/merchant/order/list',[m
[32m+[m[32m    method: 'get',[m
[32m+[m[32m    params: queryParams.value[m
[32m+[m[32m  }).then(response => {[m
[32m+[m[32m    shopOrderList.value = response.rows;[m
[32m+[m[32m    total.value = response.total;[m
[32m+[m[32m    loading.value = false;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** æœç´¢ */[m
[32m+[m[32mfunction handleQuery() {[m
[32m+[m[32m  queryParams.value.pageNum = 1;[m
[32m+[m[32m  getList();[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** é‡ç½® */[m
[32m+[m[32mfunction resetQuery() {[m
[32m+[m[32m  proxy.resetForm("queryRef");[m
[32m+[m[32m  handleQuery();[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** é€‰ä¸­ */[m
[32m+[m[32mfunction handleSelectionChange(selection) {[m
[32m+[m[32m  ids.value = selection.map(item => item.orderId);[m
[32m+[m[32m  single.value = selection.length != 1;[m
[32m+[m[32m  multiple.value = !selection.length;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** è¯¦æƒ… */[m
[32m+[m[32mfunction handleDetail(row) {[m
[32m+[m[32m  proxy.$alert("åŠŸèƒ½å¼€å‘ä¸­ï¼Œè®¢å•IDï¼š" + row.orderId);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** å‘è´§æ“ä½œ */[m
[32m+[m[32mfunction handleShip(row) {[m
[32m+[m[32m  ElMessageBox.confirm('ç¡®è®¤è¦ä¸ºè®¢å• "' + row.orderNo + '" æ‰§è¡Œå‘è´§æ“ä½œå—ï¼Ÿ', "ç³»ç»Ÿæç¤º", {[m
[32m+[m[32m    confirmButtonText: "ç¡®å®š",[m
[32m+[m[32m    cancelButtonText: "å–æ¶ˆ",[m
[32m+[m[32m    type: "warning"[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    return request({[m
[32m+[m[32m        url: `/merchant/order/ship/${row.orderId}`,[m
[32m+[m[32m        method: 'put'[m
[32m+[m[32m    });[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    getList();[m
[32m+[m[32m    ElMessage.success("å‘è´§æˆåŠŸ");[m
[32m+[m[32m  }).catch(() => {});[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** ç¡®è®¤å½’è¿˜ */[m
[32m+[m[32mfunction handleConfirmReturn(row) {[m
[32m+[m[32m  ElMessageBox.confirm('ç¡®è®¤æ”¶åˆ°è¯¥è®¢å•çš„å½’è¿˜ç‰©å“å—ï¼Ÿ', "ç³»ç»Ÿæç¤º", {[m
[32m+[m[32m    confirmButtonText: "ç¡®å®š",[m
[32m+[m[32m    cancelButtonText: "å–æ¶ˆ",[m
[32m+[m[32m    type: "warning"[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    return request({[m
[32m+[m[32m        url: `/merchant/order/confirmReturn/${row.orderId}`,[m
[32m+[m[32m        method: 'put'[m
[32m+[m[32m    });[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    getList();[m
[32m+[m[32m    ElMessage.success("ç¡®è®¤æ”¶è´§æˆåŠŸ");[m
[32m+[m[32m  }).catch(() => {});[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** å¯¼å‡º */[m
[32m+[m[32mfunction handleExport() {[m
[32m+[m[32m  proxy.download('merchant/order/export', {[m
[32m+[m[32m    ...queryParams.value[m
[32m+[m[32m  }, `shop_order_${new Date().getTime()}.xlsx`)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mgetList();[m
[32m+[m[32m</script>[m
\ No newline at end of file[m
[1mdiff --git a/src/views/system/config/index.vue b/src/views/system/config/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..34fd53da[m
[1m--- /dev/null[m
[1m+++ b/src/views/system/config/index.vue[m
[36m@@ -0,0 +1,305 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m   <div class="app-container">[m
[32m+[m[32m      <el-form :model="queryParams" ref="queryRef" :inline="true" v-show="showSearch" label-width="68px">[m
[32m+[m[32m         <el-form-item label="å‚æ•°åç§°" prop="configName">[m
[32m+[m[32m            <el-input[m
[32m+[m[32m               v-model="queryParams.configName"[m
[32m+[m[32m               placeholder="è¯·è¾“å…¥å‚æ•°åç§°"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 240px"[m
[32m+[m[32m               @keyup.enter="handleQuery"[m
[32m+[m[32m            />[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="å‚æ•°é”®å" prop="configKey">[m
[32m+[m[32m            <el-input[m
[32m+[m[32m               v-model="queryParams.configKey"[m
[32m+[m[32m               placeholder="è¯·è¾“å…¥å‚æ•°é”®å"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 240px"[m
[32m+[m[32m               @keyup.enter="handleQuery"[m
[32m+[m[32m            />[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="ç³»ç»Ÿå†…ç½®" prop="configType">[m
[32m+[m[32m            <el-select v-model="queryParams.configType" placeholder="ç³»ç»Ÿå†…ç½®" clearable>[m
[32m+[m[32m               <el-option[m
[32m+[m[32m                  v-for="dict in sys_yes_no"[m
[32m+[m[32m                  :key="dict.value"[m
[32m+[m[32m                  :label="dict.label"[m
[32m+[m[32m                  :value="dict.value"[m
[32m+[m[32m               />[m
[32m+[m[32m            </el-select>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="åˆ›å»ºæ—¶é—´" style="width: 308px;">[m
[32m+[m[32m            <el-date-picker[m
[32m+[m[32m               v-model="dateRange"[m
[32m+[m[32m               value-format="YYYY-MM-DD"[m
[32m+[m[32m               type="daterange"[m
[32m+[m[32m               range-separator="-"[m
[32m+[m[32m               start-placeholder="å¼€å§‹æ—¥æœŸ"[m
[32m+[m[32m               end-placeholder="ç»“æŸæ—¥æœŸ"[m
[32m+[m[32m            ></el-date-picker>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item>[m
[32m+[m[32m            <el-button type="primary" icon="Search" @click="handleQuery">æœç´¢</el-button>[m
[32m+[m[32m            <el-button icon="Refresh" @click="resetQuery">é‡ç½®</el-button>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m      </el-form>[m
[32m+[m
[32m+[m[32m      <el-row :gutter="10" class="mb8">[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="primary"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Plus"[m
[32m+[m[32m               @click="handleAdd"[m
[32m+[m[32m               v-hasPermi="['system:config:add']"[m
[32m+[m[32m            >æ–°å¢</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="success"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Edit"[m
[32m+[m[32m               :disabled="single"[m
[32m+[m[32m               @click="handleUpdate"[m
[32m+[m[32m               v-hasPermi="['system:config:edit']"[m
[32m+[m[32m            >ä¿®æ”¹</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="danger"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Delete"[m
[32m+[m[32m               :disabled="multiple"[m
[32m+[m[32m               @click="handleDelete"[m
[32m+[m[32m               v-hasPermi="['system:config:remove']"[m
[32m+[m[32m            >åˆ é™¤</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="warning"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Download"[m
[32m+[m[32m               @click="handleExport"[m
[32m+[m[32m               v-hasPermi="['system:config:export']"[m
[32m+[m[32m            >å¯¼å‡º</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="danger"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Refresh"[m
[32m+[m[32m               @click="handleRefreshCache"[m
[32m+[m[32m               v-hasPermi="['system:config:remove']"[m
[32m+[m[32m            >åˆ·æ–°ç¼“å­˜</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <right-toolbar v-model:showSearch="showSearch" @queryTable="getList"></right-toolbar>[m
[32m+[m[32m      </el-row>[m
[32m+[m
[32m+[m[32m      <el-table v-loading="loading" :data="configList" @selection-change="handleSelectionChange">[m
[32m+[m[32m         <el-table-column type="selection" width="55" align="center" />[m
[32m+[m[32m         <el-table-column label="å‚æ•°ä¸»é”®" align="center" prop="configId" />[m
[32m+[m[32m         <el-table-column label="å‚æ•°åç§°" align="center" prop="configName" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="å‚æ•°é”®å" align="center" prop="configKey" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="å‚æ•°é”®å€¼" align="center" prop="configValue" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="ç³»ç»Ÿå†…ç½®" align="center" prop="configType">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <dict-tag :options="sys_yes_no" :value="scope.row.configType" />[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="å¤‡æ³¨" align="center" prop="remark" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="åˆ›å»ºæ—¶é—´" align="center" prop="createTime" width="180">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <span>{{ parseTime(scope.row.createTime) }}</span>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="æ“ä½œ" align="center" width="150" class-name="small-padding fixed-width">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <el-button link type="primary" icon="Edit" @click="handleUpdate(scope.row)" v-hasPermi="['system:config:edit']" >ä¿®æ”¹</el-button>[m
[32m+[m[32m               <el-button link type="primary" icon="Delete" @click="handleDelete(scope.row)" v-hasPermi="['system:config:remove']">åˆ é™¤</el-button>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m      </el-table>[m
[32m+[m
[32m+[m[32m      <pagination[m
[32m+[m[32m         v-show="total > 0"[m
[32m+[m[32m         :total="total"[m
[32m+[m[32m         v-model:page="queryParams.pageNum"[m
[32m+[m[32m         v-model:limit="queryParams.pageSize"[m
[32m+[m[32m         @pagination="getList"[m
[32m+[m[32m      />[m
[32m+[m
[32m+[m[32m      <!-- æ·»åŠ æˆ–ä¿®æ”¹å‚æ•°é…ç½®å¯¹è¯æ¡† -->[m
[32m+[m[32m      <el-dialog :title="title" v-model="open" width="500px" append-to-body>[m
[32m+[m[32m         <el-form ref="configRef" :model="form" :rules="rules" label-width="80px">[m
[32m+[m[32m            <el-form-item label="å‚æ•°åç§°" prop="configName">[m
[32m+[m[32m               <el-input v-model="form.configName" placeholder="è¯·è¾“å…¥å‚æ•°åç§°" />[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m            <el-form-item label="å‚æ•°é”®å" prop="configKey">[m
[32m+[m[32m               <el-input v-model="form.configKey" placeholder="è¯·è¾“å…¥å‚æ•°é”®å" />[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m            <el-form-item label="å‚æ•°é”®å€¼" prop="configValue">[m
[32m+[m[32m               <el-input v-model="form.configValue" placeholder="è¯·è¾“å…¥å‚æ•°é”®å€¼" />[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m            <el-form-item label="ç³»ç»Ÿå†…ç½®" prop="configType">[m
[32m+[m[32m               <el-radio-group v-model="form.configType">[m
[32m+[m[32m                  <el-radio[m
[32m+[m[32m                     v-for="dict in sys_yes_no"[m
[32m+[m[32m                     :key="dict.value"[m
[32m+[m[32m                     :label="dict.value"[m
[32m+[m[32m                  >{{ dict.label }}</el-radio>[m
[32m+[m[32m               </el-radio-group>[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m            <el-form-item label="å¤‡æ³¨" prop="remark">[m
[32m+[m[32m               <el-input v-model="form.remark" type="textarea" placeholder="è¯·è¾“å…¥å†…å®¹" />[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m         </el-form>[m
[32m+[m[32m         <template #footer>[m
[32m+[m[32m            <div class="dialog-footer">[m
[32m+[m[32m               <el-button type="primary" @click="submitForm">ç¡® å®š</el-button>[m
[32m+[m[32m               <el-button @click="cancel">å– æ¶ˆ</el-button>[m
[32m+[m[32m            </div>[m
[32m+[m[32m         </template>[m
[32m+[m[32m      </el-dialog>[m
[32m+[m[32m   </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup name="Config">[m
[32m+[m[32mimport { listConfig, getConfig, delConfig, addConfig, updateConfig, refreshCache } from "@/api/system/config";[m
[32m+[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m[32mconst { sys_yes_no } = proxy.useDict("sys_yes_no");[m
[32m+[m
[32m+[m[32mconst configList = ref([]);[m
[32m+[m[32mconst open = ref(false);[m
[32m+[m[32mconst loading = ref(true);[m
[32m+[m[32mconst showSearch = ref(true);[m
[32m+[m[32mconst ids = ref([]);[m
[32m+[m[32mconst single = ref(true);[m
[32m+[m[32mconst multiple = ref(true);[m
[32m+[m[32mconst total = ref(0);[m
[32m+[m[32mconst title = ref("");[m
[32m+[m[32mconst dateRange = ref([]);[m
[32m+[m
[32m+[m[32mconst data = reactive({[m
[32m+[m[32m  form: {},[m
[32m+[m[32m  queryParams: {[m
[32m+[m[32m    pageNum: 1,[m
[32m+[m[32m    pageSize: 10,[m
[32m+[m[32m    configName: undefined,[m
[32m+[m[32m    configKey: undefined,[m
[32m+[m[32m    configType: undefined[m
[32m+[m[32m  },[m
[32m+[m[32m  rules: {[m
[32m+[m[32m    configName: [{ required: true, message: "å‚æ•°åç§°ä¸èƒ½ä¸ºç©º", trigger: "blur" }],[m
[32m+[m[32m    configKey: [{ required: true, message: "å‚æ•°é”®åä¸èƒ½ä¸ºç©º", trigger: "blur" }],[m
[32m+[m[32m    configValue: [{ required: true, message: "å‚æ•°é”®å€¼ä¸èƒ½ä¸ºç©º", trigger: "blur" }][m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst { queryParams, form, rules } = toRefs(data);[m
[32m+[m
[32m+[m[32m/** æŸ¥è¯¢å‚æ•°åˆ—è¡¨ */[m
[32m+[m[32mfunction getList() {[m
[32m+[m[32m  loading.value = true;[m
[32m+[m[32m  listConfig(proxy.addDateRange(queryParams.value, dateRange.value)).then(response => {[m
[32m+[m[32m    configList.value = response.rows;[m
[32m+[m[32m    total.value = response.total;[m
[32m+[m[32m    loading.value = false;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** å–æ¶ˆæŒ‰é’® */[m
[32m+[m[32mfunction cancel() {[m
[32m+[m[32m  open.value = false;[m
[32m+[m[32m  reset();[m
[32m+[m[32m}[m
[32m+[m[32m/** è¡¨å•é‡ç½® */[m
[32m+[m[32mfunction reset() {[m
[32m+[m[32m  form.value = {[m
[32m+[m[32m    configId: undefined,[m
[32m+[m[32m    configName: undefined,[m
[32m+[m[32m    configKey: undefined,[m
[32m+[m[32m    configValue: undefined,[m
[32m+[m[32m    configType: "Y",[m
[32m+[m[32m    remark: undefined[m
[32m+[m[32m  };[m
[32m+[m[32m  proxy.resetForm("configRef");[m
[32m+[m[32m}[m
[32m+[m[32m/** æœç´¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleQuery() {[m
[32m+[m[32m  queryParams.value.pageNum = 1;[m
[32m+[m[32m  getList();[m
[32m+[m[32m}[m
[32m+[m[32m/** é‡ç½®æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction resetQuery() {[m
[32m+[m[32m  dateRange.value = [];[m
[32m+[m[32m  proxy.resetForm("queryRef");[m
[32m+[m[32m  handleQuery();[m
[32m+[m[32m}[m
[32m+[m[32m/** å¤šé€‰æ¡†é€‰ä¸­æ•°æ® */[m
[32m+[m[32mfunction handleSelectionChange(selection) {[m
[32m+[m[32m  ids.value = selection.map(item => item.configId);[m
[32m+[m[32m  single.value = selection.length != 1;[m
[32m+[m[32m  multiple.value = !selection.length;[m
[32m+[m[32m}[m
[32m+[m[32m/** æ–°å¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleAdd() {[m
[32m+[m[32m  reset();[m
[32m+[m[32m  open.value = true;[m
[32m+[m[32m  title.value = "æ·»åŠ å‚æ•°";[m
[32m+[m[32m}[m
[32m+[m[32m/** ä¿®æ”¹æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleUpdate(row) {[m
[32m+[m[32m  reset();[m
[32m+[m[32m  const configId = row.configId || ids.value;[m
[32m+[m[32m  getConfig(configId).then(response => {[m
[32m+[m[32m    form.value = response.data;[m
[32m+[m[32m    open.value = true;[m
[32m+[m[32m    title.value = "ä¿®æ”¹å‚æ•°";[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** æäº¤æŒ‰é’® */[m
[32m+[m[32mfunction submitForm() {[m
[32m+[m[32m  proxy.$refs["configRef"].validate(valid => {[m
[32m+[m[32m    if (valid) {[m
[32m+[m[32m      if (form.value.configId != undefined) {[m
[32m+[m[32m        updateConfig(form.value).then(response => {[m
[32m+[m[32m          proxy.$modal.msgSuccess("ä¿®æ”¹æˆåŠŸ");[m
[32m+[m[32m          open.value = false;[m
[32m+[m[32m          getList();[m
[32m+[m[32m        });[m
[32m+[m[32m      } else {[m
[32m+[m[32m        addConfig(form.value).then(response => {[m
[32m+[m[32m          proxy.$modal.msgSuccess("æ–°å¢æˆåŠŸ");[m
[32m+[m[32m          open.value = false;[m
[32m+[m[32m          getList();[m
[32m+[m[32m        });[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** åˆ é™¤æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleDelete(row) {[m
[32m+[m[32m  const configIds = row.configId || ids.value;[m
[32m+[m[32m  proxy.$modal.confirm('æ˜¯å¦ç¡®è®¤åˆ é™¤å‚æ•°ç¼–å·ä¸º"' + configIds + '"çš„æ•°æ®é¡¹ï¼Ÿ').then(function () {[m
[32m+[m[32m    return delConfig(configIds);[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    getList();[m
[32m+[m[32m    proxy.$modal.msgSuccess("åˆ é™¤æˆåŠŸ");[m
[32m+[m[32m  }).catch(() => {});[m
[32m+[m[32m}[m
[32m+[m[32m/** å¯¼å‡ºæŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleExport() {[m
[32m+[m[32m  proxy.download("system/config/export", {[m
[32m+[m[32m    ...queryParams.value[m
[32m+[m[32m  }, `config_${new Date().getTime()}.xlsx`);[m
[32m+[m[32m}[m
[32m+[m[32m/** åˆ·æ–°ç¼“å­˜æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleRefreshCache() {[m
[32m+[m[32m  refreshCache().then(() => {[m
[32m+[m[32m    proxy.$modal.msgSuccess("åˆ·æ–°ç¼“å­˜æˆåŠŸ");[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mgetList();[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/system/cpu/index.vue b/src/views/system/cpu/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..9080b676[m
[1m--- /dev/null[m
[1m+++ b/src/views/system/cpu/index.vue[m
[36m@@ -0,0 +1,317 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="app-container">[m
[32m+[m[32m    <el-form :model="queryParams" ref="queryRef" :inline="true" v-show="showSearch" label-width="68px">[m
[32m+[m[32m      <el-form-item label="å“ç‰Œ" prop="brand">[m
[32m+[m[32m        <el-select v-model="queryParams.brand" placeholder="è¯·é€‰æ‹©å“ç‰Œ" clearable>[m
[32m+[m[32m          <el-option[m
[32m+[m[32m            v-for="dict in cpu_brand"[m
[32m+[m[32m            :key="dict.value"[m
[32m+[m[32m            :label="dict.label"[m
[32m+[m[32m            :value="dict.value"[m
[32m+[m[32m          />[m
[32m+[m[32m        </el-select>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item label="å‹å·" prop="model">[m
[32m+[m[32m        <el-input[m
[32m+[m[32m          v-model="queryParams.model"[m
[32m+[m[32m          placeholder="è¯·è¾“å…¥å‹å·"[m
[32m+[m[32m          clearable[m
[32m+[m[32m          @keyup.enter="handleQuery"[m
[32m+[m[32m        />[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item label="æ¥å£" prop="socketType">[m
[32m+[m[32m        <el-select v-model="queryParams.socketType" placeholder="è¯·é€‰æ‹©æ¥å£" clearable>[m
[32m+[m[32m          <el-option[m
[32m+[m[32m            v-for="dict in cpu_socket_type"[m
[32m+[m[32m            :key="dict.value"[m
[32m+[m[32m            :label="dict.label"[m
[32m+[m[32m            :value="dict.value"[m
[32m+[m[32m          />[m
[32m+[m[32m        </el-select>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item>[m
[32m+[m[32m        <el-button type="primary" icon="Search" @click="handleQuery">æœç´¢</el-button>[m
[32m+[m[32m        <el-button icon="Refresh" @click="resetQuery">é‡ç½®</el-button>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m    </el-form>[m
[32m+[m
[32m+[m[32m    <el-row :gutter="10" class="mb8">[m
[32m+[m[32m      <el-col :span="1.5">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="primary"[m
[32m+[m[32m          plain[m
[32m+[m[32m          icon="Plus"[m
[32m+[m[32m          @click="handleAdd"[m
[32m+[m[32m          v-hasPermi="['system:cpu:add']"[m
[32m+[m[32m        >æ–°å¢</el-button>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <el-col :span="1.5">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="success"[m
[32m+[m[32m          plain[m
[32m+[m[32m          icon="Edit"[m
[32m+[m[32m          :disabled="single"[m
[32m+[m[32m          @click="handleUpdate"[m
[32m+[m[32m          v-hasPermi="['system:cpu:edit']"[m
[32m+[m[32m        >ä¿®æ”¹</el-button>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <el-col :span="1.5">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="danger"[m
[32m+[m[32m          plain[m
[32m+[m[32m          icon="Delete"[m
[32m+[m[32m          :disabled="multiple"[m
[32m+[m[32m          @click="handleDelete"[m
[32m+[m[32m          v-hasPermi="['system:cpu:remove']"[m
[32m+[m[32m        >åˆ é™¤</el-button>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <el-col :span="1.5">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="warning"[m
[32m+[m[32m          plain[m
[32m+[m[32m          icon="Download"[m
[32m+[m[32m          @click="handleExport"[m
[32m+[m[32m          v-hasPermi="['system:cpu:export']"[m
[32m+[m[32m        >å¯¼å‡º</el-button>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <right-toolbar v-model:showSearch="showSearch" @queryTable="getList"></right-toolbar>[m
[32m+[m[32m    </el-row>[m
[32m+[m
[32m+[m[32m    <el-table v-loading="loading" :data="cpuList" @selection-change="handleSelectionChange">[m
[32m+[m[32m      <el-table-column type="selection" width="55" align="center" />[m
[32m+[m[32m      <el-table-column label="${comment}" align="center" prop="id" />[m
[32m+[m[32m      <el-table-column label="å“ç‰Œ" align="center" prop="brand">[m
[32m+[m[32m        <template #default="scope">[m
[32m+[m[32m          <dict-tag :options="cpu_brand" :value="scope.row.brand"/>[m
[32m+[m[32m        </template>[m
[32m+[m[32m      </el-table-column>[m
[32m+[m[32m      <el-table-column label="å‹å·" align="center" prop="model" />[m
[32m+[m[32m      <el-table-column label="æ¥å£" align="center" prop="socketType">[m
[32m+[m[32m        <template #default="scope">[m
[32m+[m[32m          <dict-tag :options="cpu_socket_type" :value="scope.row.socketType"/>[m
[32m+[m[32m        </template>[m
[32m+[m[32m      </el-table-column>[m
[32m+[m[32m      <el-table-column label="å•æ ¸æ€§èƒ½åˆ†" align="center" prop="singleCoreScore" />[m
[32m+[m[32m      <el-table-column label="å¤šæ ¸æ€§èƒ½åˆ†" align="center" prop="multiCoreScore" />[m
[32m+[m[32m      <el-table-column label="åŠŸè€—(W)" align="center" prop="tdp" />[m
[32m+[m[32m      <el-table-column label="æ“ä½œ" align="center" class-name="small-padding fixed-width">[m
[32m+[m[32m        <template #default="scope">[m
[32m+[m[32m          <el-button link type="primary" icon="Edit" @click="handleUpdate(scope.row)" v-hasPermi="['system:cpu:edit']">ä¿®æ”¹</el-button>[m
[32m+[m[32m          <el-button link type="primary" icon="Delete" @click="handleDelete(scope.row)" v-hasPermi="['system:cpu:remove']">åˆ é™¤</el-button>[m
[32m+[m[32m        </template>[m
[32m+[m[32m      </el-table-column>[m
[32m+[m[32m    </el-table>[m
[32m+[m[41m    [m
[32m+[m[32m    <pagination[m
[32m+[m[32m      v-show="total>0"[m
[32m+[m[32m      :total="total"[m
[32m+[m[32m      v-model:page="queryParams.pageNum"[m
[32m+[m[32m      v-model:limit="queryParams.pageSize"[m
[32m+[m[32m      @pagination="getList"[m
[32m+[m[32m    />[m
[32m+[m
[32m+[m[32m    <!-- æ·»åŠ æˆ–ä¿®æ”¹CPUç¡¬ä»¶å¯¹è¯æ¡† -->[m
[32m+[m[32m    <el-dialog :title="title" v-model="open" width="500px" append-to-body>[m
[32m+[m[32m      <el-form ref="cpuRef" :model="form" :rules="rules" label-width="80px">[m
[32m+[m[32m        <el-form-item label="å“ç‰Œ" prop="brand">[m
[32m+[m[32m          <el-select v-model="form.brand" placeholder="è¯·é€‰æ‹©å“ç‰Œ">[m
[32m+[m[32m            <el-option[m
[32m+[m[32m              v-for="dict in cpu_brand"[m
[32m+[m[32m              :key="dict.value"[m
[32m+[m[32m              :label="dict.label"[m
[32m+[m[32m              :value="dict.value"[m
[32m+[m[32m            ></el-option>[m
[32m+[m[32m          </el-select>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="å‹å·" prop="model">[m
[32m+[m[32m          <el-input v-model="form.model" placeholder="è¯·è¾“å…¥å‹å·" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="æ¥å£" prop="socketType">[m
[32m+[m[32m          <el-select v-model="form.socketType" placeholder="è¯·é€‰æ‹©æ¥å£">[m
[32m+[m[32m            <el-option[m
[32m+[m[32m              v-for="dict in cpu_socket_type"[m
[32m+[m[32m              :key="dict.value"[m
[32m+[m[32m              :label="dict.label"[m
[32m+[m[32m              :value="dict.value"[m
[32m+[m[32m            ></el-option>[m
[32m+[m[32m          </el-select>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="å•æ ¸æ€§èƒ½åˆ†" prop="singleCoreScore">[m
[32m+[m[32m          <el-input v-model="form.singleCoreScore" placeholder="è¯·è¾“å…¥å•æ ¸æ€§èƒ½åˆ†" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="å¤šæ ¸æ€§èƒ½åˆ†" prop="multiCoreScore">[m
[32m+[m[32m          <el-input v-model="form.multiCoreScore" placeholder="è¯·è¾“å…¥å¤šæ ¸æ€§èƒ½åˆ†" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="åŠŸè€—(W)" prop="tdp">[m
[32m+[m[32m          <el-input v-model="form.tdp" placeholder="è¯·è¾“å…¥åŠŸè€—(W)" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m      </el-form>[m
[32m+[m[32m      <template #footer>[m
[32m+[m[32m        <div class="dialog-footer">[m
[32m+[m[32m          <el-button type="primary" @click="submitForm">ç¡® å®š</el-button>[m
[32m+[m[32m          <el-button @click="cancel">å– æ¶ˆ</el-button>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </template>[m
[32m+[m[32m    </el-dialog>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup name="Cpu">[m
[32m+[m[32mimport { listCpu, getCpu, delCpu, addCpu, updateCpu } from "@/api/system/cpu"[m
[32m+[m
[32m+[m[32mconst { proxy } = getCurrentInstance()[m
[32m+[m[32mconst { cpu_socket_type, cpu_brand } = proxy.useDict('cpu_socket_type', 'cpu_brand')[m
[32m+[m
[32m+[m[32mconst cpuList = ref([])[m
[32m+[m[32mconst open = ref(false)[m
[32m+[m[32mconst loading = ref(true)[m
[32m+[m[32mconst showSearch = ref(true)[m
[32m+[m[32mconst ids = ref([])[m
[32m+[m[32mconst single = ref(true)[m
[32m+[m[32mconst multiple = ref(true)[m
[32m+[m[32mconst total = ref(0)[m
[32m+[m[32mconst title = ref("")[m
[32m+[m
[32m+[m[32mconst data = reactive({[m
[32m+[m[32m  form: {},[m
[32m+[m[32m  queryParams: {[m
[32m+[m[32m    pageNum: 1,[m
[32m+[m[32m    pageSize: 10,[m
[32m+[m[32m    brand: null,[m
[32m+[m[32m    model: null,[m
[32m+[m[32m    socketType: null,[m
[32m+[m[32m  },[m
[32m+[m[32m  rules: {[m
[32m+[m[32m    brand: [[m
[32m+[m[32m      { required: true, message: "å“ç‰Œä¸èƒ½ä¸ºç©º", trigger: "change" }[m
[32m+[m[32m    ],[m
[32m+[m[32m    model: [[m
[32m+[m[32m      { required: true, message: "å‹å·ä¸èƒ½ä¸ºç©º", trigger: "blur" }[m
[32m+[m[32m    ],[m
[32m+[m[32m    socketType: [[m
[32m+[m[32m      { required: true, message: "æ¥å£ä¸èƒ½ä¸ºç©º", trigger: "change" }[m
[32m+[m[32m    ],[m
[32m+[m[32m    singleCoreScore: [[m
[32m+[m[32m      { required: true, message: "å•æ ¸æ€§èƒ½åˆ†ä¸èƒ½ä¸ºç©º", trigger: "blur" }[m
[32m+[m[32m    ],[m
[32m+[m[32m    multiCoreScore: [[m
[32m+[m[32m      { required: true, message: "å¤šæ ¸æ€§èƒ½åˆ†ä¸èƒ½ä¸ºç©º", trigger: "blur" }[m
[32m+[m[32m    ],[m
[32m+[m[32m    tdp: [[m
[32m+[m[32m      { required: true, message: "åŠŸè€—(W)ä¸èƒ½ä¸ºç©º", trigger: "blur" }[m
[32m+[m[32m    ],[m
[32m+[m[32m  }[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32mconst { queryParams, form, rules } = toRefs(data)[m
[32m+[m
[32m+[m[32m/** æŸ¥è¯¢CPUç¡¬ä»¶åˆ—è¡¨ */[m
[32m+[m[32mfunction getList() {[m
[32m+[m[32m  loading.value = true[m
[32m+[m[32m  listCpu(queryParams.value).then(response => {[m
[32m+[m[32m    cpuList.value = response.rows[m
[32m+[m[32m    total.value = response.total[m
[32m+[m[32m    loading.value = false[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å–æ¶ˆæŒ‰é’®[m
[32m+[m[32mfunction cancel() {[m
[32m+[m[32m  open.value = false[m
[32m+[m[32m  reset()[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// è¡¨å•é‡ç½®[m
[32m+[m[32mfunction reset() {[m
[32m+[m[32m  form.value = {[m
[32m+[m[32m    id: null,[m
[32m+[m[32m    brand: null,[m
[32m+[m[32m    model: null,[m
[32m+[m[32m    socketType: null,[m
[32m+[m[32m    singleCoreScore: null,[m
[32m+[m[32m    multiCoreScore: null,[m
[32m+[m[32m    tdp: null,[m
[32m+[m[32m    createTime: null,[m
[32m+[m[32m    updateTime: null[m
[32m+[m[32m  }[m
[32m+[m[32m  proxy.resetForm("cpuRef")[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** æœç´¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleQuery() {[m
[32m+[m[32m  queryParams.value.pageNum = 1[m
[32m+[m[32m  getList()[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** é‡ç½®æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction resetQuery() {[m
[32m+[m[32m  proxy.resetForm("queryRef")[m
[32m+[m[32m  handleQuery()[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å¤šé€‰æ¡†é€‰ä¸­æ•°æ®[m
[32m+[m[32mfunction handleSelectionChange(selection) {[m
[32m+[m[32m  ids.value = selection.map(item => item.id)[m
[32m+[m[32m  single.value = selection.length != 1[m
[32m+[m[32m  multiple.value = !selection.length[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** æ–°å¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleAdd() {[m
[32m+[m[32m  reset()[m
[32m+[m[32m  open.value = true[m
[32m+[m[32m  title.value = "æ·»åŠ CPUç¡¬ä»¶"[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** ä¿®æ”¹æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleUpdate(row) {[m
[32m+[m[32m  reset()[m
[32m+[m[32m  const _id = row.id || ids.value[m
[32m+[m[32m  getCpu(_id).then(response => {[m
[32m+[m[32m    form.value = response.data[m
[32m+[m[32m    open.value = true[m
[32m+[m[32m    title.value = "ä¿®æ”¹CPUç¡¬ä»¶"[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** æäº¤æŒ‰é’® */[m
[32m+[m[32mfunction submitForm() {[m
[32m+[m[32m  proxy.$refs["cpuRef"].validate(valid => {[m
[32m+[m[32m    if (valid) {[m
[32m+[m[32m      if (form.value.id != null) {[m
[32m+[m[32m        updateCpu(form.value).then(response => {[m
[32m+[m[32m          proxy.$modal.msgSuccess("ä¿®æ”¹æˆåŠŸ")[m
[32m+[m[32m          open.value = false[m
[32m+[m[32m          getList()[m
[32m+[m[32m        })[m
[32m+[m[32m      } else {[m
[32m+[m[32m        addCpu(form.value).then(response => {[m
[32m+[m[32m          proxy.$modal.msgSuccess("æ–°å¢æˆåŠŸ")[m
[32m+[m[32m          open.value = false[m
[32m+[m[32m          getList()[m
[32m+[m[32m        })[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** åˆ é™¤æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleDelete(row) {[m
[32m+[m[32m  const _ids = row.id || ids.value[m
[32m+[m[32m  proxy.$modal.confirm('æ˜¯å¦ç¡®è®¤åˆ é™¤CPUç¡¬ä»¶ç¼–å·ä¸º"' + _ids + '"çš„æ•°æ®é¡¹ï¼Ÿ').then(function() {[m
[32m+[m[32m    return delCpu(_ids)[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    getList()[m
[32m+[m[32m    proxy.$modal.msgSuccess("åˆ é™¤æˆåŠŸ")[m
[32m+[m[32m  }).catch(() => {})[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** å¯¼å‡ºæŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleExport() {[m
[32m+[m[32m  proxy.download('system/cpu/export', {[m
[32m+[m[32m    ...queryParams.value[m
[32m+[m[32m  }, `cpu_${new Date().getTime()}.xlsx`)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mgetList()[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/system/dept/index.vue b/src/views/system/dept/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..d073a261[m
[1m--- /dev/null[m
[1m+++ b/src/views/system/dept/index.vue[m
[36m@@ -0,0 +1,274 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m   <div class="app-container">[m
[32m+[m[32m      <el-form :model="queryParams" ref="queryRef" :inline="true" v-show="showSearch">[m
[32m+[m[32m         <el-form-item label="éƒ¨é—¨åç§°" prop="deptName">[m
[32m+[m[32m            <el-input[m
[32m+[m[32m               v-model="queryParams.deptName"[m
[32m+[m[32m               placeholder="è¯·è¾“å…¥éƒ¨é—¨åç§°"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 200px"[m
[32m+[m[32m               @keyup.enter="handleQuery"[m
[32m+[m[32m            />[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="çŠ¶æ€" prop="status">[m
[32m+[m[32m            <el-select v-model="queryParams.status" placeholder="éƒ¨é—¨çŠ¶æ€" clearable style="width: 200px">[m
[32m+[m[32m               <el-option[m
[32m+[m[32m                  v-for="dict in sys_normal_disable"[m
[32m+[m[32m                  :key="dict.value"[m
[32m+[m[32m                  :label="dict.label"[m
[32m+[m[32m                  :value="dict.value"[m
[32m+[m[32m               />[m
[32m+[m[32m            </el-select>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item>[m
[32m+[m[32m            <el-button type="primary" icon="Search" @click="handleQuery">æœç´¢</el-button>[m
[32m+[m[32m            <el-button icon="Refresh" @click="resetQuery">é‡ç½®</el-button>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m      </el-form>[m
[32m+[m
[32m+[m[32m      <el-row :gutter="10" class="mb8">[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="primary"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Plus"[m
[32m+[m[32m               @click="handleAdd"[m
[32m+[m[32m               v-hasPermi="['system:dept:add']"[m
[32m+[m[32m            >æ–°å¢</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="info"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Sort"[m
[32m+[m[32m               @click="toggleExpandAll"[m
[32m+[m[32m            >å±•å¼€/æŠ˜å </el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <right-toolbar v-model:showSearch="showSearch" @queryTable="getList"></right-toolbar>[m
[32m+[m[32m      </el-row>[m
[32m+[m
[32m+[m[32m      <el-table[m
[32m+[m[32m         v-if="refreshTable"[m
[32m+[m[32m         v-loading="loading"[m
[32m+[m[32m         :data="deptList"[m
[32m+[m[32m         row-key="deptId"[m
[32m+[m[32m         :default-expand-all="isExpandAll"[m
[32m+[m[32m         :tree-props="{ children: 'children', hasChildren: 'hasChildren' }"[m
[32m+[m[32m      >[m
[32m+[m[32m         <el-table-column prop="deptName" label="éƒ¨é—¨åç§°" width="260"></el-table-column>[m
[32m+[m[32m         <el-table-column prop="orderNum" label="æ’åº" width="200"></el-table-column>[m
[32m+[m[32m         <el-table-column prop="status" label="çŠ¶æ€" width="100">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <dict-tag :options="sys_normal_disable" :value="scope.row.status" />[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="åˆ›å»ºæ—¶é—´" align="center" prop="createTime" width="200">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <span>{{ parseTime(scope.row.createTime) }}</span>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="æ“ä½œ" align="center" class-name="small-padding fixed-width">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <el-button link type="primary" icon="Edit" @click="handleUpdate(scope.row)" v-hasPermi="['system:dept:edit']">ä¿®æ”¹</el-button>[m
[32m+[m[32m               <el-button link type="primary" icon="Plus" @click="handleAdd(scope.row)" v-hasPermi="['system:dept:add']">æ–°å¢</el-button>[m
[32m+[m[32m               <el-button v-if="scope.row.parentId != 0" link type="primary" icon="Delete" @click="handleDelete(scope.row)" v-hasPermi="['system:dept:remove']">åˆ é™¤</el-button>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m      </el-table>[m
[32m+[m
[32m+[m[32m      <!-- æ·»åŠ æˆ–ä¿®æ”¹éƒ¨é—¨å¯¹è¯æ¡† -->[m
[32m+[m[32m      <el-dialog :title="title" v-model="open" width="600px" append-to-body>[m
[32m+[m[32m         <el-form ref="deptRef" :model="form" :rules="rules" label-width="80px">[m
[32m+[m[32m            <el-row>[m
[32m+[m[32m               <el-col :span="24" v-if="form.parentId !== 0">[m
[32m+[m[32m                  <el-form-item label="ä¸Šçº§éƒ¨é—¨" prop="parentId">[m
[32m+[m[32m                     <el-tree-select[m
[32m+[m[32m                        v-model="form.parentId"[m
[32m+[m[32m                        :data="deptOptions"[m
[32m+[m[32m                        :props="{ value: 'deptId', label: 'deptName', children: 'children' }"[m
[32m+[m[32m                        value-key="deptId"[m
[32m+[m[32m                        placeholder="é€‰æ‹©ä¸Šçº§éƒ¨é—¨"[m
[32m+[m[32m                        check-strictly[m
[32m+[m[32m                     />[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="éƒ¨é—¨åç§°" prop="deptName">[m
[32m+[m[32m                     <el-input v-model="form.deptName" placeholder="è¯·è¾“å…¥éƒ¨é—¨åç§°" />[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="æ˜¾ç¤ºæ’åº" prop="orderNum">[m
[32m+[m[32m                     <el-input-number v-model="form.orderNum" controls-position="right" :min="0" />[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="è´Ÿè´£äºº" prop="leader">[m
[32m+[m[32m                     <el-input v-model="form.leader" placeholder="è¯·è¾“å…¥è´Ÿè´£äºº" maxlength="20" />[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="è”ç³»ç”µè¯" prop="phone">[m
[32m+[m[32m                     <el-input v-model="form.phone" placeholder="è¯·è¾“å…¥è”ç³»ç”µè¯" maxlength="11" />[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="é‚®ç®±" prop="email">[m
[32m+[m[32m                     <el-input v-model="form.email" placeholder="è¯·è¾“å…¥é‚®ç®±" maxlength="50" />[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="éƒ¨é—¨çŠ¶æ€">[m
[32m+[m[32m                     <el-radio-group v-model="form.status">[m
[32m+[m[32m                        <el-radio[m
[32m+[m[32m                           v-for="dict in sys_normal_disable"[m
[32m+[m[32m                           :key="dict.value"[m
[32m+[m[32m                           :label="dict.value"[m
[32m+[m[32m                        >{{ dict.label }}</el-radio>[m
[32m+[m[32m                     </el-radio-group>[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m            </el-row>[m
[32m+[m[32m         </el-form>[m
[32m+[m[32m         <template #footer>[m
[32m+[m[32m            <div class="dialog-footer">[m
[32m+[m[32m               <el-button type="primary" @click="submitForm">ç¡® å®š</el-button>[m
[32m+[m[32m               <el-button @click="cancel">å– æ¶ˆ</el-button>[m
[32m+[m[32m            </div>[m
[32m+[m[32m         </template>[m
[32m+[m[32m      </el-dialog>[m
[32m+[m[32m   </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup name="Dept">[m
[32m+[m[32mimport { listDept, getDept, delDept, addDept, updateDept, listDeptExcludeChild } from "@/api/system/dept";[m
[32m+[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m[32mconst { sys_normal_disable } = proxy.useDict("sys_normal_disable");[m
[32m+[m
[32m+[m[32mconst deptList = ref([]);[m
[32m+[m[32mconst open = ref(false);[m
[32m+[m[32mconst loading = ref(true);[m
[32m+[m[32mconst showSearch = ref(true);[m
[32m+[m[32mconst title = ref("");[m
[32m+[m[32mconst deptOptions = ref([]);[m
[32m+[m[32mconst isExpandAll = ref(true);[m
[32m+[m[32mconst refreshTable = ref(true);[m
[32m+[m
[32m+[m[32mconst data = reactive({[m
[32m+[m[32m  form: {},[m
[32m+[m[32m  queryParams: {[m
[32m+[m[32m    deptName: undefined,[m
[32m+[m[32m    status: undefined[m
[32m+[m[32m  },[m
[32m+[m[32m  rules: {[m
[32m+[m[32m    parentId: [{ required: true, message: "ä¸Šçº§éƒ¨é—¨ä¸èƒ½ä¸ºç©º", trigger: "blur" }],[m
[32m+[m[32m    deptName: [{ required: true, message: "éƒ¨é—¨åç§°ä¸èƒ½ä¸ºç©º", trigger: "blur" }],[m
[32m+[m[32m    orderNum: [{ required: true, message: "æ˜¾ç¤ºæ’åºä¸èƒ½ä¸ºç©º", trigger: "blur" }],[m
[32m+[m[32m    email: [{ type: "email", message: "è¯·è¾“å…¥æ­£ç¡®çš„é‚®ç®±åœ°å€", trigger: ["blur", "change"] }],[m
[32m+[m[32m    phone: [{ pattern: /^1[3|4|5|6|7|8|9][0-9]\d{8}$/, message: "è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·ç ", trigger: "blur" }][m
[32m+[m[32m  },[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst { queryParams, form, rules } = toRefs(data);[m
[32m+[m
[32m+[m[32m/** æŸ¥è¯¢éƒ¨é—¨åˆ—è¡¨ */[m
[32m+[m[32mfunction getList() {[m
[32m+[m[32m  loading.value = true;[m
[32m+[m[32m  listDept(queryParams.value).then(response => {[m
[32m+[m[32m    deptList.value = proxy.handleTree(response.data, "deptId");[m
[32m+[m[32m    loading.value = false;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** å–æ¶ˆæŒ‰é’® */[m
[32m+[m[32mfunction cancel() {[m
[32m+[m[32m  open.value = false;[m
[32m+[m[32m  reset();[m
[32m+[m[32m}[m
[32m+[m[32m/** è¡¨å•é‡ç½® */[m
[32m+[m[32mfunction reset() {[m
[32m+[m[32m  form.value = {[m
[32m+[m[32m    deptId: undefined,[m
[32m+[m[32m    parentId: undefined,[m
[32m+[m[32m    deptName: undefined,[m
[32m+[m[32m    orderNum: 0,[m
[32m+[m[32m    leader: undefined,[m
[32m+[m[32m    phone: undefined,[m
[32m+[m[32m    email: undefined,[m
[32m+[m[32m    status: "0"[m
[32m+[m[32m  };[m
[32m+[m[32m  proxy.resetForm("deptRef");[m
[32m+[m[32m}[m
[32m+[m[32m/** æœç´¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleQuery() {[m
[32m+[m[32m  getList();[m
[32m+[m[32m}[m
[32m+[m[32m/** é‡ç½®æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction resetQuery() {[m
[32m+[m[32m  proxy.resetForm("queryRef");[m
[32m+[m[32m  handleQuery();[m
[32m+[m[32m}[m
[32m+[m[32m/** æ–°å¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleAdd(row) {[m
[32m+[m[32m  reset();[m
[32m+[m[32m  listDept().then(response => {[m
[32m+[m[32m    deptOptions.value = proxy.handleTree(response.data, "deptId");[m
[32m+[m[32m  });[m
[32m+[m[32m  if (row != undefined) {[m
[32m+[m[32m    form.value.parentId = row.deptId;[m
[32m+[m[32m  }[m
[32m+[m[32m  open.value = true;[m
[32m+[m[32m  title.value = "æ·»åŠ éƒ¨é—¨";[m
[32m+[m[32m}[m
[32m+[m[32m/** å±•å¼€/æŠ˜å æ“ä½œ */[m
[32m+[m[32mfunction toggleExpandAll() {[m
[32m+[m[32m  refreshTable.value = false;[m
[32m+[m[32m  isExpandAll.value = !isExpandAll.value;[m
[32m+[m[32m  nextTick(() => {[m
[32m+[m[32m    refreshTable.value = true;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** ä¿®æ”¹æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleUpdate(row) {[m
[32m+[m[32m  reset();[m
[32m+[m[32m  listDeptExcludeChild(row.deptId).then(response => {[m
[32m+[m[32m    deptOptions.value = proxy.handleTree(response.data, "deptId");[m
[32m+[m[32m  });[m
[32m+[m[32m  getDept(row.deptId).then(response => {[m
[32m+[m[32m    form.value = response.data;[m
[32m+[m[32m    open.value = true;[m
[32m+[m[32m    title.value = "ä¿®æ”¹éƒ¨é—¨";[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** æäº¤æŒ‰é’® */[m
[32m+[m[32mfunction submitForm() {[m
[32m+[m[32m  proxy.$refs["deptRef"].validate(valid => {[m
[32m+[m[32m    if (valid) {[m
[32m+[m[32m      if (form.value.deptId != undefined) {[m
[32m+[m[32m        updateDept(form.value).then(response => {[m
[32m+[m[32m          proxy.$modal.msgSuccess("ä¿®æ”¹æˆåŠŸ");[m
[32m+[m[32m          open.value = false;[m
[32m+[m[32m          getList();[m
[32m+[m[32m        });[m
[32m+[m[32m      } else {[m
[32m+[m[32m        addDept(form.value).then(response => {[m
[32m+[m[32m          proxy.$modal.msgSuccess("æ–°å¢æˆåŠŸ");[m
[32m+[m[32m          open.value = false;[m
[32m+[m[32m          getList();[m
[32m+[m[32m        });[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** åˆ é™¤æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleDelete(row) {[m
[32m+[m[32m  proxy.$modal.confirm('æ˜¯å¦ç¡®è®¤åˆ é™¤åç§°ä¸º"' + row.deptName + '"çš„æ•°æ®é¡¹?').then(function() {[m
[32m+[m[32m    return delDept(row.deptId);[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    getList();[m
[32m+[m[32m    proxy.$modal.msgSuccess("åˆ é™¤æˆåŠŸ");[m
[32m+[m[32m  }).catch(() => {});[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mgetList();[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/system/dict/data.vue b/src/views/system/dict/data.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..f817fd04[m
[1m--- /dev/null[m
[1m+++ b/src/views/system/dict/data.vue[m
[36m@@ -0,0 +1,350 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m   <div class="app-container">[m
[32m+[m[32m      <el-form :model="queryParams" ref="queryRef" :inline="true" v-show="showSearch">[m
[32m+[m[32m         <el-form-item label="å­—å…¸åç§°" prop="dictType">[m
[32m+[m[32m            <el-select v-model="queryParams.dictType" style="width: 200px">[m
[32m+[m[32m               <el-option[m
[32m+[m[32m                  v-for="item in typeOptions"[m
[32m+[m[32m                  :key="item.dictId"[m
[32m+[m[32m                  :label="item.dictName"[m
[32m+[m[32m                  :value="item.dictType"[m
[32m+[m[32m               />[m
[32m+[m[32m            </el-select>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="å­—å…¸æ ‡ç­¾" prop="dictLabel">[m
[32m+[m[32m            <el-input[m
[32m+[m[32m               v-model="queryParams.dictLabel"[m
[32m+[m[32m               placeholder="è¯·è¾“å…¥å­—å…¸æ ‡ç­¾"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 200px"[m
[32m+[m[32m               @keyup.enter="handleQuery"[m
[32m+[m[32m            />[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="çŠ¶æ€" prop="status">[m
[32m+[m[32m            <el-select v-model="queryParams.status" placeholder="æ•°æ®çŠ¶æ€" clearable style="width: 200px">[m
[32m+[m[32m               <el-option[m
[32m+[m[32m                  v-for="dict in sys_normal_disable"[m
[32m+[m[32m                  :key="dict.value"[m
[32m+[m[32m                  :label="dict.label"[m
[32m+[m[32m                  :value="dict.value"[m
[32m+[m[32m               />[m
[32m+[m[32m            </el-select>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item>[m
[32m+[m[32m            <el-button type="primary" icon="Search" @click="handleQuery">æœç´¢</el-button>[m
[32m+[m[32m            <el-button icon="Refresh" @click="resetQuery">é‡ç½®</el-button>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m      </el-form>[m
[32m+[m
[32m+[m[32m      <el-row :gutter="10" class="mb8">[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="primary"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Plus"[m
[32m+[m[32m               @click="handleAdd"[m
[32m+[m[32m               v-hasPermi="['system:dict:add']"[m
[32m+[m[32m            >æ–°å¢</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="success"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Edit"[m
[32m+[m[32m               :disabled="single"[m
[32m+[m[32m               @click="handleUpdate"[m
[32m+[m[32m               v-hasPermi="['system:dict:edit']"[m
[32m+[m[32m            >ä¿®æ”¹</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="danger"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Delete"[m
[32m+[m[32m               :disabled="multiple"[m
[32m+[m[32m               @click="handleDelete"[m
[32m+[m[32m               v-hasPermi="['system:dict:remove']"[m
[32m+[m[32m            >åˆ é™¤</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="warning"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Download"[m
[32m+[m[32m               @click="handleExport"[m
[32m+[m[32m               v-hasPermi="['system:dict:export']"[m
[32m+[m[32m            >å¯¼å‡º</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="warning"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Close"[m
[32m+[m[32m               @click="handleClose"[m
[32m+[m[32m            >å…³é—­</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <right-toolbar v-model:showSearch="showSearch" @queryTable="getList"></right-toolbar>[m
[32m+[m[32m      </el-row>[m
[32m+[m
[32m+[m[32m      <el-table v-loading="loading" :data="dataList" @selection-change="handleSelectionChange">[m
[32m+[m[32m         <el-table-column type="selection" width="55" align="center" />[m
[32m+[m[32m         <el-table-column label="å­—å…¸ç¼–ç " align="center" prop="dictCode" />[m
[32m+[m[32m         <el-table-column label="å­—å…¸æ ‡ç­¾" align="center" prop="dictLabel">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <span v-if="(scope.row.listClass == '' || scope.row.listClass == 'default') && (scope.row.cssClass == '' || scope.row.cssClass == null)">{{ scope.row.dictLabel }}</span>[m
[32m+[m[32m               <el-tag v-else :type="scope.row.listClass == 'primary' ? '' : scope.row.listClass" :class="scope.row.cssClass">{{ scope.row.dictLabel }}</el-tag>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="å­—å…¸é”®å€¼" align="center" prop="dictValue" />[m
[32m+[m[32m         <el-table-column label="å­—å…¸æ’åº" align="center" prop="dictSort" />[m
[32m+[m[32m         <el-table-column label="çŠ¶æ€" align="center" prop="status">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <dict-tag :options="sys_normal_disable" :value="scope.row.status" />[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="å¤‡æ³¨" align="center" prop="remark" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="åˆ›å»ºæ—¶é—´" align="center" prop="createTime" width="180">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <span>{{ parseTime(scope.row.createTime) }}</span>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="æ“ä½œ" align="center" width="160" class-name="small-padding fixed-width">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <el-button link type="primary" icon="Edit" @click="handleUpdate(scope.row)" v-hasPermi="['system:dict:edit']">ä¿®æ”¹</el-button>[m
[32m+[m[32m               <el-button link type="primary" icon="Delete" @click="handleDelete(scope.row)" v-hasPermi="['system:dict:remove']">åˆ é™¤</el-button>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m      </el-table>[m
[32m+[m
[32m+[m[32m      <pagination[m
[32m+[m[32m         v-show="total > 0"[m
[32m+[m[32m         :total="total"[m
[32m+[m[32m         v-model:page="queryParams.pageNum"[m
[32m+[m[32m         v-model:limit="queryParams.pageSize"[m
[32m+[m[32m         @pagination="getList"[m
[32m+[m[32m      />[m
[32m+[m
[32m+[m[32m      <!-- æ·»åŠ æˆ–ä¿®æ”¹å‚æ•°é…ç½®å¯¹è¯æ¡† -->[m
[32m+[m[32m      <el-dialog :title="title" v-model="open" width="500px" append-to-body>[m
[32m+[m[32m         <el-form ref="dataRef" :model="form" :rules="rules" label-width="80px">[m
[32m+[m[32m            <el-form-item label="å­—å…¸ç±»å‹">[m
[32m+[m[32m               <el-input v-model="form.dictType" :disabled="true" />[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m            <el-form-item label="æ•°æ®æ ‡ç­¾" prop="dictLabel">[m
[32m+[m[32m               <el-input v-model="form.dictLabel" placeholder="è¯·è¾“å…¥æ•°æ®æ ‡ç­¾" />[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m            <el-form-item label="æ•°æ®é”®å€¼" prop="dictValue">[m
[32m+[m[32m               <el-input v-model="form.dictValue" placeholder="è¯·è¾“å…¥æ•°æ®é”®å€¼" />[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m            <el-form-item label="æ ·å¼å±æ€§" prop="cssClass">[m
[32m+[m[32m               <el-input v-model="form.cssClass" placeholder="è¯·è¾“å…¥æ ·å¼å±æ€§" />[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m            <el-form-item label="æ˜¾ç¤ºæ’åº" prop="dictSort">[m
[32m+[m[32m               <el-input-number v-model="form.dictSort" controls-position="right" :min="0" />[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m            <el-form-item label="å›æ˜¾æ ·å¼" prop="listClass">[m
[32m+[m[32m               <el-select v-model="form.listClass">[m
[32m+[m[32m                  <el-option[m
[32m+[m[32m                     v-for="item in listClassOptions"[m
[32m+[m[32m                     :key="item.value"[m
[32m+[m[32m                     :label="item.label + '(' + item.value + ')'"[m
[32m+[m[32m                     :value="item.value"[m
[32m+[m[32m                  ></el-option>[m
[32m+[m[32m               </el-select>[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m            <el-form-item label="çŠ¶æ€" prop="status">[m
[32m+[m[32m               <el-radio-group v-model="form.status">[m
[32m+[m[32m                  <el-radio[m
[32m+[m[32m                     v-for="dict in sys_normal_disable"[m
[32m+[m[32m                     :key="dict.value"[m
[32m+[m[32m                     :label="dict.value"[m
[32m+[m[32m                  >{{ dict.label }}</el-radio>[m
[32m+[m[32m               </el-radio-group>[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m            <el-form-item label="å¤‡æ³¨" prop="remark">[m
[32m+[m[32m               <el-input v-model="form.remark" type="textarea" placeholder="è¯·è¾“å…¥å†…å®¹"></el-input>[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m         </el-form>[m
[32m+[m[32m         <template #footer>[m
[32m+[m[32m            <div class="dialog-footer">[m
[32m+[m[32m               <el-button type="primary" @click="submitForm">ç¡® å®š</el-button>[m
[32m+[m[32m               <el-button @click="cancel">å– æ¶ˆ</el-button>[m
[32m+[m[32m            </div>[m
[32m+[m[32m         </template>[m
[32m+[m[32m      </el-dialog>[m
[32m+[m[32m   </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup name="Data">[m
[32m+[m[32mimport useDictStore from '@/store/modules/dict'[m
[32m+[m[32mimport { optionselect as getDictOptionselect, getType } from "@/api/system/dict/type";[m
[32m+[m[32mimport { listData, getData, delData, addData, updateData } from "@/api/system/dict/data";[m
[32m+[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m[32mconst { sys_normal_disable } = proxy.useDict("sys_normal_disable");[m
[32m+[m
[32m+[m[32mconst dataList = ref([]);[m
[32m+[m[32mconst open = ref(false);[m
[32m+[m[32mconst loading = ref(true);[m
[32m+[m[32mconst showSearch = ref(true);[m
[32m+[m[32mconst ids = ref([]);[m
[32m+[m[32mconst single = ref(true);[m
[32m+[m[32mconst multiple = ref(true);[m
[32m+[m[32mconst total = ref(0);[m
[32m+[m[32mconst title = ref("");[m
[32m+[m[32mconst defaultDictType = ref("");[m
[32m+[m[32mconst typeOptions = ref([]);[m
[32m+[m[32mconst route = useRoute();[m
[32m+[m[32m// æ•°æ®æ ‡ç­¾å›æ˜¾æ ·å¼[m
[32m+[m[32mconst listClassOptions = ref([[m
[32m+[m[32m  { value: "default", label: "é»˜è®¤" },[m[41m [m
[32m+[m[32m  { value: "primary", label: "ä¸»è¦" },[m[41m [m
[32m+[m[32m  { value: "success", label: "æˆåŠŸ" },[m
[32m+[m[32m  { value: "info", label: "ä¿¡æ¯" },[m
[32m+[m[32m  { value: "warning", label: "è­¦å‘Š" },[m
[32m+[m[32m  { value: "danger", label: "å±é™©" }[m
[32m+[m[32m]);[m
[32m+[m
[32m+[m[32mconst data = reactive({[m
[32m+[m[32m  form: {},[m
[32m+[m[32m  queryParams: {[m
[32m+[m[32m    pageNum: 1,[m
[32m+[m[32m    pageSize: 10,[m
[32m+[m[32m    dictType: undefined,[m
[32m+[m[32m    dictLabel: undefined,[m
[32m+[m[32m    status: undefined[m
[32m+[m[32m  },[m
[32m+[m[32m  rules: {[m
[32m+[m[32m    dictLabel: [{ required: true, message: "æ•°æ®æ ‡ç­¾ä¸èƒ½ä¸ºç©º", trigger: "blur" }],[m
[32m+[m[32m    dictValue: [{ required: true, message: "æ•°æ®é”®å€¼ä¸èƒ½ä¸ºç©º", trigger: "blur" }],[m
[32m+[m[32m    dictSort: [{ required: true, message: "æ•°æ®é¡ºåºä¸èƒ½ä¸ºç©º", trigger: "blur" }][m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst { queryParams, form, rules } = toRefs(data);[m
[32m+[m
[32m+[m[32m/** æŸ¥è¯¢å­—å…¸ç±»å‹è¯¦ç»† */[m
[32m+[m[32mfunction getTypes(dictId) {[m
[32m+[m[32m  getType(dictId).then(response => {[m
[32m+[m[32m    queryParams.value.dictType = response.data.dictType;[m
[32m+[m[32m    defaultDictType.value = response.data.dictType;[m
[32m+[m[32m    getList();[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** æŸ¥è¯¢å­—å…¸ç±»å‹åˆ—è¡¨ */[m
[32m+[m[32mfunction getTypeList() {[m
[32m+[m[32m  getDictOptionselect().then(response => {[m
[32m+[m[32m    typeOptions.value = response.data;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** æŸ¥è¯¢å­—å…¸æ•°æ®åˆ—è¡¨ */[m
[32m+[m[32mfunction getList() {[m
[32m+[m[32m  loading.value = true;[m
[32m+[m[32m  listData(queryParams.value).then(response => {[m
[32m+[m[32m    dataList.value = response.rows;[m
[32m+[m[32m    total.value = response.total;[m
[32m+[m[32m    loading.value = false;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** å–æ¶ˆæŒ‰é’® */[m
[32m+[m[32mfunction cancel() {[m
[32m+[m[32m  open.value = false;[m
[32m+[m[32m  reset();[m
[32m+[m[32m}[m
[32m+[m[32m/** è¡¨å•é‡ç½® */[m
[32m+[m[32mfunction reset() {[m
[32m+[m[32m  form.value = {[m
[32m+[m[32m    dictCode: undefined,[m
[32m+[m[32m    dictLabel: undefined,[m
[32m+[m[32m    dictValue: undefined,[m
[32m+[m[32m    cssClass: undefined,[m
[32m+[m[32m    listClass: "default",[m
[32m+[m[32m    dictSort: 0,[m
[32m+[m[32m    status: "0",[m
[32m+[m[32m    remark: undefined[m
[32m+[m[32m  };[m
[32m+[m[32m  proxy.resetForm("dataRef");[m
[32m+[m[32m}[m
[32m+[m[32m/** æœç´¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleQuery() {[m
[32m+[m[32m  queryParams.value.pageNum = 1;[m
[32m+[m[32m  getList();[m
[32m+[m[32m}[m
[32m+[m[32m/** è¿”å›æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleClose() {[m
[32m+[m[32m  const obj = { path: "/system/dict" };[m
[32m+[m[32m  proxy.$tab.closeOpenPage(obj);[m
[32m+[m[32m}[m
[32m+[m[32m/** é‡ç½®æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction resetQuery() {[m
[32m+[m[32m  proxy.resetForm("queryRef");[m
[32m+[m[32m  queryParams.value.dictType = defaultDictType.value;[m
[32m+[m[32m  handleQuery();[m
[32m+[m[32m}[m
[32m+[m[32m/** æ–°å¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleAdd() {[m
[32m+[m[32m  reset();[m
[32m+[m[32m  open.value = true;[m
[32m+[m[32m  title.value = "æ·»åŠ å­—å…¸æ•°æ®";[m
[32m+[m[32m  form.value.dictType = queryParams.value.dictType;[m
[32m+[m[32m}[m
[32m+[m[32m/** å¤šé€‰æ¡†é€‰ä¸­æ•°æ® */[m
[32m+[m[32mfunction handleSelectionChange(selection) {[m
[32m+[m[32m  ids.value = selection.map(item => item.dictCode);[m
[32m+[m[32m  single.value = selection.length != 1;[m
[32m+[m[32m  multiple.value = !selection.length;[m
[32m+[m[32m}[m
[32m+[m[32m/** ä¿®æ”¹æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleUpdate(row) {[m
[32m+[m[32m  reset();[m
[32m+[m[32m  const dictCode = row.dictCode || ids.value;[m
[32m+[m[32m  getData(dictCode).then(response => {[m
[32m+[m[32m    form.value = response.data;[m
[32m+[m[32m    open.value = true;[m
[32m+[m[32m    title.value = "ä¿®æ”¹å­—å…¸æ•°æ®";[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** æäº¤æŒ‰é’® */[m
[32m+[m[32mfunction submitForm() {[m
[32m+[m[32m  proxy.$refs["dataRef"].validate(valid => {[m
[32m+[m[32m    if (valid) {[m
[32m+[m[32m      if (form.value.dictCode != undefined) {[m
[32m+[m[32m        updateData(form.value).then(response => {[m
[32m+[m[32m          useDictStore().removeDict(queryParams.value.dictType);[m
[32m+[m[32m          proxy.$modal.msgSuccess("ä¿®æ”¹æˆåŠŸ");[m
[32m+[m[32m          open.value = false;[m
[32m+[m[32m          getList();[m
[32m+[m[32m        });[m
[32m+[m[32m      } else {[m
[32m+[m[32m        addData(form.value).then(response => {[m
[32m+[m[32m          useDictStore().removeDict(queryParams.value.dictType);[m
[32m+[m[32m          proxy.$modal.msgSuccess("æ–°å¢æˆåŠŸ");[m
[32m+[m[32m          open.value = false;[m
[32m+[m[32m          getList();[m
[32m+[m[32m        });[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** åˆ é™¤æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleDelete(row) {[m
[32m+[m[32m  const dictCodes = row.dictCode || ids.value;[m
[32m+[m[32m  proxy.$modal.confirm('æ˜¯å¦ç¡®è®¤åˆ é™¤å­—å…¸ç¼–ç ä¸º"' + dictCodes + '"çš„æ•°æ®é¡¹ï¼Ÿ').then(function() {[m
[32m+[m[32m    return delData(dictCodes);[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    getList();[m
[32m+[m[32m    proxy.$modal.msgSuccess("åˆ é™¤æˆåŠŸ");[m
[32m+[m[32m    useDictStore().removeDict(queryParams.value.dictType);[m
[32m+[m[32m  }).catch(() => {});[m
[32m+[m[32m}[m
[32m+[m[32m/** å¯¼å‡ºæŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleExport() {[m
[32m+[m[32m  proxy.download("system/dict/data/export", {[m
[32m+[m[32m    ...queryParams.value[m
[32m+[m[32m  }, `dict_data_${new Date().getTime()}.xlsx`);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mgetTypes(route.params && route.params.dictId);[m
[32m+[m[32mgetTypeList();[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/system/dict/index.vue b/src/views/system/dict/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..297ac84f[m
[1m--- /dev/null[m
[1m+++ b/src/views/system/dict/index.vue[m
[36m@@ -0,0 +1,312 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m   <div class="app-container">[m
[32m+[m[32m      <el-form :model="queryParams" ref="queryRef" :inline="true" v-show="showSearch" label-width="68px">[m
[32m+[m[32m         <el-form-item label="å­—å…¸åç§°" prop="dictName">[m
[32m+[m[32m            <el-input[m
[32m+[m[32m               v-model="queryParams.dictName"[m
[32m+[m[32m               placeholder="è¯·è¾“å…¥å­—å…¸åç§°"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 240px"[m
[32m+[m[32m               @keyup.enter="handleQuery"[m
[32m+[m[32m            />[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="å­—å…¸ç±»å‹" prop="dictType">[m
[32m+[m[32m            <el-input[m
[32m+[m[32m               v-model="queryParams.dictType"[m
[32m+[m[32m               placeholder="è¯·è¾“å…¥å­—å…¸ç±»å‹"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 240px"[m
[32m+[m[32m               @keyup.enter="handleQuery"[m
[32m+[m[32m            />[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="çŠ¶æ€" prop="status">[m
[32m+[m[32m            <el-select[m
[32m+[m[32m               v-model="queryParams.status"[m
[32m+[m[32m               placeholder="å­—å…¸çŠ¶æ€"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 240px"[m
[32m+[m[32m            >[m
[32m+[m[32m               <el-option[m
[32m+[m[32m                  v-for="dict in sys_normal_disable"[m
[32m+[m[32m                  :key="dict.value"[m
[32m+[m[32m                  :label="dict.label"[m
[32m+[m[32m                  :value="dict.value"[m
[32m+[m[32m               />[m
[32m+[m[32m            </el-select>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="åˆ›å»ºæ—¶é—´" style="width: 308px">[m
[32m+[m[32m            <el-date-picker[m
[32m+[m[32m               v-model="dateRange"[m
[32m+[m[32m               value-format="YYYY-MM-DD"[m
[32m+[m[32m               type="daterange"[m
[32m+[m[32m               range-separator="-"[m
[32m+[m[32m               start-placeholder="å¼€å§‹æ—¥æœŸ"[m
[32m+[m[32m               end-placeholder="ç»“æŸæ—¥æœŸ"[m
[32m+[m[32m            ></el-date-picker>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item>[m
[32m+[m[32m            <el-button type="primary" icon="Search" @click="handleQuery">æœç´¢</el-button>[m
[32m+[m[32m            <el-button icon="Refresh" @click="resetQuery">é‡ç½®</el-button>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m      </el-form>[m
[32m+[m
[32m+[m[32m      <el-row :gutter="10" class="mb8">[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="primary"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Plus"[m
[32m+[m[32m               @click="handleAdd"[m
[32m+[m[32m               v-hasPermi="['system:dict:add']"[m
[32m+[m[32m            >æ–°å¢</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="success"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Edit"[m
[32m+[m[32m               :disabled="single"[m
[32m+[m[32m               @click="handleUpdate"[m
[32m+[m[32m               v-hasPermi="['system:dict:edit']"[m
[32m+[m[32m            >ä¿®æ”¹</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="danger"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Delete"[m
[32m+[m[32m               :disabled="multiple"[m
[32m+[m[32m               @click="handleDelete"[m
[32m+[m[32m               v-hasPermi="['system:dict:remove']"[m
[32m+[m[32m            >åˆ é™¤</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="warning"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Download"[m
[32m+[m[32m               @click="handleExport"[m
[32m+[m[32m               v-hasPermi="['system:dict:export']"[m
[32m+[m[32m            >å¯¼å‡º</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="danger"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Refresh"[m
[32m+[m[32m               @click="handleRefreshCache"[m
[32m+[m[32m               v-hasPermi="['system:dict:remove']"[m
[32m+[m[32m            >åˆ·æ–°ç¼“å­˜</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <right-toolbar v-model:showSearch="showSearch" @queryTable="getList"></right-toolbar>[m
[32m+[m[32m      </el-row>[m
[32m+[m
[32m+[m[32m      <el-table v-loading="loading" :data="typeList" @selection-change="handleSelectionChange">[m
[32m+[m[32m         <el-table-column type="selection" width="55" align="center" />[m
[32m+[m[32m         <el-table-column label="å­—å…¸ç¼–å·" align="center" prop="dictId" />[m
[32m+[m[32m         <el-table-column label="å­—å…¸åç§°" align="center" prop="dictName" :show-overflow-tooltip="true"/>[m
[32m+[m[32m         <el-table-column label="å­—å…¸ç±»å‹" align="center" :show-overflow-tooltip="true">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <router-link :to="'/system/dict-data/index/' + scope.row.dictId" class="link-type">[m
[32m+[m[32m                  <span>{{ scope.row.dictType }}</span>[m
[32m+[m[32m               </router-link>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="çŠ¶æ€" align="center" prop="status">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <dict-tag :options="sys_normal_disable" :value="scope.row.status" />[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="å¤‡æ³¨" align="center" prop="remark" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="åˆ›å»ºæ—¶é—´" align="center" prop="createTime" width="180">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <span>{{ parseTime(scope.row.createTime) }}</span>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="æ“ä½œ" align="center" width="160" class-name="small-padding fixed-width">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <el-button link type="primary" icon="Edit" @click="handleUpdate(scope.row)" v-hasPermi="['system:dict:edit']">ä¿®æ”¹</el-button>[m
[32m+[m[32m               <el-button link type="primary" icon="Delete" @click="handleDelete(scope.row)" v-hasPermi="['system:dict:remove']">åˆ é™¤</el-button>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m      </el-table>[m
[32m+[m
[32m+[m[32m      <pagination[m
[32m+[m[32m         v-show="total > 0"[m
[32m+[m[32m         :total="total"[m
[32m+[m[32m         v-model:page="queryParams.pageNum"[m
[32m+[m[32m         v-model:limit="queryParams.pageSize"[m
[32m+[m[32m         @pagination="getList"[m
[32m+[m[32m      />[m
[32m+[m
[32m+[m[32m      <!-- æ·»åŠ æˆ–ä¿®æ”¹å‚æ•°é…ç½®å¯¹è¯æ¡† -->[m
[32m+[m[32m      <el-dialog :title="title" v-model="open" width="500px" append-to-body>[m
[32m+[m[32m         <el-form ref="dictRef" :model="form" :rules="rules" label-width="80px">[m
[32m+[m[32m            <el-form-item label="å­—å…¸åç§°" prop="dictName">[m
[32m+[m[32m               <el-input v-model="form.dictName" placeholder="è¯·è¾“å…¥å­—å…¸åç§°" />[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m            <el-form-item label="å­—å…¸ç±»å‹" prop="dictType">[m
[32m+[m[32m               <el-input v-model="form.dictType" placeholder="è¯·è¾“å…¥å­—å…¸ç±»å‹" />[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m            <el-form-item label="çŠ¶æ€" prop="status">[m
[32m+[m[32m               <el-radio-group v-model="form.status">[m
[32m+[m[32m                  <el-radio[m
[32m+[m[32m                     v-for="dict in sys_normal_disable"[m
[32m+[m[32m                     :key="dict.value"[m
[32m+[m[32m                     :label="dict.value"[m
[32m+[m[32m                  >{{ dict.label }}</el-radio>[m
[32m+[m[32m               </el-radio-group>[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m            <el-form-item label="å¤‡æ³¨" prop="remark">[m
[32m+[m[32m               <el-input v-model="form.remark" type="textarea" placeholder="è¯·è¾“å…¥å†…å®¹"></el-input>[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m         </el-form>[m
[32m+[m[32m         <template #footer>[m
[32m+[m[32m            <div class="dialog-footer">[m
[32m+[m[32m               <el-button type="primary" @click="submitForm">ç¡® å®š</el-button>[m
[32m+[m[32m               <el-button @click="cancel">å– æ¶ˆ</el-button>[m
[32m+[m[32m            </div>[m
[32m+[m[32m         </template>[m
[32m+[m[32m      </el-dialog>[m
[32m+[m[32m   </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup name="Dict">[m
[32m+[m[32mimport useDictStore from '@/store/modules/dict'[m
[32m+[m[32mimport { listType, getType, delType, addType, updateType, refreshCache } from "@/api/system/dict/type";[m
[32m+[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m[32mconst { sys_normal_disable } = proxy.useDict("sys_normal_disable");[m
[32m+[m
[32m+[m[32mconst typeList = ref([]);[m
[32m+[m[32mconst open = ref(false);[m
[32m+[m[32mconst loading = ref(true);[m
[32m+[m[32mconst showSearch = ref(true);[m
[32m+[m[32mconst ids = ref([]);[m
[32m+[m[32mconst single = ref(true);[m
[32m+[m[32mconst multiple = ref(true);[m
[32m+[m[32mconst total = ref(0);[m
[32m+[m[32mconst title = ref("");[m
[32m+[m[32mconst dateRange = ref([]);[m
[32m+[m
[32m+[m[32mconst data = reactive({[m
[32m+[m[32m  form: {},[m
[32m+[m[32m  queryParams: {[m
[32m+[m[32m    pageNum: 1,[m
[32m+[m[32m    pageSize: 10,[m
[32m+[m[32m    dictName: undefined,[m
[32m+[m[32m    dictType: undefined,[m
[32m+[m[32m    status: undefined[m
[32m+[m[32m  },[m
[32m+[m[32m  rules: {[m
[32m+[m[32m    dictName: [{ required: true, message: "å­—å…¸åç§°ä¸èƒ½ä¸ºç©º", trigger: "blur" }],[m
[32m+[m[32m    dictType: [{ required: true, message: "å­—å…¸ç±»å‹ä¸èƒ½ä¸ºç©º", trigger: "blur" }][m
[32m+[m[32m  },[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst { queryParams, form, rules } = toRefs(data);[m
[32m+[m
[32m+[m[32m/** æŸ¥è¯¢å­—å…¸ç±»å‹åˆ—è¡¨ */[m
[32m+[m[32mfunction getList() {[m
[32m+[m[32m  loading.value = true;[m
[32m+[m[32m  listType(proxy.addDateRange(queryParams.value, dateRange.value)).then(response => {[m
[32m+[m[32m    typeList.value = response.rows;[m
[32m+[m[32m    total.value = response.total;[m
[32m+[m[32m    loading.value = false;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** å–æ¶ˆæŒ‰é’® */[m
[32m+[m[32mfunction cancel() {[m
[32m+[m[32m  open.value = false;[m
[32m+[m[32m  reset();[m
[32m+[m[32m}[m
[32m+[m[32m/** è¡¨å•é‡ç½® */[m
[32m+[m[32mfunction reset() {[m
[32m+[m[32m  form.value = {[m
[32m+[m[32m    dictId: undefined,[m
[32m+[m[32m    dictName: undefined,[m
[32m+[m[32m    dictType: undefined,[m
[32m+[m[32m    status: "0",[m
[32m+[m[32m    remark: undefined[m
[32m+[m[32m  };[m
[32m+[m[32m  proxy.resetForm("dictRef");[m
[32m+[m[32m}[m
[32m+[m[32m/** æœç´¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleQuery() {[m
[32m+[m[32m  queryParams.value.pageNum = 1;[m
[32m+[m[32m  getList();[m
[32m+[m[32m}[m
[32m+[m[32m/** é‡ç½®æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction resetQuery() {[m
[32m+[m[32m  dateRange.value = [];[m
[32m+[m[32m  proxy.resetForm("queryRef");[m
[32m+[m[32m  handleQuery();[m
[32m+[m[32m}[m
[32m+[m[32m/** æ–°å¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleAdd() {[m
[32m+[m[32m  reset();[m
[32m+[m[32m  open.value = true;[m
[32m+[m[32m  title.value = "æ·»åŠ å­—å…¸ç±»å‹";[m
[32m+[m[32m}[m
[32m+[m[32m/** å¤šé€‰æ¡†é€‰ä¸­æ•°æ® */[m
[32m+[m[32mfunction handleSelectionChange(selection) {[m
[32m+[m[32m  ids.value = selection.map(item => item.dictId);[m
[32m+[m[32m  single.value = selection.length != 1;[m
[32m+[m[32m  multiple.value = !selection.length;[m
[32m+[m[32m}[m
[32m+[m[32m/** ä¿®æ”¹æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleUpdate(row) {[m
[32m+[m[32m  reset();[m
[32m+[m[32m  const dictId = row.dictId || ids.value;[m
[32m+[m[32m  getType(dictId).then(response => {[m
[32m+[m[32m    form.value = response.data;[m
[32m+[m[32m    open.value = true;[m
[32m+[m[32m    title.value = "ä¿®æ”¹å­—å…¸ç±»å‹";[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** æäº¤æŒ‰é’® */[m
[32m+[m[32mfunction submitForm() {[m
[32m+[m[32m  proxy.$refs["dictRef"].validate(valid => {[m
[32m+[m[32m    if (valid) {[m
[32m+[m[32m      if (form.value.dictId != undefined) {[m
[32m+[m[32m        updateType(form.value).then(response => {[m
[32m+[m[32m          proxy.$modal.msgSuccess("ä¿®æ”¹æˆåŠŸ");[m
[32m+[m[32m          open.value = false;[m
[32m+[m[32m          getList();[m
[32m+[m[32m        });[m
[32m+[m[32m      } else {[m
[32m+[m[32m        addType(form.value).then(response => {[m
[32m+[m[32m          proxy.$modal.msgSuccess("æ–°å¢æˆåŠŸ");[m
[32m+[m[32m          open.value = false;[m
[32m+[m[32m          getList();[m
[32m+[m[32m        });[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** åˆ é™¤æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleDelete(row) {[m
[32m+[m[32m  const dictIds = row.dictId || ids.value;[m
[32m+[m[32m  proxy.$modal.confirm('æ˜¯å¦ç¡®è®¤åˆ é™¤å­—å…¸ç¼–å·ä¸º"' + dictIds + '"çš„æ•°æ®é¡¹ï¼Ÿ').then(function() {[m
[32m+[m[32m    return delType(dictIds);[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    getList();[m
[32m+[m[32m    proxy.$modal.msgSuccess("åˆ é™¤æˆåŠŸ");[m
[32m+[m[32m  }).catch(() => {});[m
[32m+[m[32m}[m
[32m+[m[32m/** å¯¼å‡ºæŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleExport() {[m
[32m+[m[32m  proxy.download("system/dict/type/export", {[m
[32m+[m[32m    ...queryParams.value[m
[32m+[m[32m  }, `dict_${new Date().getTime()}.xlsx`);[m
[32m+[m[32m}[m
[32m+[m[32m/** åˆ·æ–°ç¼“å­˜æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleRefreshCache() {[m
[32m+[m[32m  refreshCache().then(() => {[m
[32m+[m[32m    proxy.$modal.msgSuccess("åˆ·æ–°æˆåŠŸ");[m
[32m+[m[32m    useDictStore().cleanDict();[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mgetList();[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/system/gpu/index.vue b/src/views/system/gpu/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..c5e4bc21[m
[1m--- /dev/null[m
[1m+++ b/src/views/system/gpu/index.vue[m
[36m@@ -0,0 +1,279 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="app-container">[m
[32m+[m[32m    <el-form :model="queryParams" ref="queryRef" :inline="true" v-show="showSearch" label-width="68px">[m
[32m+[m[32m      <el-form-item label="å“ç‰Œ" prop="brand">[m
[32m+[m[32m        <el-select v-model="queryParams.brand" placeholder="è¯·é€‰æ‹©å“ç‰Œ" clearable>[m
[32m+[m[32m          <el-option[m
[32m+[m[32m            v-for="dict in gpu_brand"[m
[32m+[m[32m            :key="dict.value"[m
[32m+[m[32m            :label="dict.label"[m
[32m+[m[32m            :value="dict.value"[m
[32m+[m[32m          />[m
[32m+[m[32m        </el-select>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item label="å‹å·" prop="model">[m
[32m+[m[32m        <el-input[m
[32m+[m[32m          v-model="queryParams.model"[m
[32m+[m[32m          placeholder="è¯·è¾“å…¥å‹å·"[m
[32m+[m[32m          clearable[m
[32m+[m[32m          @keyup.enter="handleQuery"[m
[32m+[m[32m        />[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item>[m
[32m+[m[32m        <el-button type="primary" icon="Search" @click="handleQuery">æœç´¢</el-button>[m
[32m+[m[32m        <el-button icon="Refresh" @click="resetQuery">é‡ç½®</el-button>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m    </el-form>[m
[32m+[m
[32m+[m[32m    <el-row :gutter="10" class="mb8">[m
[32m+[m[32m      <el-col :span="1.5">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="primary"[m
[32m+[m[32m          plain[m
[32m+[m[32m          icon="Plus"[m
[32m+[m[32m          @click="handleAdd"[m
[32m+[m[32m          v-hasPermi="['system:gpu:add']"[m
[32m+[m[32m        >æ–°å¢</el-button>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <el-col :span="1.5">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="success"[m
[32m+[m[32m          plain[m
[32m+[m[32m          icon="Edit"[m
[32m+[m[32m          :disabled="single"[m
[32m+[m[32m          @click="handleUpdate"[m
[32m+[m[32m          v-hasPermi="['system:gpu:edit']"[m
[32m+[m[32m        >ä¿®æ”¹</el-button>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <el-col :span="1.5">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="danger"[m
[32m+[m[32m          plain[m
[32m+[m[32m          icon="Delete"[m
[32m+[m[32m          :disabled="multiple"[m
[32m+[m[32m          @click="handleDelete"[m
[32m+[m[32m          v-hasPermi="['system:gpu:remove']"[m
[32m+[m[32m        >åˆ é™¤</el-button>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <el-col :span="1.5">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="warning"[m
[32m+[m[32m          plain[m
[32m+[m[32m          icon="Download"[m
[32m+[m[32m          @click="handleExport"[m
[32m+[m[32m          v-hasPermi="['system:gpu:export']"[m
[32m+[m[32m        >å¯¼å‡º</el-button>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <right-toolbar v-model:showSearch="showSearch" @queryTable="getList"></right-toolbar>[m
[32m+[m[32m    </el-row>[m
[32m+[m
[32m+[m[32m    <el-table v-loading="loading" :data="gpuList" @selection-change="handleSelectionChange">[m
[32m+[m[32m      <el-table-column type="selection" width="55" align="center" />[m
[32m+[m[32m      <el-table-column label="ç¼–ç " align="center" prop="id" />[m
[32m+[m[32m      <el-table-column label="å“ç‰Œ" align="center" prop="brand">[m
[32m+[m[32m        <template #default="scope">[m
[32m+[m[32m          <dict-tag :options="gpu_brand" :value="scope.row.brand"/>[m
[32m+[m[32m        </template>[m
[32m+[m[32m      </el-table-column>[m
[32m+[m[32m      <el-table-column label="å‹å·" align="center" prop="model" />[m
[32m+[m[32m      <el-table-column label="æ€§èƒ½è·‘åˆ†" align="center" prop="performanceScore" />[m
[32m+[m[32m      <el-table-column label="åŠŸè€—(W)" align="center" prop="tdp" />[m
[32m+[m[32m      <el-table-column label="æ“ä½œ" align="center" class-name="small-padding fixed-width">[m
[32m+[m[32m        <template #default="scope">[m
[32m+[m[32m          <el-button link type="primary" icon="Edit" @click="handleUpdate(scope.row)" v-hasPermi="['system:gpu:edit']">ä¿®æ”¹</el-button>[m
[32m+[m[32m          <el-button link type="primary" icon="Delete" @click="handleDelete(scope.row)" v-hasPermi="['system:gpu:remove']">åˆ é™¤</el-button>[m
[32m+[m[32m        </template>[m
[32m+[m[32m      </el-table-column>[m
[32m+[m[32m    </el-table>[m
[32m+[m[41m    [m
[32m+[m[32m    <pagination[m
[32m+[m[32m      v-show="total>0"[m
[32m+[m[32m      :total="total"[m
[32m+[m[32m      v-model:page="queryParams.pageNum"[m
[32m+[m[32m      v-model:limit="queryParams.pageSize"[m
[32m+[m[32m      @pagination="getList"[m
[32m+[m[32m    />[m
[32m+[m
[32m+[m[32m    <!-- æ·»åŠ æˆ–ä¿®æ”¹æ˜¾å¡ç¡¬ä»¶å¯¹è¯æ¡† -->[m
[32m+[m[32m    <el-dialog :title="title" v-model="open" width="500px" append-to-body>[m
[32m+[m[32m      <el-form ref="gpuRef" :model="form" :rules="rules" label-width="80px">[m
[32m+[m[32m        <el-form-item label="å“ç‰Œ" prop="brand">[m
[32m+[m[32m          <el-select v-model="form.brand" placeholder="è¯·é€‰æ‹©å“ç‰Œ">[m
[32m+[m[32m            <el-option[m
[32m+[m[32m              v-for="dict in gpu_brand"[m
[32m+[m[32m              :key="dict.value"[m
[32m+[m[32m              :label="dict.label"[m
[32m+[m[32m              :value="dict.value"[m
[32m+[m[32m            ></el-option>[m
[32m+[m[32m          </el-select>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="å‹å·" prop="model">[m
[32m+[m[32m          <el-input v-model="form.model" placeholder="è¯·è¾“å…¥å‹å·" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="æ€§èƒ½è·‘åˆ†" prop="performanceScore">[m
[32m+[m[32m          <el-input v-model="form.performanceScore" placeholder="è¯·è¾“å…¥æ€§èƒ½è·‘åˆ†" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="åŠŸè€—(W)" prop="tdp">[m
[32m+[m[32m          <el-input v-model="form.tdp" placeholder="è¯·è¾“å…¥åŠŸè€—(W)" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m      </el-form>[m
[32m+[m[32m      <template #footer>[m
[32m+[m[32m        <div class="dialog-footer">[m
[32m+[m[32m          <el-button type="primary" @click="submitForm">ç¡® å®š</el-button>[m
[32m+[m[32m          <el-button @click="cancel">å– æ¶ˆ</el-button>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </template>[m
[32m+[m[32m    </el-dialog>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup name="Gpu">[m
[32m+[m[32mimport { listGpu, getGpu, delGpu, addGpu, updateGpu } from "@/api/system/gpu"[m
[32m+[m
[32m+[m[32mconst { proxy } = getCurrentInstance()[m
[32m+[m[32mconst { gpu_brand } = proxy.useDict('gpu_brand')[m
[32m+[m
[32m+[m[32mconst gpuList = ref([])[m
[32m+[m[32mconst open = ref(false)[m
[32m+[m[32mconst loading = ref(true)[m
[32m+[m[32mconst showSearch = ref(true)[m
[32m+[m[32mconst ids = ref([])[m
[32m+[m[32mconst single = ref(true)[m
[32m+[m[32mconst multiple = ref(true)[m
[32m+[m[32mconst total = ref(0)[m
[32m+[m[32mconst title = ref("")[m
[32m+[m
[32m+[m[32mconst data = reactive({[m
[32m+[m[32m  form: {},[m
[32m+[m[32m  queryParams: {[m
[32m+[m[32m    pageNum: 1,[m
[32m+[m[32m    pageSize: 10,[m
[32m+[m[32m    brand: null,[m
[32m+[m[32m    model: null,[m
[32m+[m[32m  },[m
[32m+[m[32m  rules: {[m
[32m+[m[32m    brand: [[m
[32m+[m[32m      { required: true, message: "å“ç‰Œä¸èƒ½ä¸ºç©º", trigger: "change" }[m
[32m+[m[32m    ],[m
[32m+[m[32m    model: [[m
[32m+[m[32m      { required: true, message: "å‹å·ä¸èƒ½ä¸ºç©º", trigger: "blur" }[m
[32m+[m[32m    ],[m
[32m+[m[32m    performanceScore: [[m
[32m+[m[32m      { required: true, message: "æ€§èƒ½è·‘åˆ†ä¸èƒ½ä¸ºç©º", trigger: "blur" }[m
[32m+[m[32m    ],[m
[32m+[m[32m    tdp: [[m
[32m+[m[32m      { required: true, message: "åŠŸè€—(W)ä¸èƒ½ä¸ºç©º", trigger: "blur" }[m
[32m+[m[32m    ],[m
[32m+[m[32m  }[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32mconst { queryParams, form, rules } = toRefs(data)[m
[32m+[m
[32m+[m[32m/** æŸ¥è¯¢æ˜¾å¡ç¡¬ä»¶åˆ—è¡¨ */[m
[32m+[m[32mfunction getList() {[m
[32m+[m[32m  loading.value = true[m
[32m+[m[32m  listGpu(queryParams.value).then(response => {[m
[32m+[m[32m    gpuList.value = response.rows[m
[32m+[m[32m    total.value = response.total[m
[32m+[m[32m    loading.value = false[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å–æ¶ˆæŒ‰é’®[m
[32m+[m[32mfunction cancel() {[m
[32m+[m[32m  open.value = false[m
[32m+[m[32m  reset()[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// è¡¨å•é‡ç½®[m
[32m+[m[32mfunction reset() {[m
[32m+[m[32m  form.value = {[m
[32m+[m[32m    id: null,[m
[32m+[m[32m    brand: null,[m
[32m+[m[32m    model: null,[m
[32m+[m[32m    performanceScore: null,[m
[32m+[m[32m    tdp: null,[m
[32m+[m[32m    createTime: null,[m
[32m+[m[32m    updateTime: null[m
[32m+[m[32m  }[m
[32m+[m[32m  proxy.resetForm("gpuRef")[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** æœç´¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleQuery() {[m
[32m+[m[32m  queryParams.value.pageNum = 1[m
[32m+[m[32m  getList()[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** é‡ç½®æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction resetQuery() {[m
[32m+[m[32m  proxy.resetForm("queryRef")[m
[32m+[m[32m  handleQuery()[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å¤šé€‰æ¡†é€‰ä¸­æ•°æ®[m
[32m+[m[32mfunction handleSelectionChange(selection) {[m
[32m+[m[32m  ids.value = selection.map(item => item.id)[m
[32m+[m[32m  single.value = selection.length != 1[m
[32m+[m[32m  multiple.value = !selection.length[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** æ–°å¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleAdd() {[m
[32m+[m[32m  reset()[m
[32m+[m[32m  open.value = true[m
[32m+[m[32m  title.value = "æ·»åŠ æ˜¾å¡ç¡¬ä»¶"[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** ä¿®æ”¹æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleUpdate(row) {[m
[32m+[m[32m  reset()[m
[32m+[m[32m  const _id = row.id || ids.value[m
[32m+[m[32m  getGpu(_id).then(response => {[m
[32m+[m[32m    form.value = response.data[m
[32m+[m[32m    open.value = true[m
[32m+[m[32m    title.value = "ä¿®æ”¹æ˜¾å¡ç¡¬ä»¶"[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** æäº¤æŒ‰é’® */[m
[32m+[m[32mfunction submitForm() {[m
[32m+[m[32m  proxy.$refs["gpuRef"].validate(valid => {[m
[32m+[m[32m    if (valid) {[m
[32m+[m[32m      if (form.value.id != null) {[m
[32m+[m[32m        updateGpu(form.value).then(response => {[m
[32m+[m[32m          proxy.$modal.msgSuccess("ä¿®æ”¹æˆåŠŸ")[m
[32m+[m[32m          open.value = false[m
[32m+[m[32m          getList()[m
[32m+[m[32m        })[m
[32m+[m[32m      } else {[m
[32m+[m[32m        addGpu(form.value).then(response => {[m
[32m+[m[32m          proxy.$modal.msgSuccess("æ–°å¢æˆåŠŸ")[m
[32m+[m[32m          open.value = false[m
[32m+[m[32m          getList()[m
[32m+[m[32m        })[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** åˆ é™¤æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleDelete(row) {[m
[32m+[m[32m  const _ids = row.id || ids.value[m
[32m+[m[32m  proxy.$modal.confirm('æ˜¯å¦ç¡®è®¤åˆ é™¤æ˜¾å¡ç¡¬ä»¶ç¼–å·ä¸º"' + _ids + '"çš„æ•°æ®é¡¹ï¼Ÿ').then(function() {[m
[32m+[m[32m    return delGpu(_ids)[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    getList()[m
[32m+[m[32m    proxy.$modal.msgSuccess("åˆ é™¤æˆåŠŸ")[m
[32m+[m[32m  }).catch(() => {})[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** å¯¼å‡ºæŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleExport() {[m
[32m+[m[32m  proxy.download('system/gpu/export', {[m
[32m+[m[32m    ...queryParams.value[m
[32m+[m[32m  }, `gpu_${new Date().getTime()}.xlsx`)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mgetList()[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/system/memory/index.vue b/src/views/system/memory/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..fafcac36[m
[1m--- /dev/null[m
[1m+++ b/src/views/system/memory/index.vue[m
[36m@@ -0,0 +1,263 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="app-container">[m
[32m+[m[32m    <el-form :model="queryParams" ref="queryRef" :inline="true" v-show="showSearch" label-width="68px">[m
[32m+[m[32m      <el-form-item label="æ¥å£ç±»å‹ï¼šDDR4, DDR5" prop="type">[m
[32m+[m[32m        <el-select v-model="queryParams.type" placeholder="è¯·é€‰æ‹©æ¥å£ç±»å‹ï¼šDDR4, DDR5" clearable>[m
[32m+[m[32m          <el-option[m
[32m+[m[32m            v-for="dict in motherboard_memory_type"[m
[32m+[m[32m            :key="dict.value"[m
[32m+[m[32m            :label="dict.label"[m
[32m+[m[32m            :value="dict.value"[m
[32m+[m[32m          />[m
[32m+[m[32m        </el-select>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item label="é¢‘ç‡(MHz)" prop="frequency">[m
[32m+[m[32m        <el-input[m
[32m+[m[32m          v-model="queryParams.frequency"[m
[32m+[m[32m          placeholder="è¯·è¾“å…¥é¢‘ç‡(MHz)"[m
[32m+[m[32m          clearable[m
[32m+[m[32m          @keyup.enter="handleQuery"[m
[32m+[m[32m        />[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item>[m
[32m+[m[32m        <el-button type="primary" icon="Search" @click="handleQuery">æœç´¢</el-button>[m
[32m+[m[32m        <el-button icon="Refresh" @click="resetQuery">é‡ç½®</el-button>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m    </el-form>[m
[32m+[m
[32m+[m[32m    <el-row :gutter="10" class="mb8">[m
[32m+[m[32m      <el-col :span="1.5">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="primary"[m
[32m+[m[32m          plain[m
[32m+[m[32m          icon="Plus"[m
[32m+[m[32m          @click="handleAdd"[m
[32m+[m[32m          v-hasPermi="['system:memory:add']"[m
[32m+[m[32m        >æ–°å¢</el-button>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <el-col :span="1.5">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="success"[m
[32m+[m[32m          plain[m
[32m+[m[32m          icon="Edit"[m
[32m+[m[32m          :disabled="single"[m
[32m+[m[32m          @click="handleUpdate"[m
[32m+[m[32m          v-hasPermi="['system:memory:edit']"[m
[32m+[m[32m        >ä¿®æ”¹</el-button>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <el-col :span="1.5">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="danger"[m
[32m+[m[32m          plain[m
[32m+[m[32m          icon="Delete"[m
[32m+[m[32m          :disabled="multiple"[m
[32m+[m[32m          @click="handleDelete"[m
[32m+[m[32m          v-hasPermi="['system:memory:remove']"[m
[32m+[m[32m        >åˆ é™¤</el-button>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <el-col :span="1.5">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="warning"[m
[32m+[m[32m          plain[m
[32m+[m[32m          icon="Download"[m
[32m+[m[32m          @click="handleExport"[m
[32m+[m[32m          v-hasPermi="['system:memory:export']"[m
[32m+[m[32m        >å¯¼å‡º</el-button>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <right-toolbar v-model:showSearch="showSearch" @queryTable="getList"></right-toolbar>[m
[32m+[m[32m    </el-row>[m
[32m+[m
[32m+[m[32m    <el-table v-loading="loading" :data="memoryList" @selection-change="handleSelectionChange">[m
[32m+[m[32m      <el-table-column type="selection" width="55" align="center" />[m
[32m+[m[32m      <el-table-column label="ID" align="center" prop="id" />[m
[32m+[m[32m      <el-table-column label="æ¥å£ç±»å‹ï¼šDDR4, DDR5" align="center" prop="type">[m
[32m+[m[32m        <template #default="scope">[m
[32m+[m[32m          <dict-tag :options="motherboard_memory_type" :value="scope.row.type"/>[m
[32m+[m[32m        </template>[m
[32m+[m[32m      </el-table-column>[m
[32m+[m[32m      <el-table-column label="é¢‘ç‡(MHz)" align="center" prop="frequency" />[m
[32m+[m[32m      <el-table-column label="æ“ä½œ" align="center" class-name="small-padding fixed-width">[m
[32m+[m[32m        <template #default="scope">[m
[32m+[m[32m          <el-button link type="primary" icon="Edit" @click="handleUpdate(scope.row)" v-hasPermi="['system:memory:edit']">ä¿®æ”¹</el-button>[m
[32m+[m[32m          <el-button link type="primary" icon="Delete" @click="handleDelete(scope.row)" v-hasPermi="['system:memory:remove']">åˆ é™¤</el-button>[m
[32m+[m[32m        </template>[m
[32m+[m[32m      </el-table-column>[m
[32m+[m[32m    </el-table>[m
[32m+[m[41m    [m
[32m+[m[32m    <pagination[m
[32m+[m[32m      v-show="total>0"[m
[32m+[m[32m      :total="total"[m
[32m+[m[32m      v-model:page="queryParams.pageNum"[m
[32m+[m[32m      v-model:limit="queryParams.pageSize"[m
[32m+[m[32m      @pagination="getList"[m
[32m+[m[32m    />[m
[32m+[m
[32m+[m[32m    <!-- æ·»åŠ æˆ–ä¿®æ”¹å†…å­˜è§„æ ¼å¯¹è¯æ¡† -->[m
[32m+[m[32m    <el-dialog :title="title" v-model="open" width="500px" append-to-body>[m
[32m+[m[32m      <el-form ref="memoryRef" :model="form" :rules="rules" label-width="80px">[m
[32m+[m[32m        <el-form-item label="æ¥å£ç±»å‹ï¼šDDR4, DDR5" prop="type">[m
[32m+[m[32m          <el-select v-model="form.type" placeholder="è¯·é€‰æ‹©æ¥å£ç±»å‹ï¼šDDR4, DDR5">[m
[32m+[m[32m            <el-option[m
[32m+[m[32m              v-for="dict in motherboard_memory_type"[m
[32m+[m[32m              :key="dict.value"[m
[32m+[m[32m              :label="dict.label"[m
[32m+[m[32m              :value="dict.value"[m
[32m+[m[32m            ></el-option>[m
[32m+[m[32m          </el-select>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="é¢‘ç‡(MHz)" prop="frequency">[m
[32m+[m[32m          <el-input v-model="form.frequency" placeholder="è¯·è¾“å…¥é¢‘ç‡(MHz)" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m      </el-form>[m
[32m+[m[32m      <template #footer>[m
[32m+[m[32m        <div class="dialog-footer">[m
[32m+[m[32m          <el-button type="primary" @click="submitForm">ç¡® å®š</el-button>[m
[32m+[m[32m          <el-button @click="cancel">å– æ¶ˆ</el-button>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </template>[m
[32m+[m[32m    </el-dialog>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup name="Memory">[m
[32m+[m[32mimport { listMemory, getMemory, delMemory, addMemory, updateMemory } from "@/api/system/memory"[m
[32m+[m
[32m+[m[32mconst { proxy } = getCurrentInstance()[m
[32m+[m[32mconst { motherboard_memory_type } = proxy.useDict('motherboard_memory_type')[m
[32m+[m
[32m+[m[32mconst memoryList = ref([])[m
[32m+[m[32mconst open = ref(false)[m
[32m+[m[32mconst loading = ref(true)[m
[32m+[m[32mconst showSearch = ref(true)[m
[32m+[m[32mconst ids = ref([])[m
[32m+[m[32mconst single = ref(true)[m
[32m+[m[32mconst multiple = ref(true)[m
[32m+[m[32mconst total = ref(0)[m
[32m+[m[32mconst title = ref("")[m
[32m+[m
[32m+[m[32mconst data = reactive({[m
[32m+[m[32m  form: {},[m
[32m+[m[32m  queryParams: {[m
[32m+[m[32m    pageNum: 1,[m
[32m+[m[32m    pageSize: 10,[m
[32m+[m[32m    type: null,[m
[32m+[m[32m    frequency: null,[m
[32m+[m[32m  },[m
[32m+[m[32m  rules: {[m
[32m+[m[32m    type: [[m
[32m+[m[32m      { required: true, message: "æ¥å£ç±»å‹ï¼šDDR4, DDR5ä¸èƒ½ä¸ºç©º", trigger: "change" }[m
[32m+[m[32m    ],[m
[32m+[m[32m    frequency: [[m
[32m+[m[32m      { required: true, message: "é¢‘ç‡(MHz)ä¸èƒ½ä¸ºç©º", trigger: "blur" }[m
[32m+[m[32m    ],[m
[32m+[m[32m  }[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32mconst { queryParams, form, rules } = toRefs(data)[m
[32m+[m
[32m+[m[32m/** æŸ¥è¯¢å†…å­˜è§„æ ¼åˆ—è¡¨ */[m
[32m+[m[32mfunction getList() {[m
[32m+[m[32m  loading.value = true[m
[32m+[m[32m  listMemory(queryParams.value).then(response => {[m
[32m+[m[32m    memoryList.value = response.rows[m
[32m+[m[32m    total.value = response.total[m
[32m+[m[32m    loading.value = false[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å–æ¶ˆæŒ‰é’®[m
[32m+[m[32mfunction cancel() {[m
[32m+[m[32m  open.value = false[m
[32m+[m[32m  reset()[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// è¡¨å•é‡ç½®[m
[32m+[m[32mfunction reset() {[m
[32m+[m[32m  form.value = {[m
[32m+[m[32m    id: null,[m
[32m+[m[32m    type: null,[m
[32m+[m[32m    frequency: null,[m
[32m+[m[32m    createTime: null,[m
[32m+[m[32m    updateTime: null[m
[32m+[m[32m  }[m
[32m+[m[32m  proxy.resetForm("memoryRef")[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** æœç´¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleQuery() {[m
[32m+[m[32m  queryParams.value.pageNum = 1[m
[32m+[m[32m  getList()[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** é‡ç½®æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction resetQuery() {[m
[32m+[m[32m  proxy.resetForm("queryRef")[m
[32m+[m[32m  handleQuery()[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å¤šé€‰æ¡†é€‰ä¸­æ•°æ®[m
[32m+[m[32mfunction handleSelectionChange(selection) {[m
[32m+[m[32m  ids.value = selection.map(item => item.id)[m
[32m+[m[32m  single.value = selection.length != 1[m
[32m+[m[32m  multiple.value = !selection.length[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** æ–°å¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleAdd() {[m
[32m+[m[32m  reset()[m
[32m+[m[32m  open.value = true[m
[32m+[m[32m  title.value = "æ·»åŠ å†…å­˜è§„æ ¼"[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** ä¿®æ”¹æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleUpdate(row) {[m
[32m+[m[32m  reset()[m
[32m+[m[32m  const _id = row.id || ids.value[m
[32m+[m[32m  getMemory(_id).then(response => {[m
[32m+[m[32m    form.value = response.data[m
[32m+[m[32m    open.value = true[m
[32m+[m[32m    title.value = "ä¿®æ”¹å†…å­˜è§„æ ¼"[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** æäº¤æŒ‰é’® */[m
[32m+[m[32mfunction submitForm() {[m
[32m+[m[32m  proxy.$refs["memoryRef"].validate(valid => {[m
[32m+[m[32m    if (valid) {[m
[32m+[m[32m      if (form.value.id != null) {[m
[32m+[m[32m        updateMemory(form.value).then(response => {[m
[32m+[m[32m          proxy.$modal.msgSuccess("ä¿®æ”¹æˆåŠŸ")[m
[32m+[m[32m          open.value = false[m
[32m+[m[32m          getList()[m
[32m+[m[32m        })[m
[32m+[m[32m      } else {[m
[32m+[m[32m        addMemory(form.value).then(response => {[m
[32m+[m[32m          proxy.$modal.msgSuccess("æ–°å¢æˆåŠŸ")[m
[32m+[m[32m          open.value = false[m
[32m+[m[32m          getList()[m
[32m+[m[32m        })[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** åˆ é™¤æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleDelete(row) {[m
[32m+[m[32m  const _ids = row.id || ids.value[m
[32m+[m[32m  proxy.$modal.confirm('æ˜¯å¦ç¡®è®¤åˆ é™¤å†…å­˜è§„æ ¼ç¼–å·ä¸º"' + _ids + '"çš„æ•°æ®é¡¹ï¼Ÿ').then(function() {[m
[32m+[m[32m    return delMemory(_ids)[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    getList()[m
[32m+[m[32m    proxy.$modal.msgSuccess("åˆ é™¤æˆåŠŸ")[m
[32m+[m[32m  }).catch(() => {})[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** å¯¼å‡ºæŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleExport() {[m
[32m+[m[32m  proxy.download('system/memory/export', {[m
[32m+[m[32m    ...queryParams.value[m
[32m+[m[32m  }, `memory_${new Date().getTime()}.xlsx`)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mgetList()[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/system/menu/index.vue b/src/views/system/menu/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..bb486e90[m
[1m--- /dev/null[m
[1m+++ b/src/views/system/menu/index.vue[m
[36m@@ -0,0 +1,427 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m   <div class="app-container">[m
[32m+[m[32m      <el-form :model="queryParams" ref="queryRef" :inline="true" v-show="showSearch">[m
[32m+[m[32m         <el-form-item label="èœå•åç§°" prop="menuName">[m
[32m+[m[32m            <el-input[m
[32m+[m[32m               v-model="queryParams.menuName"[m
[32m+[m[32m               placeholder="è¯·è¾“å…¥èœå•åç§°"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 200px"[m
[32m+[m[32m               @keyup.enter="handleQuery"[m
[32m+[m[32m            />[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="çŠ¶æ€" prop="status">[m
[32m+[m[32m            <el-select v-model="queryParams.status" placeholder="èœå•çŠ¶æ€" clearable style="width: 200px">[m
[32m+[m[32m               <el-option[m
[32m+[m[32m                  v-for="dict in sys_normal_disable"[m
[32m+[m[32m                  :key="dict.value"[m
[32m+[m[32m                  :label="dict.label"[m
[32m+[m[32m                  :value="dict.value"[m
[32m+[m[32m               />[m
[32m+[m[32m            </el-select>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item>[m
[32m+[m[32m            <el-button type="primary" icon="Search" @click="handleQuery">æœç´¢</el-button>[m
[32m+[m[32m            <el-button icon="Refresh" @click="resetQuery">é‡ç½®</el-button>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m      </el-form>[m
[32m+[m
[32m+[m[32m      <el-row :gutter="10" class="mb8">[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="primary"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Plus"[m
[32m+[m[32m               @click="handleAdd"[m
[32m+[m[32m               v-hasPermi="['system:menu:add']"[m
[32m+[m[32m            >æ–°å¢</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m[41m [m
[32m+[m[32m               type="info"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Sort"[m
[32m+[m[32m               @click="toggleExpandAll"[m
[32m+[m[32m            >å±•å¼€/æŠ˜å </el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <right-toolbar v-model:showSearch="showSearch" @queryTable="getList"></right-toolbar>[m
[32m+[m[32m      </el-row>[m
[32m+[m
[32m+[m[32m      <el-table[m
[32m+[m[32m         v-if="refreshTable"[m
[32m+[m[32m         v-loading="loading"[m
[32m+[m[32m         :data="menuList"[m
[32m+[m[32m         row-key="menuId"[m
[32m+[m[32m         :default-expand-all="isExpandAll"[m
[32m+[m[32m         :tree-props="{ children: 'children', hasChildren: 'hasChildren' }"[m
[32m+[m[32m      >[m
[32m+[m[32m         <el-table-column prop="menuName" label="èœå•åç§°" :show-overflow-tooltip="true" width="160"></el-table-column>[m
[32m+[m[32m         <el-table-column prop="icon" label="å›¾æ ‡" align="center" width="100">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <svg-icon :icon-class="scope.row.icon" />[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column prop="orderNum" label="æ’åº" width="60"></el-table-column>[m
[32m+[m[32m         <el-table-column prop="perms" label="æƒé™æ ‡è¯†" :show-overflow-tooltip="true"></el-table-column>[m
[32m+[m[32m         <el-table-column prop="component" label="ç»„ä»¶è·¯å¾„" :show-overflow-tooltip="true"></el-table-column>[m
[32m+[m[32m         <el-table-column prop="status" label="çŠ¶æ€" width="80">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <dict-tag :options="sys_normal_disable" :value="scope.row.status" />[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="åˆ›å»ºæ—¶é—´" align="center" width="160" prop="createTime">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <span>{{ parseTime(scope.row.createTime) }}</span>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="æ“ä½œ" align="center" width="210" class-name="small-padding fixed-width">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <el-button link type="primary" icon="Edit" @click="handleUpdate(scope.row)" v-hasPermi="['system:menu:edit']">ä¿®æ”¹</el-button>[m
[32m+[m[32m               <el-button link type="primary" icon="Plus" @click="handleAdd(scope.row)" v-hasPermi="['system:menu:add']">æ–°å¢</el-button>[m
[32m+[m[32m               <el-button link type="primary" icon="Delete" @click="handleDelete(scope.row)" v-hasPermi="['system:menu:remove']">åˆ é™¤</el-button>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m      </el-table>[m
[32m+[m
[32m+[m[32m      <!-- æ·»åŠ æˆ–ä¿®æ”¹èœå•å¯¹è¯æ¡† -->[m
[32m+[m[32m      <el-dialog :title="title" v-model="open" width="680px" append-to-body>[m
[32m+[m[32m         <el-form ref="menuRef" :model="form" :rules="rules" label-width="100px">[m
[32m+[m[32m            <el-row>[m
[32m+[m[32m               <el-col :span="24">[m
[32m+[m[32m                  <el-form-item label="ä¸Šçº§èœå•">[m
[32m+[m[32m                     <el-tree-select[m
[32m+[m[32m                        v-model="form.parentId"[m
[32m+[m[32m                        :data="menuOptions"[m
[32m+[m[32m                        :props="{ value: 'menuId', label: 'menuName', children: 'children' }"[m
[32m+[m[32m                        value-key="menuId"[m
[32m+[m[32m                        placeholder="é€‰æ‹©ä¸Šçº§èœå•"[m
[32m+[m[32m                        check-strictly[m
[32m+[m[32m                     />[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="24">[m
[32m+[m[32m                  <el-form-item label="èœå•ç±»å‹" prop="menuType">[m
[32m+[m[32m                     <el-radio-group v-model="form.menuType">[m
[32m+[m[32m                        <el-radio label="M">ç›®å½•</el-radio>[m
[32m+[m[32m                        <el-radio label="C">èœå•</el-radio>[m
[32m+[m[32m                        <el-radio label="F">æŒ‰é’®</el-radio>[m
[32m+[m[32m                     </el-radio-group>[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="24" v-if="form.menuType != 'F'">[m
[32m+[m[32m                  <el-form-item label="èœå•å›¾æ ‡" prop="icon">[m
[32m+[m[32m                     <el-popover[m
[32m+[m[32m                        placement="bottom-start"[m
[32m+[m[32m                        :width="540"[m
[32m+[m[32m                        trigger="click"[m
[32m+[m[32m                     >[m
[32m+[m[32m                        <template #reference>[m
[32m+[m[32m                           <el-input v-model="form.icon" placeholder="ç‚¹å‡»é€‰æ‹©å›¾æ ‡" @blur="showSelectIcon" readonly>[m
[32m+[m[32m                              <template #prefix>[m
[32m+[m[32m                                 <svg-icon[m
[32m+[m[32m                                    v-if="form.icon"[m
[32m+[m[32m                                    :icon-class="form.icon"[m
[32m+[m[32m                                    class="el-input__icon"[m
[32m+[m[32m                                    style="height: 32px;width: 16px;"[m
[32m+[m[32m                                 />[m
[32m+[m[32m                                 <el-icon v-else style="height: 32px;width: 16px;"><search /></el-icon>[m
[32m+[m[32m                              </template>[m
[32m+[m[32m                           </el-input>[m
[32m+[m[32m                        </template>[m
[32m+[m[32m                        <icon-select ref="iconSelectRef" @selected="selected" :active-icon="form.icon" />[m
[32m+[m[32m                     </el-popover>[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="èœå•åç§°" prop="menuName">[m
[32m+[m[32m                     <el-input v-model="form.menuName" placeholder="è¯·è¾“å…¥èœå•åç§°" />[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="æ˜¾ç¤ºæ’åº" prop="orderNum">[m
[32m+[m[32m                     <el-input-number v-model="form.orderNum" controls-position="right" :min="0" />[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12" v-if="form.menuType != 'F'">[m
[32m+[m[32m                  <el-form-item>[m
[32m+[m[32m                     <template #label>[m
[32m+[m[32m                        <span>[m
[32m+[m[32m                           <el-tooltip content="é€‰æ‹©æ˜¯å¤–é“¾åˆ™è·¯ç”±åœ°å€éœ€è¦ä»¥`http(s)://`å¼€å¤´" placement="top">[m
[32m+[m[32m                              <el-icon><question-filled /></el-icon>[m
[32m+[m[32m                           </el-tooltip>æ˜¯å¦å¤–é“¾[m
[32m+[m[32m                        </span>[m
[32m+[m[32m                     </template>[m
[32m+[m[32m                     <el-radio-group v-model="form.isFrame">[m
[32m+[m[32m                        <el-radio label="0">æ˜¯</el-radio>[m
[32m+[m[32m                        <el-radio label="1">å¦</el-radio>[m
[32m+[m[32m                     </el-radio-group>[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12" v-if="form.menuType != 'F'">[m
[32m+[m[32m                  <el-form-item prop="path">[m
[32m+[m[32m                     <template #label>[m
[32m+[m[32m                        <span>[m
[32m+[m[32m                           <el-tooltip content="è®¿é—®çš„è·¯ç”±åœ°å€ï¼Œå¦‚ï¼š`user`ï¼Œå¦‚å¤–ç½‘åœ°å€éœ€å†…é“¾è®¿é—®åˆ™ä»¥`http(s)://`å¼€å¤´" placement="top">[m
[32m+[m[32m                              <el-icon><question-filled /></el-icon>[m
[32m+[m[32m                           </el-tooltip>[m
[32m+[m[32m                           è·¯ç”±åœ°å€[m
[32m+[m[32m                        </span>[m
[32m+[m[32m                     </template>[m
[32m+[m[32m                     <el-input v-model="form.path" placeholder="è¯·è¾“å…¥è·¯ç”±åœ°å€" />[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12" v-if="form.menuType == 'C'">[m
[32m+[m[32m                  <el-form-item prop="component">[m
[32m+[m[32m                     <template #label>[m
[32m+[m[32m                        <span>[m
[32m+[m[32m                           <el-tooltip content="è®¿é—®çš„ç»„ä»¶è·¯å¾„ï¼Œå¦‚ï¼š`system/user/index`ï¼Œé»˜è®¤åœ¨`views`ç›®å½•ä¸‹" placement="top">[m
[32m+[m[32m                              <el-icon><question-filled /></el-icon>[m
[32m+[m[32m                           </el-tooltip>[m
[32m+[m[32m                           ç»„ä»¶è·¯å¾„[m
[32m+[m[32m                        </span>[m
[32m+[m[32m                     </template>[m
[32m+[m[32m                     <el-input v-model="form.component" placeholder="è¯·è¾“å…¥ç»„ä»¶è·¯å¾„" />[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12" v-if="form.menuType != 'M'">[m
[32m+[m[32m                  <el-form-item>[m
[32m+[m[32m                     <el-input v-model="form.perms" placeholder="è¯·è¾“å…¥æƒé™æ ‡è¯†" maxlength="100" />[m
[32m+[m[32m                     <template #label>[m
[32m+[m[32m                        <span>[m
[32m+[m[32m                           <el-tooltip content="æ§åˆ¶å™¨ä¸­å®šä¹‰çš„æƒé™å­—ç¬¦ï¼Œå¦‚ï¼š@PreAuthorize(`@ss.hasPermi('system:user:list')`)" placement="top">[m
[32m+[m[32m                              <el-icon><question-filled /></el-icon>[m
[32m+[m[32m                           </el-tooltip>[m
[32m+[m[32m                           æƒé™å­—ç¬¦[m
[32m+[m[32m                        </span>[m
[32m+[m[32m                     </template>[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12" v-if="form.menuType == 'C'">[m
[32m+[m[32m                  <el-form-item>[m
[32m+[m[32m                     <el-input v-model="form.query" placeholder="è¯·è¾“å…¥è·¯ç”±å‚æ•°" maxlength="255" />[m
[32m+[m[32m                     <template #label>[m
[32m+[m[32m                        <span>[m
[32m+[m[32m                           <el-tooltip content='è®¿é—®è·¯ç”±çš„é»˜è®¤ä¼ é€’å‚æ•°ï¼Œå¦‚ï¼š`{"id": 1, "name": "ry"}`' placement="top">[m
[32m+[m[32m                              <el-icon><question-filled /></el-icon>[m
[32m+[m[32m                           </el-tooltip>[m
[32m+[m[32m                           è·¯ç”±å‚æ•°[m
[32m+[m[32m                        </span>[m
[32m+[m[32m                     </template>[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12" v-if="form.menuType == 'C'">[m
[32m+[m[32m                  <el-form-item>[m
[32m+[m[32m                     <template #label>[m
[32m+[m[32m                        <span>[m
[32m+[m[32m                           <el-tooltip content="é€‰æ‹©æ˜¯åˆ™ä¼šè¢«`keep-alive`ç¼“å­˜ï¼Œéœ€è¦åŒ¹é…ç»„ä»¶çš„`name`å’Œåœ°å€ä¿æŒä¸€è‡´" placement="top">[m
[32m+[m[32m                              <el-icon><question-filled /></el-icon>[m
[32m+[m[32m                           </el-tooltip>[m
[32m+[m[32m                           æ˜¯å¦ç¼“å­˜[m
[32m+[m[32m                        </span>[m
[32m+[m[32m                     </template>[m
[32m+[m[32m                     <el-radio-group v-model="form.isCache">[m
[32m+[m[32m                        <el-radio label="0">ç¼“å­˜</el-radio>[m
[32m+[m[32m                        <el-radio label="1">ä¸ç¼“å­˜</el-radio>[m
[32m+[m[32m                     </el-radio-group>[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12" v-if="form.menuType != 'F'">[m
[32m+[m[32m                  <el-form-item>[m
[32m+[m[32m                     <template #label>[m
[32m+[m[32m                        <span>[m
[32m+[m[32m                           <el-tooltip content="é€‰æ‹©éšè—åˆ™è·¯ç”±å°†ä¸ä¼šå‡ºç°åœ¨ä¾§è¾¹æ ï¼Œä½†ä»ç„¶å¯ä»¥è®¿é—®" placement="top">[m
[32m+[m[32m                              <el-icon><question-filled /></el-icon>[m
[32m+[m[32m                           </el-tooltip>[m
[32m+[m[32m                           æ˜¾ç¤ºçŠ¶æ€[m
[32m+[m[32m                        </span>[m
[32m+[m[32m                     </template>[m
[32m+[m[32m                     <el-radio-group v-model="form.visible">[m
[32m+[m[32m                        <el-radio[m
[32m+[m[32m                           v-for="dict in sys_show_hide"[m
[32m+[m[32m                           :key="dict.value"[m
[32m+[m[32m                           :label="dict.value"[m
[32m+[m[32m                        >{{ dict.label }}</el-radio>[m
[32m+[m[32m                     </el-radio-group>[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item>[m
[32m+[m[32m                     <template #label>[m
[32m+[m[32m                        <span>[m
[32m+[m[32m                           <el-tooltip content="é€‰æ‹©åœç”¨åˆ™è·¯ç”±å°†ä¸ä¼šå‡ºç°åœ¨ä¾§è¾¹æ ï¼Œä¹Ÿä¸èƒ½è¢«è®¿é—®" placement="top">[m
[32m+[m[32m                              <el-icon><question-filled /></el-icon>[m
[32m+[m[32m                           </el-tooltip>[m
[32m+[m[32m                           èœå•çŠ¶æ€[m
[32m+[m[32m                        </span>[m
[32m+[m[32m                     </template>[m
[32m+[m[32m                     <el-radio-group v-model="form.status">[m
[32m+[m[32m                        <el-radio[m
[32m+[m[32m                           v-for="dict in sys_normal_disable"[m
[32m+[m[32m                           :key="dict.value"[m
[32m+[m[32m                           :label="dict.value"[m
[32m+[m[32m                        >{{ dict.label }}</el-radio>[m
[32m+[m[32m                     </el-radio-group>[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m            </el-row>[m
[32m+[m[32m         </el-form>[m
[32m+[m[32m         <template #footer>[m
[32m+[m[32m            <div class="dialog-footer">[m
[32m+[m[32m               <el-button type="primary" @click="submitForm">ç¡® å®š</el-button>[m
[32m+[m[32m               <el-button @click="cancel">å– æ¶ˆ</el-button>[m
[32m+[m[32m            </div>[m
[32m+[m[32m         </template>[m
[32m+[m[32m      </el-dialog>[m
[32m+[m[32m   </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup name="Menu">[m
[32m+[m[32mimport { addMenu, delMenu, getMenu, listMenu, updateMenu } from "@/api/system/menu";[m
[32m+[m[32mimport SvgIcon from "@/components/SvgIcon";[m
[32m+[m[32mimport IconSelect from "@/components/IconSelect";[m
[32m+[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m[32mconst { sys_show_hide, sys_normal_disable } = proxy.useDict("sys_show_hide", "sys_normal_disable");[m
[32m+[m
[32m+[m[32mconst menuList = ref([]);[m
[32m+[m[32mconst open = ref(false);[m
[32m+[m[32mconst loading = ref(true);[m
[32m+[m[32mconst showSearch = ref(true);[m
[32m+[m[32mconst title = ref("");[m
[32m+[m[32mconst menuOptions = ref([]);[m
[32m+[m[32mconst isExpandAll = ref(false);[m
[32m+[m[32mconst refreshTable = ref(true);[m
[32m+[m[32mconst iconSelectRef = ref(null);[m
[32m+[m
[32m+[m[32mconst data = reactive({[m
[32m+[m[32m  form: {},[m
[32m+[m[32m  queryParams: {[m
[32m+[m[32m    menuName: undefined,[m
[32m+[m[32m    visible: undefined[m
[32m+[m[32m  },[m
[32m+[m[32m  rules: {[m
[32m+[m[32m    menuName: [{ required: true, message: "èœå•åç§°ä¸èƒ½ä¸ºç©º", trigger: "blur" }],[m
[32m+[m[32m    orderNum: [{ required: true, message: "èœå•é¡ºåºä¸èƒ½ä¸ºç©º", trigger: "blur" }],[m
[32m+[m[32m    path: [{ required: true, message: "è·¯ç”±åœ°å€ä¸èƒ½ä¸ºç©º", trigger: "blur" }][m
[32m+[m[32m  },[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst { queryParams, form, rules } = toRefs(data);[m
[32m+[m
[32m+[m[32m/** æŸ¥è¯¢èœå•åˆ—è¡¨ */[m
[32m+[m[32mfunction getList() {[m
[32m+[m[32m  loading.value = true;[m
[32m+[m[32m  listMenu(queryParams.value).then(response => {[m
[32m+[m[32m    menuList.value = proxy.handleTree(response.data, "menuId");[m
[32m+[m[32m    loading.value = false;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** æŸ¥è¯¢èœå•ä¸‹æ‹‰æ ‘ç»“æ„ */[m
[32m+[m[32mfunction getTreeselect() {[m
[32m+[m[32m  menuOptions.value = [];[m
[32m+[m[32m  listMenu().then(response => {[m
[32m+[m[32m    const menu = { menuId: 0, menuName: "ä¸»ç±»ç›®", children: [] };[m
[32m+[m[32m    menu.children = proxy.handleTree(response.data, "menuId");[m
[32m+[m[32m    menuOptions.value.push(menu);[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** å–æ¶ˆæŒ‰é’® */[m
[32m+[m[32mfunction cancel() {[m
[32m+[m[32m  open.value = false;[m
[32m+[m[32m  reset();[m
[32m+[m[32m}[m
[32m+[m[32m/** è¡¨å•é‡ç½® */[m
[32m+[m[32mfunction reset() {[m
[32m+[m[32m  form.value = {[m
[32m+[m[32m    menuId: undefined,[m
[32m+[m[32m    parentId: 0,[m
[32m+[m[32m    menuName: undefined,[m
[32m+[m[32m    icon: undefined,[m
[32m+[m[32m    menuType: "M",[m
[32m+[m[32m    orderNum: undefined,[m
[32m+[m[32m    isFrame: "1",[m
[32m+[m[32m    isCache: "0",[m
[32m+[m[32m    visible: "0",[m
[32m+[m[32m    status: "0"[m
[32m+[m[32m  };[m
[32m+[m[32m  proxy.resetForm("menuRef");[m
[32m+[m[32m}[m
[32m+[m[32m/** å±•ç¤ºä¸‹æ‹‰å›¾æ ‡ */[m
[32m+[m[32mfunction showSelectIcon() {[m
[32m+[m[32m  iconSelectRef.value.reset();[m
[32m+[m[32m}[m
[32m+[m[32m/** é€‰æ‹©å›¾æ ‡ */[m
[32m+[m[32mfunction selected(name) {[m
[32m+[m[32m  form.value.icon = name;[m
[32m+[m[32m}[m
[32m+[m[32m/** æœç´¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleQuery() {[m
[32m+[m[32m  getList();[m
[32m+[m[32m}[m
[32m+[m[32m/** é‡ç½®æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction resetQuery() {[m
[32m+[m[32m  proxy.resetForm("queryRef");[m
[32m+[m[32m  handleQuery();[m
[32m+[m[32m}[m
[32m+[m[32m/** æ–°å¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleAdd(row) {[m
[32m+[m[32m  reset();[m
[32m+[m[32m  getTreeselect();[m
[32m+[m[32m  if (row != null && row.menuId) {[m
[32m+[m[32m    form.value.parentId = row.menuId;[m
[32m+[m[32m  } else {[m
[32m+[m[32m    form.value.parentId = 0;[m
[32m+[m[32m  }[m
[32m+[m[32m  open.value = true;[m
[32m+[m[32m  title.value = "æ·»åŠ èœå•";[m
[32m+[m[32m}[m
[32m+[m[32m/** å±•å¼€/æŠ˜å æ“ä½œ */[m
[32m+[m[32mfunction toggleExpandAll() {[m
[32m+[m[32m  refreshTable.value = false;[m
[32m+[m[32m  isExpandAll.value = !isExpandAll.value;[m
[32m+[m[32m  nextTick(() => {[m
[32m+[m[32m    refreshTable.value = true;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** ä¿®æ”¹æŒ‰é’®æ“ä½œ */[m
[32m+[m[32masync function handleUpdate(row) {[m
[32m+[m[32m  reset();[m
[32m+[m[32m  await getTreeselect();[m
[32m+[m[32m  getMenu(row.menuId).then(response => {[m
[32m+[m[32m    form.value = response.data;[m
[32m+[m[32m    open.value = true;[m
[32m+[m[32m    title.value = "ä¿®æ”¹èœå•";[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** æäº¤æŒ‰é’® */[m
[32m+[m[32mfunction submitForm() {[m
[32m+[m[32m  proxy.$refs["menuRef"].validate(valid => {[m
[32m+[m[32m    if (valid) {[m
[32m+[m[32m      if (form.value.menuId != undefined) {[m
[32m+[m[32m        updateMenu(form.value).then(response => {[m
[32m+[m[32m          proxy.$modal.msgSuccess("ä¿®æ”¹æˆåŠŸ");[m
[32m+[m[32m          open.value = false;[m
[32m+[m[32m          getList();[m
[32m+[m[32m        });[m
[32m+[m[32m      } else {[m
[32m+[m[32m        addMenu(form.value).then(response => {[m
[32m+[m[32m          proxy.$modal.msgSuccess("æ–°å¢æˆåŠŸ");[m
[32m+[m[32m          open.value = false;[m
[32m+[m[32m          getList();[m
[32m+[m[32m        });[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** åˆ é™¤æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleDelete(row) {[m
[32m+[m[32m  proxy.$modal.confirm('æ˜¯å¦ç¡®è®¤åˆ é™¤åç§°ä¸º"' + row.menuName + '"çš„æ•°æ®é¡¹?').then(function() {[m
[32m+[m[32m    return delMenu(row.menuId);[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    getList();[m
[32m+[m[32m    proxy.$modal.msgSuccess("åˆ é™¤æˆåŠŸ");[m
[32m+[m[32m  }).catch(() => {});[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mgetList();[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/system/motherboard/index.vue b/src/views/system/motherboard/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..7a4d8426[m
[1m--- /dev/null[m
[1m+++ b/src/views/system/motherboard/index.vue[m
[36m@@ -0,0 +1,298 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="app-container">[m
[32m+[m[32m    <el-form :model="queryParams" ref="queryRef" :inline="true" v-show="showSearch" label-width="68px">[m
[32m+[m[32m      <el-form-item label="CPUæ¥å£" prop="socketType">[m
[32m+[m[32m        <el-select v-model="queryParams.socketType" placeholder="è¯·é€‰æ‹©CPUæ¥å£" clearable>[m
[32m+[m[32m          <el-option[m
[32m+[m[32m            v-for="dict in cpu_socket_type"[m
[32m+[m[32m            :key="dict.value"[m
[32m+[m[32m            :label="dict.label"[m
[32m+[m[32m            :value="dict.value"[m
[32m+[m[32m          />[m
[32m+[m[32m        </el-select>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item label="å†…å­˜æ¥å£" prop="memoryType">[m
[32m+[m[32m        <el-select v-model="queryParams.memoryType" placeholder="è¯·é€‰æ‹©å†…å­˜æ¥å£" clearable>[m
[32m+[m[32m          <el-option[m
[32m+[m[32m            v-for="dict in motherboard_memory_type"[m
[32m+[m[32m            :key="dict.value"[m
[32m+[m[32m            :label="dict.label"[m
[32m+[m[32m            :value="dict.value"[m
[32m+[m[32m          />[m
[32m+[m[32m        </el-select>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item label="èŠ¯ç‰‡ç»„" prop="chipset">[m
[32m+[m[32m        <el-input[m
[32m+[m[32m          v-model="queryParams.chipset"[m
[32m+[m[32m          placeholder="è¯·è¾“å…¥èŠ¯ç‰‡ç»„"[m
[32m+[m[32m          clearable[m
[32m+[m[32m          @keyup.enter="handleQuery"[m
[32m+[m[32m        />[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item>[m
[32m+[m[32m        <el-button type="primary" icon="Search" @click="handleQuery">æœç´¢</el-button>[m
[32m+[m[32m        <el-button icon="Refresh" @click="resetQuery">é‡ç½®</el-button>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m    </el-form>[m
[32m+[m
[32m+[m[32m    <el-row :gutter="10" class="mb8">[m
[32m+[m[32m      <el-col :span="1.5">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="primary"[m
[32m+[m[32m          plain[m
[32m+[m[32m          icon="Plus"[m
[32m+[m[32m          @click="handleAdd"[m
[32m+[m[32m          v-hasPermi="['system:motherboard:add']"[m
[32m+[m[32m        >æ–°å¢</el-button>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <el-col :span="1.5">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="success"[m
[32m+[m[32m          plain[m
[32m+[m[32m          icon="Edit"[m
[32m+[m[32m          :disabled="single"[m
[32m+[m[32m          @click="handleUpdate"[m
[32m+[m[32m          v-hasPermi="['system:motherboard:edit']"[m
[32m+[m[32m        >ä¿®æ”¹</el-button>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <el-col :span="1.5">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="danger"[m
[32m+[m[32m          plain[m
[32m+[m[32m          icon="Delete"[m
[32m+[m[32m          :disabled="multiple"[m
[32m+[m[32m          @click="handleDelete"[m
[32m+[m[32m          v-hasPermi="['system:motherboard:remove']"[m
[32m+[m[32m        >åˆ é™¤</el-button>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <el-col :span="1.5">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="warning"[m
[32m+[m[32m          plain[m
[32m+[m[32m          icon="Download"[m
[32m+[m[32m          @click="handleExport"[m
[32m+[m[32m          v-hasPermi="['system:motherboard:export']"[m
[32m+[m[32m        >å¯¼å‡º</el-button>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <right-toolbar v-model:showSearch="showSearch" @queryTable="getList"></right-toolbar>[m
[32m+[m[32m    </el-row>[m
[32m+[m
[32m+[m[32m    <el-table v-loading="loading" :data="motherboardList" @selection-change="handleSelectionChange">[m
[32m+[m[32m      <el-table-column type="selection" width="55" align="center" />[m
[32m+[m[32m      <el-table-column label="${comment}" align="center" prop="id" />[m
[32m+[m[32m      <el-table-column label="CPUæ¥å£" align="center" prop="socketType">[m
[32m+[m[32m        <template #default="scope">[m
[32m+[m[32m          <dict-tag :options="cpu_socket_type" :value="scope.row.socketType"/>[m
[32m+[m[32m        </template>[m
[32m+[m[32m      </el-table-column>[m
[32m+[m[32m      <el-table-column label="å†…å­˜æ¥å£" align="center" prop="memoryType">[m
[32m+[m[32m        <template #default="scope">[m
[32m+[m[32m          <dict-tag :options="motherboard_memory_type" :value="scope.row.memoryType"/>[m
[32m+[m[32m        </template>[m
[32m+[m[32m      </el-table-column>[m
[32m+[m[32m      <el-table-column label="åŠŸè€—(W)" align="center" prop="maxCpuPower" />[m
[32m+[m[32m      <el-table-column label="èŠ¯ç‰‡ç»„" align="center" prop="chipset" />[m
[32m+[m[32m      <el-table-column label="æ“ä½œ" align="center" class-name="small-padding fixed-width">[m
[32m+[m[32m        <template #default="scope">[m
[32m+[m[32m          <el-button link type="primary" icon="Edit" @click="handleUpdate(scope.row)" v-hasPermi="['system:motherboard:edit']">ä¿®æ”¹</el-button>[m
[32m+[m[32m          <el-button link type="primary" icon="Delete" @click="handleDelete(scope.row)" v-hasPermi="['system:motherboard:remove']">åˆ é™¤</el-button>[m
[32m+[m[32m        </template>[m
[32m+[m[32m      </el-table-column>[m
[32m+[m[32m    </el-table>[m
[32m+[m[41m    [m
[32m+[m[32m    <pagination[m
[32m+[m[32m      v-show="total>0"[m
[32m+[m[32m      :total="total"[m
[32m+[m[32m      v-model:page="queryParams.pageNum"[m
[32m+[m[32m      v-model:limit="queryParams.pageSize"[m
[32m+[m[32m      @pagination="getList"[m
[32m+[m[32m    />[m
[32m+[m
[32m+[m[32m    <!-- æ·»åŠ æˆ–ä¿®æ”¹ä¸»æ¿è§„æ ¼å¯¹è¯æ¡† -->[m
[32m+[m[32m    <el-dialog :title="title" v-model="open" width="500px" append-to-body>[m
[32m+[m[32m      <el-form ref="motherboardRef" :model="form" :rules="rules" label-width="80px">[m
[32m+[m[32m        <el-form-item label="CPUæ¥å£" prop="socketType">[m
[32m+[m[32m          <el-select v-model="form.socketType" placeholder="è¯·é€‰æ‹©CPUæ¥å£">[m
[32m+[m[32m            <el-option[m
[32m+[m[32m              v-for="dict in cpu_socket_type"[m
[32m+[m[32m              :key="dict.value"[m
[32m+[m[32m              :label="dict.label"[m
[32m+[m[32m              :value="dict.value"[m
[32m+[m[32m            ></el-option>[m
[32m+[m[32m          </el-select>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="å†…å­˜æ¥å£" prop="memoryType">[m
[32m+[m[32m          <el-select v-model="form.memoryType" placeholder="è¯·é€‰æ‹©å†…å­˜æ¥å£">[m
[32m+[m[32m            <el-option[m
[32m+[m[32m              v-for="dict in motherboard_memory_type"[m
[32m+[m[32m              :key="dict.value"[m
[32m+[m[32m              :label="dict.label"[m
[32m+[m[32m              :value="dict.value"[m
[32m+[m[32m            ></el-option>[m
[32m+[m[32m          </el-select>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="åŠŸè€—(W)" prop="maxCpuPower">[m
[32m+[m[32m          <el-input v-model="form.maxCpuPower" placeholder="è¯·è¾“å…¥åŠŸè€—(W)" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="èŠ¯ç‰‡ç»„" prop="chipset">[m
[32m+[m[32m          <el-input v-model="form.chipset" placeholder="è¯·è¾“å…¥èŠ¯ç‰‡ç»„" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m      </el-form>[m
[32m+[m[32m      <template #footer>[m
[32m+[m[32m        <div class="dialog-footer">[m
[32m+[m[32m          <el-button type="primary" @click="submitForm">ç¡® å®š</el-button>[m
[32m+[m[32m          <el-button @click="cancel">å– æ¶ˆ</el-button>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </template>[m
[32m+[m[32m    </el-dialog>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup name="Motherboard">[m
[32m+[m[32mimport { listMotherboard, getMotherboard, delMotherboard, addMotherboard, updateMotherboard } from "@/api/system/motherboard"[m
[32m+[m
[32m+[m[32mconst { proxy } = getCurrentInstance()[m
[32m+[m[32mconst { cpu_socket_type, motherboard_memory_type } = proxy.useDict('cpu_socket_type', 'motherboard_memory_type')[m
[32m+[m
[32m+[m[32mconst motherboardList = ref([])[m
[32m+[m[32mconst open = ref(false)[m
[32m+[m[32mconst loading = ref(true)[m
[32m+[m[32mconst showSearch = ref(true)[m
[32m+[m[32mconst ids = ref([])[m
[32m+[m[32mconst single = ref(true)[m
[32m+[m[32mconst multiple = ref(true)[m
[32m+[m[32mconst total = ref(0)[m
[32m+[m[32mconst title = ref("")[m
[32m+[m
[32m+[m[32mconst data = reactive({[m
[32m+[m[32m  form: {},[m
[32m+[m[32m  queryParams: {[m
[32m+[m[32m    pageNum: 1,[m
[32m+[m[32m    pageSize: 10,[m
[32m+[m[32m    socketType: null,[m
[32m+[m[32m    memoryType: null,[m
[32m+[m[32m    chipset: null,[m
[32m+[m[32m  },[m
[32m+[m[32m  rules: {[m
[32m+[m[32m    socketType: [[m
[32m+[m[32m      { required: true, message: "CPUæ¥å£ä¸èƒ½ä¸ºç©º", trigger: "change" }[m
[32m+[m[32m    ],[m
[32m+[m[32m    memoryType: [[m
[32m+[m[32m      { required: true, message: "å†…å­˜æ¥å£ä¸èƒ½ä¸ºç©º", trigger: "change" }[m
[32m+[m[32m    ],[m
[32m+[m[32m    maxCpuPower: [[m
[32m+[m[32m      { required: true, message: "åŠŸè€—(W)ä¸èƒ½ä¸ºç©º", trigger: "blur" }[m
[32m+[m[32m    ],[m
[32m+[m[32m  }[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32mconst { queryParams, form, rules } = toRefs(data)[m
[32m+[m
[32m+[m[32m/** æŸ¥è¯¢ä¸»æ¿è§„æ ¼åˆ—è¡¨ */[m
[32m+[m[32mfunction getList() {[m
[32m+[m[32m  loading.value = true[m
[32m+[m[32m  listMotherboard(queryParams.value).then(response => {[m
[32m+[m[32m    motherboardList.value = response.rows[m
[32m+[m[32m    total.value = response.total[m
[32m+[m[32m    loading.value = false[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å–æ¶ˆæŒ‰é’®[m
[32m+[m[32mfunction cancel() {[m
[32m+[m[32m  open.value = false[m
[32m+[m[32m  reset()[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// è¡¨å•é‡ç½®[m
[32m+[m[32mfunction reset() {[m
[32m+[m[32m  form.value = {[m
[32m+[m[32m    id: null,[m
[32m+[m[32m    socketType: null,[m
[32m+[m[32m    memoryType: null,[m
[32m+[m[32m    maxCpuPower: null,[m
[32m+[m[32m    chipset: null,[m
[32m+[m[32m    createTime: null,[m
[32m+[m[32m    updateTime: null[m
[32m+[m[32m  }[m
[32m+[m[32m  proxy.resetForm("motherboardRef")[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** æœç´¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleQuery() {[m
[32m+[m[32m  queryParams.value.pageNum = 1[m
[32m+[m[32m  getList()[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** é‡ç½®æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction resetQuery() {[m
[32m+[m[32m  proxy.resetForm("queryRef")[m
[32m+[m[32m  handleQuery()[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// å¤šé€‰æ¡†é€‰ä¸­æ•°æ®[m
[32m+[m[32mfunction handleSelectionChange(selection) {[m
[32m+[m[32m  ids.value = selection.map(item => item.id)[m
[32m+[m[32m  single.value = selection.length != 1[m
[32m+[m[32m  multiple.value = !selection.length[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** æ–°å¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleAdd() {[m
[32m+[m[32m  reset()[m
[32m+[m[32m  open.value = true[m
[32m+[m[32m  title.value = "æ·»åŠ ä¸»æ¿è§„æ ¼"[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** ä¿®æ”¹æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleUpdate(row) {[m
[32m+[m[32m  reset()[m
[32m+[m[32m  const _id = row.id || ids.value[m
[32m+[m[32m  getMotherboard(_id).then(response => {[m
[32m+[m[32m    form.value = response.data[m
[32m+[m[32m    open.value = true[m
[32m+[m[32m    title.value = "ä¿®æ”¹ä¸»æ¿è§„æ ¼"[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** æäº¤æŒ‰é’® */[m
[32m+[m[32mfunction submitForm() {[m
[32m+[m[32m  proxy.$refs["motherboardRef"].validate(valid => {[m
[32m+[m[32m    if (valid) {[m
[32m+[m[32m      if (form.value.id != null) {[m
[32m+[m[32m        updateMotherboard(form.value).then(response => {[m
[32m+[m[32m          proxy.$modal.msgSuccess("ä¿®æ”¹æˆåŠŸ")[m
[32m+[m[32m          open.value = false[m
[32m+[m[32m          getList()[m
[32m+[m[32m        })[m
[32m+[m[32m      } else {[m
[32m+[m[32m        addMotherboard(form.value).then(response => {[m
[32m+[m[32m          proxy.$modal.msgSuccess("æ–°å¢æˆåŠŸ")[m
[32m+[m[32m          open.value = false[m
[32m+[m[32m          getList()[m
[32m+[m[32m        })[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** åˆ é™¤æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleDelete(row) {[m
[32m+[m[32m  const _ids = row.id || ids.value[m
[32m+[m[32m  proxy.$modal.confirm('æ˜¯å¦ç¡®è®¤åˆ é™¤ä¸»æ¿è§„æ ¼ç¼–å·ä¸º"' + _ids + '"çš„æ•°æ®é¡¹ï¼Ÿ').then(function() {[m
[32m+[m[32m    return delMotherboard(_ids)[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    getList()[m
[32m+[m[32m    proxy.$modal.msgSuccess("åˆ é™¤æˆåŠŸ")[m
[32m+[m[32m  }).catch(() => {})[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** å¯¼å‡ºæŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleExport() {[m
[32m+[m[32m  proxy.download('system/motherboard/export', {[m
[32m+[m[32m    ...queryParams.value[m
[32m+[m[32m  }, `motherboard_${new Date().getTime()}.xlsx`)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mgetList()[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/system/notice/index.vue b/src/views/system/notice/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..c26b8c40[m
[1m--- /dev/null[m
[1m+++ b/src/views/system/notice/index.vue[m
[36m@@ -0,0 +1,283 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m   <div class="app-container">[m
[32m+[m[32m      <el-form :model="queryParams" ref="queryRef" :inline="true" v-show="showSearch">[m
[32m+[m[32m         <el-form-item label="å…¬å‘Šæ ‡é¢˜" prop="noticeTitle">[m
[32m+[m[32m            <el-input[m
[32m+[m[32m               v-model="queryParams.noticeTitle"[m
[32m+[m[32m               placeholder="è¯·è¾“å…¥å…¬å‘Šæ ‡é¢˜"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 200px"[m
[32m+[m[32m               @keyup.enter="handleQuery"[m
[32m+[m[32m            />[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="æ“ä½œäººå‘˜" prop="createBy">[m
[32m+[m[32m            <el-input[m
[32m+[m[32m               v-model="queryParams.createBy"[m
[32m+[m[32m               placeholder="è¯·è¾“å…¥æ“ä½œäººå‘˜"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 200px"[m
[32m+[m[32m               @keyup.enter="handleQuery"[m
[32m+[m[32m            />[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="ç±»å‹" prop="noticeType">[m
[32m+[m[32m            <el-select v-model="queryParams.noticeType" placeholder="å…¬å‘Šç±»å‹" clearable style="width: 200px">[m
[32m+[m[32m               <el-option[m
[32m+[m[32m                  v-for="dict in sys_notice_type"[m
[32m+[m[32m                  :key="dict.value"[m
[32m+[m[32m                  :label="dict.label"[m
[32m+[m[32m                  :value="dict.value"[m
[32m+[m[32m               />[m
[32m+[m[32m            </el-select>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item>[m
[32m+[m[32m            <el-button type="primary" icon="Search" @click="handleQuery">æœç´¢</el-button>[m
[32m+[m[32m            <el-button icon="Refresh" @click="resetQuery">é‡ç½®</el-button>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m      </el-form>[m
[32m+[m
[32m+[m[32m      <el-row :gutter="10" class="mb8">[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="primary"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Plus"[m
[32m+[m[32m               @click="handleAdd"[m
[32m+[m[32m               v-hasPermi="['system:notice:add']"[m
[32m+[m[32m            >æ–°å¢</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="success"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Edit"[m
[32m+[m[32m               :disabled="single"[m
[32m+[m[32m               @click="handleUpdate"[m
[32m+[m[32m               v-hasPermi="['system:notice:edit']"[m
[32m+[m[32m            >ä¿®æ”¹</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="danger"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Delete"[m
[32m+[m[32m               :disabled="multiple"[m
[32m+[m[32m               @click="handleDelete"[m
[32m+[m[32m               v-hasPermi="['system:notice:remove']"[m
[32m+[m[32m            >åˆ é™¤</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <right-toolbar v-model:showSearch="showSearch" @queryTable="getList"></right-toolbar>[m
[32m+[m[32m      </el-row>[m
[32m+[m
[32m+[m[32m      <el-table v-loading="loading" :data="noticeList" @selection-change="handleSelectionChange">[m
[32m+[m[32m         <el-table-column type="selection" width="55" align="center" />[m
[32m+[m[32m         <el-table-column label="åºå·" align="center" prop="noticeId" width="100" />[m
[32m+[m[32m         <el-table-column[m
[32m+[m[32m            label="å…¬å‘Šæ ‡é¢˜"[m
[32m+[m[32m            align="center"[m
[32m+[m[32m            prop="noticeTitle"[m
[32m+[m[32m            :show-overflow-tooltip="true"[m
[32m+[m[32m         />[m
[32m+[m[32m         <el-table-column label="å…¬å‘Šç±»å‹" align="center" prop="noticeType" width="100">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <dict-tag :options="sys_notice_type" :value="scope.row.noticeType" />[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="çŠ¶æ€" align="center" prop="status" width="100">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <dict-tag :options="sys_notice_status" :value="scope.row.status" />[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="åˆ›å»ºè€…" align="center" prop="createBy" width="100" />[m
[32m+[m[32m         <el-table-column label="åˆ›å»ºæ—¶é—´" align="center" prop="createTime" width="100">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <span>{{ parseTime(scope.row.createTime, '{y}-{m}-{d}') }}</span>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="æ“ä½œ" align="center" class-name="small-padding fixed-width">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <el-button link type="primary" icon="Edit" @click="handleUpdate(scope.row)" v-hasPermi="['system:notice:edit']">ä¿®æ”¹</el-button>[m
[32m+[m[32m               <el-button link type="primary" icon="Delete" @click="handleDelete(scope.row)" v-hasPermi="['system:notice:remove']" >åˆ é™¤</el-button>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m      </el-table>[m
[32m+[m
[32m+[m[32m      <pagination[m
[32m+[m[32m         v-show="total > 0"[m
[32m+[m[32m         :total="total"[m
[32m+[m[32m         v-model:page="queryParams.pageNum"[m
[32m+[m[32m         v-model:limit="queryParams.pageSize"[m
[32m+[m[32m         @pagination="getList"[m
[32m+[m[32m      />[m
[32m+[m
[32m+[m[32m      <!-- æ·»åŠ æˆ–ä¿®æ”¹å…¬å‘Šå¯¹è¯æ¡† -->[m
[32m+[m[32m      <el-dialog :title="title" v-model="open" width="780px" append-to-body>[m
[32m+[m[32m         <el-form ref="noticeRef" :model="form" :rules="rules" label-width="80px">[m
[32m+[m[32m            <el-row>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="å…¬å‘Šæ ‡é¢˜" prop="noticeTitle">[m
[32m+[m[32m                     <el-input v-model="form.noticeTitle" placeholder="è¯·è¾“å…¥å…¬å‘Šæ ‡é¢˜" />[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="å…¬å‘Šç±»å‹" prop="noticeType">[m
[32m+[m[32m                     <el-select v-model="form.noticeType" placeholder="è¯·é€‰æ‹©">[m
[32m+[m[32m                        <el-option[m
[32m+[m[32m                           v-for="dict in sys_notice_type"[m
[32m+[m[32m                           :key="dict.value"[m
[32m+[m[32m                           :label="dict.label"[m
[32m+[m[32m                           :value="dict.value"[m
[32m+[m[32m                        ></el-option>[m
[32m+[m[32m                     </el-select>[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="24">[m
[32m+[m[32m                  <el-form-item label="çŠ¶æ€">[m
[32m+[m[32m                     <el-radio-group v-model="form.status">[m
[32m+[m[32m                        <el-radio[m
[32m+[m[32m                           v-for="dict in sys_notice_status"[m
[32m+[m[32m                           :key="dict.value"[m
[32m+[m[32m                           :label="dict.value"[m
[32m+[m[32m                        >{{ dict.label }}</el-radio>[m
[32m+[m[32m                     </el-radio-group>[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="24">[m
[32m+[m[32m                  <el-form-item label="å†…å®¹">[m
[32m+[m[32m                    <editor v-model="form.noticeContent" :min-height="192"/>[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m            </el-row>[m
[32m+[m[32m         </el-form>[m
[32m+[m[32m         <template #footer>[m
[32m+[m[32m            <div class="dialog-footer">[m
[32m+[m[32m               <el-button type="primary" @click="submitForm">ç¡® å®š</el-button>[m
[32m+[m[32m               <el-button @click="cancel">å– æ¶ˆ</el-button>[m
[32m+[m[32m            </div>[m
[32m+[m[32m         </template>[m
[32m+[m[32m      </el-dialog>[m
[32m+[m[32m   </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup name="Notice">[m
[32m+[m[32mimport { listNotice, getNotice, delNotice, addNotice, updateNotice } from "@/api/system/notice";[m
[32m+[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m[32mconst { sys_notice_status, sys_notice_type } = proxy.useDict("sys_notice_status", "sys_notice_type");[m
[32m+[m
[32m+[m[32mconst noticeList = ref([]);[m
[32m+[m[32mconst open = ref(false);[m
[32m+[m[32mconst loading = ref(true);[m
[32m+[m[32mconst showSearch = ref(true);[m
[32m+[m[32mconst ids = ref([]);[m
[32m+[m[32mconst single = ref(true);[m
[32m+[m[32mconst multiple = ref(true);[m
[32m+[m[32mconst total = ref(0);[m
[32m+[m[32mconst title = ref("");[m
[32m+[m
[32m+[m[32mconst data = reactive({[m
[32m+[m[32m  form: {},[m
[32m+[m[32m  queryParams: {[m
[32m+[m[32m    pageNum: 1,[m
[32m+[m[32m    pageSize: 10,[m
[32m+[m[32m    noticeTitle: undefined,[m
[32m+[m[32m    createBy: undefined,[m
[32m+[m[32m    status: undefined[m
[32m+[m[32m  },[m
[32m+[m[32m  rules: {[m
[32m+[m[32m    noticeTitle: [{ required: true, message: "å…¬å‘Šæ ‡é¢˜ä¸èƒ½ä¸ºç©º", trigger: "blur" }],[m
[32m+[m[32m    noticeType: [{ required: true, message: "å…¬å‘Šç±»å‹ä¸èƒ½ä¸ºç©º", trigger: "change" }][m
[32m+[m[32m  },[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst { queryParams, form, rules } = toRefs(data);[m
[32m+[m
[32m+[m[32m/** æŸ¥è¯¢å…¬å‘Šåˆ—è¡¨ */[m
[32m+[m[32mfunction getList() {[m
[32m+[m[32m  loading.value = true;[m
[32m+[m[32m  listNotice(queryParams.value).then(response => {[m
[32m+[m[32m    noticeList.value = response.rows;[m
[32m+[m[32m    total.value = response.total;[m
[32m+[m[32m    loading.value = false;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** å–æ¶ˆæŒ‰é’® */[m
[32m+[m[32mfunction cancel() {[m
[32m+[m[32m  open.value = false;[m
[32m+[m[32m  reset();[m
[32m+[m[32m}[m
[32m+[m[32m/** è¡¨å•é‡ç½® */[m
[32m+[m[32mfunction reset() {[m
[32m+[m[32m  form.value = {[m
[32m+[m[32m    noticeId: undefined,[m
[32m+[m[32m    noticeTitle: undefined,[m
[32m+[m[32m    noticeType: undefined,[m
[32m+[m[32m    noticeContent: undefined,[m
[32m+[m[32m    status: "0"[m
[32m+[m[32m  };[m
[32m+[m[32m  proxy.resetForm("noticeRef");[m
[32m+[m[32m}[m
[32m+[m[32m/** æœç´¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleQuery() {[m
[32m+[m[32m  queryParams.value.pageNum = 1;[m
[32m+[m[32m  getList();[m
[32m+[m[32m}[m
[32m+[m[32m/** é‡ç½®æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction resetQuery() {[m
[32m+[m[32m  proxy.resetForm("queryRef");[m
[32m+[m[32m  handleQuery();[m
[32m+[m[32m}[m
[32m+[m[32m/** å¤šé€‰æ¡†é€‰ä¸­æ•°æ® */[m
[32m+[m[32mfunction handleSelectionChange(selection) {[m
[32m+[m[32m  ids.value = selection.map(item => item.noticeId);[m
[32m+[m[32m  single.value = selection.length != 1;[m
[32m+[m[32m  multiple.value = !selection.length;[m
[32m+[m[32m}[m
[32m+[m[32m/** æ–°å¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleAdd() {[m
[32m+[m[32m  reset();[m
[32m+[m[32m  open.value = true;[m
[32m+[m[32m  title.value = "æ·»åŠ å…¬å‘Š";[m
[32m+[m[32m}[m
[32m+[m[32m/**ä¿®æ”¹æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleUpdate(row) {[m
[32m+[m[32m  reset();[m
[32m+[m[32m  const noticeId = row.noticeId || ids.value;[m
[32m+[m[32m  getNotice(noticeId).then(response => {[m
[32m+[m[32m    form.value = response.data;[m
[32m+[m[32m    open.value = true;[m
[32m+[m[32m    title.value = "ä¿®æ”¹å…¬å‘Š";[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** æäº¤æŒ‰é’® */[m
[32m+[m[32mfunction submitForm() {[m
[32m+[m[32m  proxy.$refs["noticeRef"].validate(valid => {[m
[32m+[m[32m    if (valid) {[m
[32m+[m[32m      if (form.value.noticeId != undefined) {[m
[32m+[m[32m        updateNotice(form.value).then(response => {[m
[32m+[m[32m          proxy.$modal.msgSuccess("ä¿®æ”¹æˆåŠŸ");[m
[32m+[m[32m          open.value = false;[m
[32m+[m[32m          getList();[m
[32m+[m[32m        });[m
[32m+[m[32m      } else {[m
[32m+[m[32m        addNotice(form.value).then(response => {[m
[32m+[m[32m          proxy.$modal.msgSuccess("æ–°å¢æˆåŠŸ");[m
[32m+[m[32m          open.value = false;[m
[32m+[m[32m          getList();[m
[32m+[m[32m        });[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** åˆ é™¤æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleDelete(row) {[m
[32m+[m[32m  const noticeIds = row.noticeId || ids.value[m
[32m+[m[32m  proxy.$modal.confirm('æ˜¯å¦ç¡®è®¤åˆ é™¤å…¬å‘Šç¼–å·ä¸º"' + noticeIds + '"çš„æ•°æ®é¡¹ï¼Ÿ').then(function() {[m
[32m+[m[32m    return delNotice(noticeIds);[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    getList();[m
[32m+[m[32m    proxy.$modal.msgSuccess("åˆ é™¤æˆåŠŸ");[m
[32m+[m[32m  }).catch(() => {});[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mgetList();[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/system/post/index.vue b/src/views/system/post/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..6fd1b641[m
[1m--- /dev/null[m
[1m+++ b/src/views/system/post/index.vue[m
[36m@@ -0,0 +1,277 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m   <div class="app-container">[m
[32m+[m[32m      <el-form :model="queryParams" ref="queryRef" :inline="true" v-show="showSearch">[m
[32m+[m[32m         <el-form-item label="å²—ä½ç¼–ç " prop="postCode">[m
[32m+[m[32m            <el-input[m
[32m+[m[32m               v-model="queryParams.postCode"[m
[32m+[m[32m               placeholder="è¯·è¾“å…¥å²—ä½ç¼–ç "[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 200px"[m
[32m+[m[32m               @keyup.enter="handleQuery"[m
[32m+[m[32m            />[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="å²—ä½åç§°" prop="postName">[m
[32m+[m[32m            <el-input[m
[32m+[m[32m               v-model="queryParams.postName"[m
[32m+[m[32m               placeholder="è¯·è¾“å…¥å²—ä½åç§°"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 200px"[m
[32m+[m[32m               @keyup.enter="handleQuery"[m
[32m+[m[32m            />[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="çŠ¶æ€" prop="status">[m
[32m+[m[32m            <el-select v-model="queryParams.status" placeholder="å²—ä½çŠ¶æ€" clearable style="width: 200px">[m
[32m+[m[32m               <el-option[m
[32m+[m[32m                  v-for="dict in sys_normal_disable"[m
[32m+[m[32m                  :key="dict.value"[m
[32m+[m[32m                  :label="dict.label"[m
[32m+[m[32m                  :value="dict.value"[m
[32m+[m[32m               />[m
[32m+[m[32m            </el-select>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item>[m
[32m+[m[32m            <el-button type="primary" icon="Search" @click="handleQuery">æœç´¢</el-button>[m
[32m+[m[32m            <el-button icon="Refresh" @click="resetQuery">é‡ç½®</el-button>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m      </el-form>[m
[32m+[m
[32m+[m[32m      <el-row :gutter="10" class="mb8">[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="primary"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Plus"[m
[32m+[m[32m               @click="handleAdd"[m
[32m+[m[32m               v-hasPermi="['system:post:add']"[m
[32m+[m[32m            >æ–°å¢</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="success"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Edit"[m
[32m+[m[32m               :disabled="single"[m
[32m+[m[32m               @click="handleUpdate"[m
[32m+[m[32m               v-hasPermi="['system:post:edit']"[m
[32m+[m[32m            >ä¿®æ”¹</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="danger"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Delete"[m
[32m+[m[32m               :disabled="multiple"[m
[32m+[m[32m               @click="handleDelete"[m
[32m+[m[32m               v-hasPermi="['system:post:remove']"[m
[32m+[m[32m            >åˆ é™¤</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="warning"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Download"[m
[32m+[m[32m               @click="handleExport"[m
[32m+[m[32m               v-hasPermi="['system:post:export']"[m
[32m+[m[32m            >å¯¼å‡º</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <right-toolbar v-model:showSearch="showSearch" @queryTable="getList"></right-toolbar>[m
[32m+[m[32m      </el-row>[m
[32m+[m
[32m+[m[32m      <el-table v-loading="loading" :data="postList" @selection-change="handleSelectionChange">[m
[32m+[m[32m         <el-table-column type="selection" width="55" align="center" />[m
[32m+[m[32m         <el-table-column label="å²—ä½ç¼–å·" align="center" prop="postId" />[m
[32m+[m[32m         <el-table-column label="å²—ä½ç¼–ç " align="center" prop="postCode" />[m
[32m+[m[32m         <el-table-column label="å²—ä½åç§°" align="center" prop="postName" />[m
[32m+[m[32m         <el-table-column label="å²—ä½æ’åº" align="center" prop="postSort" />[m
[32m+[m[32m         <el-table-column label="çŠ¶æ€" align="center" prop="status">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <dict-tag :options="sys_normal_disable" :value="scope.row.status" />[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="åˆ›å»ºæ—¶é—´" align="center" prop="createTime" width="180">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <span>{{ parseTime(scope.row.createTime) }}</span>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="æ“ä½œ" width="180" align="center" class-name="small-padding fixed-width">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <el-button link type="primary" icon="Edit" @click="handleUpdate(scope.row)" v-hasPermi="['system:post:edit']">ä¿®æ”¹</el-button>[m
[32m+[m[32m               <el-button link type="primary" icon="Delete" @click="handleDelete(scope.row)" v-hasPermi="['system:post:remove']">åˆ é™¤</el-button>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m      </el-table>[m
[32m+[m
[32m+[m[32m      <pagination[m
[32m+[m[32m         v-show="total > 0"[m
[32m+[m[32m         :total="total"[m
[32m+[m[32m         v-model:page="queryParams.pageNum"[m
[32m+[m[32m         v-model:limit="queryParams.pageSize"[m
[32m+[m[32m         @pagination="getList"[m
[32m+[m[32m      />[m
[32m+[m
[32m+[m[32m      <!-- æ·»åŠ æˆ–ä¿®æ”¹å²—ä½å¯¹è¯æ¡† -->[m
[32m+[m[32m      <el-dialog :title="title" v-model="open" width="500px" append-to-body>[m
[32m+[m[32m         <el-form ref="postRef" :model="form" :rules="rules" label-width="80px">[m
[32m+[m[32m            <el-form-item label="å²—ä½åç§°" prop="postName">[m
[32m+[m[32m               <el-input v-model="form.postName" placeholder="è¯·è¾“å…¥å²—ä½åç§°" />[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m            <el-form-item label="å²—ä½ç¼–ç " prop="postCode">[m
[32m+[m[32m               <el-input v-model="form.postCode" placeholder="è¯·è¾“å…¥ç¼–ç åç§°" />[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m            <el-form-item label="å²—ä½é¡ºåº" prop="postSort">[m
[32m+[m[32m               <el-input-number v-model="form.postSort" controls-position="right" :min="0" />[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m            <el-form-item label="å²—ä½çŠ¶æ€" prop="status">[m
[32m+[m[32m               <el-radio-group v-model="form.status">[m
[32m+[m[32m                  <el-radio[m
[32m+[m[32m                     v-for="dict in sys_normal_disable"[m
[32m+[m[32m                     :key="dict.value"[m
[32m+[m[32m                     :label="dict.value"[m
[32m+[m[32m                  >{{ dict.label }}</el-radio>[m
[32m+[m[32m               </el-radio-group>[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m            <el-form-item label="å¤‡æ³¨" prop="remark">[m
[32m+[m[32m               <el-input v-model="form.remark" type="textarea" placeholder="è¯·è¾“å…¥å†…å®¹" />[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m         </el-form>[m
[32m+[m[32m         <template #footer>[m
[32m+[m[32m            <div class="dialog-footer">[m
[32m+[m[32m               <el-button type="primary" @click="submitForm">ç¡® å®š</el-button>[m
[32m+[m[32m               <el-button @click="cancel">å– æ¶ˆ</el-button>[m
[32m+[m[32m            </div>[m
[32m+[m[32m         </template>[m
[32m+[m[32m      </el-dialog>[m
[32m+[m[32m   </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup name="Post">[m
[32m+[m[32mimport { listPost, addPost, delPost, getPost, updatePost } from "@/api/system/post";[m
[32m+[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m[32mconst { sys_normal_disable } = proxy.useDict("sys_normal_disable");[m
[32m+[m
[32m+[m[32mconst postList = ref([]);[m
[32m+[m[32mconst open = ref(false);[m
[32m+[m[32mconst loading = ref(true);[m
[32m+[m[32mconst showSearch = ref(true);[m
[32m+[m[32mconst ids = ref([]);[m
[32m+[m[32mconst single = ref(true);[m
[32m+[m[32mconst multiple = ref(true);[m
[32m+[m[32mconst total = ref(0);[m
[32m+[m[32mconst title = ref("");[m
[32m+[m
[32m+[m[32mconst data = reactive({[m
[32m+[m[32m  form: {},[m
[32m+[m[32m  queryParams: {[m
[32m+[m[32m    pageNum: 1,[m
[32m+[m[32m    pageSize: 10,[m
[32m+[m[32m    postCode: undefined,[m
[32m+[m[32m    postName: undefined,[m
[32m+[m[32m    status: undefined[m
[32m+[m[32m  },[m
[32m+[m[32m  rules: {[m
[32m+[m[32m    postName: [{ required: true, message: "å²—ä½åç§°ä¸èƒ½ä¸ºç©º", trigger: "blur" }],[m
[32m+[m[32m    postCode: [{ required: true, message: "å²—ä½ç¼–ç ä¸èƒ½ä¸ºç©º", trigger: "blur" }],[m
[32m+[m[32m    postSort: [{ required: true, message: "å²—ä½é¡ºåºä¸èƒ½ä¸ºç©º", trigger: "blur" }],[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst { queryParams, form, rules } = toRefs(data);[m
[32m+[m
[32m+[m[32m/** æŸ¥è¯¢å²—ä½åˆ—è¡¨ */[m
[32m+[m[32mfunction getList() {[m
[32m+[m[32m  loading.value = true;[m
[32m+[m[32m  listPost(queryParams.value).then(response => {[m
[32m+[m[32m    postList.value = response.rows;[m
[32m+[m[32m    total.value = response.total;[m
[32m+[m[32m    loading.value = false;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** å–æ¶ˆæŒ‰é’® */[m
[32m+[m[32mfunction cancel() {[m
[32m+[m[32m  open.value = false;[m
[32m+[m[32m  reset();[m
[32m+[m[32m}[m
[32m+[m[32m/** è¡¨å•é‡ç½® */[m
[32m+[m[32mfunction reset() {[m
[32m+[m[32m  form.value = {[m
[32m+[m[32m    postId: undefined,[m
[32m+[m[32m    postCode: undefined,[m
[32m+[m[32m    postName: undefined,[m
[32m+[m[32m    postSort: 0,[m
[32m+[m[32m    status: "0",[m
[32m+[m[32m    remark: undefined[m
[32m+[m[32m  };[m
[32m+[m[32m  proxy.resetForm("postRef");[m
[32m+[m[32m}[m
[32m+[m[32m/** æœç´¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleQuery() {[m
[32m+[m[32m  queryParams.value.pageNum = 1;[m
[32m+[m[32m  getList();[m
[32m+[m[32m}[m
[32m+[m[32m/** é‡ç½®æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction resetQuery() {[m
[32m+[m[32m  proxy.resetForm("queryRef");[m
[32m+[m[32m  handleQuery();[m
[32m+[m[32m}[m
[32m+[m[32m/** å¤šé€‰æ¡†é€‰ä¸­æ•°æ® */[m
[32m+[m[32mfunction handleSelectionChange(selection) {[m
[32m+[m[32m  ids.value = selection.map(item => item.postId);[m
[32m+[m[32m  single.value = selection.length != 1;[m
[32m+[m[32m  multiple.value = !selection.length;[m
[32m+[m[32m}[m
[32m+[m[32m/** æ–°å¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleAdd() {[m
[32m+[m[32m  reset();[m
[32m+[m[32m  open.value = true;[m
[32m+[m[32m  title.value = "æ·»åŠ å²—ä½";[m
[32m+[m[32m}[m
[32m+[m[32m/** ä¿®æ”¹æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleUpdate(row) {[m
[32m+[m[32m  reset();[m
[32m+[m[32m  const postId = row.postId || ids.value;[m
[32m+[m[32m  getPost(postId).then(response => {[m
[32m+[m[32m    form.value = response.data;[m
[32m+[m[32m    open.value = true;[m
[32m+[m[32m    title.value = "ä¿®æ”¹å²—ä½";[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** æäº¤æŒ‰é’® */[m
[32m+[m[32mfunction submitForm() {[m
[32m+[m[32m  proxy.$refs["postRef"].validate(valid => {[m
[32m+[m[32m    if (valid) {[m
[32m+[m[32m      if (form.value.postId != undefined) {[m
[32m+[m[32m        updatePost(form.value).then(response => {[m
[32m+[m[32m          proxy.$modal.msgSuccess("ä¿®æ”¹æˆåŠŸ");[m
[32m+[m[32m          open.value = false;[m
[32m+[m[32m          getList();[m
[32m+[m[32m        });[m
[32m+[m[32m      } else {[m
[32m+[m[32m        addPost(form.value).then(response => {[m
[32m+[m[32m          proxy.$modal.msgSuccess("æ–°å¢æˆåŠŸ");[m
[32m+[m[32m          open.value = false;[m
[32m+[m[32m          getList();[m
[32m+[m[32m        });[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** åˆ é™¤æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleDelete(row) {[m
[32m+[m[32m  const postIds = row.postId || ids.value;[m
[32m+[m[32m  proxy.$modal.confirm('æ˜¯å¦ç¡®è®¤åˆ é™¤å²—ä½ç¼–å·ä¸º"' + postIds + '"çš„æ•°æ®é¡¹ï¼Ÿ').then(function() {[m
[32m+[m[32m    return delPost(postIds);[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    getList();[m
[32m+[m[32m    proxy.$modal.msgSuccess("åˆ é™¤æˆåŠŸ");[m
[32m+[m[32m  }).catch(() => {});[m
[32m+[m[32m}[m
[32m+[m[32m/** å¯¼å‡ºæŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleExport() {[m
[32m+[m[32m  proxy.download("system/post/export", {[m
[32m+[m[32m    ...queryParams.value[m
[32m+[m[32m  }, `post_${new Date().getTime()}.xlsx`);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mgetList();[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/system/product/index.vue b/src/views/system/product/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..f7adf213[m
[1m--- /dev/null[m
[1m+++ b/src/views/system/product/index.vue[m
[36m@@ -0,0 +1,755 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="app-container">[m
[32m+[m[32m    <el-form :model="queryParams" ref="queryRef" :inline="true" v-show="showSearch" label-width="68px">[m
[32m+[m[32m      <el-form-item label="å•†å“åç§°" prop="productName">[m
[32m+[m[32m        <el-input[m
[32m+[m[32m          v-model="queryParams.productName"[m
[32m+[m[32m          placeholder="è¯·è¾“å…¥å•†å“åç§°"[m
[32m+[m[32m          clearable[m
[32m+[m[32m          @keyup.enter="handleQuery"[m
[32m+[m[32m        />[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item label="ç§Ÿå”®ç±»å‹" prop="productType">[m
[32m+[m[32m        <el-select v-model="queryParams.productType" placeholder="è¯·é€‰æ‹©ç§Ÿå”®ç±»å‹" clearable>[m
[32m+[m[32m          <el-option[m
[32m+[m[32m            v-for="dict in product_type"[m
[32m+[m[32m            :key="dict.value"[m
[32m+[m[32m            :label="dict.label"[m
[32m+[m[32m            :value="dict.value"[m
[32m+[m[32m          />[m
[32m+[m[32m        </el-select>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item label="é”€å”®ä»·æ ¼" prop="salePrice">[m
[32m+[m[32m        <el-input[m
[32m+[m[32m          v-model="queryParams.salePrice"[m
[32m+[m[32m          placeholder="è¯·è¾“å…¥é”€å”®ä»·æ ¼"[m
[32m+[m[32m          clearable[m
[32m+[m[32m          @keyup.enter="handleQuery"[m
[32m+[m[32m        />[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item label="CPU" prop="cpu">[m
[32m+[m[32m        <el-input[m
[32m+[m[32m          v-model="queryParams.cpu"[m
[32m+[m[32m          placeholder="è¯·è¾“å…¥CPU"[m
[32m+[m[32m          clearable[m
[32m+[m[32m          @keyup.enter="handleQuery"[m
[32m+[m[32m        />[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item label="æ˜¾å¡" prop="graphicsCard">[m
[32m+[m[32m        <el-input[m
[32m+[m[32m          v-model="queryParams.graphicsCard"[m
[32m+[m[32m          placeholder="è¯·è¾“å…¥æ˜¾å¡"[m
[32m+[m[32m          clearable[m
[32m+[m[32m          @keyup.enter="handleQuery"[m
[32m+[m[32m        />[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item label="çŠ¶æ€" prop="status">[m
[32m+[m[32m        <el-select v-model="queryParams.status" placeholder="è¯·é€‰æ‹©çŠ¶æ€" clearable>[m
[32m+[m[32m          <el-option[m
[32m+[m[32m            v-for="dict in sys_normal_disable"[m
[32m+[m[32m            :key="dict.value"[m
[32m+[m[32m            :label="dict.label"[m
[32m+[m[32m            :value="dict.value"[m
[32m+[m[32m          />[m
[32m+[m[32m        </el-select>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item>[m
[32m+[m[32m        <el-button type="primary" icon="Search" @click="handleQuery">æœç´¢</el-button>[m
[32m+[m[32m        <el-button icon="Refresh" @click="resetQuery">é‡ç½®</el-button>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m    </el-form>[m
[32m+[m
[32m+[m[32m    <el-row :gutter="10" class="mb8">[m
[32m+[m[32m      <el-col :span="1.5">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="primary"[m
[32m+[m[32m          plain[m
[32m+[m[32m          icon="Plus"[m
[32m+[m[32m          @click="handleAdd"[m
[32m+[m[32m          v-hasPermi="['system:product:add']"[m
[32m+[m[32m        >æ–°å¢</el-button>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <el-col :span="1.5">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="success"[m
[32m+[m[32m          plain[m
[32m+[m[32m          icon="Edit"[m
[32m+[m[32m          :disabled="single"[m
[32m+[m[32m          @click="handleUpdate"[m
[32m+[m[32m          v-hasPermi="['system:product:edit']"[m
[32m+[m[32m        >ä¿®æ”¹</el-button>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <el-col :span="1.5">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="danger"[m
[32m+[m[32m          plain[m
[32m+[m[32m          icon="Delete"[m
[32m+[m[32m          :disabled="multiple"[m
[32m+[m[32m          @click="handleDelete"[m
[32m+[m[32m          v-hasPermi="['system:product:remove']"[m
[32m+[m[32m        >åˆ é™¤</el-button>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <el-col :span="1.5">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="warning"[m
[32m+[m[32m          plain[m
[32m+[m[32m          icon="Download"[m
[32m+[m[32m          @click="handleExport"[m
[32m+[m[32m          v-hasPermi="['system:product:export']"[m
[32m+[m[32m        >å¯¼å‡º</el-button>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <right-toolbar v-model:showSearch="showSearch" @queryTable="getList"></right-toolbar>[m
[32m+[m[32m    </el-row>[m
[32m+[m
[32m+[m[32m    <el-table v-loading="loading" :data="productList" @selection-change="handleSelectionChange">[m
[32m+[m[32m      <el-table-column type="selection" width="55" align="center" />[m
[32m+[m[32m      <el-table-column label="å•†å®¶åç§°" prop="deptName" align="center" />[m
[32m+[m[32m      <el-table-column label="å•†å“ID" align="center" prop="id" />[m
[32m+[m[32m      <el-table-column label="å•†å“åç§°" align="center" prop="productName" />[m
[32m+[m[32m      <el-table-column label="ç§Ÿå”®ç±»å‹" align="center" prop="productType">[m
[32m+[m[32m        <template #default="scope">[m
[32m+[m[32m          <dict-tag :options="product_type" :value="scope.row.productType"/>[m
[32m+[m[32m        </template>[m
[32m+[m[32m      </el-table-column>[m
[32m+[m[32m      <el-table-column label="æ—¥ç§Ÿé‡‘" align="center" prop="rentPrice" />[m
[32m+[m[32m      <el-table-column label="é”€å”®ä»·æ ¼" align="center" prop="salePrice" />[m
[32m+[m[32m      <el-table-column label="åº“å­˜æ•°é‡" align="center" prop="stockQuantity" />[m
[32m+[m[32m      <el-table-column label="å¯ç§Ÿèµæ•°é‡" align="center" prop="availableRent" />[m
[32m+[m[32m      <el-table-column label="CPU" align="center" prop="cpu" />[m
[32m+[m[32m      <el-table-column label="ä¸»æ¿" align="center" prop="motherboard" />[m
[32m+[m[32m      <el-table-column label="å†…å­˜" align="center" prop="memory" />[m
[32m+[m[32m      <el-table-column label="å›ºæ€ç¡¬ç›˜" align="center" prop="ssd" />[m
[32m+[m[32m      <el-table-column label="æ˜¾å¡" align="center" prop="graphicsCard" />[m
[32m+[m[32m      <el-table-column label="æ•£çƒ­å™¨" align="center" prop="cooler" />[m
[32m+[m[32m      <el-table-column label="ç”µæº" align="center" prop="powerSupply" />[m
[32m+[m[32m      <el-table-column label="æœºç®±" align="center" prop="chassis" />[m
[32m+[m[32m      <el-table-column label="å›¾ç‰‡URL" align="center" prop="imageUrl" width="100">[m
[32m+[m[32m        <template #default="scope">[m
[32m+[m[32m          <image-preview :src="scope.row.imageUrl" :width="50" :height="50"/>[m
[32m+[m[32m        </template>[m
[32m+[m[32m      </el-table-column>[m
[32m+[m[32m      <el-table-column label="çŠ¶æ€" align="center" prop="status">[m
[32m+[m[32m        <template #default="scope">[m
[32m+[m[32m          <dict-tag :options="sys_normal_disable" :value="scope.row.status"/>[m
[32m+[m[32m        </template>[m
[32m+[m[32m      </el-table-column>[m
[32m+[m[32m      <el-table-column label="å¤‡æ³¨" align="center" prop="remark" />[m
[32m+[m[32m      <el-table-column label="æ“ä½œ" align="center" class-name="small-padding fixed-width">[m
[32m+[m[32m        <template #default="scope">[m
[32m+[m[32m          <el-button link type="primary" icon="Edit" @click="handleUpdate(scope.row)" v-hasPermi="['system:product:edit']">ä¿®æ”¹</el-button>[m
[32m+[m[32m          <el-button link type="primary" icon="Delete" @click="handleDelete(scope.row)" v-hasPermi="['system:product:remove']">åˆ é™¤</el-button>[m
[32m+[m[32m        </template>[m
[32m+[m[32m      </el-table-column>[m
[32m+[m[32m    </el-table>[m
[32m+[m[41m    [m
[32m+[m[32m    <pagination[m
[32m+[m[32m      v-show="total>0"[m
[32m+[m[32m      :total="total"[m
[32m+[m[32m      v-model:page="queryParams.pageNum"[m
[32m+[m[32m      v-model:limit="queryParams.pageSize"[m
[32m+[m[32m      @pagination="getList"[m
[32m+[m[32m    />[m
[32m+[m
[32m+[m[32m    <!-- æ·»åŠ æˆ–ä¿®æ”¹å•†å“å¯¹è¯æ¡† -->[m
[32m+[m[32m    <el-dialog :title="title" v-model="open" width="500px" append-to-body>[m
[32m+[m[32m      <el-form ref="productRef" :model="form" :rules="rules" label-width="80px">[m
[32m+[m[32m        <!-- éƒ¨é—¨é€‰æ‹©ï¼ˆå¹³å°ç®¡ç†å‘˜å¯è§ï¼Œéƒ¨é—¨ç”¨æˆ·éšè—ï¼‰ -->[m
[32m+[m[32m        <el-form-item label="éƒ¨é—¨åç§°" prop="deptId" v-if="isAdmin">[m
[32m+[m[32m          <el-select v-model="form.deptId" placeholder="è¯·é€‰æ‹©éƒ¨é—¨">[m
[32m+[m[32m            <el-option[m
[32m+[m[32m                v-for="dept in deptList"[m
[32m+[m[32m                :key="dept.deptId"[m
[32m+[m[32m                :label="dept.deptName"[m
[32m+[m[32m                :value="dept.deptId">[m
[32m+[m[32m            </el-option>[m
[32m+[m[32m          </el-select>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <!-- éƒ¨é—¨ç”¨æˆ·æ˜¾ç¤ºéƒ¨é—¨åç§°ï¼ˆåªè¯»ï¼‰ -->[m
[32m+[m[32m        <el-form-item label="éƒ¨é—¨åç§°" v-if="!isAdmin">[m
[32m+[m[32m          <el-input v-model="form.deptName" disabled placeholder="è‡ªåŠ¨å¡«å…¥å½“å‰éƒ¨é—¨" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="å•†å“åç§°" prop="productName">[m
[32m+[m[32m          <el-input v-model="form.productName" placeholder="è¯·è¾“å…¥å•†å“åç§°" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="ç§Ÿå”®ç±»å‹" prop="productType">[m
[32m+[m[32m          <el-select v-model="form.productType" placeholder="è¯·é€‰æ‹©ç§Ÿå”®ç±»å‹">[m
[32m+[m[32m            <el-option[m
[32m+[m[32m              v-for="dict in product_type"[m
[32m+[m[32m              :key="dict.value"[m
[32m+[m[32m              :label="dict.label"[m
[32m+[m[32m              :value="dict.value"[m
[32m+[m[32m            ></el-option>[m
[32m+[m[32m          </el-select>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="æ—¥ç§Ÿé‡‘" prop="rentPrice">[m
[32m+[m[32m          <el-input v-model="form.rentPrice" placeholder="è¯·è¾“å…¥æ—¥ç§Ÿé‡‘" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="é”€å”®ä»·æ ¼" prop="salePrice">[m
[32m+[m[32m          <el-input v-model="form.salePrice" placeholder="è¯·è¾“å…¥é”€å”®ä»·æ ¼" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="åº“å­˜æ•°é‡" prop="stockQuantity">[m
[32m+[m[32m          <el-input v-model="form.stockQuantity" placeholder="è¯·è¾“å…¥åº“å­˜æ•°é‡" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="å¯ç§Ÿèµæ•°é‡" prop="availableRent">[m
[32m+[m[32m          <el-input v-model="form.availableRent" placeholder="è¯·è¾“å…¥å¯ç§Ÿèµæ•°é‡" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m       <!-- CPUç»„ä»¶ï¼šå¯è¾“å…¥æ¨¡ç³ŠåŒ¹é…çš„ä¸‹æ‹‰æ¡† -->[m
[32m+[m[32m<el-form-item label="CPU" prop="cpu">[m
[32m+[m[32m  <el-select[m[41m [m
[32m+[m[32m    v-model="form.cpu"[m[41m [m
[32m+[m[32m    placeholder="è¯·é€‰æ‹©CPUï¼ˆæ”¯æŒæ¨¡ç³Šæœç´¢ï¼‰"[m
[32m+[m[32m    filterable[m
[32m+[m[32m    remote[m
[32m+[m[32m    :remote-method="remoteCpuMethod"[m
[32m+[m[32m    :loading="cpuLoading"[m
[32m+[m[32m  >[m
[32m+[m[32m    <el-option[m
[32m+[m[32m      v-for="item in cpuList"[m
[32m+[m[32m      :key="item.model"[m
[32m+[m[32m      :label="`${item.brand} ${item.model}`"[m
[32m+[m[32m      :value="item.model"[m
[32m+[m[32m    />[m
[32m+[m[32m  </el-select>[m
[32m+[m[32m</el-form-item>[m
[32m+[m[32m        <el-form-item label="ä¸»æ¿" prop="motherboard">[m
[32m+[m[32m          <el-input v-model="form.motherboard" placeholder="è¯·è¾“å…¥ä¸»æ¿" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <!-- å†…å­˜ç»„ä»¶ï¼šå“ç‰Œï¼ˆæ–‡æœ¬æ¡†ï¼‰+ ç±»å‹ï¼ˆä¸‹æ‹‰æ¡†ï¼‰+ é¢‘ç‡ï¼ˆä¸‹æ‹‰æ¡†ï¼‰ -->[m
[32m+[m[32m<el-form-item label="å†…å­˜" prop="memory">[m
[32m+[m[32m  <el-row :gutter="10">[m
[32m+[m[32m    <el-col :span="8">[m
[32m+[m[32m      <el-input[m
[32m+[m[32m        v-model="form.memoryBrandAndModel"[m
[32m+[m[32m        placeholder="è¯·è¾“å…¥å†…å­˜å“ç‰Œå‹å·ï¼ˆå¦‚ï¼šå®ç¢å†°åˆƒï¼‰"[m
[32m+[m[32m      />[m
[32m+[m[32m    </el-col>[m
[32m+[m[32m    <el-col :span="8">[m
[32m+[m[32m      <el-select v-model="form.memoryType" placeholder="è¯·é€‰æ‹©å†…å­˜ç±»å‹">[m
[32m+[m[32m        <el-option[m
[32m+[m[32m          v-for="item in memoryTypeList"[m
[32m+[m[32m          :key="item.type"[m
[32m+[m[32m          :label="item.type"[m
[32m+[m[32m          :value="item.type"[m
[32m+[m[32m        />[m
[32m+[m[32m      </el-select>[m
[32m+[m[32m    </el-col>[m
[32m+[m[32m    <el-col :span="8">[m
[32m+[m[32m      <el-select v-model="form.memoryFrequency" placeholder="è¯·é€‰æ‹©å†…å­˜é¢‘ç‡">[m
[32m+[m[32m        <el-option[m
[32m+[m[32m          v-for="item in memoryFrequencyList"[m
[32m+[m[32m          :key="item.frequency"[m
[32m+[m[32m          :label="`${item.frequency} MHz`"[m
[32m+[m[32m          :value="item.frequency"[m
[32m+[m[32m        />[m
[32m+[m[32m      </el-select>[m
[32m+[m[32m    </el-col>[m
[32m+[m[32m  </el-row>[m
[32m+[m[32m</el-form-item>[m
[32m+[m[32m<el-form-item label="å›ºæ€ç¡¬ç›˜" prop="ssd">[m
[32m+[m[32m  <el-input v-model="form.ssd" placeholder="è¯·è¾“å…¥å›ºæ€ç¡¬ç›˜å‹å·" />[m
[32m+[m[32m</el-form-item>[m
[32m+[m[32m     <!-- æ˜¾å¡ç»„ä»¶ï¼šå“ç‰Œï¼ˆæ–‡æœ¬æ¡†ï¼‰+ å‹å·ï¼ˆä¸‹æ‹‰æ¡†ï¼‰+ å…·ä½“å‹å·ï¼ˆæ–‡æœ¬æ¡†ï¼‰ -->[m
[32m+[m[32m<el-form-item label="æ˜¾å¡å“ç‰Œ" prop="graphicsCardBrand">[m
[32m+[m[32m  <el-input v-model="form.graphicsCardBrand" placeholder="è¯·è¾“å…¥æ˜¾å¡å“ç‰Œï¼ˆå¦‚ï¼šä¸ƒå½©è™¹ï¼‰" />[m
[32m+[m[32m</el-form-item>[m
[32m+[m[32m<el-form-item label="æ˜¾å¡å‹å·" prop="graphicsCardModel">[m
[32m+[m[32m  <el-select[m[41m [m
[32m+[m[32m    v-model="form.graphicsCardModel"[m[41m [m
[32m+[m[32m    placeholder="è¯·é€‰æ‹©æ˜¾å¡å‹å·ï¼ˆæ”¯æŒæ¨¡ç³Šæœç´¢ï¼‰"[m
[32m+[m[32m    filterable[m
[32m+[m[32m    remote[m
[32m+[m[32m    :remote-method="remoteGpuMethod"[m
[32m+[m[32m    :loading="gpuLoading"[m
[32m+[m[32m  >[m
[32m+[m[32m    <el-option[m
[32m+[m[32m      v-for="item in gpuList"[m
[32m+[m[32m      :key="item.model"[m
[32m+[m[32m      :label="`${item.brand} ${item.model}`"[m
[32m+[m[32m      :value="item.model"[m
[32m+[m[32m    />[m
[32m+[m[32m  </el-select>[m
[32m+[m[32m</el-form-item>[m
[32m+[m[32m<el-form-item label="æ˜¾å¡å…·ä½“å‹å·" prop="graphicsCardSpecific">[m
[32m+[m[32m  <el-input v-model="form.graphicsCardSpecific" placeholder="è¯·è¾“å…¥å…·ä½“å‹å·ï¼ˆå¦‚ï¼šUltra W OCï¼‰" />[m
[32m+[m[32m</el-form-item>[m
[32m+[m[32m        <el-form-item label="æ•£çƒ­å™¨" prop="cooler">[m
[32m+[m[32m          <el-input v-model="form.cooler" placeholder="è¯·è¾“å…¥æ•£çƒ­å™¨" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="ç”µæº" prop="powerSupply">[m
[32m+[m[32m          <el-input v-model="form.powerSupply" placeholder="è¯·è¾“å…¥ç”µæº" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="æœºç®±" prop="chassis">[m
[32m+[m[32m          <el-input v-model="form.chassis" placeholder="è¯·è¾“å…¥æœºç®±" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="å›¾ç‰‡URL" prop="imageUrl">[m
[32m+[m[32m          <image-upload v-model="form.imageUrl"/>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="çŠ¶æ€" prop="status">[m
[32m+[m[32m          <el-radio-group v-model="form.status">[m
[32m+[m[32m            <el-radio[m
[32m+[m[32m              v-for="dict in sys_normal_disable"[m
[32m+[m[32m              :key="dict.value"[m
[32m+[m[32m              :label="dict.value"[m
[32m+[m[32m            >{{dict.label}}</el-radio>[m
[32m+[m[32m          </el-radio-group>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m        <el-form-item label="å¤‡æ³¨" prop="remark">[m
[32m+[m[32m          <el-input v-model="form.remark" type="textarea" placeholder="è¯·è¾“å…¥å†…å®¹" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m      </el-form>[m
[32m+[m[32m      <template #footer>[m
[32m+[m[32m        <div class="dialog-footer">[m
[32m+[m[32m          <el-button type="primary" @click="submitForm">ç¡® å®š</el-button>[m
[32m+[m[32m          <el-button @click="cancel">å– æ¶ˆ</el-button>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </template>[m
[32m+[m[32m    </el-dialog>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup name="Product">[m
[32m+[m[32mimport { ref, reactive, toRefs, getCurrentInstance, onMounted } from 'vue'[m
[32m+[m[32mimport { listProduct, getProduct, delProduct, addProduct, updateProduct, listCpu, listGpu, listMemory } from "@/api/system/product"[m
[32m+[m[32mimport useUserStore from '@/store/modules/user'[m
[32m+[m[32mimport { listDept, getDept } from "@/api/system/dept"[m
[32m+[m
[32m+[m[32m// è·å–proxyï¼ˆä¼˜åŒ–ç”Ÿäº§ç¯å¢ƒå…¼å®¹æ€§ï¼‰[m
[32m+[m[32mconst { proxy } = getCurrentInstance() || {}[m
[32m+[m[32mconst { product_type, sys_normal_disable } = proxy?.useDict('product_type', 'sys_normal_disable') || { product_type: [], sys_normal_disable: [] }[m
[32m+[m
[32m+[m[32m// å“åº”å¼æ•°æ®å®šä¹‰[m
[32m+[m[32mconst productList = ref([])[m
[32m+[m[32mconst open = ref(false)[m
[32m+[m[32mconst loading = ref(true)[m
[32m+[m[32mconst showSearch = ref(true)[m
[32m+[m[32mconst ids = ref([])[m
[32m+[m[32mconst single = ref(true)[m
[32m+[m[32mconst multiple = ref(true)[m
[32m+[m[32mconst total = ref(0)[m
[32m+[m[32mconst title = ref("")[m
[32m+[m
[32m+[m[32m// ç¡¬ä»¶åˆ—è¡¨ç›¸å…³[m
[32m+[m[32mconst cpuList = ref([])[m
[32m+[m[32mconst gpuList = ref([])[m
[32m+[m[32mconst gpuLoading = ref(false)[m
[32m+[m[32mconst cpuLoading = ref(false)[m
[32m+[m[32mconst memoryTypeList = ref([])[m
[32m+[m[32mconst memoryFrequencyList = ref([])[m
[32m+[m
[32m+[m[32m// éƒ¨é—¨ç›¸å…³[m
[32m+[m[32mconst isAdmin = ref(false)[m
[32m+[m[32mconst deptList = ref([])[m
[32m+[m[32mconst userStore = useUserStore()[m
[32m+[m
[32m+[m[32m// æŸ¥è¯¢å‚æ•°ï¼ˆä»…ä¿ç•™åˆ—è¡¨ç­›é€‰å­—æ®µï¼‰[m
[32m+[m[32mconst queryParams = reactive({[m
[32m+[m[32m  pageNum: 1,[m
[32m+[m[32m  pageSize: 10,[m
[32m+[m[32m  productName: null,[m
[32m+[m[32m  productType: null,[m
[32m+[m[32m  salePrice: null,[m
[32m+[m[32m  cpu: null,[m
[32m+[m[32m  graphicsCard: null,[m
[32m+[m[32m  status: null[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32m// è¡¨å•åˆå§‹å€¼å®šä¹‰[m
[32m+[m[32mconst initialForm = {[m
[32m+[m[32m  id: null,[m
[32m+[m[32m  productName: null,[m
[32m+[m[32m  productType: null,[m
[32m+[m[32m  rentPrice: null,[m
[32m+[m[32m  salePrice: null,[m
[32m+[m[32m  stockQuantity: null,[m
[32m+[m[32m  availableRent: null,[m
[32m+[m[32m  cpu: null,[m
[32m+[m[32m  motherboard: null,[m
[32m+[m[32m  memory: null,[m
[32m+[m[32m  ssd: null,[m
[32m+[m[32m  graphicsCard: null,[m
[32m+[m[32m  cooler: null,[m
[32m+[m[32m  powerSupply: null,[m
[32m+[m[32m  chassis: null,[m
[32m+[m[32m  imageUrl: null,[m
[32m+[m[32m  status: "0", // é»˜è®¤çŠ¶æ€ï¼ˆå¯ç”¨ï¼‰[m
[32m+[m[32m  createBy: null,[m
[32m+[m[32m  createTime: null,[m
[32m+[m[32m  updateBy: null,[m
[32m+[m[32m  updateTime: null,[m
[32m+[m[32m  remark: null,[m
[32m+[m[32m  // å…³è”å­—æ®µ[m
[32m+[m[32m  gpuModel: null,[m
[32m+[m[32m  memoryType: null,[m
[32m+[m[32m  memoryFrequency: null,[m
[32m+[m[32m  // æ˜¾å¡ç»†åˆ†å­—æ®µ[m
[32m+[m[32m  graphicsCardBrand: null,[m
[32m+[m[32m  graphicsCardModel: null,[m
[32m+[m[32m  graphicsCardSpecific: null,[m
[32m+[m[32m  // å†…å­˜ç»†åˆ†å­—æ®µ[m
[32m+[m[32m  memoryBrandAndModel: null,[m
[32m+[m[32m  // éƒ¨é—¨ç›¸å…³[m
[32m+[m[32m  deptId: null,[m
[32m+[m[32m  deptName: null[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// è¡¨å•æ•°æ®ï¼ˆä»…ä¿ç•™ä¸€ä»½å®šä¹‰ï¼‰[m
[32m+[m[32mconst form = reactive({ ...initialForm })[m
[32m+[m
[32m+[m[32m// è¡¨å•æ ¡éªŒè§„åˆ™[m
[32m+[m[32mconst rules = reactive({[m
[32m+[m[32m  productName: [[m
[32m+[m[32m    { required: true, message: "å•†å“åç§°ä¸èƒ½ä¸ºç©º", trigger: "blur" }[m
[32m+[m[32m  ][m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32m/** æŸ¥è¯¢å•†å“åˆ—è¡¨ */[m
[32m+[m[32mfunction getList() {[m
[32m+[m[32m  loading.value = true[m
[32m+[m[32m  listProduct(queryParams).then(response => {[m
[32m+[m[32m    productList.value = response.rows || [][m
[32m+[m[32m    total.value = response.total || 0[m
[32m+[m[32m    loading.value = false[m
[32m+[m[32m  }).catch(error => {[m
[32m+[m[32m    console.error('è·å–å•†å“åˆ—è¡¨å¤±è´¥:', error)[m
[32m+[m[32m    loading.value = false[m
[32m+[m[32m    proxy?.$modal?.msgError('è·å–å•†å“åˆ—è¡¨å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•')[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** å–æ¶ˆæŒ‰é’® */[m
[32m+[m[32mfunction cancel() {[m
[32m+[m[32m  open.value = false[m
[32m+[m[32m  resetForm()[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** è¡¨å•é‡ç½® */[m
[32m+[m[32mfunction resetForm() {[m
[32m+[m[32m  // 1. æ¸…é™¤reactiveå¯¹è±¡ä¸Šçš„æ‰€æœ‰å±æ€§ï¼ˆé˜²æ­¢æ®‹ç•™åç«¯è¿”å›çš„å¤šä½™å­—æ®µï¼‰[m
[32m+[m[32m  for (const key in form) {[m
[32m+[m[32m    delete form[key][m
[32m+[m[32m  }[m
[32m+[m[41m  [m
[32m+[m[32m  // 2. é‡æ–°èµ‹å€¼åˆå§‹çŠ¶æ€[m
[32m+[m[32m  Object.assign(form, initialForm)[m
[32m+[m[41m  [m
[32m+[m[32m  // 3. å¤„ç†ç‰¹æ®Šé€»è¾‘ï¼šéç®¡ç†å‘˜è‡ªåŠ¨å›å¡«éƒ¨é—¨ID[m
[32m+[m[32m  if (!isAdmin.value && userStore.deptId) {[m
[32m+[m[32m    form.deptId = userStore.deptId[m
[32m+[m[32m    form.deptName = userStore.deptName || 'å½“å‰éƒ¨é—¨'[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  // 4. é‡ç½®æ ¡éªŒçŠ¶æ€[m
[32m+[m[32m  proxy?.resetForm("productRef")[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** æœç´¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleQuery() {[m
[32m+[m[32m  queryParams.pageNum = 1[m
[32m+[m[32m  getList()[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** é‡ç½®æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction resetQuery() {[m
[32m+[m[32m  Object.assign(queryParams, {[m
[32m+[m[32m    productName: null,[m
[32m+[m[32m    productType: null,[m
[32m+[m[32m    salePrice: null,[m
[32m+[m[32m    cpu: null,[m
[32m+[m[32m    graphicsCard: null,[m
[32m+[m[32m    status: null[m
[32m+[m[32m  })[m
[32m+[m[32m  handleQuery()[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** å¤šé€‰æ¡†é€‰ä¸­äº‹ä»¶ */[m
[32m+[m[32mfunction handleSelectionChange(selection) {[m
[32m+[m[32m  ids.value = selection.map(item => item.id)[m
[32m+[m[32m  single.value = selection.length !== 1[m
[32m+[m[32m  multiple.value = !selection.length[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** è·å–éƒ¨é—¨åˆ—è¡¨ï¼ˆä¿®æ­£ï¼šå»æ‰åˆ†é¡µå‚æ•°ï¼Œåç«¯ä¸æ”¯æŒåˆ†é¡µï¼‰ */[m
[32m+[m[32masync function getDeptList() {[m
[32m+[m[32m  try {[m
[32m+[m[32m    console.log('å¼€å§‹è·å–éƒ¨é—¨åˆ—è¡¨ï¼ˆæ— åˆ†é¡µå‚æ•°ï¼‰')[m
[32m+[m[32m    // åç«¯listDeptæ–¹æ³•ä¸æ¥æ”¶åˆ†é¡µå‚æ•°ï¼Œç›´æ¥ä¼ ç©ºå¯¹è±¡[m
[32m+[m[32m    const response = await listDept({})[m
[32m+[m[32m    console.log('éƒ¨é—¨åˆ—è¡¨æ¥å£è¿”å›å®Œæ•´å“åº”:', response)[m
[32m+[m[41m    [m
[32m+[m[32m    // åç«¯ç›´æ¥è¿”å›éƒ¨é—¨åˆ—è¡¨æ•°ç»„ï¼Œä¸æ˜¯åˆ†é¡µå¯¹è±¡[m
[32m+[m[32m    if (response.code === 200) {[m
[32m+[m[32m      deptList.value = response.data || [][m
[32m+[m[32m      console.log('éƒ¨é—¨åˆ—è¡¨è·å–æˆåŠŸï¼Œå…±', deptList.value.length, 'ä¸ªéƒ¨é—¨')[m
[32m+[m[32m    } else {[m
[32m+[m[32m      console.error('éƒ¨é—¨åˆ—è¡¨æ¥å£è¿”å›é”™è¯¯ç :', response.code, 'æ¶ˆæ¯:', response.msg)[m
[32m+[m[32m      deptList.value = [][m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    // éç®¡ç†å‘˜è‡ªåŠ¨å¡«å……éƒ¨é—¨ä¿¡æ¯[m
[32m+[m[32m    if (!isAdmin.value && userStore.deptId) {[m
[32m+[m[32m      form.deptId = userStore.deptId[m
[32m+[m[32m      form.deptName = userStore.deptName || 'å½“å‰éƒ¨é—¨'[m
[32m+[m[32m      console.log('è‡ªåŠ¨å¡«å……éƒ¨é—¨ä¿¡æ¯:', { deptId: form.deptId, deptName: form.deptName })[m
[32m+[m[32m    }[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    console.error('è·å–éƒ¨é—¨åˆ—è¡¨å¤±è´¥ - è¯¦ç»†é”™è¯¯ä¿¡æ¯:', error)[m
[32m+[m[32m    deptList.value = [][m
[32m+[m[41m    [m
[32m+[m[32m    // éç®¡ç†å‘˜ç›´æ¥ç”¨ç”¨æˆ·ä¿¡æ¯ï¼Œç®¡ç†å‘˜æç¤ºé”™è¯¯[m
[32m+[m[32m    if (!isAdmin.value && userStore.deptId) {[m
[32m+[m[32m      form.deptId = userStore.deptId[m
[32m+[m[32m      form.deptName = userStore.deptName || 'å½“å‰éƒ¨é—¨'[m
[32m+[m[32m    } else if (isAdmin.value) {[m
[32m+[m[32m      proxy?.$modal?.msgWarning('è·å–éƒ¨é—¨åˆ—è¡¨å¤±è´¥ï¼Œéƒ¨åˆ†åŠŸèƒ½å¯èƒ½å—é™ï¼Œè¯·è”ç³»ç®¡ç†å‘˜')[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** æ–°å¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleAdd() {[m
[32m+[m[32m  resetForm()[m
[32m+[m[32m  open.value = true[m
[32m+[m[32m  title.value = "æ·»åŠ å•†å“"[m
[32m+[m
[32m+[m[32m  // ç®¡ç†å‘˜åŠ è½½éƒ¨é—¨åˆ—è¡¨ï¼Œéç®¡ç†å‘˜ç›´æ¥ç”¨ç”¨æˆ·éƒ¨é—¨ä¿¡æ¯[m
[32m+[m[32m  if (isAdmin.value && deptList.value.length === 0) {[m
[32m+[m[32m    getDeptList()[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** ä¿®æ”¹æŒ‰é’®æ“ä½œ */[m
[32m+[m[32masync function handleUpdate(row) {[m
[32m+[m[32m  console.log('å¼€å§‹ä¿®æ”¹å•†å“ï¼Œä¼ å…¥è¡Œæ•°æ®:', row)[m
[32m+[m[32m  resetForm()[m
[32m+[m[32m  const targetId = row?.id || ids.value[0][m
[32m+[m[32m  if (!targetId) {[m
[32m+[m[32m    console.warn('æœªæ‰¾åˆ°ç›®æ ‡å•†å“ID')[m
[32m+[m[32m    return[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  try {[m
[32m+[m[32m    console.log('è·å–å•†å“è¯¦æƒ…ï¼ŒID:', targetId)[m
[32m+[m[32m    const response = await getProduct(targetId)[m
[32m+[m[32m    console.log('å•†å“è¯¦æƒ…æ¥å£è¿”å›:', response)[m
[32m+[m[41m    [m
[32m+[m[32m    const productData = response.data || {}[m
[32m+[m[32m    console.log('å•†å“æ•°æ®:', productData)[m
[32m+[m[32m    Object.assign(form, productData)[m
[32m+[m
[32m+[m[32m    // è§£ææ˜¾å¡ä¿¡æ¯ï¼ˆå¢åŠ ç©ºå€¼ä¿æŠ¤ï¼‰[m
[32m+[m[32m    const fullGraphicsInfo = form.graphicsCard || ''[m
[32m+[m[32m    if (fullGraphicsInfo) {[m
[32m+[m[32m      // é¢„å¤„ç†å­—ç¬¦ä¸²[m
[32m+[m[32m      let processedInfo = fullGraphicsInfo[m
[32m+[m[32m        .replace(/([\u4e00-\u9fa5])([A-Z])/g, '$1 $2') // ä¸­æ–‡ååŠ ç©ºæ ¼[m
[32m+[m[32m        .replace(/(RTX\s*\d+)(Ti)/gi, '$1 $2')[m
[32m+[m[32m        .replace(/(RTX|RX|GT)\s*(\d+)/gi, '$1 $2')[m
[32m+[m[41m      [m
[32m+[m[32m      const cardParts = processedInfo.trim().split(/\s+/)[m
[32m+[m[32m      if (cardParts.length) {[m
[32m+[m[32m        form.graphicsCardBrand = cardParts[0][m
[32m+[m[41m        [m
[32m+[m[32m        // æå–å‹å·éƒ¨åˆ†[m
[32m+[m[32m        const modelEndIndex = cardParts.findIndex((part, index) => {[m
[32m+[m[32m          if (index === 0) return false[m
[32m+[m[32m          const upperPart = part.toUpperCase()[m
[32m+[m[32m          return !["NVIDIA", "AMD", "INTEL", "GEFORCE", "RADEON", "ARC", "RTX", "RX", "GT", "TI", "SUPER"].includes(upperPart) && !/^\d+$/.test(part)[m
[32m+[m[32m        })[m
[32m+[m[41m        [m
[32m+[m[32m        const modelParts = modelEndIndex > 0 ? cardParts.slice(1, modelEndIndex) : cardParts.slice(1)[m
[32m+[m[32m        form.graphicsCardModel = modelParts.join(' ')[m
[32m+[m[32m        form.graphicsCardSpecific = modelEndIndex > 0 ? cardParts.slice(modelEndIndex).join(' ') : ''[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    // è§£æå†…å­˜ä¿¡æ¯ï¼ˆå¢åŠ æ­£åˆ™åŒ¹é…å®¹é”™ï¼‰[m
[32m+[m[32m    const memoryText = form.memory || ''[m
[32m+[m[32m    const memoryRegex = /^(.*?)(?:\s+(DDR\d+))?(?:\s+(\d+))?(\s*MHz)?$/i[m
[32m+[m[32m    const match = memoryRegex.exec(memoryText.trim())[m
[32m+[m[32m    if (match) {[m
[32m+[m[32m      form.memoryBrandAndModel = match[1]?.trim() || ''[m
[32m+[m[32m      form.memoryType = match[2] || null[m
[32m+[m[32m      form.memoryFrequency = match[3] ? parseInt(match[3], 10) : null[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    // éƒ¨é—¨ä¿¡æ¯å›æ˜¾[m
[32m+[m[32m    if (form.deptId && !isAdmin.value) {[m
[32m+[m[32m      form.deptName = userStore.deptName || 'å½“å‰éƒ¨é—¨'[m
[32m+[m[32m    } else if (form.deptId && isAdmin.value && deptList.value.length === 0) {[m
[32m+[m[32m      await getDeptList()[m
[32m+[m[32m      const currentDept = deptList.value.find(d => d.deptId === form.deptId)[m
[32m+[m[32m      form.deptName = currentDept?.deptName[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    open.value = true[m
[32m+[m[32m    title.value = "ä¿®æ”¹å•†å“"[m
[32m+[m[32m    console.log('ä¿®æ”¹å¯¹è¯æ¡†å·²æ‰“å¼€')[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    console.error('è·å–å•†å“è¯¦æƒ…å¤±è´¥ - è¯¦ç»†é”™è¯¯:', error)[m
[32m+[m[32m    proxy?.$modal?.msgError(`è·å–å•†å“è¯¦æƒ…å¤±è´¥: ${error.message || 'æœªçŸ¥é”™è¯¯'}`)[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** è·å–CPUåˆ—è¡¨ */[m
[32m+[m[32masync function getCpuList() {[m
[32m+[m[32m  try {[m
[32m+[m[32m    const response = await listCpu({})[m
[32m+[m[32m    cpuList.value = response.rows || [][m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    console.error('è·å–CPUåˆ—è¡¨å¤±è´¥:', error)[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** è·å–GPUåˆ—è¡¨ */[m
[32m+[m[32masync function getGpuList() {[m
[32m+[m[32m  try {[m
[32m+[m[32m    const response = await listGpu({})[m
[32m+[m[32m    gpuList.value = (response.rows || []).map(item => ({[m
[32m+[m[32m      brand: item.brand,[m
[32m+[m[32m      model: item.model[m
[32m+[m[32m    }))[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    console.error('è·å–GPUåˆ—è¡¨å¤±è´¥:', error)[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** è·å–å†…å­˜ç±»å‹å’Œé¢‘ç‡åˆ—è¡¨ */[m
[32m+[m[32masync function getMemoryList() {[m
[32m+[m[32m  try {[m
[32m+[m[32m    const response = await listMemory({ pageNum: 1, pageSize: 1000 })[m
[32m+[m[32m    const memoryList = response.rows || [][m
[32m+[m[41m    [m
[32m+[m[32m    // å»é‡å¹¶æ ¼å¼åŒ–ç±»å‹å’Œé¢‘ç‡[m
[32m+[m[32m    const types = [...new Set(memoryList.map(item => item.type).filter(Boolean))][m
[32m+[m[32m    const frequencies = [...new Set(memoryList.map(item => item.frequency).filter(Boolean))][m
[32m+[m[41m    [m
[32m+[m[32m    memoryTypeList.value = types.map(type => ({ type }))[m
[32m+[m[32m    memoryFrequencyList.value = frequencies.map(freq => ({ frequency: freq }))[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    console.error('è·å–å†…å­˜åˆ—è¡¨å¤±è´¥:', error)[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** GPUæ¨¡ç³Šæœç´¢ */[m
[32m+[m[32masync function remoteGpuMethod(query) {[m
[32m+[m[32m  if (!query) return[m
[32m+[m[32m  gpuLoading.value = true[m
[32m+[m[32m  try {[m
[32m+[m[32m    const response = await listGpu({ model: query })[m
[32m+[m[32m    gpuList.value = (response.rows || []).map(item => ({[m
[32m+[m[32m      brand: item.brand,[m
[32m+[m[32m      model: item.model[m
[32m+[m[32m    }))[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    console.error('æœç´¢GPUå¤±è´¥:', error)[m
[32m+[m[32m  } finally {[m
[32m+[m[32m    gpuLoading.value = false[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** CPUæ¨¡ç³Šæœç´¢ */[m
[32m+[m[32masync function remoteCpuMethod(query) {[m
[32m+[m[32m  if (!query) return[m
[32m+[m[32m  cpuLoading.value = true[m
[32m+[m[32m  try {[m
[32m+[m[32m    const response = await listCpu({ model: query })[m
[32m+[m[32m    cpuList.value = response.rows || [][m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    console.error('æœç´¢CPUå¤±è´¥:', error)[m
[32m+[m[32m  } finally {[m
[32m+[m[32m    cpuLoading.value = false[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** æäº¤è¡¨å• */[m
[32m+[m[32masync function submitForm() {[m
[32m+[m[32m  try {[m
[32m+[m[32m    const valid = await proxy?.$refs?.productRef?.validate()[m
[32m+[m[32m    if (!valid) return[m
[32m+[m
[32m+[m[32m    // æ‹¼æ¥æ˜¾å¡ä¿¡æ¯ï¼ˆå¤„ç†ç©ºå€¼ï¼‰[m
[32m+[m[32m    const graphicsCardParts = [[m
[32m+[m[32m      form.graphicsCardBrand,[m
[32m+[m[32m      form.graphicsCardModel,[m
[32m+[m[32m      form.graphicsCardSpecific[m
[32m+[m[32m    ].filter(Boolean)[m
[32m+[m[32m    form.graphicsCard = graphicsCardParts.join(' ')[m
[32m+[m[32m    form.gpuModel = form.graphicsCardModel // å…³è”GPUå‹å·[m
[32m+[m
[32m+[m[32m    // æ‹¼æ¥å†…å­˜ä¿¡æ¯ï¼ˆå¤„ç†ç©ºå€¼ï¼‰[m
[32m+[m[32m    const memoryParts = [[m
[32m+[m[32m      form.memoryBrandAndModel,[m
[32m+[m[32m      form.memoryType,[m
[32m+[m[32m      form.memoryFrequency ? `${form.memoryFrequency} MHz` : ''[m
[32m+[m[32m    ].filter(Boolean)[m
[32m+[m[32m    form.memory = memoryParts.join(' ')[m
[32m+[m
[32m+[m[32m    // æäº¤æ•°æ®[m
[32m+[m[32m    if (form.id) {[m
[32m+[m[32m      await updateProduct(form)[m
[32m+[m[32m      proxy?.$modal?.msgSuccess("ä¿®æ”¹æˆåŠŸ")[m
[32m+[m[32m    } else {[m
[32m+[m[32m      await addProduct(form)[m
[32m+[m[32m      proxy?.$modal?.msgSuccess("æ–°å¢æˆåŠŸ")[m
[32m+[m[32m    }[m
[32m+[m[41m    [m
[32m+[m[32m    open.value = false[m
[32m+[m[32m    getList()[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    console.error('æäº¤è¡¨å•å¤±è´¥:', error)[m
[32m+[m[32m    proxy?.$modal?.msgError(form.id ? 'ä¿®æ”¹å¤±è´¥' : 'æ–°å¢å¤±è´¥')[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** åˆ é™¤æ“ä½œ */[m
[32m+[m[32masync function handleDelete(row) {[m
[32m+[m[32m  const targetIds = row?.id ? [row.id] : ids.value[m
[32m+[m[32m  if (!targetIds.length) return[m
[32m+[m
[32m+[m[32m  try {[m
[32m+[m[32m    await proxy?.$modal?.confirm('æ˜¯å¦ç¡®è®¤åˆ é™¤é€‰ä¸­çš„æ•°æ®é¡¹ï¼Ÿ')[m
[32m+[m[32m    await delProduct(targetIds)[m
[32m+[m[32m    proxy?.$modal?.msgSuccess("åˆ é™¤æˆåŠŸ")[m
[32m+[m[32m    getList()[m
[32m+[m[32m  } catch (error) {[m
[32m+[m[32m    console.error('åˆ é™¤å¤±è´¥:', error)[m
[32m+[m[32m    if (error !== 'cancel') proxy?.$modal?.msgError('åˆ é™¤å¤±è´¥')[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** å¯¼å‡ºæ“ä½œ */[m
[32m+[m[32mfunction handleExport() {[m
[32m+[m[32m  proxy?.download('system/product/export', { ...queryParams }, `product_${new Date().getTime()}.xlsx`)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m/** åˆå§‹åŒ–å‡½æ•° */[m
[32m+[m[32masync function init() {[m
[32m+[m[32m  // åˆ¤æ–­æ˜¯å¦ä¸ºç®¡ç†å‘˜[m
[32m+[m[32m  isAdmin.value = userStore.roles?.includes('admin') || false[m
[32m+[m[32m  console.log('åˆå§‹åŒ– - ç”¨æˆ·è§’è‰²:', userStore.roles, 'æ˜¯å¦ä¸ºç®¡ç†å‘˜:', isAdmin.value)[m
[32m+[m[32m  console.log('åˆå§‹åŒ– - ç”¨æˆ·éƒ¨é—¨ä¿¡æ¯:', { deptId: userStore.deptId, deptName: userStore.deptName })[m
[32m+[m[41m  [m
[32m+[m[32m  // é¢„åŠ è½½åŸºç¡€æ•°æ®[m
[32m+[m[32m  Promise.all([[m
[32m+[m[32m    getCpuList(),[m
[32m+[m[32m    getGpuList(),[m
[32m+[m[32m    getMemoryList()[m
[32m+[m[32m  ]).catch(error => console.error('é¢„åŠ è½½ç¡¬ä»¶æ•°æ®å¤±è´¥:', error))[m
[32m+[m
[32m+[m[32m  // ç®¡ç†å‘˜åŠ è½½éƒ¨é—¨åˆ—è¡¨ï¼Œéç®¡ç†å‘˜ç›´æ¥è®¾ç½®éƒ¨é—¨ä¿¡æ¯[m
[32m+[m[32m  if (isAdmin.value) {[m
[32m+[m[32m    console.log('ç®¡ç†å‘˜ç”¨æˆ·ï¼ŒåŠ è½½éƒ¨é—¨åˆ—è¡¨')[m
[32m+[m[32m    getDeptList()[m
[32m+[m[32m  } else if (userStore.deptId) {[m
[32m+[m[32m    console.log('éç®¡ç†å‘˜ç”¨æˆ·ï¼Œç›´æ¥ä½¿ç”¨è‡ªèº«éƒ¨é—¨ä¿¡æ¯')[m
[32m+[m[32m    form.deptId = userStore.deptId[m
[32m+[m[32m    form.deptName = userStore.deptName || 'å½“å‰éƒ¨é—¨'[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m// é¡µé¢æŒ‚è½½æ—¶åˆå§‹åŒ–[m
[32m+[m[32monMounted(() => {[m
[32m+[m[32m  init()[m
[32m+[m[32m  getList()[m
[32m+[m[32m})[m
[32m+[m[32m</script>[m
\ No newline at end of file[m
[1mdiff --git a/src/views/system/role/authUser.vue b/src/views/system/role/authUser.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..66b5f5e6[m
[1m--- /dev/null[m
[1m+++ b/src/views/system/role/authUser.vue[m
[36m@@ -0,0 +1,172 @@[m
[32m+[m
[32m+[m[32m<template>[m
[32m+[m[32m   <div class="app-container">[m
[32m+[m[32m      <el-form :model="queryParams" ref="queryRef" v-show="showSearch" :inline="true">[m
[32m+[m[32m         <el-form-item label="ç”¨æˆ·åç§°" prop="userName">[m
[32m+[m[32m            <el-input[m
[32m+[m[32m               v-model="queryParams.userName"[m
[32m+[m[32m               placeholder="è¯·è¾“å…¥ç”¨æˆ·åç§°"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 240px"[m
[32m+[m[32m               @keyup.enter="handleQuery"[m
[32m+[m[32m            />[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="æ‰‹æœºå·ç " prop="phonenumber">[m
[32m+[m[32m            <el-input[m
[32m+[m[32m               v-model="queryParams.phonenumber"[m
[32m+[m[32m               placeholder="è¯·è¾“å…¥æ‰‹æœºå·ç "[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 240px"[m
[32m+[m[32m               @keyup.enter="handleQuery"[m
[32m+[m[32m            />[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item>[m
[32m+[m[32m            <el-button type="primary" icon="Search" @click="handleQuery">æœç´¢</el-button>[m
[32m+[m[32m            <el-button icon="Refresh" @click="resetQuery">é‡ç½®</el-button>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m      </el-form>[m
[32m+[m
[32m+[m[32m      <el-row :gutter="10" class="mb8">[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="primary"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Plus"[m
[32m+[m[32m               @click="openSelectUser"[m
[32m+[m[32m               v-hasPermi="['system:role:add']"[m
[32m+[m[32m            >æ·»åŠ ç”¨æˆ·</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="danger"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="CircleClose"[m
[32m+[m[32m               :disabled="multiple"[m
[32m+[m[32m               @click="cancelAuthUserAll"[m
[32m+[m[32m               v-hasPermi="['system:role:remove']"[m
[32m+[m[32m            >æ‰¹é‡å–æ¶ˆæˆæƒ</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m[41m [m
[32m+[m[32m               type="warning"[m[41m [m
[32m+[m[32m               plain[m[41m [m
[32m+[m[32m               icon="Close"[m
[32m+[m[32m               @click="handleClose"[m
[32m+[m[32m            >å…³é—­</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <right-toolbar v-model:showSearch="showSearch" @queryTable="getList"></right-toolbar>[m
[32m+[m[32m      </el-row>[m
[32m+[m
[32m+[m[32m      <el-table v-loading="loading" :data="userList" @selection-change="handleSelectionChange">[m
[32m+[m[32m         <el-table-column type="selection" width="55" align="center" />[m
[32m+[m[32m         <el-table-column label="ç”¨æˆ·åç§°" prop="userName" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="ç”¨æˆ·æ˜µç§°" prop="nickName" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="é‚®ç®±" prop="email" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="æ‰‹æœº" prop="phonenumber" :show-overflow-tooltip="true" />[m
[32m+[m[32m         <el-table-column label="çŠ¶æ€" align="center" prop="status">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <dict-tag :options="sys_normal_disable" :value="scope.row.status" />[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="åˆ›å»ºæ—¶é—´" align="center" prop="createTime" width="180">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <span>{{ parseTime(scope.row.createTime) }}</span>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="æ“ä½œ" align="center" class-name="small-padding fixed-width">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <el-button link type="primary" icon="CircleClose" @click="cancelAuthUser(scope.row)" v-hasPermi="['system:role:remove']">å–æ¶ˆæˆæƒ</el-button>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m      </el-table>[m
[32m+[m
[32m+[m[32m      <pagination[m
[32m+[m[32m         v-show="total > 0"[m
[32m+[m[32m         :total="total"[m
[32m+[m[32m         v-model:page="queryParams.pageNum"[m
[32m+[m[32m         v-model:limit="queryParams.pageSize"[m
[32m+[m[32m         @pagination="getList"[m
[32m+[m[32m      />[m
[32m+[m[32m      <select-user ref="selectRef" :roleId="queryParams.roleId" @ok="handleQuery" />[m
[32m+[m[32m   </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup name="AuthUser">[m
[32m+[m[32mimport selectUser from "./selectUser";[m
[32m+[m[32mimport { allocatedUserList, authUserCancel, authUserCancelAll } from "@/api/system/role";[m
[32m+[m
[32m+[m[32mconst route = useRoute();[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m[32mconst { sys_normal_disable } = proxy.useDict("sys_normal_disable");[m
[32m+[m
[32m+[m[32mconst userList = ref([]);[m
[32m+[m[32mconst loading = ref(true);[m
[32m+[m[32mconst showSearch = ref(true);[m
[32m+[m[32mconst multiple = ref(true);[m
[32m+[m[32mconst total = ref(0);[m
[32m+[m[32mconst userIds = ref([]);[m
[32m+[m
[32m+[m[32mconst queryParams = reactive({[m
[32m+[m[32m  pageNum: 1,[m
[32m+[m[32m  pageSize: 10,[m
[32m+[m[32m  roleId: route.params.roleId,[m
[32m+[m[32m  userName: undefined,[m
[32m+[m[32m  phonenumber: undefined,[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m/** æŸ¥è¯¢æˆæƒç”¨æˆ·åˆ—è¡¨ */[m
[32m+[m[32mfunction getList() {[m
[32m+[m[32m  loading.value = true;[m
[32m+[m[32m  allocatedUserList(queryParams).then(response => {[m
[32m+[m[32m    userList.value = response.rows;[m
[32m+[m[32m    total.value = response.total;[m
[32m+[m[32m    loading.value = false;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m// è¿”å›æŒ‰é’®[m
[32m+[m[32mfunction handleClose() {[m
[32m+[m[32m  const obj = { path: "/system/role" };[m
[32m+[m[32m  proxy.$tab.closeOpenPage(obj);[m
[32m+[m[32m}[m
[32m+[m[32m/** æœç´¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleQuery() {[m
[32m+[m[32m  queryParams.pageNum = 1;[m
[32m+[m[32m  getList();[m
[32m+[m[32m}[m
[32m+[m[32m/** é‡ç½®æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction resetQuery() {[m
[32m+[m[32m  proxy.resetForm("queryRef");[m
[32m+[m[32m  handleQuery();[m
[32m+[m[32m}[m
[32m+[m[32m// å¤šé€‰æ¡†é€‰ä¸­æ•°æ®[m
[32m+[m[32mfunction handleSelectionChange(selection) {[m
[32m+[m[32m  userIds.value = selection.map(item => item.userId);[m
[32m+[m[32m  multiple.value = !selection.length;[m
[32m+[m[32m}[m
[32m+[m[32m/** æ‰“å¼€æˆæƒç”¨æˆ·è¡¨å¼¹çª— */[m
[32m+[m[32mfunction openSelectUser() {[m
[32m+[m[32m  proxy.$refs["selectRef"].show();[m
[32m+[m[32m}[m
[32m+[m[32m/** å–æ¶ˆæˆæƒæŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction cancelAuthUser(row) {[m
[32m+[m[32m  proxy.$modal.confirm('ç¡®è®¤è¦å–æ¶ˆè¯¥ç”¨æˆ·"' + row.userName + '"è§’è‰²å—ï¼Ÿ').then(function () {[m
[32m+[m[32m    return authUserCancel({ userId: row.userId, roleId: queryParams.roleId });[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    getList();[m
[32m+[m[32m    proxy.$modal.msgSuccess("å–æ¶ˆæˆæƒæˆåŠŸ");[m
[32m+[m[32m  }).catch(() => {});[m
[32m+[m[32m}[m
[32m+[m[32m/** æ‰¹é‡å–æ¶ˆæˆæƒæŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction cancelAuthUserAll(row) {[m
[32m+[m[32m  const roleId = queryParams.roleId;[m
[32m+[m[32m  const uIds = userIds.value.join(",");[m
[32m+[m[32m  proxy.$modal.confirm("æ˜¯å¦å–æ¶ˆé€‰ä¸­ç”¨æˆ·æˆæƒæ•°æ®é¡¹?").then(function () {[m
[32m+[m[32m    return authUserCancelAll({ roleId: roleId, userIds: uIds });[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    getList();[m
[32m+[m[32m    proxy.$modal.msgSuccess("å–æ¶ˆæˆæƒæˆåŠŸ");[m
[32m+[m[32m  }).catch(() => {});[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mgetList();[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/system/role/index.vue b/src/views/system/role/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..65c82160[m
[1m--- /dev/null[m
[1m+++ b/src/views/system/role/index.vue[m
[36m@@ -0,0 +1,559 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m   <div class="app-container">[m
[32m+[m[32m      <el-form :model="queryParams" ref="queryRef" v-show="showSearch" :inline="true" label-width="68px">[m
[32m+[m[32m         <el-form-item label="è§’è‰²åç§°" prop="roleName">[m
[32m+[m[32m            <el-input[m
[32m+[m[32m               v-model="queryParams.roleName"[m
[32m+[m[32m               placeholder="è¯·è¾“å…¥è§’è‰²åç§°"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 240px"[m
[32m+[m[32m               @keyup.enter="handleQuery"[m
[32m+[m[32m            />[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="æƒé™å­—ç¬¦" prop="roleKey">[m
[32m+[m[32m            <el-input[m
[32m+[m[32m               v-model="queryParams.roleKey"[m
[32m+[m[32m               placeholder="è¯·è¾“å…¥æƒé™å­—ç¬¦"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 240px"[m
[32m+[m[32m               @keyup.enter="handleQuery"[m
[32m+[m[32m            />[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="çŠ¶æ€" prop="status">[m
[32m+[m[32m            <el-select[m
[32m+[m[32m               v-model="queryParams.status"[m
[32m+[m[32m               placeholder="è§’è‰²çŠ¶æ€"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 240px"[m
[32m+[m[32m            >[m
[32m+[m[32m               <el-option[m
[32m+[m[32m                  v-for="dict in sys_normal_disable"[m
[32m+[m[32m                  :key="dict.value"[m
[32m+[m[32m                  :label="dict.label"[m
[32m+[m[32m                  :value="dict.value"[m
[32m+[m[32m               />[m
[32m+[m[32m            </el-select>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="åˆ›å»ºæ—¶é—´" style="width: 308px">[m
[32m+[m[32m            <el-date-picker[m
[32m+[m[32m               v-model="dateRange"[m
[32m+[m[32m               value-format="YYYY-MM-DD"[m
[32m+[m[32m               type="daterange"[m
[32m+[m[32m               range-separator="-"[m
[32m+[m[32m               start-placeholder="å¼€å§‹æ—¥æœŸ"[m
[32m+[m[32m               end-placeholder="ç»“æŸæ—¥æœŸ"[m
[32m+[m[32m            ></el-date-picker>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item>[m
[32m+[m[32m            <el-button type="primary" icon="Search" @click="handleQuery">æœç´¢</el-button>[m
[32m+[m[32m            <el-button icon="Refresh" @click="resetQuery">é‡ç½®</el-button>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m      </el-form>[m
[32m+[m[32m      <el-row :gutter="10" class="mb8">[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="primary"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Plus"[m
[32m+[m[32m               @click="handleAdd"[m
[32m+[m[32m               v-hasPermi="['system:role:add']"[m
[32m+[m[32m            >æ–°å¢</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="success"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Edit"[m
[32m+[m[32m               :disabled="single"[m
[32m+[m[32m               @click="handleUpdate"[m
[32m+[m[32m               v-hasPermi="['system:role:edit']"[m
[32m+[m[32m            >ä¿®æ”¹</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="danger"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Delete"[m
[32m+[m[32m               :disabled="multiple"[m
[32m+[m[32m               @click="handleDelete"[m
[32m+[m[32m               v-hasPermi="['system:role:remove']"[m
[32m+[m[32m            >åˆ é™¤</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="1.5">[m
[32m+[m[32m            <el-button[m
[32m+[m[32m               type="warning"[m
[32m+[m[32m               plain[m
[32m+[m[32m               icon="Download"[m
[32m+[m[32m               @click="handleExport"[m
[32m+[m[32m               v-hasPermi="['system:role:export']"[m
[32m+[m[32m            >å¯¼å‡º</el-button>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <right-toolbar v-model:showSearch="showSearch" @queryTable="getList"></right-toolbar>[m
[32m+[m[32m      </el-row>[m
[32m+[m
[32m+[m[32m      <!-- è¡¨æ ¼æ•°æ® -->[m
[32m+[m[32m      <el-table v-loading="loading" :data="roleList" @selection-change="handleSelectionChange">[m
[32m+[m[32m         <el-table-column type="selection" width="55" align="center" />[m
[32m+[m[32m         <el-table-column label="è§’è‰²ç¼–å·" prop="roleId" width="120" />[m
[32m+[m[32m         <el-table-column label="è§’è‰²åç§°" prop="roleName" :show-overflow-tooltip="true" width="150" />[m
[32m+[m[32m         <el-table-column label="æƒé™å­—ç¬¦" prop="roleKey" :show-overflow-tooltip="true" width="150" />[m
[32m+[m[32m         <el-table-column label="æ˜¾ç¤ºé¡ºåº" prop="roleSort" width="100" />[m
[32m+[m[32m         <el-table-column label="çŠ¶æ€" align="center" width="100">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <el-switch[m
[32m+[m[32m                  v-model="scope.row.status"[m
[32m+[m[32m                  active-value="0"[m
[32m+[m[32m                  inactive-value="1"[m
[32m+[m[32m                  @change="handleStatusChange(scope.row)"[m
[32m+[m[32m               ></el-switch>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="åˆ›å»ºæ—¶é—´" align="center" prop="createTime">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <span>{{ parseTime(scope.row.createTime) }}</span>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column label="æ“ä½œ" align="center" class-name="small-padding fixed-width">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m              <el-tooltip content="ä¿®æ”¹" placement="top" v-if="scope.row.roleId !== 1">[m
[32m+[m[32m                <el-button link type="primary" icon="Edit" @click="handleUpdate(scope.row)" v-hasPermi="['system:role:edit']"></el-button>[m
[32m+[m[32m              </el-tooltip>[m
[32m+[m[32m              <el-tooltip content="åˆ é™¤" placement="top" v-if="scope.row.roleId !== 1">[m
[32m+[m[32m                <el-button link type="primary" icon="Delete" @click="handleDelete(scope.row)" v-hasPermi="['system:role:remove']"></el-button>[m
[32m+[m[32m              </el-tooltip>[m
[32m+[m[32m              <el-tooltip content="æ•°æ®æƒé™" placement="top" v-if="scope.row.roleId !== 1">[m
[32m+[m[32m                <el-button link type="primary" icon="CircleCheck" @click="handleDataScope(scope.row)" v-hasPermi="['system:role:edit']"></el-button>[m
[32m+[m[32m              </el-tooltip>[m
[32m+[m[32m              <el-tooltip content="åˆ†é…ç”¨æˆ·" placement="top" v-if="scope.row.roleId !== 1">[m
[32m+[m[32m                <el-button link type="primary" icon="User" @click="handleAuthUser(scope.row)" v-hasPermi="['system:role:edit']"></el-button>[m
[32m+[m[32m              </el-tooltip>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m      </el-table>[m
[32m+[m
[32m+[m[32m      <pagination[m
[32m+[m[32m         v-show="total > 0"[m
[32m+[m[32m         :total="total"[m
[32m+[m[32m         v-model:page="queryParams.pageNum"[m
[32m+[m[32m         v-model:limit="queryParams.pageSize"[m
[32m+[m[32m         @pagination="getList"[m
[32m+[m[32m      />[m
[32m+[m
[32m+[m[32m      <!-- æ·»åŠ æˆ–ä¿®æ”¹è§’è‰²é…ç½®å¯¹è¯æ¡† -->[m
[32m+[m[32m      <el-dialog :title="title" v-model="open" width="500px" append-to-body>[m
[32m+[m[32m         <el-form ref="roleRef" :model="form" :rules="rules" label-width="100px">[m
[32m+[m[32m            <el-form-item label="è§’è‰²åç§°" prop="roleName">[m
[32m+[m[32m               <el-input v-model="form.roleName" placeholder="è¯·è¾“å…¥è§’è‰²åç§°" />[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m            <el-form-item prop="roleKey">[m
[32m+[m[32m               <template #label>[m
[32m+[m[32m                  <span>[m
[32m+[m[32m                     <el-tooltip content="æ§åˆ¶å™¨ä¸­å®šä¹‰çš„æƒé™å­—ç¬¦ï¼Œå¦‚ï¼š@PreAuthorize(`@ss.hasRole('admin')`)" placement="top">[m
[32m+[m[32m                        <el-icon><question-filled /></el-icon>[m
[32m+[m[32m                     </el-tooltip>[m
[32m+[m[32m                     æƒé™å­—ç¬¦[m
[32m+[m[32m                  </span>[m
[32m+[m[32m               </template>[m
[32m+[m[32m               <el-input v-model="form.roleKey" placeholder="è¯·è¾“å…¥æƒé™å­—ç¬¦" />[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m            <el-form-item label="è§’è‰²é¡ºåº" prop="roleSort">[m
[32m+[m[32m               <el-input-number v-model="form.roleSort" controls-position="right" :min="0" />[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m            <el-form-item label="çŠ¶æ€">[m
[32m+[m[32m               <el-radio-group v-model="form.status">[m
[32m+[m[32m                  <el-radio[m
[32m+[m[32m                     v-for="dict in sys_normal_disable"[m
[32m+[m[32m                     :key="dict.value"[m
[32m+[m[32m                     :label="dict.value"[m
[32m+[m[32m                  >{{ dict.label }}</el-radio>[m
[32m+[m[32m               </el-radio-group>[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m            <el-form-item label="èœå•æƒé™">[m
[32m+[m[32m               <el-checkbox v-model="menuExpand" @change="handleCheckedTreeExpand($event, 'menu')">å±•å¼€/æŠ˜å </el-checkbox>[m
[32m+[m[32m               <el-checkbox v-model="menuNodeAll" @change="handleCheckedTreeNodeAll($event, 'menu')">å…¨é€‰/å…¨ä¸é€‰</el-checkbox>[m
[32m+[m[32m               <el-checkbox v-model="form.menuCheckStrictly" @change="handleCheckedTreeConnect($event, 'menu')">çˆ¶å­è”åŠ¨</el-checkbox>[m
[32m+[m[32m               <el-tree[m
[32m+[m[32m                  class="tree-border"[m
[32m+[m[32m                  :data="menuOptions"[m
[32m+[m[32m                  show-checkbox[m
[32m+[m[32m                  ref="menuRef"[m
[32m+[m[32m                  node-key="id"[m
[32m+[m[32m                  :check-strictly="!form.menuCheckStrictly"[m
[32m+[m[32m                  empty-text="åŠ è½½ä¸­ï¼Œè¯·ç¨å€™"[m
[32m+[m[32m                  :props="{ label: 'label', children: 'children' }"[m
[32m+[m[32m               ></el-tree>[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m            <el-form-item label="å¤‡æ³¨">[m
[32m+[m[32m               <el-input v-model="form.remark" type="textarea" placeholder="è¯·è¾“å…¥å†…å®¹"></el-input>[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m         </el-form>[m
[32m+[m[32m         <template #footer>[m
[32m+[m[32m            <div class="dialog-footer">[m
[32m+[m[32m               <el-button type="primary" @click="submitForm">ç¡® å®š</el-button>[m
[32m+[m[32m               <el-button @click="cancel">å– æ¶ˆ</el-button>[m
[32m+[m[32m            </div>[m
[32m+[m[32m         </template>[m
[32m+[m[32m      </el-dialog>[m
[32m+[m
[32m+[m[32m      <!-- åˆ†é…è§’è‰²æ•°æ®æƒé™å¯¹è¯æ¡† -->[m
[32m+[m[32m      <el-dialog :title="title" v-model="openDataScope" width="500px" append-to-body>[m
[32m+[m[32m         <el-form :model="form" label-width="80px">[m
[32m+[m[32m            <el-form-item label="è§’è‰²åç§°">[m
[32m+[m[32m               <el-input v-model="form.roleName" :disabled="true" />[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m            <el-form-item label="æƒé™å­—ç¬¦">[m
[32m+[m[32m               <el-input v-model="form.roleKey" :disabled="true" />[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m            <el-form-item label="æƒé™èŒƒå›´">[m
[32m+[m[32m               <el-select v-model="form.dataScope" @change="dataScopeSelectChange">[m
[32m+[m[32m                  <el-option[m
[32m+[m[32m                     v-for="item in dataScopeOptions"[m
[32m+[m[32m                     :key="item.value"[m
[32m+[m[32m                     :label="item.label"[m
[32m+[m[32m                     :value="item.value"[m
[32m+[m[32m                  ></el-option>[m
[32m+[m[32m               </el-select>[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m            <el-form-item label="æ•°æ®æƒé™" v-show="form.dataScope == 2">[m
[32m+[m[32m               <el-checkbox v-model="deptExpand" @change="handleCheckedTreeExpand($event, 'dept')">å±•å¼€/æŠ˜å </el-checkbox>[m
[32m+[m[32m               <el-checkbox v-model="deptNodeAll" @change="handleCheckedTreeNodeAll($event, 'dept')">å…¨é€‰/å…¨ä¸é€‰</el-checkbox>[m
[32m+[m[32m               <el-checkbox v-model="form.deptCheckStrictly" @change="handleCheckedTreeConnect($event, 'dept')">çˆ¶å­è”åŠ¨</el-checkbox>[m
[32m+[m[32m               <el-tree[m
[32m+[m[32m                  class="tree-border"[m
[32m+[m[32m                  :data="deptOptions"[m
[32m+[m[32m                  show-checkbox[m
[32m+[m[32m                  default-expand-all[m
[32m+[m[32m                  ref="deptRef"[m
[32m+[m[32m                  node-key="id"[m
[32m+[m[32m                  :check-strictly="!form.deptCheckStrictly"[m
[32m+[m[32m                  empty-text="åŠ è½½ä¸­ï¼Œè¯·ç¨å€™"[m
[32m+[m[32m                  :props="{ label: 'label', children: 'children' }"[m
[32m+[m[32m               ></el-tree>[m
[32m+[m[32m            </el-form-item>[m
[32m+[m[32m         </el-form>[m
[32m+[m[32m         <template #footer>[m
[32m+[m[32m            <div class="dialog-footer">[m
[32m+[m[32m               <el-button type="primary" @click="submitDataScope">ç¡® å®š</el-button>[m
[32m+[m[32m               <el-button @click="cancelDataScope">å– æ¶ˆ</el-button>[m
[32m+[m[32m            </div>[m
[32m+[m[32m         </template>[m
[32m+[m[32m      </el-dialog>[m
[32m+[m[32m   </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup name="Role">[m
[32m+[m[32mimport { addRole, changeRoleStatus, dataScope, delRole, getRole, listRole, updateRole, deptTreeSelect } from "@/api/system/role";[m
[32m+[m[32mimport { roleMenuTreeselect, treeselect as menuTreeselect } from "@/api/system/menu";[m
[32m+[m
[32m+[m[32mconst router = useRouter();[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m[32mconst { sys_normal_disable } = proxy.useDict("sys_normal_disable");[m
[32m+[m
[32m+[m[32mconst roleList = ref([]);[m
[32m+[m[32mconst open = ref(false);[m
[32m+[m[32mconst loading = ref(true);[m
[32m+[m[32mconst showSearch = ref(true);[m
[32m+[m[32mconst ids = ref([]);[m
[32m+[m[32mconst single = ref(true);[m
[32m+[m[32mconst multiple = ref(true);[m
[32m+[m[32mconst total = ref(0);[m
[32m+[m[32mconst title = ref("");[m
[32m+[m[32mconst dateRange = ref([]);[m
[32m+[m[32mconst menuOptions = ref([]);[m
[32m+[m[32mconst menuExpand = ref(false);[m
[32m+[m[32mconst menuNodeAll = ref(false);[m
[32m+[m[32mconst deptExpand = ref(true);[m
[32m+[m[32mconst deptNodeAll = ref(false);[m
[32m+[m[32mconst deptOptions = ref([]);[m
[32m+[m[32mconst openDataScope = ref(false);[m
[32m+[m[32mconst menuRef = ref(null);[m
[32m+[m[32mconst deptRef = ref(null);[m
[32m+[m
[32m+[m[32m/** æ•°æ®èŒƒå›´é€‰é¡¹*/[m
[32m+[m[32mconst dataScopeOptions = ref([[m
[32m+[m[32m  { value: "1", label: "å…¨éƒ¨æ•°æ®æƒé™" },[m
[32m+[m[32m  { value: "2", label: "è‡ªå®šæ•°æ®æƒé™" },[m
[32m+[m[32m  { value: "3", label: "æœ¬éƒ¨é—¨æ•°æ®æƒé™" },[m
[32m+[m[32m  { value: "4", label: "æœ¬éƒ¨é—¨åŠä»¥ä¸‹æ•°æ®æƒé™" },[m
[32m+[m[32m  { value: "5", label: "ä»…æœ¬äººæ•°æ®æƒé™" }[m
[32m+[m[32m]);[m
[32m+[m
[32m+[m[32mconst data = reactive({[m
[32m+[m[32m  form: {},[m
[32m+[m[32m  queryParams: {[m
[32m+[m[32m    pageNum: 1,[m
[32m+[m[32m    pageSize: 10,[m
[32m+[m[32m    roleName: undefined,[m
[32m+[m[32m    roleKey: undefined,[m
[32m+[m[32m    status: undefined[m
[32m+[m[32m  },[m
[32m+[m[32m  rules: {[m
[32m+[m[32m    roleName: [{ required: true, message: "è§’è‰²åç§°ä¸èƒ½ä¸ºç©º", trigger: "blur" }],[m
[32m+[m[32m    roleKey: [{ required: true, message: "æƒé™å­—ç¬¦ä¸èƒ½ä¸ºç©º", trigger: "blur" }],[m
[32m+[m[32m    roleSort: [{ required: true, message: "è§’è‰²é¡ºåºä¸èƒ½ä¸ºç©º", trigger: "blur" }][m
[32m+[m[32m  },[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst { queryParams, form, rules } = toRefs(data);[m
[32m+[m
[32m+[m[32m/** æŸ¥è¯¢è§’è‰²åˆ—è¡¨ */[m
[32m+[m[32mfunction getList() {[m
[32m+[m[32m  loading.value = true;[m
[32m+[m[32m  listRole(proxy.addDateRange(queryParams.value, dateRange.value)).then(response => {[m
[32m+[m[32m    roleList.value = response.rows;[m
[32m+[m[32m    total.value = response.total;[m
[32m+[m[32m    loading.value = false;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** æœç´¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleQuery() {[m
[32m+[m[32m  queryParams.value.pageNum = 1;[m
[32m+[m[32m  getList();[m
[32m+[m[32m}[m
[32m+[m[32m/** é‡ç½®æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction resetQuery() {[m
[32m+[m[32m  dateRange.value = [];[m
[32m+[m[32m  proxy.resetForm("queryRef");[m
[32m+[m[32m  handleQuery();[m
[32m+[m[32m}[m
[32m+[m[32m/** åˆ é™¤æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleDelete(row) {[m
[32m+[m[32m  const roleIds = row.roleId || ids.value;[m
[32m+[m[32m  proxy.$modal.confirm('æ˜¯å¦ç¡®è®¤åˆ é™¤è§’è‰²ç¼–å·ä¸º"' + roleIds + '"çš„æ•°æ®é¡¹?').then(function () {[m
[32m+[m[32m    return delRole(roleIds);[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    getList();[m
[32m+[m[32m    proxy.$modal.msgSuccess("åˆ é™¤æˆåŠŸ");[m
[32m+[m[32m  }).catch(() => {});[m
[32m+[m[32m}[m
[32m+[m[32m/** å¯¼å‡ºæŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleExport() {[m
[32m+[m[32m  proxy.download("system/role/export", {[m
[32m+[m[32m    ...queryParams.value,[m
[32m+[m[32m  }, `role_${new Date().getTime()}.xlsx`);[m
[32m+[m[32m}[m
[32m+[m[32m/** å¤šé€‰æ¡†é€‰ä¸­æ•°æ® */[m
[32m+[m[32mfunction handleSelectionChange(selection) {[m
[32m+[m[32m  ids.value = selection.map(item => item.roleId);[m
[32m+[m[32m  single.value = selection.length != 1;[m
[32m+[m[32m  multiple.value = !selection.length;[m
[32m+[m[32m}[m
[32m+[m[32m/** è§’è‰²çŠ¶æ€ä¿®æ”¹ */[m
[32m+[m[32mfunction handleStatusChange(row) {[m
[32m+[m[32m  let text = row.status === "0" ? "å¯ç”¨" : "åœç”¨";[m
[32m+[m[32m  proxy.$modal.confirm('ç¡®è®¤è¦"' + text + '""' + row.roleName + '"è§’è‰²å—?').then(function () {[m
[32m+[m[32m    return changeRoleStatus(row.roleId, row.status);[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    proxy.$modal.msgSuccess(text + "æˆåŠŸ");[m
[32m+[m[32m  }).catch(function () {[m
[32m+[m[32m    row.status = row.status === "0" ? "1" : "0";[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** æ›´å¤šæ“ä½œ */[m
[32m+[m[32mfunction handleCommand(command, row) {[m
[32m+[m[32m  switch (command) {[m
[32m+[m[32m    case "handleDataScope":[m
[32m+[m[32m      handleDataScope(row);[m
[32m+[m[32m      break;[m
[32m+[m[32m    case "handleAuthUser":[m
[32m+[m[32m      handleAuthUser(row);[m
[32m+[m[32m      break;[m
[32m+[m[32m    default:[m
[32m+[m[32m      break;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m/** åˆ†é…ç”¨æˆ· */[m
[32m+[m[32mfunction handleAuthUser(row) {[m
[32m+[m[32m  router.push("/system/role-auth/user/" + row.roleId);[m
[32m+[m[32m}[m
[32m+[m[32m/** æŸ¥è¯¢èœå•æ ‘ç»“æ„ */[m
[32m+[m[32mfunction getMenuTreeselect() {[m
[32m+[m[32m  menuTreeselect().then(response => {[m
[32m+[m[32m    menuOptions.value = response.data;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** æ‰€æœ‰éƒ¨é—¨èŠ‚ç‚¹æ•°æ® */[m
[32m+[m[32mfunction getDeptAllCheckedKeys() {[m
[32m+[m[32m  // ç›®å‰è¢«é€‰ä¸­çš„éƒ¨é—¨èŠ‚ç‚¹[m
[32m+[m[32m  let checkedKeys = deptRef.value.getCheckedKeys();[m
[32m+[m[32m  // åŠé€‰ä¸­çš„éƒ¨é—¨èŠ‚ç‚¹[m
[32m+[m[32m  let halfCheckedKeys = deptRef.value.getHalfCheckedKeys();[m
[32m+[m[32m  checkedKeys.unshift.apply(checkedKeys, halfCheckedKeys);[m
[32m+[m[32m  return checkedKeys;[m
[32m+[m[32m}[m
[32m+[m[32m/** é‡ç½®æ–°å¢çš„è¡¨å•ä»¥åŠå…¶ä»–æ•°æ®  */[m
[32m+[m[32mfunction reset() {[m
[32m+[m[32m  if (menuRef.value != undefined) {[m
[32m+[m[32m    menuRef.value.setCheckedKeys([]);[m
[32m+[m[32m  }[m
[32m+[m[32m  menuExpand.value = false;[m
[32m+[m[32m  menuNodeAll.value = false;[m
[32m+[m[32m  deptExpand.value = true;[m
[32m+[m[32m  deptNodeAll.value = false;[m
[32m+[m[32m  form.value = {[m
[32m+[m[32m    roleId: undefined,[m
[32m+[m[32m    roleName: undefined,[m
[32m+[m[32m    roleKey: undefined,[m
[32m+[m[32m    roleSort: 0,[m
[32m+[m[32m    status: "0",[m
[32m+[m[32m    menuIds: [],[m
[32m+[m[32m    deptIds: [],[m
[32m+[m[32m    menuCheckStrictly: true,[m
[32m+[m[32m    deptCheckStrictly: true,[m
[32m+[m[32m    remark: undefined[m
[32m+[m[32m  };[m
[32m+[m[32m  proxy.resetForm("roleRef");[m
[32m+[m[32m}[m
[32m+[m[32m/** æ·»åŠ è§’è‰² */[m
[32m+[m[32mfunction handleAdd() {[m
[32m+[m[32m  reset();[m
[32m+[m[32m  getMenuTreeselect();[m
[32m+[m[32m  open.value = true;[m
[32m+[m[32m  title.value = "æ·»åŠ è§’è‰²";[m
[32m+[m[32m}[m
[32m+[m[32m/** ä¿®æ”¹è§’è‰² */[m
[32m+[m[32mfunction handleUpdate(row) {[m
[32m+[m[32m  reset();[m
[32m+[m[32m  const roleId = row.roleId || ids.value;[m
[32m+[m[32m  const roleMenu = getRoleMenuTreeselect(roleId);[m
[32m+[m[32m  getRole(roleId).then(response => {[m
[32m+[m[32m    form.value = response.data;[m
[32m+[m[32m    form.value.roleSort = Number(form.value.roleSort);[m
[32m+[m[32m    open.value = true;[m
[32m+[m[32m    nextTick(() => {[m
[32m+[m[32m      roleMenu.then((res) => {[m
[32m+[m[32m        let checkedKeys = res.checkedKeys;[m
[32m+[m[32m        checkedKeys.forEach((v) => {[m
[32m+[m[32m          nextTick(() => {[m
[32m+[m[32m            menuRef.value.setChecked(v, true, false);[m
[32m+[m[32m          });[m
[32m+[m[32m        });[m
[32m+[m[32m      });[m
[32m+[m[32m    });[m
[32m+[m[32m    title.value = "ä¿®æ”¹è§’è‰²";[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** æ ¹æ®è§’è‰²IDæŸ¥è¯¢èœå•æ ‘ç»“æ„ */[m
[32m+[m[32mfunction getRoleMenuTreeselect(roleId) {[m
[32m+[m[32m  return roleMenuTreeselect(roleId).then(response => {[m
[32m+[m[32m    menuOptions.value = response.menus;[m
[32m+[m[32m    return response;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** æ ¹æ®è§’è‰²IDæŸ¥è¯¢éƒ¨é—¨æ ‘ç»“æ„ */[m
[32m+[m[32mfunction getDeptTree(roleId) {[m
[32m+[m[32m  return deptTreeSelect(roleId).then(response => {[m
[32m+[m[32m    deptOptions.value = response.depts;[m
[32m+[m[32m    return response;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** æ ‘æƒé™ï¼ˆå±•å¼€/æŠ˜å ï¼‰*/[m
[32m+[m[32mfunction handleCheckedTreeExpand(value, type) {[m
[32m+[m[32m  if (type == "menu") {[m
[32m+[m[32m    let treeList = menuOptions.value;[m
[32m+[m[32m    for (let i = 0; i < treeList.length; i++) {[m
[32m+[m[32m      menuRef.value.store.nodesMap[treeList[i].id].expanded = value;[m
[32m+[m[32m    }[m
[32m+[m[32m  } else if (type == "dept") {[m
[32m+[m[32m    let treeList = deptOptions.value;[m
[32m+[m[32m    for (let i = 0; i < treeList.length; i++) {[m
[32m+[m[32m      deptRef.value.store.nodesMap[treeList[i].id].expanded = value;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m/** æ ‘æƒé™ï¼ˆå…¨é€‰/å…¨ä¸é€‰ï¼‰ */[m
[32m+[m[32mfunction handleCheckedTreeNodeAll(value, type) {[m
[32m+[m[32m  if (type == "menu") {[m
[32m+[m[32m    menuRef.value.setCheckedNodes(value ? menuOptions.value : []);[m
[32m+[m[32m  } else if (type == "dept") {[m
[32m+[m[32m    deptRef.value.setCheckedNodes(value ? deptOptions.value : []);[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m/** æ ‘æƒé™ï¼ˆçˆ¶å­è”åŠ¨ï¼‰ */[m
[32m+[m[32mfunction handleCheckedTreeConnect(value, type) {[m
[32m+[m[32m  if (type == "menu") {[m
[32m+[m[32m    form.value.menuCheckStrictly = value ? true : false;[m
[32m+[m[32m  } else if (type == "dept") {[m
[32m+[m[32m    form.value.deptCheckStrictly = value ? true : false;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m/** æ‰€æœ‰èœå•èŠ‚ç‚¹æ•°æ® */[m
[32m+[m[32mfunction getMenuAllCheckedKeys() {[m
[32m+[m[32m  // ç›®å‰è¢«é€‰ä¸­çš„èœå•èŠ‚ç‚¹[m
[32m+[m[32m  let checkedKeys = menuRef.value.getCheckedKeys();[m
[32m+[m[32m  // åŠé€‰ä¸­çš„èœå•èŠ‚ç‚¹[m
[32m+[m[32m  let halfCheckedKeys = menuRef.value.getHalfCheckedKeys();[m
[32m+[m[32m  checkedKeys.unshift.apply(checkedKeys, halfCheckedKeys);[m
[32m+[m[32m  return checkedKeys;[m
[32m+[m[32m}[m
[32m+[m[32m/** æäº¤æŒ‰é’® */[m
[32m+[m[32mfunction submitForm() {[m
[32m+[m[32m  proxy.$refs["roleRef"].validate(valid => {[m
[32m+[m[32m    if (valid) {[m
[32m+[m[32m      if (form.value.roleId != undefined) {[m
[32m+[m[32m        form.value.menuIds = getMenuAllCheckedKeys();[m
[32m+[m[32m        updateRole(form.value).then(response => {[m
[32m+[m[32m          proxy.$modal.msgSuccess("ä¿®æ”¹æˆåŠŸ");[m
[32m+[m[32m          open.value = false;[m
[32m+[m[32m          getList();[m
[32m+[m[32m        });[m
[32m+[m[32m      } else {[m
[32m+[m[32m        form.value.menuIds = getMenuAllCheckedKeys();[m
[32m+[m[32m        addRole(form.value).then(response => {[m
[32m+[m[32m          proxy.$modal.msgSuccess("æ–°å¢æˆåŠŸ");[m
[32m+[m[32m          open.value = false;[m
[32m+[m[32m          getList();[m
[32m+[m[32m        });[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** å–æ¶ˆæŒ‰é’® */[m
[32m+[m[32mfunction cancel() {[m
[32m+[m[32m  open.value = false;[m
[32m+[m[32m  reset();[m
[32m+[m[32m}[m
[32m+[m[32m/** é€‰æ‹©è§’è‰²æƒé™èŒƒå›´è§¦å‘ */[m
[32m+[m[32mfunction dataScopeSelectChange(value) {[m
[32m+[m[32m  if (value !== "2") {[m
[32m+[m[32m    deptRef.value.setCheckedKeys([]);[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m/** åˆ†é…æ•°æ®æƒé™æ“ä½œ */[m
[32m+[m[32mfunction handleDataScope(row) {[m
[32m+[m[32m  reset();[m
[32m+[m[32m  const deptTreeSelect = getDeptTree(row.roleId);[m
[32m+[m[32m  getRole(row.roleId).then(response => {[m
[32m+[m[32m    form.value = response.data;[m
[32m+[m[32m    openDataScope.value = true;[m
[32m+[m[32m    nextTick(() => {[m
[32m+[m[32m      deptTreeSelect.then(res => {[m
[32m+[m[32m        nextTick(() => {[m
[32m+[m[32m          if (deptRef.value) {[m
[32m+[m[32m            deptRef.value.setCheckedKeys(res.checkedKeys);[m
[32m+[m[32m          }[m
[32m+[m[32m        });[m
[32m+[m[32m      });[m
[32m+[m[32m    });[m
[32m+[m[32m    title.value = "åˆ†é…æ•°æ®æƒé™";[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** æäº¤æŒ‰é’®ï¼ˆæ•°æ®æƒé™ï¼‰ */[m
[32m+[m[32mfunction submitDataScope() {[m
[32m+[m[32m  if (form.value.roleId != undefined) {[m
[32m+[m[32m    form.value.deptIds = getDeptAllCheckedKeys();[m
[32m+[m[32m    dataScope(form.value).then(response => {[m
[32m+[m[32m      proxy.$modal.msgSuccess("ä¿®æ”¹æˆåŠŸ");[m
[32m+[m[32m      openDataScope.value = false;[m
[32m+[m[32m      getList();[m
[32m+[m[32m    });[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m/** å–æ¶ˆæŒ‰é’®ï¼ˆæ•°æ®æƒé™ï¼‰*/[m
[32m+[m[32mfunction cancelDataScope() {[m
[32m+[m[32m  openDataScope.value = false;[m
[32m+[m[32m  reset();[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mgetList();[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/system/role/selectUser.vue b/src/views/system/role/selectUser.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..9be1ec96[m
[1m--- /dev/null[m
[1m+++ b/src/views/system/role/selectUser.vue[m
[36m@@ -0,0 +1,140 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m   <!-- æˆæƒç”¨æˆ· -->[m
[32m+[m[32m   <el-dialog title="é€‰æ‹©ç”¨æˆ·" v-model="visible" width="800px" top="5vh" append-to-body>[m
[32m+[m[32m      <el-form :model="queryParams" ref="queryRef" :inline="true">[m
[32m+[m[32m         <el-form-item label="ç”¨æˆ·åç§°" prop="userName">[m
[32m+[m[32m            <el-input[m
[32m+[m[32m               v-model="queryParams.userName"[m
[32m+[m[32m               placeholder="è¯·è¾“å…¥ç”¨æˆ·åç§°"[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 200px"[m
[32m+[m[32m               @keyup.enter="handleQuery"[m
[32m+[m[32m            />[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item label="æ‰‹æœºå·ç " prop="phonenumber">[m
[32m+[m[32m            <el-input[m
[32m+[m[32m               v-model="queryParams.phonenumber"[m
[32m+[m[32m               placeholder="è¯·è¾“å…¥æ‰‹æœºå·ç "[m
[32m+[m[32m               clearable[m
[32m+[m[32m               style="width: 200px"[m
[32m+[m[32m               @keyup.enter="handleQuery"[m
[32m+[m[32m            />[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m         <el-form-item>[m
[32m+[m[32m            <el-button type="primary" icon="Search" @click="handleQuery">æœç´¢</el-button>[m
[32m+[m[32m            <el-button icon="Refresh" @click="resetQuery">é‡ç½®</el-button>[m
[32m+[m[32m         </el-form-item>[m
[32m+[m[32m      </el-form>[m
[32m+[m[32m      <el-row>[m
[32m+[m[32m         <el-table @row-click="clickRow" ref="refTable" :data="userList" @selection-change="handleSelectionChange" height="260px">[m
[32m+[m[32m            <el-table-column type="selection" width="55"></el-table-column>[m
[32m+[m[32m            <el-table-column label="ç”¨æˆ·åç§°" prop="userName" :show-overflow-tooltip="true" />[m
[32m+[m[32m            <el-table-column label="ç”¨æˆ·æ˜µç§°" prop="nickName" :show-overflow-tooltip="true" />[m
[32m+[m[32m            <el-table-column label="é‚®ç®±" prop="email" :show-overflow-tooltip="true" />[m
[32m+[m[32m            <el-table-column label="æ‰‹æœº" prop="phonenumber" :show-overflow-tooltip="true" />[m
[32m+[m[32m            <el-table-column label="çŠ¶æ€" align="center" prop="status">[m
[32m+[m[32m               <template #default="scope">[m
[32m+[m[32m                  <dict-tag :options="sys_normal_disable" :value="scope.row.status" />[m
[32m+[m[32m               </template>[m
[32m+[m[32m            </el-table-column>[m
[32m+[m[32m            <el-table-column label="åˆ›å»ºæ—¶é—´" align="center" prop="createTime" width="180">[m
[32m+[m[32m               <template #default="scope">[m
[32m+[m[32m                  <span>{{ parseTime(scope.row.createTime) }}</span>[m
[32m+[m[32m               </template>[m
[32m+[m[32m            </el-table-column>[m
[32m+[m[32m         </el-table>[m
[32m+[m[32m         <pagination[m
[32m+[m[32m            v-show="total > 0"[m
[32m+[m[32m            :total="total"[m
[32m+[m[32m            v-model:page="queryParams.pageNum"[m
[32m+[m[32m            v-model:limit="queryParams.pageSize"[m
[32m+[m[32m            @pagination="getList"[m
[32m+[m[32m         />[m
[32m+[m[32m      </el-row>[m
[32m+[m[32m      <template #footer>[m
[32m+[m[32m         <div class="dialog-footer">[m
[32m+[m[32m            <el-button type="primary" @click="handleSelectUser">ç¡® å®š</el-button>[m
[32m+[m[32m            <el-button @click="visible = false">å– æ¶ˆ</el-button>[m
[32m+[m[32m         </div>[m
[32m+[m[32m      </template>[m
[32m+[m[32m   </el-dialog>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup name="SelectUser">[m
[32m+[m[32mimport { authUserSelectAll, unallocatedUserList } from "@/api/system/role";[m
[32m+[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m  roleId: {[m
[32m+[m[32m    type: [Number, String][m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m[32mconst { sys_normal_disable } = proxy.useDict("sys_normal_disable");[m
[32m+[m
[32m+[m[32mconst userList = ref([]);[m
[32m+[m[32mconst visible = ref(false);[m
[32m+[m[32mconst total = ref(0);[m
[32m+[m[32mconst userIds = ref([]);[m
[32m+[m
[32m+[m[32mconst queryParams = reactive({[m
[32m+[m[32m  pageNum: 1,[m
[32m+[m[32m  pageSize: 10,[m
[32m+[m[32m  roleId: undefined,[m
[32m+[m[32m  userName: undefined,[m
[32m+[m[32m  phonenumber: undefined[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m// æ˜¾ç¤ºå¼¹æ¡†[m
[32m+[m[32mfunction show() {[m
[32m+[m[32m  queryParams.roleId = props.roleId;[m
[32m+[m[32m  getList();[m
[32m+[m[32m  visible.value = true;[m
[32m+[m[32m}[m
[32m+[m[32m/**é€‰æ‹©è¡Œ */[m
[32m+[m[32mfunction clickRow(row) {[m
[32m+[m[32m  proxy.$refs["refTable"].toggleRowSelection(row);[m
[32m+[m[32m}[m
[32m+[m[32m// å¤šé€‰æ¡†é€‰ä¸­æ•°æ®[m
[32m+[m[32mfunction handleSelectionChange(selection) {[m
[32m+[m[32m  userIds.value = selection.map(item => item.userId);[m
[32m+[m[32m}[m
[32m+[m[32m// æŸ¥è¯¢è¡¨æ•°æ®[m
[32m+[m[32mfunction getList() {[m
[32m+[m[32m  unallocatedUserList(queryParams).then(res => {[m
[32m+[m[32m    userList.value = res.rows;[m
[32m+[m[32m    total.value = res.total;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** æœç´¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleQuery() {[m
[32m+[m[32m  queryParams.pageNum = 1;[m
[32m+[m[32m  getList();[m
[32m+[m[32m}[m
[32m+[m[32m/** é‡ç½®æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction resetQuery() {[m
[32m+[m[32m  proxy.resetForm("queryRef");[m
[32m+[m[32m  handleQuery();[m
[32m+[m[32m}[m
[32m+[m[32mconst emit = defineEmits(["ok"]);[m
[32m+[m[32m/** é€‰æ‹©æˆæƒç”¨æˆ·æ“ä½œ */[m
[32m+[m[32mfunction handleSelectUser() {[m
[32m+[m[32m  const roleId = queryParams.roleId;[m
[32m+[m[32m  const uIds = userIds.value.join(",");[m
[32m+[m[32m  if (uIds == "") {[m
[32m+[m[32m    proxy.$modal.msgError("è¯·é€‰æ‹©è¦åˆ†é…çš„ç”¨æˆ·");[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m[32m  authUserSelectAll({ roleId: roleId, userIds: uIds }).then(res => {[m
[32m+[m[32m    proxy.$modal.msgSuccess(res.msg);[m
[32m+[m[32m    if (res.code === 200) {[m
[32m+[m[32m      visible.value = false;[m
[32m+[m[32m      emit("ok");[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mdefineExpose({[m
[32m+[m[32m  show,[m
[32m+[m[32m});[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/system/user/authRole.vue b/src/views/system/user/authRole.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..0b5c14bc[m
[1m--- /dev/null[m
[1m+++ b/src/views/system/user/authRole.vue[m
[36m@@ -0,0 +1,112 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m   <div class="app-container">[m
[32m+[m[32m      <h4 class="form-header h4">åŸºæœ¬ä¿¡æ¯</h4>[m
[32m+[m[32m      <el-form :model="form" label-width="80px">[m
[32m+[m[32m         <el-row>[m
[32m+[m[32m            <el-col :span="8" :offset="2">[m
[32m+[m[32m               <el-form-item label="ç”¨æˆ·æ˜µç§°" prop="nickName">[m
[32m+[m[32m                  <el-input v-model="form.nickName" disabled />[m
[32m+[m[32m               </el-form-item>[m
[32m+[m[32m            </el-col>[m
[32m+[m[32m            <el-col :span="8" :offset="2">[m
[32m+[m[32m               <el-form-item label="ç™»å½•è´¦å·" prop="userName">[m
[32m+[m[32m                  <el-input v-model="form.userName" disabled />[m
[32m+[m[32m               </el-form-item>[m
[32m+[m[32m            </el-col>[m
[32m+[m[32m         </el-row>[m
[32m+[m[32m      </el-form>[m
[32m+[m
[32m+[m[32m      <h4 class="form-header h4">è§’è‰²ä¿¡æ¯</h4>[m
[32m+[m[32m      <el-table v-loading="loading" :row-key="getRowKey" @row-click="clickRow" ref="roleRef" @selection-change="handleSelectionChange" :data="roles.slice((pageNum - 1) * pageSize, pageNum * pageSize)">[m
[32m+[m[32m         <el-table-column label="åºå·" width="55" type="index" align="center">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <span>{{ (pageNum - 1) * pageSize + scope.$index + 1 }}</span>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m         <el-table-column type="selection" :reserve-selection="true" width="55"></el-table-column>[m
[32m+[m[32m         <el-table-column label="è§’è‰²ç¼–å·" align="center" prop="roleId" />[m
[32m+[m[32m         <el-table-column label="è§’è‰²åç§°" align="center" prop="roleName" />[m
[32m+[m[32m         <el-table-column label="æƒé™å­—ç¬¦" align="center" prop="roleKey" />[m
[32m+[m[32m         <el-table-column label="åˆ›å»ºæ—¶é—´" align="center" prop="createTime" width="180">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m               <span>{{ parseTime(scope.row.createTime) }}</span>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-table-column>[m
[32m+[m[32m      </el-table>[m
[32m+[m
[32m+[m[32m      <pagination v-show="total > 0" :total="total" v-model:page="pageNum" v-model:limit="pageSize" />[m
[32m+[m
[32m+[m[32m      <el-form label-width="100px">[m
[32m+[m[32m         <div style="text-align: center;margin-left:-120px;margin-top:30px;">[m
[32m+[m[32m            <el-button type="primary" @click="submitForm()">æäº¤</el-button>[m
[32m+[m[32m            <el-button @click="close()">è¿”å›</el-button>[m
[32m+[m[32m         </div>[m
[32m+[m[32m      </el-form>[m
[32m+[m[32m   </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup name="AuthRole">[m
[32m+[m[32mimport { getAuthRole, updateAuthRole } from "@/api/system/user";[m
[32m+[m
[32m+[m[32mconst route = useRoute();[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m
[32m+[m[32mconst loading = ref(true);[m
[32m+[m[32mconst total = ref(0);[m
[32m+[m[32mconst pageNum = ref(1);[m
[32m+[m[32mconst pageSize = ref(10);[m
[32m+[m[32mconst roleIds = ref([]);[m
[32m+[m[32mconst roles = ref([]);[m
[32m+[m[32mconst form = ref({[m
[32m+[m[32m  nickName: undefined,[m
[32m+[m[32m  userName: undefined,[m
[32m+[m[32m  userId: undefined[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m/** å•å‡»é€‰ä¸­è¡Œæ•°æ® */[m
[32m+[m[32mfunction clickRow(row) {[m
[32m+[m[32m  proxy.$refs["roleRef"].toggleRowSelection(row);[m
[32m+[m[32m};[m
[32m+[m[32m/** å¤šé€‰æ¡†é€‰ä¸­æ•°æ® */[m
[32m+[m[32mfunction handleSelectionChange(selection) {[m
[32m+[m[32m  roleIds.value = selection.map(item => item.roleId);[m
[32m+[m[32m};[m
[32m+[m[32m/** ä¿å­˜é€‰ä¸­çš„æ•°æ®ç¼–å· */[m
[32m+[m[32mfunction getRowKey(row) {[m
[32m+[m[32m  return row.roleId;[m
[32m+[m[32m};[m
[32m+[m[32m/** å…³é—­æŒ‰é’® */[m
[32m+[m[32mfunction close() {[m
[32m+[m[32m  const obj = { path: "/system/user" };[m
[32m+[m[32m  proxy.$tab.closeOpenPage(obj);[m
[32m+[m[32m};[m
[32m+[m[32m/** æäº¤æŒ‰é’® */[m
[32m+[m[32mfunction submitForm() {[m
[32m+[m[32m  const userId = form.value.userId;[m
[32m+[m[32m  const rIds = roleIds.value.join(",");[m
[32m+[m[32m  updateAuthRole({ userId: userId, roleIds: rIds }).then(response => {[m
[32m+[m[32m    proxy.$modal.msgSuccess("æˆæƒæˆåŠŸ");[m
[32m+[m[32m    close();[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m(() => {[m
[32m+[m[32m  const userId = route.params && route.params.userId;[m
[32m+[m[32m  if (userId) {[m
[32m+[m[32m    loading.value = true;[m
[32m+[m[32m    getAuthRole(userId).then(response => {[m
[32m+[m[32m      form.value = response.user;[m
[32m+[m[32m      roles.value = response.roles;[m
[32m+[m[32m      total.value = roles.value.length;[m
[32m+[m[32m      nextTick(() => {[m
[32m+[m[32m        roles.value.forEach(row => {[m
[32m+[m[32m          if (row.flag) {[m
[32m+[m[32m            proxy.$refs["roleRef"].toggleRowSelection(row);[m
[32m+[m[32m          }[m
[32m+[m[32m        });[m
[32m+[m[32m      });[m
[32m+[m[32m      loading.value = false;[m
[32m+[m[32m    });[m
[32m+[m[32m  }[m
[32m+[m[32m})();[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/system/user/index.vue b/src/views/system/user/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..73f02f6d[m
[1m--- /dev/null[m
[1m+++ b/src/views/system/user/index.vue[m
[36m@@ -0,0 +1,608 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m   <div class="app-container">[m
[32m+[m[32m      <el-row :gutter="20">[m
[32m+[m[32m         <!--éƒ¨é—¨æ•°æ®-->[m
[32m+[m[32m         <el-col :span="4" :xs="24">[m
[32m+[m[32m            <div class="head-container">[m
[32m+[m[32m               <el-input[m
[32m+[m[32m                  v-model="deptName"[m
[32m+[m[32m                  placeholder="è¯·è¾“å…¥éƒ¨é—¨åç§°"[m
[32m+[m[32m                  clearable[m
[32m+[m[32m                  prefix-icon="Search"[m
[32m+[m[32m                  style="margin-bottom: 20px"[m
[32m+[m[32m               />[m
[32m+[m[32m            </div>[m
[32m+[m[32m            <div class="head-container">[m
[32m+[m[32m               <el-tree[m
[32m+[m[32m                  :data="deptOptions"[m
[32m+[m[32m                  :props="{ label: 'label', children: 'children' }"[m
[32m+[m[32m                  :expand-on-click-node="false"[m
[32m+[m[32m                  :filter-node-method="filterNode"[m
[32m+[m[32m                  ref="deptTreeRef"[m
[32m+[m[32m                  node-key="id"[m
[32m+[m[32m                  highlight-current[m
[32m+[m[32m                  default-expand-all[m
[32m+[m[32m                  @node-click="handleNodeClick"[m
[32m+[m[32m               />[m
[32m+[m[32m            </div>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <!--ç”¨æˆ·æ•°æ®-->[m
[32m+[m[32m         <el-col :span="20" :xs="24">[m
[32m+[m[32m            <el-form :model="queryParams" ref="queryRef" :inline="true" v-show="showSearch" label-width="68px">[m
[32m+[m[32m               <el-form-item label="ç”¨æˆ·åç§°" prop="userName">[m
[32m+[m[32m                  <el-input[m
[32m+[m[32m                     v-model="queryParams.userName"[m
[32m+[m[32m                     placeholder="è¯·è¾“å…¥ç”¨æˆ·åç§°"[m
[32m+[m[32m                     clearable[m
[32m+[m[32m                     style="width: 240px"[m
[32m+[m[32m                     @keyup.enter="handleQuery"[m
[32m+[m[32m                  />[m
[32m+[m[32m               </el-form-item>[m
[32m+[m[32m               <el-form-item label="æ‰‹æœºå·ç " prop="phonenumber">[m
[32m+[m[32m                  <el-input[m
[32m+[m[32m                     v-model="queryParams.phonenumber"[m
[32m+[m[32m                     placeholder="è¯·è¾“å…¥æ‰‹æœºå·ç "[m
[32m+[m[32m                     clearable[m
[32m+[m[32m                     style="width: 240px"[m
[32m+[m[32m                     @keyup.enter="handleQuery"[m
[32m+[m[32m                  />[m
[32m+[m[32m               </el-form-item>[m
[32m+[m[32m               <el-form-item label="çŠ¶æ€" prop="status">[m
[32m+[m[32m                  <el-select[m
[32m+[m[32m                     v-model="queryParams.status"[m
[32m+[m[32m                     placeholder="ç”¨æˆ·çŠ¶æ€"[m
[32m+[m[32m                     clearable[m
[32m+[m[32m                     style="width: 240px"[m
[32m+[m[32m                  >[m
[32m+[m[32m                     <el-option[m
[32m+[m[32m                        v-for="dict in sys_normal_disable"[m
[32m+[m[32m                        :key="dict.value"[m
[32m+[m[32m                        :label="dict.label"[m
[32m+[m[32m                        :value="dict.value"[m
[32m+[m[32m                     />[m
[32m+[m[32m                  </el-select>[m
[32m+[m[32m               </el-form-item>[m
[32m+[m[32m               <el-form-item label="åˆ›å»ºæ—¶é—´" style="width: 308px;">[m
[32m+[m[32m                  <el-date-picker[m
[32m+[m[32m                     v-model="dateRange"[m
[32m+[m[32m                     value-format="YYYY-MM-DD"[m
[32m+[m[32m                     type="daterange"[m
[32m+[m[32m                     range-separator="-"[m
[32m+[m[32m                     start-placeholder="å¼€å§‹æ—¥æœŸ"[m
[32m+[m[32m                     end-placeholder="ç»“æŸæ—¥æœŸ"[m
[32m+[m[32m                  ></el-date-picker>[m
[32m+[m[32m               </el-form-item>[m
[32m+[m[32m               <el-form-item>[m
[32m+[m[32m                  <el-button type="primary" icon="Search" @click="handleQuery">æœç´¢</el-button>[m
[32m+[m[32m                  <el-button icon="Refresh" @click="resetQuery">é‡ç½®</el-button>[m
[32m+[m[32m               </el-form-item>[m
[32m+[m[32m            </el-form>[m
[32m+[m
[32m+[m[32m            <el-row :gutter="10" class="mb8">[m
[32m+[m[32m               <el-col :span="1.5">[m
[32m+[m[32m                  <el-button[m
[32m+[m[32m                     type="primary"[m
[32m+[m[32m                     plain[m
[32m+[m[32m                     icon="Plus"[m
[32m+[m[32m                     @click="handleAdd"[m
[32m+[m[32m                     v-hasPermi="['system:user:add']"[m
[32m+[m[32m                  >æ–°å¢</el-button>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="1.5">[m
[32m+[m[32m                  <el-button[m
[32m+[m[32m                     type="success"[m
[32m+[m[32m                     plain[m
[32m+[m[32m                     icon="Edit"[m
[32m+[m[32m                     :disabled="single"[m
[32m+[m[32m                     @click="handleUpdate"[m
[32m+[m[32m                     v-hasPermi="['system:user:edit']"[m
[32m+[m[32m                  >ä¿®æ”¹</el-button>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="1.5">[m
[32m+[m[32m                  <el-button[m
[32m+[m[32m                     type="danger"[m
[32m+[m[32m                     plain[m
[32m+[m[32m                     icon="Delete"[m
[32m+[m[32m                     :disabled="multiple"[m
[32m+[m[32m                     @click="handleDelete"[m
[32m+[m[32m                     v-hasPermi="['system:user:remove']"[m
[32m+[m[32m                  >åˆ é™¤</el-button>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="1.5">[m
[32m+[m[32m                  <el-button[m
[32m+[m[32m                     type="info"[m
[32m+[m[32m                     plain[m
[32m+[m[32m                     icon="Upload"[m
[32m+[m[32m                     @click="handleImport"[m
[32m+[m[32m                     v-hasPermi="['system:user:import']"[m
[32m+[m[32m                  >å¯¼å…¥</el-button>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="1.5">[m
[32m+[m[32m                  <el-button[m
[32m+[m[32m                     type="warning"[m
[32m+[m[32m                     plain[m
[32m+[m[32m                     icon="Download"[m
[32m+[m[32m                     @click="handleExport"[m
[32m+[m[32m                     v-hasPermi="['system:user:export']"[m
[32m+[m[32m                  >å¯¼å‡º</el-button>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <right-toolbar v-model:showSearch="showSearch" @queryTable="getList" :columns="columns"></right-toolbar>[m
[32m+[m[32m            </el-row>[m
[32m+[m
[32m+[m[32m            <el-table v-loading="loading" :data="userList" @selection-change="handleSelectionChange">[m
[32m+[m[32m               <el-table-column type="selection" width="50" align="center" />[m
[32m+[m[32m               <el-table-column label="ç”¨æˆ·ç¼–å·" align="center" key="userId" prop="userId" v-if="columns[0].visible" />[m
[32m+[m[32m               <el-table-column label="ç”¨æˆ·åç§°" align="center" key="userName" prop="userName" v-if="columns[1].visible" :show-overflow-tooltip="true" />[m
[32m+[m[32m               <el-table-column label="ç”¨æˆ·æ˜µç§°" align="center" key="nickName" prop="nickName" v-if="columns[2].visible" :show-overflow-tooltip="true" />[m
[32m+[m[32m               <el-table-column label="éƒ¨é—¨" align="center" key="deptName" prop="dept.deptName" v-if="columns[3].visible" :show-overflow-tooltip="true" />[m
[32m+[m[32m               <el-table-column label="æ‰‹æœºå·ç " align="center" key="phonenumber" prop="phonenumber" v-if="columns[4].visible" width="120" />[m
[32m+[m[32m               <el-table-column label="çŠ¶æ€" align="center" key="status" v-if="columns[5].visible">[m
[32m+[m[32m                  <template #default="scope">[m
[32m+[m[32m                     <el-switch[m
[32m+[m[32m                        v-model="scope.row.status"[m
[32m+[m[32m                        active-value="0"[m
[32m+[m[32m                        inactive-value="1"[m
[32m+[m[32m                        @change="handleStatusChange(scope.row)"[m
[32m+[m[32m                     ></el-switch>[m
[32m+[m[32m                  </template>[m
[32m+[m[32m               </el-table-column>[m
[32m+[m[32m               <el-table-column label="åˆ›å»ºæ—¶é—´" align="center" prop="createTime" v-if="columns[6].visible" width="160">[m
[32m+[m[32m                  <template #default="scope">[m
[32m+[m[32m                     <span>{{ parseTime(scope.row.createTime) }}</span>[m
[32m+[m[32m                  </template>[m
[32m+[m[32m               </el-table-column>[m
[32m+[m[32m               <el-table-column label="æ“ä½œ" align="center" width="150" class-name="small-padding fixed-width">[m
[32m+[m[32m                  <template #default="scope">[m
[32m+[m[32m                     <el-tooltip content="ä¿®æ”¹" placement="top" v-if="scope.row.userId !== 1">[m
[32m+[m[32m                        <el-button link type="primary" icon="Edit" @click="handleUpdate(scope.row)" v-hasPermi="['system:user:edit']"></el-button>[m
[32m+[m[32m                     </el-tooltip>[m
[32m+[m[32m                     <el-tooltip content="åˆ é™¤" placement="top" v-if="scope.row.userId !== 1">[m
[32m+[m[32m                        <el-button link type="primary" icon="Delete" @click="handleDelete(scope.row)" v-hasPermi="['system:user:remove']"></el-button>[m
[32m+[m[32m                     </el-tooltip>[m
[32m+[m[32m                     <el-tooltip content="é‡ç½®å¯†ç " placement="top" v-if="scope.row.userId !== 1">[m
[32m+[m[32m                         <el-button link type="primary" icon="Key" @click="handleResetPwd(scope.row)" v-hasPermi="['system:user:resetPwd']"></el-button>[m
[32m+[m[32m                     </el-tooltip>[m
[32m+[m[32m                     <el-tooltip content="åˆ†é…è§’è‰²" placement="top" v-if="scope.row.userId !== 1">[m
[32m+[m[32m                        <el-button link type="primary" icon="CircleCheck" @click="handleAuthRole(scope.row)" v-hasPermi="['system:user:edit']"></el-button>[m
[32m+[m[32m                     </el-tooltip>[m
[32m+[m[32m                  </template>[m
[32m+[m[32m               </el-table-column>[m
[32m+[m[32m            </el-table>[m
[32m+[m[32m            <pagination[m
[32m+[m[32m               v-show="total > 0"[m
[32m+[m[32m               :total="total"[m
[32m+[m[32m               v-model:page="queryParams.pageNum"[m
[32m+[m[32m               v-model:limit="queryParams.pageSize"[m
[32m+[m[32m               @pagination="getList"[m
[32m+[m[32m            />[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m      </el-row>[m
[32m+[m
[32m+[m[32m      <!-- æ·»åŠ æˆ–ä¿®æ”¹ç”¨æˆ·é…ç½®å¯¹è¯æ¡† -->[m
[32m+[m[32m      <el-dialog :title="title" v-model="open" width="600px" append-to-body>[m
[32m+[m[32m         <el-form :model="form" :rules="rules" ref="userRef" label-width="80px">[m
[32m+[m[32m            <el-row>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="ç”¨æˆ·æ˜µç§°" prop="nickName">[m
[32m+[m[32m                     <el-input v-model="form.nickName" placeholder="è¯·è¾“å…¥ç”¨æˆ·æ˜µç§°" maxlength="30" />[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="å½’å±éƒ¨é—¨" prop="deptId">[m
[32m+[m[32m                     <el-tree-select[m
[32m+[m[32m                        v-model="form.deptId"[m
[32m+[m[32m                        :data="deptOptions"[m
[32m+[m[32m                        :props="{ value: 'id', label: 'label', children: 'children' }"[m
[32m+[m[32m                        value-key="id"[m
[32m+[m[32m                        placeholder="è¯·é€‰æ‹©å½’å±éƒ¨é—¨"[m
[32m+[m[32m                        check-strictly[m
[32m+[m[32m                     />[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m            </el-row>[m
[32m+[m[32m            <el-row>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="æ‰‹æœºå·ç " prop="phonenumber">[m
[32m+[m[32m                     <el-input v-model="form.phonenumber" placeholder="è¯·è¾“å…¥æ‰‹æœºå·ç " maxlength="11" />[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="é‚®ç®±" prop="email">[m
[32m+[m[32m                     <el-input v-model="form.email" placeholder="è¯·è¾“å…¥é‚®ç®±" maxlength="50" />[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m            </el-row>[m
[32m+[m[32m            <el-row>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item v-if="form.userId == undefined" label="ç”¨æˆ·åç§°" prop="userName">[m
[32m+[m[32m                     <el-input v-model="form.userName" placeholder="è¯·è¾“å…¥ç”¨æˆ·åç§°" maxlength="30" />[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item v-if="form.userId == undefined" label="ç”¨æˆ·å¯†ç " prop="password">[m
[32m+[m[32m                     <el-input v-model="form.password" placeholder="è¯·è¾“å…¥ç”¨æˆ·å¯†ç " type="password" maxlength="20" show-password />[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m            </el-row>[m
[32m+[m[32m            <el-row>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="ç”¨æˆ·æ€§åˆ«">[m
[32m+[m[32m                     <el-select v-model="form.sex" placeholder="è¯·é€‰æ‹©">[m
[32m+[m[32m                        <el-option[m
[32m+[m[32m                           v-for="dict in sys_user_sex"[m
[32m+[m[32m                           :key="dict.value"[m
[32m+[m[32m                           :label="dict.label"[m
[32m+[m[32m                           :value="dict.value"[m
[32m+[m[32m                        ></el-option>[m
[32m+[m[32m                     </el-select>[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="çŠ¶æ€">[m
[32m+[m[32m                     <el-radio-group v-model="form.status">[m
[32m+[m[32m                        <el-radio[m
[32m+[m[32m                           v-for="dict in sys_normal_disable"[m
[32m+[m[32m                           :key="dict.value"[m
[32m+[m[32m                           :label="dict.value"[m
[32m+[m[32m                        >{{ dict.label }}</el-radio>[m
[32m+[m[32m                     </el-radio-group>[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m            </el-row>[m
[32m+[m[32m            <el-row>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="å²—ä½">[m
[32m+[m[32m                     <el-select v-model="form.postIds" multiple placeholder="è¯·é€‰æ‹©">[m
[32m+[m[32m                        <el-option[m
[32m+[m[32m                           v-for="item in postOptions"[m
[32m+[m[32m                           :key="item.postId"[m
[32m+[m[32m                           :label="item.postName"[m
[32m+[m[32m                           :value="item.postId"[m
[32m+[m[32m                           :disabled="item.status == 1"[m
[32m+[m[32m                        ></el-option>[m
[32m+[m[32m                     </el-select>[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="è§’è‰²">[m
[32m+[m[32m                     <el-select v-model="form.roleIds" multiple placeholder="è¯·é€‰æ‹©">[m
[32m+[m[32m                        <el-option[m
[32m+[m[32m                           v-for="item in roleOptions"[m
[32m+[m[32m                           :key="item.roleId"[m
[32m+[m[32m                           :label="item.roleName"[m
[32m+[m[32m                           :value="item.roleId"[m
[32m+[m[32m                           :disabled="item.status == 1"[m
[32m+[m[32m                        ></el-option>[m
[32m+[m[32m                     </el-select>[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m            </el-row>[m
[32m+[m[32m            <el-row>[m
[32m+[m[32m               <el-col :span="12">[m
[32m+[m[32m                  <el-form-item label="å¤‡æ³¨">[m
[32m+[m[32m                     <el-input v-model="form.remark" type="textarea" placeholder="è¯·è¾“å…¥å†…å®¹"></el-input>[m
[32m+[m[32m                  </el-form-item>[m
[32m+[m[32m               </el-col>[m
[32m+[m[32m            </el-row>[m
[32m+[m[32m         </el-form>[m
[32m+[m[32m         <template #footer>[m
[32m+[m[32m            <div class="dialog-footer">[m
[32m+[m[32m               <el-button type="primary" @click="submitForm">ç¡® å®š</el-button>[m
[32m+[m[32m               <el-button @click="cancel">å– æ¶ˆ</el-button>[m
[32m+[m[32m            </div>[m
[32m+[m[32m         </template>[m
[32m+[m[32m      </el-dialog>[m
[32m+[m
[32m+[m[32m      <!-- ç”¨æˆ·å¯¼å…¥å¯¹è¯æ¡† -->[m
[32m+[m[32m      <el-dialog :title="upload.title" v-model="upload.open" width="400px" append-to-body>[m
[32m+[m[32m         <el-upload[m
[32m+[m[32m            ref="uploadRef"[m
[32m+[m[32m            :limit="1"[m
[32m+[m[32m            accept=".xlsx, .xls"[m
[32m+[m[32m            :headers="upload.headers"[m
[32m+[m[32m            :action="upload.url + '?updateSupport=' + upload.updateSupport"[m
[32m+[m[32m            :disabled="upload.isUploading"[m
[32m+[m[32m            :on-progress="handleFileUploadProgress"[m
[32m+[m[32m            :on-success="handleFileSuccess"[m
[32m+[m[32m            :auto-upload="false"[m
[32m+[m[32m            drag[m
[32m+[m[32m         >[m
[32m+[m[32m            <el-icon class="el-icon--upload"><upload-filled /></el-icon>[m
[32m+[m[32m            <div class="el-upload__text">å°†æ–‡ä»¶æ‹–åˆ°æ­¤å¤„ï¼Œæˆ–<em>ç‚¹å‡»ä¸Šä¼ </em></div>[m
[32m+[m[32m            <template #tip>[m
[32m+[m[32m               <div class="el-upload__tip text-center">[m
[32m+[m[32m                  <div class="el-upload__tip">[m
[32m+[m[32m                     <el-checkbox v-model="upload.updateSupport" />æ˜¯å¦æ›´æ–°å·²ç»å­˜åœ¨çš„ç”¨æˆ·æ•°æ®[m
[32m+[m[32m                  </div>[m
[32m+[m[32m                  <span>ä»…å…è®¸å¯¼å…¥xlsã€xlsxæ ¼å¼æ–‡ä»¶ã€‚</span>[m
[32m+[m[32m                  <el-link type="primary" :underline="false" style="font-size:12px;vertical-align: baseline;" @click="importTemplate">ä¸‹è½½æ¨¡æ¿</el-link>[m
[32m+[m[32m               </div>[m
[32m+[m[32m            </template>[m
[32m+[m[32m         </el-upload>[m
[32m+[m[32m         <template #footer>[m
[32m+[m[32m            <div class="dialog-footer">[m
[32m+[m[32m               <el-button type="primary" @click="submitFileForm">ç¡® å®š</el-button>[m
[32m+[m[32m               <el-button @click="upload.open = false">å– æ¶ˆ</el-button>[m
[32m+[m[32m            </div>[m
[32m+[m[32m         </template>[m
[32m+[m[32m      </el-dialog>[m
[32m+[m[32m   </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup name="User">[m
[32m+[m[32mimport { getToken } from "@/utils/auth";[m
[32m+[m[32mimport { changeUserStatus, listUser, resetUserPwd, delUser, getUser, updateUser, addUser, deptTreeSelect } from "@/api/system/user";[m
[32m+[m
[32m+[m[32mconst router = useRouter();[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m[32mconst { sys_normal_disable, sys_user_sex } = proxy.useDict("sys_normal_disable", "sys_user_sex");[m
[32m+[m
[32m+[m[32mconst userList = ref([]);[m
[32m+[m[32mconst open = ref(false);[m
[32m+[m[32mconst loading = ref(true);[m
[32m+[m[32mconst showSearch = ref(true);[m
[32m+[m[32mconst ids = ref([]);[m
[32m+[m[32mconst single = ref(true);[m
[32m+[m[32mconst multiple = ref(true);[m
[32m+[m[32mconst total = ref(0);[m
[32m+[m[32mconst title = ref("");[m
[32m+[m[32mconst dateRange = ref([]);[m
[32m+[m[32mconst deptName = ref("");[m
[32m+[m[32mconst deptOptions = ref(undefined);[m
[32m+[m[32mconst initPassword = ref(undefined);[m
[32m+[m[32mconst postOptions = ref([]);[m
[32m+[m[32mconst roleOptions = ref([]);[m
[32m+[m[32m/*** ç”¨æˆ·å¯¼å…¥å‚æ•° */[m
[32m+[m[32mconst upload = reactive({[m
[32m+[m[32m  // æ˜¯å¦æ˜¾ç¤ºå¼¹å‡ºå±‚ï¼ˆç”¨æˆ·å¯¼å…¥ï¼‰[m
[32m+[m[32m  open: false,[m
[32m+[m[32m  // å¼¹å‡ºå±‚æ ‡é¢˜ï¼ˆç”¨æˆ·å¯¼å…¥ï¼‰[m
[32m+[m[32m  title: "",[m
[32m+[m[32m  // æ˜¯å¦ç¦ç”¨ä¸Šä¼ [m
[32m+[m[32m  isUploading: false,[m
[32m+[m[32m  // æ˜¯å¦æ›´æ–°å·²ç»å­˜åœ¨çš„ç”¨æˆ·æ•°æ®[m
[32m+[m[32m  updateSupport: 0,[m
[32m+[m[32m  // è®¾ç½®ä¸Šä¼ çš„è¯·æ±‚å¤´éƒ¨[m
[32m+[m[32m  headers: { Authorization: "Bearer " + getToken() },[m
[32m+[m[32m  // ä¸Šä¼ çš„åœ°å€[m
[32m+[m[32m  url: import.meta.env.VITE_APP_BASE_API + "/system/user/importData"[m
[32m+[m[32m});[m
[32m+[m[32m// åˆ—æ˜¾éšä¿¡æ¯[m
[32m+[m[32mconst columns = ref([[m
[32m+[m[32m  { key: 0, label: `ç”¨æˆ·ç¼–å·`, visible: true },[m
[32m+[m[32m  { key: 1, label: `ç”¨æˆ·åç§°`, visible: true },[m
[32m+[m[32m  { key: 2, label: `ç”¨æˆ·æ˜µç§°`, visible: true },[m
[32m+[m[32m  { key: 3, label: `éƒ¨é—¨`, visible: true },[m
[32m+[m[32m  { key: 4, label: `æ‰‹æœºå·ç `, visible: true },[m
[32m+[m[32m  { key: 5, label: `çŠ¶æ€`, visible: true },[m
[32m+[m[32m  { key: 6, label: `åˆ›å»ºæ—¶é—´`, visible: true }[m
[32m+[m[32m]);[m
[32m+[m
[32m+[m[32mconst data = reactive({[m
[32m+[m[32m  form: {},[m
[32m+[m[32m  queryParams: {[m
[32m+[m[32m    pageNum: 1,[m
[32m+[m[32m    pageSize: 10,[m
[32m+[m[32m    userName: undefined,[m
[32m+[m[32m    phonenumber: undefined,[m
[32m+[m[32m    status: undefined,[m
[32m+[m[32m    deptId: undefined[m
[32m+[m[32m  },[m
[32m+[m[32m  rules: {[m
[32m+[m[32m    userName: [{ required: true, message: "ç”¨æˆ·åç§°ä¸èƒ½ä¸ºç©º", trigger: "blur" }, { min: 2, max: 20, message: "ç”¨æˆ·åç§°é•¿åº¦å¿…é¡»ä»‹äº 2 å’Œ 20 ä¹‹é—´", trigger: "blur" }],[m
[32m+[m[32m    nickName: [{ required: true, message: "ç”¨æˆ·æ˜µç§°ä¸èƒ½ä¸ºç©º", trigger: "blur" }],[m
[32m+[m[32m    password: [{ required: true, message: "ç”¨æˆ·å¯†ç ä¸èƒ½ä¸ºç©º", trigger: "blur" }, { min: 5, max: 20, message: "ç”¨æˆ·å¯†ç é•¿åº¦å¿…é¡»ä»‹äº 5 å’Œ 20 ä¹‹é—´", trigger: "blur" }],[m
[32m+[m[32m    email: [{ type: "email", message: "è¯·è¾“å…¥æ­£ç¡®çš„é‚®ç®±åœ°å€", trigger: ["blur", "change"] }],[m
[32m+[m[32m    phonenumber: [{ pattern: /^1[3|4|5|6|7|8|9][0-9]\d{8}$/, message: "è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·ç ", trigger: "blur" }][m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst { queryParams, form, rules } = toRefs(data);[m
[32m+[m
[32m+[m[32m/** é€šè¿‡æ¡ä»¶è¿‡æ»¤èŠ‚ç‚¹  */[m
[32m+[m[32mconst filterNode = (value, data) => {[m
[32m+[m[32m  if (!value) return true;[m
[32m+[m[32m  return data.label.indexOf(value) !== -1;[m
[32m+[m[32m};[m
[32m+[m[32m/** æ ¹æ®åç§°ç­›é€‰éƒ¨é—¨æ ‘ */[m
[32m+[m[32mwatch(deptName, val => {[m
[32m+[m[32m  proxy.$refs["deptTreeRef"].filter(val);[m
[32m+[m[32m});[m
[32m+[m[32m/** æŸ¥è¯¢éƒ¨é—¨ä¸‹æ‹‰æ ‘ç»“æ„ */[m
[32m+[m[32mfunction getDeptTree() {[m
[32m+[m[32m  deptTreeSelect().then(response => {[m
[32m+[m[32m    deptOptions.value = response.data;[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m[32m/** æŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨ */[m
[32m+[m[32mfunction getList() {[m
[32m+[m[32m  loading.value = true;[m
[32m+[m[32m  listUser(proxy.addDateRange(queryParams.value, dateRange.value)).then(res => {[m
[32m+[m[32m    loading.value = false;[m
[32m+[m[32m    userList.value = res.rows;[m
[32m+[m[32m    total.value = res.total;[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m[32m/** èŠ‚ç‚¹å•å‡»äº‹ä»¶ */[m
[32m+[m[32mfunction handleNodeClick(data) {[m
[32m+[m[32m  queryParams.value.deptId = data.id;[m
[32m+[m[32m  handleQuery();[m
[32m+[m[32m};[m
[32m+[m[32m/** æœç´¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleQuery() {[m
[32m+[m[32m  queryParams.value.pageNum = 1;[m
[32m+[m[32m  getList();[m
[32m+[m[32m};[m
[32m+[m[32m/** é‡ç½®æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction resetQuery() {[m
[32m+[m[32m  dateRange.value = [];[m
[32m+[m[32m  proxy.resetForm("queryRef");[m
[32m+[m[32m  queryParams.value.deptId = undefined;[m
[32m+[m[32m  proxy.$refs.deptTreeRef.setCurrentKey(null);[m
[32m+[m[32m  handleQuery();[m
[32m+[m[32m};[m
[32m+[m[32m/** åˆ é™¤æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleDelete(row) {[m
[32m+[m[32m  const userIds = row.userId || ids.value;[m
[32m+[m[32m  proxy.$modal.confirm('æ˜¯å¦ç¡®è®¤åˆ é™¤ç”¨æˆ·ç¼–å·ä¸º"' + userIds + '"çš„æ•°æ®é¡¹ï¼Ÿ').then(function () {[m
[32m+[m[32m    return delUser(userIds);[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    getList();[m
[32m+[m[32m    proxy.$modal.msgSuccess("åˆ é™¤æˆåŠŸ");[m
[32m+[m[32m  }).catch(() => {});[m
[32m+[m[32m};[m
[32m+[m[32m/** å¯¼å‡ºæŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleExport() {[m
[32m+[m[32m  proxy.download("system/user/export", {[m
[32m+[m[32m    ...queryParams.value,[m
[32m+[m[32m  },`user_${new Date().getTime()}.xlsx`);[m
[32m+[m[32m};[m
[32m+[m[32m/** ç”¨æˆ·çŠ¶æ€ä¿®æ”¹  */[m
[32m+[m[32mfunction handleStatusChange(row) {[m
[32m+[m[32m  let text = row.status === "0" ? "å¯ç”¨" : "åœç”¨";[m
[32m+[m[32m  proxy.$modal.confirm('ç¡®è®¤è¦"' + text + '""' + row.userName + '"ç”¨æˆ·å—?').then(function () {[m
[32m+[m[32m    return changeUserStatus(row.userId, row.status);[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    proxy.$modal.msgSuccess(text + "æˆåŠŸ");[m
[32m+[m[32m  }).catch(function () {[m
[32m+[m[32m    row.status = row.status === "0" ? "1" : "0";[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m[32m/** æ›´å¤šæ“ä½œ */[m
[32m+[m[32mfunction handleCommand(command, row) {[m
[32m+[m[32m  switch (command) {[m
[32m+[m[32m    case "handleResetPwd":[m
[32m+[m[32m      handleResetPwd(row);[m
[32m+[m[32m      break;[m
[32m+[m[32m    case "handleAuthRole":[m
[32m+[m[32m      handleAuthRole(row);[m
[32m+[m[32m      break;[m
[32m+[m[32m    default:[m
[32m+[m[32m      break;[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m[32m/** è·³è½¬è§’è‰²åˆ†é… */[m
[32m+[m[32mfunction handleAuthRole(row) {[m
[32m+[m[32m  const userId = row.userId;[m
[32m+[m[32m  router.push("/system/user-auth/role/" + userId);[m
[32m+[m[32m};[m
[32m+[m[32m/** é‡ç½®å¯†ç æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleResetPwd(row) {[m
[32m+[m[32m  proxy.$prompt('è¯·è¾“å…¥"' + row.userName + '"çš„æ–°å¯†ç ', "æç¤º", {[m
[32m+[m[32m    confirmButtonText: "ç¡®å®š",[m
[32m+[m[32m    cancelButtonText: "å–æ¶ˆ",[m
[32m+[m[32m    closeOnClickModal: false,[m
[32m+[m[32m    inputPattern: /^.{5,20}$/,[m
[32m+[m[32m    inputErrorMessage: "ç”¨æˆ·å¯†ç é•¿åº¦å¿…é¡»ä»‹äº 5 å’Œ 20 ä¹‹é—´",[m
[32m+[m[32m  }).then(({ value }) => {[m
[32m+[m[32m    resetUserPwd(row.userId, value).then(response => {[m
[32m+[m[32m      proxy.$modal.msgSuccess("ä¿®æ”¹æˆåŠŸï¼Œæ–°å¯†ç æ˜¯ï¼š" + value);[m
[32m+[m[32m    });[m
[32m+[m[32m  }).catch(() => {});[m
[32m+[m[32m};[m
[32m+[m[32m/** é€‰æ‹©æ¡æ•°  */[m
[32m+[m[32mfunction handleSelectionChange(selection) {[m
[32m+[m[32m  ids.value = selection.map(item => item.userId);[m
[32m+[m[32m  single.value = selection.length != 1;[m
[32m+[m[32m  multiple.value = !selection.length;[m
[32m+[m[32m};[m
[32m+[m[32m/** å¯¼å…¥æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleImport() {[m
[32m+[m[32m  upload.title = "ç”¨æˆ·å¯¼å…¥";[m
[32m+[m[32m  upload.open = true;[m
[32m+[m[32m};[m
[32m+[m[32m/** ä¸‹è½½æ¨¡æ¿æ“ä½œ */[m
[32m+[m[32mfunction importTemplate() {[m
[32m+[m[32m  proxy.download("system/user/importTemplate", {[m
[32m+[m[32m  }, `user_template_${new Date().getTime()}.xlsx`);[m
[32m+[m[32m};[m
[32m+[m[32m/**æ–‡ä»¶ä¸Šä¼ ä¸­å¤„ç† */[m
[32m+[m[32mconst handleFileUploadProgress = (event, file, fileList) => {[m
[32m+[m[32m  upload.isUploading = true;[m
[32m+[m[32m};[m
[32m+[m[32m/** æ–‡ä»¶ä¸Šä¼ æˆåŠŸå¤„ç† */[m
[32m+[m[32mconst handleFileSuccess = (response, file, fileList) => {[m
[32m+[m[32m  upload.open = false;[m
[32m+[m[32m  upload.isUploading = false;[m
[32m+[m[32m  proxy.$refs["uploadRef"].handleRemove(file);[m
[32m+[m[32m  proxy.$alert("<div style='overflow: auto;overflow-x: hidden;max-height: 70vh;padding: 10px 20px 0;'>" + response.msg + "</div>", "å¯¼å…¥ç»“æœ", { dangerouslyUseHTMLString: true });[m
[32m+[m[32m  getList();[m
[32m+[m[32m};[m
[32m+[m[32m/** æäº¤ä¸Šä¼ æ–‡ä»¶ */[m
[32m+[m[32mfunction submitFileForm() {[m
[32m+[m[32m  proxy.$refs["uploadRef"].submit();[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/** é‡ç½®æ“ä½œè¡¨å• */[m
[32m+[m[32mfunction reset() {[m
[32m+[m[32m  form.value = {[m
[32m+[m[32m    userId: undefined,[m
[32m+[m[32m    deptId: undefined,[m
[32m+[m[32m    userName: undefined,[m
[32m+[m[32m    nickName: undefined,[m
[32m+[m[32m    password: undefined,[m
[32m+[m[32m    phonenumber: undefined,[m
[32m+[m[32m    email: undefined,[m
[32m+[m[32m    sex: undefined,[m
[32m+[m[32m    status: "0",[m
[32m+[m[32m    remark: undefined,[m
[32m+[m[32m    postIds: [],[m
[32m+[m[32m    roleIds: [][m
[32m+[m[32m  };[m
[32m+[m[32m  proxy.resetForm("userRef");[m
[32m+[m[32m};[m
[32m+[m[32m/** å–æ¶ˆæŒ‰é’® */[m
[32m+[m[32mfunction cancel() {[m
[32m+[m[32m  open.value = false;[m
[32m+[m[32m  reset();[m
[32m+[m[32m};[m
[32m+[m[32m/** æ–°å¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleAdd() {[m
[32m+[m[32m  reset();[m
[32m+[m[32m  getUser().then(response => {[m
[32m+[m[32m    postOptions.value = response.posts;[m
[32m+[m[32m    roleOptions.value = response.roles;[m
[32m+[m[32m    open.value = true;[m
[32m+[m[32m    title.value = "æ·»åŠ ç”¨æˆ·";[m
[32m+[m[32m    form.value.password = initPassword.value;[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m[32m/** ä¿®æ”¹æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleUpdate(row) {[m
[32m+[m[32m  reset();[m
[32m+[m[32m  const userId = row.userId || ids.value;[m
[32m+[m[32m  getUser(userId).then(response => {[m
[32m+[m[32m    form.value = response.data;[m
[32m+[m[32m    postOptions.value = response.posts;[m
[32m+[m[32m    roleOptions.value = response.roles;[m
[32m+[m[32m    form.value.postIds = response.postIds;[m
[32m+[m[32m    form.value.roleIds = response.roleIds;[m
[32m+[m[32m    open.value = true;[m
[32m+[m[32m    title.value = "ä¿®æ”¹ç”¨æˆ·";[m
[32m+[m[32m    form.password = "";[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m[32m/** æäº¤æŒ‰é’® */[m
[32m+[m[32mfunction submitForm() {[m
[32m+[m[32m  proxy.$refs["userRef"].validate(valid => {[m
[32m+[m[32m    if (valid) {[m
[32m+[m[32m      if (form.value.userId != undefined) {[m
[32m+[m[32m        updateUser(form.value).then(response => {[m
[32m+[m[32m          proxy.$modal.msgSuccess("ä¿®æ”¹æˆåŠŸ");[m
[32m+[m[32m          open.value = false;[m
[32m+[m[32m          getList();[m
[32m+[m[32m        });[m
[32m+[m[32m      } else {[m
[32m+[m[32m        addUser(form.value).then(response => {[m
[32m+[m[32m          proxy.$modal.msgSuccess("æ–°å¢æˆåŠŸ");[m
[32m+[m[32m          open.value = false;[m
[32m+[m[32m          getList();[m
[32m+[m[32m        });[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mgetDeptTree();[m
[32m+[m[32mgetList();[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/system/user/profile/index.vue b/src/views/system/user/profile/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..5851f05d[m
[1m--- /dev/null[m
[1m+++ b/src/views/system/user/profile/index.vue[m
[36m@@ -0,0 +1,87 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m   <div class="app-container">[m
[32m+[m[32m      <el-row :gutter="20">[m
[32m+[m[32m         <el-col :span="6" :xs="24">[m
[32m+[m[32m            <el-card class="box-card">[m
[32m+[m[32m               <template v-slot:header>[m
[32m+[m[32m                 <div class="clearfix">[m
[32m+[m[32m                   <span>ä¸ªäººä¿¡æ¯</span>[m
[32m+[m[32m                 </div>[m
[32m+[m[32m               </template>[m
[32m+[m[32m               <div>[m
[32m+[m[32m                  <div class="text-center">[m
[32m+[m[32m                     <userAvatar />[m
[32m+[m[32m                  </div>[m
[32m+[m[32m                  <ul class="list-group list-group-striped">[m
[32m+[m[32m                     <li class="list-group-item">[m
[32m+[m[32m                        <svg-icon icon-class="user" />ç”¨æˆ·åç§°[m
[32m+[m[32m                        <div class="pull-right">{{ state.user.userName }}</div>[m
[32m+[m[32m                     </li>[m
[32m+[m[32m                     <li class="list-group-item">[m
[32m+[m[32m                        <svg-icon icon-class="phone" />æ‰‹æœºå·ç [m
[32m+[m[32m                        <div class="pull-right">{{ state.user.phonenumber }}</div>[m
[32m+[m[32m                     </li>[m
[32m+[m[32m                     <li class="list-group-item">[m
[32m+[m[32m                        <svg-icon icon-class="email" />ç”¨æˆ·é‚®ç®±[m
[32m+[m[32m                        <div class="pull-right">{{ state.user.email }}</div>[m
[32m+[m[32m                     </li>[m
[32m+[m[32m                     <li class="list-group-item">[m
[32m+[m[32m                        <svg-icon icon-class="tree" />æ‰€å±éƒ¨é—¨[m
[32m+[m[32m                        <div class="pull-right" v-if="state.user.dept">{{ state.user.dept.deptName }} / {{ state.postGroup }}</div>[m
[32m+[m[32m                     </li>[m
[32m+[m[32m                     <li class="list-group-item">[m
[32m+[m[32m                        <svg-icon icon-class="peoples" />æ‰€å±è§’è‰²[m
[32m+[m[32m                        <div class="pull-right">{{ state.roleGroup }}</div>[m
[32m+[m[32m                     </li>[m
[32m+[m[32m                     <li class="list-group-item">[m
[32m+[m[32m                        <svg-icon icon-class="date" />åˆ›å»ºæ—¥æœŸ[m
[32m+[m[32m                        <div class="pull-right">{{ state.user.createTime }}</div>[m
[32m+[m[32m                     </li>[m
[32m+[m[32m                  </ul>[m
[32m+[m[32m               </div>[m
[32m+[m[32m            </el-card>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m         <el-col :span="18" :xs="24">[m
[32m+[m[32m            <el-card>[m
[32m+[m[32m               <template v-slot:header>[m
[32m+[m[32m                 <div class="clearfix">[m
[32m+[m[32m                   <span>åŸºæœ¬èµ„æ–™</span>[m
[32m+[m[32m                 </div>[m
[32m+[m[32m               </template>[m
[32m+[m[32m               <el-tabs v-model="activeTab">[m
[32m+[m[32m                  <el-tab-pane label="åŸºæœ¬èµ„æ–™" name="userinfo">[m
[32m+[m[32m                     <userInfo :user="state.user" />[m
[32m+[m[32m                  </el-tab-pane>[m
[32m+[m[32m                  <el-tab-pane label="ä¿®æ”¹å¯†ç " name="resetPwd">[m
[32m+[m[32m                     <resetPwd />[m
[32m+[m[32m                  </el-tab-pane>[m
[32m+[m[32m               </el-tabs>[m
[32m+[m[32m            </el-card>[m
[32m+[m[32m         </el-col>[m
[32m+[m[32m      </el-row>[m
[32m+[m[32m   </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup name="Profile">[m
[32m+[m[32mimport userAvatar from "./userAvatar";[m
[32m+[m[32mimport userInfo from "./userInfo";[m
[32m+[m[32mimport resetPwd from "./resetPwd";[m
[32m+[m[32mimport { getUserProfile } from "@/api/system/user";[m
[32m+[m
[32m+[m[32mconst activeTab = ref("userinfo");[m
[32m+[m[32mconst state = reactive({[m
[32m+[m[32m  user: {},[m
[32m+[m[32m  roleGroup: {},[m
[32m+[m[32m  postGroup: {}[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mfunction getUser() {[m
[32m+[m[32m  getUserProfile().then(response => {[m
[32m+[m[32m    state.user = response.data;[m
[32m+[m[32m    state.roleGroup = response.roleGroup;[m
[32m+[m[32m    state.postGroup = response.postGroup;[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mgetUser();[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/system/user/profile/resetPwd.vue b/src/views/system/user/profile/resetPwd.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..dec2d79c[m
[1m--- /dev/null[m
[1m+++ b/src/views/system/user/profile/resetPwd.vue[m
[36m@@ -0,0 +1,57 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m   <el-form ref="pwdRef" :model="user" :rules="rules" label-width="80px">[m
[32m+[m[32m      <el-form-item label="æ—§å¯†ç " prop="oldPassword">[m
[32m+[m[32m         <el-input v-model="user.oldPassword" placeholder="è¯·è¾“å…¥æ—§å¯†ç " type="password" show-password />[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item label="æ–°å¯†ç " prop="newPassword">[m
[32m+[m[32m         <el-input v-model="user.newPassword" placeholder="è¯·è¾“å…¥æ–°å¯†ç " type="password" show-password />[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item label="ç¡®è®¤å¯†ç " prop="confirmPassword">[m
[32m+[m[32m         <el-input v-model="user.confirmPassword" placeholder="è¯·ç¡®è®¤æ–°å¯†ç " type="password" show-password/>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item>[m
[32m+[m[32m      <el-button type="primary" @click="submit">ä¿å­˜</el-button>[m
[32m+[m[32m      <el-button type="danger" @click="close">å…³é—­</el-button>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m   </el-form>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { updateUserPwd } from "@/api/system/user";[m
[32m+[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m
[32m+[m[32mconst user = reactive({[m
[32m+[m[32m  oldPassword: undefined,[m
[32m+[m[32m  newPassword: undefined,[m
[32m+[m[32m  confirmPassword: undefined[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst equalToPassword = (rule, value, callback) => {[m
[32m+[m[32m  if (user.newPassword !== value) {[m
[32m+[m[32m    callback(new Error("ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´"));[m
[32m+[m[32m  } else {[m
[32m+[m[32m    callback();[m
[32m+[m[32m  }[m
[32m+[m[32m};[m
[32m+[m[32mconst rules = ref({[m
[32m+[m[32m  oldPassword: [{ required: true, message: "æ—§å¯†ç ä¸èƒ½ä¸ºç©º", trigger: "blur" }],[m
[32m+[m[32m  newPassword: [{ required: true, message: "æ–°å¯†ç ä¸èƒ½ä¸ºç©º", trigger: "blur" }, { min: 6, max: 20, message: "é•¿åº¦åœ¨ 6 åˆ° 20 ä¸ªå­—ç¬¦", trigger: "blur" }],[m
[32m+[m[32m  confirmPassword: [{ required: true, message: "ç¡®è®¤å¯†ç ä¸èƒ½ä¸ºç©º", trigger: "blur" }, { required: true, validator: equalToPassword, trigger: "blur" }][m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m/** æäº¤æŒ‰é’® */[m
[32m+[m[32mfunction submit() {[m
[32m+[m[32m  proxy.$refs.pwdRef.validate(valid => {[m
[32m+[m[32m    if (valid) {[m
[32m+[m[32m      updateUserPwd(user.oldPassword, user.newPassword).then(response => {[m
[32m+[m[32m        proxy.$modal.msgSuccess("ä¿®æ”¹æˆåŠŸ");[m
[32m+[m[32m      });[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m[32m/** å…³é—­æŒ‰é’® */[m
[32m+[m[32mfunction close() {[m
[32m+[m[32m  proxy.$tab.closePage();[m
[32m+[m[32m};[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/system/user/profile/userAvatar.vue b/src/views/system/user/profile/userAvatar.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..3b39636c[m
[1m--- /dev/null[m
[1m+++ b/src/views/system/user/profile/userAvatar.vue[m
[36m@@ -0,0 +1,171 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="user-info-head" @click="editCropper()">[m
[32m+[m[32m    <img :src="options.img" title="ç‚¹å‡»ä¸Šä¼ å¤´åƒ" class="img-circle img-lg" />[m
[32m+[m[32m    <el-dialog :title="title" v-model="open" width="800px" append-to-body @opened="modalOpened" @close="closeDialog">[m
[32m+[m[32m      <el-row>[m
[32m+[m[32m        <el-col :xs="24" :md="12" :style="{ height: '350px' }">[m
[32m+[m[32m          <vue-cropper[m
[32m+[m[32m            ref="cropper"[m
[32m+[m[32m            :img="options.img"[m
[32m+[m[32m            :info="true"[m
[32m+[m[32m            :autoCrop="options.autoCrop"[m
[32m+[m[32m            :autoCropWidth="options.autoCropWidth"[m
[32m+[m[32m            :autoCropHeight="options.autoCropHeight"[m
[32m+[m[32m            :fixedBox="options.fixedBox"[m
[32m+[m[32m            :outputType="options.outputType"[m
[32m+[m[32m            @realTime="realTime"[m
[32m+[m[32m            v-if="visible"[m
[32m+[m[32m          />[m
[32m+[m[32m        </el-col>[m
[32m+[m[32m        <el-col :xs="24" :md="12" :style="{ height: '350px' }">[m
[32m+[m[32m          <div class="avatar-upload-preview">[m
[32m+[m[32m            <img :src="options.previews.url" :style="options.previews.img" />[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </el-col>[m
[32m+[m[32m      </el-row>[m
[32m+[m[32m      <br />[m
[32m+[m[32m      <el-row>[m
[32m+[m[32m        <el-col :lg="2" :md="2">[m
[32m+[m[32m          <el-upload[m
[32m+[m[32m            action="#"[m
[32m+[m[32m            :http-request="requestUpload"[m
[32m+[m[32m            :show-file-list="false"[m
[32m+[m[32m            :before-upload="beforeUpload"[m
[32m+[m[32m          >[m
[32m+[m[32m            <el-button>[m
[32m+[m[32m              é€‰æ‹©[m
[32m+[m[32m              <el-icon class="el-icon--right"><Upload /></el-icon>[m
[32m+[m[32m            </el-button>[m
[32m+[m[32m          </el-upload>[m
[32m+[m[32m        </el-col>[m
[32m+[m[32m        <el-col :lg="{ span: 1, offset: 2 }" :md="2">[m
[32m+[m[32m          <el-button icon="Plus" @click="changeScale(1)"></el-button>[m
[32m+[m[32m        </el-col>[m
[32m+[m[32m        <el-col :lg="{ span: 1, offset: 1 }" :md="2">[m
[32m+[m[32m          <el-button icon="Minus" @click="changeScale(-1)"></el-button>[m
[32m+[m[32m        </el-col>[m
[32m+[m[32m        <el-col :lg="{ span: 1, offset: 1 }" :md="2">[m
[32m+[m[32m          <el-button icon="RefreshLeft" @click="rotateLeft()"></el-button>[m
[32m+[m[32m        </el-col>[m
[32m+[m[32m        <el-col :lg="{ span: 1, offset: 1 }" :md="2">[m
[32m+[m[32m          <el-button icon="RefreshRight" @click="rotateRight()"></el-button>[m
[32m+[m[32m        </el-col>[m
[32m+[m[32m        <el-col :lg="{ span: 2, offset: 6 }" :md="2">[m
[32m+[m[32m          <el-button type="primary" @click="uploadImg()">æ äº¤</el-button>[m
[32m+[m[32m        </el-col>[m
[32m+[m[32m      </el-row>[m
[32m+[m[32m    </el-dialog>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport "vue-cropper/dist/index.css";[m
[32m+[m[32mimport { VueCropper } from "vue-cropper";[m
[32m+[m[32mimport { uploadAvatar } from "@/api/system/user";[m
[32m+[m[32mimport useUserStore from "@/store/modules/user";[m
[32m+[m
[32m+[m[32mconst userStore = useUserStore();[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m
[32m+[m[32mconst open = ref(false);[m
[32m+[m[32mconst visible = ref(false);[m
[32m+[m[32mconst title = ref("ä¿®æ”¹å¤´åƒ");[m
[32m+[m
[32m+[m[32m//å›¾ç‰‡è£å‰ªæ•°æ®[m
[32m+[m[32mconst options = reactive({[m
[32m+[m[32m  img: userStore.avatar,     // è£å‰ªå›¾ç‰‡çš„åœ°å€[m
[32m+[m[32m  autoCrop: true,            // æ˜¯å¦é»˜è®¤ç”Ÿæˆæˆªå›¾æ¡†[m
[32m+[m[32m  autoCropWidth: 200,        // é»˜è®¤ç”Ÿæˆæˆªå›¾æ¡†å®½åº¦[m
[32m+[m[32m  autoCropHeight: 200,       // é»˜è®¤ç”Ÿæˆæˆªå›¾æ¡†é«˜åº¦[m
[32m+[m[32m  fixedBox: true,            // å›ºå®šæˆªå›¾æ¡†å¤§å° ä¸å…è®¸æ”¹å˜[m
[32m+[m[32m  outputType: "png",         // é»˜è®¤ç”Ÿæˆæˆªå›¾ä¸ºPNGæ ¼å¼[m
[32m+[m[32m  filename: 'avatar',        // æ–‡ä»¶åç§°[m
[32m+[m[32m  previews: {}               //é¢„è§ˆæ•°æ®[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m/** ç¼–è¾‘å¤´åƒ */[m
[32m+[m[32mfunction editCropper() {[m
[32m+[m[32m  open.value = true;[m
[32m+[m[32m}[m
[32m+[m[32m/** æ‰“å¼€å¼¹å‡ºå±‚ç»“æŸæ—¶çš„å›è°ƒ */[m
[32m+[m[32mfunction modalOpened() {[m
[32m+[m[32m  visible.value = true;[m
[32m+[m[32m}[m
[32m+[m[32m/** è¦†ç›–é»˜è®¤ä¸Šä¼ è¡Œä¸º */[m
[32m+[m[32mfunction requestUpload() {}[m
[32m+[m[32m/** å‘å·¦æ—‹è½¬ */[m
[32m+[m[32mfunction rotateLeft() {[m
[32m+[m[32m  proxy.$refs.cropper.rotateLeft();[m
[32m+[m[32m}[m
[32m+[m[32m/** å‘å³æ—‹è½¬ */[m
[32m+[m[32mfunction rotateRight() {[m
[32m+[m[32m  proxy.$refs.cropper.rotateRight();[m
[32m+[m[32m}[m
[32m+[m[32m/** å›¾ç‰‡ç¼©æ”¾ */[m
[32m+[m[32mfunction changeScale(num) {[m
[32m+[m[32m  num = num || 1;[m
[32m+[m[32m  proxy.$refs.cropper.changeScale(num);[m
[32m+[m[32m}[m
[32m+[m[32m/** ä¸Šä¼ é¢„å¤„ç† */[m
[32m+[m[32mfunction beforeUpload(file) {[m
[32m+[m[32m  if (file.type.indexOf("image/") == -1) {[m
[32m+[m[32m    proxy.$modal.msgError("æ–‡ä»¶æ ¼å¼é”™è¯¯ï¼Œè¯·ä¸Šä¼ å›¾ç‰‡ç±»å‹,å¦‚ï¼šJPGï¼ŒPNGåç¼€çš„æ–‡ä»¶ã€‚");[m
[32m+[m[32m  } else {[m
[32m+[m[32m    const reader = new FileReader();[m
[32m+[m[32m    reader.readAsDataURL(file);[m
[32m+[m[32m    reader.onload = () => {[m
[32m+[m[32m      options.img = reader.result;[m
[32m+[m[32m      options.filename = file.name;[m
[32m+[m[32m    };[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m/** ä¸Šä¼ å›¾ç‰‡ */[m
[32m+[m[32mfunction uploadImg() {[m
[32m+[m[32m  proxy.$refs.cropper.getCropBlob(data => {[m
[32m+[m[32m    let formData = new FormData();[m
[32m+[m[32m    formData.append("avatarfile", data, options.filename);[m
[32m+[m[32m    uploadAvatar(formData).then(response => {[m
[32m+[m[32m      open.value = false;[m
[32m+[m[32m      options.img = import.meta.env.VITE_APP_BASE_API + response.imgUrl;[m
[32m+[m[32m      userStore.avatar = options.img;[m
[32m+[m[32m      proxy.$modal.msgSuccess("ä¿®æ”¹æˆåŠŸ");[m
[32m+[m[32m      visible.value = false;[m
[32m+[m[32m    });[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** å®æ—¶é¢„è§ˆ */[m
[32m+[m[32mfunction realTime(data) {[m
[32m+[m[32m  options.previews = data;[m
[32m+[m[32m}[m
[32m+[m[32m/** å…³é—­çª—å£ */[m
[32m+[m[32mfunction closeDialog() {[m
[32m+[m[32m  options.img = userStore.avatar;[m
[32m+[m[32m  options.visible = false;[m
[32m+[m[32m}[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang='scss' scoped>[m
[32m+[m[32m.user-info-head {[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m  display: inline-block;[m
[32m+[m[32m  height: 120px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.user-info-head:hover:after {[m
[32m+[m[32m  content: "+";[m
[32m+[m[32m  position: absolute;[m
[32m+[m[32m  left: 0;[m
[32m+[m[32m  right: 0;[m
[32m+[m[32m  top: 0;[m
[32m+[m[32m  bottom: 0;[m
[32m+[m[32m  color: #eee;[m
[32m+[m[32m  background: rgba(0, 0, 0, 0.5);[m
[32m+[m[32m  font-size: 24px;[m
[32m+[m[32m  font-style: normal;[m
[32m+[m[32m  -webkit-font-smoothing: antialiased;[m
[32m+[m[32m  -moz-osx-font-smoothing: grayscale;[m
[32m+[m[32m  cursor: pointer;[m
[32m+[m[32m  line-height: 110px;[m
[32m+[m[32m  border-radius: 50%;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/views/system/user/profile/userInfo.vue b/src/views/system/user/profile/userInfo.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..a5e1c773[m
[1m--- /dev/null[m
[1m+++ b/src/views/system/user/profile/userInfo.vue[m
[36m@@ -0,0 +1,67 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m   <el-form ref="userRef" :model="form" :rules="rules" label-width="80px">[m
[32m+[m[32m      <el-form-item label="ç”¨æˆ·æ˜µç§°" prop="nickName">[m
[32m+[m[32m         <el-input v-model="form.nickName" maxlength="30" />[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item label="æ‰‹æœºå·ç " prop="phonenumber">[m
[32m+[m[32m         <el-input v-model="form.phonenumber" maxlength="11" />[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item label="é‚®ç®±" prop="email">[m
[32m+[m[32m         <el-input v-model="form.email" maxlength="50" />[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item label="æ€§åˆ«">[m
[32m+[m[32m         <el-radio-group v-model="form.sex">[m
[32m+[m[32m            <el-radio label="0">ç”·</el-radio>[m
[32m+[m[32m            <el-radio label="1">å¥³</el-radio>[m
[32m+[m[32m         </el-radio-group>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item>[m
[32m+[m[32m      <el-button type="primary" @click="submit">ä¿å­˜</el-button>[m
[32m+[m[32m      <el-button type="danger" @click="close">å…³é—­</el-button>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m   </el-form>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { updateUserProfile } from "@/api/system/user";[m
[32m+[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m  user: {[m
[32m+[m[32m    type: Object[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m
[32m+[m[32mconst form = ref({});[m
[32m+[m[32mconst rules = ref({[m
[32m+[m[32m  nickName: [{ required: true, message: "ç”¨æˆ·æ˜µç§°ä¸èƒ½ä¸ºç©º", trigger: "blur" }],[m
[32m+[m[32m  email: [{ required: true, message: "é‚®ç®±åœ°å€ä¸èƒ½ä¸ºç©º", trigger: "blur" }, { type: "email", message: "è¯·è¾“å…¥æ­£ç¡®çš„é‚®ç®±åœ°å€", trigger: ["blur", "change"] }],[m
[32m+[m[32m  phonenumber: [{ required: true, message: "æ‰‹æœºå·ç ä¸èƒ½ä¸ºç©º", trigger: "blur" }, { pattern: /^1[3|4|5|6|7|8|9][0-9]\d{8}$/, message: "è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·ç ", trigger: "blur" }],[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m/** æäº¤æŒ‰é’® */[m
[32m+[m[32mfunction submit() {[m
[32m+[m[32m  proxy.$refs.userRef.validate(valid => {[m
[32m+[m[32m    if (valid) {[m
[32m+[m[32m      updateUserProfile(form.value).then(response => {[m
[32m+[m[32m        proxy.$modal.msgSuccess("ä¿®æ”¹æˆåŠŸ");[m
[32m+[m[32m        props.user.phonenumber = form.value.phonenumber;[m
[32m+[m[32m        props.user.email = form.value.email;[m
[32m+[m[32m      });[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m/** å…³é—­æŒ‰é’® */[m
[32m+[m[32mfunction close() {[m
[32m+[m[32m  proxy.$tab.closePage();[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32m// å›æ˜¾å½“å‰ç™»å½•ç”¨æˆ·ä¿¡æ¯[m
[32m+[m[32mwatch(() => props.user, user => {[m
[32m+[m[32m  if (user) {[m
[32m+[m[32m    form.value = { nickName: user.nickName, phonenumber: user.phonenumber, email: user.email, sex: user.sex };[m
[32m+[m[32m  }[m
[32m+[m[32m},{ immediate: true });[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/tool/build/CodeTypeDialog.vue b/src/views/tool/build/CodeTypeDialog.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..c68836f8[m
[1m--- /dev/null[m
[1m+++ b/src/views/tool/build/CodeTypeDialog.vue[m
[36m@@ -0,0 +1,77 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <el-dialog v-model="open" width="500px" title="é€‰æ‹©ç”Ÿæˆç±»å‹" @open="onOpen" @close="onClose">[m
[32m+[m[32m    <el-form ref="codeTypeForm" :model="formData" :rules="rules" label-width="100px">[m
[32m+[m[32m      <el-form-item label="ç”Ÿæˆç±»å‹" prop="type">[m
[32m+[m[32m        <el-radio-group v-model="formData.type">[m
[32m+[m[32m          <el-radio-button v-for="(item, index) in typeOptions" :key="index" :label="item.value">[m
[32m+[m[32m            {{ item.label }}[m
[32m+[m[32m          </el-radio-button>[m
[32m+[m[32m        </el-radio-group>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item v-if="showFileName" label="æ–‡ä»¶å" prop="fileName">[m
[32m+[m[32m        <el-input v-model="formData.fileName" placeholder="è¯·è¾“å…¥æ–‡ä»¶å" clearable />[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m    </el-form>[m
[32m+[m
[32m+[m[32m    <template #footer>[m
[32m+[m[32m      <el-button @click="onClose">[m
[32m+[m[32m        å–æ¶ˆ[m
[32m+[m[32m      </el-button>[m
[32m+[m[32m      <el-button type="primary" @click="handelConfirm">[m
[32m+[m[32m        ç¡®å®š[m
[32m+[m[32m      </el-button>[m
[32m+[m[32m    </template>[m
[32m+[m[32m  </el-dialog>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mconst open = defineModel()[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m  showFileName: Boolean[m
[32m+[m[32m})[m
[32m+[m[32mconst emit = defineEmits(['confirm'])[m
[32m+[m[32mconst formData = ref({[m
[32m+[m[32m  fileName: undefined,[m
[32m+[m[32m  type: 'file'[m
[32m+[m[32m});[m
[32m+[m[32mconst codeTypeForm = ref()[m
[32m+[m[32mconst rules = {[m
[32m+[m[32m  fileName: [{[m
[32m+[m[32m    required: true,[m
[32m+[m[32m    message: 'è¯·è¾“å…¥æ–‡ä»¶å',[m
[32m+[m[32m    trigger: 'blur'[m
[32m+[m[32m  }],[m
[32m+[m[32m  type: [{[m
[32m+[m[32m    required: true,[m
[32m+[m[32m    message: 'ç”Ÿæˆç±»å‹ä¸èƒ½ä¸ºç©º',[m
[32m+[m[32m    trigger: 'change'[m
[32m+[m[32m  }][m
[32m+[m[32m};[m
[32m+[m[32mconst typeOptions = ref([[m
[32m+[m[32m  {[m
[32m+[m[32m    label: 'é¡µé¢',[m
[32m+[m[32m    value: 'file'[m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    label: 'å¼¹çª—',[m
[32m+[m[32m    value: 'dialog'[m
[32m+[m[32m  }[m
[32m+[m[32m]);[m
[32m+[m[32mfunction onOpen() {[m
[32m+[m[32m  if (props.showFileName) {[m
[32m+[m[32m    formData.value.fileName = `${+new Date()}.vue`;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction onClose() {[m
[32m+[m[32m  open.value = false[m
[32m+[m[32m};[m
[32m+[m
[32m+[m[32mfunction handelConfirm() {[m
[32m+[m[32m  codeTypeForm.value.validate(valid => {[m
[32m+[m[32m    if (!valid) return[m
[32m+[m[32m    emit('confirm', { ...formData.value })[m
[32m+[m[32m    onClose()[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m[32m</script>[m
\ No newline at end of file[m
[1mdiff --git a/src/views/tool/build/DraggableItem copy.vue b/src/views/tool/build/DraggableItem copy.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..e559ba0b[m
[1m--- /dev/null[m
[1m+++ b/src/views/tool/build/DraggableItem copy.vue[m	
[36m@@ -0,0 +1,77 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <el-col :span="element.span" :class="className" @click.stop="activeItem(element)">[m
[32m+[m[32m    <el-form-item :label="element.label" :label-width="element.labelWidth ? element.labelWidth + 'px' : null"[m
[32m+[m[32m      :required="element.required" v-if="element.layout === 'colFormItem'">[m
[32m+[m[32m      <component :is="element.tag" :key="element.tag" @input="handleInput" v-model="element.defaultValue"[m
[32m+[m[32m        :placeholder="element.placeholder" :type="element.type ? element.type : null" :style="element.style" />[m
[32m+[m[32m    </el-form-item>[m
[32m+[m[32m    <el-col :span='element.span' v-else>[m
[32m+[m[32m      <el-row :gutter="element.gutter" :class="element.class" @click.stop="activeItem(element)">[m
[32m+[m[32m        <span class="component-name"> {{ element.componentName }} </span>[m
[32m+[m[32m        <draggable group="componentsGroup" :animation="340" :list="element.children" class="drag-wrapper" item-key="label"[m
[32m+[m[32m          ref="draggableItemRef">[m
[32m+[m[32m          <template #item="scoped">[m
[32m+[m[32m            <draggable-item :key="scoped.element.renderKey" :drawing-list="element.children" :element="scoped.element"[m
[32m+[m[32m              :index="index" :active-id="activeId" :form-conf="formConf" @activeItem="activeItem(scoped.element)"[m
[32m+[m[32m              @copyItem="copyItem(scoped.element, element.children)"[m
[32m+[m[32m              @deleteItem="deleteItem(scoped.index, element.children)" />[m
[32m+[m[32m          </template>[m
[32m+[m[32m        </draggable>[m
[32m+[m[32m      </el-row>[m
[32m+[m[32m    </el-col>[m
[32m+[m[32m    <span class="drawing-item-copy" title="å¤åˆ¶" @click.stop="copyItem(element)">[m
[32m+[m[32m      <el-icon>[m
[32m+[m[32m        <CopyDocument />[m
[32m+[m[32m      </el-icon>[m
[32m+[m[32m    </span>[m
[32m+[m[32m    <span class="drawing-item-delete" title="åˆ é™¤" @click.stop="deleteItem(index)">[m
[32m+[m[32m      <el-icon>[m
[32m+[m[32m        <Delete />[m
[32m+[m[32m      </el-icon>[m
[32m+[m[32m    </span>[m
[32m+[m[32m  </el-col>[m
[32m+[m[32m</template>[m
[32m+[m[32m<script setup name="DraggableItem">[m
[32m+[m[32mimport draggable from "vuedraggable/dist/vuedraggable.common";[m
[32m+[m[32mconst { proxy } = getCurrentInstance()[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m  element: Object,[m
[32m+[m[32m  index: Number,[m
[32m+[m[32m  drawingList: Array,[m
[32m+[m[32m  activeId: {[m
[32m+[m[32m    type: [String, Number][m
[32m+[m[32m  },[m
[32m+[m[32m  formConf: Object[m
[32m+[m[32m})[m
[32m+[m[32mconst className = ref('')[m
[32m+[m[32mconst draggableItemRef = ref(null)[m
[32m+[m[32mconst emits = defineEmits(['activeItem', 'copyItem', 'deleteItem'])[m
[32m+[m[32mfunction activeItem(item) {[m
[32m+[m[32m  emits('activeItem', item)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction copyItem(item, parent) {[m
[32m+[m[32m  emits('copyItem', item, parent ?? props.drawingList[m
[32m+[m[32m  )[m
[32m+[m[32m}[m
[32m+[m[32mfunction deleteItem(item, parent) {[m
[32m+[m[32m  emits('deleteItem', item, parent ?? props.drawingList)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction handleInput(value) {[m
[32m+[m[32m  console.log(value);[m
[32m+[m[32m  props.element.defaultValue = value[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mwatch(() => props.activeId, (val) => {[m
[32m+[m[32m  className.value = (props.element.layout === 'rowFormItem' ? 'drawing-row-item' : 'drawing-item') + (val === props.element.formId ? ' active-from-item' : '')[m
[32m+[m[32m  if (props.formConf.unFocusedComponentBorder) {[m
[32m+[m[32m    className.value += ' unfocus-bordered'[m
[32m+[m[32m  }[m
[32m+[m[32m}, {[m
[32m+[m[32m  immediate: true[m
[32m+[m[32m})[m
[32m+[m[32m</script>[m
\ No newline at end of file[m
[1mdiff --git a/src/views/tool/build/DraggableItem.vue b/src/views/tool/build/DraggableItem.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..87c38b55[m
[1m--- /dev/null[m
[1m+++ b/src/views/tool/build/DraggableItem.vue[m
[36m@@ -0,0 +1,74 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <el-col :span="element.span" :class="className" @click.stop="activeItem(element)">[m
[32m+[m[32m    <el-form-item :label="element.label" :label-width="element.labelWidth ? element.labelWidth + 'px' : null"[m
[32m+[m[32m      :required="element.required" v-if="element.layout === 'colFormItem'">[m
[32m+[m[32m      <render :key="element.tag" :conf="element" v-model="element.defaultValue" />[m
[32m+[m[32m    </el-form-item>[m
[32m+[m[32m    <el-row :gutter="element.gutter" :class="element.class" @click.stop="activeItem(element)" v-else>[m
[32m+[m[32m      <span class="component-name"> {{ element.componentName }} </span>[m
[32m+[m[32m      <draggable group="componentsGroup" :animation="340" :list="element.children" class="drag-wrapper" item-key="label"[m
[32m+[m[32m        ref="draggableItemRef" :component-data="getComponentData()">[m
[32m+[m[32m        <template #item="scoped">[m
[32m+[m[32m          <draggable-item :key="scoped.element.renderKey" :drawing-list="element.children" :element="scoped.element"[m
[32m+[m[32m            :index="index" :active-id="activeId" :form-conf="formConf" @activeItem="activeItem(scoped.element)"[m
[32m+[m[32m            @copyItem="copyItem(scoped.element, element.children)"[m
[32m+[m[32m            @deleteItem="deleteItem(scoped.index, element.children)" />[m
[32m+[m[32m        </template>[m
[32m+[m[32m      </draggable>[m
[32m+[m[32m    </el-row>[m
[32m+[m[32m    <span class="drawing-item-copy" title="å¤åˆ¶" @click.stop="copyItem(element)">[m
[32m+[m[32m      <el-icon>[m
[32m+[m[32m        <CopyDocument />[m
[32m+[m[32m      </el-icon>[m
[32m+[m[32m    </span>[m
[32m+[m[32m    <span class="drawing-item-delete" title="åˆ é™¤" @click.stop="deleteItem(index)">[m
[32m+[m[32m      <el-icon>[m
[32m+[m[32m        <Delete />[m
[32m+[m[32m      </el-icon>[m
[32m+[m[32m    </span>[m
[32m+[m[32m  </el-col>[m
[32m+[m[32m</template>[m
[32m+[m[32m<script setup name="DraggableItem">[m
[32m+[m[32mimport draggable from "vuedraggable/dist/vuedraggable.common";[m
[32m+[m[32mimport render from '@/utils/generator/render'[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m  element: Object,[m
[32m+[m[32m  index: Number,[m
[32m+[m[32m  drawingList: Array,[m
[32m+[m[32m  activeId: {[m
[32m+[m[32m    type: [String, Number][m
[32m+[m[32m  },[m
[32m+[m[32m  formConf: Object[m
[32m+[m[32m})[m
[32m+[m[32mconst className = ref('')[m
[32m+[m[32mconst draggableItemRef = ref(null)[m
[32m+[m[32mconst emits = defineEmits(['activeItem', 'copyItem', 'deleteItem'])[m
[32m+[m[32mfunction activeItem(item) {[m
[32m+[m[32m  emits('activeItem', item)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction copyItem(item, parent) {[m
[32m+[m[32m  emits('copyItem', item, parent ?? props.drawingList[m
[32m+[m[32m  )[m
[32m+[m[32m}[m
[32m+[m[32mfunction deleteItem(item, parent) {[m
[32m+[m[32m  emits('deleteItem', item, parent ?? props.drawingList)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction getComponentData() {[m
[32m+[m[32m  return {[m
[32m+[m[32m    gutter: props.element.gutter,[m
[32m+[m[32m    justify: props.element.justify,[m
[32m+[m[32m    align: props.element.align[m
[32m+[m[32m  };[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mwatch(() => props.activeId, (val) => {[m
[32m+[m[32m  className.value = (props.element.layout === 'rowFormItem' ? 'drawing-row-item' : 'drawing-item') + (val === props.element.formId ? ' active-from-item' : '')[m
[32m+[m[32m  if (props.formConf.unFocusedComponentBorder) {[m
[32m+[m[32m    className.value += ' unfocus-bordered'[m
[32m+[m[32m  }[m
[32m+[m[32m}, {[m
[32m+[m[32m  immediate: true[m
[32m+[m[32m})[m
[32m+[m[32m</script>[m
\ No newline at end of file[m
[1mdiff --git a/src/views/tool/build/IconsDialog.vue b/src/views/tool/build/IconsDialog.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..60e4a14c[m
[1m--- /dev/null[m
[1m+++ b/src/views/tool/build/IconsDialog.vue[m
[36m@@ -0,0 +1,117 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="icon-dialog">[m
[32m+[m[32m    <el-dialog v-model="value" width="980px" :close-on-click-modal="false" :modal-append-to-body="false" @open="onOpen"[m
[32m+[m[32m      @close="onClose">[m
[32m+[m[32m      <template #header="{ close, titleId, titleClass }">[m
[32m+[m[32m        é€‰æ‹©å›¾æ ‡[m
[32m+[m[32m        <el-input v-model="key" size="small" :style="{ width: '260px' }" placeholder="è¯·è¾“å…¥å›¾æ ‡åç§°" prefix-icon="Search"[m
[32m+[m[32m          clearable />[m
[32m+[m[32m      </template>[m
[32m+[m[32m      <ul class="icon-ul">[m
[32m+[m[32m        <li v-for="icon in iconList" :key="icon" :class="active === icon ? 'active-item' : ''" @click="onSelect(icon)">[m
[32m+[m[32m          <div>[m
[32m+[m[32m            <el-icon :size="30">[m
[32m+[m[32m              <component :is="icon" />[m
[32m+[m[32m            </el-icon>[m
[32m+[m[32m            <div>{{ icon }}</div>[m
[32m+[m[32m          </div>[m
[32m+[m[32m        </li>[m
[32m+[m[32m      </ul>[m
[32m+[m[32m    </el-dialog>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport * as ElementPlusIconsVue from '@element-plus/icons-vue'[m
[32m+[m[32mimport { watch } from 'vue';[m
[32m+[m[32mconst iconList = ref([])[m
[32m+[m[32mconst originList = [][m
[32m+[m[32mconst key = ref('')[m
[32m+[m[32mconst active = ref('')[m
[32m+[m[32mconst emit = defineEmits(['select'])[m
[32m+[m[32mconst value = defineModel()[m
[32m+[m[32mfor (const [key] of Object.entries(ElementPlusIconsVue)) {[m
[32m+[m[32m  iconList.value.push(key)[m
[32m+[m[32m  originList.push(key)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction onOpen() {[m
[32m+[m
[32m+[m[32m}[m
[32m+[m[32mfunction onClose() { }[m
[32m+[m[32mfunction onSelect(icon) {[m
[32m+[m
[32m+[m[32m  active.value = icon[m
[32m+[m[32m  emit('select', icon)[m
[32m+[m[32m  value.value = false[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mwatch(key, (val) => {[m
[32m+[m[32m  if (val) {[m
[32m+[m[32m    iconList.value = originList.filter(name => name.indexOf(val) > -1)[m
[32m+[m[32m  } else {[m
[32m+[m[32m    iconList.value = originList[m
[32m+[m[32m  }[m
[32m+[m[32m})[m
[32m+[m[32m</script>[m
[32m+[m[32m<style lang="scss" scoped>[m
[32m+[m[32m.icon-ul {[m
[32m+[m[32m  margin: 0;[m
[32m+[m[32m  padding: 0;[m
[32m+[m[32m  font-size: 0;[m
[32m+[m
[32m+[m[32m  li {[m
[32m+[m[32m    list-style-type: none;[m
[32m+[m[32m    text-align: center;[m
[32m+[m[32m    font-size: 14px;[m
[32m+[m[32m    display: inline-flex;[m
[32m+[m[32m    width: 16.66%;[m
[32m+[m[32m    box-sizing: border-box;[m
[32m+[m[32m    height: 108px;[m
[32m+[m[32m    padding: 6px 6px 6px 6px;[m
[32m+[m[32m    cursor: pointer;[m
[32m+[m[32m    overflow: hidden;[m
[32m+[m[32m    align-items: center;[m
[32m+[m[32m    justify-content: center;[m
[32m+[m
[32m+[m[32m    &:hover {[m
[32m+[m[32m      background: #f2f2f2;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    &.active-item {[m
[32m+[m[32m      background: #e1f3fb;[m
[32m+[m[32m      color: #7a6df0[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    i {[m
[32m+[m[32m      font-size: 30px;[m
[32m+[m[32m      line-height: 50px;[m
[32m+[m[32m      margin-bottom: 10px;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.icon-dialog {[m
[32m+[m[32m  :deep() {[m
[32m+[m[32m    .el-dialog {[m
[32m+[m[32m      border-radius: 8px;[m
[32m+[m[32m      margin-bottom: 0;[m
[32m+[m[32m      margin-top: 4vh !important;[m
[32m+[m[32m      display: flex;[m
[32m+[m[32m      flex-direction: column;[m
[32m+[m[32m      max-height: 92vh;[m
[32m+[m[32m      overflow: hidden;[m
[32m+[m[32m      box-sizing: border-box;[m
[32m+[m
[32m+[m[32m      .el-dialog__header {[m
[32m+[m[32m        padding-top: 14px;[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m      .el-dialog__body {[m
[32m+[m[32m        margin: 0 20px 20px 20px;[m
[32m+[m[32m        padding: 0;[m
[32m+[m[32m        overflow: auto;[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
[1mdiff --git a/src/views/tool/build/RightPanel.vue b/src/views/tool/build/RightPanel.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..87bfdeb5[m
[1m--- /dev/null[m
[1m+++ b/src/views/tool/build/RightPanel.vue[m
[36m@@ -0,0 +1,937 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="right-board">[m
[32m+[m[32m    <el-tabs v-model="currentTab" stretch class="center-tabs">[m
[32m+[m[32m      <el-tab-pane label="ç»„ä»¶å±æ€§" name="field" />[m
[32m+[m[32m      <el-tab-pane label="è¡¨å•å±æ€§" name="form" />[m
[32m+[m[32m    </el-tabs>[m
[32m+[m[32m    <div class="field-box">[m
[32m+[m[32m      <a class="document-link" target="_blank" :href="documentLink" title="æŸ¥çœ‹ç»„ä»¶æ–‡æ¡£">[m
[32m+[m[32m        <el-icon>[m
[32m+[m[32m          <Link />[m
[32m+[m[32m        </el-icon>[m
[32m+[m[32m      </a>[m
[32m+[m[32m      <el-scrollbar class="right-scrollbar">[m
[32m+[m[32m        <!-- ç»„ä»¶å±æ€§ -->[m
[32m+[m[32m        <el-form v-show="currentTab === 'field' && showField" size="default" label-width="90px" label-position="top"[m
[32m+[m[32m          style="">[m
[32m+[m[32m          <el-form-item v-if="activeData.changeTag" label="ç»„ä»¶ç±»å‹">[m
[32m+[m[32m            <el-select v-model="activeData.tagIcon" placeholder="è¯·é€‰æ‹©ç»„ä»¶ç±»å‹" :style="{ width: '100%' }" @change="tagChange">[m
[32m+[m[32m              <el-option-group v-for="group in tagList" :key="group.label" :label="group.label">[m
[32m+[m[32m                <el-option v-for="item in group.options" :key="item.label" :label="item.label" :value="item.tagIcon">[m
[32m+[m[32m                  <svg-icon class="node-icon" :icon-class="item.tagIcon" style="margin-right: 10px;" />[m
[32m+[m[32m                  <span> {{ item.label }}</span>[m
[32m+[m[32m                </el-option>[m
[32m+[m[32m              </el-option-group>[m
[32m+[m[32m            </el-select>[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.vModel !== undefined" label="å­—æ®µå">[m
[32m+[m[32m            <el-input v-model="activeData.vModel" placeholder="è¯·è¾“å…¥å­—æ®µåï¼ˆv-modelï¼‰" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.componentName !== undefined" label="ç»„ä»¶å">[m
[32m+[m[32m            {{ activeData.componentName }}[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.label !== undefined" label="æ ‡é¢˜">[m
[32m+[m[32m            <el-input v-model="activeData.label" placeholder="è¯·è¾“å…¥æ ‡é¢˜" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.placeholder !== undefined" label="å ä½æç¤º">[m
[32m+[m[32m            <el-input v-model="activeData.placeholder" placeholder="è¯·è¾“å…¥å ä½æç¤º" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData['start-placeholder'] !== undefined" label="å¼€å§‹å ä½">[m
[32m+[m[32m            <el-input v-model="activeData['start-placeholder']" placeholder="è¯·è¾“å…¥å ä½æç¤º" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData['end-placeholder'] !== undefined" label="ç»“æŸå ä½">[m
[32m+[m[32m            <el-input v-model="activeData['end-placeholder']" placeholder="è¯·è¾“å…¥å ä½æç¤º" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.span !== undefined" label="è¡¨å•æ …æ ¼">[m
[32m+[m[32m            <el-slider v-model="activeData.span" :max="24" :min="1" :marks="{ 12: '' }" @change="spanChange" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.layout === 'rowFormItem'" label="æ …æ ¼é—´éš”">[m
[32m+[m[32m            <el-input-number v-model="activeData.gutter" :min="0" placeholder="æ …æ ¼é—´éš”" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m
[32m+[m[32m          <el-form-item v-if="activeData.justify !== undefined" label="æ°´å¹³æ’åˆ—">[m
[32m+[m[32m            <el-select v-model="activeData.justify" placeholder="è¯·é€‰æ‹©æ°´å¹³æ’åˆ—" :style="{ width: '100%' }">[m
[32m+[m[32m              <el-option v-for="(item, index) in justifyOptions" :key="index" :label="item.label" :value="item.value" />[m
[32m+[m[32m            </el-select>[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.align !== undefined" label="å‚ç›´æ’åˆ—">[m
[32m+[m[32m            <el-radio-group v-model="activeData.align">[m
[32m+[m[32m              <el-radio-button label="top" />[m
[32m+[m[32m              <el-radio-button label="middle" />[m
[32m+[m[32m              <el-radio-button label="bottom" />[m
[32m+[m[32m            </el-radio-group>[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.labelWidth !== undefined" label="æ ‡ç­¾å®½åº¦">[m
[32m+[m[32m            <el-input v-model.number="activeData.labelWidth" type="number" placeholder="è¯·è¾“å…¥æ ‡ç­¾å®½åº¦" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.style && activeData.style.width !== undefined" label="ç»„ä»¶å®½åº¦">[m
[32m+[m[32m            <el-input v-model="activeData.style.width" placeholder="è¯·è¾“å…¥ç»„ä»¶å®½åº¦" clearable />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.vModel !== undefined" label="é»˜è®¤å€¼">[m
[32m+[m[32m            <el-input :value="setDefaultValue(activeData.defaultValue)" placeholder="è¯·è¾“å…¥é»˜è®¤å€¼"[m
[32m+[m[32m              @input="onDefaultValueInput" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.tag === 'el-checkbox-group'" label="è‡³å°‘åº”é€‰">[m
[32m+[m[32m            <el-input-number :value="activeData.min" :min="0" placeholder="è‡³å°‘åº”é€‰"[m
[32m+[m[32m              @input="$set(activeData, 'min', $event ? $event : undefined)" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.tag === 'el-checkbox-group'" label="æœ€å¤šå¯é€‰">[m
[32m+[m[32m            <el-input-number :value="activeData.max" :min="0" placeholder="æœ€å¤šå¯é€‰"[m
[32m+[m[32m              @input="$set(activeData, 'max', $event ? $event : undefined)" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.prepend !== undefined" label="å‰ç¼€">[m
[32m+[m[32m            <el-input v-model="activeData.prepend" placeholder="è¯·è¾“å…¥å‰ç¼€" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.append !== undefined" label="åç¼€">[m
[32m+[m[32m            <el-input v-model="activeData.append" placeholder="è¯·è¾“å…¥åç¼€" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData['prefix-icon'] !== undefined" label="å‰å›¾æ ‡">[m
[32m+[m[32m            <el-input v-model="activeData['prefix-icon']" placeholder="è¯·è¾“å…¥å‰å›¾æ ‡åç§°">[m
[32m+[m[32m              <template #append>[m
[32m+[m[32m                <el-button icon="Pointer" @click="openIconsDialog('prefix-icon')">[m
[32m+[m[32m                  é€‰æ‹©[m
[32m+[m[32m                </el-button>[m
[32m+[m[32m              </template>[m
[32m+[m[32m            </el-input>[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData['suffix-icon'] !== undefined" label="åå›¾æ ‡">[m
[32m+[m[32m            <el-input v-model="activeData['suffix-icon']" placeholder="è¯·è¾“å…¥åå›¾æ ‡åç§°">[m
[32m+[m[32m              <template #append>[m
[32m+[m[32m                <el-button icon="Pointer" @click="openIconsDialog('suffix-icon')">[m
[32m+[m[32m                  é€‰æ‹©[m
[32m+[m[32m                </el-button>[m
[32m+[m[32m              </template>[m
[32m+[m[32m            </el-input>[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.tag === 'el-cascader'" label="é€‰é¡¹åˆ†éš”ç¬¦">[m
[32m+[m[32m            <el-input v-model="activeData.separator" placeholder="è¯·è¾“å…¥é€‰é¡¹åˆ†éš”ç¬¦" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.autosize !== undefined" label="æœ€å°è¡Œæ•°">[m
[32m+[m[32m            <el-input-number v-model="activeData.autosize.minRows" :min="1" placeholder="æœ€å°è¡Œæ•°" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.autosize !== undefined" label="æœ€å¤§è¡Œæ•°">[m
[32m+[m[32m            <el-input-number v-model="activeData.autosize.maxRows" :min="1" placeholder="æœ€å¤§è¡Œæ•°" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.min !== undefined" label="æœ€å°å€¼">[m
[32m+[m[32m            <el-input-number v-model="activeData.min" placeholder="æœ€å°å€¼" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.max !== undefined" label="æœ€å¤§å€¼">[m
[32m+[m[32m            <el-input-number v-model="activeData.max" placeholder="æœ€å¤§å€¼" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.step !== undefined" label="æ­¥é•¿">[m
[32m+[m[32m            <el-input-number v-model="activeData.step" placeholder="æ­¥æ•°" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.tag === 'el-input-number'" label="ç²¾åº¦">[m
[32m+[m[32m            <el-input-number v-model="activeData.precision" :min="0" placeholder="ç²¾åº¦" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.tag === 'el-input-number'" label="æŒ‰é’®ä½ç½®">[m
[32m+[m[32m            <el-radio-group v-model="activeData['controls-position']">[m
[32m+[m[32m              <el-radio-button label="">[m
[32m+[m[32m                é»˜è®¤[m
[32m+[m[32m              </el-radio-button>[m
[32m+[m[32m              <el-radio-button label="right">[m
[32m+[m[32m                å³ä¾§[m
[32m+[m[32m              </el-radio-button>[m
[32m+[m[32m            </el-radio-group>[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.maxlength !== undefined" label="æœ€å¤šè¾“å…¥">[m
[32m+[m[32m            <el-input v-model="activeData.maxlength" placeholder="è¯·è¾“å…¥å­—ç¬¦é•¿åº¦">[m
[32m+[m[32m              <template slot="append">[m
[32m+[m[32m                ä¸ªå­—ç¬¦[m
[32m+[m[32m              </template>[m
[32m+[m[32m            </el-input>[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData['active-text'] !== undefined" label="å¼€å¯æç¤º">[m
[32m+[m[32m            <el-input v-model="activeData['active-text']" placeholder="è¯·è¾“å…¥å¼€å¯æç¤º" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData['inactive-text'] !== undefined" label="å…³é—­æç¤º">[m
[32m+[m[32m            <el-input v-model="activeData['inactive-text']" placeholder="è¯·è¾“å…¥å…³é—­æç¤º" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData['active-value'] !== undefined" label="å¼€å¯å€¼">[m
[32m+[m[32m            <el-input :value="setDefaultValue(activeData['active-value'])" placeholder="è¯·è¾“å…¥å¼€å¯å€¼"[m
[32m+[m[32m              @input="onSwitchValueInput($event, 'active-value')" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData['inactive-value'] !== undefined" label="å…³é—­å€¼">[m
[32m+[m[32m            <el-input :value="setDefaultValue(activeData['inactive-value'])" placeholder="è¯·è¾“å…¥å…³é—­å€¼"[m
[32m+[m[32m              @input="onSwitchValueInput($event, 'inactive-value')" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.type !== undefined && 'el-date-picker' === activeData.tag" label="æ—¶é—´ç±»å‹">[m
[32m+[m[32m            <el-select v-model="activeData.type" placeholder="è¯·é€‰æ‹©æ—¶é—´ç±»å‹" :style="{ width: '100%' }"[m
[32m+[m[32m              @change="dateTypeChange">[m
[32m+[m[32m              <el-option v-for="(item, index) in dateOptions" :key="index" :label="item.label" :value="item.value" />[m
[32m+[m[32m            </el-select>[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.name !== undefined" label="æ–‡ä»¶å­—æ®µå">[m
[32m+[m[32m            <el-input v-model="activeData.name" placeholder="è¯·è¾“å…¥ä¸Šä¼ æ–‡ä»¶å­—æ®µå" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.accept !== undefined" label="æ–‡ä»¶ç±»å‹">[m
[32m+[m[32m            <el-select v-model="activeData.accept" placeholder="è¯·é€‰æ‹©æ–‡ä»¶ç±»å‹" :style="{ width: '100%' }" clearable>[m
[32m+[m[32m              <el-option label="å›¾ç‰‡" value="image/*" />[m
[32m+[m[32m              <el-option label="è§†é¢‘" value="video/*" />[m
[32m+[m[32m              <el-option label="éŸ³é¢‘" value="audio/*" />[m
[32m+[m[32m              <el-option label="excel" value=".xls,.xlsx" />[m
[32m+[m[32m              <el-option label="word" value=".doc,.docx" />[m
[32m+[m[32m              <el-option label="pdf" value=".pdf" />[m
[32m+[m[32m              <el-option label="txt" value=".txt" />[m
[32m+[m[32m            </el-select>[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.fileSize !== undefined" label="æ–‡ä»¶å¤§å°">[m
[32m+[m[32m            <el-input v-model.number="activeData.fileSize" placeholder="è¯·è¾“å…¥æ–‡ä»¶å¤§å°">[m
[32m+[m[32m              <el-select slot="append" v-model="activeData.sizeUnit" :style="{ width: '66px' }">[m
[32m+[m[32m                <el-option label="KB" value="KB" />[m
[32m+[m[32m                <el-option label="MB" value="MB" />[m
[32m+[m[32m                <el-option label="GB" value="GB" />[m
[32m+[m[32m              </el-select>[m
[32m+[m[32m            </el-input>[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.action !== undefined" label="ä¸Šä¼ åœ°å€">[m
[32m+[m[32m            <el-input v-model="activeData.action" placeholder="è¯·è¾“å…¥ä¸Šä¼ åœ°å€" clearable />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData['list-type'] !== undefined" label="åˆ—è¡¨ç±»å‹">[m
[32m+[m[32m            <el-radio-group v-model="activeData['list-type']" size="small">[m
[32m+[m[32m              <el-radio-button label="text">[m
[32m+[m[32m                text[m
[32m+[m[32m              </el-radio-button>[m
[32m+[m[32m              <el-radio-button label="picture">[m
[32m+[m[32m                picture[m
[32m+[m[32m              </el-radio-button>[m
[32m+[m[32m              <el-radio-button label="picture-card">[m
[32m+[m[32m                picture-card[m
[32m+[m[32m              </el-radio-button>[m
[32m+[m[32m            </el-radio-group>[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.buttonText !== undefined" v-show="'picture-card' !== activeData['list-type']"[m
[32m+[m[32m            label="æŒ‰é’®æ–‡å­—">[m
[32m+[m[32m            <el-input v-model="activeData.buttonText" placeholder="è¯·è¾“å…¥æŒ‰é’®æ–‡å­—" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData['range-separator'] !== undefined" label="åˆ†éš”ç¬¦">[m
[32m+[m[32m            <el-input v-model="activeData['range-separator']" placeholder="è¯·è¾“å…¥åˆ†éš”ç¬¦" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData['picker-options'] !== undefined" label="æ—¶é—´æ®µ">[m
[32m+[m[32m            <el-input v-model="activeData['picker-options'].selectableRange" placeholder="è¯·è¾“å…¥æ—¶é—´æ®µ" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.format !== undefined" label="æ—¶é—´æ ¼å¼">[m
[32m+[m[32m            <el-input :value="activeData.format" placeholder="è¯·è¾“å…¥æ—¶é—´æ ¼å¼" @input="setTimeValue($event)" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <template v-if="['el-checkbox-group', 'el-radio-group', 'el-select'].indexOf(activeData.tag) > -1">[m
[32m+[m[32m            <el-divider>é€‰é¡¹</el-divider>[m
[32m+[m[32m            <draggable :list="activeData.options" :animation="340" group="selectItem" handle=".option-drag"[m
[32m+[m[32m              item-key="label">[m
[32m+[m[32m              <template #item="{ element, index }">[m
[32m+[m[32m                <div :key="index" class="select-item">[m
[32m+[m[32m                  <div class="select-line-icon option-drag">[m
[32m+[m[32m                    <i class="el-icon-s-operation" />[m
[32m+[m[32m                  </div>[m
[32m+[m[32m                  <el-input v-model="element.label" placeholder="é€‰é¡¹å" size="small" />[m
[32m+[m[32m                  <el-input placeholder="é€‰é¡¹å€¼" size="small" :value="element.value"[m
[32m+[m[32m                    @input="setOptionValue(element, $event)" />[m
[32m+[m[32m                  <div class="close-btn select-line-icon" @click="activeData.options.splice(index, 1)">[m
[32m+[m[32m                    <el-icon>[m
[32m+[m[32m                      <Remove />[m
[32m+[m[32m                    </el-icon>[m
[32m+[m[32m                  </div>[m
[32m+[m[32m                </div>[m
[32m+[m[32m              </template>[m
[32m+[m[32m            </draggable>[m
[32m+[m[32m            <div>[m
[32m+[m[32m              <el-button icon="CirclePlus" style="margin-left: 8px; margin-top: 10px;" text bg type="primary"[m
[32m+[m[32m                @click="addSelectItem">[m
[32m+[m[32m                æ·»åŠ é€‰é¡¹[m
[32m+[m[32m              </el-button>[m
[32m+[m[32m            </div>[m
[32m+[m[32m            <el-divider />[m
[32m+[m[32m          </template>[m
[32m+[m
[32m+[m[32m          <template v-if="['el-cascader'].indexOf(activeData.tag) > -1">[m
[32m+[m[32m            <el-divider>é€‰é¡¹</el-divider>[m
[32m+[m[32m            <el-form-item label="æ•°æ®ç±»å‹">[m
[32m+[m[32m              <el-radio-group v-model="activeData.dataType" size="small">[m
[32m+[m[32m                <el-radio-button label="dynamic">[m
[32m+[m[32m                  åŠ¨æ€æ•°æ®[m
[32m+[m[32m                </el-radio-button>[m
[32m+[m[32m                <el-radio-button label="static">[m
[32m+[m[32m                  é™æ€æ•°æ®[m
[32m+[m[32m                </el-radio-button>[m
[32m+[m[32m              </el-radio-group>[m
[32m+[m[32m            </el-form-item>[m
[32m+[m
[32m+[m[32m            <template v-if="activeData.dataType === 'dynamic'">[m
[32m+[m[32m              <el-form-item label="æ ‡ç­¾é”®å">[m
[32m+[m[32m                <el-input v-model="activeData.labelKey" placeholder="è¯·è¾“å…¥æ ‡ç­¾é”®å" />[m
[32m+[m[32m              </el-form-item>[m
[32m+[m[32m              <el-form-item label="å€¼é”®å">[m
[32m+[m[32m                <el-input v-model="activeData.valueKey" placeholder="è¯·è¾“å…¥å€¼é”®å" />[m
[32m+[m[32m              </el-form-item>[m
[32m+[m[32m              <el-form-item label="å­çº§é”®å">[m
[32m+[m[32m                <el-input v-model="activeData.childrenKey" placeholder="è¯·è¾“å…¥å­çº§é”®å" />[m
[32m+[m[32m              </el-form-item>[m
[32m+[m[32m            </template>[m
[32m+[m
[32m+[m[32m            <el-tree v-if="activeData.dataType === 'static'" draggable :data="activeData.options" node-key="id"[m
[32m+[m[32m              :expand-on-click-node="false" :render-content="renderContent" />[m
[32m+[m[32m            <div v-if="activeData.dataType === 'static'">[m
[32m+[m[32m              <el-button icon="CirclePlus" style="margin-left: 0; margin-top: 10px;" type="primary" text bg[m
[32m+[m[32m                @click="addTreeItem">[m
[32m+[m[32m                æ·»åŠ çˆ¶çº§[m
[32m+[m[32m              </el-button>[m
[32m+[m[32m            </div>[m
[32m+[m[32m            <el-divider />[m
[32m+[m[32m          </template>[m
[32m+[m
[32m+[m[32m          <el-form-item v-if="activeData.optionType !== undefined" label="é€‰é¡¹æ ·å¼">[m
[32m+[m[32m            <el-radio-group v-model="activeData.optionType">[m
[32m+[m[32m              <el-radio-button label="default">[m
[32m+[m[32m                é»˜è®¤[m
[32m+[m[32m              </el-radio-button>[m
[32m+[m[32m              <el-radio-button label="button">[m
[32m+[m[32m                æŒ‰é’®[m
[32m+[m[32m              </el-radio-button>[m
[32m+[m[32m            </el-radio-group>[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData['active-color'] !== undefined" label="å¼€å¯é¢œè‰²">[m
[32m+[m[32m            <el-color-picker v-model="activeData['active-color']" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData['inactive-color'] !== undefined" label="å…³é—­é¢œè‰²">[m
[32m+[m[32m            <el-color-picker v-model="activeData['inactive-color']" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m
[32m+[m[32m          <el-form-item v-if="activeData['allow-half'] !== undefined" label="å…è®¸åŠé€‰">[m
[32m+[m[32m            <el-switch v-model="activeData['allow-half']" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData['show-text'] !== undefined" label="è¾…åŠ©æ–‡å­—">[m
[32m+[m[32m            <el-switch v-model="activeData['show-text']" @change="rateTextChange" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData['show-score'] !== undefined" label="æ˜¾ç¤ºåˆ†æ•°">[m
[32m+[m[32m            <el-switch v-model="activeData['show-score']" @change="rateScoreChange" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData['show-stops'] !== undefined" label="æ˜¾ç¤ºé—´æ–­ç‚¹">[m
[32m+[m[32m            <el-switch v-model="activeData['show-stops']" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.range !== undefined" label="èŒƒå›´é€‰æ‹©">[m
[32m+[m[32m            <el-switch v-model="activeData.range" @change="rangeChange" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.border !== undefined && activeData.optionType === 'default'" label="æ˜¯å¦å¸¦è¾¹æ¡†">[m
[32m+[m[32m            <el-switch v-model="activeData.border" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.tag === 'el-color-picker'" label="é¢œè‰²æ ¼å¼">[m
[32m+[m[32m            <el-select v-model="activeData['color-format']" placeholder="è¯·é€‰æ‹©é¢œè‰²æ ¼å¼" :style="{ width: '100%' }"[m
[32m+[m[32m              @change="colorFormatChange">[m
[32m+[m[32m              <el-option v-for="(item, index) in colorFormatOptions" :key="index" :label="item.label"[m
[32m+[m[32m                :value="item.value" />[m
[32m+[m[32m            </el-select>[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.size !== undefined &&[m
[32m+[m[32m            (activeData.optionType === 'button' ||[m
[32m+[m[32m              activeData.border ||[m
[32m+[m[32m              activeData.tag === 'el-color-picker')" label="é€‰é¡¹å°ºå¯¸">[m
[32m+[m[32m            <el-radio-group v-model="activeData.size">[m
[32m+[m[32m              <el-radio-button label="large">[m
[32m+[m[32m                è¾ƒå¤§[m
[32m+[m[32m              </el-radio-button>[m
[32m+[m[32m              <el-radio-button label="default">[m
[32m+[m[32m                é»˜è®¤[m
[32m+[m[32m              </el-radio-button>[m
[32m+[m[32m              <el-radio-button label="small">[m
[32m+[m[32m                è¾ƒå°[m
[32m+[m[32m              </el-radio-button>[m
[32m+[m[32m            </el-radio-group>[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData['show-word-limit'] !== undefined" label="è¾“å…¥ç»Ÿè®¡">[m
[32m+[m[32m            <el-switch v-model="activeData['show-word-limit']" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.tag === 'el-input-number'" label="ä¸¥æ ¼æ­¥æ•°">[m
[32m+[m[32m            <el-switch v-model="activeData['step-strictly']" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.tag === 'el-cascader'" label="æ˜¯å¦å¤šé€‰">[m
[32m+[m[32m            <el-switch v-model="activeData.props.props.multiple" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.tag === 'el-cascader'" label="å±•ç¤ºå…¨è·¯å¾„">[m
[32m+[m[32m            <el-switch v-model="activeData['show-all-levels']" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.tag === 'el-cascader'" label="å¯å¦ç­›é€‰">[m
[32m+[m[32m            <el-switch v-model="activeData.filterable" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.clearable !== undefined" label="èƒ½å¦æ¸…ç©º">[m
[32m+[m[32m            <el-switch v-model="activeData.clearable" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.showTip !== undefined" label="æ˜¾ç¤ºæç¤º">[m
[32m+[m[32m            <el-switch v-model="activeData.showTip" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.multiple !== undefined" label="å¤šé€‰æ–‡ä»¶">[m
[32m+[m[32m            <el-switch v-model="activeData.multiple" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData['auto-upload'] !== undefined" label="è‡ªåŠ¨ä¸Šä¼ ">[m
[32m+[m[32m            <el-switch v-model="activeData['auto-upload']" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.readonly !== undefined" label="æ˜¯å¦åªè¯»">[m
[32m+[m[32m            <el-switch v-model="activeData.readonly" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.disabled !== undefined" label="æ˜¯å¦ç¦ç”¨">[m
[32m+[m[32m            <el-switch v-model="activeData.disabled" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.tag === 'el-select'" label="æ˜¯å¦å¯æœç´¢">[m
[32m+[m[32m            <el-switch v-model="activeData.filterable" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.tag === 'el-select'" label="æ˜¯å¦å¤šé€‰">[m
[32m+[m[32m            <el-switch v-model="activeData.multiple" @change="multipleChange" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item v-if="activeData.required !== undefined" label="æ˜¯å¦å¿…å¡«">[m
[32m+[m[32m            <el-switch v-model="activeData.required" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m
[32m+[m[32m          <template v-if="activeData.layoutTree">[m
[32m+[m[32m            <el-divider>å¸ƒå±€ç»“æ„æ ‘</el-divider>[m
[32m+[m[32m            <el-tree :data="[activeData]" :props="layoutTreeProps" node-key="renderKey" default-expand-all draggable>[m
[32m+[m[32m              <template #default="{ node, data }">[m
[32m+[m[32m                <span class="node-label">[m
[32m+[m[32m                  <svg-icon class="node-icon" :icon-class="data.tagIcon" style="margin-right: 5px;" />[m
[32m+[m[32m                  {{ node.label }}[m
[32m+[m[32m                </span>[m
[32m+[m[32m              </template>[m
[32m+[m[32m            </el-tree>[m
[32m+[m[32m          </template>[m
[32m+[m
[32m+[m[32m          <template v-if="activeData.layout === 'colFormItem'">[m
[32m+[m[32m            <el-divider>æ­£åˆ™æ ¡éªŒ</el-divider>[m
[32m+[m[32m            <div v-for="(item, index) in activeData.regList" :key="index" class="reg-item">[m
[32m+[m[32m              <span class="close-btn" @click="activeData.regList.splice(index, 1)">[m
[32m+[m[32m                <el-icon>[m
[32m+[m[32m                  <Close />[m
[32m+[m[32m                </el-icon>[m
[32m+[m[32m              </span>[m
[32m+[m[32m              <el-form-item label="è¡¨è¾¾å¼">[m
[32m+[m[32m                <el-input v-model="item.pattern" placeholder="è¯·è¾“å…¥æ­£åˆ™" />[m
[32m+[m[32m              </el-form-item>[m
[32m+[m[32m              <el-form-item label="é”™è¯¯æç¤º" style="margin-bottom:0">[m
[32m+[m[32m                <el-input v-model="item.message" placeholder="è¯·è¾“å…¥é”™è¯¯æç¤º" />[m
[32m+[m[32m              </el-form-item>[m
[32m+[m[32m            </div>[m
[32m+[m[32m            <div>[m
[32m+[m[32m              <el-button icon="CirclePlus" style="margin-left: 0; margin-top: 10px;" type="primary" text bg[m
[32m+[m[32m                @click="addReg">[m
[32m+[m[32m                æ·»åŠ è§„åˆ™[m
[32m+[m[32m              </el-button>[m
[32m+[m[32m            </div>[m
[32m+[m[32m          </template>[m
[32m+[m[32m        </el-form>[m
[32m+[m[32m        <!-- è¡¨å•å±æ€§ -->[m
[32m+[m[32m        <el-form v-show="currentTab === 'form'" label-width="90px" label-position="top">[m
[32m+[m[32m          <el-form-item label="è¡¨å•å">[m
[32m+[m[32m            <el-input v-model="formConf.formRef" placeholder="è¯·è¾“å…¥è¡¨å•åï¼ˆrefï¼‰" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item label="è¡¨å•æ¨¡å‹">[m
[32m+[m[32m            <el-input v-model="formConf.formModel" placeholder="è¯·è¾“å…¥æ•°æ®æ¨¡å‹" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item label="æ ¡éªŒæ¨¡å‹">[m
[32m+[m[32m            <el-input v-model="formConf.formRules" placeholder="è¯·è¾“å…¥æ ¡éªŒæ¨¡å‹" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item label="è¡¨å•å°ºå¯¸">[m
[32m+[m[32m            <el-radio-group v-model="formConf.size">[m
[32m+[m[32m              <el-radio-button label="large">[m
[32m+[m[32m                è¾ƒå¤§[m
[32m+[m[32m              </el-radio-button>[m
[32m+[m[32m              <el-radio-button label="default">[m
[32m+[m[32m                é»˜è®¤[m
[32m+[m[32m              </el-radio-button>[m
[32m+[m[32m              <el-radio-button label="small">[m
[32m+[m[32m                è¾ƒå°[m
[32m+[m[32m              </el-radio-button>[m
[32m+[m[32m            </el-radio-group>[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item label="æ ‡ç­¾å¯¹é½">[m
[32m+[m[32m            <el-radio-group v-model="formConf.labelPosition">[m
[32m+[m[32m              <el-radio-button label="left">[m
[32m+[m[32m                å·¦å¯¹é½[m
[32m+[m[32m              </el-radio-button>[m
[32m+[m[32m              <el-radio-button label="right">[m
[32m+[m[32m                å³å¯¹é½[m
[32m+[m[32m              </el-radio-button>[m
[32m+[m[32m              <el-radio-button label="top">[m
[32m+[m[32m                é¡¶éƒ¨å¯¹é½[m
[32m+[m[32m              </el-radio-button>[m
[32m+[m[32m            </el-radio-group>[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item label="æ ‡ç­¾å®½åº¦">[m
[32m+[m[32m            <el-input-number v-model="formConf.labelWidth" placeholder="æ ‡ç­¾å®½åº¦" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item label="æ …æ ¼é—´éš”">[m
[32m+[m[32m            <el-input-number v-model="formConf.gutter" :min="0" placeholder="æ …æ ¼é—´éš”" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item label="ç¦ç”¨è¡¨å•">[m
[32m+[m[32m            <el-switch v-model="formConf.disabled" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item label="è¡¨å•æŒ‰é’®">[m
[32m+[m[32m            <el-switch v-model="formConf.formBtns" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m          <el-form-item label="æ˜¾ç¤ºæœªé€‰ä¸­ç»„ä»¶è¾¹æ¡†">[m
[32m+[m[32m            <el-switch v-model="formConf.unFocusedComponentBorder" />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m        </el-form>[m
[32m+[m[32m      </el-scrollbar>[m
[32m+[m[32m    </div>[m
[32m+[m[32m    <icons-dialog v-model="iconsVisible" :current="activeData[currentIconModel]" @select="setIcon" />[m
[32m+[m[32m    <treeNode-dialog v-model="dialogVisible" @commit="addNode" />[m
[32m+[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport draggable from "vuedraggable/dist/vuedraggable.common";[m
[32m+[m[32mimport { isNumberStr } from '@/utils/index'[m
[32m+[m[32mimport IconsDialog from './IconsDialog'[m
[32m+[m[32mimport TreeNodeDialog from './TreeNodeDialog'[m
[32m+[m[32mimport {[m
[32m+[m[32m  inputComponents,[m
[32m+[m[32m  selectComponents[m
[32m+[m[32m} from '@/utils/generator/config'[m
[32m+[m
[32m+[m[32mconst { proxy } = getCurrentInstance()[m
[32m+[m[32mconst dateTimeFormat = {[m
[32m+[m[32m  date: 'YYYY-MM-DD',[m
[32m+[m[32m  week: 'YYYY ç¬¬ ww å‘¨',[m
[32m+[m[32m  month: 'YYYY-MM',[m
[32m+[m[32m  year: 'YYYY',[m
[32m+[m[32m  datetime: 'YYYY-MM-DD HH:mm:ss',[m
[32m+[m[32m  daterange: 'YYYY-MM-DD',[m
[32m+[m[32m  monthrange: 'YYYY-MM',[m
[32m+[m[32m  datetimerange: 'YYYY-MM-DD HH:mm:ss'[m
[32m+[m[32m}[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m  showField: Boolean,[m
[32m+[m[32m  activeData: Object,[m
[32m+[m[32m  formConf: Object[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32mconst data = reactive({[m
[32m+[m[32m  currentTab: 'field',[m
[32m+[m[32m  currentNode: null,[m
[32m+[m[32m  dialogVisible: false,[m
[32m+[m[32m  iconsVisible: false,[m
[32m+[m[32m  currentIconModel: null,[m
[32m+[m[32m  dateTypeOptions: [[m
[32m+[m[32m    {[m
[32m+[m[32m      label: 'æ—¥(date)',[m
[32m+[m[32m      value: 'date'[m
[32m+[m[32m    },[m
[32m+[m[32m    {[m
[32m+[m[32m      label: 'å‘¨(week)',[m
[32m+[m[32m      value: 'week'[m
[32m+[m[32m    },[m
[32m+[m[32m    {[m
[32m+[m[32m      label: 'æœˆ(month)',[m
[32m+[m[32m      value: 'month'[m
[32m+[m[32m    },[m
[32m+[m[32m    {[m
[32m+[m[32m      label: 'å¹´(year)',[m
[32m+[m[32m      value: 'year'[m
[32m+[m[32m    },[m
[32m+[m[32m    {[m
[32m+[m[32m      label: 'æ—¥æœŸæ—¶é—´(datetime)',[m
[32m+[m[32m      value: 'datetime'[m
[32m+[m[32m    }[m
[32m+[m[32m  ],[m
[32m+[m[32m  dateRangeTypeOptions: [[m
[32m+[m[32m    {[m
[32m+[m[32m      label: 'æ—¥æœŸèŒƒå›´(daterange)',[m
[32m+[m[32m      value: 'daterange'[m
[32m+[m[32m    },[m
[32m+[m[32m    {[m
[32m+[m[32m      label: 'æœˆèŒƒå›´(monthrange)',[m
[32m+[m[32m      value: 'monthrange'[m
[32m+[m[32m    },[m
[32m+[m[32m    {[m
[32m+[m[32m      label: 'æ—¥æœŸæ—¶é—´èŒƒå›´(datetimerange)',[m
[32m+[m[32m      value: 'datetimerange'[m
[32m+[m[32m    }[m
[32m+[m[32m  ],[m
[32m+[m[32m  colorFormatOptions: [[m
[32m+[m[32m    {[m
[32m+[m[32m      label: 'hex',[m
[32m+[m[32m      value: 'hex'[m
[32m+[m[32m    },[m
[32m+[m[32m    {[m
[32m+[m[32m      label: 'rgb',[m
[32m+[m[32m      value: 'rgb'[m
[32m+[m[32m    },[m
[32m+[m[32m    {[m
[32m+[m[32m      label: 'rgba',[m
[32m+[m[32m      value: 'rgba'[m
[32m+[m[32m    },[m
[32m+[m[32m    {[m
[32m+[m[32m      label: 'hsv',[m
[32m+[m[32m      value: 'hsv'[m
[32m+[m[32m    },[m
[32m+[m[32m    {[m
[32m+[m[32m      label: 'hsl',[m
[32m+[m[32m      value: 'hsl'[m
[32m+[m[32m    }[m
[32m+[m[32m  ],[m
[32m+[m[32m  justifyOptions: [[m
[32m+[m[32m    {[m
[32m+[m[32m      label: 'start',[m
[32m+[m[32m      value: 'start'[m
[32m+[m[32m    },[m
[32m+[m[32m    {[m
[32m+[m[32m      label: 'end',[m
[32m+[m[32m      value: 'end'[m
[32m+[m[32m    },[m
[32m+[m[32m    {[m
[32m+[m[32m      label: 'center',[m
[32m+[m[32m      value: 'center'[m
[32m+[m[32m    },[m
[32m+[m[32m    {[m
[32m+[m[32m      label: 'space-around',[m
[32m+[m[32m      value: 'space-around'[m
[32m+[m[32m    },[m
[32m+[m[32m    {[m
[32m+[m[32m      label: 'space-between',[m
[32m+[m[32m      value: 'space-between'[m
[32m+[m[32m    }[m
[32m+[m[32m  ],[m
[32m+[m[32m  layoutTreeProps: {[m
[32m+[m[32m    label(data, node) {[m
[32m+[m[32m      return data.componentName || `${data.label}: ${data.vModel}`[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32mconst { currentTab, currentNode, dialogVisible, iconsVisible, currentIconModel, dateTypeOptions, dateRangeTypeOptions, colorFormatOptions, justifyOptions, layoutTreeProps } = toRefs(data)[m
[32m+[m
[32m+[m[32mconst documentLink = computed(() => props.activeData.document[m
[32m+[m[32m  || 'https://element-plus.org/zh-CN/guide/installation')[m
[32m+[m
[32m+[m[32mconst dateOptions = computed(() => {[m
[32m+[m[32m  if ([m
[32m+[m[32m    props.activeData.type !== undefined[m
[32m+[m[32m    && props.activeData.tag === 'el-date-picker'[m
[32m+[m[32m  ) {[m
[32m+[m[32m    if (props.activeData['start-placeholder'] === undefined) {[m
[32m+[m[32m      return dateTypeOptions.value[m
[32m+[m[32m    }[m
[32m+[m[32m    return dateRangeTypeOptions.value[m
[32m+[m[32m  }[m
[32m+[m[32m  return [][m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32mconst tagList = ref([[m
[32m+[m[32m  {[m
[32m+[m[32m    label: 'è¾“å…¥å‹ç»„ä»¶',[m
[32m+[m[32m    options: inputComponents[m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    label: 'é€‰æ‹©å‹ç»„ä»¶',[m
[32m+[m[32m    options: selectComponents[m
[32m+[m[32m  }[m
[32m+[m[32m])[m
[32m+[m
[32m+[m[32mconst emit = defineEmits(['tag-change'])[m
[32m+[m
[32m+[m[32mfunction addReg() {[m
[32m+[m[32m  props.activeData.regList.push({[m
[32m+[m[32m    pattern: '',[m
[32m+[m[32m    message: ''[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m[32mfunction addSelectItem() {[m
[32m+[m[32m  props.activeData.options.push({[m
[32m+[m[32m    label: '',[m
[32m+[m[32m    value: ''[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction addTreeItem() {[m
[32m+[m[32m  ++proxy.idGlobal[m
[32m+[m[32m  dialogVisible.value = true[m
[32m+[m[32m  currentNode.value = props.activeData.options[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction renderContent(h, { node, data, store }) {[m
[32m+[m[32m  return h('div', {[m
[32m+[m[32m    class: "custom-tree-node"[m
[32m+[m[32m  }, [[m
[32m+[m[32m    h('span', node.label),[m
[32m+[m[32m    h('span', {[m
[32m+[m[32m      class: "node-operation"[m
[32m+[m[32m    }, [[m
[32m+[m[32m      h(resolveComponent('el-link'), {[m
[32m+[m[32m        type: "primary",[m
[32m+[m[32m        icon: "Plus",[m
[32m+[m[32m        underline: false,[m
[32m+[m[32m        onClick: () => {[m
[32m+[m[32m          append(data)[m
[32m+[m
[32m+[m[32m        }[m
[32m+[m[32m      }),[m
[32m+[m[32m      h(resolveComponent('el-link'), {[m
[32m+[m[32m        type: "danger",[m
[32m+[m[32m        icon: "Delete",[m
[32m+[m[32m        underline: false,[m
[32m+[m[32m        style: "margin-left: 5px;",[m
[32m+[m[32m        onClick: () => {[m
[32m+[m[32m          remove(node, data)[m
[32m+[m[32m        }[m
[32m+[m[32m      })[m
[32m+[m[32m    ])[m
[32m+[m[32m  ])[m
[32m+[m[32m  // return ([m
[32m+[m[32m  //   <div class="custom-tree-node">[m
[32m+[m[32m  //     <span>{node.label}</span>[m
[32m+[m[32m  //     <span class="node-operation">[m
[32m+[m[32m  //       <el-link type="primary" on-click={() => append(data)} icon="Plus" underline={false}></el-link>[m
[32m+[m[32m  //       <el-link style="margin-left: 5px;" type="danger" on-click={() => remove(node, data)} icon="Delete" underline={false}></el-link>[m
[32m+[m[32m  //     </span>[m
[32m+[m[32m  //   </div>[m
[32m+[m[32m  // )[m
[32m+[m[32m}[m
[32m+[m[32mfunction append(data) {[m
[32m+[m[32m  if (!data.children) {[m
[32m+[m[32m    // this.$set(data, 'children', [])[m
[32m+[m[32m    data.children = [][m
[32m+[m[32m  }[m
[32m+[m[32m  dialogVisible.value = true[m
[32m+[m[32m  currentNode.value = data.children[m
[32m+[m[32m}[m
[32m+[m[32mfunction remove(node, data) {[m
[32m+[m[32m  const { parent } = node[m
[32m+[m[32m  const children = parent.data.children || parent.data[m
[32m+[m[32m  const index = children.findIndex(d => d.id === data.id)[m
[32m+[m[32m  children.splice(index, 1)[m
[32m+[m[32m}[m
[32m+[m[32mfunction addNode(data) {[m
[32m+[m[32m  currentNode.value.push(data)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction setOptionValue(item, val) {[m
[32m+[m[32m  item.value = isNumberStr(val) ? +val : val[m
[32m+[m[32m}[m
[32m+[m[32mfunction setDefaultValue(val) {[m
[32m+[m[32m  if (Array.isArray(val)) {[m
[32m+[m[32m    return val.join(',')[m
[32m+[m[32m  }[m
[32m+[m[32m  if (['string', 'number'].indexOf(val) > -1) {[m
[32m+[m[32m    return val[m
[32m+[m[32m  }[m
[32m+[m[32m  if (typeof val === 'boolean') {[m
[32m+[m[32m    return `${val}`[m
[32m+[m[32m  }[m
[32m+[m[32m  return val[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction onDefaultValueInput(str) {[m
[32m+[m[32m  if (Array.isArray(props.activeData.defaultValue)) {[m
[32m+[m[32m    // æ•°ç»„[m
[32m+[m[32m    props.activeData.defaultValue = str.split(',').map(val => (isNumberStr(val) ? +val : val))[m
[32m+[m[32m  } else if (['true', 'false'].indexOf(str) > -1) {[m
[32m+[m[32m    // å¸ƒå°”[m
[32m+[m[32m    props.activeData.defaultValue = JSON.parse(str)[m
[32m+[m[32m  } else {[m
[32m+[m[32m    // å­—ç¬¦ä¸²å’Œæ•°å­—[m
[32m+[m[32m    props.activeData.defaultValue = isNumberStr(str) ? +str : str[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction onSwitchValueInput(val, name) {[m
[32m+[m[32m  if (['true', 'false'].indexOf(val) > -1) {[m
[32m+[m[32m    props.activeData[name] = JSON.parse(val)[m
[32m+[m[32m  } else {[m
[32m+[m[32m    props.activeData[name] = isNumberStr(val) ? +val : val[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction setTimeValue(val, type) {[m
[32m+[m[32m  const valueFormat = type === 'week' ? dateTimeFormat.date : val[m
[32m+[m[32m  props.activeData.defaultValue = null[m
[32m+[m[32m  props.activeData['value-format'] = valueFormat[m
[32m+[m[32m  props.activeData.format = val[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction spanChange(val) {[m
[32m+[m[32m  props.formConf.span = val[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction multipleChange(val) {[m
[32m+[m[32m  props.activeData.defaultValue = val ? [] : ''[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction dateTypeChange(val) {[m
[32m+[m[32m  setTimeValue(dateTimeFormat[val], val)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction rangeChange(val) {[m
[32m+[m[32m  props.activeData.defaultValue = val ? [props.activeData.min, props.activeData.max] : props.activeData.min[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction rateTextChange(val) {[m
[32m+[m[32m  if (val) props.activeData['show-score'] = false[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction rateScoreChange(val) {[m
[32m+[m[32m  if (val) props.activeData['show-text'] = false[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction colorFormatChange(val) {[m
[32m+[m[32m  props.activeData.defaultValue = null[m
[32m+[m[32m  props.activeData['show-alpha'] = val.indexOf('a') > -1[m
[32m+[m[32m  props.activeData.renderKey = +new Date() // æ›´æ–°renderKey,é‡æ–°æ¸²æŸ“è¯¥ç»„ä»¶[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction openIconsDialog(model) {[m
[32m+[m[32m  iconsVisible.value = true[m
[32m+[m[32m  currentIconModel.value = model[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction setIcon(val) {[m
[32m+[m[32m  props.activeData[currentIconModel.value] = val[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction tagChange(tagIcon) {[m
[32m+[m[32m  let target = inputComponents.find(item => item.tagIcon === tagIcon)[m
[32m+[m[32m  if (!target) target = selectComponents.find(item => item.tagIcon === tagIcon)[m
[32m+[m[32m  emit('tag-change', target)[m
[32m+[m[32m}[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang="scss" scoped>[m
[32m+[m[32m.right-board {[m
[32m+[m[32m  width: 350px;[m
[32m+[m[32m  position: absolute;[m
[32m+[m[32m  right: 0;[m
[32m+[m[32m  top: 0;[m
[32m+[m[32m  padding-top: 3px;[m
[32m+[m
[32m+[m[32m  &:deep() {[m
[32m+[m[32m    .el-tabs__header {[m
[32m+[m[32m      margin: 0;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    .el-input-group__append .el-button {[m
[32m+[m[32m      display: inline-flex;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  .field-box {[m
[32m+[m[32m    position: relative;[m
[32m+[m[32m    height: calc(100vh - 50px - 40px - 42px);[m
[32m+[m[32m    box-sizing: border-box;[m
[32m+[m[32m    overflow: hidden;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  .el-scrollbar {[m
[32m+[m[32m    height: 100%;[m
[32m+[m
[32m+[m[32m    &:deep() {[m
[32m+[m[32m      .el-scrollbar__view {[m
[32m+[m[32m        padding: 30px 20px;[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.reg-item {[m
[32m+[m[32m  padding: 12px 6px;[m
[32m+[m[32m  background: var(--el-border-color-extra-light);[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m  border-radius: 4px;[m
[32m+[m
[32m+[m[32m  .close-btn {[m
[32m+[m[32m    position: absolute;[m
[32m+[m[32m    right: -6px;[m
[32m+[m[32m    top: -6px;[m
[32m+[m[32m    display: flex;[m
[32m+[m[32m    align-items: center;[m
[32m+[m[32m    justify-content: center;[m
[32m+[m[32m    width: 16px;[m
[32m+[m[32m    height: 16px;[m
[32m+[m[32m    line-height: 16px;[m
[32m+[m[32m    background: rgba(0, 0, 0, .2);[m
[32m+[m[32m    border-radius: 50%;[m
[32m+[m[32m    color: #fff;[m
[32m+[m[32m    z-index: 1;[m
[32m+[m[32m    cursor: pointer;[m
[32m+[m[32m    font-size: 12px;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m
[32m+[m[32m.select-item {[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  border: 1px dashed #fff;[m
[32m+[m[32m  box-sizing: border-box;[m
[32m+[m
[32m+[m[32m  & .close-btn {[m
[32m+[m[32m    cursor: pointer;[m
[32m+[m[32m    color: #f56c6c;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  & .el-input+.el-input {[m
[32m+[m[32m    margin-left: 4px;[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.select-item+.select-item {[m
[32m+[m[32m  margin-top: 4px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.select-item.sortable-chosen {[m
[32m+[m[32m  border: 1px dashed #409eff;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.select-line-icon {[m
[32m+[m[32m  line-height: 32px;[m
[32m+[m[32m  font-size: 22px;[m
[32m+[m[32m  padding: 0 4px;[m
[32m+[m[32m  color: #777;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.option-drag {[m
[32m+[m[32m  cursor: move;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.time-range {[m
[32m+[m[32m  .el-date-editor {[m
[32m+[m[32m    width: 227px;[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  :deep() {[m
[32m+[m[32m    .el-icon-time {[m
[32m+[m[32m      display: none;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.document-link {[m
[32m+[m[32m  position: absolute;[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  width: 26px;[m
[32m+[m[32m  height: 26px;[m
[32m+[m[32m  top: 0;[m
[32m+[m[32m  left: 0;[m
[32m+[m[32m  cursor: pointer;[m
[32m+[m[32m  background: #409eff;[m
[32m+[m[32m  z-index: 1;[m
[32m+[m[32m  border-radius: 0 0 6px 0;[m
[32m+[m[32m  justify-content: center;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  color: #fff;[m
[32m+[m[32m  font-size: 18px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.node-label {[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m.node-icon {[m
[32m+[m[32m  color: #bebfc3;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
[32m+[m[32m<style>[m
[32m+[m[32m.custom-tree-node {[m
[32m+[m[32m  flex: 1;[m
[32m+[m[32m  display: flex;[m
[32m+[m[32m  align-items: center;[m
[32m+[m[32m  justify-content: space-between;[m
[32m+[m[32m  font-size: 14px;[m
[32m+[m[32m  padding-right: 8px;[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
\ No newline at end of file[m
[1mdiff --git a/src/views/tool/build/TreeNodeDialog.vue b/src/views/tool/build/TreeNodeDialog.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..3e317770[m
[1m--- /dev/null[m
[1m+++ b/src/views/tool/build/TreeNodeDialog.vue[m
[36m@@ -0,0 +1,95 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div>[m
[32m+[m[32m    <el-dialog title="æ·»åŠ é€‰é¡¹" v-model="open" width="800px" :close-on-click-modal="false" :modal-append-to-body="false"[m
[32m+[m[32m      @open="onOpen" @close="onClose">[m
[32m+[m[32m      <el-form ref="treeNodeForm" :model="formData" :rules="rules" label-width="100px">[m
[32m+[m[32m        <el-col :span="24">[m
[32m+[m[32m          <el-form-item label="é€‰é¡¹å" prop="label">[m
[32m+[m[32m            <el-input v-model="formData.label" placeholder="è¯·è¾“å…¥é€‰é¡¹å" clearable />[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m        </el-col>[m
[32m+[m[32m        <el-col :span="24">[m
[32m+[m[32m          <el-form-item label="é€‰é¡¹å€¼" prop="value">[m
[32m+[m[32m            <el-input v-model="formData.value" placeholder="è¯·è¾“å…¥é€‰é¡¹å€¼" clearable>[m
[32m+[m[32m              <template #append>[m
[32m+[m[32m                <el-select v-model="dataType" :style="{ width: '100px' }">[m
[32m+[m[32m                  <el-option v-for="(item, index) in dataTypeOptions" :key="index" :label="item.label" :value="item.value"[m
[32m+[m[32m                    :disabled="item.disabled" />[m
[32m+[m[32m                </el-select>[m
[32m+[m[32m              </template>[m
[32m+[m
[32m+[m[32m            </el-input>[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m        </el-col>[m
[32m+[m[32m      </el-form>[m
[32m+[m[32m      <div slot="footer">[m
[32m+[m[32m        <el-button type="primary" @click="handelConfirm">[m
[32m+[m[32m          ç¡®å®š[m
[32m+[m[32m        </el-button>[m
[32m+[m[32m        <el-button @click="onClose">[m
[32m+[m[32m          å–æ¶ˆ[m
[32m+[m[32m        </el-button>[m
[32m+[m[32m      </div>[m
[32m+[m[32m    </el-dialog>[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m[32m<script setup>[m
[32m+[m[32mconst open = defineModel()[m
[32m+[m[32mconst emit = defineEmits(['confirm'])[m
[32m+[m[32mconst formData = ref({[m
[32m+[m[32m  label: undefined,[m
[32m+[m[32m  value: undefined[m
[32m+[m[32m})[m
[32m+[m[32mconst rules = {[m
[32m+[m[32m  label: [[m
[32m+[m[32m    {[m
[32m+[m[32m      required: true,[m
[32m+[m[32m      message: 'è¯·è¾“å…¥é€‰é¡¹å',[m
[32m+[m[32m      trigger: 'blur'[m
[32m+[m[32m    }[m
[32m+[m[32m  ],[m
[32m+[m[32m  value: [[m
[32m+[m[32m    {[m
[32m+[m[32m      required: true,[m
[32m+[m[32m      message: 'è¯·è¾“å…¥é€‰é¡¹å€¼',[m
[32m+[m[32m      trigger: 'blur'[m
[32m+[m[32m    }[m
[32m+[m[32m  ][m
[32m+[m[32m}[m
[32m+[m[32mconst dataType = ref('string')[m
[32m+[m[32mconst dataTypeOptions = ref([[m
[32m+[m[32m  {[m
[32m+[m[32m    label: 'å­—ç¬¦ä¸²',[m
[32m+[m[32m    value: 'string'[m
[32m+[m[32m  },[m
[32m+[m[32m  {[m
[32m+[m[32m    label: 'æ•°å­—',[m
[32m+[m[32m    value: 'number'[m
[32m+[m[32m  }[m
[32m+[m[32m])[m
[32m+[m[32mconst id = ref(100)[m
[32m+[m[32mconst treeNodeForm = ref()[m
[32m+[m
[32m+[m[32mfunction onOpen() {[m
[32m+[m[32m  formData.value = {[m
[32m+[m[32m    label: undefined,[m
[32m+[m[32m    value: undefined[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction onClose() {[m
[32m+[m[32m  open.value = false[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction handelConfirm() {[m
[32m+[m[32m  treeNodeForm.value.validate(valid => {[m
[32m+[m[32m    if (!valid) return[m
[32m+[m[32m    if (dataType.value === 'number') {[m
[32m+[m[32m      formData.value.value = parseFloat(formData.value.value)[m
[32m+[m[32m    }[m
[32m+[m[32m    formData.value.id = id.value++[m
[32m+[m[32m    emit('commit', formData.value)[m
[32m+[m[32m    onClose()[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/tool/build/index.vue b/src/views/tool/build/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..bc9df88f[m
[1m--- /dev/null[m
[1m+++ b/src/views/tool/build/index.vue[m
[36m@@ -0,0 +1,687 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="container">[m
[32m+[m[32m    <div class="left-board">[m
[32m+[m[32m      <div class="logo-wrapper">[m
[32m+[m[32m        <div class="logo">[m
[32m+[m[32m          <img :src="logo" alt="logo"> Form Generator[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </div>[m
[32m+[m[32m      <el-scrollbar class="left-scrollbar">[m
[32m+[m[32m        <div class="components-list">[m
[32m+[m[32m          <div class="components-title">[m
[32m+[m[32m            <svg-icon icon-class="component" />è¾“å…¥å‹ç»„ä»¶[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <draggable class="components-draggable" :list="inputComponents"[m
[32m+[m[32m            :group="{ name: 'componentsGroup', pull: 'clone', put: false }" :clone="cloneComponent"[m
[32m+[m[32m            draggable=".components-item" :sort="false" @end="onEnd" item-key="label">[m
[32m+[m[32m            <template #item="{ element, index }">[m
[32m+[m[32m              <div :key="index" class="components-item" @click="addComponent(element)">[m
[32m+[m[32m                <div class="components-body">[m
[32m+[m[32m                  <svg-icon :icon-class="element.tagIcon" />[m
[32m+[m[32m                  {{ element.label }}[m
[32m+[m[32m                </div>[m
[32m+[m[32m              </div>[m
[32m+[m[32m            </template>[m
[32m+[m[32m          </draggable>[m
[32m+[m[32m          <div class="components-title">[m
[32m+[m[32m            <svg-icon icon-class="component" />é€‰æ‹©å‹ç»„ä»¶[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <draggable class="components-draggable" :list="selectComponents"[m
[32m+[m[32m            :group="{ name: 'componentsGroup', pull: 'clone', put: false }" :clone="cloneComponent"[m
[32m+[m[32m            draggable=".components-item" :sort="false" @end="onEnd" item-key="label">[m
[32m+[m[32m            <template #item="{ element, index }">[m
[32m+[m[32m              <div :key="index" class="components-item" @click="addComponent(element)">[m
[32m+[m[32m                <div class="components-body">[m
[32m+[m[32m                  <svg-icon :icon-class="element.tagIcon" />[m
[32m+[m[32m                  {{ element.label }}[m
[32m+[m[32m                </div>[m
[32m+[m[32m              </div>[m
[32m+[m[32m            </template>[m
[32m+[m[32m          </draggable>[m
[32m+[m[32m          <div class="components-title">[m
[32m+[m[32m            <svg-icon icon-class="component" /> å¸ƒå±€å‹ç»„ä»¶[m
[32m+[m[32m          </div>[m
[32m+[m[32m          <draggable class="components-draggable" :list="layoutComponents"[m
[32m+[m[32m            :group="{ name: 'componentsGroup', pull: 'clone', put: false }" :clone="cloneComponent"[m
[32m+[m[32m            draggable=".components-item" :sort="false" @end="onEnd" item-key="label">[m
[32m+[m[32m            <template #item="{ element, index }">[m
[32m+[m[32m              <div :key="index" class="components-item" @click="addComponent(element)">[m
[32m+[m[32m                <div class="components-body">[m
[32m+[m[32m                  <svg-icon :icon-class="element.tagIcon" />[m
[32m+[m[32m                  {{ element.label }}[m
[32m+[m[32m                </div>[m
[32m+[m[32m              </div>[m
[32m+[m[32m            </template>[m
[32m+[m[32m          </draggable>[m
[32m+[m[32m        </div>[m
[32m+[m[32m      </el-scrollbar>[m
[32m+[m[32m    </div>[m
[32m+[m[32m    <div class="center-board">[m
[32m+[m[32m      <div class="action-bar">[m
[32m+[m[32m        <el-button icon="Download" type="primary" text @click="download">[m
[32m+[m[32m          å¯¼å‡ºvueæ–‡ä»¶[m
[32m+[m[32m        </el-button>[m
[32m+[m[32m        <el-button class="copy-btn-main" icon="DocumentCopy" type="primary" text @click="copy">[m
[32m+[m[32m          å¤åˆ¶ä»£ç [m
[32m+[m[32m        </el-button>[m
[32m+[m[32m        <el-button class="delete-btn" icon="Delete" text @click="empty" type="danger">[m
[32m+[m[32m          æ¸…ç©º[m
[32m+[m[32m        </el-button>[m
[32m+[m[32m      </div>[m
[32m+[m[32m      <el-scrollbar class="center-scrollbar">[m
[32m+[m[32m        <el-row class="center-board-row" :gutter="formConf.gutter">[m
[32m+[m[32m          <el-form :size="formConf.size" :label-position="formConf.labelPosition" :disabled="formConf.disabled"[m
[32m+[m[32m            :label-width="formConf.labelWidth + 'px'">[m
[32m+[m[32m            <draggable class="drawing-board" :list="drawingList" :animation="340" group="componentsGroup"[m
[32m+[m[32m              item-key="label">[m
[32m+[m[32m              <template #item="{ element, index }">[m
[32m+[m[32m                <draggable-item :key="element.renderKey" :drawing-list="drawingList" :element="element" :index="index"[m
[32m+[m[32m                  :active-id="activeId" :form-conf="formConf" @activeItem="activeFormItem" @copyItem="drawingItemCopy"[m
[32m+[m[32m                  @deleteItem="drawingItemDelete" />[m
[32m+[m[32m              </template>[m
[32m+[m[32m            </draggable>[m
[32m+[m[32m            <div v-show="!drawingList.length" class="empty-info">[m
[32m+[m[32m              ä»å·¦ä¾§æ‹–å…¥æˆ–ç‚¹é€‰ç»„ä»¶è¿›è¡Œè¡¨å•è®¾è®¡[m
[32m+[m[32m            </div>[m
[32m+[m[32m          </el-form>[m
[32m+[m[32m        </el-row>[m
[32m+[m[32m      </el-scrollbar>[m
[32m+[m[32m    </div>[m
[32m+[m[32m    <right-panel :active-data="activeData" :form-conf="formConf" :show-field="!!drawingList.length"[m
[32m+[m[32m      @tag-change="tagChange" />[m
[32m+[m
[32m+[m[32m    <code-type-dialog v-model="dialogVisible" title="é€‰æ‹©ç”Ÿæˆç±»å‹" :showFileName="showFileName" @confirm="generate" />[m
[32m+[m[32m    <input id="copyNode" type="hidden">[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport draggable from "vuedraggable/dist/vuedraggable.common";[m
[32m+[m[32mimport ClipboardJS from 'clipboard'[m
[32m+[m[32mimport beautifier from 'js-beautify'[m
[32m+[m[32mimport logo from '@/assets/logo/logo.png'[m
[32m+[m[32mimport { inputComponents, selectComponents, layoutComponents, formConf as formConfData } from '@/utils/generator/config'[m
[32m+[m[32mimport { beautifierConf } from '@/utils/index'[m
[32m+[m[32mimport drawingDefalut from '@/utils/generator/drawingDefalut'[m
[32m+[m[32mimport { makeUpHtml, vueTemplate, vueScript, cssStyle } from '@/utils/generator/html'[m
[32m+[m[32mimport { makeUpJs } from '@/utils/generator/js'[m
[32m+[m[32mimport { makeUpCss } from '@/utils/generator/css'[m
[32m+[m[32mimport Download from '@/plugins/download';[m
[32m+[m[32mimport { ElNotification } from 'element-plus'[m
[32m+[m[32mimport DraggableItem from './DraggableItem'[m
[32m+[m[32mimport RightPanel from './RightPanel'[m
[32m+[m[32mimport CodeTypeDialog from './CodeTypeDialog'[m
[32m+[m[32mimport { onMounted, watch } from 'vue'[m
[32m+[m[32mconst drawingList = ref(drawingDefalut)[m
[32m+[m[32mconst { proxy } = getCurrentInstance()[m
[32m+[m[32mconst dialogVisible = ref(false)[m
[32m+[m[32mconst showFileName = ref(false)[m
[32m+[m[32mconst operationType = ref('')[m
[32m+[m[32mconst idGlobal = ref(100)[m
[32m+[m[32mconst activeData = ref(drawingDefalut[0])[m
[32m+[m[32mconst activeId = ref(drawingDefalut[0].formId)[m
[32m+[m[32mconst generateConf = ref(null)[m
[32m+[m[32mconst formData = ref({})[m
[32m+[m[32mconst formConf = ref(formConfData)[m
[32m+[m[32mlet oldActiveId[m
[32m+[m[32mlet tempActiveData[m
[32m+[m
[32m+[m[32mfunction activeFormItem(element) {[m
[32m+[m[32m  activeData.value = element[m
[32m+[m[32m  activeId.value = element.formId[m
[32m+[m[32m}[m
[32m+[m[32mfunction copy() {[m
[32m+[m[32m  dialogVisible.value = true[m
[32m+[m[32m  showFileName.value = false[m
[32m+[m[32m  operationType.value = 'copy'[m
[32m+[m[32m}[m
[32m+[m[32mfunction download() {[m
[32m+[m[32m  dialogVisible.value = true[m
[32m+[m[32m  showFileName.value = true[m
[32m+[m[32m  operationType.value = 'download'[m
[32m+[m[32m}[m
[32m+[m[32mfunction empty() {[m
[32m+[m[32m  proxy.$modal.confirm('ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰ç»„ä»¶å—ï¼Ÿ', 'æç¤º', { type: 'warning' }).then([m
[32m+[m[32m    () => {[m
[32m+[m[32m      idGlobal.value = 100[m
[32m+[m[32m      drawingList.value = [][m
[32m+[m[32m    }[m
[32m+[m[32m  )[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction onEnd(obj, a) {[m
[32m+[m[32m  if (obj.from !== obj.to) {[m
[32m+[m[32m    activeData.value = tempActiveData[m
[32m+[m[32m    activeId.value = idGlobal.value[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction addComponent(item) {[m
[32m+[m[32m  const clone = cloneComponent(item)[m
[32m+[m[32m  drawingList.value.push(clone)[m
[32m+[m[32m  activeFormItem(clone)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction cloneComponent(origin) {[m
[32m+[m[32m  const clone = JSON.parse(JSON.stringify(origin))[m
[32m+[m[32m  clone.formId = ++idGlobal.value[m
[32m+[m[32m  clone.span = formConf.value.span[m
[32m+[m[32m  clone.renderKey = +new Date() // æ”¹å˜renderKeyåå¯ä»¥å®ç°å¼ºåˆ¶æ›´æ–°ç»„ä»¶[m
[32m+[m[32m  if (!clone.layout) clone.layout = 'colFormItem'[m
[32m+[m[32m  if (clone.layout === 'colFormItem') {[m
[32m+[m[32m    clone.vModel = `field${idGlobal.value}`[m
[32m+[m[32m    clone.placeholder !== undefined && (clone.placeholder += clone.label)[m
[32m+[m[32m    tempActiveData = clone[m
[32m+[m[32m  } else if (clone.layout === 'rowFormItem') {[m
[32m+[m[32m    delete clone.label[m
[32m+[m[32m    clone.componentName = `row${idGlobal.value}`[m
[32m+[m[32m    clone.gutter = formConf.value.gutter[m
[32m+[m[32m    tempActiveData = clone[m
[32m+[m[32m  }[m
[32m+[m[32m  return tempActiveData[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction drawingItemCopy(item, parent) {[m
[32m+[m[32m  let clone = JSON.parse(JSON.stringify(item))[m
[32m+[m[32m  clone = createIdAndKey(clone)[m
[32m+[m[32m  parent.push(clone)[m
[32m+[m[32m  activeFormItem(clone)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m
[32m+[m[32mfunction createIdAndKey(item) {[m
[32m+[m[32m  item.formId = ++idGlobal.value[m
[32m+[m[32m  item.renderKey = +new Date()[m
[32m+[m[32m  if (item.layout === 'colFormItem') {[m
[32m+[m[32m    item.vModel = `field${idGlobal.value}`[m
[32m+[m[32m  } else if (item.layout === 'rowFormItem') {[m
[32m+[m[32m    item.componentName = `row${idGlobal.value}`[m
[32m+[m[32m  }[m
[32m+[m[32m  if (Array.isArray(item.children)) {[m
[32m+[m[32m    item.children = item.children.map(childItem => createIdAndKey(childItem))[m
[32m+[m[32m  }[m
[32m+[m[32m  return item[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction drawingItemDelete(index, parent) {[m
[32m+[m[32m  parent.splice(index, 1)[m
[32m+[m[32m  nextTick(() => {[m
[32m+[m[32m    const len = drawingList.value.length[m
[32m+[m[32m    if (len) {[m
[32m+[m[32m      activeFormItem(drawingList.value[len - 1])[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction tagChange(newTag) {[m
[32m+[m[32m  newTag = cloneComponent(newTag)[m
[32m+[m[32m  newTag.vModel = activeData.value.vModel[m
[32m+[m[32m  newTag.formId = activeId.value[m
[32m+[m[32m  newTag.span = activeData.value.span[m
[32m+[m[32m  delete activeData.value.tag[m
[32m+[m[32m  delete activeData.value.tagIcon[m
[32m+[m[32m  delete activeData.value.document[m
[32m+[m[32m  Object.keys(newTag).forEach(key => {[m
[32m+[m[32m    if (activeData.value[key] !== undefined[m
[32m+[m[32m      && typeof activeData.value[key] === typeof newTag[key]) {[m
[32m+[m[32m      newTag[key] = activeData.value[key][m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m[32m  activeData.value = newTag[m
[32m+[m[32m  updateDrawingList(newTag, drawingList.value)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m
[32m+[m[32mfunction updateDrawingList(newTag, list) {[m
[32m+[m[32m  const index = list.findIndex(item => item.formId === activeId.value)[m
[32m+[m[32m  if (index > -1) {[m
[32m+[m[32m    list.splice(index, 1, newTag)[m
[32m+[m[32m  } else {[m
[32m+[m[32m    list.forEach(item => {[m
[32m+[m[32m      if (Array.isArray(item.children)) updateDrawingList(newTag, item.children)[m
[32m+[m[32m    })[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32mfunction generate(data) {[m
[32m+[m[32m  generateConf.value = data[m
[32m+[m[32m  nextTick(() => {[m
[32m+[m[32m    switch (operationType.value) {[m
[32m+[m[32m      case 'copy':[m
[32m+[m[32m        execCopy(data)[m
[32m+[m[32m        break;[m
[32m+[m[32m      case 'download':[m
[32m+[m[32m        execDownload(data)[m
[32m+[m[32m        break;[m
[32m+[m[32m      default:[m
[32m+[m[32m        break;[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction execDownload(data) {[m
[32m+[m[32m  const codeStr = generateCode()[m
[32m+[m[32m  const blob = new Blob([codeStr], { type: 'text/plain;charset=utf-8' })[m
[32m+[m[32m  console.log(proxy.download);[m
[32m+[m[32m  Download.saveAs(blob, data.fileName)[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mfunction execCopy(data) {[m
[32m+[m[32m  document.getElementById('copyNode').click()[m
[32m+[m[32m}[m
[32m+[m[32mfunction AssembleFormData() {[m
[32m+[m[32m  formData.value = {[m
[32m+[m[32m    fields: JSON.parse(JSON.stringify(drawingList.value)),[m
[32m+[m[32m    ...formConf.value[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32mfunction generateCode() {[m
[32m+[m[32m  const { type } = generateConf.value[m
[32m+[m[32m  AssembleFormData()[m
[32m+[m[32m  const script = vueScript(makeUpJs(formData.value, type))[m
[32m+[m[32m  const html = vueTemplate(makeUpHtml(formData.value, type))[m
[32m+[m[32m  const css = cssStyle(makeUpCss(formData.value))[m
[32m+[m[32m  return beautifier.html(html + script + css, beautifierConf.html)[m
[32m+[m[32m}[m
[32m+[m[32mwatch(() => activeData.value.label, (val, oldVal) => {[m
[32m+[m[32m  if ([m
[32m+[m[32m    activeData.value.placeholder === undefined[m
[32m+[m[32m    || !activeData.value.tag[m
[32m+[m[32m    || oldActiveId !== activeId.value[m
[32m+[m[32m  ) {[m
[32m+[m[32m    return[m
[32m+[m[32m  }[m
[32m+[m[32m  activeData.value.placeholder = activeData.value.placeholder.replace(oldVal, '') + val[m
[32m+[m[32m})[m
[32m+[m[32mwatch(activeId, (val) => {[m
[32m+[m[32m  oldActiveId = val[m
[32m+[m[32m}, {[m
[32m+[m[32m  immediate: true[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32monMounted(() => {[m
[32m+[m[32m  const clipboard = new ClipboardJS('#copyNode', {[m
[32m+[m[32m    text: trigger => {[m
[32m+[m[32m      const codeStr = generateCode()[m
[32m+[m[32m      ElNotification({[m
[32m+[m[32m        title: 'æˆåŠŸ',[m
[32m+[m[32m        message: 'ä»£ç å·²å¤åˆ¶åˆ°å‰ªåˆ‡æ¿ï¼Œå¯ç²˜è´´ã€‚',[m
[32m+[m[32m        type: 'success'[m
[32m+[m[32m      })[m
[32m+[m
[32m+[m[32m      return codeStr[m
[32m+[m[32m    }[m
[32m+[m[32m  })[m
[32m+[m[32m  clipboard.on('error', e => {[m
[32m+[m[32m    ElMessage.error('ä»£ç å¤åˆ¶å¤±è´¥')[m
[32m+[m[32m  })[m
[32m+[m[32m})[m
[32m+[m[32m</script>[m
[32m+[m
[32m+[m[32m<style lang='scss'>[m
[32m+[m[32m// body,[m
[32m+[m[32m// html {[m
[32m+[m[32m//   margin: 0;[m
[32m+[m[32m//   padding: 0;[m
[32m+[m[32m//   background: #fff;[m
[32m+[m[32m//   -moz-osx-font-smoothing: grayscale;[m
[32m+[m[32m//   -webkit-font-smoothing: antialiased;[m
[32m+[m[32m//   text-rendering: optimizeLegibility;[m
[32m+[m[32m//   font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji;[m
[32m+[m[32m// }[m
[32m+[m
[32m+[m[32m// input,[m
[32m+[m[32m// textarea {[m
[32m+[m[32m//   font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji;[m
[32m+[m[32m// }[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32m$lighterBlue: #409EFF;[m
[32m+[m
[32m+[m[32m.container {[m
[32m+[m[32m  position: relative;[m
[32m+[m[32m  width: 100%;[m
[32m+[m[32m  background-color: var(--el-bg-color-overlay);[m
[32m+[m[32m  height: calc(100vh - 50px - 40px);[m
[32m+[m[32m  overflow: hidden;[m
[32m+[m
[32m+[m[32m  .left-board {[m
[32m+[m[32m    width: 260px;[m
[32m+[m[32m    position: absolute;[m
[32m+[m[32m    left: 0;[m
[32m+[m[32m    top: 0;[m
[32m+[m[32m    height: calc(100vh - 50px - 40px);[m
[32m+[m
[32m+[m[32m    .logo-wrapper {[m
[32m+[m[32m      position: relative;[m
[32m+[m[32m      height: 42px;[m
[32m+[m[32m      border-bottom: 1px solid var(--el-border-color-extra-light);[m
[32m+[m[32m      box-sizing: border-box;[m
[32m+[m
[32m+[m[32m      .logo {[m
[32m+[m[32m        position: absolute;[m
[32m+[m[32m        left: 12px;[m
[32m+[m[32m        top: 6px;[m
[32m+[m[32m        line-height: 30px;[m
[32m+[m[32m        color: #00afff;[m
[32m+[m[32m        font-weight: 600;[m
[32m+[m[32m        font-size: 17px;[m
[32m+[m[32m        white-space: nowrap;[m
[32m+[m
[32m+[m[32m        >img {[m
[32m+[m[32m          width: 30px;[m
[32m+[m[32m          height: 30px;[m
[32m+[m[32m          vertical-align: top;[m
[32m+[m[32m        }[m
[32m+[m
[32m+[m[32m        .github {[m
[32m+[m[32m          display: inline-block;[m
[32m+[m[32m          vertical-align: sub;[m
[32m+[m[32m          margin-left: 15px;[m
[32m+[m
[32m+[m[32m          >img {[m
[32m+[m[32m            height: 22px;[m
[32m+[m[32m          }[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    .left-scrollbar {[m
[32m+[m[32m      .el-scrollbar__wrap {[m
[32m+[m[32m        box-sizing: border-box;[m
[32m+[m[32m        overflow-x: hidden !important;[m
[32m+[m[32m        margin-bottom: 0 !important;[m
[32m+[m
[32m+[m[32m        .components-list {[m
[32m+[m[32m          padding: 8px;[m
[32m+[m[32m          box-sizing: border-box;[m
[32m+[m[32m          height: 100%;[m
[32m+[m
[32m+[m[32m          .components-title {[m
[32m+[m[32m            font-size: 14px;[m
[32m+[m[32m            // color: #222;[m
[32m+[m[32m            margin: 6px 2px;[m
[32m+[m
[32m+[m[32m            .svg-icon {[m
[32m+[m[32m              // color: #666;[m
[32m+[m[32m              font-size: 18px;[m
[32m+[m[32m              margin-right: 5px;[m
[32m+[m[32m            }[m
[32m+[m[32m          }[m
[32m+[m
[32m+[m[32m          .components-draggable {[m
[32m+[m[32m            padding-bottom: 20px;[m
[32m+[m
[32m+[m[32m            .components-item {[m
[32m+[m[32m              display: inline-block;[m
[32m+[m[32m              width: 48%;[m
[32m+[m[32m              margin: 1%;[m
[32m+[m[32m              transition: transform 0ms !important;[m
[32m+[m
[32m+[m[32m              .components-body {[m
[32m+[m[32m                padding: 8px 10px;[m
[32m+[m[32m                background: var(--el-border-color-extra-light);[m
[32m+[m[32m                font-size: 12px;[m
[32m+[m[32m                cursor: move;[m
[32m+[m[32m                border: 1px dashed var(--el-border-color-extra-light);[m
[32m+[m[32m                border-radius: 3px;[m
[32m+[m
[32m+[m[32m                .svg-icon {[m
[32m+[m[32m                  // color: #777;[m
[32m+[m[32m                  font-size: 15px;[m
[32m+[m[32m                  margin-right: 5px;[m
[32m+[m[32m                }[m
[32m+[m
[32m+[m[32m                &:hover {[m
[32m+[m[32m                  border: 1px dashed #787be8;[m
[32m+[m[32m                  color: #787be8;[m
[32m+[m
[32m+[m[32m                  .svg-icon {[m
[32m+[m[32m                    color: #787be8;[m
[32m+[m[32m                  }[m
[32m+[m[32m                }[m
[32m+[m[32m              }[m
[32m+[m[32m            }[m
[32m+[m[32m          }[m
[32m+[m
[32m+[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m[32m  .center-board {[m
[32m+[m[32m    height: calc(100vh - 50px - 40px);[m
[32m+[m[32m    width: auto;[m
[32m+[m[32m    margin: 0 350px 0 260px;[m
[32m+[m[32m    box-sizing: border-box;[m
[32m+[m
[32m+[m[32m    .action-bar {[m
[32m+[m[32m      position: relative;[m
[32m+[m[32m      height: 42px;[m
[32m+[m[32m      padding: 0 15px;[m
[32m+[m[32m      box-sizing: border-box;[m
[32m+[m[32m      ;[m
[32m+[m[32m      border: 1px solid var(--el-border-color-extra-light);[m
[32m+[m[32m      border-top: none;[m
[32m+[m[32m      border-left: none;[m
[32m+[m[32m      display: flex;[m
[32m+[m[32m      align-items: center;[m
[32m+[m[32m      justify-content: flex-end;[m
[32m+[m
[32m+[m[32m      u .delete-btn {[m
[32m+[m[32m        color: #F56C6C;[m
[32m+[m[32m      }[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    .center-scrollbar {[m
[32m+[m[32m      height: calc(100vh - 50px - 40px - 42px);[m
[32m+[m[32m      overflow: hidden;[m
[32m+[m[32m      border-left: 1px solid var(--el-border-color-extra-light);[m
[32m+[m[32m      border-right: 1px solid var(--el-border-color-extra-light);[m
[32m+[m[32m      box-sizing: border-box;[m
[32m+[m
[32m+[m[32m      .el-scrollbar__view {[m
[32m+[m[32m        overflow-x: hidden;[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m      .center-board-row {[m
[32m+[m[32m        padding: 12px 12px 15px 12px;[m
[32m+[m[32m        box-sizing: border-box;[m
[32m+[m
[32m+[m[32m        &>.el-form {[m
[32m+[m[32m          // 69 = 12+15+42[m
[32m+[m[32m          height: calc(100vh - 50px - 40px - 69px);[m
[32m+[m[32m          flex: 1;[m
[32m+[m
[32m+[m[32m          .drawing-board {[m
[32m+[m[32m            height: 100%;[m
[32m+[m[32m            position: relative;[m
[32m+[m
[32m+[m[32m            .components-body {[m
[32m+[m[32m              padding: 0;[m
[32m+[m[32m              margin: 0;[m
[32m+[m[32m              font-size: 0;[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            .sortable-ghost {[m
[32m+[m[32m              position: relative;[m
[32m+[m[32m              display: block;[m
[32m+[m[32m              overflow: hidden;[m
[32m+[m
[32m+[m[32m              &::before {[m
[32m+[m[32m                content: " ";[m
[32m+[m[32m                position: absolute;[m
[32m+[m[32m                left: 0;[m
[32m+[m[32m                right: 0;[m
[32m+[m[32m                top: 0;[m
[32m+[m[32m                height: 3px;[m
[32m+[m[32m                background: rgb(89, 89, 223);[m
[32m+[m[32m                z-index: 2;[m
[32m+[m[32m              }[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            .components-item.sortable-ghost {[m
[32m+[m[32m              width: 100%;[m
[32m+[m[32m              height: 60px;[m
[32m+[m[32m              background: var(--el-border-color-extra-light);[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            .active-from-item {[m
[32m+[m[32m              &>.el-form-item {[m
[32m+[m[32m                background: var(--el-border-color-extra-light);[m
[32m+[m[32m                border-radius: 6px;[m
[32m+[m[32m              }[m
[32m+[m
[32m+[m[32m              &>.drawing-item-copy,[m
[32m+[m[32m              &>.drawing-item-delete {[m
[32m+[m[32m                display: initial;[m
[32m+[m[32m              }[m
[32m+[m
[32m+[m[32m              &>.component-name {[m
[32m+[m[32m                color: $lighterBlue;[m
[32m+[m[32m              }[m
[32m+[m
[32m+[m[32m              .el-input__wrapper {[m
[32m+[m[32m                box-shadow: 0 0 0 1px var(--el-input-hover-border-color) inset;[m
[32m+[m[32m              }[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            .el-form-item {[m
[32m+[m[32m              margin-bottom: 15px;[m
[32m+[m[32m            }[m
[32m+[m[32m          }[m
[32m+[m
[32m+[m[32m          .drawing-item {[m
[32m+[m[32m            position: relative;[m
[32m+[m[32m            cursor: move;[m
[32m+[m
[32m+[m[32m            &.unfocus-bordered:not(.activeFromItem)>div:first-child {[m
[32m+[m[32m              border: 1px dashed #ccc;[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            .el-form-item {[m
[32m+[m[32m              padding: 12px 10px;[m
[32m+[m[32m            }[m
[32m+[m[32m          }[m
[32m+[m
[32m+[m[32m          .drawing-row-item {[m
[32m+[m[32m            position: relative;[m
[32m+[m[32m            cursor: move;[m
[32m+[m[32m            box-sizing: border-box;[m
[32m+[m[32m            border: 1px dashed #ccc;[m
[32m+[m[32m            border-radius: 3px;[m
[32m+[m[32m            padding: 0 2px;[m
[32m+[m[32m            margin-bottom: 15px;[m
[32m+[m
[32m+[m[32m            .drawing-row-item {[m
[32m+[m[32m              margin-bottom: 2px;[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            .el-col {[m
[32m+[m[32m              margin-top: 22px;[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            .el-form-item {[m
[32m+[m[32m              margin-bottom: 0;[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            .drag-wrapper {[m
[32m+[m[32m              min-height: 80px;[m
[32m+[m[32m              flex: 1;[m
[32m+[m[32m              display: flex;[m
[32m+[m[32m              flex-wrap: wrap;[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            &.active-from-item {[m
[32m+[m[32m              border: 1px dashed $lighterBlue;[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            .component-name {[m
[32m+[m[32m              position: absolute;[m
[32m+[m[32m              top: 0;[m
[32m+[m[32m              left: 0;[m
[32m+[m[32m              font-size: 12px;[m
[32m+[m[32m              color: #bbb;[m
[32m+[m[32m              display: inline-block;[m
[32m+[m[32m              padding: 0 6px;[m
[32m+[m[32m            }[m
[32m+[m[32m          }[m
[32m+[m
[32m+[m[32m          .drawing-item,[m
[32m+[m[32m          .drawing-row-item {[m
[32m+[m[32m            &:hover {[m
[32m+[m[32m              &>.el-form-item {[m
[32m+[m[32m                background: var(--el-border-color-extra-light);[m
[32m+[m[32m                border-radius: 6px;[m
[32m+[m[32m              }[m
[32m+[m
[32m+[m[32m              &>.drawing-item-copy,[m
[32m+[m[32m              &>.drawing-item-delete {[m
[32m+[m[32m                display: initial;[m
[32m+[m[32m              }[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            &>.drawing-item-copy,[m
[32m+[m[32m            &>.drawing-item-delete {[m
[32m+[m[32m              display: none;[m
[32m+[m[32m              position: absolute;[m
[32m+[m[32m              top: -10px;[m
[32m+[m[32m              width: 22px;[m
[32m+[m[32m              height: 22px;[m
[32m+[m[32m              line-height: 22px;[m
[32m+[m[32m              text-align: center;[m
[32m+[m[32m              border-radius: 50%;[m
[32m+[m[32m              font-size: 12px;[m
[32m+[m[32m              border: 1px solid;[m
[32m+[m[32m              cursor: pointer;[m
[32m+[m[32m              z-index: 1;[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            &>.drawing-item-copy {[m
[32m+[m[32m              right: 56px;[m
[32m+[m[32m              border-color: $lighterBlue;[m
[32m+[m[32m              color: $lighterBlue;[m
[32m+[m[32m              background: #fff;[m
[32m+[m
[32m+[m[32m              &:hover {[m
[32m+[m[32m                background: $lighterBlue;[m
[32m+[m[32m                color: #fff;[m
[32m+[m[32m              }[m
[32m+[m[32m            }[m
[32m+[m
[32m+[m[32m            &>.drawing-item-delete {[m
[32m+[m[32m              right: 24px;[m
[32m+[m[32m              border-color: #F56C6C;[m
[32m+[m[32m              color: #F56C6C;[m
[32m+[m[32m              background: #fff;[m
[32m+[m
[32m+[m[32m              &:hover {[m
[32m+[m[32m                background: #F56C6C;[m
[32m+[m[32m                color: #fff;[m
[32m+[m[32m              }[m
[32m+[m[32m            }[m
[32m+[m[32m          }[m
[32m+[m
[32m+[m[32m          .empty-info {[m
[32m+[m[32m            position: absolute;[m
[32m+[m[32m            top: 46%;[m
[32m+[m[32m            left: 0;[m
[32m+[m[32m            right: 0;[m
[32m+[m[32m            text-align: center;[m
[32m+[m[32m            font-size: 18px;[m
[32m+[m[32m            color: #ccb1ea;[m
[32m+[m[32m            letter-spacing: 4px;[m
[32m+[m[32m          }[m
[32m+[m
[32m+[m[32m        }[m
[32m+[m[32m      }[m
[32m+[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m  }[m
[32m+[m
[32m+[m
[32m+[m
[32m+[m[32m}[m
[32m+[m[32m</style>[m
[1mdiff --git a/src/views/tool/gen/basicInfoForm.vue b/src/views/tool/gen/basicInfoForm.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..39c85150[m
[1m--- /dev/null[m
[1m+++ b/src/views/tool/gen/basicInfoForm.vue[m
[36m@@ -0,0 +1,48 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <el-form ref="basicInfoForm" :model="info" :rules="rules" label-width="150px">[m
[32m+[m[32m    <el-row>[m
[32m+[m[32m      <el-col :span="12">[m
[32m+[m[32m        <el-form-item label="è¡¨åç§°" prop="tableName">[m
[32m+[m[32m          <el-input placeholder="è¯·è¾“å…¥ä»“åº“åç§°" v-model="info.tableName" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <el-col :span="12">[m
[32m+[m[32m        <el-form-item label="è¡¨æè¿°" prop="tableComment">[m
[32m+[m[32m          <el-input placeholder="è¯·è¾“å…¥" v-model="info.tableComment" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <el-col :span="12">[m
[32m+[m[32m        <el-form-item label="å®ä½“ç±»åç§°" prop="className">[m
[32m+[m[32m          <el-input placeholder="è¯·è¾“å…¥" v-model="info.className" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <el-col :span="12">[m
[32m+[m[32m        <el-form-item label="ä½œè€…" prop="functionAuthor">[m
[32m+[m[32m          <el-input placeholder="è¯·è¾“å…¥" v-model="info.functionAuthor" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <el-col :span="24">[m
[32m+[m[32m        <el-form-item label="å¤‡æ³¨" prop="remark">[m
[32m+[m[32m          <el-input type="textarea" :rows="3" v-model="info.remark"></el-input>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m    </el-row>[m
[32m+[m[32m  </el-form>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mdefineProps({[m
[32m+[m[32m  info: {[m
[32m+[m[32m    type: Object,[m
[32m+[m[32m    default: null[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m// è¡¨å•æ ¡éªŒ[m
[32m+[m[32mconst rules = ref({[m
[32m+[m[32m  tableName: [{ required: true, message: "è¯·è¾“å…¥è¡¨åç§°", trigger: "blur" }],[m
[32m+[m[32m  tableComment: [{ required: true, message: "è¯·è¾“å…¥è¡¨æè¿°", trigger: "blur" }],[m
[32m+[m[32m  className: [{ required: true, message: "è¯·è¾“å…¥å®ä½“ç±»åç§°", trigger: "blur" }],[m
[32m+[m[32m  functionAuthor: [{ required: true, message: "è¯·è¾“å…¥ä½œè€…", trigger: "blur" }][m
[32m+[m[32m});[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/tool/gen/editTable.vue b/src/views/tool/gen/editTable.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..ddcbfd5b[m
[1m--- /dev/null[m
[1m+++ b/src/views/tool/gen/editTable.vue[m
[36m@@ -0,0 +1,198 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <el-card>[m
[32m+[m[32m    <el-tabs v-model="activeName">[m
[32m+[m[32m      <el-tab-pane label="åŸºæœ¬ä¿¡æ¯" name="basic">[m
[32m+[m[32m        <basic-info-form ref="basicInfo" :info="info" />[m
[32m+[m[32m      </el-tab-pane>[m
[32m+[m[32m      <el-tab-pane label="å­—æ®µä¿¡æ¯" name="columnInfo">[m
[32m+[m[32m        <el-table ref="dragTable" :data="columns" row-key="columnId" :max-height="tableHeight">[m
[32m+[m[32m          <el-table-column label="åºå·" type="index" min-width="5%"/>[m
[32m+[m[32m          <el-table-column[m
[32m+[m[32m            label="å­—æ®µåˆ—å"[m
[32m+[m[32m            prop="columnName"[m
[32m+[m[32m            min-width="10%"[m
[32m+[m[32m            :show-overflow-tooltip="true"[m
[32m+[m[32m          />[m
[32m+[m[32m          <el-table-column label="å­—æ®µæè¿°" min-width="10%">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m              <el-input v-model="scope.row.columnComment"></el-input>[m
[32m+[m[32m            </template>[m
[32m+[m[32m          </el-table-column>[m
[32m+[m[32m          <el-table-column[m
[32m+[m[32m            label="ç‰©ç†ç±»å‹"[m
[32m+[m[32m            prop="columnType"[m
[32m+[m[32m            min-width="10%"[m
[32m+[m[32m            :show-overflow-tooltip="true"[m
[32m+[m[32m          />[m
[32m+[m[32m          <el-table-column label="Javaç±»å‹" min-width="11%">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m              <el-select v-model="scope.row.javaType">[m
[32m+[m[32m                <el-option label="Long" value="Long" />[m
[32m+[m[32m                <el-option label="String" value="String" />[m
[32m+[m[32m                <el-option label="Integer" value="Integer" />[m
[32m+[m[32m                <el-option label="Double" value="Double" />[m
[32m+[m[32m                <el-option label="BigDecimal" value="BigDecimal" />[m
[32m+[m[32m                <el-option label="Date" value="Date" />[m
[32m+[m[32m                <el-option label="Boolean" value="Boolean" />[m
[32m+[m[32m              </el-select>[m
[32m+[m[32m            </template>[m
[32m+[m[32m          </el-table-column>[m
[32m+[m[32m          <el-table-column label="javaå±æ€§" min-width="10%">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m              <el-input v-model="scope.row.javaField"></el-input>[m
[32m+[m[32m            </template>[m
[32m+[m[32m          </el-table-column>[m
[32m+[m
[32m+[m[32m          <el-table-column label="æ’å…¥" min-width="5%">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m              <el-checkbox true-label="1" false-label="0" v-model="scope.row.isInsert"></el-checkbox>[m
[32m+[m[32m            </template>[m
[32m+[m[32m          </el-table-column>[m
[32m+[m[32m          <el-table-column label="ç¼–è¾‘" min-width="5%">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m              <el-checkbox true-label="1" false-label="0" v-model="scope.row.isEdit"></el-checkbox>[m
[32m+[m[32m            </template>[m
[32m+[m[32m          </el-table-column>[m
[32m+[m[32m          <el-table-column label="åˆ—è¡¨" min-width="5%">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m              <el-checkbox true-label="1" false-label="0" v-model="scope.row.isList"></el-checkbox>[m
[32m+[m[32m            </template>[m
[32m+[m[32m          </el-table-column>[m
[32m+[m[32m          <el-table-column label="æŸ¥è¯¢" min-width="5%">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m              <el-checkbox true-label="1" false-label="0" v-model="scope.row.isQuery"></el-checkbox>[m
[32m+[m[32m            </template>[m
[32m+[m[32m          </el-table-column>[m
[32m+[m[32m          <el-table-column label="æŸ¥è¯¢æ–¹å¼" min-width="10%">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m              <el-select v-model="scope.row.queryType">[m
[32m+[m[32m                <el-option label="=" value="EQ" />[m
[32m+[m[32m                <el-option label="!=" value="NE" />[m
[32m+[m[32m                <el-option label=">" value="GT" />[m
[32m+[m[32m                <el-option label=">=" value="GTE" />[m
[32m+[m[32m                <el-option label="<" value="LT" />[m
[32m+[m[32m                <el-option label="<=" value="LTE" />[m
[32m+[m[32m                <el-option label="LIKE" value="LIKE" />[m
[32m+[m[32m                <el-option label="BETWEEN" value="BETWEEN" />[m
[32m+[m[32m              </el-select>[m
[32m+[m[32m            </template>[m
[32m+[m[32m          </el-table-column>[m
[32m+[m[32m          <el-table-column label="å¿…å¡«" min-width="5%">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m              <el-checkbox true-label="1" false-label="0" v-model="scope.row.isRequired"></el-checkbox>[m
[32m+[m[32m            </template>[m
[32m+[m[32m          </el-table-column>[m
[32m+[m[32m          <el-table-column label="æ˜¾ç¤ºç±»å‹" min-width="12%">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m              <el-select v-model="scope.row.htmlType">[m
[32m+[m[32m                <el-option label="æ–‡æœ¬æ¡†" value="input" />[m
[32m+[m[32m                <el-option label="æ–‡æœ¬åŸŸ" value="textarea" />[m
[32m+[m[32m                <el-option label="ä¸‹æ‹‰æ¡†" value="select" />[m
[32m+[m[32m                <el-option label="å•é€‰æ¡†" value="radio" />[m
[32m+[m[32m                <el-option label="å¤é€‰æ¡†" value="checkbox" />[m
[32m+[m[32m                <el-option label="æ—¥æœŸæ§ä»¶" value="datetime" />[m
[32m+[m[32m                <el-option label="å›¾ç‰‡ä¸Šä¼ " value="imageUpload" />[m
[32m+[m[32m                <el-option label="æ–‡ä»¶ä¸Šä¼ " value="fileUpload" />[m
[32m+[m[32m                <el-option label="å¯Œæ–‡æœ¬æ§ä»¶" value="editor" />[m
[32m+[m[32m              </el-select>[m
[32m+[m[32m            </template>[m
[32m+[m[32m          </el-table-column>[m
[32m+[m[32m          <el-table-column label="å­—å…¸ç±»å‹" min-width="12%">[m
[32m+[m[32m            <template #default="scope">[m
[32m+[m[32m              <el-select v-model="scope.row.dictType" clearable filterable placeholder="è¯·é€‰æ‹©">[m
[32m+[m[32m                <el-option[m
[32m+[m[32m                  v-for="dict in dictOptions"[m
[32m+[m[32m                  :key="dict.dictType"[m
[32m+[m[32m                  :label="dict.dictName"[m
[32m+[m[32m                  :value="dict.dictType">[m
[32m+[m[32m                  <span style="float: left">{{ dict.dictName }}</span>[m
[32m+[m[32m                  <span style="float: right; color: #8492a6; font-size: 13px">{{ dict.dictType }}</span>[m
[32m+[m[32m              </el-option>[m
[32m+[m[32m              </el-select>[m
[32m+[m[32m            </template>[m
[32m+[m[32m          </el-table-column>[m
[32m+[m[32m        </el-table>[m
[32m+[m[32m      </el-tab-pane>[m
[32m+[m[32m      <el-tab-pane label="ç”Ÿæˆä¿¡æ¯" name="genInfo">[m
[32m+[m[32m        <gen-info-form ref="genInfo" :info="info" :tables="tables" />[m
[32m+[m[32m      </el-tab-pane>[m
[32m+[m[32m    </el-tabs>[m
[32m+[m[32m    <el-form label-width="100px">[m
[32m+[m[32m      <div style="text-align: center;margin-left:-100px;margin-top:10px;">[m
[32m+[m[32m        <el-button type="primary" @click="submitForm()">æäº¤</el-button>[m
[32m+[m[32m        <el-button @click="close()">è¿”å›</el-button>[m
[32m+[m[32m      </div>[m
[32m+[m[32m    </el-form>[m
[32m+[m[32m  </el-card>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup name="GenEdit">[m
[32m+[m[32mimport { getGenTable, updateGenTable } from "@/api/tool/gen";[m
[32m+[m[32mimport { optionselect as getDictOptionselect } from "@/api/system/dict/type";[m
[32m+[m[32mimport basicInfoForm from "./basicInfoForm";[m
[32m+[m[32mimport genInfoForm from "./genInfoForm";[m
[32m+[m
[32m+[m[32mconst route = useRoute();[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m
[32m+[m[32mconst activeName = ref("columnInfo");[m
[32m+[m[32mconst tableHeight = ref(document.documentElement.scrollHeight - 245 + "px");[m
[32m+[m[32mconst tables = ref([]);[m
[32m+[m[32mconst columns = ref([]);[m
[32m+[m[32mconst dictOptions = ref([]);[m
[32m+[m[32mconst info = ref({});[m
[32m+[m
[32m+[m[32m/** æäº¤æŒ‰é’® */[m
[32m+[m[32mfunction submitForm() {[m
[32m+[m[32m  const basicForm = proxy.$refs.basicInfo.$refs.basicInfoForm;[m
[32m+[m[32m  const genForm = proxy.$refs.genInfo.$refs.genInfoForm;[m
[32m+[m[32m  Promise.all([basicForm, genForm].map(getFormPromise)).then(res => {[m
[32m+[m[32m    const validateResult = res.every(item => !!item);[m
[32m+[m[32m    if (validateResult) {[m
[32m+[m[32m      const genTable = Object.assign({}, info.value);[m
[32m+[m[32m      genTable.columns = columns.value;[m
[32m+[m[32m      genTable.params = {[m
[32m+[m[32m        treeCode: info.value.treeCode,[m
[32m+[m[32m        treeName: info.value.treeName,[m
[32m+[m[32m        treeParentCode: info.value.treeParentCode,[m
[32m+[m[32m        parentMenuId: info.value.parentMenuId[m
[32m+[m[32m      };[m
[32m+[m[32m      updateGenTable(genTable).then(res => {[m
[32m+[m[32m        proxy.$modal.msgSuccess(res.msg);[m
[32m+[m[32m        if (res.code === 200) {[m
[32m+[m[32m          close();[m
[32m+[m[32m        }[m
[32m+[m[32m      });[m
[32m+[m[32m    } else {[m
[32m+[m[32m      proxy.$modal.msgError("è¡¨å•æ ¡éªŒæœªé€šè¿‡ï¼Œè¯·é‡æ–°æ£€æŸ¥æäº¤å†…å®¹");[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32mfunction getFormPromise(form) {[m
[32m+[m[32m  return new Promise(resolve => {[m
[32m+[m[32m    form.validate(res => {[m
[32m+[m[32m      resolve(res);[m
[32m+[m[32m    });[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32mfunction close() {[m
[32m+[m[32m  const obj = { path: "/tool/gen", query: { t: Date.now(), pageNum: route.query.pageNum } };[m
[32m+[m[32m  proxy.$tab.closeOpenPage(obj);[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32m(() => {[m
[32m+[m[32m  const tableId = route.params && route.params.tableId;[m
[32m+[m[32m  if (tableId) {[m
[32m+[m[32m    // è·å–è¡¨è¯¦ç»†ä¿¡æ¯[m
[32m+[m[32m    getGenTable(tableId).then(res => {[m
[32m+[m[32m      columns.value = res.data.rows;[m
[32m+[m[32m      info.value = res.data.info;[m
[32m+[m[32m      tables.value = res.data.tables;[m
[32m+[m[32m    });[m
[32m+[m[32m    /** æŸ¥è¯¢å­—å…¸ä¸‹æ‹‰åˆ—è¡¨ */[m
[32m+[m[32m    getDictOptionselect().then(response => {[m
[32m+[m[32m      dictOptions.value = response.data;[m
[32m+[m[32m    });[m
[32m+[m[32m  }[m
[32m+[m[32m})();[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/tool/gen/genInfoForm.vue b/src/views/tool/gen/genInfoForm.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..1856eaee[m
[1m--- /dev/null[m
[1m+++ b/src/views/tool/gen/genInfoForm.vue[m
[36m@@ -0,0 +1,297 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <el-form ref="genInfoForm" :model="info" :rules="rules" label-width="150px">[m
[32m+[m[32m    <el-row>[m
[32m+[m[32m      <el-col :span="12">[m
[32m+[m[32m        <el-form-item prop="tplCategory">[m
[32m+[m[32m          <template #label>ç”Ÿæˆæ¨¡æ¿</template>[m
[32m+[m[32m          <el-select v-model="info.tplCategory" @change="tplSelectChange">[m
[32m+[m[32m            <el-option label="å•è¡¨ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰" value="crud" />[m
[32m+[m[32m            <el-option label="æ ‘è¡¨ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰" value="tree" />[m
[32m+[m[32m            <el-option label="ä¸»å­è¡¨ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰" value="sub" />[m
[32m+[m[32m          </el-select>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m      </el-col>[m
[32m+[m
[32m+[m[32m      <el-col :span="12">[m
[32m+[m[32m        <el-form-item prop="tplWebType">[m
[32m+[m[32m          <template #label>å‰ç«¯ç±»å‹</template>[m
[32m+[m[32m          <el-select v-model="info.tplWebType">[m
[32m+[m[32m            <el-option label="Vue2 Element UI æ¨¡ç‰ˆ" value="element-ui" />[m
[32m+[m[32m            <el-option label="Vue3 Element Plus æ¨¡ç‰ˆ" value="element-plus" />[m
[32m+[m[32m          </el-select>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m      </el-col>[m
[32m+[m
[32m+[m[32m      <el-col :span="12">[m
[32m+[m[32m        <el-form-item prop="packageName">[m
[32m+[m[32m          <template #label>[m
[32m+[m[32m            ç”ŸæˆåŒ…è·¯å¾„[m
[32m+[m[32m            <el-tooltip content="ç”Ÿæˆåœ¨å“ªä¸ªjavaåŒ…ä¸‹ï¼Œä¾‹å¦‚ com.ruoyi.system" placement="top">[m
[32m+[m[32m              <el-icon><question-filled /></el-icon>[m
[32m+[m[32m            </el-tooltip>[m
[32m+[m[32m          </template>[m
[32m+[m[32m          <el-input v-model="info.packageName" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m      </el-col>[m
[32m+[m
[32m+[m[32m      <el-col :span="12">[m
[32m+[m[32m        <el-form-item prop="moduleName">[m
[32m+[m[32m          <template #label>[m
[32m+[m[32m            ç”Ÿæˆæ¨¡å—å[m
[32m+[m[32m            <el-tooltip content="å¯ç†è§£ä¸ºå­ç³»ç»Ÿåï¼Œä¾‹å¦‚ system" placement="top">[m
[32m+[m[32m              <el-icon><question-filled /></el-icon>[m
[32m+[m[32m            </el-tooltip>[m
[32m+[m[32m          </template>[m
[32m+[m[32m          <el-input v-model="info.moduleName" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m      </el-col>[m
[32m+[m
[32m+[m[32m      <el-col :span="12">[m
[32m+[m[32m        <el-form-item prop="businessName">[m
[32m+[m[32m          <template #label>[m
[32m+[m[32m            ç”Ÿæˆä¸šåŠ¡å[m
[32m+[m[32m            <el-tooltip content="å¯ç†è§£ä¸ºåŠŸèƒ½è‹±æ–‡åï¼Œä¾‹å¦‚ user" placement="top">[m
[32m+[m[32m              <el-icon><question-filled /></el-icon>[m
[32m+[m[32m            </el-tooltip>[m
[32m+[m[32m          </template>[m
[32m+[m[32m          <el-input v-model="info.businessName" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m      </el-col>[m
[32m+[m
[32m+[m[32m      <el-col :span="12">[m
[32m+[m[32m        <el-form-item prop="functionName">[m
[32m+[m[32m          <template #label>[m
[32m+[m[32m            ç”ŸæˆåŠŸèƒ½å[m
[32m+[m[32m            <el-tooltip content="ç”¨ä½œç±»æè¿°ï¼Œä¾‹å¦‚ ç”¨æˆ·" placement="top">[m
[32m+[m[32m              <el-icon><question-filled /></el-icon>[m
[32m+[m[32m            </el-tooltip>[m
[32m+[m[32m          </template>[m
[32m+[m[32m          <el-input v-model="info.functionName" />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m      </el-col>[m
[32m+[m
[32m+[m[32m      <el-col :span="12">[m
[32m+[m[32m        <el-form-item prop="genType">[m
[32m+[m[32m          <template #label>[m
[32m+[m[32m            ç”Ÿæˆä»£ç æ–¹å¼[m
[32m+[m[32m            <el-tooltip content="é»˜è®¤ä¸ºzipå‹ç¼©åŒ…ä¸‹è½½ï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰ç”Ÿæˆè·¯å¾„" placement="top">[m
[32m+[m[32m              <el-icon><question-filled /></el-icon>[m
[32m+[m[32m            </el-tooltip>[m
[32m+[m[32m          </template>[m
[32m+[m[32m          <el-radio v-model="info.genType" label="0">zipå‹ç¼©åŒ…</el-radio>[m
[32m+[m[32m          <el-radio v-model="info.genType" label="1">è‡ªå®šä¹‰è·¯å¾„</el-radio>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m      </el-col>[m
[32m+[m
[32m+[m[32m      <el-col :span="12">[m
[32m+[m[32m        <el-form-item>[m
[32m+[m[32m          <template #label>[m
[32m+[m[32m            ä¸Šçº§èœå•[m
[32m+[m[32m            <el-tooltip content="åˆ†é…åˆ°æŒ‡å®šèœå•ä¸‹ï¼Œä¾‹å¦‚ ç³»ç»Ÿç®¡ç†" placement="top">[m
[32m+[m[32m              <el-icon><question-filled /></el-icon>[m
[32m+[m[32m            </el-tooltip>[m
[32m+[m[32m          </template>[m
[32m+[m[32m          <tree-select[m
[32m+[m[32m            v-model:value="info.parentMenuId"[m
[32m+[m[32m            :options="menuOptions"[m
[32m+[m[32m            :objMap="{ value: 'menuId', label: 'menuName', children: 'children' }"[m
[32m+[m[32m            placeholder="è¯·é€‰æ‹©ç³»ç»Ÿèœå•"[m
[32m+[m[32m          />[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m      </el-col>[m
[32m+[m
[32m+[m[32m      <el-col :span="24" v-if="info.genType == '1'">[m
[32m+[m[32m        <el-form-item prop="genPath">[m
[32m+[m[32m          <template #label>[m
[32m+[m[32m            è‡ªå®šä¹‰è·¯å¾„[m
[32m+[m[32m            <el-tooltip content="å¡«å†™ç£ç›˜ç»å¯¹è·¯å¾„ï¼Œè‹¥ä¸å¡«å†™ï¼Œåˆ™ç”Ÿæˆåˆ°å½“å‰Webé¡¹ç›®ä¸‹" placement="top">[m
[32m+[m[32m              <el-icon><question-filled /></el-icon>[m
[32m+[m[32m            </el-tooltip>[m
[32m+[m[32m          </template>[m
[32m+[m[32m          <el-input v-model="info.genPath">[m
[32m+[m[32m            <template #append>[m
[32m+[m[32m              <el-dropdown>[m
[32m+[m[32m                <el-button type="primary">[m
[32m+[m[32m                  æœ€è¿‘è·¯å¾„å¿«é€Ÿé€‰æ‹©[m
[32m+[m[32m                  <i class="el-icon-arrow-down el-icon--right"></i>[m
[32m+[m[32m                </el-button>[m
[32m+[m[32m                <template #dropdown>[m
[32m+[m[32m                  <el-dropdown-menu>[m
[32m+[m[32m                    <el-dropdown-item @click="info.genPath = '/'">æ¢å¤é»˜è®¤çš„ç”ŸæˆåŸºç¡€è·¯å¾„</el-dropdown-item>[m
[32m+[m[32m                  </el-dropdown-menu>[m
[32m+[m[32m                </template>[m
[32m+[m[32m              </el-dropdown>[m
[32m+[m[32m            </template>[m
[32m+[m[32m          </el-input>[m
[32m+[m[32m        </el-form-item>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m    </el-row>[m
[32m+[m[41m    [m
[32m+[m[32m    <template v-if="info.tplCategory == 'tree'">[m
[32m+[m[32m      <h4 class="form-header">å…¶ä»–ä¿¡æ¯</h4>[m
[32m+[m[32m      <el-row v-show="info.tplCategory == 'tree'">[m
[32m+[m[32m        <el-col :span="12">[m
[32m+[m[32m          <el-form-item>[m
[32m+[m[32m            <template #label>[m
[32m+[m[32m              æ ‘ç¼–ç å­—æ®µ[m
[32m+[m[32m              <el-tooltip content="æ ‘æ˜¾ç¤ºçš„ç¼–ç å­—æ®µåï¼Œ å¦‚ï¼šdept_id" placement="top">[m
[32m+[m[32m                <el-icon><question-filled /></el-icon>[m
[32m+[m[32m              </el-tooltip>[m
[32m+[m[32m            </template>[m
[32m+[m[32m            <el-select v-model="info.treeCode" placeholder="è¯·é€‰æ‹©">[m
[32m+[m[32m              <el-option[m
[32m+[m[32m                v-for="(column, index) in info.columns"[m
[32m+[m[32m                :key="index"[m
[32m+[m[32m                :label="column.columnName + 'ï¼š' + column.columnComment"[m
[32m+[m[32m                :value="column.columnName"[m
[32m+[m[32m              ></el-option>[m
[32m+[m[32m            </el-select>[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m        </el-col>[m
[32m+[m[32m        <el-col :span="12">[m
[32m+[m[32m          <el-form-item>[m
[32m+[m[32m            <template #label>[m
[32m+[m[32m              æ ‘çˆ¶ç¼–ç å­—æ®µ[m
[32m+[m[32m              <el-tooltip content="æ ‘æ˜¾ç¤ºçš„çˆ¶ç¼–ç å­—æ®µåï¼Œ å¦‚ï¼šparent_Id" placement="top">[m
[32m+[m[32m                <el-icon><question-filled /></el-icon>[m
[32m+[m[32m              </el-tooltip>[m
[32m+[m[32m            </template>[m
[32m+[m[32m            <el-select v-model="info.treeParentCode" placeholder="è¯·é€‰æ‹©">[m
[32m+[m[32m              <el-option[m
[32m+[m[32m                v-for="(column, index) in info.columns"[m
[32m+[m[32m                :key="index"[m
[32m+[m[32m                :label="column.columnName + 'ï¼š' + column.columnComment"[m
[32m+[m[32m                :value="column.columnName"[m
[32m+[m[32m              ></el-option>[m
[32m+[m[32m            </el-select>[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m        </el-col>[m
[32m+[m[32m        <el-col :span="12">[m
[32m+[m[32m          <el-form-item>[m
[32m+[m[32m            <template #label>[m
[32m+[m[32m              æ ‘åç§°å­—æ®µ[m
[32m+[m[32m              <el-tooltip content="æ ‘èŠ‚ç‚¹çš„æ˜¾ç¤ºåç§°å­—æ®µåï¼Œ å¦‚ï¼šdept_name" placement="top">[m
[32m+[m[32m                <el-icon><question-filled /></el-icon>[m
[32m+[m[32m              </el-tooltip>[m
[32m+[m[32m            </template>[m
[32m+[m[32m            <el-select v-model="info.treeName" placeholder="è¯·é€‰æ‹©">[m
[32m+[m[32m              <el-option[m
[32m+[m[32m                v-for="(column, index) in info.columns"[m
[32m+[m[32m                :key="index"[m
[32m+[m[32m                :label="column.columnName + 'ï¼š' + column.columnComment"[m
[32m+[m[32m                :value="column.columnName"[m
[32m+[m[32m              ></el-option>[m
[32m+[m[32m            </el-select>[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m        </el-col>[m
[32m+[m[32m      </el-row>[m
[32m+[m[32m    </template>[m
[32m+[m
[32m+[m[32m    <template v-if="info.tplCategory == 'sub'">[m
[32m+[m[32m      <h4 class="form-header">å…³è”ä¿¡æ¯</h4>[m
[32m+[m[32m      <el-row>[m
[32m+[m[32m        <el-col :span="12">[m
[32m+[m[32m          <el-form-item>[m
[32m+[m[32m            <template #label>[m
[32m+[m[32m              å…³è”å­è¡¨çš„è¡¨å[m
[32m+[m[32m              <el-tooltip content="å…³è”å­è¡¨çš„è¡¨åï¼Œ å¦‚ï¼šsys_user" placement="top">[m
[32m+[m[32m                <el-icon><question-filled /></el-icon>[m
[32m+[m[32m              </el-tooltip>[m
[32m+[m[32m            </template>[m
[32m+[m[32m            <el-select v-model="info.subTableName" placeholder="è¯·é€‰æ‹©" @change="subSelectChange">[m
[32m+[m[32m              <el-option[m
[32m+[m[32m                v-for="(table, index) in tables"[m
[32m+[m[32m                :key="index"[m
[32m+[m[32m                :label="table.tableName + 'ï¼š' + table.tableComment"[m
[32m+[m[32m                :value="table.tableName"[m
[32m+[m[32m              ></el-option>[m
[32m+[m[32m            </el-select>[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m        </el-col>[m
[32m+[m[32m        <el-col :span="12">[m
[32m+[m[32m          <el-form-item>[m
[32m+[m[32m            <template #label>[m
[32m+[m[32m              å­è¡¨å…³è”çš„å¤–é”®å[m
[32m+[m[32m              <el-tooltip content="å­è¡¨å…³è”çš„å¤–é”®åï¼Œ å¦‚ï¼šuser_id" placement="top">[m
[32m+[m[32m                <el-icon><question-filled /></el-icon>[m
[32m+[m[32m              </el-tooltip>[m
[32m+[m[32m            </template>[m
[32m+[m[32m            <el-select v-model="info.subTableFkName" placeholder="è¯·é€‰æ‹©">[m
[32m+[m[32m              <el-option[m
[32m+[m[32m                v-for="(column, index) in subColumns"[m
[32m+[m[32m                :key="index"[m
[32m+[m[32m                :label="column.columnName + 'ï¼š' + column.columnComment"[m
[32m+[m[32m                :value="column.columnName"[m
[32m+[m[32m              ></el-option>[m
[32m+[m[32m            </el-select>[m
[32m+[m[32m          </el-form-item>[m
[32m+[m[32m        </el-col>[m
[32m+[m[32m      </el-row>[m
[32m+[m[32m    </template>[m
[32m+[m
[32m+[m[32m  </el-form>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { listMenu } from "@/api/system/menu";[m
[32m+[m
[32m+[m[32mconst subColumns = ref([]);[m
[32m+[m[32mconst menuOptions = ref([]);[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m
[32m+[m[32mconst props = defineProps({[m
[32m+[m[32m  info: {[m
[32m+[m[32m    type: Object,[m
[32m+[m[32m    default: null[m
[32m+[m[32m  },[m
[32m+[m[32m  tables: {[m
[32m+[m[32m    type: Array,[m
[32m+[m[32m    default: null[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32m// è¡¨å•æ ¡éªŒ[m
[32m+[m[32mconst rules = ref({[m
[32m+[m[32m  tplCategory: [{ required: true, message: "è¯·é€‰æ‹©ç”Ÿæˆæ¨¡æ¿", trigger: "blur" }],[m
[32m+[m[32m  packageName: [{ required: true, message: "è¯·è¾“å…¥ç”ŸæˆåŒ…è·¯å¾„", trigger: "blur" }],[m
[32m+[m[32m  moduleName: [{ required: true, message: "è¯·è¾“å…¥ç”Ÿæˆæ¨¡å—å", trigger: "blur" }],[m
[32m+[m[32m  businessName: [{ required: true, message: "è¯·è¾“å…¥ç”Ÿæˆä¸šåŠ¡å", trigger: "blur" }],[m
[32m+[m[32m  functionName: [{ required: true, message: "è¯·è¾“å…¥ç”ŸæˆåŠŸèƒ½å", trigger: "blur" }][m
[32m+[m[32m});[m
[32m+[m[32mfunction subSelectChange(value) {[m
[32m+[m[32m  props.info.subTableFkName = "";[m
[32m+[m[32m}[m
[32m+[m[32mfunction tplSelectChange(value) {[m
[32m+[m[32m  if (value !== "sub") {[m
[32m+[m[32m    props.info.subTableName = "";[m
[32m+[m[32m    props.info.subTableFkName = "";[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32mfunction setSubTableColumns(value) {[m
[32m+[m[32m  for (var item in props.tables) {[m
[32m+[m[32m    const name = props.tables[item].tableName;[m
[32m+[m[32m    if (value === name) {[m
[32m+[m[32m      subColumns.value = props.tables[item].columns;[m
[32m+[m[32m      break;[m
[32m+[m[32m    }[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m/** æŸ¥è¯¢èœå•ä¸‹æ‹‰æ ‘ç»“æ„ */[m
[32m+[m[32mfunction getMenuTreeselect() {[m
[32m+[m[32m  listMenu().then(response => {[m
[32m+[m[32m    menuOptions.value = proxy.handleTree(response.data, "menuId");[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mwatch(() => props.info.subTableName, val => {[m
[32m+[m[32m  setSubTableColumns(val);[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mwatch(() => props.info.tplWebType, val => {[m
[32m+[m[32m  if (val === '') {[m
[32m+[m[32m    props.info.tplWebType = "element-plus";[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mgetMenuTreeselect();[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/tool/gen/importTable.vue b/src/views/tool/gen/importTable.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..33b56337[m
[1m--- /dev/null[m
[1m+++ b/src/views/tool/gen/importTable.vue[m
[36m@@ -0,0 +1,118 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <!-- å¯¼å…¥è¡¨ -->[m
[32m+[m[32m  <el-dialog title="å¯¼å…¥è¡¨" v-model="visible" width="800px" top="5vh" append-to-body>[m
[32m+[m[32m    <el-form :model="queryParams" ref="queryRef" :inline="true">[m
[32m+[m[32m      <el-form-item label="è¡¨åç§°" prop="tableName">[m
[32m+[m[32m        <el-input[m
[32m+[m[32m          v-model="queryParams.tableName"[m
[32m+[m[32m          placeholder="è¯·è¾“å…¥è¡¨åç§°"[m
[32m+[m[32m          clearable[m
[32m+[m[32m          @keyup.enter="handleQuery"[m
[32m+[m[32m        />[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item label="è¡¨æè¿°" prop="tableComment">[m
[32m+[m[32m        <el-input[m
[32m+[m[32m          v-model="queryParams.tableComment"[m
[32m+[m[32m          placeholder="è¯·è¾“å…¥è¡¨æè¿°"[m
[32m+[m[32m          clearable[m
[32m+[m[32m          @keyup.enter="handleQuery"[m
[32m+[m[32m        />[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item>[m
[32m+[m[32m        <el-button type="primary" icon="Search" @click="handleQuery">æœç´¢</el-button>[m
[32m+[m[32m        <el-button icon="Refresh" @click="resetQuery">é‡ç½®</el-button>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m    </el-form>[m
[32m+[m[32m    <el-row>[m
[32m+[m[32m      <el-table @row-click="clickRow" ref="table" :data="dbTableList" @selection-change="handleSelectionChange" height="260px">[m
[32m+[m[32m        <el-table-column type="selection" width="55"></el-table-column>[m
[32m+[m[32m        <el-table-column prop="tableName" label="è¡¨åç§°" :show-overflow-tooltip="true"></el-table-column>[m
[32m+[m[32m        <el-table-column prop="tableComment" label="è¡¨æè¿°" :show-overflow-tooltip="true"></el-table-column>[m
[32m+[m[32m        <el-table-column prop="createTime" label="åˆ›å»ºæ—¶é—´"></el-table-column>[m
[32m+[m[32m        <el-table-column prop="updateTime" label="æ›´æ–°æ—¶é—´"></el-table-column>[m
[32m+[m[32m      </el-table>[m
[32m+[m[32m      <pagination[m
[32m+[m[32m        v-show="total>0"[m
[32m+[m[32m        :total="total"[m
[32m+[m[32m        v-model:page="queryParams.pageNum"[m
[32m+[m[32m        v-model:limit="queryParams.pageSize"[m
[32m+[m[32m        @pagination="getList"[m
[32m+[m[32m      />[m
[32m+[m[32m    </el-row>[m
[32m+[m[32m    <template #footer>[m
[32m+[m[32m      <div class="dialog-footer">[m
[32m+[m[32m        <el-button type="primary" @click="handleImportTable">ç¡® å®š</el-button>[m
[32m+[m[32m        <el-button @click="visible = false">å– æ¶ˆ</el-button>[m
[32m+[m[32m      </div>[m
[32m+[m[32m    </template>[m
[32m+[m[32m  </el-dialog>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport { listDbTable, importTable } from "@/api/tool/gen";[m
[32m+[m
[32m+[m[32mconst total = ref(0);[m
[32m+[m[32mconst visible = ref(false);[m
[32m+[m[32mconst tables = ref([]);[m
[32m+[m[32mconst dbTableList = ref([]);[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m
[32m+[m[32mconst queryParams = reactive({[m
[32m+[m[32m  pageNum: 1,[m
[32m+[m[32m  pageSize: 10,[m
[32m+[m[32m  tableName: undefined,[m
[32m+[m[32m  tableComment: undefined[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst emit = defineEmits(["ok"]);[m
[32m+[m
[32m+[m[32m/** æŸ¥è¯¢å‚æ•°åˆ—è¡¨ */[m
[32m+[m[32mfunction show() {[m
[32m+[m[32m  getList();[m
[32m+[m[32m  visible.value = true;[m
[32m+[m[32m}[m
[32m+[m[32m/** å•å‡»é€‰æ‹©è¡Œ */[m
[32m+[m[32mfunction clickRow(row) {[m
[32m+[m[32m  proxy.$refs.table.toggleRowSelection(row);[m
[32m+[m[32m}[m
[32m+[m[32m/** å¤šé€‰æ¡†é€‰ä¸­æ•°æ® */[m
[32m+[m[32mfunction handleSelectionChange(selection) {[m
[32m+[m[32m  tables.value = selection.map(item => item.tableName);[m
[32m+[m[32m}[m
[32m+[m[32m/** æŸ¥è¯¢è¡¨æ•°æ® */[m
[32m+[m[32mfunction getList() {[m
[32m+[m[32m  listDbTable(queryParams).then(res => {[m
[32m+[m[32m    dbTableList.value = res.rows;[m
[32m+[m[32m    total.value = res.total;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** æœç´¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleQuery() {[m
[32m+[m[32m  queryParams.pageNum = 1;[m
[32m+[m[32m  getList();[m
[32m+[m[32m}[m
[32m+[m[32m/** é‡ç½®æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction resetQuery() {[m
[32m+[m[32m  proxy.resetForm("queryRef");[m
[32m+[m[32m  handleQuery();[m
[32m+[m[32m}[m
[32m+[m[32m/** å¯¼å…¥æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleImportTable() {[m
[32m+[m[32m  const tableNames = tables.value.join(",");[m
[32m+[m[32m  if (tableNames == "") {[m
[32m+[m[32m    proxy.$modal.msgError("è¯·é€‰æ‹©è¦å¯¼å…¥çš„è¡¨");[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m[32m  importTable({ tables: tableNames }).then(res => {[m
[32m+[m[32m    proxy.$modal.msgSuccess(res.msg);[m
[32m+[m[32m    if (res.code === 200) {[m
[32m+[m[32m      visible.value = false;[m
[32m+[m[32m      emit("ok");[m
[32m+[m[32m    }[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mdefineExpose({[m
[32m+[m[32m  show,[m
[32m+[m[32m});[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/tool/gen/index.vue b/src/views/tool/gen/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..fb5bb238[m
[1m--- /dev/null[m
[1m+++ b/src/views/tool/gen/index.vue[m
[36m@@ -0,0 +1,283 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m  <div class="app-container">[m
[32m+[m[32m    <el-form :model="queryParams" ref="queryRef" :inline="true" v-show="showSearch">[m
[32m+[m[32m      <el-form-item label="è¡¨åç§°" prop="tableName">[m
[32m+[m[32m        <el-input[m
[32m+[m[32m          v-model="queryParams.tableName"[m
[32m+[m[32m          placeholder="è¯·è¾“å…¥è¡¨åç§°"[m
[32m+[m[32m          clearable[m
[32m+[m[32m          style="width: 200px"[m
[32m+[m[32m          @keyup.enter="handleQuery"[m
[32m+[m[32m        />[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item label="è¡¨æè¿°" prop="tableComment">[m
[32m+[m[32m        <el-input[m
[32m+[m[32m          v-model="queryParams.tableComment"[m
[32m+[m[32m          placeholder="è¯·è¾“å…¥è¡¨æè¿°"[m
[32m+[m[32m          clearable[m
[32m+[m[32m          style="width: 200px"[m
[32m+[m[32m          @keyup.enter="handleQuery"[m
[32m+[m[32m        />[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item label="åˆ›å»ºæ—¶é—´" style="width: 308px">[m
[32m+[m[32m        <el-date-picker[m
[32m+[m[32m          v-model="dateRange"[m
[32m+[m[32m          value-format="YYYY-MM-DD"[m
[32m+[m[32m          type="daterange"[m
[32m+[m[32m          range-separator="-"[m
[32m+[m[32m          start-placeholder="å¼€å§‹æ—¥æœŸ"[m
[32m+[m[32m          end-placeholder="ç»“æŸæ—¥æœŸ"[m
[32m+[m[32m        ></el-date-picker>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m      <el-form-item>[m
[32m+[m[32m        <el-button type="primary" icon="Search" @click="handleQuery">æœç´¢</el-button>[m
[32m+[m[32m        <el-button icon="Refresh" @click="resetQuery">é‡ç½®</el-button>[m
[32m+[m[32m      </el-form-item>[m
[32m+[m[32m    </el-form>[m
[32m+[m
[32m+[m[32m    <el-row :gutter="10" class="mb8">[m
[32m+[m[32m      <el-col :span="1.5">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="primary"[m
[32m+[m[32m          plain[m
[32m+[m[32m          icon="Download"[m
[32m+[m[32m          @click="handleGenTable"[m
[32m+[m[32m          v-hasPermi="['tool:gen:code']"[m
[32m+[m[32m        >ç”Ÿæˆ</el-button>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <el-col :span="1.5">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="info"[m
[32m+[m[32m          plain[m
[32m+[m[32m          icon="Upload"[m
[32m+[m[32m          @click="openImportTable"[m
[32m+[m[32m          v-hasPermi="['tool:gen:import']"[m
[32m+[m[32m        >å¯¼å…¥</el-button>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <el-col :span="1.5">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="success"[m
[32m+[m[32m          plain[m
[32m+[m[32m          icon="Edit"[m
[32m+[m[32m          :disabled="single"[m
[32m+[m[32m          @click="handleEditTable"[m
[32m+[m[32m          v-hasPermi="['tool:gen:edit']"[m
[32m+[m[32m        >ä¿®æ”¹</el-button>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <el-col :span="1.5">[m
[32m+[m[32m        <el-button[m
[32m+[m[32m          type="danger"[m
[32m+[m[32m          plain[m
[32m+[m[32m          icon="Delete"[m
[32m+[m[32m          :disabled="multiple"[m
[32m+[m[32m          @click="handleDelete"[m
[32m+[m[32m          v-hasPermi="['tool:gen:remove']"[m
[32m+[m[32m        >åˆ é™¤</el-button>[m
[32m+[m[32m      </el-col>[m
[32m+[m[32m      <right-toolbar v-model:showSearch="showSearch" @queryTable="getList"></right-toolbar>[m
[32m+[m[32m    </el-row>[m
[32m+[m
[32m+[m[32m    <el-table v-loading="loading" :data="tableList" @selection-change="handleSelectionChange">[m
[32m+[m[32m      <el-table-column type="selection" align="center" width="55"></el-table-column>[m
[32m+[m[32m      <el-table-column label="åºå·" type="index" width="50" align="center">[m
[32m+[m[32m        <template #default="scope">[m
[32m+[m[32m          <span>{{(queryParams.pageNum - 1) * queryParams.pageSize + scope.$index + 1}}</span>[m
[32m+[m[32m        </template>[m
[32m+[m[32m      </el-table-column>[m
[32m+[m[32m      <el-table-column[m
[32m+[m[32m        label="è¡¨åç§°"[m
[32m+[m[32m        align="center"[m
[32m+[m[32m        prop="tableName"[m
[32m+[m[32m        :show-overflow-tooltip="true"[m
[32m+[m[32m      />[m
[32m+[m[32m      <el-table-column[m
[32m+[m[32m        label="è¡¨æè¿°"[m
[32m+[m[32m        align="center"[m
[32m+[m[32m        prop="tableComment"[m
[32m+[m[32m        :show-overflow-tooltip="true"[m
[32m+[m[32m      />[m
[32m+[m[32m      <el-table-column[m
[32m+[m[32m        label="å®ä½“"[m
[32m+[m[32m        align="center"[m
[32m+[m[32m        prop="className"[m
[32m+[m[32m        :show-overflow-tooltip="true"[m
[32m+[m[32m      />[m
[32m+[m[32m      <el-table-column label="åˆ›å»ºæ—¶é—´" align="center" prop="createTime" width="160" />[m
[32m+[m[32m      <el-table-column label="æ›´æ–°æ—¶é—´" align="center" prop="updateTime" width="160" />[m
[32m+[m[32m      <el-table-column label="æ“ä½œ" align="center" width="330" class-name="small-padding fixed-width">[m
[32m+[m[32m        <template #default="scope">[m
[32m+[m[32m          <el-tooltip content="é¢„è§ˆ" placement="top">[m
[32m+[m[32m            <el-button link type="primary" icon="View" @click="handlePreview(scope.row)" v-hasPermi="['tool:gen:preview']"></el-button>[m
[32m+[m[32m          </el-tooltip>[m
[32m+[m[32m          <el-tooltip content="ç¼–è¾‘" placement="top">[m
[32m+[m[32m            <el-button link type="primary" icon="Edit" @click="handleEditTable(scope.row)" v-hasPermi="['tool:gen:edit']"></el-button>[m
[32m+[m[32m          </el-tooltip>[m
[32m+[m[32m          <el-tooltip content="åˆ é™¤" placement="top">[m
[32m+[m[32m            <el-button link type="primary" icon="Delete" @click="handleDelete(scope.row)" v-hasPermi="['tool:gen:remove']"></el-button>[m
[32m+[m[32m          </el-tooltip>[m
[32m+[m[32m          <el-tooltip content="åŒæ­¥" placement="top">[m
[32m+[m[32m            <el-button link type="primary" icon="Refresh" @click="handleSynchDb(scope.row)" v-hasPermi="['tool:gen:edit']"></el-button>[m
[32m+[m[32m          </el-tooltip>[m
[32m+[m[32m          <el-tooltip content="ç”Ÿæˆä»£ç " placement="top">[m
[32m+[m[32m            <el-button link type="primary" icon="Download" @click="handleGenTable(scope.row)" v-hasPermi="['tool:gen:code']"></el-button>[m
[32m+[m[32m          </el-tooltip>[m
[32m+[m[32m        </template>[m
[32m+[m[32m      </el-table-column>[m
[32m+[m[32m    </el-table>[m
[32m+[m[32m    <pagination[m
[32m+[m[32m      v-show="total>0"[m
[32m+[m[32m      :total="total"[m
[32m+[m[32m      v-model:page="queryParams.pageNum"[m
[32m+[m[32m      v-model:limit="queryParams.pageSize"[m
[32m+[m[32m      @pagination="getList"[m
[32m+[m[32m    />[m
[32m+[m[32m    <!-- é¢„è§ˆç•Œé¢ -->[m
[32m+[m[32m    <el-dialog :title="preview.title" v-model="preview.open" width="80%" top="5vh" append-to-body class="scrollbar">[m
[32m+[m[32m      <el-tabs v-model="preview.activeName">[m
[32m+[m[32m        <el-tab-pane[m
[32m+[m[32m          v-for="(value, key) in preview.data"[m
[32m+[m[32m          :label="key.substring(key.lastIndexOf('/')+1,key.indexOf('.vm'))"[m
[32m+[m[32m          :name="key.substring(key.lastIndexOf('/')+1,key.indexOf('.vm'))"[m
[32m+[m[32m          :key="value"[m
[32m+[m[32m        >[m
[32m+[m[32m          <el-link :underline="false" icon="DocumentCopy" v-copyText="value" v-copyText:callback="copyTextSuccess" style="float:right">&nbsp;å¤åˆ¶</el-link>[m
[32m+[m[32m          <pre>{{ value }}</pre>[m
[32m+[m[32m        </el-tab-pane>[m
[32m+[m[32m      </el-tabs>[m
[32m+[m[32m    </el-dialog>[m
[32m+[m[32m    <import-table ref="importRef" @ok="handleQuery" />[m
[32m+[m[32m  </div>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup name="Gen">[m
[32m+[m[32mimport { listTable, previewTable, delTable, genCode, synchDb } from "@/api/tool/gen";[m
[32m+[m[32mimport router from "@/router";[m
[32m+[m[32mimport importTable from "./importTable";[m
[32m+[m
[32m+[m[32mconst route = useRoute();[m
[32m+[m[32mconst { proxy } = getCurrentInstance();[m
[32m+[m
[32m+[m[32mconst tableList = ref([]);[m
[32m+[m[32mconst loading = ref(true);[m
[32m+[m[32mconst showSearch = ref(true);[m
[32m+[m[32mconst ids = ref([]);[m
[32m+[m[32mconst single = ref(true);[m
[32m+[m[32mconst multiple = ref(true);[m
[32m+[m[32mconst total = ref(0);[m
[32m+[m[32mconst tableNames = ref([]);[m
[32m+[m[32mconst dateRange = ref([]);[m
[32m+[m[32mconst uniqueId = ref("");[m
[32m+[m
[32m+[m[32mconst data = reactive({[m
[32m+[m[32m  queryParams: {[m
[32m+[m[32m    pageNum: 1,[m
[32m+[m[32m    pageSize: 10,[m
[32m+[m[32m    tableName: undefined,[m
[32m+[m[32m    tableComment: undefined[m
[32m+[m[32m  },[m
[32m+[m[32m  preview: {[m
[32m+[m[32m    open: false,[m
[32m+[m[32m    title: "ä»£ç é¢„è§ˆ",[m
[32m+[m[32m    data: {},[m
[32m+[m[32m    activeName: "domain.java"[m
[32m+[m[32m  }[m
[32m+[m[32m});[m
[32m+[m
[32m+[m[32mconst { queryParams, preview } = toRefs(data);[m
[32m+[m
[32m+[m[32monActivated(() => {[m
[32m+[m[32m  const time = route.query.t;[m
[32m+[m[32m  if (time != null && time != uniqueId.value) {[m
[32m+[m[32m    uniqueId.value = time;[m
[32m+[m[32m    queryParams.value.pageNum = Number(route.query.pageNum);[m
[32m+[m[32m    dateRange.value = [];[m
[32m+[m[32m    proxy.resetForm("queryForm");[m
[32m+[m[32m    getList();[m
[32m+[m[32m  }[m
[32m+[m[32m})[m
[32m+[m
[32m+[m[32m/** æŸ¥è¯¢è¡¨é›†åˆ */[m
[32m+[m[32mfunction getList() {[m
[32m+[m[32m  loading.value = true;[m
[32m+[m[32m  listTable(proxy.addDateRange(queryParams.value, dateRange.value)).then(response => {[m
[32m+[m[32m    tableList.value = response.rows;[m
[32m+[m[32m    total.value = response.total;[m
[32m+[m[32m    loading.value = false;[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** æœç´¢æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleQuery() {[m
[32m+[m[32m  queryParams.value.pageNum = 1;[m
[32m+[m[32m  getList();[m
[32m+[m[32m}[m
[32m+[m[32m/** ç”Ÿæˆä»£ç æ“ä½œ */[m
[32m+[m[32mfunction handleGenTable(row) {[m
[32m+[m[32m  const tbNames = row.tableName || tableNames.value;[m
[32m+[m[32m  if (tbNames == "") {[m
[32m+[m[32m    proxy.$modal.msgError("è¯·é€‰æ‹©è¦ç”Ÿæˆçš„æ•°æ®");[m
[32m+[m[32m    return;[m
[32m+[m[32m  }[m
[32m+[m[32m  if (row.genType === "1") {[m
[32m+[m[32m    genCode(row.tableName).then(response => {[m
[32m+[m[32m      proxy.$modal.msgSuccess("æˆåŠŸç”Ÿæˆåˆ°è‡ªå®šä¹‰è·¯å¾„ï¼š" + row.genPath);[m
[32m+[m[32m    });[m
[32m+[m[32m  } else {[m
[32m+[m[32m    proxy.$download.zip("/tool/gen/batchGenCode?tables=" + tbNames, "ruoyi.zip");[m
[32m+[m[32m  }[m
[32m+[m[32m}[m
[32m+[m[32m/** åŒæ­¥æ•°æ®åº“æ“ä½œ */[m
[32m+[m[32mfunction handleSynchDb(row) {[m
[32m+[m[32m  const tableName = row.tableName;[m
[32m+[m[32m  proxy.$modal.confirm('ç¡®è®¤è¦å¼ºåˆ¶åŒæ­¥"' + tableName + '"è¡¨ç»“æ„å—ï¼Ÿ').then(function () {[m
[32m+[m[32m    return synchDb(tableName);[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    proxy.$modal.msgSuccess("åŒæ­¥æˆåŠŸ");[m
[32m+[m[32m  }).catch(() => {});[m
[32m+[m[32m}[m
[32m+[m[32m/** æ‰“å¼€å¯¼å…¥è¡¨å¼¹çª— */[m
[32m+[m[32mfunction openImportTable() {[m
[32m+[m[32m  proxy.$refs["importRef"].show();[m
[32m+[m[32m}[m
[32m+[m[32m/** é‡ç½®æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction resetQuery() {[m
[32m+[m[32m  dateRange.value = [];[m
[32m+[m[32m  proxy.resetForm("queryRef");[m
[32m+[m[32m  handleQuery();[m
[32m+[m[32m}[m
[32m+[m[32m/** é¢„è§ˆæŒ‰é’® */[m
[32m+[m[32mfunction handlePreview(row) {[m
[32m+[m[32m  previewTable(row.tableId).then(response => {[m
[32m+[m[32m    preview.value.data = response.data;[m
[32m+[m[32m    preview.value.open = true;[m
[32m+[m[32m    preview.value.activeName = "domain.java";[m
[32m+[m[32m  });[m
[32m+[m[32m}[m
[32m+[m[32m/** å¤åˆ¶ä»£ç æˆåŠŸ */[m
[32m+[m[32mfunction copyTextSuccess() {[m
[32m+[m[32m  proxy.$modal.msgSuccess("å¤åˆ¶æˆåŠŸ");[m
[32m+[m[32m}[m
[32m+[m[32m// å¤šé€‰æ¡†é€‰ä¸­æ•°æ®[m
[32m+[m[32mfunction handleSelectionChange(selection) {[m
[32m+[m[32m  ids.value = selection.map(item => item.tableId);[m
[32m+[m[32m  tableNames.value = selection.map(item => item.tableName);[m
[32m+[m[32m  single.value = selection.length != 1;[m
[32m+[m[32m  multiple.value = !selection.length;[m
[32m+[m[32m}[m
[32m+[m[32m/** ä¿®æ”¹æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleEditTable(row) {[m
[32m+[m[32m  const tableId = row.tableId || ids.value[0];[m
[32m+[m[32m  router.push({ path: "/tool/gen-edit/index/" + tableId, query: { pageNum: queryParams.value.pageNum } });[m
[32m+[m[32m}[m
[32m+[m[32m/** åˆ é™¤æŒ‰é’®æ“ä½œ */[m
[32m+[m[32mfunction handleDelete(row) {[m
[32m+[m[32m  const tableIds = row.tableId || ids.value;[m
[32m+[m[32m  proxy.$modal.confirm('æ˜¯å¦ç¡®è®¤åˆ é™¤è¡¨ç¼–å·ä¸º"' + tableIds + '"çš„æ•°æ®é¡¹ï¼Ÿ').then(function () {[m
[32m+[m[32m    return delTable(tableIds);[m
[32m+[m[32m  }).then(() => {[m
[32m+[m[32m    getList();[m
[32m+[m[32m    proxy.$modal.msgSuccess("åˆ é™¤æˆåŠŸ");[m
[32m+[m[32m  }).catch(() => {});[m
[32m+[m[32m}[m
[32m+[m
[32m+[m[32mgetList();[m
[32m+[m[32m</script>[m
[1mdiff --git a/src/views/tool/swagger/index.vue b/src/views/tool/swagger/index.vue[m
[1mnew file mode 100644[m
[1mindex 00000000..a44fa711[m
[1m--- /dev/null[m
[1m+++ b/src/views/tool/swagger/index.vue[m
[36m@@ -0,0 +1,9 @@[m
[32m+[m[32m<template>[m
[32m+[m[32m   <i-frame v-model:src="url"></i-frame>[m
[32m+[m[32m</template>[m
[32m+[m
[32m+[m[32m<script setup>[m
[32m+[m[32mimport iFrame from '@/components/iFrame'[m
[32m+[m
[32m+[m[32mconst url = ref(import.meta.env.VITE_APP_BASE_API + "/swagger-ui/index.html")[m
[32m+[m[32m</script>[m
[1mdiff --git a/zNova-merchant/src/main/java/com/zNova/system/controller/HardwarePowerSupplyController.java b/zNova-merchant/src/main/java/com/zNova/system/controller/HardwarePowerSupplyController.java[m
[1mnew file mode 100644[m
[1mindex 00000000..b07a0046[m
[1m--- /dev/null[m
[1m+++ b/zNova-merchant/src/main/java/com/zNova/system/controller/HardwarePowerSupplyController.java[m
[36m@@ -0,0 +1,104 @@[m
[32m+[m[32mpackage com.zNova.system.controller;[m
[32m+[m
[32m+[m[32mimport java.util.List;[m
[32m+[m[32mimport javax.servlet.http.HttpServletResponse;[m
[32m+[m[32mimport org.springframework.security.access.prepost.PreAuthorize;[m
[32m+[m[32mimport org.springframework.beans.factory.annotation.Autowired;[m
[32m+[m[32mimport org.springframework.web.bind.annotation.GetMapping;[m
[32m+[m[32mimport org.springframework.web.bind.annotation.PostMapping;[m
[32m+[m[32mimport org.springframework.web.bind.annotation.PutMapping;[m
[32m+[m[32mimport org.springframework.web.bind.annotation.DeleteMapping;[m
[32m+[m[32mimport org.springframework.web.bind.annotation.PathVariable;[m
[32m+[m[32mimport org.springframework.web.bind.annotation.RequestBody;[m
[32m+[m[32mimport org.springframework.web.bind.annotation.RequestMapping;[m
[32m+[m[32mimport org.springframework.web.bind.annotation.RestController;[m
[32m+[m[32mimport com.zNova.common.annotation.Log;[m
[32m+[m[32mimport com.zNova.common.core.controller.BaseController;[m
[32m+[m[32mimport com.zNova.common.core.domain.AjaxResult;[m
[32m+[m[32mimport com.zNova.common.enums.BusinessType;[m
[32m+[m[32mimport com.zNova.system.domain.HardwarePowerSupply;[m
[32m+[m[32mimport com.zNova.system.service.IHardwarePowerSupplyService;[m
[32m+[m[32mimport com.zNova.common.utils.poi.ExcelUtil;[m
[32m+[m[32mimport com.zNova.common.core.page.TableDataInfo;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * ç”µæºè§„æ ¼Controller[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m * @author ruoyi[m
[32m+[m[32m * @date 2025-11-29[m
[32m+[m[32m */[m
[32m+[m[32m@RestController[m
[32m+[m[32m@RequestMapping("/system/supply")[m
[32m+[m[32mpublic class HardwarePowerSupplyController extends BaseController[m
[32m+[m[32m{[m
[32m+[m[32m    @Autowired[m
[32m+[m[32m    private IHardwarePowerSupplyService hardwarePowerSupplyService;[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * æŸ¥è¯¢ç”µæºè§„æ ¼åˆ—è¡¨[m
[32m+[m[32m     */[m
[32m+[m[32m    @PreAuthorize("@ss.hasPermi('system:supply:list')")[m
[32m+[m[32m    @GetMapping("/list")[m
[32m+[m[32m    public TableDataInfo list(HardwarePowerSupply hardwarePowerSupply)[m
[32m+[m[32m    {[m
[32m+[m[32m        startPage();[m
[32m+[m[32m        List<HardwarePowerSupply> list = hardwarePowerSupplyService.selectHardwarePowerSupplyList(hardwarePowerSupply);[m
[32m+[m[32m        return getDataTable(list);[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * å¯¼å‡ºç”µæºè§„æ ¼åˆ—è¡¨[m
[32m+[m[32m     */[m
[32m+[m[32m    @PreAuthorize("@ss.hasPermi('system:supply:export')")[m
[32m+[m[32m    @Log(title = "ç”µæºè§„æ ¼", businessType = BusinessType.EXPORT)[m
[32m+[m[32m    @PostMapping("/export")[m
[32m+[m[32m    public void export(HttpServletResponse response, HardwarePowerSupply hardwarePowerSupply)[m
[32m+[m[32m    {[m
[32m+[m[32m        List<HardwarePowerSupply> list = hardwarePowerSupplyService.selectHardwarePowerSupplyList(hardwarePowerSupply);[m
[32m+[m[32m        ExcelUtil<HardwarePowerSupply> util = new ExcelUtil<HardwarePowerSupply>(HardwarePowerSupply.class);[m
[32m+[m[32m        util.exportExcel(response, list, "ç”µæºè§„æ ¼æ•°æ®");[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * è·å–ç”µæºè§„æ ¼è¯¦ç»†ä¿¡æ¯[m
[32m+[m[32m     */[m
[32m+[m[32m    @PreAuthorize("@ss.hasPermi('system:supply:query')")[m
[32m+[m[32m    @GetMapping(value = "/{id}")[m
[32m+[m[32m    public AjaxResult getInfo(@PathVariable("id") Long id)[m
[32m+[m[32m    {[m
[32m+[m[32m        return success(hardwarePowerSupplyService.selectHardwarePowerSupplyById(id));[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * æ–°å¢ç”µæºè§„æ ¼[m
[32m+[m[32m     */[m
[32m+[m[32m    @PreAuthorize("@ss.hasPermi('system:supply:add')")[m
[32m+[m[32m    @Log(title = "ç”µæºè§„æ ¼", businessType = BusinessType.INSERT)[m
[32m+[m[32m    @PostMapping[m
[32m+[m[32m    public AjaxResult add(@RequestBody HardwarePowerSupply hardwarePowerSupply)[m
[32m+[m[32m    {[m
[32m+[m[32m        return toAjax(hardwarePowerSupplyService.insertHardwarePowerSupply(hardwarePowerSupply));[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * ä¿®æ”¹ç”µæºè§„æ ¼[m
[32m+[m[32m     */[m
[32m+[m[32m    @PreAuthorize("@ss.hasPermi('system:supply:edit')")[m
[32m+[m[32m    @Log(title = "ç”µæºè§„æ ¼", businessType = BusinessType.UPDATE)[m
[32m+[m[32m    @PutMapping[m
[32m+[m[32m    public AjaxResult edit(@RequestBody HardwarePowerSupply hardwarePowerSupply)[m
[32m+[m[32m    {[m
[32m+[m[32m        return toAjax(hardwarePowerSupplyService.updateHardwarePowerSupply(hardwarePowerSupply));[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * åˆ é™¤ç”µæºè§„æ ¼[m
[32m+[m[32m     */[m
[32m+[m[32m    @PreAuthorize("@ss.hasPermi('system:supply:remove')")[m
[32m+[m[32m    @Log(title = "ç”µæºè§„æ ¼", businessType = BusinessType.DELETE)[m
[32m+[m	[32m@DeleteMapping("/{ids}")[m
[32m+[m[32m    public AjaxResult remove(@PathVariable Long[] ids)[m
[32m+[m[32m    {[m
[32m+[m[32m        return toAjax(hardwarePowerSupplyService.deleteHardwarePowerSupplyByIds(ids));[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[1mdiff --git a/zNova-merchant/src/main/java/com/zNova/system/domain/HardwarePowerSupply.java b/zNova-merchant/src/main/java/com/zNova/system/domain/HardwarePowerSupply.java[m
[1mnew file mode 100644[m
[1mindex 00000000..d7f59d7a[m
[1m--- /dev/null[m
[1m+++ b/zNova-merchant/src/main/java/com/zNova/system/domain/HardwarePowerSupply.java[m
[36m@@ -0,0 +1,54 @@[m
[32m+[m[32mpackage com.zNova.system.domain;[m
[32m+[m
[32m+[m[32mimport org.apache.commons.lang3.builder.ToStringBuilder;[m
[32m+[m[32mimport org.apache.commons.lang3.builder.ToStringStyle;[m
[32m+[m[32mimport com.zNova.common.annotation.Excel;[m
[32m+[m[32mimport com.zNova.common.core.domain.BaseEntity;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * ç”µæºè§„æ ¼å¯¹è±¡ hardware_power_supply[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m * @author ruoyi[m
[32m+[m[32m * @date 2025-11-29[m
[32m+[m[32m */[m
[32m+[m[32mpublic class HardwarePowerSupply extends BaseEntity[m
[32m+[m[32m{[m
[32m+[m[32m    private static final long serialVersionUID = 1L;[m
[32m+[m
[32m+[m[32m    /** $column.columnComment */[m
[32m+[m[32m    private Long id;[m
[32m+[m
[32m+[m[32m    /** æ€»ç“¦æ•°(W) */[m
[32m+[m[32m    @Excel(name = "æ€»ç“¦æ•°(W)")[m
[32m+[m[32m    private Long wattage;[m
[32m+[m
[32m+[m[32m    public void setId(Long id)[m[41m [m
[32m+[m[32m    {[m
[32m+[m[32m        this.id = id;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    public Long getId()[m[41m [m
[32m+[m[32m    {[m
[32m+[m[32m        return id;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    public void setWattage(Long wattage)[m[41m [m
[32m+[m[32m    {[m
[32m+[m[32m        this.wattage = wattage;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    public Long getWattage()[m[41m [m
[32m+[m[32m    {[m
[32m+[m[32m        return wattage;[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    @Override[m
[32m+[m[32m    public String toString() {[m
[32m+[m[32m        return new ToStringBuilder(this,ToStringStyle.MULTI_LINE_STYLE)[m
[32m+[m[32m            .append("id", getId())[m
[32m+[m[32m            .append("wattage", getWattage())[m
[32m+[m[32m            .append("createTime", getCreateTime())[m
[32m+[m[32m            .append("updateTime", getUpdateTime())[m
[32m+[m[32m            .toString();[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[1mdiff --git a/zNova-merchant/src/main/java/com/zNova/system/mapper/HardwarePowerSupplyMapper.java b/zNova-merchant/src/main/java/com/zNova/system/mapper/HardwarePowerSupplyMapper.java[m
[1mnew file mode 100644[m
[1mindex 00000000..7b8e0972[m
[1m--- /dev/null[m
[1m+++ b/zNova-merchant/src/main/java/com/zNova/system/mapper/HardwarePowerSupplyMapper.java[m
[36m@@ -0,0 +1,61 @@[m
[32m+[m[32mpackage com.zNova.system.mapper;[m
[32m+[m
[32m+[m[32mimport java.util.List;[m
[32m+[m[32mimport com.zNova.system.domain.HardwarePowerSupply;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * ç”µæºè§„æ ¼Mapperæ¥å£[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m * @author ruoyi[m
[32m+[m[32m * @date 2025-11-29[m
[32m+[m[32m */[m
[32m+[m[32mpublic interface HardwarePowerSupplyMapper[m[41m [m
[32m+[m[32m{[m
[32m+[m[32m    /**[m
[32m+[m[32m     * æŸ¥è¯¢ç”µæºè§„æ ¼[m
[32m+[m[32m     *[m[41m [m
[32m+[m[32m     * @param id ç”µæºè§„æ ¼ä¸»é”®[m
[32m+[m[32m     * @return ç”µæºè§„æ ¼[m
[32m+[m[32m     */[m
[32m+[m[32m    public HardwarePowerSupply selectHardwarePowerSupplyById(Long id);[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * æŸ¥è¯¢ç”µæºè§„æ ¼åˆ—è¡¨[m
[32m+[m[32m     *[m[41m [m
[32m+[m[32m     * @param hardwarePowerSupply ç”µæºè§„æ ¼[m
[32m+[m[32m     * @return ç”µæºè§„æ ¼é›†åˆ[m
[32m+[m[32m     */[m
[32m+[m[32m    public List<HardwarePowerSupply> selectHardwarePowerSupplyList(HardwarePowerSupply hardwarePowerSupply);[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * æ–°å¢ç”µæºè§„æ ¼[m
[32m+[m[32m     *[m[41m [m
[32m+[m[32m     * @param hardwarePowerSupply ç”µæºè§„æ ¼[m
[32m+[m[32m     * @return ç»“æœ[m
[32m+[m[32m     */[m
[32m+[m[32m    public int insertHardwarePowerSupply(HardwarePowerSupply hardwarePowerSupply);[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * ä¿®æ”¹ç”µæºè§„æ ¼[m
[32m+[m[32m     *[m[41m [m
[32m+[m[32m     * @param hardwarePowerSupply ç”µæºè§„æ ¼[m
[32m+[m[32m     * @return ç»“æœ[m
[32m+[m[32m     */[m
[32m+[m[32m    public int updateHardwarePowerSupply(HardwarePowerSupply hardwarePowerSupply);[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * åˆ é™¤ç”µæºè§„æ ¼[m
[32m+[m[32m     *[m[41m [m
[32m+[m[32m     * @param id ç”µæºè§„æ ¼ä¸»é”®[m
[32m+[m[32m     * @return ç»“æœ[m
[32m+[m[32m     */[m
[32m+[m[32m    public int deleteHardwarePowerSupplyById(Long id);[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * æ‰¹é‡åˆ é™¤ç”µæºè§„æ ¼[m
[32m+[m[32m     *[m[41m [m
[32m+[m[32m     * @param ids éœ€è¦åˆ é™¤çš„æ•°æ®ä¸»é”®é›†åˆ[m
[32m+[m[32m     * @return ç»“æœ[m
[32m+[m[32m     */[m
[32m+[m[32m    public int deleteHardwarePowerSupplyByIds(Long[] ids);[m
[32m+[m[32m}[m
[1mdiff --git a/zNova-merchant/src/main/java/com/zNova/system/service/IHardwarePowerSupplyService.java b/zNova-merchant/src/main/java/com/zNova/system/service/IHardwarePowerSupplyService.java[m
[1mnew file mode 100644[m
[1mindex 00000000..807e09af[m
[1m--- /dev/null[m
[1m+++ b/zNova-merchant/src/main/java/com/zNova/system/service/IHardwarePowerSupplyService.java[m
[36m@@ -0,0 +1,61 @@[m
[32m+[m[32mpackage com.zNova.system.service;[m
[32m+[m
[32m+[m[32mimport java.util.List;[m
[32m+[m[32mimport com.zNova.system.domain.HardwarePowerSupply;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * ç”µæºè§„æ ¼Serviceæ¥å£[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m * @author ruoyi[m
[32m+[m[32m * @date 2025-11-29[m
[32m+[m[32m */[m
[32m+[m[32mpublic interface IHardwarePowerSupplyService[m[41m [m
[32m+[m[32m{[m
[32m+[m[32m    /**[m
[32m+[m[32m     * æŸ¥è¯¢ç”µæºè§„æ ¼[m
[32m+[m[32m     *[m[41m [m
[32m+[m[32m     * @param id ç”µæºè§„æ ¼ä¸»é”®[m
[32m+[m[32m     * @return ç”µæºè§„æ ¼[m
[32m+[m[32m     */[m
[32m+[m[32m    public HardwarePowerSupply selectHardwarePowerSupplyById(Long id);[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * æŸ¥è¯¢ç”µæºè§„æ ¼åˆ—è¡¨[m
[32m+[m[32m     *[m[41m [m
[32m+[m[32m     * @param hardwarePowerSupply ç”µæºè§„æ ¼[m
[32m+[m[32m     * @return ç”µæºè§„æ ¼é›†åˆ[m
[32m+[m[32m     */[m
[32m+[m[32m    public List<HardwarePowerSupply> selectHardwarePowerSupplyList(HardwarePowerSupply hardwarePowerSupply);[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * æ–°å¢ç”µæºè§„æ ¼[m
[32m+[m[32m     *[m[41m [m
[32m+[m[32m     * @param hardwarePowerSupply ç”µæºè§„æ ¼[m
[32m+[m[32m     * @return ç»“æœ[m
[32m+[m[32m     */[m
[32m+[m[32m    public int insertHardwarePowerSupply(HardwarePowerSupply hardwarePowerSupply);[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * ä¿®æ”¹ç”µæºè§„æ ¼[m
[32m+[m[32m     *[m[41m [m
[32m+[m[32m     * @param hardwarePowerSupply ç”µæºè§„æ ¼[m
[32m+[m[32m     * @return ç»“æœ[m
[32m+[m[32m     */[m
[32m+[m[32m    public int updateHardwarePowerSupply(HardwarePowerSupply hardwarePowerSupply);[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * æ‰¹é‡åˆ é™¤ç”µæºè§„æ ¼[m
[32m+[m[32m     *[m[41m [m
[32m+[m[32m     * @param ids éœ€è¦åˆ é™¤çš„ç”µæºè§„æ ¼ä¸»é”®é›†åˆ[m
[32m+[m[32m     * @return ç»“æœ[m
[32m+[m[32m     */[m
[32m+[m[32m    public int deleteHardwarePowerSupplyByIds(Long[] ids);[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * åˆ é™¤ç”µæºè§„æ ¼ä¿¡æ¯[m
[32m+[m[32m     *[m[41m [m
[32m+[m[32m     * @param id ç”µæºè§„æ ¼ä¸»é”®[m
[32m+[m[32m     * @return ç»“æœ[m
[32m+[m[32m     */[m
[32m+[m[32m    public int deleteHardwarePowerSupplyById(Long id);[m
[32m+[m[32m}[m
[1mdiff --git a/zNova-merchant/src/main/java/com/zNova/system/service/impl/HardwarePowerSupplyServiceImpl.java b/zNova-merchant/src/main/java/com/zNova/system/service/impl/HardwarePowerSupplyServiceImpl.java[m
[1mnew file mode 100644[m
[1mindex 00000000..56e3370f[m
[1m--- /dev/null[m
[1m+++ b/zNova-merchant/src/main/java/com/zNova/system/service/impl/HardwarePowerSupplyServiceImpl.java[m
[36m@@ -0,0 +1,96 @@[m
[32m+[m[32mpackage com.zNova.system.service.impl;[m
[32m+[m
[32m+[m[32mimport java.util.List;[m
[32m+[m[32mimport com.zNova.common.utils.DateUtils;[m
[32m+[m[32mimport org.springframework.beans.factory.annotation.Autowired;[m
[32m+[m[32mimport org.springframework.stereotype.Service;[m
[32m+[m[32mimport com.zNova.system.mapper.HardwarePowerSupplyMapper;[m
[32m+[m[32mimport com.zNova.system.domain.HardwarePowerSupply;[m
[32m+[m[32mimport com.zNova.system.service.IHardwarePowerSupplyService;[m
[32m+[m
[32m+[m[32m/**[m
[32m+[m[32m * ç”µæºè§„æ ¼Serviceä¸šåŠ¡å±‚å¤„ç†[m
[32m+[m[32m *[m[41m [m
[32m+[m[32m * @author ruoyi[m
[32m+[m[32m * @date 2025-11-29[m
[32m+[m[32m */[m
[32m+[m[32m@Service[m
[32m+[m[32mpublic class HardwarePowerSupplyServiceImpl implements IHardwarePowerSupplyService[m[41m [m
[32m+[m[32m{[m
[32m+[m[32m    @Autowired[m
[32m+[m[32m    private HardwarePowerSupplyMapper hardwarePowerSupplyMapper;[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * æŸ¥è¯¢ç”µæºè§„æ ¼[m
[32m+[m[32m     *[m[41m [m
[32m+[m[32m     * @param id ç”µæºè§„æ ¼ä¸»é”®[m
[32m+[m[32m     * @return ç”µæºè§„æ ¼[m
[32m+[m[32m     */[m
[32m+[m[32m    @Override[m
[32m+[m[32m    public HardwarePowerSupply selectHardwarePowerSupplyById(Long id)[m
[32m+[m[32m    {[m
[32m+[m[32m        return hardwarePowerSupplyMapper.selectHardwarePowerSupplyById(id);[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * æŸ¥è¯¢ç”µæºè§„æ ¼åˆ—è¡¨[m
[32m+[m[32m     *[m[41m [m
[32m+[m[32m     * @param hardwarePowerSupply ç”µæºè§„æ ¼[m
[32m+[m[32m     * @return ç”µæºè§„æ ¼[m
[32m+[m[32m     */[m
[32m+[m[32m    @Override[m
[32m+[m[32m    public List<HardwarePowerSupply> selectHardwarePowerSupplyList(HardwarePowerSupply hardwarePowerSupply)[m
[32m+[m[32m    {[m
[32m+[m[32m        return hardwarePowerSupplyMapper.selectHardwarePowerSupplyList(hardwarePowerSupply);[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * æ–°å¢ç”µæºè§„æ ¼[m
[32m+[m[32m     *[m[41m [m
[32m+[m[32m     * @param hardwarePowerSupply ç”µæºè§„æ ¼[m
[32m+[m[32m     * @return ç»“æœ[m
[32m+[m[32m     */[m
[32m+[m[32m    @Override[m
[32m+[m[32m    public int insertHardwarePowerSupply(HardwarePowerSupply hardwarePowerSupply)[m
[32m+[m[32m    {[m
[32m+[m[32m        hardwarePowerSupply.setCreateTime(DateUtils.getNowDate());[m
[32m+[m[32m        return hardwarePowerSupplyMapper.insertHardwarePowerSupply(hardwarePowerSupply);[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * ä¿®æ”¹ç”µæºè§„æ ¼[m
[32m+[m[32m     *[m[41m [m
[32m+[m[32m     * @param hardwarePowerSupply ç”µæºè§„æ ¼[m
[32m+[m[32m     * @return ç»“æœ[m
[32m+[m[32m     */[m
[32m+[m[32m    @Override[m
[32m+[m[32m    public int updateHardwarePowerSupply(HardwarePowerSupply hardwarePowerSupply)[m
[32m+[m[32m    {[m
[32m+[m[32m        hardwarePowerSupply.setUpdateTime(DateUtils.getNowDate());[m
[32m+[m[32m        return hardwarePowerSupplyMapper.updateHardwarePowerSupply(hardwarePowerSupply);[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * æ‰¹é‡åˆ é™¤ç”µæºè§„æ ¼[m
[32m+[m[32m     *[m[41m [m
[32m+[m[32m     * @param ids éœ€è¦åˆ é™¤çš„ç”µæºè§„æ ¼ä¸»é”®[m
[32m+[m[32m     * @return ç»“æœ[m
[32m+[m[32m     */[m
[32m+[m[32m    @Override[m
[32m+[m[32m    public int deleteHardwarePowerSupplyByIds(Long[] ids)[m
[32m+[m[32m    {[m
[32m+[m[32m        return hardwarePowerSupplyMapper.deleteHardwarePowerSupplyByIds(ids);[m
[32m+[m[32m    }[m
[32m+[m
[32m+[m[32m    /**[m
[32m+[m[32m     * åˆ é™¤ç”µæºè§„æ ¼ä¿¡æ¯[m
[32m+[m[32m     *[m[41m [m
[32m+[m[32m     * @param id ç”µæºè§„æ ¼ä¸»é”®[m
[32m+[m[32m     * @return ç»“æœ[m
[32m+[m[32m     */[m
[32m+[m[32m    @Override[m
[32m+[m[32m    public int deleteHardwarePowerSupplyById(Long id)[m
[32m+[m[32m    {[m
[32m+[m[32m        return hardwarePowerSupplyMapper.deleteHardwarePowerSupplyById(id);[m
[32m+[m[32m    }[m
[32m+[m[32m}[m
[1mdiff --git a/zNova-merchant/src/main/resources/mapper/system/HardwarePowerSupplyMapper.xml b/zNova-merchant/src/main/resources/mapper/system/HardwarePowerSupplyMapper.xml[m
[1mnew file mode 100644[m
[1mindex 00000000..b0c263c4[m
[1m--- /dev/null[m
[1m+++ b/zNova-merchant/src/main/resources/mapper/system/HardwarePowerSupplyMapper.xml[m
[36m@@ -0,0 +1,64 @@[m
[32m+[m[32m<?xml version="1.0" encoding="UTF-8" ?>[m
[32m+[m[32m<!DOCTYPE mapper[m
[32m+[m[32mPUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"[m
[32m+[m[32m"http://mybatis.org/dtd/mybatis-3-mapper.dtd">[m
[32m+[m[32m<mapper namespace="com.zNova.system.mapper.HardwarePowerSupplyMapper">[m
[32m+[m[41m    [m
[32m+[m[32m    <resultMap type="HardwarePowerSupply" id="HardwarePowerSupplyResult">[m
[32m+[m[32m        <result property="id"    column="id"    />[m
[32m+[m[32m        <result property="wattage"    column="wattage"    />[m
[32m+[m[32m        <result property="createTime"    column="create_time"    />[m
[32m+[m[32m        <result property="updateTime"    column="update_time"    />[m
[32m+[m[32m    </resultMap>[m
[32m+[m
[32m+[m[32m    <sql id="selectHardwarePowerSupplyVo">[m
[32m+[m[32m        select id, wattage, create_time, update_time from hardware_power_supply[m
[32m+[m[32m    </sql>[m
[32m+[m
[32m+[m[32m    <select id="selectHardwarePowerSupplyList" parameterType="HardwarePowerSupply" resultMap="HardwarePowerSupplyResult">[m
[32m+[m[32m        <include refid="selectHardwarePowerSupplyVo"/>[m
[32m+[m[32m        <where>[m[41m  [m
[32m+[m[32m            <if test="wattage != null "> and wattage = #{wattage}</if>[m
[32m+[m[32m        </where>[m
[32m+[m[32m    </select>[m
[32m+[m[41m    [m
[32m+[m[32m    <select id="selectHardwarePowerSupplyById" parameterType="Long" resultMap="HardwarePowerSupplyResult">[m
[32m+[m[32m        <include refid="selectHardwarePowerSupplyVo"/>[m
[32m+[m[32m        where id = #{id}[m
[32m+[m[32m    </select>[m
[32m+[m
[32m+[m[32m    <insert id="insertHardwarePowerSupply" parameterType="HardwarePowerSupply" useGeneratedKeys="true" keyProperty="id">[m
[32m+[m[32m        insert into hardware_power_supply[m
[32m+[m[32m        <trim prefix="(" suffix=")" suffixOverrides=",">[m
[32m+[m[32m            <if test="wattage != null">wattage,</if>[m
[32m+[m[32m            <if test="createTime != null">create_time,</if>[m
[32m+[m[32m            <if test="updateTime != null">update_time,</if>[m
[32m+[m[32m         </trim>[m
[32m+[m[32m        <trim prefix="values (" suffix=")" suffixOverrides=",">[m
[32m+[m[32m            <if test="wattage != null">#{wattage},</if>[m
[32m+[m[32m            <if test="createTime != null">#{createTime},</if>[m
[32m+[m[32m            <if test="updateTime != null">#{updateTime},</if>[m
[32m+[m[32m         </trim>[m
[32m+[m[32m    </insert>[m
[32m+[m
[32m+[m[32m    <update id="updateHardwarePowerSupply" parameterType="HardwarePowerSupply">[m
[32m+[m[32m        update hardware_power_supply[m
[32m+[m[32m        <trim prefix="SET" suffixOverrides=",">[m
[32m+[m[32m            <if test="wattage != null">wattage = #{wattage},</if>[m
[32m+[m[32m            <if test="createTime != null">create_time = #{createTime},</if>[m
[32m+[m[32m            <if test="updateTime != null">update_time = #{updateTime},</if>[m
[32m+[m[32m        </trim>[m
[32m+[m[32m        where id = #{id}[m
[32m+[m[32m    </update>[m
[32m+[m
[32m+[m[32m    <delete id="deleteHardwarePowerSupplyById" parameterType="Long">[m
[32m+[m[32m        delete from hardware_power_supply where id = #{id}[m
[32m+[m[32m    </delete>[m
[32m+[m
[32m+[m[32m    <delete id="deleteHardwarePowerSupplyByIds" parameterType="String">[m
[32m+[m[32m        delete from hardware_power_supply where id in[m[41m [m
[32m+[m[32m        <foreach item="id" collection="array" open="(" separator="," close=")">[m
[32m+[m[32m            #{id}[m
[32m+[m[32m        </foreach>[m
[32m+[m[32m    </delete>[m
[32m+[m[32m</mapper>[m
\ No newline at end of file[m
